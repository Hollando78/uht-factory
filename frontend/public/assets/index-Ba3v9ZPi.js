function Ule(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Ea(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var UR={exports:{}},Ey={};var Fz;function jle(){if(Fz)return Ey;Fz=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,s){var a=null;if(s!==void 0&&(a=""+s),i.key!==void 0&&(a=""+i.key),"key"in i){s={};for(var o in i)o!=="key"&&(s[o]=i[o])}else s=i;return i=s.ref,{$$typeof:t,type:r,key:a,ref:i!==void 0?i:null,props:s}}return Ey.Fragment=e,Ey.jsx=n,Ey.jsxs=n,Ey}var Uz;function zle(){return Uz||(Uz=1,UR.exports=jle()),UR.exports}var g=zle(),jR={exports:{}},xn={};var jz;function $le(){if(jz)return xn;jz=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),p=Symbol.iterator;function m($){return $===null||typeof $!="object"?null:($=p&&$[p]||$["@@iterator"],typeof $=="function"?$:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,v={};function _($,ee,oe){this.props=$,this.context=ee,this.refs=v,this.updater=oe||x}_.prototype.isReactComponent={},_.prototype.setState=function($,ee){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,ee,"setState")},_.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function E(){}E.prototype=_.prototype;function T($,ee,oe){this.props=$,this.context=ee,this.refs=v,this.updater=oe||x}var A=T.prototype=new E;A.constructor=T,b(A,_.prototype),A.isPureReactComponent=!0;var C=Array.isArray;function M(){}var P={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function N($,ee,oe){var me=oe.ref;return{$$typeof:t,type:$,key:ee,ref:me!==void 0?me:null,props:oe}}function L($,ee){return N($.type,ee,$.props)}function k($){return typeof $=="object"&&$!==null&&$.$$typeof===t}function I($){var ee={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(oe){return ee[oe]})}var F=/\/+/g;function z($,ee){return typeof $=="object"&&$!==null&&$.key!=null?I(""+$.key):ee.toString(36)}function H($){switch($.status){case"fulfilled":return $.value;case"rejected":throw $.reason;default:switch(typeof $.status=="string"?$.then(M,M):($.status="pending",$.then(function(ee){$.status==="pending"&&($.status="fulfilled",$.value=ee)},function(ee){$.status==="pending"&&($.status="rejected",$.reason=ee)})),$.status){case"fulfilled":return $.value;case"rejected":throw $.reason}}throw $}function B($,ee,oe,me,te){var K=typeof $;(K==="undefined"||K==="boolean")&&($=null);var ne=!1;if($===null)ne=!0;else switch(K){case"bigint":case"string":case"number":ne=!0;break;case"object":switch($.$$typeof){case t:case e:ne=!0;break;case u:return ne=$._init,B(ne($._payload),ee,oe,me,te)}}if(ne)return te=te($),ne=me===""?"."+z($,0):me,C(te)?(oe="",ne!=null&&(oe=ne.replace(F,"$&/")+"/"),B(te,ee,oe,"",function(ve){return ve})):te!=null&&(k(te)&&(te=L(te,oe+(te.key==null||$&&$.key===te.key?"":(""+te.key).replace(F,"$&/")+"/")+ne)),ee.push(te)),1;ne=0;var Ee=me===""?".":me+":";if(C($))for(var se=0;se<$.length;se++)me=$[se],K=Ee+z(me,se),ne+=B(me,ee,oe,K,te);else if(se=m($),typeof se=="function")for($=se.call($),se=0;!(me=$.next()).done;)me=me.value,K=Ee+z(me,se++),ne+=B(me,ee,oe,K,te);else if(K==="object"){if(typeof $.then=="function")return B(H($),ee,oe,me,te);throw ee=String($),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return ne}function j($,ee,oe){if($==null)return $;var me=[],te=0;return B($,me,"","",function(K){return ee.call(oe,K,te++)}),me}function G($){if($._status===-1){var ee=$._result;ee=ee(),ee.then(function(oe){($._status===0||$._status===-1)&&($._status=1,$._result=oe)},function(oe){($._status===0||$._status===-1)&&($._status=2,$._result=oe)}),$._status===-1&&($._status=0,$._result=ee)}if($._status===1)return $._result.default;throw $._result}var W=typeof reportError=="function"?reportError:function($){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof $=="object"&&$!==null&&typeof $.message=="string"?String($.message):String($),error:$});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",$);return}console.error($)},re={map:j,forEach:function($,ee,oe){j($,function(){ee.apply(this,arguments)},oe)},count:function($){var ee=0;return j($,function(){ee++}),ee},toArray:function($){return j($,function(ee){return ee})||[]},only:function($){if(!k($))throw Error("React.Children.only expected to receive a single React element child.");return $}};return xn.Activity=f,xn.Children=re,xn.Component=_,xn.Fragment=n,xn.Profiler=i,xn.PureComponent=T,xn.StrictMode=r,xn.Suspense=l,xn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,xn.__COMPILER_RUNTIME={__proto__:null,c:function($){return P.H.useMemoCache($)}},xn.cache=function($){return function(){return $.apply(null,arguments)}},xn.cacheSignal=function(){return null},xn.cloneElement=function($,ee,oe){if($==null)throw Error("The argument must be a React element, but you passed "+$+".");var me=b({},$.props),te=$.key;if(ee!=null)for(K in ee.key!==void 0&&(te=""+ee.key),ee)!D.call(ee,K)||K==="key"||K==="__self"||K==="__source"||K==="ref"&&ee.ref===void 0||(me[K]=ee[K]);var K=arguments.length-2;if(K===1)me.children=oe;else if(1<K){for(var ne=Array(K),Ee=0;Ee<K;Ee++)ne[Ee]=arguments[Ee+2];me.children=ne}return N($.type,te,me)},xn.createContext=function($){return $={$$typeof:a,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null},$.Provider=$,$.Consumer={$$typeof:s,_context:$},$},xn.createElement=function($,ee,oe){var me,te={},K=null;if(ee!=null)for(me in ee.key!==void 0&&(K=""+ee.key),ee)D.call(ee,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(te[me]=ee[me]);var ne=arguments.length-2;if(ne===1)te.children=oe;else if(1<ne){for(var Ee=Array(ne),se=0;se<ne;se++)Ee[se]=arguments[se+2];te.children=Ee}if($&&$.defaultProps)for(me in ne=$.defaultProps,ne)te[me]===void 0&&(te[me]=ne[me]);return N($,K,te)},xn.createRef=function(){return{current:null}},xn.forwardRef=function($){return{$$typeof:o,render:$}},xn.isValidElement=k,xn.lazy=function($){return{$$typeof:u,_payload:{_status:-1,_result:$},_init:G}},xn.memo=function($,ee){return{$$typeof:c,type:$,compare:ee===void 0?null:ee}},xn.startTransition=function($){var ee=P.T,oe={};P.T=oe;try{var me=$(),te=P.S;te!==null&&te(oe,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(M,W)}catch(K){W(K)}finally{ee!==null&&oe.types!==null&&(ee.types=oe.types),P.T=ee}},xn.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},xn.use=function($){return P.H.use($)},xn.useActionState=function($,ee,oe){return P.H.useActionState($,ee,oe)},xn.useCallback=function($,ee){return P.H.useCallback($,ee)},xn.useContext=function($){return P.H.useContext($)},xn.useDebugValue=function(){},xn.useDeferredValue=function($,ee){return P.H.useDeferredValue($,ee)},xn.useEffect=function($,ee){return P.H.useEffect($,ee)},xn.useEffectEvent=function($){return P.H.useEffectEvent($)},xn.useId=function(){return P.H.useId()},xn.useImperativeHandle=function($,ee,oe){return P.H.useImperativeHandle($,ee,oe)},xn.useInsertionEffect=function($,ee){return P.H.useInsertionEffect($,ee)},xn.useLayoutEffect=function($,ee){return P.H.useLayoutEffect($,ee)},xn.useMemo=function($,ee){return P.H.useMemo($,ee)},xn.useOptimistic=function($,ee){return P.H.useOptimistic($,ee)},xn.useReducer=function($,ee,oe){return P.H.useReducer($,ee,oe)},xn.useRef=function($){return P.H.useRef($)},xn.useState=function($){return P.H.useState($)},xn.useSyncExternalStore=function($,ee,oe){return P.H.useSyncExternalStore($,ee,oe)},xn.useTransition=function(){return P.H.useTransition()},xn.version="19.2.0",xn}var zz;function ax(){return zz||(zz=1,jR.exports=$le()),jR.exports}var w=ax();const ri=Ea(w),ab=Ule({__proto__:null,default:ri},[w]);var zR={exports:{}},Cy={},$R={exports:{}},GR={};var $z;function Gle(){return $z||($z=1,(function(t){function e(B,j){var G=B.length;B.push(j);e:for(;0<G;){var W=G-1>>>1,re=B[W];if(0<i(re,j))B[W]=j,B[G]=re,G=W;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var j=B[0],G=B.pop();if(G!==j){B[0]=G;e:for(var W=0,re=B.length,$=re>>>1;W<$;){var ee=2*(W+1)-1,oe=B[ee],me=ee+1,te=B[me];if(0>i(oe,G))me<re&&0>i(te,oe)?(B[W]=te,B[me]=G,W=me):(B[W]=oe,B[ee]=G,W=ee);else if(me<re&&0>i(te,G))B[W]=te,B[me]=G,W=me;else break e}}return j}function i(B,j){var G=B.sortIndex-j.sortIndex;return G!==0?G:B.id-j.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,f=null,p=3,m=!1,x=!1,b=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function A(B){for(var j=n(c);j!==null;){if(j.callback===null)r(c);else if(j.startTime<=B)r(c),j.sortIndex=j.expirationTime,e(l,j);else break;j=n(c)}}function C(B){if(b=!1,A(B),!x)if(n(l)!==null)x=!0,M||(M=!0,I());else{var j=n(c);j!==null&&H(C,j.startTime-B)}}var M=!1,P=-1,D=5,N=-1;function L(){return v?!0:!(t.unstable_now()-N<D)}function k(){if(v=!1,M){var B=t.unstable_now();N=B;var j=!0;try{e:{x=!1,b&&(b=!1,E(P),P=-1),m=!0;var G=p;try{t:{for(A(B),f=n(l);f!==null&&!(f.expirationTime>B&&L());){var W=f.callback;if(typeof W=="function"){f.callback=null,p=f.priorityLevel;var re=W(f.expirationTime<=B);if(B=t.unstable_now(),typeof re=="function"){f.callback=re,A(B),j=!0;break t}f===n(l)&&r(l),A(B)}else r(l);f=n(l)}if(f!==null)j=!0;else{var $=n(c);$!==null&&H(C,$.startTime-B),j=!1}}break e}finally{f=null,p=G,m=!1}j=void 0}}finally{j?I():M=!1}}}var I;if(typeof T=="function")I=function(){T(k)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,z=F.port2;F.port1.onmessage=k,I=function(){z.postMessage(null)}}else I=function(){_(k,0)};function H(B,j){P=_(function(){B(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(B){switch(p){case 1:case 2:case 3:var j=3;break;default:j=p}var G=p;p=j;try{return B()}finally{p=G}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(B,j){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var G=p;p=B;try{return j()}finally{p=G}},t.unstable_scheduleCallback=function(B,j,G){var W=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?W+G:W):G=W,B){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=G+re,B={id:u++,callback:j,priorityLevel:B,startTime:G,expirationTime:re,sortIndex:-1},G>W?(B.sortIndex=G,e(c,B),n(l)===null&&B===n(c)&&(b?(E(P),P=-1):b=!0,H(C,G-W))):(B.sortIndex=re,e(l,B),x||m||(x=!0,M||(M=!0,I()))),B},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(B){var j=p;return function(){var G=p;p=j;try{return B.apply(this,arguments)}finally{p=G}}}})(GR)),GR}var Gz;function Vle(){return Gz||(Gz=1,$R.exports=Gle()),$R.exports}var VR={exports:{}},zs={};var Vz;function Hle(){if(Vz)return zs;Vz=1;var t=ax();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)c+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(l,c,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:f==null?null:""+f,children:l,containerInfo:c,implementation:u}}var a=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return zs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,zs.createPortal=function(l,c){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return s(l,c,null,u)},zs.flushSync=function(l){var c=a.T,u=r.p;try{if(a.T=null,r.p=2,l)return l()}finally{a.T=c,r.p=u,r.d.f()}},zs.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},zs.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},zs.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var u=c.as,f=o(u,c.crossOrigin),p=typeof c.integrity=="string"?c.integrity:void 0,m=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;u==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:f,integrity:p,fetchPriority:m}):u==="script"&&r.d.X(l,{crossOrigin:f,integrity:p,fetchPriority:m,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},zs.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var u=o(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},zs.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var u=c.as,f=o(u,c.crossOrigin);r.d.L(l,u,{crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},zs.preloadModule=function(l,c){if(typeof l=="string")if(c){var u=o(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},zs.requestFormReset=function(l){r.d.r(l)},zs.unstable_batchedUpdates=function(l,c){return l(c)},zs.useFormState=function(l,c,u){return a.H.useFormState(l,c,u)},zs.useFormStatus=function(){return a.H.useHostTransitionStatus()},zs.version="19.2.0",zs}var Hz;function FX(){if(Hz)return VR.exports;Hz=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),VR.exports=Hle(),VR.exports}var Wz;function Wle(){if(Wz)return Cy;Wz=1;var t=Vle(),e=ax(),n=FX();function r(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)h+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function s(d){var h=d,y=d;if(d.alternate)for(;h.return;)h=h.return;else{d=h;do h=d,(h.flags&4098)!==0&&(y=h.return),d=h.return;while(d)}return h.tag===3?y:null}function a(d){if(d.tag===13){var h=d.memoizedState;if(h===null&&(d=d.alternate,d!==null&&(h=d.memoizedState)),h!==null)return h.dehydrated}return null}function o(d){if(d.tag===31){var h=d.memoizedState;if(h===null&&(d=d.alternate,d!==null&&(h=d.memoizedState)),h!==null)return h.dehydrated}return null}function l(d){if(s(d)!==d)throw Error(r(188))}function c(d){var h=d.alternate;if(!h){if(h=s(d),h===null)throw Error(r(188));return h!==d?null:d}for(var y=d,S=h;;){var R=y.return;if(R===null)break;var O=R.alternate;if(O===null){if(S=R.return,S!==null){y=S;continue}break}if(R.child===O.child){for(O=R.child;O;){if(O===y)return l(R),d;if(O===S)return l(R),h;O=O.sibling}throw Error(r(188))}if(y.return!==S.return)y=R,S=O;else{for(var U=!1,X=R.child;X;){if(X===y){U=!0,y=R,S=O;break}if(X===S){U=!0,S=R,y=O;break}X=X.sibling}if(!U){for(X=O.child;X;){if(X===y){U=!0,y=O,S=R;break}if(X===S){U=!0,S=O,y=R;break}X=X.sibling}if(!U)throw Error(r(189))}}if(y.alternate!==S)throw Error(r(190))}if(y.tag!==3)throw Error(r(188));return y.stateNode.current===y?d:h}function u(d){var h=d.tag;if(h===5||h===26||h===27||h===6)return d;for(d=d.child;d!==null;){if(h=u(d),h!==null)return h;d=d.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),E=Symbol.for("react.consumer"),T=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function I(d){return d===null||typeof d!="object"?null:(d=k&&d[k]||d["@@iterator"],typeof d=="function"?d:null)}var F=Symbol.for("react.client.reference");function z(d){if(d==null)return null;if(typeof d=="function")return d.$$typeof===F?null:d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case b:return"Fragment";case _:return"Profiler";case v:return"StrictMode";case C:return"Suspense";case M:return"SuspenseList";case N:return"Activity"}if(typeof d=="object")switch(d.$$typeof){case x:return"Portal";case T:return d.displayName||"Context";case E:return(d._context.displayName||"Context")+".Consumer";case A:var h=d.render;return d=d.displayName,d||(d=h.displayName||h.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case P:return h=d.displayName||null,h!==null?h:z(d.type)||"Memo";case D:h=d._payload,d=d._init;try{return z(d(h))}catch{}}return null}var H=Array.isArray,B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},W=[],re=-1;function $(d){return{current:d}}function ee(d){0>re||(d.current=W[re],W[re]=null,re--)}function oe(d,h){re++,W[re]=d.current,d.current=h}var me=$(null),te=$(null),K=$(null),ne=$(null);function Ee(d,h){switch(oe(K,h),oe(te,d),oe(me,null),h.nodeType){case 9:case 11:d=(d=h.documentElement)&&(d=d.namespaceURI)?oz(d):0;break;default:if(d=h.tagName,h=h.namespaceURI)h=oz(h),d=lz(h,d);else switch(d){case"svg":d=1;break;case"math":d=2;break;default:d=0}}ee(me),oe(me,d)}function se(){ee(me),ee(te),ee(K)}function ve(d){d.memoizedState!==null&&oe(ne,d);var h=me.current,y=lz(h,d.type);h!==y&&(oe(te,d),oe(me,y))}function Pe(d){te.current===d&&(ee(me),ee(te)),ne.current===d&&(ee(ne),_y._currentValue=G)}var ge,be;function _e(d){if(ge===void 0)try{throw Error()}catch(y){var h=y.stack.trim().match(/\n( *(at )?)/);ge=h&&h[1]||"",be=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ge+d+be}var Q=!1;function et(d,h){if(!d||Q)return"";Q=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(h){var ut=function(){throw Error()};if(Object.defineProperty(ut.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ut,[])}catch(He){var Ie=He}Reflect.construct(d,[],ut)}else{try{ut.call()}catch(He){Ie=He}d.call(ut.prototype)}}else{try{throw Error()}catch(He){Ie=He}(ut=d())&&typeof ut.catch=="function"&&ut.catch(function(){})}}catch(He){if(He&&Ie&&typeof He.stack=="string")return[He.stack,Ie.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var R=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");R&&R.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=S.DetermineComponentFrameRoot(),U=O[0],X=O[1];if(U&&X){var ce=U.split(`
`),Oe=X.split(`
`);for(R=S=0;S<ce.length&&!ce[S].includes("DetermineComponentFrameRoot");)S++;for(;R<Oe.length&&!Oe[R].includes("DetermineComponentFrameRoot");)R++;if(S===ce.length||R===Oe.length)for(S=ce.length-1,R=Oe.length-1;1<=S&&0<=R&&ce[S]!==Oe[R];)R--;for(;1<=S&&0<=R;S--,R--)if(ce[S]!==Oe[R]){if(S!==1||R!==1)do if(S--,R--,0>R||ce[S]!==Oe[R]){var tt=`
`+ce[S].replace(" at new "," at ");return d.displayName&&tt.includes("<anonymous>")&&(tt=tt.replace("<anonymous>",d.displayName)),tt}while(1<=S&&0<=R);break}}}finally{Q=!1,Error.prepareStackTrace=y}return(y=d?d.displayName||d.name:"")?_e(y):""}function ze(d,h){switch(d.tag){case 26:case 27:case 5:return _e(d.type);case 16:return _e("Lazy");case 13:return d.child!==h&&h!==null?_e("Suspense Fallback"):_e("Suspense");case 19:return _e("SuspenseList");case 0:case 15:return et(d.type,!1);case 11:return et(d.type.render,!1);case 1:return et(d.type,!0);case 31:return _e("Activity");default:return""}}function Je(d){try{var h="",y=null;do h+=ze(d,y),y=d,d=d.return;while(d);return h}catch(S){return`
Error generating stack: `+S.message+`
`+S.stack}}var fe=Object.prototype.hasOwnProperty,rt=t.unstable_scheduleCallback,$e=t.unstable_cancelCallback,Se=t.unstable_shouldYield,q=t.unstable_requestPaint,V=t.unstable_now,ie=t.unstable_getCurrentPriorityLevel,le=t.unstable_ImmediatePriority,xe=t.unstable_UserBlockingPriority,pe=t.unstable_NormalPriority,it=t.unstable_LowPriority,We=t.unstable_IdlePriority,dt=t.log,ft=t.unstable_setDisableYieldValue,Be=null,ot=null;function st(d){if(typeof dt=="function"&&ft(d),ot&&typeof ot.setStrictMode=="function")try{ot.setStrictMode(Be,d)}catch{}}var ht=Math.clz32?Math.clz32:ue,gt=Math.log,Ut=Math.LN2;function ue(d){return d>>>=0,d===0?32:31-(gt(d)/Ut|0)|0}var we=256,Ke=262144,Ge=4194304;function Xe(d){var h=d&42;if(h!==0)return h;switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return d&261888;case 262144:case 524288:case 1048576:case 2097152:return d&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return d&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return d}}function Ve(d,h,y){var S=d.pendingLanes;if(S===0)return 0;var R=0,O=d.suspendedLanes,U=d.pingedLanes;d=d.warmLanes;var X=S&134217727;return X!==0?(S=X&~O,S!==0?R=Xe(S):(U&=X,U!==0?R=Xe(U):y||(y=X&~d,y!==0&&(R=Xe(y))))):(X=S&~O,X!==0?R=Xe(X):U!==0?R=Xe(U):y||(y=S&~d,y!==0&&(R=Xe(y)))),R===0?0:h!==0&&h!==R&&(h&O)===0&&(O=R&-R,y=h&-h,O>=y||O===32&&(y&4194048)!==0)?h:R}function yt(d,h){return(d.pendingLanes&~(d.suspendedLanes&~d.pingedLanes)&h)===0}function Mt(d,h){switch(d){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ct(){var d=Ge;return Ge<<=1,(Ge&62914560)===0&&(Ge=4194304),d}function Kt(d){for(var h=[],y=0;31>y;y++)h.push(d);return h}function vt(d,h){d.pendingLanes|=h,h!==268435456&&(d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0)}function It(d,h,y,S,R,O){var U=d.pendingLanes;d.pendingLanes=y,d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0,d.expiredLanes&=y,d.entangledLanes&=y,d.errorRecoveryDisabledLanes&=y,d.shellSuspendCounter=0;var X=d.entanglements,ce=d.expirationTimes,Oe=d.hiddenUpdates;for(y=U&~y;0<y;){var tt=31-ht(y),ut=1<<tt;X[tt]=0,ce[tt]=-1;var Ie=Oe[tt];if(Ie!==null)for(Oe[tt]=null,tt=0;tt<Ie.length;tt++){var He=Ie[tt];He!==null&&(He.lane&=-536870913)}y&=~ut}S!==0&&dn(d,S,0),O!==0&&R===0&&d.tag!==0&&(d.suspendedLanes|=O&~(U&~h))}function dn(d,h,y){d.pendingLanes|=h,d.suspendedLanes&=~h;var S=31-ht(h);d.entangledLanes|=h,d.entanglements[S]=d.entanglements[S]|1073741824|y&261930}function bn(d,h){var y=d.entangledLanes|=h;for(d=d.entanglements;y;){var S=31-ht(y),R=1<<S;R&h|d[S]&h&&(d[S]|=h),y&=~R}}function sr(d,h){var y=h&-h;return y=(y&42)!==0?1:Rr(y),(y&(d.suspendedLanes|h))!==0?0:y}function Rr(d){switch(d){case 2:d=1;break;case 8:d=4;break;case 32:d=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:d=128;break;case 268435456:d=134217728;break;default:d=0}return d}function ls(d){return d&=-d,2<d?8<d?(d&134217727)!==0?32:268435456:8:2}function aa(){var d=j.p;return d!==0?d:(d=window.event,d===void 0?32:Nz(d.type))}function Pd(d,h){var y=j.p;try{return j.p=d,h()}finally{j.p=y}}var Ts=Math.random().toString(36).slice(2),Oi="__reactFiber$"+Ts,Wi="__reactProps$"+Ts,Qc="__reactContainer$"+Ts,Jp="__reactEvents$"+Ts,DA="__reactListeners$"+Ts,LA="__reactHandles$"+Ts,d1="__reactResources$"+Ts,ih="__reactMarker$"+Ts;function Bx(d){delete d[Oi],delete d[Wi],delete d[Jp],delete d[DA],delete d[LA]}function Nd(d){var h=d[Oi];if(h)return h;for(var y=d.parentNode;y;){if(h=y[Qc]||y[Oi]){if(y=h.alternate,h.child!==null||y!==null&&y.child!==null)for(d=mz(d);d!==null;){if(y=d[Oi])return y;d=mz(d)}return h}d=y,y=d.parentNode}return null}function J(d){if(d=d[Oi]||d[Qc]){var h=d.tag;if(h===5||h===6||h===13||h===31||h===26||h===27||h===3)return d}return null}function Te(d){var h=d.tag;if(h===5||h===26||h===27||h===6)return d.stateNode;throw Error(r(33))}function ke(d){var h=d[d1];return h||(h=d[d1]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function De(d){d[ih]=!0}var Me=new Set,_t={};function Tt(d,h){Bt(d,h),Bt(d+"Capture",h)}function Bt(d,h){for(_t[d]=h,d=0;d<h.length;d++)Me.add(h[d])}var jt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),rn={},ln={};function Zt(d){return fe.call(ln,d)?!0:fe.call(rn,d)?!1:jt.test(d)?ln[d]=!0:(rn[d]=!0,!1)}function En(d,h,y){if(Zt(h))if(y===null)d.removeAttribute(h);else{switch(typeof y){case"undefined":case"function":case"symbol":d.removeAttribute(h);return;case"boolean":var S=h.toLowerCase().slice(0,5);if(S!=="data-"&&S!=="aria-"){d.removeAttribute(h);return}}d.setAttribute(h,""+y)}}function Vn(d,h,y){if(y===null)d.removeAttribute(h);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(h);return}d.setAttribute(h,""+y)}}function qn(d,h,y,S){if(S===null)d.removeAttribute(y);else{switch(typeof S){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(y);return}d.setAttributeNS(h,y,""+S)}}function Un(d){switch(typeof d){case"bigint":case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function ar(d){var h=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function tn(d,h,y){var S=Object.getOwnPropertyDescriptor(d.constructor.prototype,h);if(!d.hasOwnProperty(h)&&typeof S<"u"&&typeof S.get=="function"&&typeof S.set=="function"){var R=S.get,O=S.set;return Object.defineProperty(d,h,{configurable:!0,get:function(){return R.call(this)},set:function(U){y=""+U,O.call(this,U)}}),Object.defineProperty(d,h,{enumerable:S.enumerable}),{getValue:function(){return y},setValue:function(U){y=""+U},stopTracking:function(){d._valueTracker=null,delete d[h]}}}}function wr(d){if(!d._valueTracker){var h=ar(d)?"checked":"value";d._valueTracker=tn(d,h,""+d[h])}}function jn(d){if(!d)return!1;var h=d._valueTracker;if(!h)return!0;var y=h.getValue(),S="";return d&&(S=ar(d)?d.checked?"true":"false":d.value),d=S,d!==y?(h.setValue(d),!0):!1}function cs(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}var Od=/[\n"\\]/g;function Pr(d){return d.replace(Od,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function Jc(d,h,y,S,R,O,U,X){d.name="",U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?d.type=U:d.removeAttribute("type"),h!=null?U==="number"?(h===0&&d.value===""||d.value!=h)&&(d.value=""+Un(h)):d.value!==""+Un(h)&&(d.value=""+Un(h)):U!=="submit"&&U!=="reset"||d.removeAttribute("value"),h!=null?us(d,U,Un(h)):y!=null?us(d,U,Un(y)):S!=null&&d.removeAttribute("value"),R==null&&O!=null&&(d.defaultChecked=!!O),R!=null&&(d.checked=R&&typeof R!="function"&&typeof R!="symbol"),X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"?d.name=""+Un(X):d.removeAttribute("name")}function Nr(d,h,y,S,R,O,U,X){if(O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(d.type=O),h!=null||y!=null){if(!(O!=="submit"&&O!=="reset"||h!=null)){wr(d);return}y=y!=null?""+Un(y):"",h=h!=null?""+Un(h):y,X||h===d.value||(d.value=h),d.defaultValue=h}S=S??R,S=typeof S!="function"&&typeof S!="symbol"&&!!S,d.checked=X?d.checked:!!S,d.defaultChecked=!!S,U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(d.name=U),wr(d)}function us(d,h,y){h==="number"&&cs(d.ownerDocument)===d||d.defaultValue===""+y||(d.defaultValue=""+y)}function qi(d,h,y,S){if(d=d.options,h){h={};for(var R=0;R<y.length;R++)h["$"+y[R]]=!0;for(y=0;y<d.length;y++)R=h.hasOwnProperty("$"+d[y].value),d[y].selected!==R&&(d[y].selected=R),R&&S&&(d[y].defaultSelected=!0)}else{for(y=""+Un(y),h=null,R=0;R<d.length;R++){if(d[R].value===y){d[R].selected=!0,S&&(d[R].defaultSelected=!0);return}h!==null||d[R].disabled||(h=d[R])}h!==null&&(h.selected=!0)}}function ds(d,h,y){if(h!=null&&(h=""+Un(h),h!==d.value&&(d.value=h),y==null)){d.defaultValue!==h&&(d.defaultValue=h);return}d.defaultValue=y!=null?""+Un(y):""}function Es(d,h,y,S){if(h==null){if(S!=null){if(y!=null)throw Error(r(92));if(H(S)){if(1<S.length)throw Error(r(93));S=S[0]}y=S}y==null&&(y=""),h=y}y=Un(h),d.defaultValue=y,S=d.textContent,S===y&&S!==""&&S!==null&&(d.value=S),wr(d)}function sc(d,h){if(h){var y=d.firstChild;if(y&&y===d.lastChild&&y.nodeType===3){y.nodeValue=h;return}}d.textContent=h}var eu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function iU(d,h,y){var S=h.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?S?d.setProperty(h,""):h==="float"?d.cssFloat="":d[h]="":S?d.setProperty(h,y):typeof y!="number"||y===0||eu.has(h)?h==="float"?d.cssFloat=y:d[h]=(""+y).trim():d[h]=y+"px"}function sU(d,h,y){if(h!=null&&typeof h!="object")throw Error(r(62));if(d=d.style,y!=null){for(var S in y)!y.hasOwnProperty(S)||h!=null&&h.hasOwnProperty(S)||(S.indexOf("--")===0?d.setProperty(S,""):S==="float"?d.cssFloat="":d[S]="");for(var R in h)S=h[R],h.hasOwnProperty(R)&&y[R]!==S&&iU(d,R,S)}else for(var O in h)h.hasOwnProperty(O)&&iU(d,O,h[O])}function IA(d){if(d.indexOf("-")===-1)return!1;switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Iae=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),kae=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function f1(d){return kae.test(""+d)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":d}function tu(){}var kA=null;function BA(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var em=null,tm=null;function aU(d){var h=J(d);if(h&&(d=h.stateNode)){var y=d[Wi]||null;e:switch(d=h.stateNode,h.type){case"input":if(Jc(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),h=y.name,y.type==="radio"&&h!=null){for(y=d;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+Pr(""+h)+'"][type="radio"]'),h=0;h<y.length;h++){var S=y[h];if(S!==d&&S.form===d.form){var R=S[Wi]||null;if(!R)throw Error(r(90));Jc(S,R.value,R.defaultValue,R.defaultValue,R.checked,R.defaultChecked,R.type,R.name)}}for(h=0;h<y.length;h++)S=y[h],S.form===d.form&&jn(S)}break e;case"textarea":ds(d,y.value,y.defaultValue);break e;case"select":h=y.value,h!=null&&qi(d,!!y.multiple,h,!1)}}}var FA=!1;function oU(d,h,y){if(FA)return d(h,y);FA=!0;try{var S=d(h);return S}finally{if(FA=!1,(em!==null||tm!==null)&&(J1(),em&&(h=em,d=tm,tm=em=null,aU(h),d)))for(h=0;h<d.length;h++)aU(d[h])}}function Fx(d,h){var y=d.stateNode;if(y===null)return null;var S=y[Wi]||null;if(S===null)return null;y=S[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(d=d.type,S=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!S;break e;default:d=!1}if(d)return null;if(y&&typeof y!="function")throw Error(r(231,h,typeof y));return y}var nu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),UA=!1;if(nu)try{var Ux={};Object.defineProperty(Ux,"passive",{get:function(){UA=!0}}),window.addEventListener("test",Ux,Ux),window.removeEventListener("test",Ux,Ux)}catch{UA=!1}var Dd=null,jA=null,h1=null;function lU(){if(h1)return h1;var d,h=jA,y=h.length,S,R="value"in Dd?Dd.value:Dd.textContent,O=R.length;for(d=0;d<y&&h[d]===R[d];d++);var U=y-d;for(S=1;S<=U&&h[y-S]===R[O-S];S++);return h1=R.slice(d,1<S?1-S:void 0)}function p1(d){var h=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&h===13&&(d=13)):d=h,d===10&&(d=13),32<=d||d===13?d:0}function m1(){return!0}function cU(){return!1}function Aa(d){function h(y,S,R,O,U){this._reactName=y,this._targetInst=R,this.type=S,this.nativeEvent=O,this.target=U,this.currentTarget=null;for(var X in d)d.hasOwnProperty(X)&&(y=d[X],this[X]=y?y(O):O[X]);return this.isDefaultPrevented=(O.defaultPrevented!=null?O.defaultPrevented:O.returnValue===!1)?m1:cU,this.isPropagationStopped=cU,this}return f(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=m1)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=m1)},persist:function(){},isPersistent:m1}),h}var sh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},g1=Aa(sh),jx=f({},sh,{view:0,detail:0}),Bae=Aa(jx),zA,$A,zx,x1=f({},jx,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:VA,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==zx&&(zx&&d.type==="mousemove"?(zA=d.screenX-zx.screenX,$A=d.screenY-zx.screenY):$A=zA=0,zx=d),zA)},movementY:function(d){return"movementY"in d?d.movementY:$A}}),uU=Aa(x1),Fae=f({},x1,{dataTransfer:0}),Uae=Aa(Fae),jae=f({},jx,{relatedTarget:0}),GA=Aa(jae),zae=f({},sh,{animationName:0,elapsedTime:0,pseudoElement:0}),$ae=Aa(zae),Gae=f({},sh,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),Vae=Aa(Gae),Hae=f({},sh,{data:0}),dU=Aa(Hae),Wae={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qae={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xae={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yae(d){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(d):(d=Xae[d])?!!h[d]:!1}function VA(){return Yae}var Kae=f({},jx,{key:function(d){if(d.key){var h=Wae[d.key]||d.key;if(h!=="Unidentified")return h}return d.type==="keypress"?(d=p1(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?qae[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:VA,charCode:function(d){return d.type==="keypress"?p1(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?p1(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),Zae=Aa(Kae),Qae=f({},x1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fU=Aa(Qae),Jae=f({},jx,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:VA}),eoe=Aa(Jae),toe=f({},sh,{propertyName:0,elapsedTime:0,pseudoElement:0}),noe=Aa(toe),roe=f({},x1,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),ioe=Aa(roe),soe=f({},sh,{newState:0,oldState:0}),aoe=Aa(soe),ooe=[9,13,27,32],HA=nu&&"CompositionEvent"in window,$x=null;nu&&"documentMode"in document&&($x=document.documentMode);var loe=nu&&"TextEvent"in window&&!$x,hU=nu&&(!HA||$x&&8<$x&&11>=$x),pU=" ",mU=!1;function gU(d,h){switch(d){case"keyup":return ooe.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xU(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var nm=!1;function coe(d,h){switch(d){case"compositionend":return xU(h);case"keypress":return h.which!==32?null:(mU=!0,pU);case"textInput":return d=h.data,d===pU&&mU?null:d;default:return null}}function uoe(d,h){if(nm)return d==="compositionend"||!HA&&gU(d,h)?(d=lU(),h1=jA=Dd=null,nm=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return hU&&h.locale!=="ko"?null:h.data;default:return null}}var doe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yU(d){var h=d&&d.nodeName&&d.nodeName.toLowerCase();return h==="input"?!!doe[d.type]:h==="textarea"}function vU(d,h,y,S){em?tm?tm.push(S):tm=[S]:em=S,h=aS(h,"onChange"),0<h.length&&(y=new g1("onChange","change",null,y,S),d.push({event:y,listeners:h}))}var Gx=null,Vx=null;function foe(d){tz(d,0)}function y1(d){var h=Te(d);if(jn(h))return d}function bU(d,h){if(d==="change")return h}var _U=!1;if(nu){var WA;if(nu){var qA="oninput"in document;if(!qA){var SU=document.createElement("div");SU.setAttribute("oninput","return;"),qA=typeof SU.oninput=="function"}WA=qA}else WA=!1;_U=WA&&(!document.documentMode||9<document.documentMode)}function wU(){Gx&&(Gx.detachEvent("onpropertychange",TU),Vx=Gx=null)}function TU(d){if(d.propertyName==="value"&&y1(Vx)){var h=[];vU(h,Vx,d,BA(d)),oU(foe,h)}}function hoe(d,h,y){d==="focusin"?(wU(),Gx=h,Vx=y,Gx.attachEvent("onpropertychange",TU)):d==="focusout"&&wU()}function poe(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return y1(Vx)}function moe(d,h){if(d==="click")return y1(h)}function goe(d,h){if(d==="input"||d==="change")return y1(h)}function xoe(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var to=typeof Object.is=="function"?Object.is:xoe;function Hx(d,h){if(to(d,h))return!0;if(typeof d!="object"||d===null||typeof h!="object"||h===null)return!1;var y=Object.keys(d),S=Object.keys(h);if(y.length!==S.length)return!1;for(S=0;S<y.length;S++){var R=y[S];if(!fe.call(h,R)||!to(d[R],h[R]))return!1}return!0}function EU(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function CU(d,h){var y=EU(d);d=0;for(var S;y;){if(y.nodeType===3){if(S=d+y.textContent.length,d<=h&&S>=h)return{node:y,offset:h-d};d=S}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=EU(y)}}function AU(d,h){return d&&h?d===h?!0:d&&d.nodeType===3?!1:h&&h.nodeType===3?AU(d,h.parentNode):"contains"in d?d.contains(h):d.compareDocumentPosition?!!(d.compareDocumentPosition(h)&16):!1:!1}function MU(d){d=d!=null&&d.ownerDocument!=null&&d.ownerDocument.defaultView!=null?d.ownerDocument.defaultView:window;for(var h=cs(d.document);h instanceof d.HTMLIFrameElement;){try{var y=typeof h.contentWindow.location.href=="string"}catch{y=!1}if(y)d=h.contentWindow;else break;h=cs(d.document)}return h}function XA(d){var h=d&&d.nodeName&&d.nodeName.toLowerCase();return h&&(h==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||h==="textarea"||d.contentEditable==="true")}var yoe=nu&&"documentMode"in document&&11>=document.documentMode,rm=null,YA=null,Wx=null,KA=!1;function RU(d,h,y){var S=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;KA||rm==null||rm!==cs(S)||(S=rm,"selectionStart"in S&&XA(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),Wx&&Hx(Wx,S)||(Wx=S,S=aS(YA,"onSelect"),0<S.length&&(h=new g1("onSelect","select",null,h,y),d.push({event:h,listeners:S}),h.target=rm)))}function ah(d,h){var y={};return y[d.toLowerCase()]=h.toLowerCase(),y["Webkit"+d]="webkit"+h,y["Moz"+d]="moz"+h,y}var im={animationend:ah("Animation","AnimationEnd"),animationiteration:ah("Animation","AnimationIteration"),animationstart:ah("Animation","AnimationStart"),transitionrun:ah("Transition","TransitionRun"),transitionstart:ah("Transition","TransitionStart"),transitioncancel:ah("Transition","TransitionCancel"),transitionend:ah("Transition","TransitionEnd")},ZA={},PU={};nu&&(PU=document.createElement("div").style,"AnimationEvent"in window||(delete im.animationend.animation,delete im.animationiteration.animation,delete im.animationstart.animation),"TransitionEvent"in window||delete im.transitionend.transition);function oh(d){if(ZA[d])return ZA[d];if(!im[d])return d;var h=im[d],y;for(y in h)if(h.hasOwnProperty(y)&&y in PU)return ZA[d]=h[y];return d}var NU=oh("animationend"),OU=oh("animationiteration"),DU=oh("animationstart"),voe=oh("transitionrun"),boe=oh("transitionstart"),_oe=oh("transitioncancel"),LU=oh("transitionend"),IU=new Map,QA="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");QA.push("scrollEnd");function Sl(d,h){IU.set(d,h),Tt(h,[d])}var v1=typeof reportError=="function"?reportError:function(d){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof d=="object"&&d!==null&&typeof d.message=="string"?String(d.message):String(d),error:d});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",d);return}console.error(d)},Do=[],sm=0,JA=0;function b1(){for(var d=sm,h=JA=sm=0;h<d;){var y=Do[h];Do[h++]=null;var S=Do[h];Do[h++]=null;var R=Do[h];Do[h++]=null;var O=Do[h];if(Do[h++]=null,S!==null&&R!==null){var U=S.pending;U===null?R.next=R:(R.next=U.next,U.next=R),S.pending=R}O!==0&&kU(y,R,O)}}function _1(d,h,y,S){Do[sm++]=d,Do[sm++]=h,Do[sm++]=y,Do[sm++]=S,JA|=S,d.lanes|=S,d=d.alternate,d!==null&&(d.lanes|=S)}function eM(d,h,y,S){return _1(d,h,y,S),S1(d)}function lh(d,h){return _1(d,null,null,h),S1(d)}function kU(d,h,y){d.lanes|=y;var S=d.alternate;S!==null&&(S.lanes|=y);for(var R=!1,O=d.return;O!==null;)O.childLanes|=y,S=O.alternate,S!==null&&(S.childLanes|=y),O.tag===22&&(d=O.stateNode,d===null||d._visibility&1||(R=!0)),d=O,O=O.return;return d.tag===3?(O=d.stateNode,R&&h!==null&&(R=31-ht(y),d=O.hiddenUpdates,S=d[R],S===null?d[R]=[h]:S.push(h),h.lane=y|536870912),O):null}function S1(d){if(50<py)throw py=0,cR=null,Error(r(185));for(var h=d.return;h!==null;)d=h,h=d.return;return d.tag===3?d.stateNode:null}var am={};function Soe(d,h,y,S){this.tag=d,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function no(d,h,y,S){return new Soe(d,h,y,S)}function tM(d){return d=d.prototype,!(!d||!d.isReactComponent)}function ru(d,h){var y=d.alternate;return y===null?(y=no(d.tag,h,d.key,d.mode),y.elementType=d.elementType,y.type=d.type,y.stateNode=d.stateNode,y.alternate=d,d.alternate=y):(y.pendingProps=h,y.type=d.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=d.flags&65011712,y.childLanes=d.childLanes,y.lanes=d.lanes,y.child=d.child,y.memoizedProps=d.memoizedProps,y.memoizedState=d.memoizedState,y.updateQueue=d.updateQueue,h=d.dependencies,y.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},y.sibling=d.sibling,y.index=d.index,y.ref=d.ref,y.refCleanup=d.refCleanup,y}function BU(d,h){d.flags&=65011714;var y=d.alternate;return y===null?(d.childLanes=0,d.lanes=h,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=y.childLanes,d.lanes=y.lanes,d.child=y.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=y.memoizedProps,d.memoizedState=y.memoizedState,d.updateQueue=y.updateQueue,d.type=y.type,h=y.dependencies,d.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),d}function w1(d,h,y,S,R,O){var U=0;if(S=d,typeof d=="function")tM(d)&&(U=1);else if(typeof d=="string")U=Ale(d,y,me.current)?26:d==="html"||d==="head"||d==="body"?27:5;else e:switch(d){case N:return d=no(31,y,h,R),d.elementType=N,d.lanes=O,d;case b:return ch(y.children,R,O,h);case v:U=8,R|=24;break;case _:return d=no(12,y,h,R|2),d.elementType=_,d.lanes=O,d;case C:return d=no(13,y,h,R),d.elementType=C,d.lanes=O,d;case M:return d=no(19,y,h,R),d.elementType=M,d.lanes=O,d;default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case T:U=10;break e;case E:U=9;break e;case A:U=11;break e;case P:U=14;break e;case D:U=16,S=null;break e}U=29,y=Error(r(130,d===null?"null":typeof d,"")),S=null}return h=no(U,y,h,R),h.elementType=d,h.type=S,h.lanes=O,h}function ch(d,h,y,S){return d=no(7,d,S,h),d.lanes=y,d}function nM(d,h,y){return d=no(6,d,null,h),d.lanes=y,d}function FU(d){var h=no(18,null,null,0);return h.stateNode=d,h}function rM(d,h,y){return h=no(4,d.children!==null?d.children:[],d.key,h),h.lanes=y,h.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},h}var UU=new WeakMap;function Lo(d,h){if(typeof d=="object"&&d!==null){var y=UU.get(d);return y!==void 0?y:(h={value:d,source:h,stack:Je(h)},UU.set(d,h),h)}return{value:d,source:h,stack:Je(h)}}var om=[],lm=0,T1=null,qx=0,Io=[],ko=0,Ld=null,ac=1,oc="";function iu(d,h){om[lm++]=qx,om[lm++]=T1,T1=d,qx=h}function jU(d,h,y){Io[ko++]=ac,Io[ko++]=oc,Io[ko++]=Ld,Ld=d;var S=ac;d=oc;var R=32-ht(S)-1;S&=~(1<<R),y+=1;var O=32-ht(h)+R;if(30<O){var U=R-R%5;O=(S&(1<<U)-1).toString(32),S>>=U,R-=U,ac=1<<32-ht(h)+R|y<<R|S,oc=O+d}else ac=1<<O|y<<R|S,oc=d}function iM(d){d.return!==null&&(iu(d,1),jU(d,1,0))}function sM(d){for(;d===T1;)T1=om[--lm],om[lm]=null,qx=om[--lm],om[lm]=null;for(;d===Ld;)Ld=Io[--ko],Io[ko]=null,oc=Io[--ko],Io[ko]=null,ac=Io[--ko],Io[ko]=null}function zU(d,h){Io[ko++]=ac,Io[ko++]=oc,Io[ko++]=Ld,ac=h.id,oc=h.overflow,Ld=d}var Cs=null,kr=null,zn=!1,Id=null,Bo=!1,aM=Error(r(519));function kd(d){var h=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Xx(Lo(h,d)),aM}function $U(d){var h=d.stateNode,y=d.type,S=d.memoizedProps;switch(h[Oi]=d,h[Wi]=S,y){case"dialog":Pn("cancel",h),Pn("close",h);break;case"iframe":case"object":case"embed":Pn("load",h);break;case"video":case"audio":for(y=0;y<gy.length;y++)Pn(gy[y],h);break;case"source":Pn("error",h);break;case"img":case"image":case"link":Pn("error",h),Pn("load",h);break;case"details":Pn("toggle",h);break;case"input":Pn("invalid",h),Nr(h,S.value,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name,!0);break;case"select":Pn("invalid",h);break;case"textarea":Pn("invalid",h),Es(h,S.value,S.defaultValue,S.children)}y=S.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||h.textContent===""+y||S.suppressHydrationWarning===!0||sz(h.textContent,y)?(S.popover!=null&&(Pn("beforetoggle",h),Pn("toggle",h)),S.onScroll!=null&&Pn("scroll",h),S.onScrollEnd!=null&&Pn("scrollend",h),S.onClick!=null&&(h.onclick=tu),h=!0):h=!1,h||kd(d,!0)}function GU(d){for(Cs=d.return;Cs;)switch(Cs.tag){case 5:case 31:case 13:Bo=!1;return;case 27:case 3:Bo=!0;return;default:Cs=Cs.return}}function cm(d){if(d!==Cs)return!1;if(!zn)return GU(d),zn=!0,!1;var h=d.tag,y;if((y=h!==3&&h!==27)&&((y=h===5)&&(y=d.type,y=!(y!=="form"&&y!=="button")||TR(d.type,d.memoizedProps)),y=!y),y&&kr&&kd(d),GU(d),h===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));kr=pz(d)}else if(h===31){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));kr=pz(d)}else h===27?(h=kr,Kd(d.type)?(d=RR,RR=null,kr=d):kr=h):kr=Cs?Uo(d.stateNode.nextSibling):null;return!0}function uh(){kr=Cs=null,zn=!1}function oM(){var d=Id;return d!==null&&(Na===null?Na=d:Na.push.apply(Na,d),Id=null),d}function Xx(d){Id===null?Id=[d]:Id.push(d)}var lM=$(null),dh=null,su=null;function Bd(d,h,y){oe(lM,h._currentValue),h._currentValue=y}function au(d){d._currentValue=lM.current,ee(lM)}function cM(d,h,y){for(;d!==null;){var S=d.alternate;if((d.childLanes&h)!==h?(d.childLanes|=h,S!==null&&(S.childLanes|=h)):S!==null&&(S.childLanes&h)!==h&&(S.childLanes|=h),d===y)break;d=d.return}}function uM(d,h,y,S){var R=d.child;for(R!==null&&(R.return=d);R!==null;){var O=R.dependencies;if(O!==null){var U=R.child;O=O.firstContext;e:for(;O!==null;){var X=O;O=R;for(var ce=0;ce<h.length;ce++)if(X.context===h[ce]){O.lanes|=y,X=O.alternate,X!==null&&(X.lanes|=y),cM(O.return,y,d),S||(U=null);break e}O=X.next}}else if(R.tag===18){if(U=R.return,U===null)throw Error(r(341));U.lanes|=y,O=U.alternate,O!==null&&(O.lanes|=y),cM(U,y,d),U=null}else U=R.child;if(U!==null)U.return=R;else for(U=R;U!==null;){if(U===d){U=null;break}if(R=U.sibling,R!==null){R.return=U.return,U=R;break}U=U.return}R=U}}function um(d,h,y,S){d=null;for(var R=h,O=!1;R!==null;){if(!O){if((R.flags&524288)!==0)O=!0;else if((R.flags&262144)!==0)break}if(R.tag===10){var U=R.alternate;if(U===null)throw Error(r(387));if(U=U.memoizedProps,U!==null){var X=R.type;to(R.pendingProps.value,U.value)||(d!==null?d.push(X):d=[X])}}else if(R===ne.current){if(U=R.alternate,U===null)throw Error(r(387));U.memoizedState.memoizedState!==R.memoizedState.memoizedState&&(d!==null?d.push(_y):d=[_y])}R=R.return}d!==null&&uM(h,d,y,S),h.flags|=262144}function E1(d){for(d=d.firstContext;d!==null;){if(!to(d.context._currentValue,d.memoizedValue))return!0;d=d.next}return!1}function fh(d){dh=d,su=null,d=d.dependencies,d!==null&&(d.firstContext=null)}function As(d){return VU(dh,d)}function C1(d,h){return dh===null&&fh(d),VU(d,h)}function VU(d,h){var y=h._currentValue;if(h={context:h,memoizedValue:y,next:null},su===null){if(d===null)throw Error(r(308));su=h,d.dependencies={lanes:0,firstContext:h},d.flags|=524288}else su=su.next=h;return y}var woe=typeof AbortController<"u"?AbortController:function(){var d=[],h=this.signal={aborted:!1,addEventListener:function(y,S){d.push(S)}};this.abort=function(){h.aborted=!0,d.forEach(function(y){return y()})}},Toe=t.unstable_scheduleCallback,Eoe=t.unstable_NormalPriority,Di={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function dM(){return{controller:new woe,data:new Map,refCount:0}}function Yx(d){d.refCount--,d.refCount===0&&Toe(Eoe,function(){d.controller.abort()})}var Kx=null,fM=0,dm=0,fm=null;function Coe(d,h){if(Kx===null){var y=Kx=[];fM=0,dm=mR(),fm={status:"pending",value:void 0,then:function(S){y.push(S)}}}return fM++,h.then(HU,HU),h}function HU(){if(--fM===0&&Kx!==null){fm!==null&&(fm.status="fulfilled");var d=Kx;Kx=null,dm=0,fm=null;for(var h=0;h<d.length;h++)(0,d[h])()}}function Aoe(d,h){var y=[],S={status:"pending",value:null,reason:null,then:function(R){y.push(R)}};return d.then(function(){S.status="fulfilled",S.value=h;for(var R=0;R<y.length;R++)(0,y[R])(h)},function(R){for(S.status="rejected",S.reason=R,R=0;R<y.length;R++)(0,y[R])(void 0)}),S}var WU=B.S;B.S=function(d,h){R4=V(),typeof h=="object"&&h!==null&&typeof h.then=="function"&&Coe(d,h),WU!==null&&WU(d,h)};var hh=$(null);function hM(){var d=hh.current;return d!==null?d:Tr.pooledCache}function A1(d,h){h===null?oe(hh,hh.current):oe(hh,h.pool)}function qU(){var d=hM();return d===null?null:{parent:Di._currentValue,pool:d}}var hm=Error(r(460)),pM=Error(r(474)),M1=Error(r(542)),R1={then:function(){}};function XU(d){return d=d.status,d==="fulfilled"||d==="rejected"}function YU(d,h,y){switch(y=d[y],y===void 0?d.push(h):y!==h&&(h.then(tu,tu),h=y),h.status){case"fulfilled":return h.value;case"rejected":throw d=h.reason,ZU(d),d;default:if(typeof h.status=="string")h.then(tu,tu);else{if(d=Tr,d!==null&&100<d.shellSuspendCounter)throw Error(r(482));d=h,d.status="pending",d.then(function(S){if(h.status==="pending"){var R=h;R.status="fulfilled",R.value=S}},function(S){if(h.status==="pending"){var R=h;R.status="rejected",R.reason=S}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw d=h.reason,ZU(d),d}throw mh=h,hm}}function ph(d){try{var h=d._init;return h(d._payload)}catch(y){throw y!==null&&typeof y=="object"&&typeof y.then=="function"?(mh=y,hm):y}}var mh=null;function KU(){if(mh===null)throw Error(r(459));var d=mh;return mh=null,d}function ZU(d){if(d===hm||d===M1)throw Error(r(483))}var pm=null,Zx=0;function P1(d){var h=Zx;return Zx+=1,pm===null&&(pm=[]),YU(pm,d,h)}function Qx(d,h){h=h.props.ref,d.ref=h!==void 0?h:null}function N1(d,h){throw h.$$typeof===p?Error(r(525)):(d=Object.prototype.toString.call(h),Error(r(31,d==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":d)))}function QU(d){function h(Ce,he){if(d){var Ne=Ce.deletions;Ne===null?(Ce.deletions=[he],Ce.flags|=16):Ne.push(he)}}function y(Ce,he){if(!d)return null;for(;he!==null;)h(Ce,he),he=he.sibling;return null}function S(Ce){for(var he=new Map;Ce!==null;)Ce.key!==null?he.set(Ce.key,Ce):he.set(Ce.index,Ce),Ce=Ce.sibling;return he}function R(Ce,he){return Ce=ru(Ce,he),Ce.index=0,Ce.sibling=null,Ce}function O(Ce,he,Ne){return Ce.index=Ne,d?(Ne=Ce.alternate,Ne!==null?(Ne=Ne.index,Ne<he?(Ce.flags|=67108866,he):Ne):(Ce.flags|=67108866,he)):(Ce.flags|=1048576,he)}function U(Ce){return d&&Ce.alternate===null&&(Ce.flags|=67108866),Ce}function X(Ce,he,Ne,lt){return he===null||he.tag!==6?(he=nM(Ne,Ce.mode,lt),he.return=Ce,he):(he=R(he,Ne),he.return=Ce,he)}function ce(Ce,he,Ne,lt){var Qt=Ne.type;return Qt===b?tt(Ce,he,Ne.props.children,lt,Ne.key):he!==null&&(he.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===D&&ph(Qt)===he.type)?(he=R(he,Ne.props),Qx(he,Ne),he.return=Ce,he):(he=w1(Ne.type,Ne.key,Ne.props,null,Ce.mode,lt),Qx(he,Ne),he.return=Ce,he)}function Oe(Ce,he,Ne,lt){return he===null||he.tag!==4||he.stateNode.containerInfo!==Ne.containerInfo||he.stateNode.implementation!==Ne.implementation?(he=rM(Ne,Ce.mode,lt),he.return=Ce,he):(he=R(he,Ne.children||[]),he.return=Ce,he)}function tt(Ce,he,Ne,lt,Qt){return he===null||he.tag!==7?(he=ch(Ne,Ce.mode,lt,Qt),he.return=Ce,he):(he=R(he,Ne),he.return=Ce,he)}function ut(Ce,he,Ne){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return he=nM(""+he,Ce.mode,Ne),he.return=Ce,he;if(typeof he=="object"&&he!==null){switch(he.$$typeof){case m:return Ne=w1(he.type,he.key,he.props,null,Ce.mode,Ne),Qx(Ne,he),Ne.return=Ce,Ne;case x:return he=rM(he,Ce.mode,Ne),he.return=Ce,he;case D:return he=ph(he),ut(Ce,he,Ne)}if(H(he)||I(he))return he=ch(he,Ce.mode,Ne,null),he.return=Ce,he;if(typeof he.then=="function")return ut(Ce,P1(he),Ne);if(he.$$typeof===T)return ut(Ce,C1(Ce,he),Ne);N1(Ce,he)}return null}function Ie(Ce,he,Ne,lt){var Qt=he!==null?he.key:null;if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint")return Qt!==null?null:X(Ce,he,""+Ne,lt);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case m:return Ne.key===Qt?ce(Ce,he,Ne,lt):null;case x:return Ne.key===Qt?Oe(Ce,he,Ne,lt):null;case D:return Ne=ph(Ne),Ie(Ce,he,Ne,lt)}if(H(Ne)||I(Ne))return Qt!==null?null:tt(Ce,he,Ne,lt,null);if(typeof Ne.then=="function")return Ie(Ce,he,P1(Ne),lt);if(Ne.$$typeof===T)return Ie(Ce,he,C1(Ce,Ne),lt);N1(Ce,Ne)}return null}function He(Ce,he,Ne,lt,Qt){if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return Ce=Ce.get(Ne)||null,X(he,Ce,""+lt,Qt);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case m:return Ce=Ce.get(lt.key===null?Ne:lt.key)||null,ce(he,Ce,lt,Qt);case x:return Ce=Ce.get(lt.key===null?Ne:lt.key)||null,Oe(he,Ce,lt,Qt);case D:return lt=ph(lt),He(Ce,he,Ne,lt,Qt)}if(H(lt)||I(lt))return Ce=Ce.get(Ne)||null,tt(he,Ce,lt,Qt,null);if(typeof lt.then=="function")return He(Ce,he,Ne,P1(lt),Qt);if(lt.$$typeof===T)return He(Ce,he,Ne,C1(he,lt),Qt);N1(he,lt)}return null}function $t(Ce,he,Ne,lt){for(var Qt=null,Xn=null,Ht=he,Cn=he=0,Bn=null;Ht!==null&&Cn<Ne.length;Cn++){Ht.index>Cn?(Bn=Ht,Ht=null):Bn=Ht.sibling;var Yn=Ie(Ce,Ht,Ne[Cn],lt);if(Yn===null){Ht===null&&(Ht=Bn);break}d&&Ht&&Yn.alternate===null&&h(Ce,Ht),he=O(Yn,he,Cn),Xn===null?Qt=Yn:Xn.sibling=Yn,Xn=Yn,Ht=Bn}if(Cn===Ne.length)return y(Ce,Ht),zn&&iu(Ce,Cn),Qt;if(Ht===null){for(;Cn<Ne.length;Cn++)Ht=ut(Ce,Ne[Cn],lt),Ht!==null&&(he=O(Ht,he,Cn),Xn===null?Qt=Ht:Xn.sibling=Ht,Xn=Ht);return zn&&iu(Ce,Cn),Qt}for(Ht=S(Ht);Cn<Ne.length;Cn++)Bn=He(Ht,Ce,Cn,Ne[Cn],lt),Bn!==null&&(d&&Bn.alternate!==null&&Ht.delete(Bn.key===null?Cn:Bn.key),he=O(Bn,he,Cn),Xn===null?Qt=Bn:Xn.sibling=Bn,Xn=Bn);return d&&Ht.forEach(function(tf){return h(Ce,tf)}),zn&&iu(Ce,Cn),Qt}function on(Ce,he,Ne,lt){if(Ne==null)throw Error(r(151));for(var Qt=null,Xn=null,Ht=he,Cn=he=0,Bn=null,Yn=Ne.next();Ht!==null&&!Yn.done;Cn++,Yn=Ne.next()){Ht.index>Cn?(Bn=Ht,Ht=null):Bn=Ht.sibling;var tf=Ie(Ce,Ht,Yn.value,lt);if(tf===null){Ht===null&&(Ht=Bn);break}d&&Ht&&tf.alternate===null&&h(Ce,Ht),he=O(tf,he,Cn),Xn===null?Qt=tf:Xn.sibling=tf,Xn=tf,Ht=Bn}if(Yn.done)return y(Ce,Ht),zn&&iu(Ce,Cn),Qt;if(Ht===null){for(;!Yn.done;Cn++,Yn=Ne.next())Yn=ut(Ce,Yn.value,lt),Yn!==null&&(he=O(Yn,he,Cn),Xn===null?Qt=Yn:Xn.sibling=Yn,Xn=Yn);return zn&&iu(Ce,Cn),Qt}for(Ht=S(Ht);!Yn.done;Cn++,Yn=Ne.next())Yn=He(Ht,Ce,Cn,Yn.value,lt),Yn!==null&&(d&&Yn.alternate!==null&&Ht.delete(Yn.key===null?Cn:Yn.key),he=O(Yn,he,Cn),Xn===null?Qt=Yn:Xn.sibling=Yn,Xn=Yn);return d&&Ht.forEach(function(Fle){return h(Ce,Fle)}),zn&&iu(Ce,Cn),Qt}function xr(Ce,he,Ne,lt){if(typeof Ne=="object"&&Ne!==null&&Ne.type===b&&Ne.key===null&&(Ne=Ne.props.children),typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case m:e:{for(var Qt=Ne.key;he!==null;){if(he.key===Qt){if(Qt=Ne.type,Qt===b){if(he.tag===7){y(Ce,he.sibling),lt=R(he,Ne.props.children),lt.return=Ce,Ce=lt;break e}}else if(he.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===D&&ph(Qt)===he.type){y(Ce,he.sibling),lt=R(he,Ne.props),Qx(lt,Ne),lt.return=Ce,Ce=lt;break e}y(Ce,he);break}else h(Ce,he);he=he.sibling}Ne.type===b?(lt=ch(Ne.props.children,Ce.mode,lt,Ne.key),lt.return=Ce,Ce=lt):(lt=w1(Ne.type,Ne.key,Ne.props,null,Ce.mode,lt),Qx(lt,Ne),lt.return=Ce,Ce=lt)}return U(Ce);case x:e:{for(Qt=Ne.key;he!==null;){if(he.key===Qt)if(he.tag===4&&he.stateNode.containerInfo===Ne.containerInfo&&he.stateNode.implementation===Ne.implementation){y(Ce,he.sibling),lt=R(he,Ne.children||[]),lt.return=Ce,Ce=lt;break e}else{y(Ce,he);break}else h(Ce,he);he=he.sibling}lt=rM(Ne,Ce.mode,lt),lt.return=Ce,Ce=lt}return U(Ce);case D:return Ne=ph(Ne),xr(Ce,he,Ne,lt)}if(H(Ne))return $t(Ce,he,Ne,lt);if(I(Ne)){if(Qt=I(Ne),typeof Qt!="function")throw Error(r(150));return Ne=Qt.call(Ne),on(Ce,he,Ne,lt)}if(typeof Ne.then=="function")return xr(Ce,he,P1(Ne),lt);if(Ne.$$typeof===T)return xr(Ce,he,C1(Ce,Ne),lt);N1(Ce,Ne)}return typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint"?(Ne=""+Ne,he!==null&&he.tag===6?(y(Ce,he.sibling),lt=R(he,Ne),lt.return=Ce,Ce=lt):(y(Ce,he),lt=nM(Ne,Ce.mode,lt),lt.return=Ce,Ce=lt),U(Ce)):y(Ce,he)}return function(Ce,he,Ne,lt){try{Zx=0;var Qt=xr(Ce,he,Ne,lt);return pm=null,Qt}catch(Ht){if(Ht===hm||Ht===M1)throw Ht;var Xn=no(29,Ht,null,Ce.mode);return Xn.lanes=lt,Xn.return=Ce,Xn}finally{}}}var gh=QU(!0),JU=QU(!1),Fd=!1;function mM(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function gM(d,h){d=d.updateQueue,h.updateQueue===d&&(h.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,callbacks:null})}function Ud(d){return{lane:d,tag:0,payload:null,callback:null,next:null}}function jd(d,h,y){var S=d.updateQueue;if(S===null)return null;if(S=S.shared,(Qn&2)!==0){var R=S.pending;return R===null?h.next=h:(h.next=R.next,R.next=h),S.pending=h,h=S1(d),kU(d,null,y),h}return _1(d,S,h,y),S1(d)}function Jx(d,h,y){if(h=h.updateQueue,h!==null&&(h=h.shared,(y&4194048)!==0)){var S=h.lanes;S&=d.pendingLanes,y|=S,h.lanes=y,bn(d,y)}}function xM(d,h){var y=d.updateQueue,S=d.alternate;if(S!==null&&(S=S.updateQueue,y===S)){var R=null,O=null;if(y=y.firstBaseUpdate,y!==null){do{var U={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};O===null?R=O=U:O=O.next=U,y=y.next}while(y!==null);O===null?R=O=h:O=O.next=h}else R=O=h;y={baseState:S.baseState,firstBaseUpdate:R,lastBaseUpdate:O,shared:S.shared,callbacks:S.callbacks},d.updateQueue=y;return}d=y.lastBaseUpdate,d===null?y.firstBaseUpdate=h:d.next=h,y.lastBaseUpdate=h}var yM=!1;function ey(){if(yM){var d=fm;if(d!==null)throw d}}function ty(d,h,y,S){yM=!1;var R=d.updateQueue;Fd=!1;var O=R.firstBaseUpdate,U=R.lastBaseUpdate,X=R.shared.pending;if(X!==null){R.shared.pending=null;var ce=X,Oe=ce.next;ce.next=null,U===null?O=Oe:U.next=Oe,U=ce;var tt=d.alternate;tt!==null&&(tt=tt.updateQueue,X=tt.lastBaseUpdate,X!==U&&(X===null?tt.firstBaseUpdate=Oe:X.next=Oe,tt.lastBaseUpdate=ce))}if(O!==null){var ut=R.baseState;U=0,tt=Oe=ce=null,X=O;do{var Ie=X.lane&-536870913,He=Ie!==X.lane;if(He?(kn&Ie)===Ie:(S&Ie)===Ie){Ie!==0&&Ie===dm&&(yM=!0),tt!==null&&(tt=tt.next={lane:0,tag:X.tag,payload:X.payload,callback:null,next:null});e:{var $t=d,on=X;Ie=h;var xr=y;switch(on.tag){case 1:if($t=on.payload,typeof $t=="function"){ut=$t.call(xr,ut,Ie);break e}ut=$t;break e;case 3:$t.flags=$t.flags&-65537|128;case 0:if($t=on.payload,Ie=typeof $t=="function"?$t.call(xr,ut,Ie):$t,Ie==null)break e;ut=f({},ut,Ie);break e;case 2:Fd=!0}}Ie=X.callback,Ie!==null&&(d.flags|=64,He&&(d.flags|=8192),He=R.callbacks,He===null?R.callbacks=[Ie]:He.push(Ie))}else He={lane:Ie,tag:X.tag,payload:X.payload,callback:X.callback,next:null},tt===null?(Oe=tt=He,ce=ut):tt=tt.next=He,U|=Ie;if(X=X.next,X===null){if(X=R.shared.pending,X===null)break;He=X,X=He.next,He.next=null,R.lastBaseUpdate=He,R.shared.pending=null}}while(!0);tt===null&&(ce=ut),R.baseState=ce,R.firstBaseUpdate=Oe,R.lastBaseUpdate=tt,O===null&&(R.shared.lanes=0),Hd|=U,d.lanes=U,d.memoizedState=ut}}function ej(d,h){if(typeof d!="function")throw Error(r(191,d));d.call(h)}function tj(d,h){var y=d.callbacks;if(y!==null)for(d.callbacks=null,d=0;d<y.length;d++)ej(y[d],h)}var mm=$(null),O1=$(0);function nj(d,h){d=mu,oe(O1,d),oe(mm,h),mu=d|h.baseLanes}function vM(){oe(O1,mu),oe(mm,mm.current)}function bM(){mu=O1.current,ee(mm),ee(O1)}var ro=$(null),Fo=null;function zd(d){var h=d.alternate;oe(bi,bi.current&1),oe(ro,d),Fo===null&&(h===null||mm.current!==null||h.memoizedState!==null)&&(Fo=d)}function _M(d){oe(bi,bi.current),oe(ro,d),Fo===null&&(Fo=d)}function rj(d){d.tag===22?(oe(bi,bi.current),oe(ro,d),Fo===null&&(Fo=d)):$d()}function $d(){oe(bi,bi.current),oe(ro,ro.current)}function io(d){ee(ro),Fo===d&&(Fo=null),ee(bi)}var bi=$(0);function D1(d){for(var h=d;h!==null;){if(h.tag===13){var y=h.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||AR(y)||MR(y)))return h}else if(h.tag===19&&(h.memoizedProps.revealOrder==="forwards"||h.memoizedProps.revealOrder==="backwards"||h.memoizedProps.revealOrder==="unstable_legacy-backwards"||h.memoizedProps.revealOrder==="together")){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break;for(;h.sibling===null;){if(h.return===null||h.return===d)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var ou=0,_n=null,mr=null,Li=null,L1=!1,gm=!1,xh=!1,I1=0,ny=0,xm=null,Moe=0;function li(){throw Error(r(321))}function SM(d,h){if(h===null)return!1;for(var y=0;y<h.length&&y<d.length;y++)if(!to(d[y],h[y]))return!1;return!0}function wM(d,h,y,S,R,O){return ou=O,_n=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,B.H=d===null||d.memoizedState===null?jj:FM,xh=!1,O=y(S,R),xh=!1,gm&&(O=sj(h,y,S,R)),ij(d),O}function ij(d){B.H=sy;var h=mr!==null&&mr.next!==null;if(ou=0,Li=mr=_n=null,L1=!1,ny=0,xm=null,h)throw Error(r(300));d===null||Ii||(d=d.dependencies,d!==null&&E1(d)&&(Ii=!0))}function sj(d,h,y,S){_n=d;var R=0;do{if(gm&&(xm=null),ny=0,gm=!1,25<=R)throw Error(r(301));if(R+=1,Li=mr=null,d.updateQueue!=null){var O=d.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}B.H=zj,O=h(y,S)}while(gm);return O}function Roe(){var d=B.H,h=d.useState()[0];return h=typeof h.then=="function"?ry(h):h,d=d.useState()[0],(mr!==null?mr.memoizedState:null)!==d&&(_n.flags|=1024),h}function TM(){var d=I1!==0;return I1=0,d}function EM(d,h,y){h.updateQueue=d.updateQueue,h.flags&=-2053,d.lanes&=~y}function CM(d){if(L1){for(d=d.memoizedState;d!==null;){var h=d.queue;h!==null&&(h.pending=null),d=d.next}L1=!1}ou=0,Li=mr=_n=null,gm=!1,ny=I1=0,xm=null}function oa(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Li===null?_n.memoizedState=Li=d:Li=Li.next=d,Li}function _i(){if(mr===null){var d=_n.alternate;d=d!==null?d.memoizedState:null}else d=mr.next;var h=Li===null?_n.memoizedState:Li.next;if(h!==null)Li=h,mr=d;else{if(d===null)throw _n.alternate===null?Error(r(467)):Error(r(310));mr=d,d={memoizedState:mr.memoizedState,baseState:mr.baseState,baseQueue:mr.baseQueue,queue:mr.queue,next:null},Li===null?_n.memoizedState=Li=d:Li=Li.next=d}return Li}function k1(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ry(d){var h=ny;return ny+=1,xm===null&&(xm=[]),d=YU(xm,d,h),h=_n,(Li===null?h.memoizedState:Li.next)===null&&(h=h.alternate,B.H=h===null||h.memoizedState===null?jj:FM),d}function B1(d){if(d!==null&&typeof d=="object"){if(typeof d.then=="function")return ry(d);if(d.$$typeof===T)return As(d)}throw Error(r(438,String(d)))}function AM(d){var h=null,y=_n.updateQueue;if(y!==null&&(h=y.memoCache),h==null){var S=_n.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(h={data:S.data.map(function(R){return R.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),y===null&&(y=k1(),_n.updateQueue=y),y.memoCache=h,y=h.data[h.index],y===void 0)for(y=h.data[h.index]=Array(d),S=0;S<d;S++)y[S]=L;return h.index++,y}function lu(d,h){return typeof h=="function"?h(d):h}function F1(d){var h=_i();return MM(h,mr,d)}function MM(d,h,y){var S=d.queue;if(S===null)throw Error(r(311));S.lastRenderedReducer=y;var R=d.baseQueue,O=S.pending;if(O!==null){if(R!==null){var U=R.next;R.next=O.next,O.next=U}h.baseQueue=R=O,S.pending=null}if(O=d.baseState,R===null)d.memoizedState=O;else{h=R.next;var X=U=null,ce=null,Oe=h,tt=!1;do{var ut=Oe.lane&-536870913;if(ut!==Oe.lane?(kn&ut)===ut:(ou&ut)===ut){var Ie=Oe.revertLane;if(Ie===0)ce!==null&&(ce=ce.next={lane:0,revertLane:0,gesture:null,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null}),ut===dm&&(tt=!0);else if((ou&Ie)===Ie){Oe=Oe.next,Ie===dm&&(tt=!0);continue}else ut={lane:0,revertLane:Oe.revertLane,gesture:null,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null},ce===null?(X=ce=ut,U=O):ce=ce.next=ut,_n.lanes|=Ie,Hd|=Ie;ut=Oe.action,xh&&y(O,ut),O=Oe.hasEagerState?Oe.eagerState:y(O,ut)}else Ie={lane:ut,revertLane:Oe.revertLane,gesture:Oe.gesture,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null},ce===null?(X=ce=Ie,U=O):ce=ce.next=Ie,_n.lanes|=ut,Hd|=ut;Oe=Oe.next}while(Oe!==null&&Oe!==h);if(ce===null?U=O:ce.next=X,!to(O,d.memoizedState)&&(Ii=!0,tt&&(y=fm,y!==null)))throw y;d.memoizedState=O,d.baseState=U,d.baseQueue=ce,S.lastRenderedState=O}return R===null&&(S.lanes=0),[d.memoizedState,S.dispatch]}function RM(d){var h=_i(),y=h.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=d;var S=y.dispatch,R=y.pending,O=h.memoizedState;if(R!==null){y.pending=null;var U=R=R.next;do O=d(O,U.action),U=U.next;while(U!==R);to(O,h.memoizedState)||(Ii=!0),h.memoizedState=O,h.baseQueue===null&&(h.baseState=O),y.lastRenderedState=O}return[O,S]}function aj(d,h,y){var S=_n,R=_i(),O=zn;if(O){if(y===void 0)throw Error(r(407));y=y()}else y=h();var U=!to((mr||R).memoizedState,y);if(U&&(R.memoizedState=y,Ii=!0),R=R.queue,OM(cj.bind(null,S,R,d),[d]),R.getSnapshot!==h||U||Li!==null&&Li.memoizedState.tag&1){if(S.flags|=2048,ym(9,{destroy:void 0},lj.bind(null,S,R,y,h),null),Tr===null)throw Error(r(349));O||(ou&127)!==0||oj(S,h,y)}return y}function oj(d,h,y){d.flags|=16384,d={getSnapshot:h,value:y},h=_n.updateQueue,h===null?(h=k1(),_n.updateQueue=h,h.stores=[d]):(y=h.stores,y===null?h.stores=[d]:y.push(d))}function lj(d,h,y,S){h.value=y,h.getSnapshot=S,uj(h)&&dj(d)}function cj(d,h,y){return y(function(){uj(h)&&dj(d)})}function uj(d){var h=d.getSnapshot;d=d.value;try{var y=h();return!to(d,y)}catch{return!0}}function dj(d){var h=lh(d,2);h!==null&&Oa(h,d,2)}function PM(d){var h=oa();if(typeof d=="function"){var y=d;if(d=y(),xh){st(!0);try{y()}finally{st(!1)}}}return h.memoizedState=h.baseState=d,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lu,lastRenderedState:d},h}function fj(d,h,y,S){return d.baseState=y,MM(d,mr,typeof S=="function"?S:lu)}function Poe(d,h,y,S,R){if(z1(d))throw Error(r(485));if(d=h.action,d!==null){var O={payload:R,action:d,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(U){O.listeners.push(U)}};B.T!==null?y(!0):O.isTransition=!1,S(O),y=h.pending,y===null?(O.next=h.pending=O,hj(h,O)):(O.next=y.next,h.pending=y.next=O)}}function hj(d,h){var y=h.action,S=h.payload,R=d.state;if(h.isTransition){var O=B.T,U={};B.T=U;try{var X=y(R,S),ce=B.S;ce!==null&&ce(U,X),pj(d,h,X)}catch(Oe){NM(d,h,Oe)}finally{O!==null&&U.types!==null&&(O.types=U.types),B.T=O}}else try{O=y(R,S),pj(d,h,O)}catch(Oe){NM(d,h,Oe)}}function pj(d,h,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(S){mj(d,h,S)},function(S){return NM(d,h,S)}):mj(d,h,y)}function mj(d,h,y){h.status="fulfilled",h.value=y,gj(h),d.state=y,h=d.pending,h!==null&&(y=h.next,y===h?d.pending=null:(y=y.next,h.next=y,hj(d,y)))}function NM(d,h,y){var S=d.pending;if(d.pending=null,S!==null){S=S.next;do h.status="rejected",h.reason=y,gj(h),h=h.next;while(h!==S)}d.action=null}function gj(d){d=d.listeners;for(var h=0;h<d.length;h++)(0,d[h])()}function xj(d,h){return h}function yj(d,h){if(zn){var y=Tr.formState;if(y!==null){e:{var S=_n;if(zn){if(kr){t:{for(var R=kr,O=Bo;R.nodeType!==8;){if(!O){R=null;break t}if(R=Uo(R.nextSibling),R===null){R=null;break t}}O=R.data,R=O==="F!"||O==="F"?R:null}if(R){kr=Uo(R.nextSibling),S=R.data==="F!";break e}}kd(S)}S=!1}S&&(h=y[0])}}return y=oa(),y.memoizedState=y.baseState=h,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xj,lastRenderedState:h},y.queue=S,y=Bj.bind(null,_n,S),S.dispatch=y,S=PM(!1),O=BM.bind(null,_n,!1,S.queue),S=oa(),R={state:h,dispatch:null,action:d,pending:null},S.queue=R,y=Poe.bind(null,_n,R,O,y),R.dispatch=y,S.memoizedState=d,[h,y,!1]}function vj(d){var h=_i();return bj(h,mr,d)}function bj(d,h,y){if(h=MM(d,h,xj)[0],d=F1(lu)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var S=ry(h)}catch(U){throw U===hm?M1:U}else S=h;h=_i();var R=h.queue,O=R.dispatch;return y!==h.memoizedState&&(_n.flags|=2048,ym(9,{destroy:void 0},Noe.bind(null,R,y),null)),[S,O,d]}function Noe(d,h){d.action=h}function _j(d){var h=_i(),y=mr;if(y!==null)return bj(h,y,d);_i(),h=h.memoizedState,y=_i();var S=y.queue.dispatch;return y.memoizedState=d,[h,S,!1]}function ym(d,h,y,S){return d={tag:d,create:y,deps:S,inst:h,next:null},h=_n.updateQueue,h===null&&(h=k1(),_n.updateQueue=h),y=h.lastEffect,y===null?h.lastEffect=d.next=d:(S=y.next,y.next=d,d.next=S,h.lastEffect=d),d}function Sj(){return _i().memoizedState}function U1(d,h,y,S){var R=oa();_n.flags|=d,R.memoizedState=ym(1|h,{destroy:void 0},y,S===void 0?null:S)}function j1(d,h,y,S){var R=_i();S=S===void 0?null:S;var O=R.memoizedState.inst;mr!==null&&S!==null&&SM(S,mr.memoizedState.deps)?R.memoizedState=ym(h,O,y,S):(_n.flags|=d,R.memoizedState=ym(1|h,O,y,S))}function wj(d,h){U1(8390656,8,d,h)}function OM(d,h){j1(2048,8,d,h)}function Ooe(d){_n.flags|=4;var h=_n.updateQueue;if(h===null)h=k1(),_n.updateQueue=h,h.events=[d];else{var y=h.events;y===null?h.events=[d]:y.push(d)}}function Tj(d){var h=_i().memoizedState;return Ooe({ref:h,nextImpl:d}),function(){if((Qn&2)!==0)throw Error(r(440));return h.impl.apply(void 0,arguments)}}function Ej(d,h){return j1(4,2,d,h)}function Cj(d,h){return j1(4,4,d,h)}function Aj(d,h){if(typeof h=="function"){d=d();var y=h(d);return function(){typeof y=="function"?y():h(null)}}if(h!=null)return d=d(),h.current=d,function(){h.current=null}}function Mj(d,h,y){y=y!=null?y.concat([d]):null,j1(4,4,Aj.bind(null,h,d),y)}function DM(){}function Rj(d,h){var y=_i();h=h===void 0?null:h;var S=y.memoizedState;return h!==null&&SM(h,S[1])?S[0]:(y.memoizedState=[d,h],d)}function Pj(d,h){var y=_i();h=h===void 0?null:h;var S=y.memoizedState;if(h!==null&&SM(h,S[1]))return S[0];if(S=d(),xh){st(!0);try{d()}finally{st(!1)}}return y.memoizedState=[S,h],S}function LM(d,h,y){return y===void 0||(ou&1073741824)!==0&&(kn&261930)===0?d.memoizedState=h:(d.memoizedState=y,d=N4(),_n.lanes|=d,Hd|=d,y)}function Nj(d,h,y,S){return to(y,h)?y:mm.current!==null?(d=LM(d,y,S),to(d,h)||(Ii=!0),d):(ou&42)===0||(ou&1073741824)!==0&&(kn&261930)===0?(Ii=!0,d.memoizedState=y):(d=N4(),_n.lanes|=d,Hd|=d,h)}function Oj(d,h,y,S,R){var O=j.p;j.p=O!==0&&8>O?O:8;var U=B.T,X={};B.T=X,BM(d,!1,h,y);try{var ce=R(),Oe=B.S;if(Oe!==null&&Oe(X,ce),ce!==null&&typeof ce=="object"&&typeof ce.then=="function"){var tt=Aoe(ce,S);iy(d,h,tt,oo(d))}else iy(d,h,S,oo(d))}catch(ut){iy(d,h,{then:function(){},status:"rejected",reason:ut},oo())}finally{j.p=O,U!==null&&X.types!==null&&(U.types=X.types),B.T=U}}function Doe(){}function IM(d,h,y,S){if(d.tag!==5)throw Error(r(476));var R=Dj(d).queue;Oj(d,R,h,G,y===null?Doe:function(){return Lj(d),y(S)})}function Dj(d){var h=d.memoizedState;if(h!==null)return h;h={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:lu,lastRenderedState:G},next:null};var y={};return h.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:lu,lastRenderedState:y},next:null},d.memoizedState=h,d=d.alternate,d!==null&&(d.memoizedState=h),h}function Lj(d){var h=Dj(d);h.next===null&&(h=d.alternate.memoizedState),iy(d,h.next.queue,{},oo())}function kM(){return As(_y)}function Ij(){return _i().memoizedState}function kj(){return _i().memoizedState}function Loe(d){for(var h=d.return;h!==null;){switch(h.tag){case 24:case 3:var y=oo();d=Ud(y);var S=jd(h,d,y);S!==null&&(Oa(S,h,y),Jx(S,h,y)),h={cache:dM()},d.payload=h;return}h=h.return}}function Ioe(d,h,y){var S=oo();y={lane:S,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},z1(d)?Fj(h,y):(y=eM(d,h,y,S),y!==null&&(Oa(y,d,S),Uj(y,h,S)))}function Bj(d,h,y){var S=oo();iy(d,h,y,S)}function iy(d,h,y,S){var R={lane:S,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null};if(z1(d))Fj(h,R);else{var O=d.alternate;if(d.lanes===0&&(O===null||O.lanes===0)&&(O=h.lastRenderedReducer,O!==null))try{var U=h.lastRenderedState,X=O(U,y);if(R.hasEagerState=!0,R.eagerState=X,to(X,U))return _1(d,h,R,0),Tr===null&&b1(),!1}catch{}finally{}if(y=eM(d,h,R,S),y!==null)return Oa(y,d,S),Uj(y,h,S),!0}return!1}function BM(d,h,y,S){if(S={lane:2,revertLane:mR(),gesture:null,action:S,hasEagerState:!1,eagerState:null,next:null},z1(d)){if(h)throw Error(r(479))}else h=eM(d,y,S,2),h!==null&&Oa(h,d,2)}function z1(d){var h=d.alternate;return d===_n||h!==null&&h===_n}function Fj(d,h){gm=L1=!0;var y=d.pending;y===null?h.next=h:(h.next=y.next,y.next=h),d.pending=h}function Uj(d,h,y){if((y&4194048)!==0){var S=h.lanes;S&=d.pendingLanes,y|=S,h.lanes=y,bn(d,y)}}var sy={readContext:As,use:B1,useCallback:li,useContext:li,useEffect:li,useImperativeHandle:li,useLayoutEffect:li,useInsertionEffect:li,useMemo:li,useReducer:li,useRef:li,useState:li,useDebugValue:li,useDeferredValue:li,useTransition:li,useSyncExternalStore:li,useId:li,useHostTransitionStatus:li,useFormState:li,useActionState:li,useOptimistic:li,useMemoCache:li,useCacheRefresh:li};sy.useEffectEvent=li;var jj={readContext:As,use:B1,useCallback:function(d,h){return oa().memoizedState=[d,h===void 0?null:h],d},useContext:As,useEffect:wj,useImperativeHandle:function(d,h,y){y=y!=null?y.concat([d]):null,U1(4194308,4,Aj.bind(null,h,d),y)},useLayoutEffect:function(d,h){return U1(4194308,4,d,h)},useInsertionEffect:function(d,h){U1(4,2,d,h)},useMemo:function(d,h){var y=oa();h=h===void 0?null:h;var S=d();if(xh){st(!0);try{d()}finally{st(!1)}}return y.memoizedState=[S,h],S},useReducer:function(d,h,y){var S=oa();if(y!==void 0){var R=y(h);if(xh){st(!0);try{y(h)}finally{st(!1)}}}else R=h;return S.memoizedState=S.baseState=R,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:R},S.queue=d,d=d.dispatch=Ioe.bind(null,_n,d),[S.memoizedState,d]},useRef:function(d){var h=oa();return d={current:d},h.memoizedState=d},useState:function(d){d=PM(d);var h=d.queue,y=Bj.bind(null,_n,h);return h.dispatch=y,[d.memoizedState,y]},useDebugValue:DM,useDeferredValue:function(d,h){var y=oa();return LM(y,d,h)},useTransition:function(){var d=PM(!1);return d=Oj.bind(null,_n,d.queue,!0,!1),oa().memoizedState=d,[!1,d]},useSyncExternalStore:function(d,h,y){var S=_n,R=oa();if(zn){if(y===void 0)throw Error(r(407));y=y()}else{if(y=h(),Tr===null)throw Error(r(349));(kn&127)!==0||oj(S,h,y)}R.memoizedState=y;var O={value:y,getSnapshot:h};return R.queue=O,wj(cj.bind(null,S,O,d),[d]),S.flags|=2048,ym(9,{destroy:void 0},lj.bind(null,S,O,y,h),null),y},useId:function(){var d=oa(),h=Tr.identifierPrefix;if(zn){var y=oc,S=ac;y=(S&~(1<<32-ht(S)-1)).toString(32)+y,h="_"+h+"R_"+y,y=I1++,0<y&&(h+="H"+y.toString(32)),h+="_"}else y=Moe++,h="_"+h+"r_"+y.toString(32)+"_";return d.memoizedState=h},useHostTransitionStatus:kM,useFormState:yj,useActionState:yj,useOptimistic:function(d){var h=oa();h.memoizedState=h.baseState=d;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=y,h=BM.bind(null,_n,!0,y),y.dispatch=h,[d,h]},useMemoCache:AM,useCacheRefresh:function(){return oa().memoizedState=Loe.bind(null,_n)},useEffectEvent:function(d){var h=oa(),y={impl:d};return h.memoizedState=y,function(){if((Qn&2)!==0)throw Error(r(440));return y.impl.apply(void 0,arguments)}}},FM={readContext:As,use:B1,useCallback:Rj,useContext:As,useEffect:OM,useImperativeHandle:Mj,useInsertionEffect:Ej,useLayoutEffect:Cj,useMemo:Pj,useReducer:F1,useRef:Sj,useState:function(){return F1(lu)},useDebugValue:DM,useDeferredValue:function(d,h){var y=_i();return Nj(y,mr.memoizedState,d,h)},useTransition:function(){var d=F1(lu)[0],h=_i().memoizedState;return[typeof d=="boolean"?d:ry(d),h]},useSyncExternalStore:aj,useId:Ij,useHostTransitionStatus:kM,useFormState:vj,useActionState:vj,useOptimistic:function(d,h){var y=_i();return fj(y,mr,d,h)},useMemoCache:AM,useCacheRefresh:kj};FM.useEffectEvent=Tj;var zj={readContext:As,use:B1,useCallback:Rj,useContext:As,useEffect:OM,useImperativeHandle:Mj,useInsertionEffect:Ej,useLayoutEffect:Cj,useMemo:Pj,useReducer:RM,useRef:Sj,useState:function(){return RM(lu)},useDebugValue:DM,useDeferredValue:function(d,h){var y=_i();return mr===null?LM(y,d,h):Nj(y,mr.memoizedState,d,h)},useTransition:function(){var d=RM(lu)[0],h=_i().memoizedState;return[typeof d=="boolean"?d:ry(d),h]},useSyncExternalStore:aj,useId:Ij,useHostTransitionStatus:kM,useFormState:_j,useActionState:_j,useOptimistic:function(d,h){var y=_i();return mr!==null?fj(y,mr,d,h):(y.baseState=d,[d,y.queue.dispatch])},useMemoCache:AM,useCacheRefresh:kj};zj.useEffectEvent=Tj;function UM(d,h,y,S){h=d.memoizedState,y=y(S,h),y=y==null?h:f({},h,y),d.memoizedState=y,d.lanes===0&&(d.updateQueue.baseState=y)}var jM={enqueueSetState:function(d,h,y){d=d._reactInternals;var S=oo(),R=Ud(S);R.payload=h,y!=null&&(R.callback=y),h=jd(d,R,S),h!==null&&(Oa(h,d,S),Jx(h,d,S))},enqueueReplaceState:function(d,h,y){d=d._reactInternals;var S=oo(),R=Ud(S);R.tag=1,R.payload=h,y!=null&&(R.callback=y),h=jd(d,R,S),h!==null&&(Oa(h,d,S),Jx(h,d,S))},enqueueForceUpdate:function(d,h){d=d._reactInternals;var y=oo(),S=Ud(y);S.tag=2,h!=null&&(S.callback=h),h=jd(d,S,y),h!==null&&(Oa(h,d,y),Jx(h,d,y))}};function $j(d,h,y,S,R,O,U){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(S,O,U):h.prototype&&h.prototype.isPureReactComponent?!Hx(y,S)||!Hx(R,O):!0}function Gj(d,h,y,S){d=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(y,S),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(y,S),h.state!==d&&jM.enqueueReplaceState(h,h.state,null)}function yh(d,h){var y=h;if("ref"in h){y={};for(var S in h)S!=="ref"&&(y[S]=h[S])}if(d=d.defaultProps){y===h&&(y=f({},y));for(var R in d)y[R]===void 0&&(y[R]=d[R])}return y}function Vj(d){v1(d)}function Hj(d){console.error(d)}function Wj(d){v1(d)}function $1(d,h){try{var y=d.onUncaughtError;y(h.value,{componentStack:h.stack})}catch(S){setTimeout(function(){throw S})}}function qj(d,h,y){try{var S=d.onCaughtError;S(y.value,{componentStack:y.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(R){setTimeout(function(){throw R})}}function zM(d,h,y){return y=Ud(y),y.tag=3,y.payload={element:null},y.callback=function(){$1(d,h)},y}function Xj(d){return d=Ud(d),d.tag=3,d}function Yj(d,h,y,S){var R=y.type.getDerivedStateFromError;if(typeof R=="function"){var O=S.value;d.payload=function(){return R(O)},d.callback=function(){qj(h,y,S)}}var U=y.stateNode;U!==null&&typeof U.componentDidCatch=="function"&&(d.callback=function(){qj(h,y,S),typeof R!="function"&&(Wd===null?Wd=new Set([this]):Wd.add(this));var X=S.stack;this.componentDidCatch(S.value,{componentStack:X!==null?X:""})})}function koe(d,h,y,S,R){if(y.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(h=y.alternate,h!==null&&um(h,y,R,!0),y=ro.current,y!==null){switch(y.tag){case 31:case 13:return Fo===null?eS():y.alternate===null&&ci===0&&(ci=3),y.flags&=-257,y.flags|=65536,y.lanes=R,S===R1?y.flags|=16384:(h=y.updateQueue,h===null?y.updateQueue=new Set([S]):h.add(S),fR(d,S,R)),!1;case 22:return y.flags|=65536,S===R1?y.flags|=16384:(h=y.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([S])},y.updateQueue=h):(y=h.retryQueue,y===null?h.retryQueue=new Set([S]):y.add(S)),fR(d,S,R)),!1}throw Error(r(435,y.tag))}return fR(d,S,R),eS(),!1}if(zn)return h=ro.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=R,S!==aM&&(d=Error(r(422),{cause:S}),Xx(Lo(d,y)))):(S!==aM&&(h=Error(r(423),{cause:S}),Xx(Lo(h,y))),d=d.current.alternate,d.flags|=65536,R&=-R,d.lanes|=R,S=Lo(S,y),R=zM(d.stateNode,S,R),xM(d,R),ci!==4&&(ci=2)),!1;var O=Error(r(520),{cause:S});if(O=Lo(O,y),hy===null?hy=[O]:hy.push(O),ci!==4&&(ci=2),h===null)return!0;S=Lo(S,y),y=h;do{switch(y.tag){case 3:return y.flags|=65536,d=R&-R,y.lanes|=d,d=zM(y.stateNode,S,d),xM(y,d),!1;case 1:if(h=y.type,O=y.stateNode,(y.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Wd===null||!Wd.has(O))))return y.flags|=65536,R&=-R,y.lanes|=R,R=Xj(R),Yj(R,d,y,S),xM(y,R),!1}y=y.return}while(y!==null);return!1}var $M=Error(r(461)),Ii=!1;function Ms(d,h,y,S){h.child=d===null?JU(h,null,y,S):gh(h,d.child,y,S)}function Kj(d,h,y,S,R){y=y.render;var O=h.ref;if("ref"in S){var U={};for(var X in S)X!=="ref"&&(U[X]=S[X])}else U=S;return fh(h),S=wM(d,h,y,U,O,R),X=TM(),d!==null&&!Ii?(EM(d,h,R),cu(d,h,R)):(zn&&X&&iM(h),h.flags|=1,Ms(d,h,S,R),h.child)}function Zj(d,h,y,S,R){if(d===null){var O=y.type;return typeof O=="function"&&!tM(O)&&O.defaultProps===void 0&&y.compare===null?(h.tag=15,h.type=O,Qj(d,h,O,S,R)):(d=w1(y.type,null,S,h,h.mode,R),d.ref=h.ref,d.return=h,h.child=d)}if(O=d.child,!KM(d,R)){var U=O.memoizedProps;if(y=y.compare,y=y!==null?y:Hx,y(U,S)&&d.ref===h.ref)return cu(d,h,R)}return h.flags|=1,d=ru(O,S),d.ref=h.ref,d.return=h,h.child=d}function Qj(d,h,y,S,R){if(d!==null){var O=d.memoizedProps;if(Hx(O,S)&&d.ref===h.ref)if(Ii=!1,h.pendingProps=S=O,KM(d,R))(d.flags&131072)!==0&&(Ii=!0);else return h.lanes=d.lanes,cu(d,h,R)}return GM(d,h,y,S,R)}function Jj(d,h,y,S){var R=S.children,O=d!==null?d.memoizedState:null;if(d===null&&h.stateNode===null&&(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),S.mode==="hidden"){if((h.flags&128)!==0){if(O=O!==null?O.baseLanes|y:y,d!==null){for(S=h.child=d.child,R=0;S!==null;)R=R|S.lanes|S.childLanes,S=S.sibling;S=R&~O}else S=0,h.child=null;return e4(d,h,O,y,S)}if((y&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},d!==null&&A1(h,O!==null?O.cachePool:null),O!==null?nj(h,O):vM(),rj(h);else return S=h.lanes=536870912,e4(d,h,O!==null?O.baseLanes|y:y,y,S)}else O!==null?(A1(h,O.cachePool),nj(h,O),$d(),h.memoizedState=null):(d!==null&&A1(h,null),vM(),$d());return Ms(d,h,R,y),h.child}function ay(d,h){return d!==null&&d.tag===22||h.stateNode!==null||(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.sibling}function e4(d,h,y,S,R){var O=hM();return O=O===null?null:{parent:Di._currentValue,pool:O},h.memoizedState={baseLanes:y,cachePool:O},d!==null&&A1(h,null),vM(),rj(h),d!==null&&um(d,h,S,!0),h.childLanes=R,null}function G1(d,h){return h=H1({mode:h.mode,children:h.children},d.mode),h.ref=d.ref,d.child=h,h.return=d,h}function t4(d,h,y){return gh(h,d.child,null,y),d=G1(h,h.pendingProps),d.flags|=2,io(h),h.memoizedState=null,d}function Boe(d,h,y){var S=h.pendingProps,R=(h.flags&128)!==0;if(h.flags&=-129,d===null){if(zn){if(S.mode==="hidden")return d=G1(h,S),h.lanes=536870912,ay(null,d);if(_M(h),(d=kr)?(d=hz(d,Bo),d=d!==null&&d.data==="&"?d:null,d!==null&&(h.memoizedState={dehydrated:d,treeContext:Ld!==null?{id:ac,overflow:oc}:null,retryLane:536870912,hydrationErrors:null},y=FU(d),y.return=h,h.child=y,Cs=h,kr=null)):d=null,d===null)throw kd(h);return h.lanes=536870912,null}return G1(h,S)}var O=d.memoizedState;if(O!==null){var U=O.dehydrated;if(_M(h),R)if(h.flags&256)h.flags&=-257,h=t4(d,h,y);else if(h.memoizedState!==null)h.child=d.child,h.flags|=128,h=null;else throw Error(r(558));else if(Ii||um(d,h,y,!1),R=(y&d.childLanes)!==0,Ii||R){if(S=Tr,S!==null&&(U=sr(S,y),U!==0&&U!==O.retryLane))throw O.retryLane=U,lh(d,U),Oa(S,d,U),$M;eS(),h=t4(d,h,y)}else d=O.treeContext,kr=Uo(U.nextSibling),Cs=h,zn=!0,Id=null,Bo=!1,d!==null&&zU(h,d),h=G1(h,S),h.flags|=4096;return h}return d=ru(d.child,{mode:S.mode,children:S.children}),d.ref=h.ref,h.child=d,d.return=h,d}function V1(d,h){var y=h.ref;if(y===null)d!==null&&d.ref!==null&&(h.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(r(284));(d===null||d.ref!==y)&&(h.flags|=4194816)}}function GM(d,h,y,S,R){return fh(h),y=wM(d,h,y,S,void 0,R),S=TM(),d!==null&&!Ii?(EM(d,h,R),cu(d,h,R)):(zn&&S&&iM(h),h.flags|=1,Ms(d,h,y,R),h.child)}function n4(d,h,y,S,R,O){return fh(h),h.updateQueue=null,y=sj(h,S,y,R),ij(d),S=TM(),d!==null&&!Ii?(EM(d,h,O),cu(d,h,O)):(zn&&S&&iM(h),h.flags|=1,Ms(d,h,y,O),h.child)}function r4(d,h,y,S,R){if(fh(h),h.stateNode===null){var O=am,U=y.contextType;typeof U=="object"&&U!==null&&(O=As(U)),O=new y(S,O),h.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=jM,h.stateNode=O,O._reactInternals=h,O=h.stateNode,O.props=S,O.state=h.memoizedState,O.refs={},mM(h),U=y.contextType,O.context=typeof U=="object"&&U!==null?As(U):am,O.state=h.memoizedState,U=y.getDerivedStateFromProps,typeof U=="function"&&(UM(h,y,U,S),O.state=h.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(U=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),U!==O.state&&jM.enqueueReplaceState(O,O.state,null),ty(h,S,O,R),ey(),O.state=h.memoizedState),typeof O.componentDidMount=="function"&&(h.flags|=4194308),S=!0}else if(d===null){O=h.stateNode;var X=h.memoizedProps,ce=yh(y,X);O.props=ce;var Oe=O.context,tt=y.contextType;U=am,typeof tt=="object"&&tt!==null&&(U=As(tt));var ut=y.getDerivedStateFromProps;tt=typeof ut=="function"||typeof O.getSnapshotBeforeUpdate=="function",X=h.pendingProps!==X,tt||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(X||Oe!==U)&&Gj(h,O,S,U),Fd=!1;var Ie=h.memoizedState;O.state=Ie,ty(h,S,O,R),ey(),Oe=h.memoizedState,X||Ie!==Oe||Fd?(typeof ut=="function"&&(UM(h,y,ut,S),Oe=h.memoizedState),(ce=Fd||$j(h,y,ce,S,Ie,Oe,U))?(tt||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(h.flags|=4194308)):(typeof O.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=S,h.memoizedState=Oe),O.props=S,O.state=Oe,O.context=U,S=ce):(typeof O.componentDidMount=="function"&&(h.flags|=4194308),S=!1)}else{O=h.stateNode,gM(d,h),U=h.memoizedProps,tt=yh(y,U),O.props=tt,ut=h.pendingProps,Ie=O.context,Oe=y.contextType,ce=am,typeof Oe=="object"&&Oe!==null&&(ce=As(Oe)),X=y.getDerivedStateFromProps,(Oe=typeof X=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(U!==ut||Ie!==ce)&&Gj(h,O,S,ce),Fd=!1,Ie=h.memoizedState,O.state=Ie,ty(h,S,O,R),ey();var He=h.memoizedState;U!==ut||Ie!==He||Fd||d!==null&&d.dependencies!==null&&E1(d.dependencies)?(typeof X=="function"&&(UM(h,y,X,S),He=h.memoizedState),(tt=Fd||$j(h,y,tt,S,Ie,He,ce)||d!==null&&d.dependencies!==null&&E1(d.dependencies))?(Oe||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(S,He,ce),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(S,He,ce)),typeof O.componentDidUpdate=="function"&&(h.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof O.componentDidUpdate!="function"||U===d.memoizedProps&&Ie===d.memoizedState||(h.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||U===d.memoizedProps&&Ie===d.memoizedState||(h.flags|=1024),h.memoizedProps=S,h.memoizedState=He),O.props=S,O.state=He,O.context=ce,S=tt):(typeof O.componentDidUpdate!="function"||U===d.memoizedProps&&Ie===d.memoizedState||(h.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||U===d.memoizedProps&&Ie===d.memoizedState||(h.flags|=1024),S=!1)}return O=S,V1(d,h),S=(h.flags&128)!==0,O||S?(O=h.stateNode,y=S&&typeof y.getDerivedStateFromError!="function"?null:O.render(),h.flags|=1,d!==null&&S?(h.child=gh(h,d.child,null,R),h.child=gh(h,null,y,R)):Ms(d,h,y,R),h.memoizedState=O.state,d=h.child):d=cu(d,h,R),d}function i4(d,h,y,S){return uh(),h.flags|=256,Ms(d,h,y,S),h.child}var VM={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function HM(d){return{baseLanes:d,cachePool:qU()}}function WM(d,h,y){return d=d!==null?d.childLanes&~y:0,h&&(d|=ao),d}function s4(d,h,y){var S=h.pendingProps,R=!1,O=(h.flags&128)!==0,U;if((U=O)||(U=d!==null&&d.memoizedState===null?!1:(bi.current&2)!==0),U&&(R=!0,h.flags&=-129),U=(h.flags&32)!==0,h.flags&=-33,d===null){if(zn){if(R?zd(h):$d(),(d=kr)?(d=hz(d,Bo),d=d!==null&&d.data!=="&"?d:null,d!==null&&(h.memoizedState={dehydrated:d,treeContext:Ld!==null?{id:ac,overflow:oc}:null,retryLane:536870912,hydrationErrors:null},y=FU(d),y.return=h,h.child=y,Cs=h,kr=null)):d=null,d===null)throw kd(h);return MR(d)?h.lanes=32:h.lanes=536870912,null}var X=S.children;return S=S.fallback,R?($d(),R=h.mode,X=H1({mode:"hidden",children:X},R),S=ch(S,R,y,null),X.return=h,S.return=h,X.sibling=S,h.child=X,S=h.child,S.memoizedState=HM(y),S.childLanes=WM(d,U,y),h.memoizedState=VM,ay(null,S)):(zd(h),qM(h,X))}var ce=d.memoizedState;if(ce!==null&&(X=ce.dehydrated,X!==null)){if(O)h.flags&256?(zd(h),h.flags&=-257,h=XM(d,h,y)):h.memoizedState!==null?($d(),h.child=d.child,h.flags|=128,h=null):($d(),X=S.fallback,R=h.mode,S=H1({mode:"visible",children:S.children},R),X=ch(X,R,y,null),X.flags|=2,S.return=h,X.return=h,S.sibling=X,h.child=S,gh(h,d.child,null,y),S=h.child,S.memoizedState=HM(y),S.childLanes=WM(d,U,y),h.memoizedState=VM,h=ay(null,S));else if(zd(h),MR(X)){if(U=X.nextSibling&&X.nextSibling.dataset,U)var Oe=U.dgst;U=Oe,S=Error(r(419)),S.stack="",S.digest=U,Xx({value:S,source:null,stack:null}),h=XM(d,h,y)}else if(Ii||um(d,h,y,!1),U=(y&d.childLanes)!==0,Ii||U){if(U=Tr,U!==null&&(S=sr(U,y),S!==0&&S!==ce.retryLane))throw ce.retryLane=S,lh(d,S),Oa(U,d,S),$M;AR(X)||eS(),h=XM(d,h,y)}else AR(X)?(h.flags|=192,h.child=d.child,h=null):(d=ce.treeContext,kr=Uo(X.nextSibling),Cs=h,zn=!0,Id=null,Bo=!1,d!==null&&zU(h,d),h=qM(h,S.children),h.flags|=4096);return h}return R?($d(),X=S.fallback,R=h.mode,ce=d.child,Oe=ce.sibling,S=ru(ce,{mode:"hidden",children:S.children}),S.subtreeFlags=ce.subtreeFlags&65011712,Oe!==null?X=ru(Oe,X):(X=ch(X,R,y,null),X.flags|=2),X.return=h,S.return=h,S.sibling=X,h.child=S,ay(null,S),S=h.child,X=d.child.memoizedState,X===null?X=HM(y):(R=X.cachePool,R!==null?(ce=Di._currentValue,R=R.parent!==ce?{parent:ce,pool:ce}:R):R=qU(),X={baseLanes:X.baseLanes|y,cachePool:R}),S.memoizedState=X,S.childLanes=WM(d,U,y),h.memoizedState=VM,ay(d.child,S)):(zd(h),y=d.child,d=y.sibling,y=ru(y,{mode:"visible",children:S.children}),y.return=h,y.sibling=null,d!==null&&(U=h.deletions,U===null?(h.deletions=[d],h.flags|=16):U.push(d)),h.child=y,h.memoizedState=null,y)}function qM(d,h){return h=H1({mode:"visible",children:h},d.mode),h.return=d,d.child=h}function H1(d,h){return d=no(22,d,null,h),d.lanes=0,d}function XM(d,h,y){return gh(h,d.child,null,y),d=qM(h,h.pendingProps.children),d.flags|=2,h.memoizedState=null,d}function a4(d,h,y){d.lanes|=h;var S=d.alternate;S!==null&&(S.lanes|=h),cM(d.return,h,y)}function YM(d,h,y,S,R,O){var U=d.memoizedState;U===null?d.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:S,tail:y,tailMode:R,treeForkCount:O}:(U.isBackwards=h,U.rendering=null,U.renderingStartTime=0,U.last=S,U.tail=y,U.tailMode=R,U.treeForkCount=O)}function o4(d,h,y){var S=h.pendingProps,R=S.revealOrder,O=S.tail;S=S.children;var U=bi.current,X=(U&2)!==0;if(X?(U=U&1|2,h.flags|=128):U&=1,oe(bi,U),Ms(d,h,S,y),S=zn?qx:0,!X&&d!==null&&(d.flags&128)!==0)e:for(d=h.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&a4(d,y,h);else if(d.tag===19)a4(d,y,h);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break e;for(;d.sibling===null;){if(d.return===null||d.return===h)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}switch(R){case"forwards":for(y=h.child,R=null;y!==null;)d=y.alternate,d!==null&&D1(d)===null&&(R=y),y=y.sibling;y=R,y===null?(R=h.child,h.child=null):(R=y.sibling,y.sibling=null),YM(h,!1,R,y,O,S);break;case"backwards":case"unstable_legacy-backwards":for(y=null,R=h.child,h.child=null;R!==null;){if(d=R.alternate,d!==null&&D1(d)===null){h.child=R;break}d=R.sibling,R.sibling=y,y=R,R=d}YM(h,!0,y,null,O,S);break;case"together":YM(h,!1,null,null,void 0,S);break;default:h.memoizedState=null}return h.child}function cu(d,h,y){if(d!==null&&(h.dependencies=d.dependencies),Hd|=h.lanes,(y&h.childLanes)===0)if(d!==null){if(um(d,h,y,!1),(y&h.childLanes)===0)return null}else return null;if(d!==null&&h.child!==d.child)throw Error(r(153));if(h.child!==null){for(d=h.child,y=ru(d,d.pendingProps),h.child=y,y.return=h;d.sibling!==null;)d=d.sibling,y=y.sibling=ru(d,d.pendingProps),y.return=h;y.sibling=null}return h.child}function KM(d,h){return(d.lanes&h)!==0?!0:(d=d.dependencies,!!(d!==null&&E1(d)))}function Foe(d,h,y){switch(h.tag){case 3:Ee(h,h.stateNode.containerInfo),Bd(h,Di,d.memoizedState.cache),uh();break;case 27:case 5:ve(h);break;case 4:Ee(h,h.stateNode.containerInfo);break;case 10:Bd(h,h.type,h.memoizedProps.value);break;case 31:if(h.memoizedState!==null)return h.flags|=128,_M(h),null;break;case 13:var S=h.memoizedState;if(S!==null)return S.dehydrated!==null?(zd(h),h.flags|=128,null):(y&h.child.childLanes)!==0?s4(d,h,y):(zd(h),d=cu(d,h,y),d!==null?d.sibling:null);zd(h);break;case 19:var R=(d.flags&128)!==0;if(S=(y&h.childLanes)!==0,S||(um(d,h,y,!1),S=(y&h.childLanes)!==0),R){if(S)return o4(d,h,y);h.flags|=128}if(R=h.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),oe(bi,bi.current),S)break;return null;case 22:return h.lanes=0,Jj(d,h,y,h.pendingProps);case 24:Bd(h,Di,d.memoizedState.cache)}return cu(d,h,y)}function l4(d,h,y){if(d!==null)if(d.memoizedProps!==h.pendingProps)Ii=!0;else{if(!KM(d,y)&&(h.flags&128)===0)return Ii=!1,Foe(d,h,y);Ii=(d.flags&131072)!==0}else Ii=!1,zn&&(h.flags&1048576)!==0&&jU(h,qx,h.index);switch(h.lanes=0,h.tag){case 16:e:{var S=h.pendingProps;if(d=ph(h.elementType),h.type=d,typeof d=="function")tM(d)?(S=yh(d,S),h.tag=1,h=r4(null,h,d,S,y)):(h.tag=0,h=GM(null,h,d,S,y));else{if(d!=null){var R=d.$$typeof;if(R===A){h.tag=11,h=Kj(null,h,d,S,y);break e}else if(R===P){h.tag=14,h=Zj(null,h,d,S,y);break e}}throw h=z(d)||d,Error(r(306,h,""))}}return h;case 0:return GM(d,h,h.type,h.pendingProps,y);case 1:return S=h.type,R=yh(S,h.pendingProps),r4(d,h,S,R,y);case 3:e:{if(Ee(h,h.stateNode.containerInfo),d===null)throw Error(r(387));S=h.pendingProps;var O=h.memoizedState;R=O.element,gM(d,h),ty(h,S,null,y);var U=h.memoizedState;if(S=U.cache,Bd(h,Di,S),S!==O.cache&&uM(h,[Di],y,!0),ey(),S=U.element,O.isDehydrated)if(O={element:S,isDehydrated:!1,cache:U.cache},h.updateQueue.baseState=O,h.memoizedState=O,h.flags&256){h=i4(d,h,S,y);break e}else if(S!==R){R=Lo(Error(r(424)),h),Xx(R),h=i4(d,h,S,y);break e}else{switch(d=h.stateNode.containerInfo,d.nodeType){case 9:d=d.body;break;default:d=d.nodeName==="HTML"?d.ownerDocument.body:d}for(kr=Uo(d.firstChild),Cs=h,zn=!0,Id=null,Bo=!0,y=JU(h,null,S,y),h.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling}else{if(uh(),S===R){h=cu(d,h,y);break e}Ms(d,h,S,y)}h=h.child}return h;case 26:return V1(d,h),d===null?(y=vz(h.type,null,h.pendingProps,null))?h.memoizedState=y:zn||(y=h.type,d=h.pendingProps,S=oS(K.current).createElement(y),S[Oi]=h,S[Wi]=d,Rs(S,y,d),De(S),h.stateNode=S):h.memoizedState=vz(h.type,d.memoizedProps,h.pendingProps,d.memoizedState),null;case 27:return ve(h),d===null&&zn&&(S=h.stateNode=gz(h.type,h.pendingProps,K.current),Cs=h,Bo=!0,R=kr,Kd(h.type)?(RR=R,kr=Uo(S.firstChild)):kr=R),Ms(d,h,h.pendingProps.children,y),V1(d,h),d===null&&(h.flags|=4194304),h.child;case 5:return d===null&&zn&&((R=S=kr)&&(S=ple(S,h.type,h.pendingProps,Bo),S!==null?(h.stateNode=S,Cs=h,kr=Uo(S.firstChild),Bo=!1,R=!0):R=!1),R||kd(h)),ve(h),R=h.type,O=h.pendingProps,U=d!==null?d.memoizedProps:null,S=O.children,TR(R,O)?S=null:U!==null&&TR(R,U)&&(h.flags|=32),h.memoizedState!==null&&(R=wM(d,h,Roe,null,null,y),_y._currentValue=R),V1(d,h),Ms(d,h,S,y),h.child;case 6:return d===null&&zn&&((d=y=kr)&&(y=mle(y,h.pendingProps,Bo),y!==null?(h.stateNode=y,Cs=h,kr=null,d=!0):d=!1),d||kd(h)),null;case 13:return s4(d,h,y);case 4:return Ee(h,h.stateNode.containerInfo),S=h.pendingProps,d===null?h.child=gh(h,null,S,y):Ms(d,h,S,y),h.child;case 11:return Kj(d,h,h.type,h.pendingProps,y);case 7:return Ms(d,h,h.pendingProps,y),h.child;case 8:return Ms(d,h,h.pendingProps.children,y),h.child;case 12:return Ms(d,h,h.pendingProps.children,y),h.child;case 10:return S=h.pendingProps,Bd(h,h.type,S.value),Ms(d,h,S.children,y),h.child;case 9:return R=h.type._context,S=h.pendingProps.children,fh(h),R=As(R),S=S(R),h.flags|=1,Ms(d,h,S,y),h.child;case 14:return Zj(d,h,h.type,h.pendingProps,y);case 15:return Qj(d,h,h.type,h.pendingProps,y);case 19:return o4(d,h,y);case 31:return Boe(d,h,y);case 22:return Jj(d,h,y,h.pendingProps);case 24:return fh(h),S=As(Di),d===null?(R=hM(),R===null&&(R=Tr,O=dM(),R.pooledCache=O,O.refCount++,O!==null&&(R.pooledCacheLanes|=y),R=O),h.memoizedState={parent:S,cache:R},mM(h),Bd(h,Di,R)):((d.lanes&y)!==0&&(gM(d,h),ty(h,null,null,y),ey()),R=d.memoizedState,O=h.memoizedState,R.parent!==S?(R={parent:S,cache:S},h.memoizedState=R,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=R),Bd(h,Di,S)):(S=O.cache,Bd(h,Di,S),S!==R.cache&&uM(h,[Di],y,!0))),Ms(d,h,h.pendingProps.children,y),h.child;case 29:throw h.pendingProps}throw Error(r(156,h.tag))}function uu(d){d.flags|=4}function ZM(d,h,y,S,R){if((h=(d.mode&32)!==0)&&(h=!1),h){if(d.flags|=16777216,(R&335544128)===R)if(d.stateNode.complete)d.flags|=8192;else if(I4())d.flags|=8192;else throw mh=R1,pM}else d.flags&=-16777217}function c4(d,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)d.flags&=-16777217;else if(d.flags|=16777216,!Tz(h))if(I4())d.flags|=8192;else throw mh=R1,pM}function W1(d,h){h!==null&&(d.flags|=4),d.flags&16384&&(h=d.tag!==22?Ct():536870912,d.lanes|=h,Sm|=h)}function oy(d,h){if(!zn)switch(d.tailMode){case"hidden":h=d.tail;for(var y=null;h!==null;)h.alternate!==null&&(y=h),h=h.sibling;y===null?d.tail=null:y.sibling=null;break;case"collapsed":y=d.tail;for(var S=null;y!==null;)y.alternate!==null&&(S=y),y=y.sibling;S===null?h||d.tail===null?d.tail=null:d.tail.sibling=null:S.sibling=null}}function Br(d){var h=d.alternate!==null&&d.alternate.child===d.child,y=0,S=0;if(h)for(var R=d.child;R!==null;)y|=R.lanes|R.childLanes,S|=R.subtreeFlags&65011712,S|=R.flags&65011712,R.return=d,R=R.sibling;else for(R=d.child;R!==null;)y|=R.lanes|R.childLanes,S|=R.subtreeFlags,S|=R.flags,R.return=d,R=R.sibling;return d.subtreeFlags|=S,d.childLanes=y,h}function Uoe(d,h,y){var S=h.pendingProps;switch(sM(h),h.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Br(h),null;case 1:return Br(h),null;case 3:return y=h.stateNode,S=null,d!==null&&(S=d.memoizedState.cache),h.memoizedState.cache!==S&&(h.flags|=2048),au(Di),se(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(d===null||d.child===null)&&(cm(h)?uu(h):d===null||d.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,oM())),Br(h),null;case 26:var R=h.type,O=h.memoizedState;return d===null?(uu(h),O!==null?(Br(h),c4(h,O)):(Br(h),ZM(h,R,null,S,y))):O?O!==d.memoizedState?(uu(h),Br(h),c4(h,O)):(Br(h),h.flags&=-16777217):(d=d.memoizedProps,d!==S&&uu(h),Br(h),ZM(h,R,d,S,y)),null;case 27:if(Pe(h),y=K.current,R=h.type,d!==null&&h.stateNode!=null)d.memoizedProps!==S&&uu(h);else{if(!S){if(h.stateNode===null)throw Error(r(166));return Br(h),null}d=me.current,cm(h)?$U(h):(d=gz(R,S,y),h.stateNode=d,uu(h))}return Br(h),null;case 5:if(Pe(h),R=h.type,d!==null&&h.stateNode!=null)d.memoizedProps!==S&&uu(h);else{if(!S){if(h.stateNode===null)throw Error(r(166));return Br(h),null}if(O=me.current,cm(h))$U(h);else{var U=oS(K.current);switch(O){case 1:O=U.createElementNS("http://www.w3.org/2000/svg",R);break;case 2:O=U.createElementNS("http://www.w3.org/1998/Math/MathML",R);break;default:switch(R){case"svg":O=U.createElementNS("http://www.w3.org/2000/svg",R);break;case"math":O=U.createElementNS("http://www.w3.org/1998/Math/MathML",R);break;case"script":O=U.createElement("div"),O.innerHTML="<script><\/script>",O=O.removeChild(O.firstChild);break;case"select":O=typeof S.is=="string"?U.createElement("select",{is:S.is}):U.createElement("select"),S.multiple?O.multiple=!0:S.size&&(O.size=S.size);break;default:O=typeof S.is=="string"?U.createElement(R,{is:S.is}):U.createElement(R)}}O[Oi]=h,O[Wi]=S;e:for(U=h.child;U!==null;){if(U.tag===5||U.tag===6)O.appendChild(U.stateNode);else if(U.tag!==4&&U.tag!==27&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===h)break e;for(;U.sibling===null;){if(U.return===null||U.return===h)break e;U=U.return}U.sibling.return=U.return,U=U.sibling}h.stateNode=O;e:switch(Rs(O,R,S),R){case"button":case"input":case"select":case"textarea":S=!!S.autoFocus;break e;case"img":S=!0;break e;default:S=!1}S&&uu(h)}}return Br(h),ZM(h,h.type,d===null?null:d.memoizedProps,h.pendingProps,y),null;case 6:if(d&&h.stateNode!=null)d.memoizedProps!==S&&uu(h);else{if(typeof S!="string"&&h.stateNode===null)throw Error(r(166));if(d=K.current,cm(h)){if(d=h.stateNode,y=h.memoizedProps,S=null,R=Cs,R!==null)switch(R.tag){case 27:case 5:S=R.memoizedProps}d[Oi]=h,d=!!(d.nodeValue===y||S!==null&&S.suppressHydrationWarning===!0||sz(d.nodeValue,y)),d||kd(h,!0)}else d=oS(d).createTextNode(S),d[Oi]=h,h.stateNode=d}return Br(h),null;case 31:if(y=h.memoizedState,d===null||d.memoizedState!==null){if(S=cm(h),y!==null){if(d===null){if(!S)throw Error(r(318));if(d=h.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(557));d[Oi]=h}else uh(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Br(h),d=!1}else y=oM(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=y),d=!0;if(!d)return h.flags&256?(io(h),h):(io(h),null);if((h.flags&128)!==0)throw Error(r(558))}return Br(h),null;case 13:if(S=h.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(R=cm(h),S!==null&&S.dehydrated!==null){if(d===null){if(!R)throw Error(r(318));if(R=h.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(r(317));R[Oi]=h}else uh(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Br(h),R=!1}else R=oM(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=R),R=!0;if(!R)return h.flags&256?(io(h),h):(io(h),null)}return io(h),(h.flags&128)!==0?(h.lanes=y,h):(y=S!==null,d=d!==null&&d.memoizedState!==null,y&&(S=h.child,R=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&(R=S.alternate.memoizedState.cachePool.pool),O=null,S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(O=S.memoizedState.cachePool.pool),O!==R&&(S.flags|=2048)),y!==d&&y&&(h.child.flags|=8192),W1(h,h.updateQueue),Br(h),null);case 4:return se(),d===null&&vR(h.stateNode.containerInfo),Br(h),null;case 10:return au(h.type),Br(h),null;case 19:if(ee(bi),S=h.memoizedState,S===null)return Br(h),null;if(R=(h.flags&128)!==0,O=S.rendering,O===null)if(R)oy(S,!1);else{if(ci!==0||d!==null&&(d.flags&128)!==0)for(d=h.child;d!==null;){if(O=D1(d),O!==null){for(h.flags|=128,oy(S,!1),d=O.updateQueue,h.updateQueue=d,W1(h,d),h.subtreeFlags=0,d=y,y=h.child;y!==null;)BU(y,d),y=y.sibling;return oe(bi,bi.current&1|2),zn&&iu(h,S.treeForkCount),h.child}d=d.sibling}S.tail!==null&&V()>Z1&&(h.flags|=128,R=!0,oy(S,!1),h.lanes=4194304)}else{if(!R)if(d=D1(O),d!==null){if(h.flags|=128,R=!0,d=d.updateQueue,h.updateQueue=d,W1(h,d),oy(S,!0),S.tail===null&&S.tailMode==="hidden"&&!O.alternate&&!zn)return Br(h),null}else 2*V()-S.renderingStartTime>Z1&&y!==536870912&&(h.flags|=128,R=!0,oy(S,!1),h.lanes=4194304);S.isBackwards?(O.sibling=h.child,h.child=O):(d=S.last,d!==null?d.sibling=O:h.child=O,S.last=O)}return S.tail!==null?(d=S.tail,S.rendering=d,S.tail=d.sibling,S.renderingStartTime=V(),d.sibling=null,y=bi.current,oe(bi,R?y&1|2:y&1),zn&&iu(h,S.treeForkCount),d):(Br(h),null);case 22:case 23:return io(h),bM(),S=h.memoizedState!==null,d!==null?d.memoizedState!==null!==S&&(h.flags|=8192):S&&(h.flags|=8192),S?(y&536870912)!==0&&(h.flags&128)===0&&(Br(h),h.subtreeFlags&6&&(h.flags|=8192)):Br(h),y=h.updateQueue,y!==null&&W1(h,y.retryQueue),y=null,d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),S=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(S=h.memoizedState.cachePool.pool),S!==y&&(h.flags|=2048),d!==null&&ee(hh),null;case 24:return y=null,d!==null&&(y=d.memoizedState.cache),h.memoizedState.cache!==y&&(h.flags|=2048),au(Di),Br(h),null;case 25:return null;case 30:return null}throw Error(r(156,h.tag))}function joe(d,h){switch(sM(h),h.tag){case 1:return d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 3:return au(Di),se(),d=h.flags,(d&65536)!==0&&(d&128)===0?(h.flags=d&-65537|128,h):null;case 26:case 27:case 5:return Pe(h),null;case 31:if(h.memoizedState!==null){if(io(h),h.alternate===null)throw Error(r(340));uh()}return d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 13:if(io(h),d=h.memoizedState,d!==null&&d.dehydrated!==null){if(h.alternate===null)throw Error(r(340));uh()}return d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 19:return ee(bi),null;case 4:return se(),null;case 10:return au(h.type),null;case 22:case 23:return io(h),bM(),d!==null&&ee(hh),d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 24:return au(Di),null;case 25:return null;default:return null}}function u4(d,h){switch(sM(h),h.tag){case 3:au(Di),se();break;case 26:case 27:case 5:Pe(h);break;case 4:se();break;case 31:h.memoizedState!==null&&io(h);break;case 13:io(h);break;case 19:ee(bi);break;case 10:au(h.type);break;case 22:case 23:io(h),bM(),d!==null&&ee(hh);break;case 24:au(Di)}}function ly(d,h){try{var y=h.updateQueue,S=y!==null?y.lastEffect:null;if(S!==null){var R=S.next;y=R;do{if((y.tag&d)===d){S=void 0;var O=y.create,U=y.inst;S=O(),U.destroy=S}y=y.next}while(y!==R)}}catch(X){dr(h,h.return,X)}}function Gd(d,h,y){try{var S=h.updateQueue,R=S!==null?S.lastEffect:null;if(R!==null){var O=R.next;S=O;do{if((S.tag&d)===d){var U=S.inst,X=U.destroy;if(X!==void 0){U.destroy=void 0,R=h;var ce=y,Oe=X;try{Oe()}catch(tt){dr(R,ce,tt)}}}S=S.next}while(S!==O)}}catch(tt){dr(h,h.return,tt)}}function d4(d){var h=d.updateQueue;if(h!==null){var y=d.stateNode;try{tj(h,y)}catch(S){dr(d,d.return,S)}}}function f4(d,h,y){y.props=yh(d.type,d.memoizedProps),y.state=d.memoizedState;try{y.componentWillUnmount()}catch(S){dr(d,h,S)}}function cy(d,h){try{var y=d.ref;if(y!==null){switch(d.tag){case 26:case 27:case 5:var S=d.stateNode;break;case 30:S=d.stateNode;break;default:S=d.stateNode}typeof y=="function"?d.refCleanup=y(S):y.current=S}}catch(R){dr(d,h,R)}}function lc(d,h){var y=d.ref,S=d.refCleanup;if(y!==null)if(typeof S=="function")try{S()}catch(R){dr(d,h,R)}finally{d.refCleanup=null,d=d.alternate,d!=null&&(d.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(R){dr(d,h,R)}else y.current=null}function h4(d){var h=d.type,y=d.memoizedProps,S=d.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":y.autoFocus&&S.focus();break e;case"img":y.src?S.src=y.src:y.srcSet&&(S.srcset=y.srcSet)}}catch(R){dr(d,d.return,R)}}function QM(d,h,y){try{var S=d.stateNode;lle(S,d.type,y,h),S[Wi]=h}catch(R){dr(d,d.return,R)}}function p4(d){return d.tag===5||d.tag===3||d.tag===26||d.tag===27&&Kd(d.type)||d.tag===4}function JM(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||p4(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.tag===27&&Kd(d.type)||d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function eR(d,h,y){var S=d.tag;if(S===5||S===6)d=d.stateNode,h?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(d,h):(h=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,h.appendChild(d),y=y._reactRootContainer,y!=null||h.onclick!==null||(h.onclick=tu));else if(S!==4&&(S===27&&Kd(d.type)&&(y=d.stateNode,h=null),d=d.child,d!==null))for(eR(d,h,y),d=d.sibling;d!==null;)eR(d,h,y),d=d.sibling}function q1(d,h,y){var S=d.tag;if(S===5||S===6)d=d.stateNode,h?y.insertBefore(d,h):y.appendChild(d);else if(S!==4&&(S===27&&Kd(d.type)&&(y=d.stateNode),d=d.child,d!==null))for(q1(d,h,y),d=d.sibling;d!==null;)q1(d,h,y),d=d.sibling}function m4(d){var h=d.stateNode,y=d.memoizedProps;try{for(var S=d.type,R=h.attributes;R.length;)h.removeAttributeNode(R[0]);Rs(h,S,y),h[Oi]=d,h[Wi]=y}catch(O){dr(d,d.return,O)}}var du=!1,ki=!1,tR=!1,g4=typeof WeakSet=="function"?WeakSet:Set,fs=null;function zoe(d,h){if(d=d.containerInfo,SR=pS,d=MU(d),XA(d)){if("selectionStart"in d)var y={start:d.selectionStart,end:d.selectionEnd};else e:{y=(y=d.ownerDocument)&&y.defaultView||window;var S=y.getSelection&&y.getSelection();if(S&&S.rangeCount!==0){y=S.anchorNode;var R=S.anchorOffset,O=S.focusNode;S=S.focusOffset;try{y.nodeType,O.nodeType}catch{y=null;break e}var U=0,X=-1,ce=-1,Oe=0,tt=0,ut=d,Ie=null;t:for(;;){for(var He;ut!==y||R!==0&&ut.nodeType!==3||(X=U+R),ut!==O||S!==0&&ut.nodeType!==3||(ce=U+S),ut.nodeType===3&&(U+=ut.nodeValue.length),(He=ut.firstChild)!==null;)Ie=ut,ut=He;for(;;){if(ut===d)break t;if(Ie===y&&++Oe===R&&(X=U),Ie===O&&++tt===S&&(ce=U),(He=ut.nextSibling)!==null)break;ut=Ie,Ie=ut.parentNode}ut=He}y=X===-1||ce===-1?null:{start:X,end:ce}}else y=null}y=y||{start:0,end:0}}else y=null;for(wR={focusedElem:d,selectionRange:y},pS=!1,fs=h;fs!==null;)if(h=fs,d=h.child,(h.subtreeFlags&1028)!==0&&d!==null)d.return=h,fs=d;else for(;fs!==null;){switch(h=fs,O=h.alternate,d=h.flags,h.tag){case 0:if((d&4)!==0&&(d=h.updateQueue,d=d!==null?d.events:null,d!==null))for(y=0;y<d.length;y++)R=d[y],R.ref.impl=R.nextImpl;break;case 11:case 15:break;case 1:if((d&1024)!==0&&O!==null){d=void 0,y=h,R=O.memoizedProps,O=O.memoizedState,S=y.stateNode;try{var $t=yh(y.type,R);d=S.getSnapshotBeforeUpdate($t,O),S.__reactInternalSnapshotBeforeUpdate=d}catch(on){dr(y,y.return,on)}}break;case 3:if((d&1024)!==0){if(d=h.stateNode.containerInfo,y=d.nodeType,y===9)CR(d);else if(y===1)switch(d.nodeName){case"HEAD":case"HTML":case"BODY":CR(d);break;default:d.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((d&1024)!==0)throw Error(r(163))}if(d=h.sibling,d!==null){d.return=h.return,fs=d;break}fs=h.return}}function x4(d,h,y){var S=y.flags;switch(y.tag){case 0:case 11:case 15:hu(d,y),S&4&&ly(5,y);break;case 1:if(hu(d,y),S&4)if(d=y.stateNode,h===null)try{d.componentDidMount()}catch(U){dr(y,y.return,U)}else{var R=yh(y.type,h.memoizedProps);h=h.memoizedState;try{d.componentDidUpdate(R,h,d.__reactInternalSnapshotBeforeUpdate)}catch(U){dr(y,y.return,U)}}S&64&&d4(y),S&512&&cy(y,y.return);break;case 3:if(hu(d,y),S&64&&(d=y.updateQueue,d!==null)){if(h=null,y.child!==null)switch(y.child.tag){case 27:case 5:h=y.child.stateNode;break;case 1:h=y.child.stateNode}try{tj(d,h)}catch(U){dr(y,y.return,U)}}break;case 27:h===null&&S&4&&m4(y);case 26:case 5:hu(d,y),h===null&&S&4&&h4(y),S&512&&cy(y,y.return);break;case 12:hu(d,y);break;case 31:hu(d,y),S&4&&b4(d,y);break;case 13:hu(d,y),S&4&&_4(d,y),S&64&&(d=y.memoizedState,d!==null&&(d=d.dehydrated,d!==null&&(y=Koe.bind(null,y),gle(d,y))));break;case 22:if(S=y.memoizedState!==null||du,!S){h=h!==null&&h.memoizedState!==null||ki,R=du;var O=ki;du=S,(ki=h)&&!O?pu(d,y,(y.subtreeFlags&8772)!==0):hu(d,y),du=R,ki=O}break;case 30:break;default:hu(d,y)}}function y4(d){var h=d.alternate;h!==null&&(d.alternate=null,y4(h)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(h=d.stateNode,h!==null&&Bx(h)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}var Hr=null,Ma=!1;function fu(d,h,y){for(y=y.child;y!==null;)v4(d,h,y),y=y.sibling}function v4(d,h,y){if(ot&&typeof ot.onCommitFiberUnmount=="function")try{ot.onCommitFiberUnmount(Be,y)}catch{}switch(y.tag){case 26:ki||lc(y,h),fu(d,h,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:ki||lc(y,h);var S=Hr,R=Ma;Kd(y.type)&&(Hr=y.stateNode,Ma=!1),fu(d,h,y),yy(y.stateNode),Hr=S,Ma=R;break;case 5:ki||lc(y,h);case 6:if(S=Hr,R=Ma,Hr=null,fu(d,h,y),Hr=S,Ma=R,Hr!==null)if(Ma)try{(Hr.nodeType===9?Hr.body:Hr.nodeName==="HTML"?Hr.ownerDocument.body:Hr).removeChild(y.stateNode)}catch(O){dr(y,h,O)}else try{Hr.removeChild(y.stateNode)}catch(O){dr(y,h,O)}break;case 18:Hr!==null&&(Ma?(d=Hr,dz(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,y.stateNode),Pm(d)):dz(Hr,y.stateNode));break;case 4:S=Hr,R=Ma,Hr=y.stateNode.containerInfo,Ma=!0,fu(d,h,y),Hr=S,Ma=R;break;case 0:case 11:case 14:case 15:Gd(2,y,h),ki||Gd(4,y,h),fu(d,h,y);break;case 1:ki||(lc(y,h),S=y.stateNode,typeof S.componentWillUnmount=="function"&&f4(y,h,S)),fu(d,h,y);break;case 21:fu(d,h,y);break;case 22:ki=(S=ki)||y.memoizedState!==null,fu(d,h,y),ki=S;break;default:fu(d,h,y)}}function b4(d,h){if(h.memoizedState===null&&(d=h.alternate,d!==null&&(d=d.memoizedState,d!==null))){d=d.dehydrated;try{Pm(d)}catch(y){dr(h,h.return,y)}}}function _4(d,h){if(h.memoizedState===null&&(d=h.alternate,d!==null&&(d=d.memoizedState,d!==null&&(d=d.dehydrated,d!==null))))try{Pm(d)}catch(y){dr(h,h.return,y)}}function $oe(d){switch(d.tag){case 31:case 13:case 19:var h=d.stateNode;return h===null&&(h=d.stateNode=new g4),h;case 22:return d=d.stateNode,h=d._retryCache,h===null&&(h=d._retryCache=new g4),h;default:throw Error(r(435,d.tag))}}function X1(d,h){var y=$oe(d);h.forEach(function(S){if(!y.has(S)){y.add(S);var R=Zoe.bind(null,d,S);S.then(R,R)}})}function Ra(d,h){var y=h.deletions;if(y!==null)for(var S=0;S<y.length;S++){var R=y[S],O=d,U=h,X=U;e:for(;X!==null;){switch(X.tag){case 27:if(Kd(X.type)){Hr=X.stateNode,Ma=!1;break e}break;case 5:Hr=X.stateNode,Ma=!1;break e;case 3:case 4:Hr=X.stateNode.containerInfo,Ma=!0;break e}X=X.return}if(Hr===null)throw Error(r(160));v4(O,U,R),Hr=null,Ma=!1,O=R.alternate,O!==null&&(O.return=null),R.return=null}if(h.subtreeFlags&13886)for(h=h.child;h!==null;)S4(h,d),h=h.sibling}var wl=null;function S4(d,h){var y=d.alternate,S=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:Ra(h,d),Pa(d),S&4&&(Gd(3,d,d.return),ly(3,d),Gd(5,d,d.return));break;case 1:Ra(h,d),Pa(d),S&512&&(ki||y===null||lc(y,y.return)),S&64&&du&&(d=d.updateQueue,d!==null&&(S=d.callbacks,S!==null&&(y=d.shared.hiddenCallbacks,d.shared.hiddenCallbacks=y===null?S:y.concat(S))));break;case 26:var R=wl;if(Ra(h,d),Pa(d),S&512&&(ki||y===null||lc(y,y.return)),S&4){var O=y!==null?y.memoizedState:null;if(S=d.memoizedState,y===null)if(S===null)if(d.stateNode===null){e:{S=d.type,y=d.memoizedProps,R=R.ownerDocument||R;t:switch(S){case"title":O=R.getElementsByTagName("title")[0],(!O||O[ih]||O[Oi]||O.namespaceURI==="http://www.w3.org/2000/svg"||O.hasAttribute("itemprop"))&&(O=R.createElement(S),R.head.insertBefore(O,R.querySelector("head > title"))),Rs(O,S,y),O[Oi]=d,De(O),S=O;break e;case"link":var U=Sz("link","href",R).get(S+(y.href||""));if(U){for(var X=0;X<U.length;X++)if(O=U[X],O.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&O.getAttribute("rel")===(y.rel==null?null:y.rel)&&O.getAttribute("title")===(y.title==null?null:y.title)&&O.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){U.splice(X,1);break t}}O=R.createElement(S),Rs(O,S,y),R.head.appendChild(O);break;case"meta":if(U=Sz("meta","content",R).get(S+(y.content||""))){for(X=0;X<U.length;X++)if(O=U[X],O.getAttribute("content")===(y.content==null?null:""+y.content)&&O.getAttribute("name")===(y.name==null?null:y.name)&&O.getAttribute("property")===(y.property==null?null:y.property)&&O.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&O.getAttribute("charset")===(y.charSet==null?null:y.charSet)){U.splice(X,1);break t}}O=R.createElement(S),Rs(O,S,y),R.head.appendChild(O);break;default:throw Error(r(468,S))}O[Oi]=d,De(O),S=O}d.stateNode=S}else wz(R,d.type,d.stateNode);else d.stateNode=_z(R,S,d.memoizedProps);else O!==S?(O===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):O.count--,S===null?wz(R,d.type,d.stateNode):_z(R,S,d.memoizedProps)):S===null&&d.stateNode!==null&&QM(d,d.memoizedProps,y.memoizedProps)}break;case 27:Ra(h,d),Pa(d),S&512&&(ki||y===null||lc(y,y.return)),y!==null&&S&4&&QM(d,d.memoizedProps,y.memoizedProps);break;case 5:if(Ra(h,d),Pa(d),S&512&&(ki||y===null||lc(y,y.return)),d.flags&32){R=d.stateNode;try{sc(R,"")}catch($t){dr(d,d.return,$t)}}S&4&&d.stateNode!=null&&(R=d.memoizedProps,QM(d,R,y!==null?y.memoizedProps:R)),S&1024&&(tR=!0);break;case 6:if(Ra(h,d),Pa(d),S&4){if(d.stateNode===null)throw Error(r(162));S=d.memoizedProps,y=d.stateNode;try{y.nodeValue=S}catch($t){dr(d,d.return,$t)}}break;case 3:if(uS=null,R=wl,wl=lS(h.containerInfo),Ra(h,d),wl=R,Pa(d),S&4&&y!==null&&y.memoizedState.isDehydrated)try{Pm(h.containerInfo)}catch($t){dr(d,d.return,$t)}tR&&(tR=!1,w4(d));break;case 4:S=wl,wl=lS(d.stateNode.containerInfo),Ra(h,d),Pa(d),wl=S;break;case 12:Ra(h,d),Pa(d);break;case 31:Ra(h,d),Pa(d),S&4&&(S=d.updateQueue,S!==null&&(d.updateQueue=null,X1(d,S)));break;case 13:Ra(h,d),Pa(d),d.child.flags&8192&&d.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(K1=V()),S&4&&(S=d.updateQueue,S!==null&&(d.updateQueue=null,X1(d,S)));break;case 22:R=d.memoizedState!==null;var ce=y!==null&&y.memoizedState!==null,Oe=du,tt=ki;if(du=Oe||R,ki=tt||ce,Ra(h,d),ki=tt,du=Oe,Pa(d),S&8192)e:for(h=d.stateNode,h._visibility=R?h._visibility&-2:h._visibility|1,R&&(y===null||ce||du||ki||vh(d)),y=null,h=d;;){if(h.tag===5||h.tag===26){if(y===null){ce=y=h;try{if(O=ce.stateNode,R)U=O.style,typeof U.setProperty=="function"?U.setProperty("display","none","important"):U.display="none";else{X=ce.stateNode;var ut=ce.memoizedProps.style,Ie=ut!=null&&ut.hasOwnProperty("display")?ut.display:null;X.style.display=Ie==null||typeof Ie=="boolean"?"":(""+Ie).trim()}}catch($t){dr(ce,ce.return,$t)}}}else if(h.tag===6){if(y===null){ce=h;try{ce.stateNode.nodeValue=R?"":ce.memoizedProps}catch($t){dr(ce,ce.return,$t)}}}else if(h.tag===18){if(y===null){ce=h;try{var He=ce.stateNode;R?fz(He,!0):fz(ce.stateNode,!1)}catch($t){dr(ce,ce.return,$t)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===d)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break e;for(;h.sibling===null;){if(h.return===null||h.return===d)break e;y===h&&(y=null),h=h.return}y===h&&(y=null),h.sibling.return=h.return,h=h.sibling}S&4&&(S=d.updateQueue,S!==null&&(y=S.retryQueue,y!==null&&(S.retryQueue=null,X1(d,y))));break;case 19:Ra(h,d),Pa(d),S&4&&(S=d.updateQueue,S!==null&&(d.updateQueue=null,X1(d,S)));break;case 30:break;case 21:break;default:Ra(h,d),Pa(d)}}function Pa(d){var h=d.flags;if(h&2){try{for(var y,S=d.return;S!==null;){if(p4(S)){y=S;break}S=S.return}if(y==null)throw Error(r(160));switch(y.tag){case 27:var R=y.stateNode,O=JM(d);q1(d,O,R);break;case 5:var U=y.stateNode;y.flags&32&&(sc(U,""),y.flags&=-33);var X=JM(d);q1(d,X,U);break;case 3:case 4:var ce=y.stateNode.containerInfo,Oe=JM(d);eR(d,Oe,ce);break;default:throw Error(r(161))}}catch(tt){dr(d,d.return,tt)}d.flags&=-3}h&4096&&(d.flags&=-4097)}function w4(d){if(d.subtreeFlags&1024)for(d=d.child;d!==null;){var h=d;w4(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),d=d.sibling}}function hu(d,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)x4(d,h.alternate,h),h=h.sibling}function vh(d){for(d=d.child;d!==null;){var h=d;switch(h.tag){case 0:case 11:case 14:case 15:Gd(4,h,h.return),vh(h);break;case 1:lc(h,h.return);var y=h.stateNode;typeof y.componentWillUnmount=="function"&&f4(h,h.return,y),vh(h);break;case 27:yy(h.stateNode);case 26:case 5:lc(h,h.return),vh(h);break;case 22:h.memoizedState===null&&vh(h);break;case 30:vh(h);break;default:vh(h)}d=d.sibling}}function pu(d,h,y){for(y=y&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var S=h.alternate,R=d,O=h,U=O.flags;switch(O.tag){case 0:case 11:case 15:pu(R,O,y),ly(4,O);break;case 1:if(pu(R,O,y),S=O,R=S.stateNode,typeof R.componentDidMount=="function")try{R.componentDidMount()}catch(Oe){dr(S,S.return,Oe)}if(S=O,R=S.updateQueue,R!==null){var X=S.stateNode;try{var ce=R.shared.hiddenCallbacks;if(ce!==null)for(R.shared.hiddenCallbacks=null,R=0;R<ce.length;R++)ej(ce[R],X)}catch(Oe){dr(S,S.return,Oe)}}y&&U&64&&d4(O),cy(O,O.return);break;case 27:m4(O);case 26:case 5:pu(R,O,y),y&&S===null&&U&4&&h4(O),cy(O,O.return);break;case 12:pu(R,O,y);break;case 31:pu(R,O,y),y&&U&4&&b4(R,O);break;case 13:pu(R,O,y),y&&U&4&&_4(R,O);break;case 22:O.memoizedState===null&&pu(R,O,y),cy(O,O.return);break;case 30:break;default:pu(R,O,y)}h=h.sibling}}function nR(d,h){var y=null;d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),d=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(d=h.memoizedState.cachePool.pool),d!==y&&(d!=null&&d.refCount++,y!=null&&Yx(y))}function rR(d,h){d=null,h.alternate!==null&&(d=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==d&&(h.refCount++,d!=null&&Yx(d))}function Tl(d,h,y,S){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)T4(d,h,y,S),h=h.sibling}function T4(d,h,y,S){var R=h.flags;switch(h.tag){case 0:case 11:case 15:Tl(d,h,y,S),R&2048&&ly(9,h);break;case 1:Tl(d,h,y,S);break;case 3:Tl(d,h,y,S),R&2048&&(d=null,h.alternate!==null&&(d=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==d&&(h.refCount++,d!=null&&Yx(d)));break;case 12:if(R&2048){Tl(d,h,y,S),d=h.stateNode;try{var O=h.memoizedProps,U=O.id,X=O.onPostCommit;typeof X=="function"&&X(U,h.alternate===null?"mount":"update",d.passiveEffectDuration,-0)}catch(ce){dr(h,h.return,ce)}}else Tl(d,h,y,S);break;case 31:Tl(d,h,y,S);break;case 13:Tl(d,h,y,S);break;case 23:break;case 22:O=h.stateNode,U=h.alternate,h.memoizedState!==null?O._visibility&2?Tl(d,h,y,S):uy(d,h):O._visibility&2?Tl(d,h,y,S):(O._visibility|=2,vm(d,h,y,S,(h.subtreeFlags&10256)!==0||!1)),R&2048&&nR(U,h);break;case 24:Tl(d,h,y,S),R&2048&&rR(h.alternate,h);break;default:Tl(d,h,y,S)}}function vm(d,h,y,S,R){for(R=R&&((h.subtreeFlags&10256)!==0||!1),h=h.child;h!==null;){var O=d,U=h,X=y,ce=S,Oe=U.flags;switch(U.tag){case 0:case 11:case 15:vm(O,U,X,ce,R),ly(8,U);break;case 23:break;case 22:var tt=U.stateNode;U.memoizedState!==null?tt._visibility&2?vm(O,U,X,ce,R):uy(O,U):(tt._visibility|=2,vm(O,U,X,ce,R)),R&&Oe&2048&&nR(U.alternate,U);break;case 24:vm(O,U,X,ce,R),R&&Oe&2048&&rR(U.alternate,U);break;default:vm(O,U,X,ce,R)}h=h.sibling}}function uy(d,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var y=d,S=h,R=S.flags;switch(S.tag){case 22:uy(y,S),R&2048&&nR(S.alternate,S);break;case 24:uy(y,S),R&2048&&rR(S.alternate,S);break;default:uy(y,S)}h=h.sibling}}var dy=8192;function bm(d,h,y){if(d.subtreeFlags&dy)for(d=d.child;d!==null;)E4(d,h,y),d=d.sibling}function E4(d,h,y){switch(d.tag){case 26:bm(d,h,y),d.flags&dy&&d.memoizedState!==null&&Mle(y,wl,d.memoizedState,d.memoizedProps);break;case 5:bm(d,h,y);break;case 3:case 4:var S=wl;wl=lS(d.stateNode.containerInfo),bm(d,h,y),wl=S;break;case 22:d.memoizedState===null&&(S=d.alternate,S!==null&&S.memoizedState!==null?(S=dy,dy=16777216,bm(d,h,y),dy=S):bm(d,h,y));break;default:bm(d,h,y)}}function C4(d){var h=d.alternate;if(h!==null&&(d=h.child,d!==null)){h.child=null;do h=d.sibling,d.sibling=null,d=h;while(d!==null)}}function fy(d){var h=d.deletions;if((d.flags&16)!==0){if(h!==null)for(var y=0;y<h.length;y++){var S=h[y];fs=S,M4(S,d)}C4(d)}if(d.subtreeFlags&10256)for(d=d.child;d!==null;)A4(d),d=d.sibling}function A4(d){switch(d.tag){case 0:case 11:case 15:fy(d),d.flags&2048&&Gd(9,d,d.return);break;case 3:fy(d);break;case 12:fy(d);break;case 22:var h=d.stateNode;d.memoizedState!==null&&h._visibility&2&&(d.return===null||d.return.tag!==13)?(h._visibility&=-3,Y1(d)):fy(d);break;default:fy(d)}}function Y1(d){var h=d.deletions;if((d.flags&16)!==0){if(h!==null)for(var y=0;y<h.length;y++){var S=h[y];fs=S,M4(S,d)}C4(d)}for(d=d.child;d!==null;){switch(h=d,h.tag){case 0:case 11:case 15:Gd(8,h,h.return),Y1(h);break;case 22:y=h.stateNode,y._visibility&2&&(y._visibility&=-3,Y1(h));break;default:Y1(h)}d=d.sibling}}function M4(d,h){for(;fs!==null;){var y=fs;switch(y.tag){case 0:case 11:case 15:Gd(8,y,h);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var S=y.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:Yx(y.memoizedState.cache)}if(S=y.child,S!==null)S.return=y,fs=S;else e:for(y=d;fs!==null;){S=fs;var R=S.sibling,O=S.return;if(y4(S),S===y){fs=null;break e}if(R!==null){R.return=O,fs=R;break e}fs=O}}}var Goe={getCacheForType:function(d){var h=As(Di),y=h.data.get(d);return y===void 0&&(y=d(),h.data.set(d,y)),y},cacheSignal:function(){return As(Di).controller.signal}},Voe=typeof WeakMap=="function"?WeakMap:Map,Qn=0,Tr=null,Rn=null,kn=0,ur=0,so=null,Vd=!1,_m=!1,iR=!1,mu=0,ci=0,Hd=0,bh=0,sR=0,ao=0,Sm=0,hy=null,Na=null,aR=!1,K1=0,R4=0,Z1=1/0,Q1=null,Wd=null,Xi=0,qd=null,wm=null,gu=0,oR=0,lR=null,P4=null,py=0,cR=null;function oo(){return(Qn&2)!==0&&kn!==0?kn&-kn:B.T!==null?mR():aa()}function N4(){if(ao===0)if((kn&536870912)===0||zn){var d=Ke;Ke<<=1,(Ke&3932160)===0&&(Ke=262144),ao=d}else ao=536870912;return d=ro.current,d!==null&&(d.flags|=32),ao}function Oa(d,h,y){(d===Tr&&(ur===2||ur===9)||d.cancelPendingCommit!==null)&&(Tm(d,0),Xd(d,kn,ao,!1)),vt(d,y),((Qn&2)===0||d!==Tr)&&(d===Tr&&((Qn&2)===0&&(bh|=y),ci===4&&Xd(d,kn,ao,!1)),cc(d))}function O4(d,h,y){if((Qn&6)!==0)throw Error(r(327));var S=!y&&(h&127)===0&&(h&d.expiredLanes)===0||yt(d,h),R=S?qoe(d,h):dR(d,h,!0),O=S;do{if(R===0){_m&&!S&&Xd(d,h,0,!1);break}else{if(y=d.current.alternate,O&&!Hoe(y)){R=dR(d,h,!1),O=!1;continue}if(R===2){if(O=h,d.errorRecoveryDisabledLanes&O)var U=0;else U=d.pendingLanes&-536870913,U=U!==0?U:U&536870912?536870912:0;if(U!==0){h=U;e:{var X=d;R=hy;var ce=X.current.memoizedState.isDehydrated;if(ce&&(Tm(X,U).flags|=256),U=dR(X,U,!1),U!==2){if(iR&&!ce){X.errorRecoveryDisabledLanes|=O,bh|=O,R=4;break e}O=Na,Na=R,O!==null&&(Na===null?Na=O:Na.push.apply(Na,O))}R=U}if(O=!1,R!==2)continue}}if(R===1){Tm(d,0),Xd(d,h,0,!0);break}e:{switch(S=d,O=R,O){case 0:case 1:throw Error(r(345));case 4:if((h&4194048)!==h)break;case 6:Xd(S,h,ao,!Vd);break e;case 2:Na=null;break;case 3:case 5:break;default:throw Error(r(329))}if((h&62914560)===h&&(R=K1+300-V(),10<R)){if(Xd(S,h,ao,!Vd),Ve(S,0,!0)!==0)break e;gu=h,S.timeoutHandle=cz(D4.bind(null,S,y,Na,Q1,aR,h,ao,bh,Sm,Vd,O,"Throttled",-0,0),R);break e}D4(S,y,Na,Q1,aR,h,ao,bh,Sm,Vd,O,null,-0,0)}}break}while(!0);cc(d)}function D4(d,h,y,S,R,O,U,X,ce,Oe,tt,ut,Ie,He){if(d.timeoutHandle=-1,ut=h.subtreeFlags,ut&8192||(ut&16785408)===16785408){ut={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:tu},E4(h,O,ut);var $t=(O&62914560)===O?K1-V():(O&4194048)===O?R4-V():0;if($t=Rle(ut,$t),$t!==null){gu=O,d.cancelPendingCommit=$t(z4.bind(null,d,h,O,y,S,R,U,X,ce,tt,ut,null,Ie,He)),Xd(d,O,U,!Oe);return}}z4(d,h,O,y,S,R,U,X,ce)}function Hoe(d){for(var h=d;;){var y=h.tag;if((y===0||y===11||y===15)&&h.flags&16384&&(y=h.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var S=0;S<y.length;S++){var R=y[S],O=R.getSnapshot;R=R.value;try{if(!to(O(),R))return!1}catch{return!1}}if(y=h.child,h.subtreeFlags&16384&&y!==null)y.return=h,h=y;else{if(h===d)break;for(;h.sibling===null;){if(h.return===null||h.return===d)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Xd(d,h,y,S){h&=~sR,h&=~bh,d.suspendedLanes|=h,d.pingedLanes&=~h,S&&(d.warmLanes|=h),S=d.expirationTimes;for(var R=h;0<R;){var O=31-ht(R),U=1<<O;S[O]=-1,R&=~U}y!==0&&dn(d,y,h)}function J1(){return(Qn&6)===0?(my(0),!1):!0}function uR(){if(Rn!==null){if(ur===0)var d=Rn.return;else d=Rn,su=dh=null,CM(d),pm=null,Zx=0,d=Rn;for(;d!==null;)u4(d.alternate,d),d=d.return;Rn=null}}function Tm(d,h){var y=d.timeoutHandle;y!==-1&&(d.timeoutHandle=-1,dle(y)),y=d.cancelPendingCommit,y!==null&&(d.cancelPendingCommit=null,y()),gu=0,uR(),Tr=d,Rn=y=ru(d.current,null),kn=h,ur=0,so=null,Vd=!1,_m=yt(d,h),iR=!1,Sm=ao=sR=bh=Hd=ci=0,Na=hy=null,aR=!1,(h&8)!==0&&(h|=h&32);var S=d.entangledLanes;if(S!==0)for(d=d.entanglements,S&=h;0<S;){var R=31-ht(S),O=1<<R;h|=d[R],S&=~O}return mu=h,b1(),y}function L4(d,h){_n=null,B.H=sy,h===hm||h===M1?(h=KU(),ur=3):h===pM?(h=KU(),ur=4):ur=h===$M?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,so=h,Rn===null&&(ci=1,$1(d,Lo(h,d.current)))}function I4(){var d=ro.current;return d===null?!0:(kn&4194048)===kn?Fo===null:(kn&62914560)===kn||(kn&536870912)!==0?d===Fo:!1}function k4(){var d=B.H;return B.H=sy,d===null?sy:d}function B4(){var d=B.A;return B.A=Goe,d}function eS(){ci=4,Vd||(kn&4194048)!==kn&&ro.current!==null||(_m=!0),(Hd&134217727)===0&&(bh&134217727)===0||Tr===null||Xd(Tr,kn,ao,!1)}function dR(d,h,y){var S=Qn;Qn|=2;var R=k4(),O=B4();(Tr!==d||kn!==h)&&(Q1=null,Tm(d,h)),h=!1;var U=ci;e:do try{if(ur!==0&&Rn!==null){var X=Rn,ce=so;switch(ur){case 8:uR(),U=6;break e;case 3:case 2:case 9:case 6:ro.current===null&&(h=!0);var Oe=ur;if(ur=0,so=null,Em(d,X,ce,Oe),y&&_m){U=0;break e}break;default:Oe=ur,ur=0,so=null,Em(d,X,ce,Oe)}}Woe(),U=ci;break}catch(tt){L4(d,tt)}while(!0);return h&&d.shellSuspendCounter++,su=dh=null,Qn=S,B.H=R,B.A=O,Rn===null&&(Tr=null,kn=0,b1()),U}function Woe(){for(;Rn!==null;)F4(Rn)}function qoe(d,h){var y=Qn;Qn|=2;var S=k4(),R=B4();Tr!==d||kn!==h?(Q1=null,Z1=V()+500,Tm(d,h)):_m=yt(d,h);e:do try{if(ur!==0&&Rn!==null){h=Rn;var O=so;t:switch(ur){case 1:ur=0,so=null,Em(d,h,O,1);break;case 2:case 9:if(XU(O)){ur=0,so=null,U4(h);break}h=function(){ur!==2&&ur!==9||Tr!==d||(ur=7),cc(d)},O.then(h,h);break e;case 3:ur=7;break e;case 4:ur=5;break e;case 7:XU(O)?(ur=0,so=null,U4(h)):(ur=0,so=null,Em(d,h,O,7));break;case 5:var U=null;switch(Rn.tag){case 26:U=Rn.memoizedState;case 5:case 27:var X=Rn;if(U?Tz(U):X.stateNode.complete){ur=0,so=null;var ce=X.sibling;if(ce!==null)Rn=ce;else{var Oe=X.return;Oe!==null?(Rn=Oe,tS(Oe)):Rn=null}break t}}ur=0,so=null,Em(d,h,O,5);break;case 6:ur=0,so=null,Em(d,h,O,6);break;case 8:uR(),ci=6;break e;default:throw Error(r(462))}}Xoe();break}catch(tt){L4(d,tt)}while(!0);return su=dh=null,B.H=S,B.A=R,Qn=y,Rn!==null?0:(Tr=null,kn=0,b1(),ci)}function Xoe(){for(;Rn!==null&&!Se();)F4(Rn)}function F4(d){var h=l4(d.alternate,d,mu);d.memoizedProps=d.pendingProps,h===null?tS(d):Rn=h}function U4(d){var h=d,y=h.alternate;switch(h.tag){case 15:case 0:h=n4(y,h,h.pendingProps,h.type,void 0,kn);break;case 11:h=n4(y,h,h.pendingProps,h.type.render,h.ref,kn);break;case 5:CM(h);default:u4(y,h),h=Rn=BU(h,mu),h=l4(y,h,mu)}d.memoizedProps=d.pendingProps,h===null?tS(d):Rn=h}function Em(d,h,y,S){su=dh=null,CM(h),pm=null,Zx=0;var R=h.return;try{if(koe(d,R,h,y,kn)){ci=1,$1(d,Lo(y,d.current)),Rn=null;return}}catch(O){if(R!==null)throw Rn=R,O;ci=1,$1(d,Lo(y,d.current)),Rn=null;return}h.flags&32768?(zn||S===1?d=!0:_m||(kn&536870912)!==0?d=!1:(Vd=d=!0,(S===2||S===9||S===3||S===6)&&(S=ro.current,S!==null&&S.tag===13&&(S.flags|=16384))),j4(h,d)):tS(h)}function tS(d){var h=d;do{if((h.flags&32768)!==0){j4(h,Vd);return}d=h.return;var y=Uoe(h.alternate,h,mu);if(y!==null){Rn=y;return}if(h=h.sibling,h!==null){Rn=h;return}Rn=h=d}while(h!==null);ci===0&&(ci=5)}function j4(d,h){do{var y=joe(d.alternate,d);if(y!==null){y.flags&=32767,Rn=y;return}if(y=d.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!h&&(d=d.sibling,d!==null)){Rn=d;return}Rn=d=y}while(d!==null);ci=6,Rn=null}function z4(d,h,y,S,R,O,U,X,ce){d.cancelPendingCommit=null;do nS();while(Xi!==0);if((Qn&6)!==0)throw Error(r(327));if(h!==null){if(h===d.current)throw Error(r(177));if(O=h.lanes|h.childLanes,O|=JA,It(d,y,O,U,X,ce),d===Tr&&(Rn=Tr=null,kn=0),wm=h,qd=d,gu=y,oR=O,lR=R,P4=S,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(d.callbackNode=null,d.callbackPriority=0,Qoe(pe,function(){return W4(),null})):(d.callbackNode=null,d.callbackPriority=0),S=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||S){S=B.T,B.T=null,R=j.p,j.p=2,U=Qn,Qn|=4;try{zoe(d,h,y)}finally{Qn=U,j.p=R,B.T=S}}Xi=1,$4(),G4(),V4()}}function $4(){if(Xi===1){Xi=0;var d=qd,h=wm,y=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||y){y=B.T,B.T=null;var S=j.p;j.p=2;var R=Qn;Qn|=4;try{S4(h,d);var O=wR,U=MU(d.containerInfo),X=O.focusedElem,ce=O.selectionRange;if(U!==X&&X&&X.ownerDocument&&AU(X.ownerDocument.documentElement,X)){if(ce!==null&&XA(X)){var Oe=ce.start,tt=ce.end;if(tt===void 0&&(tt=Oe),"selectionStart"in X)X.selectionStart=Oe,X.selectionEnd=Math.min(tt,X.value.length);else{var ut=X.ownerDocument||document,Ie=ut&&ut.defaultView||window;if(Ie.getSelection){var He=Ie.getSelection(),$t=X.textContent.length,on=Math.min(ce.start,$t),xr=ce.end===void 0?on:Math.min(ce.end,$t);!He.extend&&on>xr&&(U=xr,xr=on,on=U);var Ce=CU(X,on),he=CU(X,xr);if(Ce&&he&&(He.rangeCount!==1||He.anchorNode!==Ce.node||He.anchorOffset!==Ce.offset||He.focusNode!==he.node||He.focusOffset!==he.offset)){var Ne=ut.createRange();Ne.setStart(Ce.node,Ce.offset),He.removeAllRanges(),on>xr?(He.addRange(Ne),He.extend(he.node,he.offset)):(Ne.setEnd(he.node,he.offset),He.addRange(Ne))}}}}for(ut=[],He=X;He=He.parentNode;)He.nodeType===1&&ut.push({element:He,left:He.scrollLeft,top:He.scrollTop});for(typeof X.focus=="function"&&X.focus(),X=0;X<ut.length;X++){var lt=ut[X];lt.element.scrollLeft=lt.left,lt.element.scrollTop=lt.top}}pS=!!SR,wR=SR=null}finally{Qn=R,j.p=S,B.T=y}}d.current=h,Xi=2}}function G4(){if(Xi===2){Xi=0;var d=qd,h=wm,y=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||y){y=B.T,B.T=null;var S=j.p;j.p=2;var R=Qn;Qn|=4;try{x4(d,h.alternate,h)}finally{Qn=R,j.p=S,B.T=y}}Xi=3}}function V4(){if(Xi===4||Xi===3){Xi=0,q();var d=qd,h=wm,y=gu,S=P4;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?Xi=5:(Xi=0,wm=qd=null,H4(d,d.pendingLanes));var R=d.pendingLanes;if(R===0&&(Wd=null),ls(y),h=h.stateNode,ot&&typeof ot.onCommitFiberRoot=="function")try{ot.onCommitFiberRoot(Be,h,void 0,(h.current.flags&128)===128)}catch{}if(S!==null){h=B.T,R=j.p,j.p=2,B.T=null;try{for(var O=d.onRecoverableError,U=0;U<S.length;U++){var X=S[U];O(X.value,{componentStack:X.stack})}}finally{B.T=h,j.p=R}}(gu&3)!==0&&nS(),cc(d),R=d.pendingLanes,(y&261930)!==0&&(R&42)!==0?d===cR?py++:(py=0,cR=d):py=0,my(0)}}function H4(d,h){(d.pooledCacheLanes&=h)===0&&(h=d.pooledCache,h!=null&&(d.pooledCache=null,Yx(h)))}function nS(){return $4(),G4(),V4(),W4()}function W4(){if(Xi!==5)return!1;var d=qd,h=oR;oR=0;var y=ls(gu),S=B.T,R=j.p;try{j.p=32>y?32:y,B.T=null,y=lR,lR=null;var O=qd,U=gu;if(Xi=0,wm=qd=null,gu=0,(Qn&6)!==0)throw Error(r(331));var X=Qn;if(Qn|=4,A4(O.current),T4(O,O.current,U,y),Qn=X,my(0,!1),ot&&typeof ot.onPostCommitFiberRoot=="function")try{ot.onPostCommitFiberRoot(Be,O)}catch{}return!0}finally{j.p=R,B.T=S,H4(d,h)}}function q4(d,h,y){h=Lo(y,h),h=zM(d.stateNode,h,2),d=jd(d,h,2),d!==null&&(vt(d,2),cc(d))}function dr(d,h,y){if(d.tag===3)q4(d,d,y);else for(;h!==null;){if(h.tag===3){q4(h,d,y);break}else if(h.tag===1){var S=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(Wd===null||!Wd.has(S))){d=Lo(y,d),y=Xj(2),S=jd(h,y,2),S!==null&&(Yj(y,S,h,d),vt(S,2),cc(S));break}}h=h.return}}function fR(d,h,y){var S=d.pingCache;if(S===null){S=d.pingCache=new Voe;var R=new Set;S.set(h,R)}else R=S.get(h),R===void 0&&(R=new Set,S.set(h,R));R.has(y)||(iR=!0,R.add(y),d=Yoe.bind(null,d,h,y),h.then(d,d))}function Yoe(d,h,y){var S=d.pingCache;S!==null&&S.delete(h),d.pingedLanes|=d.suspendedLanes&y,d.warmLanes&=~y,Tr===d&&(kn&y)===y&&(ci===4||ci===3&&(kn&62914560)===kn&&300>V()-K1?(Qn&2)===0&&Tm(d,0):sR|=y,Sm===kn&&(Sm=0)),cc(d)}function X4(d,h){h===0&&(h=Ct()),d=lh(d,h),d!==null&&(vt(d,h),cc(d))}function Koe(d){var h=d.memoizedState,y=0;h!==null&&(y=h.retryLane),X4(d,y)}function Zoe(d,h){var y=0;switch(d.tag){case 31:case 13:var S=d.stateNode,R=d.memoizedState;R!==null&&(y=R.retryLane);break;case 19:S=d.stateNode;break;case 22:S=d.stateNode._retryCache;break;default:throw Error(r(314))}S!==null&&S.delete(h),X4(d,y)}function Qoe(d,h){return rt(d,h)}var rS=null,Cm=null,hR=!1,iS=!1,pR=!1,Yd=0;function cc(d){d!==Cm&&d.next===null&&(Cm===null?rS=Cm=d:Cm=Cm.next=d),iS=!0,hR||(hR=!0,ele())}function my(d,h){if(!pR&&iS){pR=!0;do for(var y=!1,S=rS;S!==null;){if(d!==0){var R=S.pendingLanes;if(R===0)var O=0;else{var U=S.suspendedLanes,X=S.pingedLanes;O=(1<<31-ht(42|d)+1)-1,O&=R&~(U&~X),O=O&201326741?O&201326741|1:O?O|2:0}O!==0&&(y=!0,Q4(S,O))}else O=kn,O=Ve(S,S===Tr?O:0,S.cancelPendingCommit!==null||S.timeoutHandle!==-1),(O&3)===0||yt(S,O)||(y=!0,Q4(S,O));S=S.next}while(y);pR=!1}}function Joe(){Y4()}function Y4(){iS=hR=!1;var d=0;Yd!==0&&ule()&&(d=Yd);for(var h=V(),y=null,S=rS;S!==null;){var R=S.next,O=K4(S,h);O===0?(S.next=null,y===null?rS=R:y.next=R,R===null&&(Cm=y)):(y=S,(d!==0||(O&3)!==0)&&(iS=!0)),S=R}Xi!==0&&Xi!==5||my(d),Yd!==0&&(Yd=0)}function K4(d,h){for(var y=d.suspendedLanes,S=d.pingedLanes,R=d.expirationTimes,O=d.pendingLanes&-62914561;0<O;){var U=31-ht(O),X=1<<U,ce=R[U];ce===-1?((X&y)===0||(X&S)!==0)&&(R[U]=Mt(X,h)):ce<=h&&(d.expiredLanes|=X),O&=~X}if(h=Tr,y=kn,y=Ve(d,d===h?y:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),S=d.callbackNode,y===0||d===h&&(ur===2||ur===9)||d.cancelPendingCommit!==null)return S!==null&&S!==null&&$e(S),d.callbackNode=null,d.callbackPriority=0;if((y&3)===0||yt(d,y)){if(h=y&-y,h===d.callbackPriority)return h;switch(S!==null&&$e(S),ls(y)){case 2:case 8:y=xe;break;case 32:y=pe;break;case 268435456:y=We;break;default:y=pe}return S=Z4.bind(null,d),y=rt(y,S),d.callbackPriority=h,d.callbackNode=y,h}return S!==null&&S!==null&&$e(S),d.callbackPriority=2,d.callbackNode=null,2}function Z4(d,h){if(Xi!==0&&Xi!==5)return d.callbackNode=null,d.callbackPriority=0,null;var y=d.callbackNode;if(nS()&&d.callbackNode!==y)return null;var S=kn;return S=Ve(d,d===Tr?S:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),S===0?null:(O4(d,S,h),K4(d,V()),d.callbackNode!=null&&d.callbackNode===y?Z4.bind(null,d):null)}function Q4(d,h){if(nS())return null;O4(d,h,!0)}function ele(){fle(function(){(Qn&6)!==0?rt(le,Joe):Y4()})}function mR(){if(Yd===0){var d=dm;d===0&&(d=we,we<<=1,(we&261888)===0&&(we=256)),Yd=d}return Yd}function J4(d){return d==null||typeof d=="symbol"||typeof d=="boolean"?null:typeof d=="function"?d:f1(""+d)}function ez(d,h){var y=h.ownerDocument.createElement("input");return y.name=h.name,y.value=h.value,d.id&&y.setAttribute("form",d.id),h.parentNode.insertBefore(y,h),d=new FormData(d),y.parentNode.removeChild(y),d}function tle(d,h,y,S,R){if(h==="submit"&&y&&y.stateNode===R){var O=J4((R[Wi]||null).action),U=S.submitter;U&&(h=(h=U[Wi]||null)?J4(h.formAction):U.getAttribute("formAction"),h!==null&&(O=h,U=null));var X=new g1("action","action",null,S,R);d.push({event:X,listeners:[{instance:null,listener:function(){if(S.defaultPrevented){if(Yd!==0){var ce=U?ez(R,U):new FormData(R);IM(y,{pending:!0,data:ce,method:R.method,action:O},null,ce)}}else typeof O=="function"&&(X.preventDefault(),ce=U?ez(R,U):new FormData(R),IM(y,{pending:!0,data:ce,method:R.method,action:O},O,ce))},currentTarget:R}]})}}for(var gR=0;gR<QA.length;gR++){var xR=QA[gR],nle=xR.toLowerCase(),rle=xR[0].toUpperCase()+xR.slice(1);Sl(nle,"on"+rle)}Sl(NU,"onAnimationEnd"),Sl(OU,"onAnimationIteration"),Sl(DU,"onAnimationStart"),Sl("dblclick","onDoubleClick"),Sl("focusin","onFocus"),Sl("focusout","onBlur"),Sl(voe,"onTransitionRun"),Sl(boe,"onTransitionStart"),Sl(_oe,"onTransitionCancel"),Sl(LU,"onTransitionEnd"),Bt("onMouseEnter",["mouseout","mouseover"]),Bt("onMouseLeave",["mouseout","mouseover"]),Bt("onPointerEnter",["pointerout","pointerover"]),Bt("onPointerLeave",["pointerout","pointerover"]),Tt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Tt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Tt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Tt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Tt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Tt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gy="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ile=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gy));function tz(d,h){h=(h&4)!==0;for(var y=0;y<d.length;y++){var S=d[y],R=S.event;S=S.listeners;e:{var O=void 0;if(h)for(var U=S.length-1;0<=U;U--){var X=S[U],ce=X.instance,Oe=X.currentTarget;if(X=X.listener,ce!==O&&R.isPropagationStopped())break e;O=X,R.currentTarget=Oe;try{O(R)}catch(tt){v1(tt)}R.currentTarget=null,O=ce}else for(U=0;U<S.length;U++){if(X=S[U],ce=X.instance,Oe=X.currentTarget,X=X.listener,ce!==O&&R.isPropagationStopped())break e;O=X,R.currentTarget=Oe;try{O(R)}catch(tt){v1(tt)}R.currentTarget=null,O=ce}}}}function Pn(d,h){var y=h[Jp];y===void 0&&(y=h[Jp]=new Set);var S=d+"__bubble";y.has(S)||(nz(h,d,2,!1),y.add(S))}function yR(d,h,y){var S=0;h&&(S|=4),nz(y,d,S,h)}var sS="_reactListening"+Math.random().toString(36).slice(2);function vR(d){if(!d[sS]){d[sS]=!0,Me.forEach(function(y){y!=="selectionchange"&&(ile.has(y)||yR(y,!1,d),yR(y,!0,d))});var h=d.nodeType===9?d:d.ownerDocument;h===null||h[sS]||(h[sS]=!0,yR("selectionchange",!1,h))}}function nz(d,h,y,S){switch(Nz(h)){case 2:var R=Ole;break;case 8:R=Dle;break;default:R=LR}y=R.bind(null,h,y,d),R=void 0,!UA||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(R=!0),S?R!==void 0?d.addEventListener(h,y,{capture:!0,passive:R}):d.addEventListener(h,y,!0):R!==void 0?d.addEventListener(h,y,{passive:R}):d.addEventListener(h,y,!1)}function bR(d,h,y,S,R){var O=S;if((h&1)===0&&(h&2)===0&&S!==null)e:for(;;){if(S===null)return;var U=S.tag;if(U===3||U===4){var X=S.stateNode.containerInfo;if(X===R)break;if(U===4)for(U=S.return;U!==null;){var ce=U.tag;if((ce===3||ce===4)&&U.stateNode.containerInfo===R)return;U=U.return}for(;X!==null;){if(U=Nd(X),U===null)return;if(ce=U.tag,ce===5||ce===6||ce===26||ce===27){S=O=U;continue e}X=X.parentNode}}S=S.return}oU(function(){var Oe=O,tt=BA(y),ut=[];e:{var Ie=IU.get(d);if(Ie!==void 0){var He=g1,$t=d;switch(d){case"keypress":if(p1(y)===0)break e;case"keydown":case"keyup":He=Zae;break;case"focusin":$t="focus",He=GA;break;case"focusout":$t="blur",He=GA;break;case"beforeblur":case"afterblur":He=GA;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":He=uU;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":He=Uae;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":He=eoe;break;case NU:case OU:case DU:He=$ae;break;case LU:He=noe;break;case"scroll":case"scrollend":He=Bae;break;case"wheel":He=ioe;break;case"copy":case"cut":case"paste":He=Vae;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":He=fU;break;case"toggle":case"beforetoggle":He=aoe}var on=(h&4)!==0,xr=!on&&(d==="scroll"||d==="scrollend"),Ce=on?Ie!==null?Ie+"Capture":null:Ie;on=[];for(var he=Oe,Ne;he!==null;){var lt=he;if(Ne=lt.stateNode,lt=lt.tag,lt!==5&&lt!==26&&lt!==27||Ne===null||Ce===null||(lt=Fx(he,Ce),lt!=null&&on.push(xy(he,lt,Ne))),xr)break;he=he.return}0<on.length&&(Ie=new He(Ie,$t,null,y,tt),ut.push({event:Ie,listeners:on}))}}if((h&7)===0){e:{if(Ie=d==="mouseover"||d==="pointerover",He=d==="mouseout"||d==="pointerout",Ie&&y!==kA&&($t=y.relatedTarget||y.fromElement)&&(Nd($t)||$t[Qc]))break e;if((He||Ie)&&(Ie=tt.window===tt?tt:(Ie=tt.ownerDocument)?Ie.defaultView||Ie.parentWindow:window,He?($t=y.relatedTarget||y.toElement,He=Oe,$t=$t?Nd($t):null,$t!==null&&(xr=s($t),on=$t.tag,$t!==xr||on!==5&&on!==27&&on!==6)&&($t=null)):(He=null,$t=Oe),He!==$t)){if(on=uU,lt="onMouseLeave",Ce="onMouseEnter",he="mouse",(d==="pointerout"||d==="pointerover")&&(on=fU,lt="onPointerLeave",Ce="onPointerEnter",he="pointer"),xr=He==null?Ie:Te(He),Ne=$t==null?Ie:Te($t),Ie=new on(lt,he+"leave",He,y,tt),Ie.target=xr,Ie.relatedTarget=Ne,lt=null,Nd(tt)===Oe&&(on=new on(Ce,he+"enter",$t,y,tt),on.target=Ne,on.relatedTarget=xr,lt=on),xr=lt,He&&$t)t:{for(on=sle,Ce=He,he=$t,Ne=0,lt=Ce;lt;lt=on(lt))Ne++;lt=0;for(var Qt=he;Qt;Qt=on(Qt))lt++;for(;0<Ne-lt;)Ce=on(Ce),Ne--;for(;0<lt-Ne;)he=on(he),lt--;for(;Ne--;){if(Ce===he||he!==null&&Ce===he.alternate){on=Ce;break t}Ce=on(Ce),he=on(he)}on=null}else on=null;He!==null&&rz(ut,Ie,He,on,!1),$t!==null&&xr!==null&&rz(ut,xr,$t,on,!0)}}e:{if(Ie=Oe?Te(Oe):window,He=Ie.nodeName&&Ie.nodeName.toLowerCase(),He==="select"||He==="input"&&Ie.type==="file")var Xn=bU;else if(yU(Ie))if(_U)Xn=goe;else{Xn=poe;var Ht=hoe}else He=Ie.nodeName,!He||He.toLowerCase()!=="input"||Ie.type!=="checkbox"&&Ie.type!=="radio"?Oe&&IA(Oe.elementType)&&(Xn=bU):Xn=moe;if(Xn&&(Xn=Xn(d,Oe))){vU(ut,Xn,y,tt);break e}Ht&&Ht(d,Ie,Oe),d==="focusout"&&Oe&&Ie.type==="number"&&Oe.memoizedProps.value!=null&&us(Ie,"number",Ie.value)}switch(Ht=Oe?Te(Oe):window,d){case"focusin":(yU(Ht)||Ht.contentEditable==="true")&&(rm=Ht,YA=Oe,Wx=null);break;case"focusout":Wx=YA=rm=null;break;case"mousedown":KA=!0;break;case"contextmenu":case"mouseup":case"dragend":KA=!1,RU(ut,y,tt);break;case"selectionchange":if(yoe)break;case"keydown":case"keyup":RU(ut,y,tt)}var Cn;if(HA)e:{switch(d){case"compositionstart":var Bn="onCompositionStart";break e;case"compositionend":Bn="onCompositionEnd";break e;case"compositionupdate":Bn="onCompositionUpdate";break e}Bn=void 0}else nm?gU(d,y)&&(Bn="onCompositionEnd"):d==="keydown"&&y.keyCode===229&&(Bn="onCompositionStart");Bn&&(hU&&y.locale!=="ko"&&(nm||Bn!=="onCompositionStart"?Bn==="onCompositionEnd"&&nm&&(Cn=lU()):(Dd=tt,jA="value"in Dd?Dd.value:Dd.textContent,nm=!0)),Ht=aS(Oe,Bn),0<Ht.length&&(Bn=new dU(Bn,d,null,y,tt),ut.push({event:Bn,listeners:Ht}),Cn?Bn.data=Cn:(Cn=xU(y),Cn!==null&&(Bn.data=Cn)))),(Cn=loe?coe(d,y):uoe(d,y))&&(Bn=aS(Oe,"onBeforeInput"),0<Bn.length&&(Ht=new dU("onBeforeInput","beforeinput",null,y,tt),ut.push({event:Ht,listeners:Bn}),Ht.data=Cn)),tle(ut,d,Oe,y,tt)}tz(ut,h)})}function xy(d,h,y){return{instance:d,listener:h,currentTarget:y}}function aS(d,h){for(var y=h+"Capture",S=[];d!==null;){var R=d,O=R.stateNode;if(R=R.tag,R!==5&&R!==26&&R!==27||O===null||(R=Fx(d,y),R!=null&&S.unshift(xy(d,R,O)),R=Fx(d,h),R!=null&&S.push(xy(d,R,O))),d.tag===3)return S;d=d.return}return[]}function sle(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5&&d.tag!==27);return d||null}function rz(d,h,y,S,R){for(var O=h._reactName,U=[];y!==null&&y!==S;){var X=y,ce=X.alternate,Oe=X.stateNode;if(X=X.tag,ce!==null&&ce===S)break;X!==5&&X!==26&&X!==27||Oe===null||(ce=Oe,R?(Oe=Fx(y,O),Oe!=null&&U.unshift(xy(y,Oe,ce))):R||(Oe=Fx(y,O),Oe!=null&&U.push(xy(y,Oe,ce)))),y=y.return}U.length!==0&&d.push({event:h,listeners:U})}var ale=/\r\n?/g,ole=/\u0000|\uFFFD/g;function iz(d){return(typeof d=="string"?d:""+d).replace(ale,`
`).replace(ole,"")}function sz(d,h){return h=iz(h),iz(d)===h}function gr(d,h,y,S,R,O){switch(y){case"children":typeof S=="string"?h==="body"||h==="textarea"&&S===""||sc(d,S):(typeof S=="number"||typeof S=="bigint")&&h!=="body"&&sc(d,""+S);break;case"className":Vn(d,"class",S);break;case"tabIndex":Vn(d,"tabindex",S);break;case"dir":case"role":case"viewBox":case"width":case"height":Vn(d,y,S);break;case"style":sU(d,S,O);break;case"data":if(h!=="object"){Vn(d,"data",S);break}case"src":case"href":if(S===""&&(h!=="a"||y!=="href")){d.removeAttribute(y);break}if(S==null||typeof S=="function"||typeof S=="symbol"||typeof S=="boolean"){d.removeAttribute(y);break}S=f1(""+S),d.setAttribute(y,S);break;case"action":case"formAction":if(typeof S=="function"){d.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof O=="function"&&(y==="formAction"?(h!=="input"&&gr(d,h,"name",R.name,R,null),gr(d,h,"formEncType",R.formEncType,R,null),gr(d,h,"formMethod",R.formMethod,R,null),gr(d,h,"formTarget",R.formTarget,R,null)):(gr(d,h,"encType",R.encType,R,null),gr(d,h,"method",R.method,R,null),gr(d,h,"target",R.target,R,null)));if(S==null||typeof S=="symbol"||typeof S=="boolean"){d.removeAttribute(y);break}S=f1(""+S),d.setAttribute(y,S);break;case"onClick":S!=null&&(d.onclick=tu);break;case"onScroll":S!=null&&Pn("scroll",d);break;case"onScrollEnd":S!=null&&Pn("scrollend",d);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(r(61));if(y=S.__html,y!=null){if(R.children!=null)throw Error(r(60));d.innerHTML=y}}break;case"multiple":d.multiple=S&&typeof S!="function"&&typeof S!="symbol";break;case"muted":d.muted=S&&typeof S!="function"&&typeof S!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(S==null||typeof S=="function"||typeof S=="boolean"||typeof S=="symbol"){d.removeAttribute("xlink:href");break}y=f1(""+S),d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":S!=null&&typeof S!="function"&&typeof S!="symbol"?d.setAttribute(y,""+S):d.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":S&&typeof S!="function"&&typeof S!="symbol"?d.setAttribute(y,""):d.removeAttribute(y);break;case"capture":case"download":S===!0?d.setAttribute(y,""):S!==!1&&S!=null&&typeof S!="function"&&typeof S!="symbol"?d.setAttribute(y,S):d.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":S!=null&&typeof S!="function"&&typeof S!="symbol"&&!isNaN(S)&&1<=S?d.setAttribute(y,S):d.removeAttribute(y);break;case"rowSpan":case"start":S==null||typeof S=="function"||typeof S=="symbol"||isNaN(S)?d.removeAttribute(y):d.setAttribute(y,S);break;case"popover":Pn("beforetoggle",d),Pn("toggle",d),En(d,"popover",S);break;case"xlinkActuate":qn(d,"http://www.w3.org/1999/xlink","xlink:actuate",S);break;case"xlinkArcrole":qn(d,"http://www.w3.org/1999/xlink","xlink:arcrole",S);break;case"xlinkRole":qn(d,"http://www.w3.org/1999/xlink","xlink:role",S);break;case"xlinkShow":qn(d,"http://www.w3.org/1999/xlink","xlink:show",S);break;case"xlinkTitle":qn(d,"http://www.w3.org/1999/xlink","xlink:title",S);break;case"xlinkType":qn(d,"http://www.w3.org/1999/xlink","xlink:type",S);break;case"xmlBase":qn(d,"http://www.w3.org/XML/1998/namespace","xml:base",S);break;case"xmlLang":qn(d,"http://www.w3.org/XML/1998/namespace","xml:lang",S);break;case"xmlSpace":qn(d,"http://www.w3.org/XML/1998/namespace","xml:space",S);break;case"is":En(d,"is",S);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=Iae.get(y)||y,En(d,y,S))}}function _R(d,h,y,S,R,O){switch(y){case"style":sU(d,S,O);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(r(61));if(y=S.__html,y!=null){if(R.children!=null)throw Error(r(60));d.innerHTML=y}}break;case"children":typeof S=="string"?sc(d,S):(typeof S=="number"||typeof S=="bigint")&&sc(d,""+S);break;case"onScroll":S!=null&&Pn("scroll",d);break;case"onScrollEnd":S!=null&&Pn("scrollend",d);break;case"onClick":S!=null&&(d.onclick=tu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!_t.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(R=y.endsWith("Capture"),h=y.slice(2,R?y.length-7:void 0),O=d[Wi]||null,O=O!=null?O[y]:null,typeof O=="function"&&d.removeEventListener(h,O,R),typeof S=="function")){typeof O!="function"&&O!==null&&(y in d?d[y]=null:d.hasAttribute(y)&&d.removeAttribute(y)),d.addEventListener(h,S,R);break e}y in d?d[y]=S:S===!0?d.setAttribute(y,""):En(d,y,S)}}}function Rs(d,h,y){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pn("error",d),Pn("load",d);var S=!1,R=!1,O;for(O in y)if(y.hasOwnProperty(O)){var U=y[O];if(U!=null)switch(O){case"src":S=!0;break;case"srcSet":R=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,h));default:gr(d,h,O,U,y,null)}}R&&gr(d,h,"srcSet",y.srcSet,y,null),S&&gr(d,h,"src",y.src,y,null);return;case"input":Pn("invalid",d);var X=O=U=R=null,ce=null,Oe=null;for(S in y)if(y.hasOwnProperty(S)){var tt=y[S];if(tt!=null)switch(S){case"name":R=tt;break;case"type":U=tt;break;case"checked":ce=tt;break;case"defaultChecked":Oe=tt;break;case"value":O=tt;break;case"defaultValue":X=tt;break;case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(r(137,h));break;default:gr(d,h,S,tt,y,null)}}Nr(d,O,X,ce,Oe,U,R,!1);return;case"select":Pn("invalid",d),S=U=O=null;for(R in y)if(y.hasOwnProperty(R)&&(X=y[R],X!=null))switch(R){case"value":O=X;break;case"defaultValue":U=X;break;case"multiple":S=X;default:gr(d,h,R,X,y,null)}h=O,y=U,d.multiple=!!S,h!=null?qi(d,!!S,h,!1):y!=null&&qi(d,!!S,y,!0);return;case"textarea":Pn("invalid",d),O=R=S=null;for(U in y)if(y.hasOwnProperty(U)&&(X=y[U],X!=null))switch(U){case"value":S=X;break;case"defaultValue":R=X;break;case"children":O=X;break;case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(91));break;default:gr(d,h,U,X,y,null)}Es(d,S,R,O);return;case"option":for(ce in y)if(y.hasOwnProperty(ce)&&(S=y[ce],S!=null))switch(ce){case"selected":d.selected=S&&typeof S!="function"&&typeof S!="symbol";break;default:gr(d,h,ce,S,y,null)}return;case"dialog":Pn("beforetoggle",d),Pn("toggle",d),Pn("cancel",d),Pn("close",d);break;case"iframe":case"object":Pn("load",d);break;case"video":case"audio":for(S=0;S<gy.length;S++)Pn(gy[S],d);break;case"image":Pn("error",d),Pn("load",d);break;case"details":Pn("toggle",d);break;case"embed":case"source":case"link":Pn("error",d),Pn("load",d);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Oe in y)if(y.hasOwnProperty(Oe)&&(S=y[Oe],S!=null))switch(Oe){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,h));default:gr(d,h,Oe,S,y,null)}return;default:if(IA(h)){for(tt in y)y.hasOwnProperty(tt)&&(S=y[tt],S!==void 0&&_R(d,h,tt,S,y,void 0));return}}for(X in y)y.hasOwnProperty(X)&&(S=y[X],S!=null&&gr(d,h,X,S,y,null))}function lle(d,h,y,S){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var R=null,O=null,U=null,X=null,ce=null,Oe=null,tt=null;for(He in y){var ut=y[He];if(y.hasOwnProperty(He)&&ut!=null)switch(He){case"checked":break;case"value":break;case"defaultValue":ce=ut;default:S.hasOwnProperty(He)||gr(d,h,He,null,S,ut)}}for(var Ie in S){var He=S[Ie];if(ut=y[Ie],S.hasOwnProperty(Ie)&&(He!=null||ut!=null))switch(Ie){case"type":O=He;break;case"name":R=He;break;case"checked":Oe=He;break;case"defaultChecked":tt=He;break;case"value":U=He;break;case"defaultValue":X=He;break;case"children":case"dangerouslySetInnerHTML":if(He!=null)throw Error(r(137,h));break;default:He!==ut&&gr(d,h,Ie,He,S,ut)}}Jc(d,U,X,ce,Oe,tt,O,R);return;case"select":He=U=X=Ie=null;for(O in y)if(ce=y[O],y.hasOwnProperty(O)&&ce!=null)switch(O){case"value":break;case"multiple":He=ce;default:S.hasOwnProperty(O)||gr(d,h,O,null,S,ce)}for(R in S)if(O=S[R],ce=y[R],S.hasOwnProperty(R)&&(O!=null||ce!=null))switch(R){case"value":Ie=O;break;case"defaultValue":X=O;break;case"multiple":U=O;default:O!==ce&&gr(d,h,R,O,S,ce)}h=X,y=U,S=He,Ie!=null?qi(d,!!y,Ie,!1):!!S!=!!y&&(h!=null?qi(d,!!y,h,!0):qi(d,!!y,y?[]:"",!1));return;case"textarea":He=Ie=null;for(X in y)if(R=y[X],y.hasOwnProperty(X)&&R!=null&&!S.hasOwnProperty(X))switch(X){case"value":break;case"children":break;default:gr(d,h,X,null,S,R)}for(U in S)if(R=S[U],O=y[U],S.hasOwnProperty(U)&&(R!=null||O!=null))switch(U){case"value":Ie=R;break;case"defaultValue":He=R;break;case"children":break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(r(91));break;default:R!==O&&gr(d,h,U,R,S,O)}ds(d,Ie,He);return;case"option":for(var $t in y)if(Ie=y[$t],y.hasOwnProperty($t)&&Ie!=null&&!S.hasOwnProperty($t))switch($t){case"selected":d.selected=!1;break;default:gr(d,h,$t,null,S,Ie)}for(ce in S)if(Ie=S[ce],He=y[ce],S.hasOwnProperty(ce)&&Ie!==He&&(Ie!=null||He!=null))switch(ce){case"selected":d.selected=Ie&&typeof Ie!="function"&&typeof Ie!="symbol";break;default:gr(d,h,ce,Ie,S,He)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var on in y)Ie=y[on],y.hasOwnProperty(on)&&Ie!=null&&!S.hasOwnProperty(on)&&gr(d,h,on,null,S,Ie);for(Oe in S)if(Ie=S[Oe],He=y[Oe],S.hasOwnProperty(Oe)&&Ie!==He&&(Ie!=null||He!=null))switch(Oe){case"children":case"dangerouslySetInnerHTML":if(Ie!=null)throw Error(r(137,h));break;default:gr(d,h,Oe,Ie,S,He)}return;default:if(IA(h)){for(var xr in y)Ie=y[xr],y.hasOwnProperty(xr)&&Ie!==void 0&&!S.hasOwnProperty(xr)&&_R(d,h,xr,void 0,S,Ie);for(tt in S)Ie=S[tt],He=y[tt],!S.hasOwnProperty(tt)||Ie===He||Ie===void 0&&He===void 0||_R(d,h,tt,Ie,S,He);return}}for(var Ce in y)Ie=y[Ce],y.hasOwnProperty(Ce)&&Ie!=null&&!S.hasOwnProperty(Ce)&&gr(d,h,Ce,null,S,Ie);for(ut in S)Ie=S[ut],He=y[ut],!S.hasOwnProperty(ut)||Ie===He||Ie==null&&He==null||gr(d,h,ut,Ie,S,He)}function az(d){switch(d){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function cle(){if(typeof performance.getEntriesByType=="function"){for(var d=0,h=0,y=performance.getEntriesByType("resource"),S=0;S<y.length;S++){var R=y[S],O=R.transferSize,U=R.initiatorType,X=R.duration;if(O&&X&&az(U)){for(U=0,X=R.responseEnd,S+=1;S<y.length;S++){var ce=y[S],Oe=ce.startTime;if(Oe>X)break;var tt=ce.transferSize,ut=ce.initiatorType;tt&&az(ut)&&(ce=ce.responseEnd,U+=tt*(ce<X?1:(X-Oe)/(ce-Oe)))}if(--S,h+=8*(O+U)/(R.duration/1e3),d++,10<d)break}}if(0<d)return h/d/1e6}return navigator.connection&&(d=navigator.connection.downlink,typeof d=="number")?d:5}var SR=null,wR=null;function oS(d){return d.nodeType===9?d:d.ownerDocument}function oz(d){switch(d){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function lz(d,h){if(d===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return d===1&&h==="foreignObject"?0:d}function TR(d,h){return d==="textarea"||d==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var ER=null;function ule(){var d=window.event;return d&&d.type==="popstate"?d===ER?!1:(ER=d,!0):(ER=null,!1)}var cz=typeof setTimeout=="function"?setTimeout:void 0,dle=typeof clearTimeout=="function"?clearTimeout:void 0,uz=typeof Promise=="function"?Promise:void 0,fle=typeof queueMicrotask=="function"?queueMicrotask:typeof uz<"u"?function(d){return uz.resolve(null).then(d).catch(hle)}:cz;function hle(d){setTimeout(function(){throw d})}function Kd(d){return d==="head"}function dz(d,h){var y=h,S=0;do{var R=y.nextSibling;if(d.removeChild(y),R&&R.nodeType===8)if(y=R.data,y==="/$"||y==="/&"){if(S===0){d.removeChild(R),Pm(h);return}S--}else if(y==="$"||y==="$?"||y==="$~"||y==="$!"||y==="&")S++;else if(y==="html")yy(d.ownerDocument.documentElement);else if(y==="head"){y=d.ownerDocument.head,yy(y);for(var O=y.firstChild;O;){var U=O.nextSibling,X=O.nodeName;O[ih]||X==="SCRIPT"||X==="STYLE"||X==="LINK"&&O.rel.toLowerCase()==="stylesheet"||y.removeChild(O),O=U}}else y==="body"&&yy(d.ownerDocument.body);y=R}while(y);Pm(h)}function fz(d,h){var y=d;d=0;do{var S=y.nextSibling;if(y.nodeType===1?h?(y._stashedDisplay=y.style.display,y.style.display="none"):(y.style.display=y._stashedDisplay||"",y.getAttribute("style")===""&&y.removeAttribute("style")):y.nodeType===3&&(h?(y._stashedText=y.nodeValue,y.nodeValue=""):y.nodeValue=y._stashedText||""),S&&S.nodeType===8)if(y=S.data,y==="/$"){if(d===0)break;d--}else y!=="$"&&y!=="$?"&&y!=="$~"&&y!=="$!"||d++;y=S}while(y)}function CR(d){var h=d.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var y=h;switch(h=h.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":CR(y),Bx(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}d.removeChild(y)}}function ple(d,h,y,S){for(;d.nodeType===1;){var R=y;if(d.nodeName.toLowerCase()!==h.toLowerCase()){if(!S&&(d.nodeName!=="INPUT"||d.type!=="hidden"))break}else if(S){if(!d[ih])switch(h){case"meta":if(!d.hasAttribute("itemprop"))break;return d;case"link":if(O=d.getAttribute("rel"),O==="stylesheet"&&d.hasAttribute("data-precedence"))break;if(O!==R.rel||d.getAttribute("href")!==(R.href==null||R.href===""?null:R.href)||d.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin)||d.getAttribute("title")!==(R.title==null?null:R.title))break;return d;case"style":if(d.hasAttribute("data-precedence"))break;return d;case"script":if(O=d.getAttribute("src"),(O!==(R.src==null?null:R.src)||d.getAttribute("type")!==(R.type==null?null:R.type)||d.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin))&&O&&d.hasAttribute("async")&&!d.hasAttribute("itemprop"))break;return d;default:return d}}else if(h==="input"&&d.type==="hidden"){var O=R.name==null?null:""+R.name;if(R.type==="hidden"&&d.getAttribute("name")===O)return d}else return d;if(d=Uo(d.nextSibling),d===null)break}return null}function mle(d,h,y){if(h==="")return null;for(;d.nodeType!==3;)if((d.nodeType!==1||d.nodeName!=="INPUT"||d.type!=="hidden")&&!y||(d=Uo(d.nextSibling),d===null))return null;return d}function hz(d,h){for(;d.nodeType!==8;)if((d.nodeType!==1||d.nodeName!=="INPUT"||d.type!=="hidden")&&!h||(d=Uo(d.nextSibling),d===null))return null;return d}function AR(d){return d.data==="$?"||d.data==="$~"}function MR(d){return d.data==="$!"||d.data==="$?"&&d.ownerDocument.readyState!=="loading"}function gle(d,h){var y=d.ownerDocument;if(d.data==="$~")d._reactRetry=h;else if(d.data!=="$?"||y.readyState!=="loading")h();else{var S=function(){h(),y.removeEventListener("DOMContentLoaded",S)};y.addEventListener("DOMContentLoaded",S),d._reactRetry=S}}function Uo(d){for(;d!=null;d=d.nextSibling){var h=d.nodeType;if(h===1||h===3)break;if(h===8){if(h=d.data,h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"||h==="F!"||h==="F")break;if(h==="/$"||h==="/&")return null}}return d}var RR=null;function pz(d){d=d.nextSibling;for(var h=0;d;){if(d.nodeType===8){var y=d.data;if(y==="/$"||y==="/&"){if(h===0)return Uo(d.nextSibling);h--}else y!=="$"&&y!=="$!"&&y!=="$?"&&y!=="$~"&&y!=="&"||h++}d=d.nextSibling}return null}function mz(d){d=d.previousSibling;for(var h=0;d;){if(d.nodeType===8){var y=d.data;if(y==="$"||y==="$!"||y==="$?"||y==="$~"||y==="&"){if(h===0)return d;h--}else y!=="/$"&&y!=="/&"||h++}d=d.previousSibling}return null}function gz(d,h,y){switch(h=oS(y),d){case"html":if(d=h.documentElement,!d)throw Error(r(452));return d;case"head":if(d=h.head,!d)throw Error(r(453));return d;case"body":if(d=h.body,!d)throw Error(r(454));return d;default:throw Error(r(451))}}function yy(d){for(var h=d.attributes;h.length;)d.removeAttributeNode(h[0]);Bx(d)}var jo=new Map,xz=new Set;function lS(d){return typeof d.getRootNode=="function"?d.getRootNode():d.nodeType===9?d:d.ownerDocument}var xu=j.d;j.d={f:xle,r:yle,D:vle,C:ble,L:_le,m:Sle,X:Tle,S:wle,M:Ele};function xle(){var d=xu.f(),h=J1();return d||h}function yle(d){var h=J(d);h!==null&&h.tag===5&&h.type==="form"?Lj(h):xu.r(d)}var Am=typeof document>"u"?null:document;function yz(d,h,y){var S=Am;if(S&&typeof h=="string"&&h){var R=Pr(h);R='link[rel="'+d+'"][href="'+R+'"]',typeof y=="string"&&(R+='[crossorigin="'+y+'"]'),xz.has(R)||(xz.add(R),d={rel:d,crossOrigin:y,href:h},S.querySelector(R)===null&&(h=S.createElement("link"),Rs(h,"link",d),De(h),S.head.appendChild(h)))}}function vle(d){xu.D(d),yz("dns-prefetch",d,null)}function ble(d,h){xu.C(d,h),yz("preconnect",d,h)}function _le(d,h,y){xu.L(d,h,y);var S=Am;if(S&&d&&h){var R='link[rel="preload"][as="'+Pr(h)+'"]';h==="image"&&y&&y.imageSrcSet?(R+='[imagesrcset="'+Pr(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(R+='[imagesizes="'+Pr(y.imageSizes)+'"]')):R+='[href="'+Pr(d)+'"]';var O=R;switch(h){case"style":O=Mm(d);break;case"script":O=Rm(d)}jo.has(O)||(d=f({rel:"preload",href:h==="image"&&y&&y.imageSrcSet?void 0:d,as:h},y),jo.set(O,d),S.querySelector(R)!==null||h==="style"&&S.querySelector(vy(O))||h==="script"&&S.querySelector(by(O))||(h=S.createElement("link"),Rs(h,"link",d),De(h),S.head.appendChild(h)))}}function Sle(d,h){xu.m(d,h);var y=Am;if(y&&d){var S=h&&typeof h.as=="string"?h.as:"script",R='link[rel="modulepreload"][as="'+Pr(S)+'"][href="'+Pr(d)+'"]',O=R;switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":O=Rm(d)}if(!jo.has(O)&&(d=f({rel:"modulepreload",href:d},h),jo.set(O,d),y.querySelector(R)===null)){switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(by(O)))return}S=y.createElement("link"),Rs(S,"link",d),De(S),y.head.appendChild(S)}}}function wle(d,h,y){xu.S(d,h,y);var S=Am;if(S&&d){var R=ke(S).hoistableStyles,O=Mm(d);h=h||"default";var U=R.get(O);if(!U){var X={loading:0,preload:null};if(U=S.querySelector(vy(O)))X.loading=5;else{d=f({rel:"stylesheet",href:d,"data-precedence":h},y),(y=jo.get(O))&&PR(d,y);var ce=U=S.createElement("link");De(ce),Rs(ce,"link",d),ce._p=new Promise(function(Oe,tt){ce.onload=Oe,ce.onerror=tt}),ce.addEventListener("load",function(){X.loading|=1}),ce.addEventListener("error",function(){X.loading|=2}),X.loading|=4,cS(U,h,S)}U={type:"stylesheet",instance:U,count:1,state:X},R.set(O,U)}}}function Tle(d,h){xu.X(d,h);var y=Am;if(y&&d){var S=ke(y).hoistableScripts,R=Rm(d),O=S.get(R);O||(O=y.querySelector(by(R)),O||(d=f({src:d,async:!0},h),(h=jo.get(R))&&NR(d,h),O=y.createElement("script"),De(O),Rs(O,"link",d),y.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},S.set(R,O))}}function Ele(d,h){xu.M(d,h);var y=Am;if(y&&d){var S=ke(y).hoistableScripts,R=Rm(d),O=S.get(R);O||(O=y.querySelector(by(R)),O||(d=f({src:d,async:!0,type:"module"},h),(h=jo.get(R))&&NR(d,h),O=y.createElement("script"),De(O),Rs(O,"link",d),y.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},S.set(R,O))}}function vz(d,h,y,S){var R=(R=K.current)?lS(R):null;if(!R)throw Error(r(446));switch(d){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(h=Mm(y.href),y=ke(R).hoistableStyles,S=y.get(h),S||(S={type:"style",instance:null,count:0,state:null},y.set(h,S)),S):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){d=Mm(y.href);var O=ke(R).hoistableStyles,U=O.get(d);if(U||(R=R.ownerDocument||R,U={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},O.set(d,U),(O=R.querySelector(vy(d)))&&!O._p&&(U.instance=O,U.state.loading=5),jo.has(d)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},jo.set(d,y),O||Cle(R,d,y,U.state))),h&&S===null)throw Error(r(528,""));return U}if(h&&S!==null)throw Error(r(529,""));return null;case"script":return h=y.async,y=y.src,typeof y=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=Rm(y),y=ke(R).hoistableScripts,S=y.get(h),S||(S={type:"script",instance:null,count:0,state:null},y.set(h,S)),S):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,d))}}function Mm(d){return'href="'+Pr(d)+'"'}function vy(d){return'link[rel="stylesheet"]['+d+"]"}function bz(d){return f({},d,{"data-precedence":d.precedence,precedence:null})}function Cle(d,h,y,S){d.querySelector('link[rel="preload"][as="style"]['+h+"]")?S.loading=1:(h=d.createElement("link"),S.preload=h,h.addEventListener("load",function(){return S.loading|=1}),h.addEventListener("error",function(){return S.loading|=2}),Rs(h,"link",y),De(h),d.head.appendChild(h))}function Rm(d){return'[src="'+Pr(d)+'"]'}function by(d){return"script[async]"+d}function _z(d,h,y){if(h.count++,h.instance===null)switch(h.type){case"style":var S=d.querySelector('style[data-href~="'+Pr(y.href)+'"]');if(S)return h.instance=S,De(S),S;var R=f({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return S=(d.ownerDocument||d).createElement("style"),De(S),Rs(S,"style",R),cS(S,y.precedence,d),h.instance=S;case"stylesheet":R=Mm(y.href);var O=d.querySelector(vy(R));if(O)return h.state.loading|=4,h.instance=O,De(O),O;S=bz(y),(R=jo.get(R))&&PR(S,R),O=(d.ownerDocument||d).createElement("link"),De(O);var U=O;return U._p=new Promise(function(X,ce){U.onload=X,U.onerror=ce}),Rs(O,"link",S),h.state.loading|=4,cS(O,y.precedence,d),h.instance=O;case"script":return O=Rm(y.src),(R=d.querySelector(by(O)))?(h.instance=R,De(R),R):(S=y,(R=jo.get(O))&&(S=f({},y),NR(S,R)),d=d.ownerDocument||d,R=d.createElement("script"),De(R),Rs(R,"link",S),d.head.appendChild(R),h.instance=R);case"void":return null;default:throw Error(r(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(S=h.instance,h.state.loading|=4,cS(S,y.precedence,d));return h.instance}function cS(d,h,y){for(var S=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),R=S.length?S[S.length-1]:null,O=R,U=0;U<S.length;U++){var X=S[U];if(X.dataset.precedence===h)O=X;else if(O!==R)break}O?O.parentNode.insertBefore(d,O.nextSibling):(h=y.nodeType===9?y.head:y,h.insertBefore(d,h.firstChild))}function PR(d,h){d.crossOrigin==null&&(d.crossOrigin=h.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=h.referrerPolicy),d.title==null&&(d.title=h.title)}function NR(d,h){d.crossOrigin==null&&(d.crossOrigin=h.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=h.referrerPolicy),d.integrity==null&&(d.integrity=h.integrity)}var uS=null;function Sz(d,h,y){if(uS===null){var S=new Map,R=uS=new Map;R.set(y,S)}else R=uS,S=R.get(y),S||(S=new Map,R.set(y,S));if(S.has(d))return S;for(S.set(d,null),y=y.getElementsByTagName(d),R=0;R<y.length;R++){var O=y[R];if(!(O[ih]||O[Oi]||d==="link"&&O.getAttribute("rel")==="stylesheet")&&O.namespaceURI!=="http://www.w3.org/2000/svg"){var U=O.getAttribute(h)||"";U=d+U;var X=S.get(U);X?X.push(O):S.set(U,[O])}}return S}function wz(d,h,y){d=d.ownerDocument||d,d.head.insertBefore(y,h==="title"?d.querySelector("head > title"):null)}function Ale(d,h,y){if(y===1||h.itemProp!=null)return!1;switch(d){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;switch(h.rel){case"stylesheet":return d=h.disabled,typeof h.precedence=="string"&&d==null;default:return!0}case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function Tz(d){return!(d.type==="stylesheet"&&(d.state.loading&3)===0)}function Mle(d,h,y,S){if(y.type==="stylesheet"&&(typeof S.media!="string"||matchMedia(S.media).matches!==!1)&&(y.state.loading&4)===0){if(y.instance===null){var R=Mm(S.href),O=h.querySelector(vy(R));if(O){h=O._p,h!==null&&typeof h=="object"&&typeof h.then=="function"&&(d.count++,d=dS.bind(d),h.then(d,d)),y.state.loading|=4,y.instance=O,De(O);return}O=h.ownerDocument||h,S=bz(S),(R=jo.get(R))&&PR(S,R),O=O.createElement("link"),De(O);var U=O;U._p=new Promise(function(X,ce){U.onload=X,U.onerror=ce}),Rs(O,"link",S),y.instance=O}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(y,h),(h=y.state.preload)&&(y.state.loading&3)===0&&(d.count++,y=dS.bind(d),h.addEventListener("load",y),h.addEventListener("error",y))}}var OR=0;function Rle(d,h){return d.stylesheets&&d.count===0&&hS(d,d.stylesheets),0<d.count||0<d.imgCount?function(y){var S=setTimeout(function(){if(d.stylesheets&&hS(d,d.stylesheets),d.unsuspend){var O=d.unsuspend;d.unsuspend=null,O()}},6e4+h);0<d.imgBytes&&OR===0&&(OR=62500*cle());var R=setTimeout(function(){if(d.waitingForImages=!1,d.count===0&&(d.stylesheets&&hS(d,d.stylesheets),d.unsuspend)){var O=d.unsuspend;d.unsuspend=null,O()}},(d.imgBytes>OR?50:800)+h);return d.unsuspend=y,function(){d.unsuspend=null,clearTimeout(S),clearTimeout(R)}}:null}function dS(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)hS(this,this.stylesheets);else if(this.unsuspend){var d=this.unsuspend;this.unsuspend=null,d()}}}var fS=null;function hS(d,h){d.stylesheets=null,d.unsuspend!==null&&(d.count++,fS=new Map,h.forEach(Ple,d),fS=null,dS.call(d))}function Ple(d,h){if(!(h.state.loading&4)){var y=fS.get(d);if(y)var S=y.get(null);else{y=new Map,fS.set(d,y);for(var R=d.querySelectorAll("link[data-precedence],style[data-precedence]"),O=0;O<R.length;O++){var U=R[O];(U.nodeName==="LINK"||U.getAttribute("media")!=="not all")&&(y.set(U.dataset.precedence,U),S=U)}S&&y.set(null,S)}R=h.instance,U=R.getAttribute("data-precedence"),O=y.get(U)||S,O===S&&y.set(null,R),y.set(U,R),this.count++,S=dS.bind(this),R.addEventListener("load",S),R.addEventListener("error",S),O?O.parentNode.insertBefore(R,O.nextSibling):(d=d.nodeType===9?d.head:d,d.insertBefore(R,d.firstChild)),h.state.loading|=4}}var _y={$$typeof:T,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function Nle(d,h,y,S,R,O,U,X,ce){this.tag=1,this.containerInfo=d,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Kt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kt(0),this.hiddenUpdates=Kt(null),this.identifierPrefix=S,this.onUncaughtError=R,this.onCaughtError=O,this.onRecoverableError=U,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ce,this.incompleteTransitions=new Map}function Ez(d,h,y,S,R,O,U,X,ce,Oe,tt,ut){return d=new Nle(d,h,y,U,ce,Oe,tt,ut,X),h=1,O===!0&&(h|=24),O=no(3,null,null,h),d.current=O,O.stateNode=d,h=dM(),h.refCount++,d.pooledCache=h,h.refCount++,O.memoizedState={element:S,isDehydrated:y,cache:h},mM(O),d}function Cz(d){return d?(d=am,d):am}function Az(d,h,y,S,R,O){R=Cz(R),S.context===null?S.context=R:S.pendingContext=R,S=Ud(h),S.payload={element:y},O=O===void 0?null:O,O!==null&&(S.callback=O),y=jd(d,S,h),y!==null&&(Oa(y,d,h),Jx(y,d,h))}function Mz(d,h){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var y=d.retryLane;d.retryLane=y!==0&&y<h?y:h}}function DR(d,h){Mz(d,h),(d=d.alternate)&&Mz(d,h)}function Rz(d){if(d.tag===13||d.tag===31){var h=lh(d,67108864);h!==null&&Oa(h,d,67108864),DR(d,67108864)}}function Pz(d){if(d.tag===13||d.tag===31){var h=oo();h=Rr(h);var y=lh(d,h);y!==null&&Oa(y,d,h),DR(d,h)}}var pS=!0;function Ole(d,h,y,S){var R=B.T;B.T=null;var O=j.p;try{j.p=2,LR(d,h,y,S)}finally{j.p=O,B.T=R}}function Dle(d,h,y,S){var R=B.T;B.T=null;var O=j.p;try{j.p=8,LR(d,h,y,S)}finally{j.p=O,B.T=R}}function LR(d,h,y,S){if(pS){var R=IR(S);if(R===null)bR(d,h,S,mS,y),Oz(d,S);else if(Ile(R,d,h,y,S))S.stopPropagation();else if(Oz(d,S),h&4&&-1<Lle.indexOf(d)){for(;R!==null;){var O=J(R);if(O!==null)switch(O.tag){case 3:if(O=O.stateNode,O.current.memoizedState.isDehydrated){var U=Xe(O.pendingLanes);if(U!==0){var X=O;for(X.pendingLanes|=2,X.entangledLanes|=2;U;){var ce=1<<31-ht(U);X.entanglements[1]|=ce,U&=~ce}cc(O),(Qn&6)===0&&(Z1=V()+500,my(0))}}break;case 31:case 13:X=lh(O,2),X!==null&&Oa(X,O,2),J1(),DR(O,2)}if(O=IR(S),O===null&&bR(d,h,S,mS,y),O===R)break;R=O}R!==null&&S.stopPropagation()}else bR(d,h,S,null,y)}}function IR(d){return d=BA(d),kR(d)}var mS=null;function kR(d){if(mS=null,d=Nd(d),d!==null){var h=s(d);if(h===null)d=null;else{var y=h.tag;if(y===13){if(d=a(h),d!==null)return d;d=null}else if(y===31){if(d=o(h),d!==null)return d;d=null}else if(y===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;d=null}else h!==d&&(d=null)}}return mS=d,null}function Nz(d){switch(d){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ie()){case le:return 2;case xe:return 8;case pe:case it:return 32;case We:return 268435456;default:return 32}default:return 32}}var BR=!1,Zd=null,Qd=null,Jd=null,Sy=new Map,wy=new Map,ef=[],Lle="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Oz(d,h){switch(d){case"focusin":case"focusout":Zd=null;break;case"dragenter":case"dragleave":Qd=null;break;case"mouseover":case"mouseout":Jd=null;break;case"pointerover":case"pointerout":Sy.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":wy.delete(h.pointerId)}}function Ty(d,h,y,S,R,O){return d===null||d.nativeEvent!==O?(d={blockedOn:h,domEventName:y,eventSystemFlags:S,nativeEvent:O,targetContainers:[R]},h!==null&&(h=J(h),h!==null&&Rz(h)),d):(d.eventSystemFlags|=S,h=d.targetContainers,R!==null&&h.indexOf(R)===-1&&h.push(R),d)}function Ile(d,h,y,S,R){switch(h){case"focusin":return Zd=Ty(Zd,d,h,y,S,R),!0;case"dragenter":return Qd=Ty(Qd,d,h,y,S,R),!0;case"mouseover":return Jd=Ty(Jd,d,h,y,S,R),!0;case"pointerover":var O=R.pointerId;return Sy.set(O,Ty(Sy.get(O)||null,d,h,y,S,R)),!0;case"gotpointercapture":return O=R.pointerId,wy.set(O,Ty(wy.get(O)||null,d,h,y,S,R)),!0}return!1}function Dz(d){var h=Nd(d.target);if(h!==null){var y=s(h);if(y!==null){if(h=y.tag,h===13){if(h=a(y),h!==null){d.blockedOn=h,Pd(d.priority,function(){Pz(y)});return}}else if(h===31){if(h=o(y),h!==null){d.blockedOn=h,Pd(d.priority,function(){Pz(y)});return}}else if(h===3&&y.stateNode.current.memoizedState.isDehydrated){d.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}d.blockedOn=null}function gS(d){if(d.blockedOn!==null)return!1;for(var h=d.targetContainers;0<h.length;){var y=IR(d.nativeEvent);if(y===null){y=d.nativeEvent;var S=new y.constructor(y.type,y);kA=S,y.target.dispatchEvent(S),kA=null}else return h=J(y),h!==null&&Rz(h),d.blockedOn=y,!1;h.shift()}return!0}function Lz(d,h,y){gS(d)&&y.delete(h)}function kle(){BR=!1,Zd!==null&&gS(Zd)&&(Zd=null),Qd!==null&&gS(Qd)&&(Qd=null),Jd!==null&&gS(Jd)&&(Jd=null),Sy.forEach(Lz),wy.forEach(Lz)}function xS(d,h){d.blockedOn===h&&(d.blockedOn=null,BR||(BR=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,kle)))}var yS=null;function Iz(d){yS!==d&&(yS=d,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){yS===d&&(yS=null);for(var h=0;h<d.length;h+=3){var y=d[h],S=d[h+1],R=d[h+2];if(typeof S!="function"){if(kR(S||y)===null)continue;break}var O=J(y);O!==null&&(d.splice(h,3),h-=3,IM(O,{pending:!0,data:R,method:y.method,action:S},S,R))}}))}function Pm(d){function h(ce){return xS(ce,d)}Zd!==null&&xS(Zd,d),Qd!==null&&xS(Qd,d),Jd!==null&&xS(Jd,d),Sy.forEach(h),wy.forEach(h);for(var y=0;y<ef.length;y++){var S=ef[y];S.blockedOn===d&&(S.blockedOn=null)}for(;0<ef.length&&(y=ef[0],y.blockedOn===null);)Dz(y),y.blockedOn===null&&ef.shift();if(y=(d.ownerDocument||d).$$reactFormReplay,y!=null)for(S=0;S<y.length;S+=3){var R=y[S],O=y[S+1],U=R[Wi]||null;if(typeof O=="function")U||Iz(y);else if(U){var X=null;if(O&&O.hasAttribute("formAction")){if(R=O,U=O[Wi]||null)X=U.formAction;else if(kR(R)!==null)continue}else X=U.action;typeof X=="function"?y[S+1]=X:(y.splice(S,3),S-=3),Iz(y)}}}function kz(){function d(O){O.canIntercept&&O.info==="react-transition"&&O.intercept({handler:function(){return new Promise(function(U){return R=U})},focusReset:"manual",scroll:"manual"})}function h(){R!==null&&(R(),R=null),S||setTimeout(y,20)}function y(){if(!S&&!navigation.transition){var O=navigation.currentEntry;O&&O.url!=null&&navigation.navigate(O.url,{state:O.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var S=!1,R=null;return navigation.addEventListener("navigate",d),navigation.addEventListener("navigatesuccess",h),navigation.addEventListener("navigateerror",h),setTimeout(y,100),function(){S=!0,navigation.removeEventListener("navigate",d),navigation.removeEventListener("navigatesuccess",h),navigation.removeEventListener("navigateerror",h),R!==null&&(R(),R=null)}}}function FR(d){this._internalRoot=d}vS.prototype.render=FR.prototype.render=function(d){var h=this._internalRoot;if(h===null)throw Error(r(409));var y=h.current,S=oo();Az(y,S,d,h,null,null)},vS.prototype.unmount=FR.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var h=d.containerInfo;Az(d.current,2,null,d,null,null),J1(),h[Qc]=null}};function vS(d){this._internalRoot=d}vS.prototype.unstable_scheduleHydration=function(d){if(d){var h=aa();d={blockedOn:null,target:d,priority:h};for(var y=0;y<ef.length&&h!==0&&h<ef[y].priority;y++);ef.splice(y,0,d),y===0&&Dz(d)}};var Bz=e.version;if(Bz!=="19.2.0")throw Error(r(527,Bz,"19.2.0"));j.findDOMNode=function(d){var h=d._reactInternals;if(h===void 0)throw typeof d.render=="function"?Error(r(188)):(d=Object.keys(d).join(","),Error(r(268,d)));return d=c(h),d=d!==null?u(d):null,d=d===null?null:d.stateNode,d};var Ble={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bS=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bS.isDisabled&&bS.supportsFiber)try{Be=bS.inject(Ble),ot=bS}catch{}}return Cy.createRoot=function(d,h){if(!i(d))throw Error(r(299));var y=!1,S="",R=Vj,O=Hj,U=Wj;return h!=null&&(h.unstable_strictMode===!0&&(y=!0),h.identifierPrefix!==void 0&&(S=h.identifierPrefix),h.onUncaughtError!==void 0&&(R=h.onUncaughtError),h.onCaughtError!==void 0&&(O=h.onCaughtError),h.onRecoverableError!==void 0&&(U=h.onRecoverableError)),h=Ez(d,1,!1,null,null,y,S,null,R,O,U,kz),d[Qc]=h.current,vR(d),new FR(h)},Cy.hydrateRoot=function(d,h,y){if(!i(d))throw Error(r(299));var S=!1,R="",O=Vj,U=Hj,X=Wj,ce=null;return y!=null&&(y.unstable_strictMode===!0&&(S=!0),y.identifierPrefix!==void 0&&(R=y.identifierPrefix),y.onUncaughtError!==void 0&&(O=y.onUncaughtError),y.onCaughtError!==void 0&&(U=y.onCaughtError),y.onRecoverableError!==void 0&&(X=y.onRecoverableError),y.formState!==void 0&&(ce=y.formState)),h=Ez(d,1,!0,h,y??null,S,R,ce,O,U,X,kz),h.context=Cz(null),y=h.current,S=oo(),S=Rr(S),R=Ud(S),R.callback=null,jd(y,R,S),y=S,h.current.lanes=y,vt(h,y),cc(h),d[Qc]=h.current,vR(d),new vS(h)},Cy.version="19.2.0",Cy}var qz;function qle(){if(qz)return zR.exports;qz=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),zR.exports=Wle(),zR.exports}var Xle=qle();var Xz="popstate";function Yle(t={}){function e(r,i){let{pathname:s,search:a,hash:o}=r.location;return zO("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:ob(i)}return Zle(e,n,null,t)}function ai(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function cl(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Kle(){return Math.random().toString(36).substring(2,10)}function Yz(t,e){return{usr:t.state,key:t.key,idx:e}}function zO(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?ox(e):e,state:n,key:e&&e.key||r||Kle()}}function ob({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ox(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function Zle(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o="POP",l=null,c=u();c==null&&(c=0,a.replaceState({...a.state,idx:c},""));function u(){return(a.state||{idx:null}).idx}function f(){o="POP";let v=u(),_=v==null?null:v-c;c=v,l&&l({action:o,location:b.location,delta:_})}function p(v,_){o="PUSH";let E=zO(b.location,v,_);c=u()+1;let T=Yz(E,c),A=b.createHref(E);try{a.pushState(T,"",A)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;i.location.assign(A)}s&&l&&l({action:o,location:b.location,delta:1})}function m(v,_){o="REPLACE";let E=zO(b.location,v,_);c=u();let T=Yz(E,c),A=b.createHref(E);a.replaceState(T,"",A),s&&l&&l({action:o,location:b.location,delta:0})}function x(v){return Qle(v)}let b={get action(){return o},get location(){return t(i,a)},listen(v){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Xz,f),l=v,()=>{i.removeEventListener(Xz,f),l=null}},createHref(v){return e(i,v)},createURL:x,encodeLocation(v){let _=x(v);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:p,replace:m,go(v){return a.go(v)}};return b}function Qle(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ai(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:ob(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function UX(t,e,n="/"){return Jle(t,e,n,!1)}function Jle(t,e,n,r){let i=typeof e=="string"?ox(e):e,s=sd(i.pathname||"/",n);if(s==null)return null;let a=jX(t);ece(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=dce(s);o=cce(a[l],c,r)}return o}function jX(t,e=[],n=[],r="",i=!1){let s=(a,o,l=i,c)=>{let u={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(r)&&l)return;ai(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length)}let f=Yu([r,u.relativePath]),p=n.concat(u);a.children&&a.children.length>0&&(ai(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),jX(a.children,e,p,f,l)),!(a.path==null&&!a.index)&&e.push({path:f,score:oce(f,a.index),routesMeta:p})};return t.forEach((a,o)=>{if(a.path===""||!a.path?.includes("?"))s(a,o);else for(let l of zX(a.path))s(a,o,!0,l)}),e}function zX(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=zX(r.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function ece(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:lce(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var tce=/^:[\w-]+$/,nce=3,rce=2,ice=1,sce=10,ace=-2,Kz=t=>t==="*";function oce(t,e){let n=t.split("/"),r=n.length;return n.some(Kz)&&(r+=ace),e&&(r+=rce),n.filter(i=>!Kz(i)).reduce((i,s)=>i+(tce.test(s)?nce:s===""?ice:sce),r)}function lce(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function cce(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",a=[];for(let o=0;o<r.length;++o){let l=r[o],c=o===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",f=jT({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),p=l.route;if(!f&&c&&n&&!r[r.length-1].route.index&&(f=jT({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!f)return null;Object.assign(i,f.params),a.push({params:i,pathname:Yu([s,f.pathname]),pathnameBase:gce(Yu([s,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(s=Yu([s,f.pathnameBase]))}return a}function jT(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=uce(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((c,{paramName:u,isOptional:f},p)=>{if(u==="*"){let x=o[p]||"";a=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const m=o[p];return f&&!m?c[u]=void 0:c[u]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:a,pattern:t}}function uce(t,e=!1,n=!0){cl(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function dce(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return cl(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function sd(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var fce=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hce=t=>fce.test(t);function pce(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ox(t):t,s;if(n)if(hce(n))s=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),cl(!1,`Pathnames cannot have embedded double slashes - normalizing ${a} -> ${n}`)}n.startsWith("/")?s=Zz(n.substring(1),"/"):s=Zz(n,e)}else s=e;return{pathname:s,search:xce(r),hash:yce(i)}}function Zz(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function HR(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function mce(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function $X(t){let e=mce(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function GX(t,e,n,r=!1){let i;typeof t=="string"?i=ox(t):(i={...t},ai(!i.pathname||!i.pathname.includes("?"),HR("?","pathname","search",i)),ai(!i.pathname||!i.pathname.includes("#"),HR("#","pathname","hash",i)),ai(!i.search||!i.search.includes("#"),HR("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=n;else{let f=e.length-1;if(!r&&a.startsWith("..")){let p=a.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}o=f>=0?e[f]:"/"}let l=pce(i,o),c=a&&a!=="/"&&a.endsWith("/"),u=(s||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var Yu=t=>t.join("/").replace(/\/\/+/g,"/"),gce=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),xce=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,yce=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function vce(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var VX=["POST","PUT","PATCH","DELETE"];new Set(VX);var bce=["GET",...VX];new Set(bce);var lx=w.createContext(null);lx.displayName="DataRouter";var vE=w.createContext(null);vE.displayName="DataRouterState";w.createContext(!1);var HX=w.createContext({isTransitioning:!1});HX.displayName="ViewTransition";var _ce=w.createContext(new Map);_ce.displayName="Fetchers";var Sce=w.createContext(null);Sce.displayName="Await";var qc=w.createContext(null);qc.displayName="Navigation";var s_=w.createContext(null);s_.displayName="Location";var Xc=w.createContext({outlet:null,matches:[],isDataRoute:!1});Xc.displayName="Route";var CI=w.createContext(null);CI.displayName="RouteError";function wce(t,{relative:e}={}){ai(a_(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=w.useContext(qc),{hash:i,pathname:s,search:a}=o_(t,{relative:e}),o=s;return n!=="/"&&(o=s==="/"?n:Yu([n,s])),r.createHref({pathname:o,search:a,hash:i})}function a_(){return w.useContext(s_)!=null}function bd(){return ai(a_(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(s_).location}var WX="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function qX(t){w.useContext(qc).static||w.useLayoutEffect(t)}function yl(){let{isDataRoute:t}=w.useContext(Xc);return t?Bce():Tce()}function Tce(){ai(a_(),"useNavigate() may be used only in the context of a <Router> component.");let t=w.useContext(lx),{basename:e,navigator:n}=w.useContext(qc),{matches:r}=w.useContext(Xc),{pathname:i}=bd(),s=JSON.stringify($X(r)),a=w.useRef(!1);return qX(()=>{a.current=!0}),w.useCallback((l,c={})=>{if(cl(a.current,WX),!a.current)return;if(typeof l=="number"){n.go(l);return}let u=GX(l,JSON.parse(s),i,c.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:Yu([e,u.pathname])),(c.replace?n.replace:n.push)(u,c.state,c)},[e,n,s,i,t])}w.createContext(null);function Ece(){let{matches:t}=w.useContext(Xc),e=t[t.length-1];return e?e.params:{}}function o_(t,{relative:e}={}){let{matches:n}=w.useContext(Xc),{pathname:r}=bd(),i=JSON.stringify($X(n));return w.useMemo(()=>GX(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function Cce(t,e){return XX(t,e)}function XX(t,e,n,r,i){ai(a_(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=w.useContext(qc),{matches:a}=w.useContext(Xc),o=a[a.length-1],l=o?o.params:{},c=o?o.pathname:"/",u=o?o.pathnameBase:"/",f=o&&o.route;{let E=f&&f.path||"";YX(c,!f||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let p=bd(),m;if(e){let E=typeof e=="string"?ox(e):e;ai(u==="/"||E.pathname?.startsWith(u),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${E.pathname}" was given in the \`location\` prop.`),m=E}else m=p;let x=m.pathname||"/",b=x;if(u!=="/"){let E=u.replace(/^\//,"").split("/");b="/"+x.replace(/^\//,"").split("/").slice(E.length).join("/")}let v=UX(t,{pathname:b});cl(f||v!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),cl(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=Nce(v&&v.map(E=>Object.assign({},E,{params:Object.assign({},l,E.params),pathname:Yu([u,s.encodeLocation?s.encodeLocation(E.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?u:Yu([u,s.encodeLocation?s.encodeLocation(E.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathnameBase])})),a,n,r,i);return e&&_?w.createElement(s_.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},_):_}function Ace(){let t=kce(),e=vce(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:s},"ErrorBoundary")," or"," ",w.createElement("code",{style:s},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),n?w.createElement("pre",{style:i},n):null,a)}var Mce=w.createElement(Ace,null),Rce=class extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?w.createElement(Xc.Provider,{value:this.props.routeContext},w.createElement(CI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Pce({routeContext:t,match:e,children:n}){let r=w.useContext(lx);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),w.createElement(Xc.Provider,{value:t},n)}function Nce(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,a=n?.errors;if(a!=null){let u=s.findIndex(f=>f.route.id&&a?.[f.route.id]!==void 0);ai(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,u+1))}let o=!1,l=-1;if(n)for(let u=0;u<s.length;u++){let f=s[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=u),f.route.id){let{loaderData:p,errors:m}=n,x=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!m||m[f.route.id]===void 0);if(f.route.lazy||x){o=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}let c=n&&r?(u,f)=>{r(u,{location:n.location,params:n.matches?.[0]?.params??{},errorInfo:f})}:void 0;return s.reduceRight((u,f,p)=>{let m,x=!1,b=null,v=null;n&&(m=a&&f.route.id?a[f.route.id]:void 0,b=f.route.errorElement||Mce,o&&(l<0&&p===0?(YX("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,v=null):l===p&&(x=!0,v=f.route.hydrateFallbackElement||null)));let _=e.concat(s.slice(0,p+1)),E=()=>{let T;return m?T=b:x?T=v:f.route.Component?T=w.createElement(f.route.Component,null):f.route.element?T=f.route.element:T=u,w.createElement(Pce,{match:f,routeContext:{outlet:u,matches:_,isDataRoute:n!=null},children:T})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?w.createElement(Rce,{location:n.location,revalidation:n.revalidation,component:b,error:m,children:E(),routeContext:{outlet:null,matches:_,isDataRoute:!0},onError:c}):E()},null)}function AI(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Oce(t){let e=w.useContext(lx);return ai(e,AI(t)),e}function Dce(t){let e=w.useContext(vE);return ai(e,AI(t)),e}function Lce(t){let e=w.useContext(Xc);return ai(e,AI(t)),e}function MI(t){let e=Lce(t),n=e.matches[e.matches.length-1];return ai(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Ice(){return MI("useRouteId")}function kce(){let t=w.useContext(CI),e=Dce("useRouteError"),n=MI("useRouteError");return t!==void 0?t:e.errors?.[n]}function Bce(){let{router:t}=Oce("useNavigate"),e=MI("useNavigate"),n=w.useRef(!1);return qX(()=>{n.current=!0}),w.useCallback(async(i,s={})=>{cl(n.current,WX),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var Qz={};function YX(t,e,n){!e&&!Qz[t]&&(Qz[t]=!0,cl(!1,n))}w.memo(Fce);function Fce({routes:t,future:e,state:n,unstable_onError:r}){return XX(t,void 0,n,r,e)}function ca(t){ai(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Uce({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){ai(!a_(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),o=w.useMemo(()=>({basename:a,navigator:i,static:s,future:{}}),[a,i,s]);typeof n=="string"&&(n=ox(n));let{pathname:l="/",search:c="",hash:u="",state:f=null,key:p="default"}=n,m=w.useMemo(()=>{let x=sd(l,a);return x==null?null:{location:{pathname:x,search:c,hash:u,state:f,key:p},navigationType:r}},[a,l,c,u,f,p,r]);return cl(m!=null,`<Router basename="${a}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:w.createElement(qc.Provider,{value:o},w.createElement(s_.Provider,{children:e,value:m}))}function jce({children:t,location:e}){return Cce($O(t),e)}function $O(t,e=[]){let n=[];return w.Children.forEach(t,(r,i)=>{if(!w.isValidElement(r))return;let s=[...e,i];if(r.type===w.Fragment){n.push.apply(n,$O(r.props.children,s));return}ai(r.type===ca,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ai(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=$O(r.props.children,s)),n.push(a)}),n}var fT="get",hT="application/x-www-form-urlencoded";function bE(t){return t!=null&&typeof t.tagName=="string"}function zce(t){return bE(t)&&t.tagName.toLowerCase()==="button"}function $ce(t){return bE(t)&&t.tagName.toLowerCase()==="form"}function Gce(t){return bE(t)&&t.tagName.toLowerCase()==="input"}function Vce(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Hce(t,e){return t.button===0&&(!e||e==="_self")&&!Vce(t)}function GO(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function Wce(t,e){let n=GO(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}var _S=null;function qce(){if(_S===null)try{new FormData(document.createElement("form"),0),_S=!1}catch{_S=!0}return _S}var Xce=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function WR(t){return t!=null&&!Xce.has(t)?(cl(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${hT}"`),null):t}function Yce(t,e){let n,r,i,s,a;if($ce(t)){let o=t.getAttribute("action");r=o?sd(o,e):null,n=t.getAttribute("method")||fT,i=WR(t.getAttribute("enctype"))||hT,s=new FormData(t)}else if(zce(t)||Gce(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||o.getAttribute("action");if(r=l?sd(l,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||fT,i=WR(t.getAttribute("formenctype"))||WR(o.getAttribute("enctype"))||hT,s=new FormData(o,t),!qce()){let{name:c,type:u,value:f}=t;if(u==="image"){let p=c?`${c}.`:"";s.append(`${p}x`,"0"),s.append(`${p}y`,"0")}else c&&s.append(c,f)}}else{if(bE(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=fT,r=null,i=hT,a=t}return s&&i==="text/plain"&&(a=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function RI(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Kce(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&sd(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function Zce(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Qce(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Jce(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let a=await Zce(s,n);return a.links?a.links():[]}return[]}));return rue(r.flat(1).filter(Qce).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Jz(t,e,n,r,i,s){let a=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,o=(l,c)=>n[c].pathname!==l.pathname||n[c].route.path?.endsWith("*")&&n[c].params["*"]!==l.params["*"];return s==="assets"?e.filter((l,c)=>a(l,c)||o(l,c)):s==="data"?e.filter((l,c)=>{let u=r.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(a(l,c)||o(l,c))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function eue(t,e,{includeHydrateFallback:n}={}){return tue(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function tue(t){return[...new Set(t)]}function nue(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function rue(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let s=JSON.stringify(nue(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function KX(){let t=w.useContext(lx);return RI(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function iue(){let t=w.useContext(vE);return RI(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var PI=w.createContext(void 0);PI.displayName="FrameworkContext";function ZX(){let t=w.useContext(PI);return RI(t,"You must render this element inside a <HydratedRouter> element"),t}function sue(t,e){let n=w.useContext(PI),[r,i]=w.useState(!1),[s,a]=w.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:f}=e,p=w.useRef(null);w.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let b=_=>{_.forEach(E=>{a(E.isIntersecting)})},v=new IntersectionObserver(b,{threshold:.5});return p.current&&v.observe(p.current),()=>{v.disconnect()}}},[t]),w.useEffect(()=>{if(r){let b=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(b)}}},[r]);let m=()=>{i(!0)},x=()=>{i(!1),a(!1)};return n?t!=="intent"?[s,p,{}]:[s,p,{onFocus:Ay(o,m),onBlur:Ay(l,x),onMouseEnter:Ay(c,m),onMouseLeave:Ay(u,x),onTouchStart:Ay(f,m)}]:[!1,p,{}]}function Ay(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function aue({page:t,...e}){let{router:n}=KX(),r=w.useMemo(()=>UX(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?w.createElement(lue,{page:t,matches:r,...e}):null}function oue(t){let{manifest:e,routeModules:n}=ZX(),[r,i]=w.useState([]);return w.useEffect(()=>{let s=!1;return Jce(t,e,n).then(a=>{s||i(a)}),()=>{s=!0}},[t,e,n]),r}function lue({page:t,matches:e,...n}){let r=bd(),{manifest:i,routeModules:s}=ZX(),{basename:a}=KX(),{loaderData:o,matches:l}=iue(),c=w.useMemo(()=>Jz(t,e,l,i,r,"data"),[t,e,l,i,r]),u=w.useMemo(()=>Jz(t,e,l,i,r,"assets"),[t,e,l,i,r]),f=w.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let x=new Set,b=!1;if(e.forEach(_=>{let E=i.routes[_.route.id];!E||!E.hasLoader||(!c.some(T=>T.route.id===_.route.id)&&_.route.id in o&&s[_.route.id]?.shouldRevalidate||E.hasClientLoader?b=!0:x.add(_.route.id))}),x.size===0)return[];let v=Kce(t,a,"data");return b&&x.size>0&&v.searchParams.set("_routes",e.filter(_=>x.has(_.route.id)).map(_=>_.route.id).join(",")),[v.pathname+v.search]},[a,o,r,i,c,e,t,s]),p=w.useMemo(()=>eue(u,i),[u,i]),m=oue(u);return w.createElement(w.Fragment,null,f.map(x=>w.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...n})),p.map(x=>w.createElement("link",{key:x,rel:"modulepreload",href:x,...n})),m.map(({key:x,link:b})=>w.createElement("link",{key:x,nonce:n.nonce,...b})))}function cue(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var QX=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{QX&&(window.__reactRouterVersion="7.9.6")}catch{}function uue({basename:t,children:e,window:n}){let r=w.useRef();r.current==null&&(r.current=Yle({window:n,v5Compat:!0}));let i=r.current,[s,a]=w.useState({action:i.action,location:i.location}),o=w.useCallback(l=>{w.startTransition(()=>a(l))},[a]);return w.useLayoutEffect(()=>i.listen(o),[i,o]),w.createElement(Uce,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:i})}var JX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,eY=w.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:a,state:o,target:l,to:c,preventScrollReset:u,viewTransition:f,...p},m){let{basename:x}=w.useContext(qc),b=typeof c=="string"&&JX.test(c),v,_=!1;if(typeof c=="string"&&b&&(v=c,QX))try{let N=new URL(window.location.href),L=c.startsWith("//")?new URL(N.protocol+c):new URL(c),k=sd(L.pathname,x);L.origin===N.origin&&k!=null?c=k+L.search+L.hash:_=!0}catch{cl(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=wce(c,{relative:i}),[T,A,C]=sue(r,p),M=pue(c,{replace:a,state:o,target:l,preventScrollReset:u,relative:i,viewTransition:f});function P(N){e&&e(N),N.defaultPrevented||M(N)}let D=w.createElement("a",{...p,...C,href:v||E,onClick:_||s?e:P,ref:cue(m,A),target:l,"data-discover":!b&&n==="render"?"true":void 0});return T&&!b?w.createElement(w.Fragment,null,D,w.createElement(aue,{page:E})):D});eY.displayName="Link";var due=w.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:a,viewTransition:o,children:l,...c},u){let f=o_(a,{relative:c.relative}),p=bd(),m=w.useContext(vE),{navigator:x,basename:b}=w.useContext(qc),v=m!=null&&vue(f)&&o===!0,_=x.encodeLocation?x.encodeLocation(f).pathname:f.pathname,E=p.pathname,T=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;n||(E=E.toLowerCase(),T=T?T.toLowerCase():null,_=_.toLowerCase()),T&&b&&(T=sd(T,b)||T);const A=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let C=E===_||!i&&E.startsWith(_)&&E.charAt(A)==="/",M=T!=null&&(T===_||!i&&T.startsWith(_)&&T.charAt(_.length)==="/"),P={isActive:C,isPending:M,isTransitioning:v},D=C?e:void 0,N;typeof r=="function"?N=r(P):N=[r,C?"active":null,M?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let L=typeof s=="function"?s(P):s;return w.createElement(eY,{...c,"aria-current":D,className:N,ref:u,style:L,to:a,viewTransition:o},typeof l=="function"?l(P):l)});due.displayName="NavLink";var fue=w.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:a=fT,action:o,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:f,...p},m)=>{let x=xue(),b=yue(o,{relative:c}),v=a.toLowerCase()==="get"?"get":"post",_=typeof o=="string"&&JX.test(o),E=T=>{if(l&&l(T),T.defaultPrevented)return;T.preventDefault();let A=T.nativeEvent.submitter,C=A?.getAttribute("formmethod")||a;x(A||T.currentTarget,{fetcherKey:e,method:C,navigate:n,replace:i,state:s,relative:c,preventScrollReset:u,viewTransition:f})};return w.createElement("form",{ref:m,method:v,action:b,onSubmit:r?l:E,...p,"data-discover":!_&&t==="render"?"true":void 0})});fue.displayName="Form";function hue(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tY(t){let e=w.useContext(lx);return ai(e,hue(t)),e}function pue(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:a}={}){let o=yl(),l=bd(),c=o_(t,{relative:s});return w.useCallback(u=>{if(Hce(u,e)){u.preventDefault();let f=n!==void 0?n:ob(l)===ob(c);o(t,{replace:f,state:r,preventScrollReset:i,relative:s,viewTransition:a})}},[l,o,c,n,r,e,t,i,s,a])}function _E(t){cl(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=w.useRef(GO(t)),n=w.useRef(!1),r=bd(),i=w.useMemo(()=>Wce(r.search,n.current?null:e.current),[r.search]),s=yl(),a=w.useCallback((o,l)=>{const c=GO(typeof o=="function"?o(new URLSearchParams(i)):o);n.current=!0,s("?"+c,l)},[s,i]);return[i,a]}var mue=0,gue=()=>`__${String(++mue)}__`;function xue(){let{router:t}=tY("useSubmit"),{basename:e}=w.useContext(qc),n=Ice();return w.useCallback(async(r,i={})=>{let{action:s,method:a,encType:o,formData:l,body:c}=Yce(r,e);if(i.navigate===!1){let u=i.fetcherKey||gue();await t.fetch(u,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||a,formEncType:i.encType||o,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||a,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function yue(t,{relative:e}={}){let{basename:n}=w.useContext(qc),r=w.useContext(Xc);ai(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...o_(t||".",{relative:e})},a=bd();if(t==null){s.search=a.search;let o=new URLSearchParams(s.search),l=o.getAll("index");if(l.some(u=>u==="")){o.delete("index"),l.filter(f=>f).forEach(f=>o.append("index",f));let u=o.toString();s.search=u?`?${u}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Yu([n,s.pathname])),ob(s)}function vue(t,{relative:e}={}){let n=w.useContext(HX);ai(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=tY("useViewTransitionState"),i=o_(t,{relative:e});if(!n.isTransitioning)return!1;let s=sd(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=sd(n.nextLocation.pathname,r)||n.nextLocation.pathname;return jT(i.pathname,a)!=null||jT(i.pathname,s)!=null}var cx=FX();const SS=Ea(cx);function ad(t,...e){const n=new URL(`https://mui.com/production-error/?code=${t}`);return e.forEach(r=>n.searchParams.append("args[]",r)),`Minified MUI error #${t}; visit ${n} for the full message.`}const Hl="$$material";function ra(){return ra=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ra.apply(null,arguments)}function bue(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function _ue(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var Sue=(function(){function t(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(_ue(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=bue(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},t})(),Hs="-ms-",zT="-moz-",Jn="-webkit-",nY="comm",NI="rule",OI="decl",wue="@import",rY="@keyframes",Tue="@layer",Eue=Math.abs,SE=String.fromCharCode,Cue=Object.assign;function Aue(t,e){return Ds(t,0)^45?(((e<<2^Ds(t,0))<<2^Ds(t,1))<<2^Ds(t,2))<<2^Ds(t,3):0}function iY(t){return t.trim()}function Mue(t,e){return(t=e.exec(t))?t[0]:t}function tr(t,e,n){return t.replace(e,n)}function VO(t,e){return t.indexOf(e)}function Ds(t,e){return t.charCodeAt(e)|0}function lb(t,e,n){return t.slice(e,n)}function Sc(t){return t.length}function DI(t){return t.length}function wS(t,e){return e.push(t),t}function Rue(t,e){return t.map(e).join("")}var wE=1,Yg=1,sY=0,Ya=0,ji=0,ux="";function TE(t,e,n,r,i,s,a){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:wE,column:Yg,length:a,return:""}}function My(t,e){return Cue(TE("",null,null,"",null,null,0),t,{length:-t.length},e)}function Pue(){return ji}function Nue(){return ji=Ya>0?Ds(ux,--Ya):0,Yg--,ji===10&&(Yg=1,wE--),ji}function So(){return ji=Ya<sY?Ds(ux,Ya++):0,Yg++,ji===10&&(Yg=1,wE++),ji}function Oc(){return Ds(ux,Ya)}function pT(){return Ya}function l_(t,e){return lb(ux,t,e)}function cb(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function aY(t){return wE=Yg=1,sY=Sc(ux=t),Ya=0,[]}function oY(t){return ux="",t}function mT(t){return iY(l_(Ya-1,HO(t===91?t+2:t===40?t+1:t)))}function Oue(t){for(;(ji=Oc())&&ji<33;)So();return cb(t)>2||cb(ji)>3?"":" "}function Due(t,e){for(;--e&&So()&&!(ji<48||ji>102||ji>57&&ji<65||ji>70&&ji<97););return l_(t,pT()+(e<6&&Oc()==32&&So()==32))}function HO(t){for(;So();)switch(ji){case t:return Ya;case 34:case 39:t!==34&&t!==39&&HO(ji);break;case 40:t===41&&HO(t);break;case 92:So();break}return Ya}function Lue(t,e){for(;So()&&t+ji!==57;)if(t+ji===84&&Oc()===47)break;return"/*"+l_(e,Ya-1)+"*"+SE(t===47?t:So())}function Iue(t){for(;!cb(Oc());)So();return l_(t,Ya)}function kue(t){return oY(gT("",null,null,null,[""],t=aY(t),0,[0],t))}function gT(t,e,n,r,i,s,a,o,l){for(var c=0,u=0,f=a,p=0,m=0,x=0,b=1,v=1,_=1,E=0,T="",A=i,C=s,M=r,P=T;v;)switch(x=E,E=So()){case 40:if(x!=108&&Ds(P,f-1)==58){VO(P+=tr(mT(E),"&","&\f"),"&\f")!=-1&&(_=-1);break}case 34:case 39:case 91:P+=mT(E);break;case 9:case 10:case 13:case 32:P+=Oue(x);break;case 92:P+=Due(pT()-1,7);continue;case 47:switch(Oc()){case 42:case 47:wS(Bue(Lue(So(),pT()),e,n),l);break;default:P+="/"}break;case 123*b:o[c++]=Sc(P)*_;case 125*b:case 59:case 0:switch(E){case 0:case 125:v=0;case 59+u:_==-1&&(P=tr(P,/\f/g,"")),m>0&&Sc(P)-f&&wS(m>32?t6(P+";",r,n,f-1):t6(tr(P," ","")+";",r,n,f-2),l);break;case 59:P+=";";default:if(wS(M=e6(P,e,n,c,u,i,o,T,A=[],C=[],f),s),E===123)if(u===0)gT(P,e,M,M,A,s,f,o,C);else switch(p===99&&Ds(P,3)===110?100:p){case 100:case 108:case 109:case 115:gT(t,M,M,r&&wS(e6(t,M,M,0,0,i,o,T,i,A=[],f),C),i,C,f,o,r?A:C);break;default:gT(P,M,M,M,[""],C,0,o,C)}}c=u=m=0,b=_=1,T=P="",f=a;break;case 58:f=1+Sc(P),m=x;default:if(b<1){if(E==123)--b;else if(E==125&&b++==0&&Nue()==125)continue}switch(P+=SE(E),E*b){case 38:_=u>0?1:(P+="\f",-1);break;case 44:o[c++]=(Sc(P)-1)*_,_=1;break;case 64:Oc()===45&&(P+=mT(So())),p=Oc(),u=f=Sc(T=P+=Iue(pT())),E++;break;case 45:x===45&&Sc(P)==2&&(b=0)}}return s}function e6(t,e,n,r,i,s,a,o,l,c,u){for(var f=i-1,p=i===0?s:[""],m=DI(p),x=0,b=0,v=0;x<r;++x)for(var _=0,E=lb(t,f+1,f=Eue(b=a[x])),T=t;_<m;++_)(T=iY(b>0?p[_]+" "+E:tr(E,/&\f/g,p[_])))&&(l[v++]=T);return TE(t,e,n,i===0?NI:o,l,c,u)}function Bue(t,e,n){return TE(t,e,n,nY,SE(Pue()),lb(t,2,-2),0)}function t6(t,e,n,r){return TE(t,e,n,OI,lb(t,0,r),lb(t,r+1,-1),r)}function Dg(t,e){for(var n="",r=DI(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function Fue(t,e,n,r){switch(t.type){case Tue:if(t.children.length)break;case wue:case OI:return t.return=t.return||t.value;case nY:return"";case rY:return t.return=t.value+"{"+Dg(t.children,r)+"}";case NI:t.value=t.props.join(",")}return Sc(n=Dg(t.children,r))?t.return=t.value+"{"+n+"}":""}function Uue(t){var e=DI(t);return function(n,r,i,s){for(var a="",o=0;o<e;o++)a+=t[o](n,r,i,s)||"";return a}}function jue(t){return function(e){e.root||(e=e.return)&&t(e)}}function lY(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var zue=function(e,n,r){for(var i=0,s=0;i=s,s=Oc(),i===38&&s===12&&(n[r]=1),!cb(s);)So();return l_(e,Ya)},$ue=function(e,n){var r=-1,i=44;do switch(cb(i)){case 0:i===38&&Oc()===12&&(n[r]=1),e[r]+=zue(Ya-1,n,r);break;case 2:e[r]+=mT(i);break;case 4:if(i===44){e[++r]=Oc()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=SE(i)}while(i=So());return e},Gue=function(e,n){return oY($ue(aY(e),n))},n6=new WeakMap,Vue=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!n6.get(r))&&!i){n6.set(e,!0);for(var s=[],a=Gue(n,s),o=r.props,l=0,c=0;l<a.length;l++)for(var u=0;u<o.length;u++,c++)e.props[c]=s[l]?a[l].replace(/&\f/g,o[u]):o[u]+" "+a[l]}}},Hue=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function cY(t,e){switch(Aue(t,e)){case 5103:return Jn+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Jn+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Jn+t+zT+t+Hs+t+t;case 6828:case 4268:return Jn+t+Hs+t+t;case 6165:return Jn+t+Hs+"flex-"+t+t;case 5187:return Jn+t+tr(t,/(\w+).+(:[^]+)/,Jn+"box-$1$2"+Hs+"flex-$1$2")+t;case 5443:return Jn+t+Hs+"flex-item-"+tr(t,/flex-|-self/,"")+t;case 4675:return Jn+t+Hs+"flex-line-pack"+tr(t,/align-content|flex-|-self/,"")+t;case 5548:return Jn+t+Hs+tr(t,"shrink","negative")+t;case 5292:return Jn+t+Hs+tr(t,"basis","preferred-size")+t;case 6060:return Jn+"box-"+tr(t,"-grow","")+Jn+t+Hs+tr(t,"grow","positive")+t;case 4554:return Jn+tr(t,/([^-])(transform)/g,"$1"+Jn+"$2")+t;case 6187:return tr(tr(tr(t,/(zoom-|grab)/,Jn+"$1"),/(image-set)/,Jn+"$1"),t,"")+t;case 5495:case 3959:return tr(t,/(image-set\([^]*)/,Jn+"$1$`$1");case 4968:return tr(tr(t,/(.+:)(flex-)?(.*)/,Jn+"box-pack:$3"+Hs+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Jn+t+t;case 4095:case 3583:case 4068:case 2532:return tr(t,/(.+)-inline(.+)/,Jn+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Sc(t)-1-e>6)switch(Ds(t,e+1)){case 109:if(Ds(t,e+4)!==45)break;case 102:return tr(t,/(.+:)(.+)-([^]+)/,"$1"+Jn+"$2-$3$1"+zT+(Ds(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~VO(t,"stretch")?cY(tr(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Ds(t,e+1)!==115)break;case 6444:switch(Ds(t,Sc(t)-3-(~VO(t,"!important")&&10))){case 107:return tr(t,":",":"+Jn)+t;case 101:return tr(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Jn+(Ds(t,14)===45?"inline-":"")+"box$3$1"+Jn+"$2$3$1"+Hs+"$2box$3")+t}break;case 5936:switch(Ds(t,e+11)){case 114:return Jn+t+Hs+tr(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Jn+t+Hs+tr(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Jn+t+Hs+tr(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Jn+t+Hs+t+t}return t}var Wue=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case OI:e.return=cY(e.value,e.length);break;case rY:return Dg([My(e,{value:tr(e.value,"@","@"+Jn)})],i);case NI:if(e.length)return Rue(e.props,function(s){switch(Mue(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Dg([My(e,{props:[tr(s,/:(read-\w+)/,":"+zT+"$1")]})],i);case"::placeholder":return Dg([My(e,{props:[tr(s,/:(plac\w+)/,":"+Jn+"input-$1")]}),My(e,{props:[tr(s,/:(plac\w+)/,":"+zT+"$1")]}),My(e,{props:[tr(s,/:(plac\w+)/,Hs+"input-$1")]})],i)}return""})}},que=[Wue],Xue=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(b){var v=b.getAttribute("data-emotion");v.indexOf(" ")!==-1&&(document.head.appendChild(b),b.setAttribute("data-s",""))})}var i=e.stylisPlugins||que,s={},a,o=[];a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(b){for(var v=b.getAttribute("data-emotion").split(" "),_=1;_<v.length;_++)s[v[_]]=!0;o.push(b)});var l,c=[Vue,Hue];{var u,f=[Fue,jue(function(b){u.insert(b)})],p=Uue(c.concat(i,f)),m=function(v){return Dg(kue(v),p)};l=function(v,_,E,T){u=E,m(v?v+"{"+_.styles+"}":_.styles),T&&(x.inserted[_.name]=!0)}}var x={key:n,sheet:new Sue({key:n,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return x.sheet.hydrate(o),x},qR={exports:{}},or={};var r6;function Yue(){if(r6)return or;r6=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,r=t?Symbol.for("react.fragment"):60107,i=t?Symbol.for("react.strict_mode"):60108,s=t?Symbol.for("react.profiler"):60114,a=t?Symbol.for("react.provider"):60109,o=t?Symbol.for("react.context"):60110,l=t?Symbol.for("react.async_mode"):60111,c=t?Symbol.for("react.concurrent_mode"):60111,u=t?Symbol.for("react.forward_ref"):60112,f=t?Symbol.for("react.suspense"):60113,p=t?Symbol.for("react.suspense_list"):60120,m=t?Symbol.for("react.memo"):60115,x=t?Symbol.for("react.lazy"):60116,b=t?Symbol.for("react.block"):60121,v=t?Symbol.for("react.fundamental"):60117,_=t?Symbol.for("react.responder"):60118,E=t?Symbol.for("react.scope"):60119;function T(C){if(typeof C=="object"&&C!==null){var M=C.$$typeof;switch(M){case e:switch(C=C.type,C){case l:case c:case r:case s:case i:case f:return C;default:switch(C=C&&C.$$typeof,C){case o:case u:case x:case m:case a:return C;default:return M}}case n:return M}}}function A(C){return T(C)===c}return or.AsyncMode=l,or.ConcurrentMode=c,or.ContextConsumer=o,or.ContextProvider=a,or.Element=e,or.ForwardRef=u,or.Fragment=r,or.Lazy=x,or.Memo=m,or.Portal=n,or.Profiler=s,or.StrictMode=i,or.Suspense=f,or.isAsyncMode=function(C){return A(C)||T(C)===l},or.isConcurrentMode=A,or.isContextConsumer=function(C){return T(C)===o},or.isContextProvider=function(C){return T(C)===a},or.isElement=function(C){return typeof C=="object"&&C!==null&&C.$$typeof===e},or.isForwardRef=function(C){return T(C)===u},or.isFragment=function(C){return T(C)===r},or.isLazy=function(C){return T(C)===x},or.isMemo=function(C){return T(C)===m},or.isPortal=function(C){return T(C)===n},or.isProfiler=function(C){return T(C)===s},or.isStrictMode=function(C){return T(C)===i},or.isSuspense=function(C){return T(C)===f},or.isValidElementType=function(C){return typeof C=="string"||typeof C=="function"||C===r||C===c||C===s||C===i||C===f||C===p||typeof C=="object"&&C!==null&&(C.$$typeof===x||C.$$typeof===m||C.$$typeof===a||C.$$typeof===o||C.$$typeof===u||C.$$typeof===v||C.$$typeof===_||C.$$typeof===E||C.$$typeof===b)},or.typeOf=T,or}var i6;function Kue(){return i6||(i6=1,qR.exports=Yue()),qR.exports}var XR,s6;function Zue(){if(s6)return XR;s6=1;var t=Kue(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[t.ForwardRef]=r,s[t.Memo]=i;function a(x){return t.isMemo(x)?i:s[x.$$typeof]||e}var o=Object.defineProperty,l=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;function m(x,b,v){if(typeof b!="string"){if(p){var _=f(b);_&&_!==p&&m(x,_,v)}var E=l(b);c&&(E=E.concat(c(b)));for(var T=a(x),A=a(b),C=0;C<E.length;++C){var M=E[C];if(!n[M]&&!(v&&v[M])&&!(A&&A[M])&&!(T&&T[M])){var P=u(b,M);try{o(x,M,P)}catch{}}}}return x}return XR=m,XR}Zue();var Que=!0;function uY(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):i&&(r+=i+" ")}),r}var LI=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||Que===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},II=function(e,n,r){LI(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function Jue(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var ede={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},tde=/[A-Z]|^ms/g,nde=/_EMO_([^_]+?)_([^]*?)_EMO_/g,dY=function(e){return e.charCodeAt(1)===45},a6=function(e){return e!=null&&typeof e!="boolean"},YR=lY(function(t){return dY(t)?t:t.replace(tde,"-$&").toLowerCase()}),o6=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(nde,function(r,i,s){return wc={name:i,styles:s,next:wc},i})}return ede[e]!==1&&!dY(e)&&typeof n=="number"&&n!==0?n+"px":n};function ub(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return wc={name:i.name,styles:i.styles,next:wc},i.name;var s=n;if(s.styles!==void 0){var a=s.next;if(a!==void 0)for(;a!==void 0;)wc={name:a.name,styles:a.styles,next:wc},a=a.next;var o=s.styles+";";return o}return rde(t,e,n)}case"function":{if(t!==void 0){var l=wc,c=n(t);return wc=l,ub(t,e,c)}break}}var u=n;if(e==null)return u;var f=e[u];return f!==void 0?f:u}function rde(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=ub(t,e,n[i])+";";else for(var s in n){var a=n[s];if(typeof a!="object"){var o=a;e!=null&&e[o]!==void 0?r+=s+"{"+e[o]+"}":a6(o)&&(r+=YR(s)+":"+o6(s,o)+";")}else if(Array.isArray(a)&&typeof a[0]=="string"&&(e==null||e[a[0]]===void 0))for(var l=0;l<a.length;l++)a6(a[l])&&(r+=YR(s)+":"+o6(s,a[l])+";");else{var c=ub(t,e,a);switch(s){case"animation":case"animationName":{r+=YR(s)+":"+c+";";break}default:r+=s+"{"+c+"}"}}}return r}var l6=/label:\s*([^\s;{]+)\s*(;|$)/g,wc;function c_(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,i="";wc=void 0;var s=t[0];if(s==null||s.raw===void 0)r=!1,i+=ub(n,e,s);else{var a=s;i+=a[0]}for(var o=1;o<t.length;o++)if(i+=ub(n,e,t[o]),r){var l=s;i+=l[o]}l6.lastIndex=0;for(var c="",u;(u=l6.exec(i))!==null;)c+="-"+u[1];var f=Jue(i)+c;return{name:f,styles:i,next:wc}}var ide=function(e){return e()},fY=ab.useInsertionEffect?ab.useInsertionEffect:!1,hY=fY||ide,c6=fY||w.useLayoutEffect,pY=w.createContext(typeof HTMLElement<"u"?Xue({key:"css"}):null);pY.Provider;var kI=function(e){return w.forwardRef(function(n,r){var i=w.useContext(pY);return e(n,i,r)})},u_=w.createContext({}),BI={}.hasOwnProperty,WO="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",sde=function(e,n){var r={};for(var i in n)BI.call(n,i)&&(r[i]=n[i]);return r[WO]=e,r},ade=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return LI(n,r,i),hY(function(){return II(n,r,i)}),null},ode=kI(function(t,e,n){var r=t.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var i=t[WO],s=[r],a="";typeof t.className=="string"?a=uY(e.registered,s,t.className):t.className!=null&&(a=t.className+" ");var o=c_(s,void 0,w.useContext(u_));a+=e.key+"-"+o.name;var l={};for(var c in t)BI.call(t,c)&&c!=="css"&&c!==WO&&(l[c]=t[c]);return l.className=a,n&&(l.ref=n),w.createElement(w.Fragment,null,w.createElement(ade,{cache:e,serialized:o,isStringTag:typeof i=="string"}),w.createElement(i,l))}),lde=ode,u6=function(e,n){var r=arguments;if(n==null||!BI.call(n,"css"))return w.createElement.apply(void 0,r);var i=r.length,s=new Array(i);s[0]=lde,s[1]=sde(e,n);for(var a=2;a<i;a++)s[a]=r[a];return w.createElement.apply(null,s)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(u6||(u6={}));var cde=kI(function(t,e){var n=t.styles,r=c_([n],void 0,w.useContext(u_)),i=w.useRef();return c6(function(){var s=e.key+"-global",a=new e.sheet.constructor({key:s,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),o=!1,l=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return e.sheet.tags.length&&(a.before=e.sheet.tags[0]),l!==null&&(o=!0,l.setAttribute("data-emotion",s),a.hydrate([l])),i.current=[a,o],function(){a.flush()}},[e]),c6(function(){var s=i.current,a=s[0],o=s[1];if(o){s[1]=!1;return}if(r.next!==void 0&&II(e,r.next,!0),a.tags.length){var l=a.tags[a.tags.length-1].nextElementSibling;a.before=l,a.flush()}e.insert("",r,a,!1)},[e,r.name]),null});function dx(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return c_(e)}function Hf(){var t=dx.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var ude=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,dde=lY(function(t){return ude.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),fde=dde,hde=function(e){return e!=="theme"},d6=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?fde:hde},f6=function(e,n,r){var i;if(n){var s=n.shouldForwardProp;i=e.__emotion_forwardProp&&s?function(a){return e.__emotion_forwardProp(a)&&s(a)}:s}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},pde=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return LI(n,r,i),hY(function(){return II(n,r,i)}),null},mde=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,s,a;n!==void 0&&(s=n.label,a=n.target);var o=f6(e,n,r),l=o||d6(i),c=!l("as");return function(){var u=arguments,f=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&f.push("label:"+s+";"),u[0]==null||u[0].raw===void 0)f.push.apply(f,u);else{var p=u[0];f.push(p[0]);for(var m=u.length,x=1;x<m;x++)f.push(u[x],p[x])}var b=kI(function(v,_,E){var T=c&&v.as||i,A="",C=[],M=v;if(v.theme==null){M={};for(var P in v)M[P]=v[P];M.theme=w.useContext(u_)}typeof v.className=="string"?A=uY(_.registered,C,v.className):v.className!=null&&(A=v.className+" ");var D=c_(f.concat(C),_.registered,M);A+=_.key+"-"+D.name,a!==void 0&&(A+=" "+a);var N=c&&o===void 0?d6(T):l,L={};for(var k in v)c&&k==="as"||N(k)&&(L[k]=v[k]);return L.className=A,E&&(L.ref=E),w.createElement(w.Fragment,null,w.createElement(pde,{cache:_,serialized:D,isStringTag:typeof T=="string"}),w.createElement(T,L))});return b.displayName=s!==void 0?s:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",b.defaultProps=e.defaultProps,b.__emotion_real=b,b.__emotion_base=i,b.__emotion_styles=f,b.__emotion_forwardProp=o,Object.defineProperty(b,"toString",{value:function(){return"."+a}}),b.withComponent=function(v,_){var E=t(v,ra({},n,_,{shouldForwardProp:f6(b,_,!0)}));return E.apply(void 0,f)},b}},gde=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],qO=mde.bind(null);gde.forEach(function(t){qO[t]=qO(t)});var KR={exports:{}},ZR,h6;function xde(){if(h6)return ZR;h6=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ZR=t,ZR}var QR,p6;function yde(){if(p6)return QR;p6=1;var t=xde();function e(){}function n(){}return n.resetWarningCache=e,QR=function(){function r(a,o,l,c,u,f){if(f!==t){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return s.PropTypes=s,s},QR}var m6;function vde(){return m6||(m6=1,KR.exports=yde()()),KR.exports}var bde=vde();const ye=Ea(bde);function _de(t){return t==null||Object.keys(t).length===0}function mY(t){const{styles:e,defaultTheme:n={}}=t,r=typeof e=="function"?i=>e(_de(i)?n:i):e;return g.jsx(cde,{styles:r})}function gY(t,e){return qO(t,e)}function Sde(t,e){Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))}const g6=[];function wf(t){return g6[0]=t,c_(g6)}var JR={exports:{}},yr={};var x6;function wde(){if(x6)return yr;x6=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.for("react.view_transition"),m=Symbol.for("react.client.reference");function x(b){if(typeof b=="object"&&b!==null){var v=b.$$typeof;switch(v){case t:switch(b=b.type,b){case n:case i:case r:case l:case c:case p:return b;default:switch(b=b&&b.$$typeof,b){case a:case o:case f:case u:return b;case s:return b;default:return v}}case e:return v}}}return yr.ContextConsumer=s,yr.ContextProvider=a,yr.Element=t,yr.ForwardRef=o,yr.Fragment=n,yr.Lazy=f,yr.Memo=u,yr.Portal=e,yr.Profiler=i,yr.StrictMode=r,yr.Suspense=l,yr.SuspenseList=c,yr.isContextConsumer=function(b){return x(b)===s},yr.isContextProvider=function(b){return x(b)===a},yr.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===t},yr.isForwardRef=function(b){return x(b)===o},yr.isFragment=function(b){return x(b)===n},yr.isLazy=function(b){return x(b)===f},yr.isMemo=function(b){return x(b)===u},yr.isPortal=function(b){return x(b)===e},yr.isProfiler=function(b){return x(b)===i},yr.isStrictMode=function(b){return x(b)===r},yr.isSuspense=function(b){return x(b)===l},yr.isSuspenseList=function(b){return x(b)===c},yr.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===n||b===i||b===r||b===l||b===c||typeof b=="object"&&b!==null&&(b.$$typeof===f||b.$$typeof===u||b.$$typeof===a||b.$$typeof===s||b.$$typeof===o||b.$$typeof===m||b.getModuleId!==void 0)},yr.typeOf=x,yr}var y6;function Tde(){return y6||(y6=1,JR.exports=wde()),JR.exports}var FI=Tde();function Ec(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function xY(t){if(w.isValidElement(t)||FI.isValidElementType(t)||!Ec(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=xY(t[n])}),e}function ea(t,e,n={clone:!0}){const r=n.clone?{...t}:t;return Ec(t)&&Ec(e)&&Object.keys(e).forEach(i=>{w.isValidElement(e[i])||FI.isValidElementType(e[i])?r[i]=e[i]:Ec(e[i])&&Object.prototype.hasOwnProperty.call(t,i)&&Ec(t[i])?r[i]=ea(t[i],e[i],n):n.clone?r[i]=Ec(e[i])?xY(e[i]):e[i]:r[i]=e[i]}),r}const Ede=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>({...n,[r.key]:r.val}),{})};function Cde(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...i}=t,s=Ede(e),a=Object.keys(s);function o(p){return`@media (min-width:${typeof e[p]=="number"?e[p]:p}${n})`}function l(p){return`@media (max-width:${(typeof e[p]=="number"?e[p]:p)-r/100}${n})`}function c(p,m){const x=a.indexOf(m);return`@media (min-width:${typeof e[p]=="number"?e[p]:p}${n}) and (max-width:${(x!==-1&&typeof e[a[x]]=="number"?e[a[x]]:m)-r/100}${n})`}function u(p){return a.indexOf(p)+1<a.length?c(p,a[a.indexOf(p)+1]):o(p)}function f(p){const m=a.indexOf(p);return m===0?o(a[1]):m===a.length-1?l(a[m]):c(p,a[a.indexOf(p)+1]).replace("@media","@media not all and")}return{keys:a,values:s,up:o,down:l,between:c,only:u,not:f,unit:n,...i}}function v6(t,e){if(!t.containerQueries)return e;const n=Object.keys(e).filter(r=>r.startsWith("@container")).sort((r,i)=>{const s=/min-width:\s*([0-9.]+)/;return+(r.match(s)?.[1]||0)-+(i.match(s)?.[1]||0)});return n.length?n.reduce((r,i)=>{const s=e[i];return delete r[i],r[i]=s,r},{...e}):e}function Ade(t,e){return e==="@"||e.startsWith("@")&&(t.some(n=>e.startsWith(`@${n}`))||!!e.match(/^@\d/))}function Mde(t,e){const n=e.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,i]=n,s=Number.isNaN(+r)?r||0:+r;return t.containerQueries(i).up(s)}function Rde(t){const e=(s,a)=>s.replace("@media",a?`@container ${a}`:"@container");function n(s,a){s.up=(...o)=>e(t.breakpoints.up(...o),a),s.down=(...o)=>e(t.breakpoints.down(...o),a),s.between=(...o)=>e(t.breakpoints.between(...o),a),s.only=(...o)=>e(t.breakpoints.only(...o),a),s.not=(...o)=>{const l=e(t.breakpoints.not(...o),a);return l.includes("not all and")?l.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):l}}const r={},i=s=>(n(r,s),r);return n(i),{...t,containerQueries:i}}const Pde={borderRadius:4};function Bv(t,e){return e?ea(t,e,{clone:!1}):t}const EE={xs:0,sm:600,md:900,lg:1200,xl:1536},b6={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${EE[t]}px)`},Nde={containerQueries:t=>({up:e=>{let n=typeof e=="number"?e:EE[e]||e;return typeof n=="number"&&(n=`${n}px`),t?`@container ${t} (min-width:${n})`:`@container (min-width:${n})`}})};function od(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const s=r.breakpoints||b6;return e.reduce((a,o,l)=>(a[s.up(s.keys[l])]=n(e[l]),a),{})}if(typeof e=="object"){const s=r.breakpoints||b6;return Object.keys(e).reduce((a,o)=>{if(Ade(s.keys,o)){const l=Mde(r.containerQueries?r:Nde,o);l&&(a[l]=n(e[o],o))}else if(Object.keys(s.values||EE).includes(o)){const l=s.up(o);a[l]=n(e[o],o)}else{const l=o;a[l]=e[l]}return a},{})}return n(e)}function Ode(t={}){return t.keys?.reduce((n,r)=>{const i=t.up(r);return n[i]={},n},{})||{}}function _6(t,e){return t.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},e)}function Re(t){if(typeof t!="string")throw new Error(ad(7));return t.charAt(0).toUpperCase()+t.slice(1)}function CE(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((i,s)=>i&&i[s]?i[s]:null,t);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function $T(t,e,n,r=n){let i;return typeof t=="function"?i=t(n):Array.isArray(t)?i=t[n]||r:i=CE(t,n)||r,e&&(i=e(i,r,t)),i}function Ni(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,s=a=>{if(a[e]==null)return null;const o=a[e],l=a.theme,c=CE(l,r)||{};return od(a,o,f=>{let p=$T(c,i,f);return f===p&&typeof f=="string"&&(p=$T(c,i,`${e}${f==="default"?"":Re(f)}`,f)),n===!1?p:{[n]:p}})};return s.propTypes={},s.filterProps=[e],s}function Dde(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const Lde={m:"margin",p:"padding"},Ide={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},S6={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},kde=Dde(t=>{if(t.length>2)if(S6[t])t=S6[t];else return[t];const[e,n]=t.split(""),r=Lde[e],i=Ide[n]||"";return Array.isArray(i)?i.map(s=>r+s):[r+i]}),UI=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],jI=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...UI,...jI];function d_(t,e,n,r){const i=CE(t,e,!0)??n;return typeof i=="number"||typeof i=="string"?s=>typeof s=="string"?s:typeof i=="string"?i.startsWith("var(")&&s===0?0:i.startsWith("var(")&&s===1?i:`calc(${s} * ${i})`:i*s:Array.isArray(i)?s=>{if(typeof s=="string")return s;const a=Math.abs(s),o=i[a];return s>=0?o:typeof o=="number"?-o:typeof o=="string"&&o.startsWith("var(")?`calc(-1 * ${o})`:`-${o}`}:typeof i=="function"?i:()=>{}}function zI(t){return d_(t,"spacing",8)}function f_(t,e){return typeof e=="string"||e==null?e:t(e)}function Bde(t,e){return n=>t.reduce((r,i)=>(r[i]=f_(e,n),r),{})}function Fde(t,e,n,r){if(!e.includes(n))return null;const i=kde(n),s=Bde(i,r),a=t[n];return od(t,a,s)}function yY(t,e){const n=zI(t.theme);return Object.keys(t).map(r=>Fde(t,e,r,n)).reduce(Bv,{})}function ui(t){return yY(t,UI)}ui.propTypes={};ui.filterProps=UI;function di(t){return yY(t,jI)}di.propTypes={};di.filterProps=jI;function vY(t=8,e=zI({spacing:t})){if(t.mui)return t;const n=(...r)=>(r.length===0?[1]:r).map(s=>{const a=e(s);return typeof a=="number"?`${a}px`:a}).join(" ");return n.mui=!0,n}function AE(...t){const e=t.reduce((r,i)=>(i.filterProps.forEach(s=>{r[s]=i}),r),{}),n=r=>Object.keys(r).reduce((i,s)=>e[s]?Bv(i,e[s](r)):i,{});return n.propTypes={},n.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),n}function Qo(t){return typeof t!="number"?t:`${t}px solid`}function vl(t,e){return Ni({prop:t,themeKey:"borders",transform:e})}const Ude=vl("border",Qo),jde=vl("borderTop",Qo),zde=vl("borderRight",Qo),$de=vl("borderBottom",Qo),Gde=vl("borderLeft",Qo),Vde=vl("borderColor"),Hde=vl("borderTopColor"),Wde=vl("borderRightColor"),qde=vl("borderBottomColor"),Xde=vl("borderLeftColor"),Yde=vl("outline",Qo),Kde=vl("outlineColor"),ME=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=d_(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:f_(e,r)});return od(t,t.borderRadius,n)}return null};ME.propTypes={};ME.filterProps=["borderRadius"];AE(Ude,jde,zde,$de,Gde,Vde,Hde,Wde,qde,Xde,ME,Yde,Kde);const RE=t=>{if(t.gap!==void 0&&t.gap!==null){const e=d_(t.theme,"spacing",8),n=r=>({gap:f_(e,r)});return od(t,t.gap,n)}return null};RE.propTypes={};RE.filterProps=["gap"];const PE=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=d_(t.theme,"spacing",8),n=r=>({columnGap:f_(e,r)});return od(t,t.columnGap,n)}return null};PE.propTypes={};PE.filterProps=["columnGap"];const NE=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=d_(t.theme,"spacing",8),n=r=>({rowGap:f_(e,r)});return od(t,t.rowGap,n)}return null};NE.propTypes={};NE.filterProps=["rowGap"];const Zde=Ni({prop:"gridColumn"}),Qde=Ni({prop:"gridRow"}),Jde=Ni({prop:"gridAutoFlow"}),efe=Ni({prop:"gridAutoColumns"}),tfe=Ni({prop:"gridAutoRows"}),nfe=Ni({prop:"gridTemplateColumns"}),rfe=Ni({prop:"gridTemplateRows"}),ife=Ni({prop:"gridTemplateAreas"}),sfe=Ni({prop:"gridArea"});AE(RE,PE,NE,Zde,Qde,Jde,efe,tfe,nfe,rfe,ife,sfe);function Lg(t,e){return e==="grey"?e:t}const afe=Ni({prop:"color",themeKey:"palette",transform:Lg}),ofe=Ni({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Lg}),lfe=Ni({prop:"backgroundColor",themeKey:"palette",transform:Lg});AE(afe,ofe,lfe);function yo(t){return t<=1&&t!==0?`${t*100}%`:t}const cfe=Ni({prop:"width",transform:yo}),$I=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{const r=t.theme?.breakpoints?.values?.[n]||EE[n];return r?t.theme?.breakpoints?.unit!=="px"?{maxWidth:`${r}${t.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:yo(n)}};return od(t,t.maxWidth,e)}return null};$I.filterProps=["maxWidth"];const ufe=Ni({prop:"minWidth",transform:yo}),dfe=Ni({prop:"height",transform:yo}),ffe=Ni({prop:"maxHeight",transform:yo}),hfe=Ni({prop:"minHeight",transform:yo});Ni({prop:"size",cssProperty:"width",transform:yo});Ni({prop:"size",cssProperty:"height",transform:yo});const pfe=Ni({prop:"boxSizing"});AE(cfe,$I,ufe,dfe,ffe,hfe,pfe);const h_={border:{themeKey:"borders",transform:Qo},borderTop:{themeKey:"borders",transform:Qo},borderRight:{themeKey:"borders",transform:Qo},borderBottom:{themeKey:"borders",transform:Qo},borderLeft:{themeKey:"borders",transform:Qo},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Qo},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:ME},color:{themeKey:"palette",transform:Lg},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Lg},backgroundColor:{themeKey:"palette",transform:Lg},p:{style:di},pt:{style:di},pr:{style:di},pb:{style:di},pl:{style:di},px:{style:di},py:{style:di},padding:{style:di},paddingTop:{style:di},paddingRight:{style:di},paddingBottom:{style:di},paddingLeft:{style:di},paddingX:{style:di},paddingY:{style:di},paddingInline:{style:di},paddingInlineStart:{style:di},paddingInlineEnd:{style:di},paddingBlock:{style:di},paddingBlockStart:{style:di},paddingBlockEnd:{style:di},m:{style:ui},mt:{style:ui},mr:{style:ui},mb:{style:ui},ml:{style:ui},mx:{style:ui},my:{style:ui},margin:{style:ui},marginTop:{style:ui},marginRight:{style:ui},marginBottom:{style:ui},marginLeft:{style:ui},marginX:{style:ui},marginY:{style:ui},marginInline:{style:ui},marginInlineStart:{style:ui},marginInlineEnd:{style:ui},marginBlock:{style:ui},marginBlockStart:{style:ui},marginBlockEnd:{style:ui},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:RE},rowGap:{style:NE},columnGap:{style:PE},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:yo},maxWidth:{style:$I},minWidth:{transform:yo},height:{transform:yo},maxHeight:{transform:yo},minHeight:{transform:yo},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function mfe(...t){const e=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function gfe(t,e){return typeof t=="function"?t(e):t}function xfe(){function t(n,r,i,s){const a={[n]:r,theme:i},o=s[n];if(!o)return{[n]:r};const{cssProperty:l=n,themeKey:c,transform:u,style:f}=o;if(r==null)return null;if(c==="typography"&&r==="inherit")return{[n]:r};const p=CE(i,c)||{};return f?f(a):od(a,r,x=>{let b=$T(p,u,x);return x===b&&typeof x=="string"&&(b=$T(p,u,`${n}${x==="default"?"":Re(x)}`,x)),l===!1?b:{[l]:b}})}function e(n){const{sx:r,theme:i={},nested:s}=n||{};if(!r)return null;const a=i.unstable_sxConfig??h_;function o(l){let c=l;if(typeof l=="function")c=l(i);else if(typeof l!="object")return l;if(!c)return null;const u=Ode(i.breakpoints),f=Object.keys(u);let p=u;return Object.keys(c).forEach(m=>{const x=gfe(c[m],i);if(x!=null)if(typeof x=="object")if(a[m])p=Bv(p,t(m,x,i,a));else{const b=od({theme:i},x,v=>({[m]:v}));mfe(b,x)?p[m]=e({sx:x,theme:i,nested:!0}):p=Bv(p,b)}else p=Bv(p,t(m,x,i,a))}),!s&&i.modularCssLayers?{"@layer sx":v6(i,_6(f,p))}:v6(i,_6(f,p))}return Array.isArray(r)?r.map(o):o(r)}return e}const Lf=xfe();Lf.filterProps=["sx"];function yfe(t,e){const n=this;if(n.vars){if(!n.colorSchemes?.[t]||typeof n.getColorSchemeSelector!="function")return{};let r=n.getColorSchemeSelector(t);return r==="&"?e:((r.includes("data-")||r.includes("."))&&(r=`*:where(${r.replace(/\s*&$/,"")}) &`),{[r]:e})}return n.palette.mode===t?e:{}}function OE(t={},...e){const{breakpoints:n={},palette:r={},spacing:i,shape:s={},...a}=t,o=Cde(n),l=vY(i);let c=ea({breakpoints:o,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:l,shape:{...Pde,...s}},a);return c=Rde(c),c.applyStyles=yfe,c=e.reduce((u,f)=>ea(u,f),c),c.unstable_sxConfig={...h_,...a?.unstable_sxConfig},c.unstable_sx=function(f){return Lf({sx:f,theme:this})},c}function vfe(t){return Object.keys(t).length===0}function DE(t=null){const e=w.useContext(u_);return!e||vfe(e)?t:e}const bfe=OE();function p_(t=bfe){return DE(t)}function e3(t){const e=wf(t);return t!==e&&e.styles?(e.styles.match(/^@layer\s+[^{]*$/)||(e.styles=`@layer global{${e.styles}}`),e):t}function bY({styles:t,themeId:e,defaultTheme:n={}}){const r=p_(n),i=e&&r[e]||r;let s=typeof t=="function"?t(i):t;return i.modularCssLayers&&(Array.isArray(s)?s=s.map(a=>e3(typeof a=="function"?a(i):a)):s=e3(s)),g.jsx(mY,{styles:s})}const _fe=t=>{const e={systemProps:{},otherProps:{}},n=t?.theme?.unstable_sxConfig??h_;return Object.keys(t).forEach(r=>{n[r]?e.systemProps[r]=t[r]:e.otherProps[r]=t[r]}),e};function GI(t){const{sx:e,...n}=t,{systemProps:r,otherProps:i}=_fe(n);let s;return Array.isArray(e)?s=[r,...e]:typeof e=="function"?s=(...a)=>{const o=e(...a);return Ec(o)?{...r,...o}:r}:s={...r,...e},{...i,sx:s}}const w6=t=>t,Sfe=()=>{let t=w6;return{configure(e){t=e},generate(e){return t(e)},reset(){t=w6}}},_Y=Sfe();function SY(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=SY(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function qe(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=SY(t))&&(r&&(r+=" "),r+=e);return r}function wfe(t={}){const{themeId:e,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:i}=t,s=gY("div",{shouldForwardProp:o=>o!=="theme"&&o!=="sx"&&o!=="as"})(Lf);return w.forwardRef(function(l,c){const u=p_(n),{className:f,component:p="div",...m}=GI(l);return g.jsx(s,{as:p,ref:c,className:qe(f,i?i(r):r),theme:e&&u[e]||u,...m})})}const Tfe={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Rt(t,e,n="Mui"){const r=Tfe[e];return r?`${n}-${r}`:`${_Y.generate(t)}-${e}`}function Pt(t,e,n="Mui"){const r={};return e.forEach(i=>{r[i]=Rt(t,i,n)}),r}function wY(t){const{variants:e,...n}=t,r={variants:e,style:wf(n),isProcessed:!0};return r.style===n||e&&e.forEach(i=>{typeof i.style!="function"&&(i.style=wf(i.style))}),r}const Efe=OE();function t3(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}function tp(t,e){return e&&t&&typeof t=="object"&&t.styles&&!t.styles.startsWith("@layer")&&(t.styles=`@layer ${e}{${String(t.styles)}}`),t}function Cfe(t){return t?(e,n)=>n[t]:null}function Afe(t,e,n){t.theme=Rfe(t.theme)?n:t.theme[e]||t.theme}function xT(t,e,n){const r=typeof e=="function"?e(t):e;if(Array.isArray(r))return r.flatMap(i=>xT(t,i,n));if(Array.isArray(r?.variants)){let i;if(r.isProcessed)i=n?tp(r.style,n):r.style;else{const{variants:s,...a}=r;i=n?tp(wf(a),n):a}return TY(t,r.variants,[i],n)}return r?.isProcessed?n?tp(wf(r.style),n):r.style:n?tp(wf(r),n):r}function TY(t,e,n=[],r=void 0){let i;e:for(let s=0;s<e.length;s+=1){const a=e[s];if(typeof a.props=="function"){if(i??={...t,...t.ownerState,ownerState:t.ownerState},!a.props(i))continue}else for(const o in a.props)if(t[o]!==a.props[o]&&t.ownerState?.[o]!==a.props[o])continue e;typeof a.style=="function"?(i??={...t,...t.ownerState,ownerState:t.ownerState},n.push(r?tp(wf(a.style(i)),r):a.style(i))):n.push(r?tp(wf(a.style),r):a.style)}return n}function EY(t={}){const{themeId:e,defaultTheme:n=Efe,rootShouldForwardProp:r=t3,slotShouldForwardProp:i=t3}=t;function s(o){Afe(o,e,n)}return(o,l={})=>{Sde(o,M=>M.filter(P=>P!==Lf));const{name:c,slot:u,skipVariantsResolver:f,skipSx:p,overridesResolver:m=Cfe(Nfe(u)),...x}=l,b=c&&c.startsWith("Mui")||u?"components":"custom",v=f!==void 0?f:u&&u!=="Root"&&u!=="root"||!1,_=p||!1;let E=t3;u==="Root"||u==="root"?E=r:u?E=i:Pfe(o)&&(E=void 0);const T=gY(o,{shouldForwardProp:E,label:Mfe(),...x}),A=M=>{if(M.__emotion_real===M)return M;if(typeof M=="function")return function(D){return xT(D,M,D.theme.modularCssLayers?b:void 0)};if(Ec(M)){const P=wY(M);return function(N){return P.variants?xT(N,P,N.theme.modularCssLayers?b:void 0):N.theme.modularCssLayers?tp(P.style,b):P.style}}return M},C=(...M)=>{const P=[],D=M.map(A),N=[];if(P.push(s),c&&m&&N.push(function(F){const H=F.theme.components?.[c]?.styleOverrides;if(!H)return null;const B={};for(const j in H)B[j]=xT(F,H[j],F.theme.modularCssLayers?"theme":void 0);return m(F,B)}),c&&!v&&N.push(function(F){const H=F.theme?.components?.[c]?.variants;return H?TY(F,H,[],F.theme.modularCssLayers?"theme":void 0):null}),_||N.push(Lf),Array.isArray(D[0])){const I=D.shift(),F=new Array(P.length).fill(""),z=new Array(N.length).fill("");let H;H=[...F,...I,...z],H.raw=[...F,...I.raw,...z],P.unshift(H)}const L=[...P,...D,...N],k=T(...L);return o.muiName&&(k.muiName=o.muiName),k};return T.withConfig&&(C.withConfig=T.withConfig),C}}function Mfe(t,e){return void 0}function Rfe(t){for(const e in t)return!1;return!0}function Pfe(t){return typeof t=="string"&&t.charCodeAt(0)>96}function Nfe(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}const Ofe=EY();function Kg(t,e,n=!1){const r={...e};for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const s=i;if(s==="components"||s==="slots")r[s]={...t[s],...r[s]};else if(s==="componentsProps"||s==="slotProps"){const a=t[s],o=e[s];if(!o)r[s]=a||{};else if(!a)r[s]=o;else{r[s]={...o};for(const l in a)if(Object.prototype.hasOwnProperty.call(a,l)){const c=l;r[s][c]=Kg(a[c],o[c],n)}}}else s==="className"&&n&&e.className?r.className=qe(t?.className,e?.className):s==="style"&&n&&e.style?r.style={...t?.style,...e?.style}:r[s]===void 0&&(r[s]=t[s])}return r}function CY(t){const{theme:e,name:n,props:r}=t;return!e||!e.components||!e.components[n]||!e.components[n].defaultProps?r:Kg(e.components[n].defaultProps,r)}function Dfe({props:t,name:e,defaultTheme:n,themeId:r}){let i=p_(n);return r&&(i=i[r]||i),CY({theme:i,name:e,props:t})}const ia=typeof window<"u"?w.useLayoutEffect:w.useEffect;function Lfe(t,e,n,r,i){const[s,a]=w.useState(()=>i&&n?n(t).matches:r?r(t).matches:e);return ia(()=>{if(!n)return;const o=n(t),l=()=>{a(o.matches)};return l(),o.addEventListener("change",l),()=>{o.removeEventListener("change",l)}},[t,n]),s}const Ife={...ab},AY=Ife.useSyncExternalStore;function kfe(t,e,n,r,i){const s=w.useCallback(()=>e,[e]),a=w.useMemo(()=>{if(i&&n)return()=>n(t).matches;if(r!==null){const{matches:u}=r(t);return()=>u}return s},[s,t,r,i,n]),[o,l]=w.useMemo(()=>{if(n===null)return[s,()=>()=>{}];const u=n(t);return[()=>u.matches,f=>(u.addEventListener("change",f),()=>{u.removeEventListener("change",f)})]},[s,n,t]);return AY(l,o,a)}function MY(t={}){const{themeId:e}=t;return function(r,i={}){let s=DE();s&&e&&(s=s[e]||s);const a=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:o=!1,matchMedia:l=a?window.matchMedia:null,ssrMatchMedia:c=null,noSsr:u=!1}=CY({name:"MuiUseMediaQuery",props:i,theme:s});let f=typeof r=="function"?r(s):r;return f=f.replace(/^@media( ?)/m,""),f.includes("print")&&console.warn(["MUI: You have provided a `print` query to the `useMediaQuery` hook.","Using the print media query to modify print styles can lead to unexpected results.","Consider using the `displayPrint` field in the `sx` prop instead.","More information about `displayPrint` on our docs: https://mui.com/system/display/#display-in-print."].join(`
`)),(AY!==void 0?kfe:Lfe)(f,o,l,c,u)}}MY();function bg(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}function VI(t,e=0,n=1){return bg(t,e,n)}function Bfe(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function If(t){if(t.type)return t;if(t.charAt(0)==="#")return If(Bfe(t));const e=t.indexOf("("),n=t.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(ad(9,t));let r=t.substring(e+1,t.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error(ad(10,i))}else r=r.split(",");return r=r.map(s=>parseFloat(s)),{type:n,values:r,colorSpace:i}}const Ffe=t=>{const e=If(t);return e.values.slice(0,3).map((n,r)=>e.type.includes("hsl")&&r!==0?`${n}%`:n).join(" ")},_v=(t,e)=>{try{return Ffe(t)}catch{return t}};function LE(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.includes("rgb")?r=r.map((i,s)=>s<3?parseInt(i,10):i):e.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.includes("color")?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function RY(t){t=If(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,s=r*Math.min(i,1-i),a=(c,u=(c+n/30)%12)=>i-s*Math.max(Math.min(u-3,9-u,1),-1);let o="rgb";const l=[Math.round(a(0)*255),Math.round(a(8)*255),Math.round(a(4)*255)];return t.type==="hsla"&&(o+="a",l.push(e[3])),LE({type:o,values:l})}function XO(t){t=If(t);let e=t.type==="hsl"||t.type==="hsla"?If(RY(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function Ufe(t,e){const n=XO(t),r=XO(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function GT(t,e){return t=If(t),e=VI(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,LE(t)}function _h(t,e,n){try{return GT(t,e)}catch{return t}}function IE(t,e){if(t=If(t),e=VI(e),t.type.includes("hsl"))t.values[2]*=1-e;else if(t.type.includes("rgb")||t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]*=1-e;return LE(t)}function fr(t,e,n){try{return IE(t,e)}catch{return t}}function kE(t,e){if(t=If(t),e=VI(e),t.type.includes("hsl"))t.values[2]+=(100-t.values[2])*e;else if(t.type.includes("rgb"))for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return LE(t)}function hr(t,e,n){try{return kE(t,e)}catch{return t}}function jfe(t,e=.15){return XO(t)>.5?IE(t,e):kE(t,e)}function TS(t,e,n){try{return jfe(t,e)}catch{return t}}const PY=w.createContext(null);function HI(){return w.useContext(PY)}const zfe=typeof Symbol=="function"&&Symbol.for,$fe=zfe?Symbol.for("mui.nested"):"__THEME_NESTED__";function Gfe(t,e){return typeof e=="function"?e(t):{...t,...e}}function Vfe(t){const{children:e,theme:n}=t,r=HI(),i=w.useMemo(()=>{const s=r===null?{...n}:Gfe(r,n);return s!=null&&(s[$fe]=r!==null),s},[n,r]);return g.jsx(PY.Provider,{value:i,children:e})}const NY=w.createContext();function Hfe({value:t,...e}){return g.jsx(NY.Provider,{value:t??!0,...e})}const Wf=()=>w.useContext(NY)??!1,OY=w.createContext(void 0);function Wfe({value:t,children:e}){return g.jsx(OY.Provider,{value:t,children:e})}function qfe(t){const{theme:e,name:n,props:r}=t;if(!e||!e.components||!e.components[n])return r;const i=e.components[n];return i.defaultProps?Kg(i.defaultProps,r,e.components.mergeClassNameAndStyle):!i.styleOverrides&&!i.variants?Kg(i,r,e.components.mergeClassNameAndStyle):r}function Xfe({props:t,name:e}){const n=w.useContext(OY);return qfe({props:t,name:e,theme:{components:n}})}let T6=0;function Yfe(t){const[e,n]=w.useState(t),r=t||e;return w.useEffect(()=>{e==null&&(T6+=1,n(`mui-${T6}`))},[e]),r}const Kfe={...ab},E6=Kfe.useId;function $p(t){if(E6!==void 0){const e=E6();return t??e}return Yfe(t)}function Zfe(t){const e=DE(),n=$p()||"",{modularCssLayers:r}=t;let i="mui.global, mui.components, mui.theme, mui.custom, mui.sx";return!r||e!==null?i="":typeof r=="string"?i=r.replace(/mui(?!\.)/g,i):i=`@layer ${i};`,ia(()=>{const s=document.querySelector("head");if(!s)return;const a=s.firstChild;if(i){if(a&&a.hasAttribute?.("data-mui-layer-order")&&a.getAttribute("data-mui-layer-order")===n)return;const o=document.createElement("style");o.setAttribute("data-mui-layer-order",n),o.textContent=i,s.prepend(o)}else s.querySelector(`style[data-mui-layer-order="${n}"]`)?.remove()},[i,n]),i?g.jsx(bY,{styles:i}):null}const C6={};function A6(t,e,n,r=!1){return w.useMemo(()=>{const i=t&&e[t]||e;if(typeof n=="function"){const s=n(i),a=t?{...e,[t]:s}:s;return r?()=>a:a}return t?{...e,[t]:n}:{...e,...n}},[t,e,n,r])}function DY(t){const{children:e,theme:n,themeId:r}=t,i=DE(C6),s=HI()||C6,a=A6(r,i,n),o=A6(r,s,n,!0),l=(r?a[r]:a).direction==="rtl",c=Zfe(a);return g.jsx(Vfe,{theme:o,children:g.jsx(u_.Provider,{value:a,children:g.jsx(Hfe,{value:l,children:g.jsxs(Wfe,{value:r?a[r].components:a.components,children:[c,e]})})})})}const M6={theme:void 0};function Qfe(t){let e,n;return function(i){let s=e;return(s===void 0||i.theme!==n)&&(M6.theme=i.theme,s=wY(t(M6)),e=s,n=i.theme),s}}const WI="mode",qI="color-scheme",Jfe="data-color-scheme";function ehe(t){const{defaultMode:e="system",defaultLightColorScheme:n="light",defaultDarkColorScheme:r="dark",modeStorageKey:i=WI,colorSchemeStorageKey:s=qI,attribute:a=Jfe,colorSchemeNode:o="document.documentElement",nonce:l}=t||{};let c="",u=a;if(a==="class"&&(u=".%s"),a==="data"&&(u="[data-%s]"),u.startsWith(".")){const p=u.substring(1);c+=`${o}.classList.remove('${p}'.replace('%s', light), '${p}'.replace('%s', dark));
      ${o}.classList.add('${p}'.replace('%s', colorScheme));`}const f=u.match(/\[([^[\]]+)\]/);if(f){const[p,m]=f[1].split("=");m||(c+=`${o}.removeAttribute('${p}'.replace('%s', light));
      ${o}.removeAttribute('${p}'.replace('%s', dark));`),c+=`
      ${o}.setAttribute('${p}'.replace('%s', colorScheme), ${m?`${m}.replace('%s', colorScheme)`:'""'});`}else c+=`${o}.setAttribute('${u}', colorScheme);`;return g.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${i}') || '${e}';
  const dark = localStorage.getItem('${s}-dark') || '${r}';
  const light = localStorage.getItem('${s}-light') || '${n}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${c}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function the(){}const nhe=({key:t,storageWindow:e})=>(!e&&typeof window<"u"&&(e=window),{get(n){if(typeof window>"u")return;if(!e)return n;let r;try{r=e.localStorage.getItem(t)}catch{}return r||n},set:n=>{if(e)try{e.localStorage.setItem(t,n)}catch{}},subscribe:n=>{if(!e)return the;const r=i=>{const s=i.newValue;i.key===t&&n(s)};return e.addEventListener("storage",r),()=>{e.removeEventListener("storage",r)}}});function n3(){}function R6(t){if(typeof window<"u"&&typeof window.matchMedia=="function"&&t==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function LY(t,e){if(t.mode==="light"||t.mode==="system"&&t.systemMode==="light")return e("light");if(t.mode==="dark"||t.mode==="system"&&t.systemMode==="dark")return e("dark")}function rhe(t){return LY(t,e=>{if(e==="light")return t.lightColorScheme;if(e==="dark")return t.darkColorScheme})}function ihe(t){const{defaultMode:e="light",defaultLightColorScheme:n,defaultDarkColorScheme:r,supportedColorSchemes:i=[],modeStorageKey:s=WI,colorSchemeStorageKey:a=qI,storageWindow:o=typeof window>"u"?void 0:window,storageManager:l=nhe,noSsr:c=!1}=t,u=i.join(","),f=i.length>1,p=w.useMemo(()=>l?.({key:s,storageWindow:o}),[l,s,o]),m=w.useMemo(()=>l?.({key:`${a}-light`,storageWindow:o}),[l,a,o]),x=w.useMemo(()=>l?.({key:`${a}-dark`,storageWindow:o}),[l,a,o]),[b,v]=w.useState(()=>{const D=p?.get(e)||e,N=m?.get(n)||n,L=x?.get(r)||r;return{mode:D,systemMode:R6(D),lightColorScheme:N,darkColorScheme:L}}),[_,E]=w.useState(c||!f);w.useEffect(()=>{E(!0)},[]);const T=rhe(b),A=w.useCallback(D=>{v(N=>{if(D===N.mode)return N;const L=D??e;return p?.set(L),{...N,mode:L,systemMode:R6(L)}})},[p,e]),C=w.useCallback(D=>{D?typeof D=="string"?D&&!u.includes(D)?console.error(`\`${D}\` does not exist in \`theme.colorSchemes\`.`):v(N=>{const L={...N};return LY(N,k=>{k==="light"&&(m?.set(D),L.lightColorScheme=D),k==="dark"&&(x?.set(D),L.darkColorScheme=D)}),L}):v(N=>{const L={...N},k=D.light===null?n:D.light,I=D.dark===null?r:D.dark;return k&&(u.includes(k)?(L.lightColorScheme=k,m?.set(k)):console.error(`\`${k}\` does not exist in \`theme.colorSchemes\`.`)),I&&(u.includes(I)?(L.darkColorScheme=I,x?.set(I)):console.error(`\`${I}\` does not exist in \`theme.colorSchemes\`.`)),L}):v(N=>(m?.set(n),x?.set(r),{...N,lightColorScheme:n,darkColorScheme:r}))},[u,m,x,n,r]),M=w.useCallback(D=>{b.mode==="system"&&v(N=>{const L=D?.matches?"dark":"light";return N.systemMode===L?N:{...N,systemMode:L}})},[b.mode]),P=w.useRef(M);return P.current=M,w.useEffect(()=>{if(typeof window.matchMedia!="function"||!f)return;const D=(...L)=>P.current(...L),N=window.matchMedia("(prefers-color-scheme: dark)");return N.addListener(D),D(N),()=>{N.removeListener(D)}},[f]),w.useEffect(()=>{if(f){const D=p?.subscribe(k=>{(!k||["light","dark","system"].includes(k))&&A(k||e)})||n3,N=m?.subscribe(k=>{(!k||u.match(k))&&C({light:k})})||n3,L=x?.subscribe(k=>{(!k||u.match(k))&&C({dark:k})})||n3;return()=>{D(),N(),L()}}},[C,A,u,e,o,f,p,m,x]),{...b,mode:_?b.mode:void 0,systemMode:_?b.systemMode:void 0,colorScheme:_?T:void 0,setMode:A,setColorScheme:C}}const she="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function ahe(t){const{themeId:e,theme:n={},modeStorageKey:r=WI,colorSchemeStorageKey:i=qI,disableTransitionOnChange:s=!1,defaultColorScheme:a,resolveTheme:o}=t,l={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},c=w.createContext(void 0),u=()=>w.useContext(c)||l,f={},p={};function m(_){const{children:E,theme:T,modeStorageKey:A=r,colorSchemeStorageKey:C=i,disableTransitionOnChange:M=s,storageManager:P,storageWindow:D=typeof window>"u"?void 0:window,documentNode:N=typeof document>"u"?void 0:document,colorSchemeNode:L=typeof document>"u"?void 0:document.documentElement,disableNestedContext:k=!1,disableStyleSheetGeneration:I=!1,defaultMode:F="system",forceThemeRerender:z=!1,noSsr:H}=_,B=w.useRef(!1),j=HI(),G=w.useContext(c),W=!!G&&!k,re=w.useMemo(()=>T||(typeof n=="function"?n():n),[T]),$=re[e],ee=$||re,{colorSchemes:oe=f,components:me=p,cssVarPrefix:te}=ee,K=Object.keys(oe).filter(le=>!!oe[le]).join(","),ne=w.useMemo(()=>K.split(","),[K]),Ee=typeof a=="string"?a:a.light,se=typeof a=="string"?a:a.dark,ve=oe[Ee]&&oe[se]?F:oe[ee.defaultColorScheme]?.palette?.mode||ee.palette?.mode,{mode:Pe,setMode:ge,systemMode:be,lightColorScheme:_e,darkColorScheme:Q,colorScheme:et,setColorScheme:ze}=ihe({supportedColorSchemes:ne,defaultLightColorScheme:Ee,defaultDarkColorScheme:se,modeStorageKey:A,colorSchemeStorageKey:C,defaultMode:ve,storageManager:P,storageWindow:D,noSsr:H});let Je=Pe,fe=et;W&&(Je=G.mode,fe=G.colorScheme);let rt=fe||ee.defaultColorScheme;ee.vars&&!z&&(rt=ee.defaultColorScheme);const $e=w.useMemo(()=>{const le=ee.generateThemeVars?.()||ee.vars,xe={...ee,components:me,colorSchemes:oe,cssVarPrefix:te,vars:le};if(typeof xe.generateSpacing=="function"&&(xe.spacing=xe.generateSpacing()),rt){const pe=oe[rt];pe&&typeof pe=="object"&&Object.keys(pe).forEach(it=>{pe[it]&&typeof pe[it]=="object"?xe[it]={...xe[it],...pe[it]}:xe[it]=pe[it]})}return o?o(xe):xe},[ee,rt,me,oe,te]),Se=ee.colorSchemeSelector;ia(()=>{if(fe&&L&&Se&&Se!=="media"){const le=Se;let xe=Se;if(le==="class"&&(xe=".%s"),le==="data"&&(xe="[data-%s]"),le?.startsWith("data-")&&!le.includes("%s")&&(xe=`[${le}="%s"]`),xe.startsWith("."))L.classList.remove(...ne.map(pe=>xe.substring(1).replace("%s",pe))),L.classList.add(xe.substring(1).replace("%s",fe));else{const pe=xe.replace("%s",fe).match(/\[([^\]]+)\]/);if(pe){const[it,We]=pe[1].split("=");We||ne.forEach(dt=>{L.removeAttribute(it.replace(fe,dt))}),L.setAttribute(it,We?We.replace(/"|'/g,""):"")}else L.setAttribute(xe,fe)}}},[fe,Se,L,ne]),w.useEffect(()=>{let le;if(M&&B.current&&N){const xe=N.createElement("style");xe.appendChild(N.createTextNode(she)),N.head.appendChild(xe),window.getComputedStyle(N.body),le=setTimeout(()=>{N.head.removeChild(xe)},1)}return()=>{clearTimeout(le)}},[fe,M,N]),w.useEffect(()=>(B.current=!0,()=>{B.current=!1}),[]);const q=w.useMemo(()=>({allColorSchemes:ne,colorScheme:fe,darkColorScheme:Q,lightColorScheme:_e,mode:Je,setColorScheme:ze,setMode:ge,systemMode:be}),[ne,fe,Q,_e,Je,ze,ge,be,$e.colorSchemeSelector]);let V=!0;(I||ee.cssVariables===!1||W&&j?.cssVarPrefix===te)&&(V=!1);const ie=g.jsxs(w.Fragment,{children:[g.jsx(DY,{themeId:$?e:void 0,theme:$e,children:E}),V&&g.jsx(mY,{styles:$e.generateStyleSheets?.()||[]})]});return W?ie:g.jsx(c.Provider,{value:q,children:ie})}const x=typeof a=="string"?a:a.light,b=typeof a=="string"?a:a.dark;return{CssVarsProvider:m,useColorScheme:u,getInitColorSchemeScript:_=>ehe({colorSchemeStorageKey:i,defaultLightColorScheme:x,defaultDarkColorScheme:b,modeStorageKey:r,..._})}}function ohe(t=""){function e(...r){if(!r.length)return"";const i=r[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${t?`${t}-`:""}${i}${e(...r.slice(1))})`:`, ${i}`}return(r,...i)=>`var(--${t?`${t}-`:""}${r}${e(...i)})`}const P6=(t,e,n,r=[])=>{let i=t;e.forEach((s,a)=>{a===e.length-1?Array.isArray(i)?i[Number(s)]=n:i&&typeof i=="object"&&(i[s]=n):i&&typeof i=="object"&&(i[s]||(i[s]=r.includes(s)?[]:{}),i=i[s])})},lhe=(t,e,n)=>{function r(i,s=[],a=[]){Object.entries(i).forEach(([o,l])=>{(!n||n&&!n([...s,o]))&&l!=null&&(typeof l=="object"&&Object.keys(l).length>0?r(l,[...s,o],Array.isArray(l)?[...a,o]:a):e([...s,o],l,a))})}r(t)},che=(t,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>t.includes(r))||t[t.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function r3(t,e){const{prefix:n,shouldSkipGeneratingVar:r}=e||{},i={},s={},a={};return lhe(t,(o,l,c)=>{if((typeof l=="string"||typeof l=="number")&&(!r||!r(o,l))){const u=`--${n?`${n}-`:""}${o.join("-")}`,f=che(o,l);Object.assign(i,{[u]:f}),P6(s,o,`var(${u})`,c),P6(a,o,`var(${u}, ${f})`,c)}},o=>o[0]==="vars"),{css:i,vars:s,varsWithDefaults:a}}function uhe(t,e={}){const{getSelector:n=_,disableCssColorScheme:r,colorSchemeSelector:i,enableContrastVars:s}=e,{colorSchemes:a={},components:o,defaultColorScheme:l="light",...c}=t,{vars:u,css:f,varsWithDefaults:p}=r3(c,e);let m=p;const x={},{[l]:b,...v}=a;if(Object.entries(v||{}).forEach(([A,C])=>{const{vars:M,css:P,varsWithDefaults:D}=r3(C,e);m=ea(m,D),x[A]={css:P,vars:M}}),b){const{css:A,vars:C,varsWithDefaults:M}=r3(b,e);m=ea(m,M),x[l]={css:A,vars:C}}function _(A,C){let M=i;if(i==="class"&&(M=".%s"),i==="data"&&(M="[data-%s]"),i?.startsWith("data-")&&!i.includes("%s")&&(M=`[${i}="%s"]`),A){if(M==="media")return t.defaultColorScheme===A?":root":{[`@media (prefers-color-scheme: ${a[A]?.palette?.mode||A})`]:{":root":C}};if(M)return t.defaultColorScheme===A?`:root, ${M.replace("%s",String(A))}`:M.replace("%s",String(A))}return":root"}return{vars:m,generateThemeVars:()=>{let A={...u};return Object.entries(x).forEach(([,{vars:C}])=>{A=ea(A,C)}),A},generateStyleSheets:()=>{const A=[],C=t.defaultColorScheme||"light";function M(N,L){Object.keys(L).length&&A.push(typeof N=="string"?{[N]:{...L}}:N)}M(n(void 0,{...f}),f);const{[C]:P,...D}=x;if(P){const{css:N}=P,L=a[C]?.palette?.mode,k=!r&&L?{colorScheme:L,...N}:{...N};M(n(C,{...k}),k)}return Object.entries(D).forEach(([N,{css:L}])=>{const k=a[N]?.palette?.mode,I=!r&&k?{colorScheme:k,...L}:{...L};M(n(N,{...I}),I)}),s&&A.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),A}}}function dhe(t){return function(n){return t==="media"?`@media (prefers-color-scheme: ${n})`:t?t.startsWith("data-")&&!t.includes("%s")?`[${t}="${n}"] &`:t==="class"?`.${n} &`:t==="data"?`[data-${n}] &`:`${t.replace("%s",n)} &`:"&"}}function Nt(t,e,n=void 0){const r={};for(const i in t){const s=t[i];let a="",o=!0;for(let l=0;l<s.length;l+=1){const c=s[l];c&&(a+=(o===!0?"":" ")+e(c),o=!1,n&&n[c]&&(a+=" "+n[c]))}r[i]=a}return r}function Fv(t,e){return w.isValidElement(t)&&e.indexOf(t.type.muiName??t.type?._payload?.value?.muiName)!==-1}const fhe=(t,e)=>t.filter(n=>e.includes(n)),fx=(t,e,n)=>{const r=t.keys[0];Array.isArray(e)?e.forEach((i,s)=>{n((a,o)=>{s<=t.keys.length-1&&(s===0?Object.assign(a,o):a[t.up(t.keys[s])]=o)},i)}):e&&typeof e=="object"?(Object.keys(e).length>t.keys.length?t.keys:fhe(t.keys,Object.keys(e))).forEach(s=>{if(t.keys.includes(s)){const a=e[s];a!==void 0&&n((o,l)=>{r===s?Object.assign(o,l):o[t.up(s)]=l},a)}}):(typeof e=="number"||typeof e=="string")&&n((i,s)=>{Object.assign(i,s)},e)};function VT(t){return`--Grid-${t}Spacing`}function BE(t){return`--Grid-parent-${t}Spacing`}const N6="--Grid-columns",Ig="--Grid-parent-columns",hhe=({theme:t,ownerState:e})=>{const n={};return fx(t.breakpoints,e.size,(r,i)=>{let s={};i==="grow"&&(s={flexBasis:0,flexGrow:1,maxWidth:"100%"}),i==="auto"&&(s={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof i=="number"&&(s={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${i} / var(${Ig}) - (var(${Ig}) - ${i}) * (var(${BE("column")}) / var(${Ig})))`}),r(n,s)}),n},phe=({theme:t,ownerState:e})=>{const n={};return fx(t.breakpoints,e.offset,(r,i)=>{let s={};i==="auto"&&(s={marginLeft:"auto"}),typeof i=="number"&&(s={marginLeft:i===0?"0px":`calc(100% * ${i} / var(${Ig}) + var(${BE("column")}) * ${i} / var(${Ig}))`}),r(n,s)}),n},mhe=({theme:t,ownerState:e})=>{if(!e.container)return{};const n={[N6]:12};return fx(t.breakpoints,e.columns,(r,i)=>{const s=i??12;r(n,{[N6]:s,"> *":{[Ig]:s}})}),n},ghe=({theme:t,ownerState:e})=>{if(!e.container)return{};const n={};return fx(t.breakpoints,e.rowSpacing,(r,i)=>{const s=typeof i=="string"?i:t.spacing?.(i);r(n,{[VT("row")]:s,"> *":{[BE("row")]:s}})}),n},xhe=({theme:t,ownerState:e})=>{if(!e.container)return{};const n={};return fx(t.breakpoints,e.columnSpacing,(r,i)=>{const s=typeof i=="string"?i:t.spacing?.(i);r(n,{[VT("column")]:s,"> *":{[BE("column")]:s}})}),n},yhe=({theme:t,ownerState:e})=>{if(!e.container)return{};const n={};return fx(t.breakpoints,e.direction,(r,i)=>{r(n,{flexDirection:i})}),n},vhe=({ownerState:t})=>({minWidth:0,boxSizing:"border-box",...t.container&&{display:"flex",flexWrap:"wrap",...t.wrap&&t.wrap!=="wrap"&&{flexWrap:t.wrap},gap:`var(${VT("row")}) var(${VT("column")})`}}),bhe=t=>{const e=[];return Object.entries(t).forEach(([n,r])=>{r!==!1&&r!==void 0&&e.push(`grid-${n}-${String(r)}`)}),e},_he=(t,e="xs")=>{function n(r){return r===void 0?!1:typeof r=="string"&&!Number.isNaN(Number(r))||typeof r=="number"&&r>0}if(n(t))return[`spacing-${e}-${String(t)}`];if(typeof t=="object"&&!Array.isArray(t)){const r=[];return Object.entries(t).forEach(([i,s])=>{n(s)&&r.push(`spacing-${i}-${String(s)}`)}),r}return[]},She=t=>t===void 0?[]:typeof t=="object"?Object.entries(t).map(([e,n])=>`direction-${e}-${n}`):[`direction-xs-${String(t)}`];function whe(t,e){t.item!==void 0&&delete t.item,t.zeroMinWidth!==void 0&&delete t.zeroMinWidth,e.keys.forEach(n=>{t[n]!==void 0&&delete t[n]})}const The=OE(),Ehe=Ofe("div",{name:"MuiGrid",slot:"Root"});function Che(t){return Dfe({props:t,name:"MuiGrid",defaultTheme:The})}function Ahe(t={}){const{createStyledComponent:e=Ehe,useThemeProps:n=Che,useTheme:r=p_,componentName:i="MuiGrid"}=t,s=(c,u)=>{const{container:f,direction:p,spacing:m,wrap:x,size:b}=c,v={root:["root",f&&"container",x!=="wrap"&&`wrap-xs-${String(x)}`,...She(p),...bhe(b),...f?_he(m,u.breakpoints.keys[0]):[]]};return Nt(v,_=>Rt(i,_),{})};function a(c,u,f=()=>!0){const p={};return c===null||(Array.isArray(c)?c.forEach((m,x)=>{m!==null&&f(m)&&u.keys[x]&&(p[u.keys[x]]=m)}):typeof c=="object"?Object.keys(c).forEach(m=>{const x=c[m];x!=null&&f(x)&&(p[m]=x)}):p[u.keys[0]]=c),p}const o=e(mhe,xhe,ghe,hhe,yhe,vhe,phe),l=w.forwardRef(function(u,f){const p=r(),m=n(u),x=GI(m);whe(x,p.breakpoints);const{className:b,children:v,columns:_=12,container:E=!1,component:T="div",direction:A="row",wrap:C="wrap",size:M={},offset:P={},spacing:D=0,rowSpacing:N=D,columnSpacing:L=D,unstable_level:k=0,...I}=x,F=a(M,p.breakpoints,$=>$!==!1),z=a(P,p.breakpoints),H=u.columns??(k?void 0:_),B=u.spacing??(k?void 0:D),j=u.rowSpacing??u.spacing??(k?void 0:N),G=u.columnSpacing??u.spacing??(k?void 0:L),W={...x,level:k,columns:H,container:E,direction:A,wrap:C,spacing:B,rowSpacing:j,columnSpacing:G,size:F,offset:z},re=s(W,p);return g.jsx(o,{ref:f,as:T,ownerState:W,className:qe(re.root,b),...I,children:w.Children.map(v,$=>w.isValidElement($)&&Fv($,["Grid"])&&E&&$.props.container?w.cloneElement($,{unstable_level:$.props?.unstable_level??k+1}):$)})});return l.muiName="Grid",l}const db={black:"#000",white:"#fff"},Mhe={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Nm={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Om={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},Ry={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},Dm={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},Lm={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Im={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function IY(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:db.white,default:db.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const kY=IY();function BY(){return{text:{primary:db.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:db.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const YO=BY();function O6(t,e,n,r){const i=r.light||r,s=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=kE(t.main,i):e==="dark"&&(t.dark=IE(t.main,s)))}function D6(t,e,n,r,i){const s=i.light||i,a=i.dark||i*1.5;e[n]||(e.hasOwnProperty(r)?e[n]=e[r]:n==="light"?e.light=`color-mix(in ${t}, ${e.main}, #fff ${(s*100).toFixed(0)}%)`:n==="dark"&&(e.dark=`color-mix(in ${t}, ${e.main}, #000 ${(a*100).toFixed(0)}%)`))}function Rhe(t="light"){return t==="dark"?{main:Dm[200],light:Dm[50],dark:Dm[400]}:{main:Dm[700],light:Dm[400],dark:Dm[800]}}function Phe(t="light"){return t==="dark"?{main:Nm[200],light:Nm[50],dark:Nm[400]}:{main:Nm[500],light:Nm[300],dark:Nm[700]}}function Nhe(t="light"){return t==="dark"?{main:Om[500],light:Om[300],dark:Om[700]}:{main:Om[700],light:Om[400],dark:Om[800]}}function Ohe(t="light"){return t==="dark"?{main:Lm[400],light:Lm[300],dark:Lm[700]}:{main:Lm[700],light:Lm[500],dark:Lm[900]}}function Dhe(t="light"){return t==="dark"?{main:Im[400],light:Im[300],dark:Im[700]}:{main:Im[800],light:Im[500],dark:Im[900]}}function Lhe(t="light"){return t==="dark"?{main:Ry[400],light:Ry[300],dark:Ry[700]}:{main:"#ed6c02",light:Ry[500],dark:Ry[900]}}function Ihe(t){return`oklch(from ${t} var(--__l) 0 h / var(--__a))`}function XI(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2,colorSpace:i,...s}=t,a=t.primary||Rhe(e),o=t.secondary||Phe(e),l=t.error||Nhe(e),c=t.info||Ohe(e),u=t.success||Dhe(e),f=t.warning||Lhe(e);function p(v){return i?Ihe(v):Ufe(v,YO.text.primary)>=n?YO.text.primary:kY.text.primary}const m=({color:v,name:_,mainShade:E=500,lightShade:T=300,darkShade:A=700})=>{if(v={...v},!v.main&&v[E]&&(v.main=v[E]),!v.hasOwnProperty("main"))throw new Error(ad(11,_?` (${_})`:"",E));if(typeof v.main!="string")throw new Error(ad(12,_?` (${_})`:"",JSON.stringify(v.main)));return i?(D6(i,v,"light",T,r),D6(i,v,"dark",A,r)):(O6(v,"light",T,r),O6(v,"dark",A,r)),v.contrastText||(v.contrastText=p(v.main)),v};let x;return e==="light"?x=IY():e==="dark"&&(x=BY()),ea({common:{...db},mode:e,primary:m({color:a,name:"primary"}),secondary:m({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:m({color:l,name:"error"}),warning:m({color:f,name:"warning"}),info:m({color:c,name:"info"}),success:m({color:u,name:"success"}),grey:Mhe,contrastThreshold:n,getContrastText:p,augmentColor:m,tonalOffset:r,...x},s)}function khe(t){const e={};return Object.entries(t).forEach(r=>{const[i,s]=r;typeof s=="object"&&(e[i]=`${s.fontStyle?`${s.fontStyle} `:""}${s.fontVariant?`${s.fontVariant} `:""}${s.fontWeight?`${s.fontWeight} `:""}${s.fontStretch?`${s.fontStretch} `:""}${s.fontSize||""}${s.lineHeight?`/${s.lineHeight} `:""}${s.fontFamily||""}`)}),e}function Bhe(t,e){return{toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}},...e}}function Fhe(t){return Math.round(t*1e5)/1e5}const L6={textTransform:"uppercase"},I6='"Roboto", "Helvetica", "Arial", sans-serif';function FY(t,e){const{fontFamily:n=I6,fontSize:r=14,fontWeightLight:i=300,fontWeightRegular:s=400,fontWeightMedium:a=500,fontWeightBold:o=700,htmlFontSize:l=16,allVariants:c,pxToRem:u,...f}=typeof e=="function"?e(t):e,p=r/14,m=u||(v=>`${v/l*p}rem`),x=(v,_,E,T,A)=>({fontFamily:n,fontWeight:v,fontSize:m(_),lineHeight:E,...n===I6?{letterSpacing:`${Fhe(T/_)}em`}:{},...A,...c}),b={h1:x(i,96,1.167,-1.5),h2:x(i,60,1.2,-.5),h3:x(s,48,1.167,0),h4:x(s,34,1.235,.25),h5:x(s,24,1.334,0),h6:x(a,20,1.6,.15),subtitle1:x(s,16,1.75,.15),subtitle2:x(a,14,1.57,.1),body1:x(s,16,1.5,.15),body2:x(s,14,1.43,.15),button:x(a,14,1.75,.4,L6),caption:x(s,12,1.66,.4),overline:x(s,12,2.66,1,L6),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return ea({htmlFontSize:l,pxToRem:m,fontFamily:n,fontSize:r,fontWeightLight:i,fontWeightRegular:s,fontWeightMedium:a,fontWeightBold:o,...b},f,{clone:!1})}const Uhe=.2,jhe=.14,zhe=.12;function Wr(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${Uhe})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${jhe})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${zhe})`].join(",")}const $he=["none",Wr(0,2,1,-1,0,1,1,0,0,1,3,0),Wr(0,3,1,-2,0,2,2,0,0,1,5,0),Wr(0,3,3,-2,0,3,4,0,0,1,8,0),Wr(0,2,4,-1,0,4,5,0,0,1,10,0),Wr(0,3,5,-1,0,5,8,0,0,1,14,0),Wr(0,3,5,-1,0,6,10,0,0,1,18,0),Wr(0,4,5,-2,0,7,10,1,0,2,16,1),Wr(0,5,5,-3,0,8,10,1,0,3,14,2),Wr(0,5,6,-3,0,9,12,1,0,3,16,2),Wr(0,6,6,-3,0,10,14,1,0,4,18,3),Wr(0,6,7,-4,0,11,15,1,0,4,20,3),Wr(0,7,8,-4,0,12,17,2,0,5,22,4),Wr(0,7,8,-4,0,13,19,2,0,5,24,4),Wr(0,7,9,-4,0,14,21,2,0,5,26,4),Wr(0,8,9,-5,0,15,22,2,0,6,28,5),Wr(0,8,10,-5,0,16,24,2,0,6,30,5),Wr(0,8,11,-5,0,17,26,2,0,6,32,5),Wr(0,9,11,-5,0,18,28,2,0,7,34,6),Wr(0,9,12,-6,0,19,29,2,0,7,36,6),Wr(0,10,13,-6,0,20,31,3,0,8,38,7),Wr(0,10,13,-6,0,21,33,3,0,8,40,7),Wr(0,10,14,-6,0,22,35,3,0,8,42,7),Wr(0,11,14,-7,0,23,36,3,0,9,44,8),Wr(0,11,15,-7,0,24,38,3,0,9,46,8)],Ghe={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},UY={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function k6(t){return`${Math.round(t)}ms`}function Vhe(t){if(!t)return 0;const e=t/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function Hhe(t){const e={...Ghe,...t.easing},n={...UY,...t.duration};return{getAutoHeightDuration:Vhe,create:(i=["all"],s={})=>{const{duration:a=n.standard,easing:o=e.easeInOut,delay:l=0,...c}=s;return(Array.isArray(i)?i:[i]).map(u=>`${u} ${typeof a=="string"?a:k6(a)} ${o} ${typeof l=="string"?l:k6(l)}`).join(",")},...t,easing:e,duration:n}}const Whe={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function qhe(t){return Ec(t)||typeof t>"u"||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||Array.isArray(t)}function jY(t={}){const e={...t};function n(r){const i=Object.entries(r);for(let s=0;s<i.length;s++){const[a,o]=i[s];!qhe(o)||a.startsWith("unstable_")?delete r[a]:Ec(o)&&(r[a]={...o},n(r[a]))}}return n(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function B6(t){return typeof t=="number"?`${(t*100).toFixed(0)}%`:`calc((${t}) * 100%)`}const Xhe=t=>{if(!Number.isNaN(+t))return+t;const e=t.match(/\d*\.?\d+/g);if(!e)return 0;let n=0;for(let r=0;r<e.length;r+=1)n+=+e[r];return n};function Yhe(t){Object.assign(t,{alpha(e,n){const r=this||t;return r.colorSpace?`oklch(from ${e} l c h / ${typeof n=="string"?`calc(${n})`:n})`:r.vars?`rgba(${e.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof n=="string"?`calc(${n})`:n})`:GT(e,Xhe(n))},lighten(e,n){const r=this||t;return r.colorSpace?`color-mix(in ${r.colorSpace}, ${e}, #fff ${B6(n)})`:kE(e,n)},darken(e,n){const r=this||t;return r.colorSpace?`color-mix(in ${r.colorSpace}, ${e}, #000 ${B6(n)})`:IE(e,n)}})}function KO(t={},...e){const{breakpoints:n,mixins:r={},spacing:i,palette:s={},transitions:a={},typography:o={},shape:l,colorSpace:c,...u}=t;if(t.vars&&t.generateThemeVars===void 0)throw new Error(ad(20));const f=XI({...s,colorSpace:c}),p=OE(t);let m=ea(p,{mixins:Bhe(p.breakpoints,r),palette:f,shadows:$he.slice(),typography:FY(f,o),transitions:Hhe(a),zIndex:{...Whe}});return m=ea(m,u),m=e.reduce((x,b)=>ea(x,b),m),m.unstable_sxConfig={...h_,...u?.unstable_sxConfig},m.unstable_sx=function(b){return Lf({sx:b,theme:this})},m.toRuntimeSource=jY,Yhe(m),m}function ZO(t){let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,Math.round(e*10)/1e3}const Khe=[...Array(25)].map((t,e)=>{if(e===0)return"none";const n=ZO(e);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function zY(t){return{inputPlaceholder:t==="dark"?.5:.42,inputUnderline:t==="dark"?.7:.42,switchTrackDisabled:t==="dark"?.2:.12,switchTrack:t==="dark"?.3:.38}}function $Y(t){return t==="dark"?Khe:[]}function Zhe(t){const{palette:e={mode:"light"},opacity:n,overlays:r,colorSpace:i,...s}=t,a=XI({...e,colorSpace:i});return{palette:a,opacity:{...zY(a.mode),...n},overlays:r||$Y(a.mode),...s}}function Qhe(t){return!!t[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!t[0].match(/sxConfig$/)||t[0]==="palette"&&!!t[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const Jhe=t=>[...[...Array(25)].map((e,n)=>`--${t?`${t}-`:""}overlays-${n}`),`--${t?`${t}-`:""}palette-AppBar-darkBg`,`--${t?`${t}-`:""}palette-AppBar-darkColor`],epe=t=>(e,n)=>{const r=t.rootSelector||":root",i=t.colorSchemeSelector;let s=i;if(i==="class"&&(s=".%s"),i==="data"&&(s="[data-%s]"),i?.startsWith("data-")&&!i.includes("%s")&&(s=`[${i}="%s"]`),t.defaultColorScheme===e){if(e==="dark"){const a={};return Jhe(t.cssVarPrefix).forEach(o=>{a[o]=n[o],delete n[o]}),s==="media"?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:a}}:s?{[s.replace("%s",e)]:a,[`${r}, ${s.replace("%s",e)}`]:n}:{[r]:{...n,...a}}}if(s&&s!=="media")return`${r}, ${s.replace("%s",String(e))}`}else if(e){if(s==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[r]:n}};if(s)return s.replace("%s",String(e))}return r};function tpe(t,e){e.forEach(n=>{t[n]||(t[n]={})})}function nt(t,e,n){!t[e]&&n&&(t[e]=n)}function Sv(t){return typeof t!="string"||!t.startsWith("hsl")?t:RY(t)}function yu(t,e){`${e}Channel`in t||(t[`${e}Channel`]=_v(Sv(t[e])))}function npe(t){return typeof t=="number"?`${t}px`:typeof t=="string"||typeof t=="function"||Array.isArray(t)?t:"8px"}const uc=t=>{try{return t()}catch{}},rpe=(t="mui")=>ohe(t);function i3(t,e,n,r,i){if(!n)return;n=n===!0?{}:n;const s=i==="dark"?"dark":"light";if(!r){e[i]=Zhe({...n,palette:{mode:s,...n?.palette},colorSpace:t});return}const{palette:a,...o}=KO({...r,palette:{mode:s,...n?.palette},colorSpace:t});return e[i]={...n,palette:a,opacity:{...zY(s),...n?.opacity},overlays:n?.overlays||$Y(s)},o}function ipe(t={},...e){const{colorSchemes:n={light:!0},defaultColorScheme:r,disableCssColorScheme:i=!1,cssVarPrefix:s="mui",nativeColor:a=!1,shouldSkipGeneratingVar:o=Qhe,colorSchemeSelector:l=n.light&&n.dark?"media":void 0,rootSelector:c=":root",...u}=t,f=Object.keys(n)[0],p=r||(n.light&&f!=="light"?"light":f),m=rpe(s),{[p]:x,light:b,dark:v,..._}=n,E={..._};let T=x;if((p==="dark"&&!("dark"in n)||p==="light"&&!("light"in n))&&(T=!0),!T)throw new Error(ad(21,p));let A;a&&(A="oklch");const C=i3(A,E,T,u,p);b&&!E.light&&i3(A,E,b,void 0,"light"),v&&!E.dark&&i3(A,E,v,void 0,"dark");let M={defaultColorScheme:p,...C,cssVarPrefix:s,colorSchemeSelector:l,rootSelector:c,getCssVar:m,colorSchemes:E,font:{...khe(C.typography),...C.font},spacing:npe(u.spacing)};Object.keys(M.colorSchemes).forEach(k=>{const I=M.colorSchemes[k].palette,F=H=>{const B=H.split("-"),j=B[1],G=B[2];return m(H,I[j][G])};I.mode==="light"&&(nt(I.common,"background","#fff"),nt(I.common,"onBackground","#000")),I.mode==="dark"&&(nt(I.common,"background","#000"),nt(I.common,"onBackground","#fff"));function z(H,B,j){if(A){let G;return H===_h&&(G=`transparent ${((1-j)*100).toFixed(0)}%`),H===fr&&(G=`#000 ${(j*100).toFixed(0)}%`),H===hr&&(G=`#fff ${(j*100).toFixed(0)}%`),`color-mix(in ${A}, ${B}, ${G})`}return H(B,j)}if(tpe(I,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),I.mode==="light"){nt(I.Alert,"errorColor",z(fr,I.error.light,.6)),nt(I.Alert,"infoColor",z(fr,I.info.light,.6)),nt(I.Alert,"successColor",z(fr,I.success.light,.6)),nt(I.Alert,"warningColor",z(fr,I.warning.light,.6)),nt(I.Alert,"errorFilledBg",F("palette-error-main")),nt(I.Alert,"infoFilledBg",F("palette-info-main")),nt(I.Alert,"successFilledBg",F("palette-success-main")),nt(I.Alert,"warningFilledBg",F("palette-warning-main")),nt(I.Alert,"errorFilledColor",uc(()=>I.getContrastText(I.error.main))),nt(I.Alert,"infoFilledColor",uc(()=>I.getContrastText(I.info.main))),nt(I.Alert,"successFilledColor",uc(()=>I.getContrastText(I.success.main))),nt(I.Alert,"warningFilledColor",uc(()=>I.getContrastText(I.warning.main))),nt(I.Alert,"errorStandardBg",z(hr,I.error.light,.9)),nt(I.Alert,"infoStandardBg",z(hr,I.info.light,.9)),nt(I.Alert,"successStandardBg",z(hr,I.success.light,.9)),nt(I.Alert,"warningStandardBg",z(hr,I.warning.light,.9)),nt(I.Alert,"errorIconColor",F("palette-error-main")),nt(I.Alert,"infoIconColor",F("palette-info-main")),nt(I.Alert,"successIconColor",F("palette-success-main")),nt(I.Alert,"warningIconColor",F("palette-warning-main")),nt(I.AppBar,"defaultBg",F("palette-grey-100")),nt(I.Avatar,"defaultBg",F("palette-grey-400")),nt(I.Button,"inheritContainedBg",F("palette-grey-300")),nt(I.Button,"inheritContainedHoverBg",F("palette-grey-A100")),nt(I.Chip,"defaultBorder",F("palette-grey-400")),nt(I.Chip,"defaultAvatarColor",F("palette-grey-700")),nt(I.Chip,"defaultIconColor",F("palette-grey-700")),nt(I.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),nt(I.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),nt(I.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),nt(I.LinearProgress,"primaryBg",z(hr,I.primary.main,.62)),nt(I.LinearProgress,"secondaryBg",z(hr,I.secondary.main,.62)),nt(I.LinearProgress,"errorBg",z(hr,I.error.main,.62)),nt(I.LinearProgress,"infoBg",z(hr,I.info.main,.62)),nt(I.LinearProgress,"successBg",z(hr,I.success.main,.62)),nt(I.LinearProgress,"warningBg",z(hr,I.warning.main,.62)),nt(I.Skeleton,"bg",A?z(_h,I.text.primary,.11):`rgba(${F("palette-text-primaryChannel")} / 0.11)`),nt(I.Slider,"primaryTrack",z(hr,I.primary.main,.62)),nt(I.Slider,"secondaryTrack",z(hr,I.secondary.main,.62)),nt(I.Slider,"errorTrack",z(hr,I.error.main,.62)),nt(I.Slider,"infoTrack",z(hr,I.info.main,.62)),nt(I.Slider,"successTrack",z(hr,I.success.main,.62)),nt(I.Slider,"warningTrack",z(hr,I.warning.main,.62));const H=A?z(fr,I.background.default,.6825):TS(I.background.default,.8);nt(I.SnackbarContent,"bg",H),nt(I.SnackbarContent,"color",uc(()=>A?YO.text.primary:I.getContrastText(H))),nt(I.SpeedDialAction,"fabHoverBg",TS(I.background.paper,.15)),nt(I.StepConnector,"border",F("palette-grey-400")),nt(I.StepContent,"border",F("palette-grey-400")),nt(I.Switch,"defaultColor",F("palette-common-white")),nt(I.Switch,"defaultDisabledColor",F("palette-grey-100")),nt(I.Switch,"primaryDisabledColor",z(hr,I.primary.main,.62)),nt(I.Switch,"secondaryDisabledColor",z(hr,I.secondary.main,.62)),nt(I.Switch,"errorDisabledColor",z(hr,I.error.main,.62)),nt(I.Switch,"infoDisabledColor",z(hr,I.info.main,.62)),nt(I.Switch,"successDisabledColor",z(hr,I.success.main,.62)),nt(I.Switch,"warningDisabledColor",z(hr,I.warning.main,.62)),nt(I.TableCell,"border",z(hr,z(_h,I.divider,1),.88)),nt(I.Tooltip,"bg",z(_h,I.grey[700],.92))}if(I.mode==="dark"){nt(I.Alert,"errorColor",z(hr,I.error.light,.6)),nt(I.Alert,"infoColor",z(hr,I.info.light,.6)),nt(I.Alert,"successColor",z(hr,I.success.light,.6)),nt(I.Alert,"warningColor",z(hr,I.warning.light,.6)),nt(I.Alert,"errorFilledBg",F("palette-error-dark")),nt(I.Alert,"infoFilledBg",F("palette-info-dark")),nt(I.Alert,"successFilledBg",F("palette-success-dark")),nt(I.Alert,"warningFilledBg",F("palette-warning-dark")),nt(I.Alert,"errorFilledColor",uc(()=>I.getContrastText(I.error.dark))),nt(I.Alert,"infoFilledColor",uc(()=>I.getContrastText(I.info.dark))),nt(I.Alert,"successFilledColor",uc(()=>I.getContrastText(I.success.dark))),nt(I.Alert,"warningFilledColor",uc(()=>I.getContrastText(I.warning.dark))),nt(I.Alert,"errorStandardBg",z(fr,I.error.light,.9)),nt(I.Alert,"infoStandardBg",z(fr,I.info.light,.9)),nt(I.Alert,"successStandardBg",z(fr,I.success.light,.9)),nt(I.Alert,"warningStandardBg",z(fr,I.warning.light,.9)),nt(I.Alert,"errorIconColor",F("palette-error-main")),nt(I.Alert,"infoIconColor",F("palette-info-main")),nt(I.Alert,"successIconColor",F("palette-success-main")),nt(I.Alert,"warningIconColor",F("palette-warning-main")),nt(I.AppBar,"defaultBg",F("palette-grey-900")),nt(I.AppBar,"darkBg",F("palette-background-paper")),nt(I.AppBar,"darkColor",F("palette-text-primary")),nt(I.Avatar,"defaultBg",F("palette-grey-600")),nt(I.Button,"inheritContainedBg",F("palette-grey-800")),nt(I.Button,"inheritContainedHoverBg",F("palette-grey-700")),nt(I.Chip,"defaultBorder",F("palette-grey-700")),nt(I.Chip,"defaultAvatarColor",F("palette-grey-300")),nt(I.Chip,"defaultIconColor",F("palette-grey-300")),nt(I.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),nt(I.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),nt(I.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),nt(I.LinearProgress,"primaryBg",z(fr,I.primary.main,.5)),nt(I.LinearProgress,"secondaryBg",z(fr,I.secondary.main,.5)),nt(I.LinearProgress,"errorBg",z(fr,I.error.main,.5)),nt(I.LinearProgress,"infoBg",z(fr,I.info.main,.5)),nt(I.LinearProgress,"successBg",z(fr,I.success.main,.5)),nt(I.LinearProgress,"warningBg",z(fr,I.warning.main,.5)),nt(I.Skeleton,"bg",A?z(_h,I.text.primary,.13):`rgba(${F("palette-text-primaryChannel")} / 0.13)`),nt(I.Slider,"primaryTrack",z(fr,I.primary.main,.5)),nt(I.Slider,"secondaryTrack",z(fr,I.secondary.main,.5)),nt(I.Slider,"errorTrack",z(fr,I.error.main,.5)),nt(I.Slider,"infoTrack",z(fr,I.info.main,.5)),nt(I.Slider,"successTrack",z(fr,I.success.main,.5)),nt(I.Slider,"warningTrack",z(fr,I.warning.main,.5));const H=A?z(hr,I.background.default,.985):TS(I.background.default,.98);nt(I.SnackbarContent,"bg",H),nt(I.SnackbarContent,"color",uc(()=>A?kY.text.primary:I.getContrastText(H))),nt(I.SpeedDialAction,"fabHoverBg",TS(I.background.paper,.15)),nt(I.StepConnector,"border",F("palette-grey-600")),nt(I.StepContent,"border",F("palette-grey-600")),nt(I.Switch,"defaultColor",F("palette-grey-300")),nt(I.Switch,"defaultDisabledColor",F("palette-grey-600")),nt(I.Switch,"primaryDisabledColor",z(fr,I.primary.main,.55)),nt(I.Switch,"secondaryDisabledColor",z(fr,I.secondary.main,.55)),nt(I.Switch,"errorDisabledColor",z(fr,I.error.main,.55)),nt(I.Switch,"infoDisabledColor",z(fr,I.info.main,.55)),nt(I.Switch,"successDisabledColor",z(fr,I.success.main,.55)),nt(I.Switch,"warningDisabledColor",z(fr,I.warning.main,.55)),nt(I.TableCell,"border",z(fr,z(_h,I.divider,1),.68)),nt(I.Tooltip,"bg",z(_h,I.grey[700],.92))}yu(I.background,"default"),yu(I.background,"paper"),yu(I.common,"background"),yu(I.common,"onBackground"),yu(I,"divider"),Object.keys(I).forEach(H=>{const B=I[H];H!=="tonalOffset"&&B&&typeof B=="object"&&(B.main&&nt(I[H],"mainChannel",_v(Sv(B.main))),B.light&&nt(I[H],"lightChannel",_v(Sv(B.light))),B.dark&&nt(I[H],"darkChannel",_v(Sv(B.dark))),B.contrastText&&nt(I[H],"contrastTextChannel",_v(Sv(B.contrastText))),H==="text"&&(yu(I[H],"primary"),yu(I[H],"secondary")),H==="action"&&(B.active&&yu(I[H],"active"),B.selected&&yu(I[H],"selected")))})}),M=e.reduce((k,I)=>ea(k,I),M);const P={prefix:s,disableCssColorScheme:i,shouldSkipGeneratingVar:o,getSelector:epe(M),enableContrastVars:a},{vars:D,generateThemeVars:N,generateStyleSheets:L}=uhe(M,P);return M.vars=D,Object.entries(M.colorSchemes[M.defaultColorScheme]).forEach(([k,I])=>{M[k]=I}),M.generateThemeVars=N,M.generateStyleSheets=L,M.generateSpacing=function(){return vY(u.spacing,zI(this))},M.getColorSchemeSelector=dhe(l),M.spacing=M.generateSpacing(),M.shouldSkipGeneratingVar=o,M.unstable_sxConfig={...h_,...u?.unstable_sxConfig},M.unstable_sx=function(I){return Lf({sx:I,theme:this})},M.toRuntimeSource=jY,M}function F6(t,e,n){t.colorSchemes&&n&&(t.colorSchemes[e]={...n!==!0&&n,palette:XI({...n===!0?{}:n.palette,mode:e})})}function FE(t={},...e){const{palette:n,cssVariables:r=!1,colorSchemes:i=n?void 0:{light:!0},defaultColorScheme:s=n?.mode,...a}=t,o=s||"light",l=i?.[o],c={...i,...n?{[o]:{...typeof l!="boolean"&&l,palette:n}}:void 0};if(r===!1){if(!("colorSchemes"in t))return KO(t,...e);let u=n;"palette"in t||c[o]&&(c[o]!==!0?u=c[o].palette:o==="dark"&&(u={mode:"dark"}));const f=KO({...t,palette:u},...e);return f.defaultColorScheme=o,f.colorSchemes=c,f.palette.mode==="light"&&(f.colorSchemes.light={...c.light!==!0&&c.light,palette:f.palette},F6(f,"dark",c.dark)),f.palette.mode==="dark"&&(f.colorSchemes.dark={...c.dark!==!0&&c.dark,palette:f.palette},F6(f,"light",c.light)),f}return!n&&!("light"in c)&&o==="light"&&(c.light=!0),ipe({...a,colorSchemes:c,defaultColorScheme:o,...typeof r!="boolean"&&r},...e)}const YI=FE();function ec(){const t=p_(YI);return t[Hl]||t}function UE(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const Fs=t=>UE(t)&&t!=="classes",Ue=EY({themeId:Hl,defaultTheme:YI,rootShouldForwardProp:Fs});function spe({theme:t,...e}){const n=Hl in t?t[Hl]:void 0;return g.jsx(DY,{...e,themeId:n?Hl:void 0,theme:n||t})}const ES={colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:ape}=ahe({themeId:Hl,theme:()=>FE({cssVariables:!0}),colorSchemeStorageKey:ES.colorSchemeStorageKey,modeStorageKey:ES.modeStorageKey,defaultColorScheme:{light:ES.defaultLightColorScheme,dark:ES.defaultDarkColorScheme},resolveTheme:t=>{const e={...t,typography:FY(t.palette,t.typography)};return e.unstable_sx=function(r){return Lf({sx:r,theme:this})},e}}),ope=ape;function lpe({theme:t,...e}){const n=w.useMemo(()=>{if(typeof t=="function")return t;const r=Hl in t?t[Hl]:t;return"colorSchemes"in r?null:"vars"in r?t:{...t,vars:null}},[t]);return n?g.jsx(spe,{theme:n,...e}):g.jsx(ope,{theme:t,...e})}function U6(...t){return t.reduce((e,n)=>n==null?e:function(...i){e.apply(this,i),n.apply(this,i)},()=>{})}function cpe(t){return g.jsx(bY,{...t,defaultTheme:YI,themeId:Hl})}function KI(t){return function(n){return g.jsx(cpe,{styles:typeof t=="function"?r=>t({theme:r,...n}):t})}}function upe(){return GI}const wt=Qfe;function Lt(t){return Xfe(t)}function dpe(t){return Rt("MuiSvgIcon",t)}Pt("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const fpe=t=>{const{color:e,fontSize:n,classes:r}=t,i={root:["root",e!=="inherit"&&`color${Re(e)}`,`fontSize${Re(n)}`]};return Nt(i,dpe,r)},hpe=Ue("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${Re(n.color)}`],e[`fontSize${Re(n.fontSize)}`]]}})(wt(({theme:t})=>({userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:t.transitions?.create?.("fill",{duration:(t.vars??t).transitions?.duration?.shorter}),variants:[{props:e=>!e.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:t.typography?.pxToRem?.(20)||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:t.typography?.pxToRem?.(24)||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:t.typography?.pxToRem?.(35)||"2.1875rem"}},...Object.entries((t.vars??t).palette).filter(([,e])=>e&&e.main).map(([e])=>({props:{color:e},style:{color:(t.vars??t).palette?.[e]?.main}})),{props:{color:"action"},style:{color:(t.vars??t).palette?.action?.active}},{props:{color:"disabled"},style:{color:(t.vars??t).palette?.action?.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}))),QO=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiSvgIcon"}),{children:i,className:s,color:a="inherit",component:o="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:u=!1,titleAccess:f,viewBox:p="0 0 24 24",...m}=r,x=w.isValidElement(i)&&i.type==="svg",b={...r,color:a,component:o,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:u,viewBox:p,hasSvgAsChild:x},v={};u||(v.viewBox=p);const _=fpe(b);return g.jsxs(hpe,{as:o,className:qe(_.root,s),focusable:"false",color:c,"aria-hidden":f?void 0:!0,role:f?"img":void 0,ref:n,...v,...m,...x&&i.props,ownerState:b,children:[x?i.props.children:i,f?g.jsx("title",{children:f}):null]})});QO.muiName="SvgIcon";function Et(t,e){function n(r,i){return g.jsx(QO,{"data-testid":void 0,ref:i,...r,children:t})}return n.muiName=QO.muiName,w.memo(w.forwardRef(n))}function m_(t,e=166){let n;function r(...i){const s=()=>{t.apply(this,i)};clearTimeout(n),n=setTimeout(s,e)}return r.clear=()=>{clearTimeout(n)},r}function Ai(t){return t&&t.ownerDocument||document}function Ro(t){return Ai(t).defaultView||window}function j6(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function Zg(t){const{controlled:e,default:n,name:r,state:i="value"}=t,{current:s}=w.useRef(e!==void 0),[a,o]=w.useState(n),l=s?e:a,c=w.useCallback(u=>{s||o(u)},[]);return[l,c]}function ta(t){const e=w.useRef(t);return ia(()=>{e.current=t}),w.useRef((...n)=>(0,e.current)(...n)).current}function Vr(...t){const e=w.useRef(void 0),n=w.useCallback(r=>{const i=t.map(s=>{if(s==null)return null;if(typeof s=="function"){const a=s,o=a(r);return typeof o=="function"?o:()=>{a(null)}}return s.current=r,()=>{s.current=null}});return()=>{i.forEach(s=>s?.())}},t);return w.useMemo(()=>t.every(r=>r==null)?null:r=>{e.current&&(e.current(),e.current=void 0),r!=null&&(e.current=n(r))},t)}function ppe(t,e){const n=t.charCodeAt(2);return t[0]==="o"&&t[1]==="n"&&n>=65&&n<=90&&typeof e=="function"}function ZI(t,e){if(!t)return e;function n(a,o){const l={};return Object.keys(o).forEach(c=>{ppe(c,o[c])&&typeof a[c]=="function"&&(l[c]=(...u)=>{a[c](...u),o[c](...u)})}),l}if(typeof t=="function"||typeof e=="function")return a=>{const o=typeof e=="function"?e(a):e,l=typeof t=="function"?t({...a,...o}):t,c=qe(a?.className,o?.className,l?.className),u=n(l,o);return{...o,...l,...u,...!!c&&{className:c},...o?.style&&l?.style&&{style:{...o.style,...l.style}},...o?.sx&&l?.sx&&{sx:[...Array.isArray(o.sx)?o.sx:[o.sx],...Array.isArray(l.sx)?l.sx:[l.sx]]}}};const r=e,i=n(t,r),s=qe(r?.className,t?.className);return{...e,...t,...i,...!!s&&{className:s},...r?.style&&t?.style&&{style:{...r.style,...t.style}},...r?.sx&&t?.sx&&{sx:[...Array.isArray(r.sx)?r.sx:[r.sx],...Array.isArray(t.sx)?t.sx:[t.sx]]}}}function GY(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function fb(t,e){return fb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},fb(t,e)}function QI(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,fb(t,e)}const z6={disabled:!1},HT=ri.createContext(null);var mpe=function(e){return e.scrollTop},wv="unmounted",Fh="exited",Uh="entering",_g="entered",JO="exiting",bl=(function(t){QI(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var a=i,o=a&&!a.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?o?(l=Fh,s.appearStatus=Uh):l=_g:r.unmountOnExit||r.mountOnEnter?l=wv:l=Fh,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var a=i.in;return a&&s.status===wv?{status:Fh}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var a=this.state.status;this.props.in?a!==Uh&&a!==_g&&(s=Uh):(a===Uh||a===_g)&&(s=JO)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,a,o;return s=a=o=i,i!=null&&typeof i!="number"&&(s=i.exit,a=i.enter,o=i.appear!==void 0?i.appear:a),{exit:s,enter:a,appear:o}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===Uh){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:SS.findDOMNode(this);a&&mpe(a)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Fh&&this.setState({status:wv})},n.performEnter=function(i){var s=this,a=this.props.enter,o=this.context?this.context.isMounting:i,l=this.props.nodeRef?[o]:[SS.findDOMNode(this),o],c=l[0],u=l[1],f=this.getTimeouts(),p=o?f.appear:f.enter;if(!i&&!a||z6.disabled){this.safeSetState({status:_g},function(){s.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:Uh},function(){s.props.onEntering(c,u),s.onTransitionEnd(p,function(){s.safeSetState({status:_g},function(){s.props.onEntered(c,u)})})})},n.performExit=function(){var i=this,s=this.props.exit,a=this.getTimeouts(),o=this.props.nodeRef?void 0:SS.findDOMNode(this);if(!s||z6.disabled){this.safeSetState({status:Fh},function(){i.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:JO},function(){i.props.onExiting(o),i.onTransitionEnd(a.exit,function(){i.safeSetState({status:Fh},function(){i.props.onExited(o)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,a=!0;return this.nextCallback=function(o){a&&(a=!1,s.nextCallback=null,i(o))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var a=this.props.nodeRef?this.props.nodeRef.current:SS.findDOMNode(this),o=i==null&&!this.props.addEndListener;if(!a||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===wv)return null;var s=this.props,a=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var o=GY(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ri.createElement(HT.Provider,{value:null},typeof a=="function"?a(i,o):ri.cloneElement(ri.Children.only(a),o))},e})(ri.Component);bl.contextType=HT;bl.propTypes={};function km(){}bl.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:km,onEntering:km,onEntered:km,onExit:km,onExiting:km,onExited:km};bl.UNMOUNTED=wv;bl.EXITED=Fh;bl.ENTERING=Uh;bl.ENTERED=_g;bl.EXITING=JO;function VY(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function JI(t,e){var n=function(s){return e&&w.isValidElement(s)?e(s):s},r=Object.create(null);return t&&w.Children.map(t,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function gpe(t,e){t=t||{},e=e||{};function n(u){return u in e?e[u]:t[u]}var r=Object.create(null),i=[];for(var s in t)s in e?i.length&&(r[s]=i,i=[]):i.push(s);var a,o={};for(var l in e){if(r[l])for(a=0;a<r[l].length;a++){var c=r[l][a];o[r[l][a]]=n(c)}o[l]=n(l)}for(a=0;a<i.length;a++)o[i[a]]=n(i[a]);return o}function np(t,e,n){return n[e]!=null?n[e]:t.props[e]}function xpe(t,e){return JI(t.children,function(n){return w.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:np(n,"appear",t),enter:np(n,"enter",t),exit:np(n,"exit",t)})})}function ype(t,e,n){var r=JI(t.children),i=gpe(e,r);return Object.keys(i).forEach(function(s){var a=i[s];if(w.isValidElement(a)){var o=s in e,l=s in r,c=e[s],u=w.isValidElement(c)&&!c.props.in;l&&(!o||u)?i[s]=w.cloneElement(a,{onExited:n.bind(null,a),in:!0,exit:np(a,"exit",t),enter:np(a,"enter",t)}):!l&&o&&!u?i[s]=w.cloneElement(a,{in:!1}):l&&o&&w.isValidElement(c)&&(i[s]=w.cloneElement(a,{onExited:n.bind(null,a),in:c.props.in,exit:np(a,"exit",t),enter:np(a,"enter",t)}))}}),i}var vpe=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},bpe={component:"div",childFactory:function(e){return e}},ek=(function(t){QI(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var a=s.handleExited.bind(VY(s));return s.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},s}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,s){var a=s.children,o=s.handleExited,l=s.firstRender;return{children:l?xpe(i,o):ype(i,a,o),firstRender:!1}},n.handleExited=function(i,s){var a=JI(this.props.children);i.key in a||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(o){var l=ra({},o.children);return delete l[i.key],{children:l}}))},n.render=function(){var i=this.props,s=i.component,a=i.childFactory,o=GY(i,["component","childFactory"]),l=this.state.contextValue,c=vpe(this.state.children).map(a);return delete o.appear,delete o.enter,delete o.exit,s===null?ri.createElement(HT.Provider,{value:l},c):ri.createElement(HT.Provider,{value:l},ri.createElement(s,o,c))},e})(ri.Component);ek.propTypes={};ek.defaultProps=bpe;const $6={};function HY(t,e){const n=w.useRef($6);return n.current===$6&&(n.current=t(e)),n}const _pe=[];function Spe(t){w.useEffect(t,_pe)}class jE{static create(){return new jE}currentId=null;start(e,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},e)}clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function rp(){const t=HY(jE.create).current;return Spe(t.disposeEffect),t}const tk=t=>t.scrollTop;function kf(t,e){const{timeout:n,easing:r,style:i={}}=t;return{duration:i.transitionDuration??(typeof n=="number"?n:n[e.mode]||0),easing:i.transitionTimingFunction??(typeof r=="object"?r[e.mode]:r),delay:i.transitionDelay}}function Dc(t){return typeof t=="string"}function WY(t,e,n){return t===void 0||Dc(t)?e:{...e,ownerState:{...e.ownerState,...n}}}function qY(t,e,n){return typeof t=="function"?t(e,n):t}function Uv(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!e.includes(r)).forEach(r=>{n[r]=t[r]}),n}function G6(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function XY(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:s}=t;if(!e){const m=qe(n?.className,s,i?.className,r?.className),x={...n?.style,...i?.style,...r?.style},b={...n,...i,...r};return m.length>0&&(b.className=m),Object.keys(x).length>0&&(b.style=x),{props:b,internalRef:void 0}}const a=Uv({...i,...r}),o=G6(r),l=G6(i),c=e(a),u=qe(c?.className,n?.className,s,i?.className,r?.className),f={...c?.style,...n?.style,...i?.style,...r?.style},p={...c,...n,...l,...o};return u.length>0&&(p.className=u),Object.keys(f).length>0&&(p.style=f),{props:p,internalRef:c.ref}}function Ft(t,e){const{className:n,elementType:r,ownerState:i,externalForwardedProps:s,internalForwardedProps:a,shouldForwardComponentProp:o=!1,...l}=e,{component:c,slots:u={[t]:void 0},slotProps:f={[t]:void 0},...p}=s,m=u[t]||r,x=qY(f[t],i),{props:{component:b,...v},internalRef:_}=XY({className:n,...l,externalForwardedProps:t==="root"?p:void 0,externalSlotProps:x}),E=Vr(_,x?.ref,e.ref),T=t==="root"?b||c:b,A=WY(m,{...t==="root"&&!c&&!u[t]&&a,...t!=="root"&&!u[t]&&a,...v,...T&&!o&&{as:T},...T&&o&&{component:T},ref:E},i);return[m,A]}function wpe(t){return Rt("MuiCollapse",t)}Pt("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const Tpe=t=>{const{orientation:e,classes:n}=t,r={root:["root",`${e}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${e}`],wrapperInner:["wrapperInner",`${e}`]};return Nt(r,wpe,n)},Epe=Ue("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.orientation],n.state==="entered"&&e.entered,n.state==="exited"&&!n.in&&n.collapsedSize==="0px"&&e.hidden]}})(wt(({theme:t})=>({height:0,overflow:"hidden",transition:t.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:t.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:e})=>e.state==="exited"&&!e.in&&e.collapsedSize==="0px",style:{visibility:"hidden"}}]}))),Cpe=Ue("div",{name:"MuiCollapse",slot:"Wrapper"})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),Ape=Ue("div",{name:"MuiCollapse",slot:"WrapperInner"})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),ld=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiCollapse"}),{addEndListener:i,children:s,className:a,collapsedSize:o="0px",component:l,easing:c,in:u,onEnter:f,onEntered:p,onEntering:m,onExit:x,onExited:b,onExiting:v,orientation:_="vertical",slots:E={},slotProps:T={},style:A,timeout:C=UY.standard,TransitionComponent:M=bl,...P}=r,D={...r,orientation:_,collapsedSize:o},N=Tpe(D),L=ec(),k=rp(),I=w.useRef(null),F=w.useRef(),z=typeof o=="number"?`${o}px`:o,H=_==="horizontal",B=H?"width":"height",j=w.useRef(null),G=Vr(n,j),W=Q=>et=>{if(Q){const ze=j.current;et===void 0?Q(ze):Q(ze,et)}},re=()=>I.current?I.current[H?"clientWidth":"clientHeight"]:0,$=W((Q,et)=>{I.current&&H&&(I.current.style.position="absolute"),Q.style[B]=z,f&&f(Q,et)}),ee=W((Q,et)=>{const ze=re();I.current&&H&&(I.current.style.position="");const{duration:Je,easing:fe}=kf({style:A,timeout:C,easing:c},{mode:"enter"});if(C==="auto"){const rt=L.transitions.getAutoHeightDuration(ze);Q.style.transitionDuration=`${rt}ms`,F.current=rt}else Q.style.transitionDuration=typeof Je=="string"?Je:`${Je}ms`;Q.style[B]=`${ze}px`,Q.style.transitionTimingFunction=fe,m&&m(Q,et)}),oe=W((Q,et)=>{Q.style[B]="auto",p&&p(Q,et)}),me=W(Q=>{Q.style[B]=`${re()}px`,x&&x(Q)}),te=W(b),K=W(Q=>{const et=re(),{duration:ze,easing:Je}=kf({style:A,timeout:C,easing:c},{mode:"exit"});if(C==="auto"){const fe=L.transitions.getAutoHeightDuration(et);Q.style.transitionDuration=`${fe}ms`,F.current=fe}else Q.style.transitionDuration=typeof ze=="string"?ze:`${ze}ms`;Q.style[B]=z,Q.style.transitionTimingFunction=Je,v&&v(Q)}),ne=Q=>{C==="auto"&&k.start(F.current||0,Q),i&&i(j.current,Q)},Ee={slots:E,slotProps:T,component:l},[se,ve]=Ft("root",{ref:G,className:qe(N.root,a),elementType:Epe,externalForwardedProps:Ee,ownerState:D,additionalProps:{style:{[H?"minWidth":"minHeight"]:z,...A}}}),[Pe,ge]=Ft("wrapper",{ref:I,className:N.wrapper,elementType:Cpe,externalForwardedProps:Ee,ownerState:D}),[be,_e]=Ft("wrapperInner",{className:N.wrapperInner,elementType:Ape,externalForwardedProps:Ee,ownerState:D});return g.jsx(M,{in:u,onEnter:$,onEntered:oe,onEntering:ee,onExit:me,onExited:te,onExiting:K,addEndListener:ne,nodeRef:j,timeout:C==="auto"?null:C,...P,children:(Q,{ownerState:et,...ze})=>{const Je={...D,state:Q};return g.jsx(se,{...ve,className:qe(ve.className,{entered:N.entered,exited:!u&&z==="0px"&&N.hidden}[Q]),ownerState:Je,...ze,children:g.jsx(Pe,{...ge,ownerState:Je,children:g.jsx(be,{..._e,ownerState:Je,children:s})})})}})});ld&&(ld.muiSupportAuto=!0);function Mpe(t){return Rt("MuiPaper",t)}Pt("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const Rpe=t=>{const{square:e,elevation:n,variant:r,classes:i}=t,s={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${n}`]};return Nt(s,Mpe,i)},Ppe=Ue("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,n.variant==="elevation"&&e[`elevation${n.elevation}`]]}})(wt(({theme:t})=>({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow"),variants:[{props:({ownerState:e})=>!e.square,style:{borderRadius:t.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(t.vars||t).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),gn=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiPaper"}),i=ec(),{className:s,component:a="div",elevation:o=1,square:l=!1,variant:c="elevation",...u}=r,f={...r,component:a,elevation:o,square:l,variant:c},p=Rpe(f);return g.jsx(Ppe,{as:a,ownerState:f,className:qe(p.root,s),ref:n,...u,style:{...c==="elevation"&&{"--Paper-shadow":(i.vars||i).shadows[o],...i.vars&&{"--Paper-overlay":i.vars.overlays?.[o]},...!i.vars&&i.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${GT("#fff",ZO(o))}, ${GT("#fff",ZO(o))})`}},...u.style}})}),YY=w.createContext({});function Npe(t){return Rt("MuiAccordion",t)}const CS=Pt("MuiAccordion",["root","heading","rounded","expanded","disabled","gutters","region"]),Ope=t=>{const{classes:e,square:n,expanded:r,disabled:i,disableGutters:s}=t;return Nt({root:["root",!n&&"rounded",r&&"expanded",i&&"disabled",!s&&"gutters"],heading:["heading"],region:["region"]},Npe,e)},Dpe=Ue(gn,{name:"MuiAccordion",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${CS.region}`]:e.region},e.root,!n.square&&e.rounded,!n.disableGutters&&e.gutters]}})(wt(({theme:t})=>{const e={duration:t.transitions.duration.shortest};return{position:"relative",transition:t.transitions.create(["margin"],e),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(t.vars||t).palette.divider,transition:t.transitions.create(["opacity","background-color"],e)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${CS.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${CS.disabled}`]:{backgroundColor:(t.vars||t).palette.action.disabledBackground}}}),wt(({theme:t})=>({variants:[{props:e=>!e.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(t.vars||t).shape.borderRadius,borderBottomRightRadius:(t.vars||t).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:e=>!e.disableGutters,style:{[`&.${CS.expanded}`]:{margin:"16px 0"}}}]}))),Lpe=Ue("h3",{name:"MuiAccordion",slot:"Heading"})({all:"unset"}),Ipe=Ue("div",{name:"MuiAccordion",slot:"Region"})({}),kpe=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiAccordion"}),{children:i,className:s,defaultExpanded:a=!1,disabled:o=!1,disableGutters:l=!1,expanded:c,onChange:u,square:f=!1,slots:p={},slotProps:m={},TransitionComponent:x,TransitionProps:b,...v}=r,[_,E]=Zg({controlled:c,default:a,name:"Accordion",state:"expanded"}),T=w.useCallback(re=>{E(!_),u&&u(re,!_)},[_,u,E]),[A,...C]=w.Children.toArray(i),M=w.useMemo(()=>({expanded:_,disabled:o,disableGutters:l,toggle:T}),[_,o,l,T]),P={...r,square:f,disabled:o,disableGutters:l,expanded:_},D=Ope(P),N={transition:x,...p},L={transition:b,...m},k={slots:N,slotProps:L},[I,F]=Ft("root",{elementType:Dpe,externalForwardedProps:{...k,...v},className:qe(D.root,s),shouldForwardComponentProp:!0,ownerState:P,ref:n,additionalProps:{square:f}}),[z,H]=Ft("heading",{elementType:Lpe,externalForwardedProps:k,className:D.heading,ownerState:P}),[B,j]=Ft("transition",{elementType:ld,externalForwardedProps:k,ownerState:P}),[G,W]=Ft("region",{elementType:Ipe,externalForwardedProps:k,ownerState:P,className:D.region,additionalProps:{"aria-labelledby":A.props.id,id:A.props["aria-controls"],role:"region"}});return g.jsxs(I,{...F,children:[g.jsx(z,{...H,children:g.jsx(YY.Provider,{value:M,children:A})}),g.jsx(B,{in:_,timeout:"auto",...j,children:g.jsx(G,{...W,children:C})})]})});function Bpe(t){return Rt("MuiAccordionDetails",t)}Pt("MuiAccordionDetails",["root"]);const Fpe=t=>{const{classes:e}=t;return Nt({root:["root"]},Bpe,e)},Upe=Ue("div",{name:"MuiAccordionDetails",slot:"Root"})(wt(({theme:t})=>({padding:t.spacing(1,2,2)}))),jpe=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiAccordionDetails"}),{className:i,...s}=r,a=r,o=Fpe(a);return g.jsx(Upe,{className:qe(o.root,i),ref:n,ownerState:a,...s})});function Qg(t){try{return t.matches(":focus-visible")}catch{}return!1}class WT{static create(){return new WT}static use(){const e=HY(WT.create).current,[n,r]=w.useState(!1);return e.shouldMount=n,e.setShouldMount=r,w.useEffect(e.mountEffect,[n]),e}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=$pe(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())};start(...e){this.mount().then(()=>this.ref.current?.start(...e))}stop(...e){this.mount().then(()=>this.ref.current?.stop(...e))}pulsate(...e){this.mount().then(()=>this.ref.current?.pulsate(...e))}}function zpe(){return WT.use()}function $pe(){let t,e;const n=new Promise((r,i)=>{t=r,e=i});return n.resolve=t,n.reject=e,n}function Gpe(t){const{className:e,classes:n,pulsate:r=!1,rippleX:i,rippleY:s,rippleSize:a,in:o,onExited:l,timeout:c}=t,[u,f]=w.useState(!1),p=qe(e,n.ripple,n.rippleVisible,r&&n.ripplePulsate),m={width:a,height:a,top:-(a/2)+s,left:-(a/2)+i},x=qe(n.child,u&&n.childLeaving,r&&n.childPulsate);return!o&&!u&&f(!0),w.useEffect(()=>{if(!o&&l!=null){const b=setTimeout(l,c);return()=>{clearTimeout(b)}}},[l,o,c]),g.jsx("span",{className:p,style:m,children:g.jsx("span",{className:x})})}const Zo=Pt("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),eD=550,Vpe=80,Hpe=Hf`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,Wpe=Hf`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,qpe=Hf`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,Xpe=Ue("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Ype=Ue(Gpe,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${Zo.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${Hpe};
    animation-duration: ${eD}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  &.${Zo.ripplePulsate} {
    animation-duration: ${({theme:t})=>t.transitions.duration.shorter}ms;
  }

  & .${Zo.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${Zo.childLeaving} {
    opacity: 0;
    animation-name: ${Wpe};
    animation-duration: ${eD}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  & .${Zo.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${qpe};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,Kpe=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:s={},className:a,...o}=r,[l,c]=w.useState([]),u=w.useRef(0),f=w.useRef(null);w.useEffect(()=>{f.current&&(f.current(),f.current=null)},[l]);const p=w.useRef(!1),m=rp(),x=w.useRef(null),b=w.useRef(null),v=w.useCallback(A=>{const{pulsate:C,rippleX:M,rippleY:P,rippleSize:D,cb:N}=A;c(L=>[...L,g.jsx(Ype,{classes:{ripple:qe(s.ripple,Zo.ripple),rippleVisible:qe(s.rippleVisible,Zo.rippleVisible),ripplePulsate:qe(s.ripplePulsate,Zo.ripplePulsate),child:qe(s.child,Zo.child),childLeaving:qe(s.childLeaving,Zo.childLeaving),childPulsate:qe(s.childPulsate,Zo.childPulsate)},timeout:eD,pulsate:C,rippleX:M,rippleY:P,rippleSize:D},u.current)]),u.current+=1,f.current=N},[s]),_=w.useCallback((A={},C={},M=()=>{})=>{const{pulsate:P=!1,center:D=i||C.pulsate,fakeElement:N=!1}=C;if(A?.type==="mousedown"&&p.current){p.current=!1;return}A?.type==="touchstart"&&(p.current=!0);const L=N?null:b.current,k=L?L.getBoundingClientRect():{width:0,height:0,left:0,top:0};let I,F,z;if(D||A===void 0||A.clientX===0&&A.clientY===0||!A.clientX&&!A.touches)I=Math.round(k.width/2),F=Math.round(k.height/2);else{const{clientX:H,clientY:B}=A.touches&&A.touches.length>0?A.touches[0]:A;I=Math.round(H-k.left),F=Math.round(B-k.top)}if(D)z=Math.sqrt((2*k.width**2+k.height**2)/3),z%2===0&&(z+=1);else{const H=Math.max(Math.abs((L?L.clientWidth:0)-I),I)*2+2,B=Math.max(Math.abs((L?L.clientHeight:0)-F),F)*2+2;z=Math.sqrt(H**2+B**2)}A?.touches?x.current===null&&(x.current=()=>{v({pulsate:P,rippleX:I,rippleY:F,rippleSize:z,cb:M})},m.start(Vpe,()=>{x.current&&(x.current(),x.current=null)})):v({pulsate:P,rippleX:I,rippleY:F,rippleSize:z,cb:M})},[i,v,m]),E=w.useCallback(()=>{_({},{pulsate:!0})},[_]),T=w.useCallback((A,C)=>{if(m.clear(),A?.type==="touchend"&&x.current){x.current(),x.current=null,m.start(0,()=>{T(A,C)});return}x.current=null,c(M=>M.length>0?M.slice(1):M),f.current=C},[m]);return w.useImperativeHandle(n,()=>({pulsate:E,start:_,stop:T}),[E,_,T]),g.jsx(Xpe,{className:qe(Zo.root,s.root,a),ref:b,...o,children:g.jsx(ek,{component:null,exit:!0,children:l})})});function Zpe(t){return Rt("MuiButtonBase",t)}const Qpe=Pt("MuiButtonBase",["root","disabled","focusVisible"]),Jpe=t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:r,classes:i}=t,a=Nt({root:["root",e&&"disabled",n&&"focusVisible"]},Zpe,i);return n&&r&&(a.root+=` ${r}`),a},eme=Ue("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Qpe.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),ul=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:s=!1,children:a,className:o,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:f=!1,focusRipple:p=!1,focusVisibleClassName:m,LinkComponent:x="a",onBlur:b,onClick:v,onContextMenu:_,onDragLeave:E,onFocus:T,onFocusVisible:A,onKeyDown:C,onKeyUp:M,onMouseDown:P,onMouseLeave:D,onMouseUp:N,onTouchEnd:L,onTouchMove:k,onTouchStart:I,tabIndex:F=0,TouchRippleProps:z,touchRippleRef:H,type:B,...j}=r,G=w.useRef(null),W=zpe(),re=Vr(W.ref,H),[$,ee]=w.useState(!1);c&&$&&ee(!1),w.useImperativeHandle(i,()=>({focusVisible:()=>{ee(!0),G.current.focus()}}),[]);const oe=W.shouldMount&&!u&&!c;w.useEffect(()=>{$&&p&&!u&&W.pulsate()},[u,p,$,W]);const me=vu(W,"start",P,f),te=vu(W,"stop",_,f),K=vu(W,"stop",E,f),ne=vu(W,"stop",N,f),Ee=vu(W,"stop",Se=>{$&&Se.preventDefault(),D&&D(Se)},f),se=vu(W,"start",I,f),ve=vu(W,"stop",L,f),Pe=vu(W,"stop",k,f),ge=vu(W,"stop",Se=>{Qg(Se.target)||ee(!1),b&&b(Se)},!1),be=ta(Se=>{G.current||(G.current=Se.currentTarget),Qg(Se.target)&&(ee(!0),A&&A(Se)),T&&T(Se)}),_e=()=>{const Se=G.current;return l&&l!=="button"&&!(Se.tagName==="A"&&Se.href)},Q=ta(Se=>{p&&!Se.repeat&&$&&Se.key===" "&&W.stop(Se,()=>{W.start(Se)}),Se.target===Se.currentTarget&&_e()&&Se.key===" "&&Se.preventDefault(),C&&C(Se),Se.target===Se.currentTarget&&_e()&&Se.key==="Enter"&&!c&&(Se.preventDefault(),v&&v(Se))}),et=ta(Se=>{p&&Se.key===" "&&$&&!Se.defaultPrevented&&W.stop(Se,()=>{W.pulsate(Se)}),M&&M(Se),v&&Se.target===Se.currentTarget&&_e()&&Se.key===" "&&!Se.defaultPrevented&&v(Se)});let ze=l;ze==="button"&&(j.href||j.to)&&(ze=x);const Je={};ze==="button"?(Je.type=B===void 0?"button":B,Je.disabled=c):(!j.href&&!j.to&&(Je.role="button"),c&&(Je["aria-disabled"]=c));const fe=Vr(n,G),rt={...r,centerRipple:s,component:l,disabled:c,disableRipple:u,disableTouchRipple:f,focusRipple:p,tabIndex:F,focusVisible:$},$e=Jpe(rt);return g.jsxs(eme,{as:ze,className:qe($e.root,o),ownerState:rt,onBlur:ge,onClick:v,onContextMenu:te,onFocus:be,onKeyDown:Q,onKeyUp:et,onMouseDown:me,onMouseLeave:Ee,onMouseUp:ne,onDragLeave:K,onTouchEnd:ve,onTouchMove:Pe,onTouchStart:se,ref:fe,tabIndex:c?-1:F,type:B,...Je,...j,children:[a,oe?g.jsx(Kpe,{ref:re,center:s,...z}):null]})});function vu(t,e,n,r=!1){return ta(i=>(n&&n(i),r||t[e](i),!0))}function tme(t){return Rt("MuiAccordionSummary",t)}const Tg=Pt("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),nme=t=>{const{classes:e,expanded:n,disabled:r,disableGutters:i}=t;return Nt({root:["root",n&&"expanded",r&&"disabled",!i&&"gutters"],focusVisible:["focusVisible"],content:["content",n&&"expanded",!i&&"contentGutters"],expandIconWrapper:["expandIconWrapper",n&&"expanded"]},tme,e)},rme=Ue(ul,{name:"MuiAccordionSummary",slot:"Root"})(wt(({theme:t})=>{const e={duration:t.transitions.duration.shortest};return{display:"flex",width:"100%",minHeight:48,padding:t.spacing(0,2),transition:t.transitions.create(["min-height","background-color"],e),[`&.${Tg.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${Tg.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`&:hover:not(.${Tg.disabled})`]:{cursor:"pointer"},variants:[{props:n=>!n.disableGutters,style:{[`&.${Tg.expanded}`]:{minHeight:64}}}]}})),ime=Ue("span",{name:"MuiAccordionSummary",slot:"Content"})(wt(({theme:t})=>({display:"flex",textAlign:"start",flexGrow:1,margin:"12px 0",variants:[{props:e=>!e.disableGutters,style:{transition:t.transitions.create(["margin"],{duration:t.transitions.duration.shortest}),[`&.${Tg.expanded}`]:{margin:"20px 0"}}}]}))),sme=Ue("span",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper"})(wt(({theme:t})=>({display:"flex",color:(t.vars||t).palette.action.active,transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),[`&.${Tg.expanded}`]:{transform:"rotate(180deg)"}}))),ame=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiAccordionSummary"}),{children:i,className:s,expandIcon:a,focusVisibleClassName:o,onClick:l,slots:c,slotProps:u,...f}=r,{disabled:p=!1,disableGutters:m,expanded:x,toggle:b}=w.useContext(YY),v=L=>{b&&b(L),l&&l(L)},_={...r,expanded:x,disabled:p,disableGutters:m},E=nme(_),T={slots:c,slotProps:u},[A,C]=Ft("root",{ref:n,shouldForwardComponentProp:!0,className:qe(E.root,s),elementType:rme,externalForwardedProps:{...T,...f},ownerState:_,additionalProps:{focusRipple:!1,disableRipple:!0,disabled:p,"aria-expanded":x,focusVisibleClassName:qe(E.focusVisible,o)},getSlotProps:L=>({...L,onClick:k=>{L.onClick?.(k),v(k)}})}),[M,P]=Ft("content",{className:E.content,elementType:ime,externalForwardedProps:T,ownerState:_}),[D,N]=Ft("expandIconWrapper",{className:E.expandIconWrapper,elementType:sme,externalForwardedProps:T,ownerState:_});return g.jsxs(A,{...C,children:[g.jsx(M,{...P,children:i}),a&&g.jsx(D,{...N,children:a})]})});function ome(t){return typeof t.main=="string"}function lme(t,e=[]){if(!ome(t))return!1;for(const n of e)if(!t.hasOwnProperty(n)||typeof t[n]!="string")return!1;return!0}function Hn(t=[]){return([,e])=>e&&lme(e,t)}function cme(t){return Rt("MuiAlert",t)}const V6=Pt("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);function ume(t){return Rt("MuiCircularProgress",t)}Pt("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","track","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const El=44,tD=Hf`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,nD=Hf`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,dme=typeof tD!="string"?dx`
        animation: ${tD} 1.4s linear infinite;
      `:null,fme=typeof nD!="string"?dx`
        animation: ${nD} 1.4s ease-in-out infinite;
      `:null,hme=t=>{const{classes:e,variant:n,color:r,disableShrink:i}=t,s={root:["root",n,`color${Re(r)}`],svg:["svg"],track:["track"],circle:["circle",`circle${Re(n)}`,i&&"circleDisableShrink"]};return Nt(s,ume,e)},pme=Ue("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`color${Re(n.color)}`]]}})(wt(({theme:t})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("transform")}},{props:{variant:"indeterminate"},style:dme||{animation:`${tD} 1.4s linear infinite`}},...Object.entries(t.palette).filter(Hn()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}}))]}))),mme=Ue("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),gme=Ue("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.circle,e[`circle${Re(n.variant)}`],n.disableShrink&&e.circleDisableShrink]}})(wt(({theme:t})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink,style:fme||{animation:`${nD} 1.4s ease-in-out infinite`}}]}))),xme=Ue("circle",{name:"MuiCircularProgress",slot:"Track"})(wt(({theme:t})=>({stroke:"currentColor",opacity:(t.vars||t).palette.action.activatedOpacity}))),lr=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiCircularProgress"}),{className:i,color:s="primary",disableShrink:a=!1,enableTrackSlot:o=!1,size:l=40,style:c,thickness:u=3.6,value:f=0,variant:p="indeterminate",...m}=r,x={...r,color:s,disableShrink:a,size:l,thickness:u,value:f,variant:p,enableTrackSlot:o},b=hme(x),v={},_={},E={};if(p==="determinate"){const T=2*Math.PI*((El-u)/2);v.strokeDasharray=T.toFixed(3),E["aria-valuenow"]=Math.round(f),v.strokeDashoffset=`${((100-f)/100*T).toFixed(3)}px`,_.transform="rotate(-90deg)"}return g.jsx(pme,{className:qe(b.root,i),style:{width:l,height:l,..._,...c},ownerState:x,ref:n,role:"progressbar",...E,...m,children:g.jsxs(mme,{className:b.svg,ownerState:x,viewBox:`${El/2} ${El/2} ${El} ${El}`,children:[o?g.jsx(xme,{className:b.track,ownerState:x,cx:El,cy:El,r:(El-u)/2,fill:"none",strokeWidth:u,"aria-hidden":"true"}):null,g.jsx(gme,{className:b.circle,style:v,ownerState:x,cx:El,cy:El,r:(El-u)/2,fill:"none",strokeWidth:u})]})})});function yme(t){return Rt("MuiIconButton",t)}const H6=Pt("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),vme=t=>{const{classes:e,disabled:n,color:r,edge:i,size:s,loading:a}=t,o={root:["root",a&&"loading",n&&"disabled",r!=="default"&&`color${Re(r)}`,i&&`edge${Re(i)}`,`size${Re(s)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return Nt(o,yme,e)},bme=Ue(ul,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.loading&&e.loading,n.color!=="default"&&e[`color${Re(n.color)}`],n.edge&&e[`edge${Re(n.edge)}`],e[`size${Re(n.size)}`]]}})(wt(({theme:t})=>({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),variants:[{props:e=>!e.disableRipple,style:{"--IconButton-hoverBg":t.alpha((t.vars||t).palette.action.active,(t.vars||t).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),wt(({theme:t})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(t.palette).filter(Hn()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}})),...Object.entries(t.palette).filter(Hn()).map(([e])=>({props:{color:e},style:{"--IconButton-hoverBg":t.alpha((t.vars||t).palette[e].main,(t.vars||t).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:t.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:t.typography.pxToRem(28)}}],[`&.${H6.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled},[`&.${H6.loading}`]:{color:"transparent"}}))),_me=Ue("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:t})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(t.vars||t).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),Gt=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiIconButton"}),{edge:i=!1,children:s,className:a,color:o="default",disabled:l=!1,disableFocusRipple:c=!1,size:u="medium",id:f,loading:p=null,loadingIndicator:m,...x}=r,b=$p(f),v=m??g.jsx(lr,{"aria-labelledby":b,color:"inherit",size:16}),_={...r,edge:i,color:o,disabled:l,disableFocusRipple:c,loading:p,loadingIndicator:v,size:u},E=vme(_);return g.jsxs(bme,{id:p?b:f,className:qe(E.root,a),centerRipple:!0,focusRipple:!c,disabled:l||p,ref:n,...x,ownerState:_,children:[typeof p=="boolean"&&g.jsx("span",{className:E.loadingWrapper,style:{display:"contents"},children:g.jsx(_me,{className:E.loadingIndicator,ownerState:_,children:p&&v})}),s]})}),Sme=Et(g.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"})),wme=Et(g.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"})),Tme=Et(g.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),Eme=Et(g.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"})),Cme=Et(g.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),Ame=t=>{const{variant:e,color:n,severity:r,classes:i}=t,s={root:["root",`color${Re(n||r)}`,`${e}${Re(n||r)}`,`${e}`],icon:["icon"],message:["message"],action:["action"]};return Nt(s,cme,i)},Mme=Ue(gn,{name:"MuiAlert",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${Re(n.color||n.severity)}`]]}})(wt(({theme:t})=>{const e=t.palette.mode==="light"?t.darken:t.lighten,n=t.palette.mode==="light"?t.lighten:t.darken;return{...t.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(t.palette).filter(Hn(["light"])).map(([r])=>({props:{colorSeverity:r,variant:"standard"},style:{color:t.vars?t.vars.palette.Alert[`${r}Color`]:e(t.palette[r].light,.6),backgroundColor:t.vars?t.vars.palette.Alert[`${r}StandardBg`]:n(t.palette[r].light,.9),[`& .${V6.icon}`]:t.vars?{color:t.vars.palette.Alert[`${r}IconColor`]}:{color:t.palette[r].main}}})),...Object.entries(t.palette).filter(Hn(["light"])).map(([r])=>({props:{colorSeverity:r,variant:"outlined"},style:{color:t.vars?t.vars.palette.Alert[`${r}Color`]:e(t.palette[r].light,.6),border:`1px solid ${(t.vars||t).palette[r].light}`,[`& .${V6.icon}`]:t.vars?{color:t.vars.palette.Alert[`${r}IconColor`]}:{color:t.palette[r].main}}})),...Object.entries(t.palette).filter(Hn(["dark"])).map(([r])=>({props:{colorSeverity:r,variant:"filled"},style:{fontWeight:t.typography.fontWeightMedium,...t.vars?{color:t.vars.palette.Alert[`${r}FilledColor`],backgroundColor:t.vars.palette.Alert[`${r}FilledBg`]}:{backgroundColor:t.palette.mode==="dark"?t.palette[r].dark:t.palette[r].main,color:t.palette.getContrastText(t.palette[r].main)}}}))]}})),Rme=Ue("div",{name:"MuiAlert",slot:"Icon"})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),Pme=Ue("div",{name:"MuiAlert",slot:"Message"})({padding:"8px 0",minWidth:0,overflow:"auto"}),Nme=Ue("div",{name:"MuiAlert",slot:"Action"})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),W6={success:g.jsx(Sme,{fontSize:"inherit"}),warning:g.jsx(wme,{fontSize:"inherit"}),error:g.jsx(Tme,{fontSize:"inherit"}),info:g.jsx(Eme,{fontSize:"inherit"})},mi=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiAlert"}),{action:i,children:s,className:a,closeText:o="Close",color:l,components:c={},componentsProps:u={},icon:f,iconMapping:p=W6,onClose:m,role:x="alert",severity:b="success",slotProps:v={},slots:_={},variant:E="standard",...T}=r,A={...r,color:l,severity:b,variant:E,colorSeverity:l||b},C=Ame(A),M={slots:{closeButton:c.CloseButton,closeIcon:c.CloseIcon,..._},slotProps:{...u,...v}},[P,D]=Ft("root",{ref:n,shouldForwardComponentProp:!0,className:qe(C.root,a),elementType:Mme,externalForwardedProps:{...M,...T},ownerState:A,additionalProps:{role:x,elevation:0}}),[N,L]=Ft("icon",{className:C.icon,elementType:Rme,externalForwardedProps:M,ownerState:A}),[k,I]=Ft("message",{className:C.message,elementType:Pme,externalForwardedProps:M,ownerState:A}),[F,z]=Ft("action",{className:C.action,elementType:Nme,externalForwardedProps:M,ownerState:A}),[H,B]=Ft("closeButton",{elementType:Gt,externalForwardedProps:M,ownerState:A}),[j,G]=Ft("closeIcon",{elementType:Cme,externalForwardedProps:M,ownerState:A});return g.jsxs(P,{...D,children:[f!==!1?g.jsx(N,{...L,children:f||p[b]||W6[b]}):null,g.jsx(k,{...I,children:s}),i!=null?g.jsx(F,{...z,children:i}):null,i==null&&m?g.jsx(F,{...z,children:g.jsx(H,{size:"small","aria-label":o,title:o,color:"inherit",onClick:m,...B,children:g.jsx(j,{fontSize:"small",...G})})}):null]})});function Ome(t){return Rt("MuiTypography",t)}const q6=Pt("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),Dme={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},Lme=upe(),Ime=t=>{const{align:e,gutterBottom:n,noWrap:r,paragraph:i,variant:s,classes:a}=t,o={root:["root",s,t.align!=="inherit"&&`align${Re(e)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return Nt(o,Ome,a)},kme=Ue("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e[`align${Re(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(wt(({theme:t})=>({margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(t.typography).filter(([e,n])=>e!=="inherit"&&n&&typeof n=="object").map(([e,n])=>({props:{variant:e},style:n})),...Object.entries(t.palette).filter(Hn()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}})),...Object.entries(t.palette?.text||{}).filter(([,e])=>typeof e=="string").map(([e])=>({props:{color:`text${Re(e)}`},style:{color:(t.vars||t).palette.text[e]}})),{props:({ownerState:e})=>e.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:e})=>e.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:e})=>e.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:e})=>e.paragraph,style:{marginBottom:16}}]}))),X6={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Z=w.forwardRef(function(e,n){const{color:r,...i}=Lt({props:e,name:"MuiTypography"}),s=!Dme[r],a=Lme({...i,...s&&{color:r}}),{align:o="inherit",className:l,component:c,gutterBottom:u=!1,noWrap:f=!1,paragraph:p=!1,variant:m="body1",variantMapping:x=X6,...b}=a,v={...a,align:o,color:r,className:l,component:c,gutterBottom:u,noWrap:f,paragraph:p,variant:m,variantMapping:x},_=c||(p?"p":x[m]||X6[m])||"span",E=Ime(v);return g.jsx(kme,{as:_,ref:n,className:qe(E.root,l),...b,ownerState:v,style:{...o!=="inherit"&&{"--Typography-textAlign":o},...b.style}})});function Bme(t){return Rt("MuiAppBar",t)}Pt("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const Fme=t=>{const{color:e,position:n,classes:r}=t,i={root:["root",`color${Re(e)}`,`position${Re(n)}`]};return Nt(i,Bme,r)},Y6=(t,e)=>t?`${t?.replace(")","")}, ${e})`:e,Ume=Ue(gn,{name:"MuiAppBar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`position${Re(n.position)}`],e[`color${Re(n.color)}`]]}})(wt(({theme:t})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":t.vars?t.vars.palette.AppBar.defaultBg:t.palette.grey[100],"--AppBar-color":t.vars?t.vars.palette.text.primary:t.palette.getContrastText(t.palette.grey[100]),...t.applyStyles("dark",{"--AppBar-background":t.vars?t.vars.palette.AppBar.defaultBg:t.palette.grey[900],"--AppBar-color":t.vars?t.vars.palette.text.primary:t.palette.getContrastText(t.palette.grey[900])})}},...Object.entries(t.palette).filter(Hn(["contrastText"])).map(([e])=>({props:{color:e},style:{"--AppBar-background":(t.vars??t).palette[e].main,"--AppBar-color":(t.vars??t).palette[e].contrastText}})),{props:e=>e.enableColorOnDark===!0&&!["inherit","transparent"].includes(e.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:e=>e.enableColorOnDark===!1&&!["inherit","transparent"].includes(e.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...t.applyStyles("dark",{backgroundColor:t.vars?Y6(t.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:t.vars?Y6(t.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...t.applyStyles("dark",{backgroundImage:"none"})}}]}))),jme=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiAppBar"}),{className:i,color:s="primary",enableColorOnDark:a=!1,position:o="fixed",...l}=r,c={...r,color:s,position:o,enableColorOnDark:a},u=Fme(c);return g.jsx(Ume,{square:!0,component:"header",ownerState:c,elevation:4,className:qe(u.root,i,o==="fixed"&&"mui-fixed"),ref:n,...l})});function KY(t){const e=w.useRef({});return w.useEffect(()=>{e.current=t}),e.current}var Ha="top",dl="bottom",fl="right",Wa="left",nk="auto",g_=[Ha,dl,fl,Wa],Jg="start",hb="end",zme="clippingParents",ZY="viewport",Py="popper",$me="reference",K6=g_.reduce(function(t,e){return t.concat([e+"-"+Jg,e+"-"+hb])},[]),QY=[].concat(g_,[nk]).reduce(function(t,e){return t.concat([e,e+"-"+Jg,e+"-"+hb])},[]),Gme="beforeRead",Vme="read",Hme="afterRead",Wme="beforeMain",qme="main",Xme="afterMain",Yme="beforeWrite",Kme="write",Zme="afterWrite",Qme=[Gme,Vme,Hme,Wme,qme,Xme,Yme,Kme,Zme];function Bc(t){return t?(t.nodeName||"").toLowerCase():null}function Po(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Sp(t){var e=Po(t).Element;return t instanceof e||t instanceof Element}function sl(t){var e=Po(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function rk(t){if(typeof ShadowRoot>"u")return!1;var e=Po(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Jme(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},s=e.elements[n];!sl(s)||!Bc(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(a){var o=i[a];o===!1?s.removeAttribute(a):s.setAttribute(a,o===!0?"":o)}))})}function ege(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},a=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),o=a.reduce(function(l,c){return l[c]="",l},{});!sl(i)||!Bc(i)||(Object.assign(i.style,o),Object.keys(s).forEach(function(l){i.removeAttribute(l)}))})}}const tge={name:"applyStyles",enabled:!0,phase:"write",fn:Jme,effect:ege,requires:["computeStyles"]};function Lc(t){return t.split("-")[0]}var up=Math.max,qT=Math.min,e0=Math.round;function rD(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function JY(){return!/^((?!chrome|android).)*safari/i.test(rD())}function t0(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,s=1;e&&sl(t)&&(i=t.offsetWidth>0&&e0(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&e0(r.height)/t.offsetHeight||1);var a=Sp(t)?Po(t):window,o=a.visualViewport,l=!JY()&&n,c=(r.left+(l&&o?o.offsetLeft:0))/i,u=(r.top+(l&&o?o.offsetTop:0))/s,f=r.width/i,p=r.height/s;return{width:f,height:p,top:u,right:c+f,bottom:u+p,left:c,x:c,y:u}}function ik(t){var e=t0(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function eK(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&rk(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function cd(t){return Po(t).getComputedStyle(t)}function nge(t){return["table","td","th"].indexOf(Bc(t))>=0}function qf(t){return((Sp(t)?t.ownerDocument:t.document)||window.document).documentElement}function zE(t){return Bc(t)==="html"?t:t.assignedSlot||t.parentNode||(rk(t)?t.host:null)||qf(t)}function Z6(t){return!sl(t)||cd(t).position==="fixed"?null:t.offsetParent}function rge(t){var e=/firefox/i.test(rD()),n=/Trident/i.test(rD());if(n&&sl(t)){var r=cd(t);if(r.position==="fixed")return null}var i=zE(t);for(rk(i)&&(i=i.host);sl(i)&&["html","body"].indexOf(Bc(i))<0;){var s=cd(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function x_(t){for(var e=Po(t),n=Z6(t);n&&nge(n)&&cd(n).position==="static";)n=Z6(n);return n&&(Bc(n)==="html"||Bc(n)==="body"&&cd(n).position==="static")?e:n||rge(t)||e}function sk(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function jv(t,e,n){return up(t,qT(e,n))}function ige(t,e,n){var r=jv(t,e,n);return r>n?n:r}function tK(){return{top:0,right:0,bottom:0,left:0}}function nK(t){return Object.assign({},tK(),t)}function rK(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var sge=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,nK(typeof e!="number"?e:rK(e,g_))};function age(t){var e,n=t.state,r=t.name,i=t.options,s=n.elements.arrow,a=n.modifiersData.popperOffsets,o=Lc(n.placement),l=sk(o),c=[Wa,fl].indexOf(o)>=0,u=c?"height":"width";if(!(!s||!a)){var f=sge(i.padding,n),p=ik(s),m=l==="y"?Ha:Wa,x=l==="y"?dl:fl,b=n.rects.reference[u]+n.rects.reference[l]-a[l]-n.rects.popper[u],v=a[l]-n.rects.reference[l],_=x_(s),E=_?l==="y"?_.clientHeight||0:_.clientWidth||0:0,T=b/2-v/2,A=f[m],C=E-p[u]-f[x],M=E/2-p[u]/2+T,P=jv(A,M,C),D=l;n.modifiersData[r]=(e={},e[D]=P,e.centerOffset=P-M,e)}}function oge(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||eK(e.elements.popper,i)&&(e.elements.arrow=i))}const lge={name:"arrow",enabled:!0,phase:"main",fn:age,effect:oge,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function n0(t){return t.split("-")[1]}var cge={top:"auto",right:"auto",bottom:"auto",left:"auto"};function uge(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:e0(n*i)/i||0,y:e0(r*i)/i||0}}function Q6(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,a=t.offsets,o=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,f=t.isFixed,p=a.x,m=p===void 0?0:p,x=a.y,b=x===void 0?0:x,v=typeof u=="function"?u({x:m,y:b}):{x:m,y:b};m=v.x,b=v.y;var _=a.hasOwnProperty("x"),E=a.hasOwnProperty("y"),T=Wa,A=Ha,C=window;if(c){var M=x_(n),P="clientHeight",D="clientWidth";if(M===Po(n)&&(M=qf(n),cd(M).position!=="static"&&o==="absolute"&&(P="scrollHeight",D="scrollWidth")),M=M,i===Ha||(i===Wa||i===fl)&&s===hb){A=dl;var N=f&&M===C&&C.visualViewport?C.visualViewport.height:M[P];b-=N-r.height,b*=l?1:-1}if(i===Wa||(i===Ha||i===dl)&&s===hb){T=fl;var L=f&&M===C&&C.visualViewport?C.visualViewport.width:M[D];m-=L-r.width,m*=l?1:-1}}var k=Object.assign({position:o},c&&cge),I=u===!0?uge({x:m,y:b},Po(n)):{x:m,y:b};if(m=I.x,b=I.y,l){var F;return Object.assign({},k,(F={},F[A]=E?"0":"",F[T]=_?"0":"",F.transform=(C.devicePixelRatio||1)<=1?"translate("+m+"px, "+b+"px)":"translate3d("+m+"px, "+b+"px, 0)",F))}return Object.assign({},k,(e={},e[A]=E?b+"px":"",e[T]=_?m+"px":"",e.transform="",e))}function dge(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,a=s===void 0?!0:s,o=n.roundOffsets,l=o===void 0?!0:o,c={placement:Lc(e.placement),variation:n0(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Q6(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Q6(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const fge={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:dge,data:{}};var AS={passive:!0};function hge(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=i===void 0?!0:i,a=r.resize,o=a===void 0?!0:a,l=Po(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",n.update,AS)}),o&&l.addEventListener("resize",n.update,AS),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",n.update,AS)}),o&&l.removeEventListener("resize",n.update,AS)}}const pge={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:hge,data:{}};var mge={left:"right",right:"left",bottom:"top",top:"bottom"};function yT(t){return t.replace(/left|right|bottom|top/g,function(e){return mge[e]})}var gge={start:"end",end:"start"};function J6(t){return t.replace(/start|end/g,function(e){return gge[e]})}function ak(t){var e=Po(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function ok(t){return t0(qf(t)).left+ak(t).scrollLeft}function xge(t,e){var n=Po(t),r=qf(t),i=n.visualViewport,s=r.clientWidth,a=r.clientHeight,o=0,l=0;if(i){s=i.width,a=i.height;var c=JY();(c||!c&&e==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}return{width:s,height:a,x:o+ok(t),y:l}}function yge(t){var e,n=qf(t),r=ak(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=up(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=up(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),o=-r.scrollLeft+ok(t),l=-r.scrollTop;return cd(i||n).direction==="rtl"&&(o+=up(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:a,x:o,y:l}}function lk(t){var e=cd(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function iK(t){return["html","body","#document"].indexOf(Bc(t))>=0?t.ownerDocument.body:sl(t)&&lk(t)?t:iK(zE(t))}function zv(t,e){var n;e===void 0&&(e=[]);var r=iK(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=Po(r),a=i?[s].concat(s.visualViewport||[],lk(r)?r:[]):r,o=e.concat(a);return i?o:o.concat(zv(zE(a)))}function iD(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function vge(t,e){var n=t0(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function e8(t,e,n){return e===ZY?iD(xge(t,n)):Sp(e)?vge(e,n):iD(yge(qf(t)))}function bge(t){var e=zv(zE(t)),n=["absolute","fixed"].indexOf(cd(t).position)>=0,r=n&&sl(t)?x_(t):t;return Sp(r)?e.filter(function(i){return Sp(i)&&eK(i,r)&&Bc(i)!=="body"}):[]}function _ge(t,e,n,r){var i=e==="clippingParents"?bge(t):[].concat(e),s=[].concat(i,[n]),a=s[0],o=s.reduce(function(l,c){var u=e8(t,c,r);return l.top=up(u.top,l.top),l.right=qT(u.right,l.right),l.bottom=qT(u.bottom,l.bottom),l.left=up(u.left,l.left),l},e8(t,a,r));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function sK(t){var e=t.reference,n=t.element,r=t.placement,i=r?Lc(r):null,s=r?n0(r):null,a=e.x+e.width/2-n.width/2,o=e.y+e.height/2-n.height/2,l;switch(i){case Ha:l={x:a,y:e.y-n.height};break;case dl:l={x:a,y:e.y+e.height};break;case fl:l={x:e.x+e.width,y:o};break;case Wa:l={x:e.x-n.width,y:o};break;default:l={x:e.x,y:e.y}}var c=i?sk(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case Jg:l[c]=l[c]-(e[u]/2-n[u]/2);break;case hb:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function pb(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,s=n.strategy,a=s===void 0?t.strategy:s,o=n.boundary,l=o===void 0?zme:o,c=n.rootBoundary,u=c===void 0?ZY:c,f=n.elementContext,p=f===void 0?Py:f,m=n.altBoundary,x=m===void 0?!1:m,b=n.padding,v=b===void 0?0:b,_=nK(typeof v!="number"?v:rK(v,g_)),E=p===Py?$me:Py,T=t.rects.popper,A=t.elements[x?E:p],C=_ge(Sp(A)?A:A.contextElement||qf(t.elements.popper),l,u,a),M=t0(t.elements.reference),P=sK({reference:M,element:T,placement:i}),D=iD(Object.assign({},T,P)),N=p===Py?D:M,L={top:C.top-N.top+_.top,bottom:N.bottom-C.bottom+_.bottom,left:C.left-N.left+_.left,right:N.right-C.right+_.right},k=t.modifiersData.offset;if(p===Py&&k){var I=k[i];Object.keys(L).forEach(function(F){var z=[fl,dl].indexOf(F)>=0?1:-1,H=[Ha,dl].indexOf(F)>=0?"y":"x";L[F]+=I[H]*z})}return L}function Sge(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,a=n.padding,o=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?QY:l,u=n0(r),f=u?o?K6:K6.filter(function(x){return n0(x)===u}):g_,p=f.filter(function(x){return c.indexOf(x)>=0});p.length===0&&(p=f);var m=p.reduce(function(x,b){return x[b]=pb(t,{placement:b,boundary:i,rootBoundary:s,padding:a})[Lc(b)],x},{});return Object.keys(m).sort(function(x,b){return m[x]-m[b]})}function wge(t){if(Lc(t)===nk)return[];var e=yT(t);return[J6(t),e,J6(e)]}function Tge(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,a=n.altAxis,o=a===void 0?!0:a,l=n.fallbackPlacements,c=n.padding,u=n.boundary,f=n.rootBoundary,p=n.altBoundary,m=n.flipVariations,x=m===void 0?!0:m,b=n.allowedAutoPlacements,v=e.options.placement,_=Lc(v),E=_===v,T=l||(E||!x?[yT(v)]:wge(v)),A=[v].concat(T).reduce(function(me,te){return me.concat(Lc(te)===nk?Sge(e,{placement:te,boundary:u,rootBoundary:f,padding:c,flipVariations:x,allowedAutoPlacements:b}):te)},[]),C=e.rects.reference,M=e.rects.popper,P=new Map,D=!0,N=A[0],L=0;L<A.length;L++){var k=A[L],I=Lc(k),F=n0(k)===Jg,z=[Ha,dl].indexOf(I)>=0,H=z?"width":"height",B=pb(e,{placement:k,boundary:u,rootBoundary:f,altBoundary:p,padding:c}),j=z?F?fl:Wa:F?dl:Ha;C[H]>M[H]&&(j=yT(j));var G=yT(j),W=[];if(s&&W.push(B[I]<=0),o&&W.push(B[j]<=0,B[G]<=0),W.every(function(me){return me})){N=k,D=!1;break}P.set(k,W)}if(D)for(var re=x?3:1,$=function(te){var K=A.find(function(ne){var Ee=P.get(ne);if(Ee)return Ee.slice(0,te).every(function(se){return se})});if(K)return N=K,"break"},ee=re;ee>0;ee--){var oe=$(ee);if(oe==="break")break}e.placement!==N&&(e.modifiersData[r]._skip=!0,e.placement=N,e.reset=!0)}}const Ege={name:"flip",enabled:!0,phase:"main",fn:Tge,requiresIfExists:["offset"],data:{_skip:!1}};function t8(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function n8(t){return[Ha,fl,dl,Wa].some(function(e){return t[e]>=0})}function Cge(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,a=pb(e,{elementContext:"reference"}),o=pb(e,{altBoundary:!0}),l=t8(a,r),c=t8(o,i,s),u=n8(l),f=n8(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":f})}const Age={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Cge};function Mge(t,e,n){var r=Lc(t),i=[Wa,Ha].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,a=s[0],o=s[1];return a=a||0,o=(o||0)*i,[Wa,fl].indexOf(r)>=0?{x:o,y:a}:{x:a,y:o}}function Rge(t){var e=t.state,n=t.options,r=t.name,i=n.offset,s=i===void 0?[0,0]:i,a=QY.reduce(function(u,f){return u[f]=Mge(f,e.rects,s),u},{}),o=a[e.placement],l=o.x,c=o.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=a}const Pge={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Rge};function Nge(t){var e=t.state,n=t.name;e.modifiersData[n]=sK({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const Oge={name:"popperOffsets",enabled:!0,phase:"read",fn:Nge,data:{}};function Dge(t){return t==="x"?"y":"x"}function Lge(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=i===void 0?!0:i,a=n.altAxis,o=a===void 0?!1:a,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,f=n.padding,p=n.tether,m=p===void 0?!0:p,x=n.tetherOffset,b=x===void 0?0:x,v=pb(e,{boundary:l,rootBoundary:c,padding:f,altBoundary:u}),_=Lc(e.placement),E=n0(e.placement),T=!E,A=sk(_),C=Dge(A),M=e.modifiersData.popperOffsets,P=e.rects.reference,D=e.rects.popper,N=typeof b=="function"?b(Object.assign({},e.rects,{placement:e.placement})):b,L=typeof N=="number"?{mainAxis:N,altAxis:N}:Object.assign({mainAxis:0,altAxis:0},N),k=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,I={x:0,y:0};if(M){if(s){var F,z=A==="y"?Ha:Wa,H=A==="y"?dl:fl,B=A==="y"?"height":"width",j=M[A],G=j+v[z],W=j-v[H],re=m?-D[B]/2:0,$=E===Jg?P[B]:D[B],ee=E===Jg?-D[B]:-P[B],oe=e.elements.arrow,me=m&&oe?ik(oe):{width:0,height:0},te=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:tK(),K=te[z],ne=te[H],Ee=jv(0,P[B],me[B]),se=T?P[B]/2-re-Ee-K-L.mainAxis:$-Ee-K-L.mainAxis,ve=T?-P[B]/2+re+Ee+ne+L.mainAxis:ee+Ee+ne+L.mainAxis,Pe=e.elements.arrow&&x_(e.elements.arrow),ge=Pe?A==="y"?Pe.clientTop||0:Pe.clientLeft||0:0,be=(F=k?.[A])!=null?F:0,_e=j+se-be-ge,Q=j+ve-be,et=jv(m?qT(G,_e):G,j,m?up(W,Q):W);M[A]=et,I[A]=et-j}if(o){var ze,Je=A==="x"?Ha:Wa,fe=A==="x"?dl:fl,rt=M[C],$e=C==="y"?"height":"width",Se=rt+v[Je],q=rt-v[fe],V=[Ha,Wa].indexOf(_)!==-1,ie=(ze=k?.[C])!=null?ze:0,le=V?Se:rt-P[$e]-D[$e]-ie+L.altAxis,xe=V?rt+P[$e]+D[$e]-ie-L.altAxis:q,pe=m&&V?ige(le,rt,xe):jv(m?le:Se,rt,m?xe:q);M[C]=pe,I[C]=pe-rt}e.modifiersData[r]=I}}const Ige={name:"preventOverflow",enabled:!0,phase:"main",fn:Lge,requiresIfExists:["offset"]};function kge(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Bge(t){return t===Po(t)||!sl(t)?ak(t):kge(t)}function Fge(t){var e=t.getBoundingClientRect(),n=e0(e.width)/t.offsetWidth||1,r=e0(e.height)/t.offsetHeight||1;return n!==1||r!==1}function Uge(t,e,n){n===void 0&&(n=!1);var r=sl(e),i=sl(e)&&Fge(e),s=qf(e),a=t0(t,i,n),o={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Bc(e)!=="body"||lk(s))&&(o=Bge(e)),sl(e)?(l=t0(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=ok(s))),{x:a.left+o.scrollLeft-l.x,y:a.top+o.scrollTop-l.y,width:a.width,height:a.height}}function jge(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function i(s){n.add(s.name);var a=[].concat(s.requires||[],s.requiresIfExists||[]);a.forEach(function(o){if(!n.has(o)){var l=e.get(o);l&&i(l)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||i(s)}),r}function zge(t){var e=jge(t);return Qme.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function $ge(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function Gge(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var r8={placement:"bottom",modifiers:[],strategy:"absolute"};function i8(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Vge(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,s=i===void 0?r8:i;return function(o,l,c){c===void 0&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},r8,s),modifiersData:{},elements:{reference:o,popper:l},attributes:{},styles:{}},f=[],p=!1,m={state:u,setOptions:function(_){var E=typeof _=="function"?_(u.options):_;b(),u.options=Object.assign({},s,u.options,E),u.scrollParents={reference:Sp(o)?zv(o):o.contextElement?zv(o.contextElement):[],popper:zv(l)};var T=zge(Gge([].concat(r,u.options.modifiers)));return u.orderedModifiers=T.filter(function(A){return A.enabled}),x(),m.update()},forceUpdate:function(){if(!p){var _=u.elements,E=_.reference,T=_.popper;if(i8(E,T)){u.rects={reference:Uge(E,x_(T),u.options.strategy==="fixed"),popper:ik(T)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(L){return u.modifiersData[L.name]=Object.assign({},L.data)});for(var A=0;A<u.orderedModifiers.length;A++){if(u.reset===!0){u.reset=!1,A=-1;continue}var C=u.orderedModifiers[A],M=C.fn,P=C.options,D=P===void 0?{}:P,N=C.name;typeof M=="function"&&(u=M({state:u,options:D,name:N,instance:m})||u)}}}},update:$ge(function(){return new Promise(function(v){m.forceUpdate(),v(u)})}),destroy:function(){b(),p=!0}};if(!i8(o,l))return m;m.setOptions(c).then(function(v){!p&&c.onFirstUpdate&&c.onFirstUpdate(v)});function x(){u.orderedModifiers.forEach(function(v){var _=v.name,E=v.options,T=E===void 0?{}:E,A=v.effect;if(typeof A=="function"){var C=A({state:u,name:_,instance:m,options:T}),M=function(){};f.push(C||M)}})}function b(){f.forEach(function(v){return v()}),f=[]}return m}}var Hge=[pge,Oge,fge,tge,Pge,Ege,Ige,lge,Age],Wge=Vge({defaultModifiers:Hge});function Ia(t){const{elementType:e,externalSlotProps:n,ownerState:r,skipResolvingSlotProps:i=!1,...s}=t,a=i?{}:qY(n,r),{props:o,internalRef:l}=XY({...s,externalSlotProps:a}),c=Vr(l,a?.ref,t.additionalProps?.ref);return WY(e,{...o,ref:c},r)}function Xf(t){return parseInt(w.version,10)>=19?t?.props?.ref||null:t?.ref||null}function qge(t){return typeof t=="function"?t():t}const aK=w.forwardRef(function(e,n){const{children:r,container:i,disablePortal:s=!1}=e,[a,o]=w.useState(null),l=Vr(w.isValidElement(r)?Xf(r):null,n);if(ia(()=>{s||o(qge(i)||document.body)},[i,s]),ia(()=>{if(a&&!s)return j6(n,a),()=>{j6(n,null)}},[n,a,s]),s){if(w.isValidElement(r)){const c={ref:l};return w.cloneElement(r,c)}return r}return a&&cx.createPortal(r,a)});function Xge(t){return Rt("MuiPopper",t)}Pt("MuiPopper",["root"]);function Yge(t,e){if(e==="ltr")return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}function sD(t){return typeof t=="function"?t():t}function Kge(t){return t.nodeType!==void 0}const Zge=t=>{const{classes:e}=t;return Nt({root:["root"]},Xge,e)},Qge={},Jge=w.forwardRef(function(e,n){const{anchorEl:r,children:i,direction:s,disablePortal:a,modifiers:o,open:l,placement:c,popperOptions:u,popperRef:f,slotProps:p={},slots:m={},TransitionProps:x,ownerState:b,...v}=e,_=w.useRef(null),E=Vr(_,n),T=w.useRef(null),A=Vr(T,f),C=w.useRef(A);ia(()=>{C.current=A},[A]),w.useImperativeHandle(f,()=>T.current,[]);const M=Yge(c,s),[P,D]=w.useState(M),[N,L]=w.useState(sD(r));w.useEffect(()=>{T.current&&T.current.forceUpdate()}),w.useEffect(()=>{r&&L(sD(r))},[r]),ia(()=>{if(!N||!l)return;const H=G=>{D(G.placement)};let B=[{name:"preventOverflow",options:{altBoundary:a}},{name:"flip",options:{altBoundary:a}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:G})=>{H(G)}}];o!=null&&(B=B.concat(o)),u&&u.modifiers!=null&&(B=B.concat(u.modifiers));const j=Wge(N,_.current,{placement:M,...u,modifiers:B});return C.current(j),()=>{j.destroy(),C.current(null)}},[N,a,o,l,u,M]);const k={placement:P};x!==null&&(k.TransitionProps=x);const I=Zge(e),F=m.root??"div",z=Ia({elementType:F,externalSlotProps:p.root,externalForwardedProps:v,additionalProps:{role:"tooltip",ref:E},ownerState:e,className:I.root});return g.jsx(F,{...z,children:typeof i=="function"?i(k):i})}),e0e=w.forwardRef(function(e,n){const{anchorEl:r,children:i,container:s,direction:a="ltr",disablePortal:o=!1,keepMounted:l=!1,modifiers:c,open:u,placement:f="bottom",popperOptions:p=Qge,popperRef:m,style:x,transition:b=!1,slotProps:v={},slots:_={},...E}=e,[T,A]=w.useState(!0),C=()=>{A(!1)},M=()=>{A(!0)};if(!l&&!u&&(!b||T))return null;let P;if(s)P=s;else if(r){const L=sD(r);P=L&&Kge(L)?Ai(L).body:Ai(null).body}const D=!u&&l&&(!b||T)?"none":void 0,N=b?{in:u,onEnter:C,onExited:M}:void 0;return g.jsx(aK,{disablePortal:o,container:P,children:g.jsx(Jge,{anchorEl:r,direction:a,disablePortal:o,modifiers:c,ref:n,open:b?!T:u,placement:f,popperOptions:p,popperRef:m,slotProps:v,slots:_,...E,style:{position:"fixed",top:0,left:0,display:D,...x},TransitionProps:N,children:i})})}),t0e=Ue(e0e,{name:"MuiPopper",slot:"Root"})({}),ck=w.forwardRef(function(e,n){const r=Wf(),i=Lt({props:e,name:"MuiPopper"}),{anchorEl:s,component:a,components:o,componentsProps:l,container:c,disablePortal:u,keepMounted:f,modifiers:p,open:m,placement:x,popperOptions:b,popperRef:v,transition:_,slots:E,slotProps:T,...A}=i,C=E?.root??o?.Root,M={anchorEl:s,container:c,disablePortal:u,keepMounted:f,modifiers:p,open:m,placement:x,popperOptions:b,popperRef:v,transition:_,...A};return g.jsx(t0e,{as:a,direction:r?"rtl":"ltr",slots:{root:C},slotProps:T??l,...M,ref:n})}),n0e=Et(g.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}));function r0e(t){return Rt("MuiChip",t)}const Nn=Pt("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),i0e=t=>{const{classes:e,disabled:n,size:r,color:i,iconColor:s,onDelete:a,clickable:o,variant:l}=t,c={root:["root",l,n&&"disabled",`size${Re(r)}`,`color${Re(i)}`,o&&"clickable",o&&`clickableColor${Re(i)}`,a&&"deletable",a&&`deletableColor${Re(i)}`,`${l}${Re(i)}`],label:["label",`label${Re(r)}`],avatar:["avatar",`avatar${Re(r)}`,`avatarColor${Re(i)}`],icon:["icon",`icon${Re(r)}`,`iconColor${Re(s)}`],deleteIcon:["deleteIcon",`deleteIcon${Re(r)}`,`deleteIconColor${Re(i)}`,`deleteIcon${Re(l)}Color${Re(i)}`]};return Nt(c,r0e,e)},s0e=Ue("div",{name:"MuiChip",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t,{color:r,iconColor:i,clickable:s,onDelete:a,size:o,variant:l}=n;return[{[`& .${Nn.avatar}`]:e.avatar},{[`& .${Nn.avatar}`]:e[`avatar${Re(o)}`]},{[`& .${Nn.avatar}`]:e[`avatarColor${Re(r)}`]},{[`& .${Nn.icon}`]:e.icon},{[`& .${Nn.icon}`]:e[`icon${Re(o)}`]},{[`& .${Nn.icon}`]:e[`iconColor${Re(i)}`]},{[`& .${Nn.deleteIcon}`]:e.deleteIcon},{[`& .${Nn.deleteIcon}`]:e[`deleteIcon${Re(o)}`]},{[`& .${Nn.deleteIcon}`]:e[`deleteIconColor${Re(r)}`]},{[`& .${Nn.deleteIcon}`]:e[`deleteIcon${Re(l)}Color${Re(r)}`]},e.root,e[`size${Re(o)}`],e[`color${Re(r)}`],s&&e.clickable,s&&r!=="default"&&e[`clickableColor${Re(r)})`],a&&e.deletable,a&&r!=="default"&&e[`deletableColor${Re(r)}`],e[l],e[`${l}${Re(r)}`]]}})(wt(({theme:t})=>{const e=t.palette.mode==="light"?t.palette.grey[700]:t.palette.grey[300];return{maxWidth:"100%",fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,lineHeight:1.5,color:(t.vars||t).palette.text.primary,backgroundColor:(t.vars||t).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:t.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${Nn.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${Nn.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:t.vars?t.vars.palette.Chip.defaultAvatarColor:e,fontSize:t.typography.pxToRem(12)},[`& .${Nn.avatarColorPrimary}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.dark},[`& .${Nn.avatarColorSecondary}`]:{color:(t.vars||t).palette.secondary.contrastText,backgroundColor:(t.vars||t).palette.secondary.dark},[`& .${Nn.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:t.typography.pxToRem(10)},[`& .${Nn.icon}`]:{marginLeft:5,marginRight:-6},[`& .${Nn.deleteIcon}`]:{WebkitTapHighlightColor:"transparent",color:t.alpha((t.vars||t).palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:t.alpha((t.vars||t).palette.text.primary,.4)}},variants:[{props:{size:"small"},style:{height:24,[`& .${Nn.icon}`]:{fontSize:18,marginLeft:4,marginRight:-4},[`& .${Nn.deleteIcon}`]:{fontSize:16,marginRight:4,marginLeft:-4}}},...Object.entries(t.palette).filter(Hn(["contrastText"])).map(([n])=>({props:{color:n},style:{backgroundColor:(t.vars||t).palette[n].main,color:(t.vars||t).palette[n].contrastText,[`& .${Nn.deleteIcon}`]:{color:t.alpha((t.vars||t).palette[n].contrastText,.7),"&:hover, &:active":{color:(t.vars||t).palette[n].contrastText}}}})),{props:n=>n.iconColor===n.color,style:{[`& .${Nn.icon}`]:{color:t.vars?t.vars.palette.Chip.defaultIconColor:e}}},{props:n=>n.iconColor===n.color&&n.color!=="default",style:{[`& .${Nn.icon}`]:{color:"inherit"}}},{props:{onDelete:!0},style:{[`&.${Nn.focusVisible}`]:{backgroundColor:t.alpha((t.vars||t).palette.action.selected,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.focusOpacity}`)}}},...Object.entries(t.palette).filter(Hn(["dark"])).map(([n])=>({props:{color:n,onDelete:!0},style:{[`&.${Nn.focusVisible}`]:{background:(t.vars||t).palette[n].dark}}})),{props:{clickable:!0},style:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:t.alpha((t.vars||t).palette.action.selected,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.hoverOpacity}`)},[`&.${Nn.focusVisible}`]:{backgroundColor:t.alpha((t.vars||t).palette.action.selected,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.focusOpacity}`)},"&:active":{boxShadow:(t.vars||t).shadows[1]}}},...Object.entries(t.palette).filter(Hn(["dark"])).map(([n])=>({props:{color:n,clickable:!0},style:{[`&:hover, &.${Nn.focusVisible}`]:{backgroundColor:(t.vars||t).palette[n].dark}}})),{props:{variant:"outlined"},style:{backgroundColor:"transparent",border:t.vars?`1px solid ${t.vars.palette.Chip.defaultBorder}`:`1px solid ${t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[700]}`,[`&.${Nn.clickable}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${Nn.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`& .${Nn.avatar}`]:{marginLeft:4},[`& .${Nn.avatarSmall}`]:{marginLeft:2},[`& .${Nn.icon}`]:{marginLeft:4},[`& .${Nn.iconSmall}`]:{marginLeft:2},[`& .${Nn.deleteIcon}`]:{marginRight:5},[`& .${Nn.deleteIconSmall}`]:{marginRight:3}}},...Object.entries(t.palette).filter(Hn()).map(([n])=>({props:{variant:"outlined",color:n},style:{color:(t.vars||t).palette[n].main,border:`1px solid ${t.alpha((t.vars||t).palette[n].main,.7)}`,[`&.${Nn.clickable}:hover`]:{backgroundColor:t.alpha((t.vars||t).palette[n].main,(t.vars||t).palette.action.hoverOpacity)},[`&.${Nn.focusVisible}`]:{backgroundColor:t.alpha((t.vars||t).palette[n].main,(t.vars||t).palette.action.focusOpacity)},[`& .${Nn.deleteIcon}`]:{color:t.alpha((t.vars||t).palette[n].main,.7),"&:hover, &:active":{color:(t.vars||t).palette[n].main}}}}))]}})),a0e=Ue("span",{name:"MuiChip",slot:"Label",overridesResolver:(t,e)=>{const{ownerState:n}=t,{size:r}=n;return[e.label,e[`label${Re(r)}`]]}})({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",variants:[{props:{variant:"outlined"},style:{paddingLeft:11,paddingRight:11}},{props:{size:"small"},style:{paddingLeft:8,paddingRight:8}},{props:{size:"small",variant:"outlined"},style:{paddingLeft:7,paddingRight:7}}]});function s8(t){return t.key==="Backspace"||t.key==="Delete"}const Dt=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiChip"}),{avatar:i,className:s,clickable:a,color:o="default",component:l,deleteIcon:c,disabled:u=!1,icon:f,label:p,onClick:m,onDelete:x,onKeyDown:b,onKeyUp:v,size:_="medium",variant:E="filled",tabIndex:T,skipFocusWhenDisabled:A=!1,slots:C={},slotProps:M={},...P}=r,D=w.useRef(null),N=Vr(D,n),L=K=>{K.stopPropagation(),x&&x(K)},k=K=>{K.currentTarget===K.target&&s8(K)&&K.preventDefault(),b&&b(K)},I=K=>{K.currentTarget===K.target&&x&&s8(K)&&x(K),v&&v(K)},F=a!==!1&&m?!0:a,z=F||x?ul:l||"div",H={...r,component:z,disabled:u,size:_,color:o,iconColor:w.isValidElement(f)&&f.props.color||o,onDelete:!!x,clickable:F,variant:E},B=i0e(H),j=z===ul?{component:l||"div",focusVisibleClassName:B.focusVisible,...x&&{disableRipple:!0}}:{};let G=null;x&&(G=c&&w.isValidElement(c)?w.cloneElement(c,{className:qe(c.props.className,B.deleteIcon),onClick:L}):g.jsx(n0e,{className:B.deleteIcon,onClick:L}));let W=null;i&&w.isValidElement(i)&&(W=w.cloneElement(i,{className:qe(B.avatar,i.props.className)}));let re=null;f&&w.isValidElement(f)&&(re=w.cloneElement(f,{className:qe(B.icon,f.props.className)}));const $={slots:C,slotProps:M},[ee,oe]=Ft("root",{elementType:s0e,externalForwardedProps:{...$,...P},ownerState:H,shouldForwardComponentProp:!0,ref:N,className:qe(B.root,s),additionalProps:{disabled:F&&u?!0:void 0,tabIndex:A&&u?-1:T,...j},getSlotProps:K=>({...K,onClick:ne=>{K.onClick?.(ne),m?.(ne)},onKeyDown:ne=>{K.onKeyDown?.(ne),k(ne)},onKeyUp:ne=>{K.onKeyUp?.(ne),I(ne)}})}),[me,te]=Ft("label",{elementType:a0e,externalForwardedProps:$,ownerState:H,className:B.label});return g.jsxs(ee,{as:z,...oe,children:[W||re,g.jsx(me,{...te,children:p}),G]})});function MS(t){return parseInt(t,10)||0}const o0e={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function l0e(t){for(const e in t)return!1;return!0}function a8(t){return l0e(t)||t.outerHeightStyle===0&&!t.overflowing}const c0e=w.forwardRef(function(e,n){const{onChange:r,maxRows:i,minRows:s=1,style:a,value:o,...l}=e,{current:c}=w.useRef(o!=null),u=w.useRef(null),f=Vr(n,u),p=w.useRef(null),m=w.useRef(null),x=w.useCallback(()=>{const T=u.current,A=m.current;if(!T||!A)return;const M=Ro(T).getComputedStyle(T);if(M.width==="0px")return{outerHeightStyle:0,overflowing:!1};A.style.width=M.width,A.value=T.value||e.placeholder||"x",A.value.slice(-1)===`
`&&(A.value+=" ");const P=M.boxSizing,D=MS(M.paddingBottom)+MS(M.paddingTop),N=MS(M.borderBottomWidth)+MS(M.borderTopWidth),L=A.scrollHeight;A.value="x";const k=A.scrollHeight;let I=L;s&&(I=Math.max(Number(s)*k,I)),i&&(I=Math.min(Number(i)*k,I)),I=Math.max(I,k);const F=I+(P==="border-box"?D+N:0),z=Math.abs(I-L)<=1;return{outerHeightStyle:F,overflowing:z}},[i,s,e.placeholder]),b=ta(()=>{const T=u.current,A=x();if(!T||!A||a8(A))return!1;const C=A.outerHeightStyle;return p.current!=null&&p.current!==C}),v=w.useCallback(()=>{const T=u.current,A=x();if(!T||!A||a8(A))return;const C=A.outerHeightStyle;p.current!==C&&(p.current=C,T.style.height=`${C}px`),T.style.overflow=A.overflowing?"hidden":""},[x]),_=w.useRef(-1);ia(()=>{const T=m_(v),A=u?.current;if(!A)return;const C=Ro(A);C.addEventListener("resize",T);let M;return typeof ResizeObserver<"u"&&(M=new ResizeObserver(()=>{b()&&(M.unobserve(A),cancelAnimationFrame(_.current),v(),_.current=requestAnimationFrame(()=>{M.observe(A)}))}),M.observe(A)),()=>{T.clear(),cancelAnimationFrame(_.current),C.removeEventListener("resize",T),M&&M.disconnect()}},[x,v,b]),ia(()=>{v()});const E=T=>{c||v();const A=T.target,C=A.value.length,M=A.value.endsWith(`
`),P=A.selectionStart===C;M&&P&&A.setSelectionRange(C,C),r&&r(T)};return g.jsxs(w.Fragment,{children:[g.jsx("textarea",{value:o,onChange:E,ref:f,rows:s,style:a,...l}),g.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:m,tabIndex:-1,style:{...o0e.shadow,...a,paddingTop:0,paddingBottom:0}})]})});function Gp({props:t,states:e,muiFormControl:n}){return e.reduce((r,i)=>(r[i]=t[i],n&&typeof t[i]>"u"&&(r[i]=n[i]),r),{})}const $E=w.createContext(void 0);function _d(){return w.useContext($E)}function o8(t){return t!=null&&!(Array.isArray(t)&&t.length===0)}function XT(t,e=!1){return t&&(o8(t.value)&&t.value!==""||e&&o8(t.defaultValue)&&t.defaultValue!=="")}function u0e(t){return t.startAdornment}function d0e(t){return Rt("MuiInputBase",t)}const r0=Pt("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var l8;const GE=(t,e)=>{const{ownerState:n}=t;return[e.root,n.formControl&&e.formControl,n.startAdornment&&e.adornedStart,n.endAdornment&&e.adornedEnd,n.error&&e.error,n.size==="small"&&e.sizeSmall,n.multiline&&e.multiline,n.color&&e[`color${Re(n.color)}`],n.fullWidth&&e.fullWidth,n.hiddenLabel&&e.hiddenLabel]},VE=(t,e)=>{const{ownerState:n}=t;return[e.input,n.size==="small"&&e.inputSizeSmall,n.multiline&&e.inputMultiline,n.type==="search"&&e.inputTypeSearch,n.startAdornment&&e.inputAdornedStart,n.endAdornment&&e.inputAdornedEnd,n.hiddenLabel&&e.inputHiddenLabel]},f0e=t=>{const{classes:e,color:n,disabled:r,error:i,endAdornment:s,focused:a,formControl:o,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:f,size:p,startAdornment:m,type:x}=t,b={root:["root",`color${Re(n)}`,r&&"disabled",i&&"error",l&&"fullWidth",a&&"focused",o&&"formControl",p&&p!=="medium"&&`size${Re(p)}`,u&&"multiline",m&&"adornedStart",s&&"adornedEnd",c&&"hiddenLabel",f&&"readOnly"],input:["input",r&&"disabled",x==="search"&&"inputTypeSearch",u&&"inputMultiline",p==="small"&&"inputSizeSmall",c&&"inputHiddenLabel",m&&"inputAdornedStart",s&&"inputAdornedEnd",f&&"readOnly"]};return Nt(b,d0e,e)},HE=Ue("div",{name:"MuiInputBase",slot:"Root",overridesResolver:GE})(wt(({theme:t})=>({...t.typography.body1,color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${r0.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:e})=>e.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:e,size:n})=>e.multiline&&n==="small",style:{paddingTop:1}},{props:({ownerState:e})=>e.fullWidth,style:{width:"100%"}}]}))),WE=Ue("input",{name:"MuiInputBase",slot:"Input",overridesResolver:VE})(wt(({theme:t})=>{const e=t.palette.mode==="light",n={color:"currentColor",...t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5},transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})},r={opacity:"0 !important"},i=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${r0.formControl} &`]:{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":i,"&:focus::-moz-placeholder":i,"&:focus::-ms-input-placeholder":i},[`&.${r0.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},variants:[{props:({ownerState:s})=>!s.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:s})=>s.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),c8=KI({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),uk=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiInputBase"}),{"aria-describedby":i,autoComplete:s,autoFocus:a,className:o,color:l,components:c={},componentsProps:u={},defaultValue:f,disabled:p,disableInjectingGlobalStyles:m,endAdornment:x,error:b,fullWidth:v=!1,id:_,inputComponent:E="input",inputProps:T={},inputRef:A,margin:C,maxRows:M,minRows:P,multiline:D=!1,name:N,onBlur:L,onChange:k,onClick:I,onFocus:F,onKeyDown:z,onKeyUp:H,placeholder:B,readOnly:j,renderSuffix:G,rows:W,size:re,slotProps:$={},slots:ee={},startAdornment:oe,type:me="text",value:te,...K}=r,ne=T.value!=null?T.value:te,{current:Ee}=w.useRef(ne!=null),se=w.useRef(),ve=w.useCallback(dt=>{},[]),Pe=Vr(se,A,T.ref,ve),[ge,be]=w.useState(!1),_e=_d(),Q=Gp({props:r,muiFormControl:_e,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Q.focused=_e?_e.focused:ge,w.useEffect(()=>{!_e&&p&&ge&&(be(!1),L&&L())},[_e,p,ge,L]);const et=_e&&_e.onFilled,ze=_e&&_e.onEmpty,Je=w.useCallback(dt=>{XT(dt)?et&&et():ze&&ze()},[et,ze]);ia(()=>{Ee&&Je({value:ne})},[ne,Je,Ee]);const fe=dt=>{F&&F(dt),T.onFocus&&T.onFocus(dt),_e&&_e.onFocus?_e.onFocus(dt):be(!0)},rt=dt=>{L&&L(dt),T.onBlur&&T.onBlur(dt),_e&&_e.onBlur?_e.onBlur(dt):be(!1)},$e=(dt,...ft)=>{if(!Ee){const Be=dt.target||se.current;if(Be==null)throw new Error(ad(1));Je({value:Be.value})}T.onChange&&T.onChange(dt,...ft),k&&k(dt,...ft)};w.useEffect(()=>{Je(se.current)},[]);const Se=dt=>{se.current&&dt.currentTarget===dt.target&&se.current.focus(),I&&I(dt)};let q=E,V=T;D&&q==="input"&&(W?V={type:void 0,minRows:W,maxRows:W,...V}:V={type:void 0,maxRows:M,minRows:P,...V},q=c0e);const ie=dt=>{Je(dt.animationName==="mui-auto-fill-cancel"?se.current:{value:"x"})};w.useEffect(()=>{_e&&_e.setAdornedStart(!!oe)},[_e,oe]);const le={...r,color:Q.color||"primary",disabled:Q.disabled,endAdornment:x,error:Q.error,focused:Q.focused,formControl:_e,fullWidth:v,hiddenLabel:Q.hiddenLabel,multiline:D,size:Q.size,startAdornment:oe,type:me},xe=f0e(le),pe=ee.root||c.Root||HE,it=$.root||u.root||{},We=ee.input||c.Input||WE;return V={...V,...$.input??u.input},g.jsxs(w.Fragment,{children:[!m&&typeof c8=="function"&&(l8||(l8=g.jsx(c8,{}))),g.jsxs(pe,{...it,ref:n,onClick:Se,...K,...!Dc(pe)&&{ownerState:{...le,...it.ownerState}},className:qe(xe.root,it.className,o,j&&"MuiInputBase-readOnly"),children:[oe,g.jsx($E.Provider,{value:null,children:g.jsx(We,{"aria-invalid":Q.error,"aria-describedby":i,autoComplete:s,autoFocus:a,defaultValue:f,disabled:Q.disabled,id:_,onAnimationStart:ie,name:N,placeholder:B,readOnly:j,required:Q.required,rows:W,value:ne,onKeyDown:z,onKeyUp:H,type:me,...V,...!Dc(We)&&{as:q,ownerState:{...le,...V.ownerState}},ref:Pe,className:qe(xe.input,V.className,j&&"MuiInputBase-readOnly"),onBlur:rt,onChange:$e,onFocus:fe})}),x,G?G({...Q,startAdornment:oe}):null]})]})});function h0e(t){return Rt("MuiInput",t)}const Ny={...r0,...Pt("MuiInput",["root","underline","input"])};function p0e(t){return Rt("MuiOutlinedInput",t)}const dc={...r0,...Pt("MuiOutlinedInput",["root","notchedOutline","input"])};function m0e(t){return Rt("MuiFilledInput",t)}const Sh={...r0,...Pt("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},g0e=Et(g.jsx("path",{d:"M7 10l5 5 5-5z"})),x0e=Et(g.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}));function y0e(t){return Rt("MuiAvatar",t)}Pt("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const v0e=t=>{const{classes:e,variant:n,colorDefault:r}=t;return Nt({root:["root",n,r&&"colorDefault"],img:["img"],fallback:["fallback"]},y0e,e)},b0e=Ue("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],n.colorDefault&&e.colorDefault]}})(wt(({theme:t})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(t.vars||t).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(t.vars||t).palette.background.default,...t.vars?{backgroundColor:t.vars.palette.Avatar.defaultBg}:{backgroundColor:t.palette.grey[400],...t.applyStyles("dark",{backgroundColor:t.palette.grey[600]})}}}]}))),_0e=Ue("img",{name:"MuiAvatar",slot:"Img"})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),S0e=Ue(x0e,{name:"MuiAvatar",slot:"Fallback"})({width:"75%",height:"75%"});function w0e({crossOrigin:t,referrerPolicy:e,src:n,srcSet:r}){const[i,s]=w.useState(!1);return w.useEffect(()=>{if(!n&&!r)return;s(!1);let a=!0;const o=new Image;return o.onload=()=>{a&&s("loaded")},o.onerror=()=>{a&&s("error")},o.crossOrigin=t,o.referrerPolicy=e,o.src=n,r&&(o.srcset=r),()=>{a=!1}},[t,e,n,r]),i}const Jo=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiAvatar"}),{alt:i,children:s,className:a,component:o="div",slots:l={},slotProps:c={},imgProps:u,sizes:f,src:p,srcSet:m,variant:x="circular",...b}=r;let v=null;const _={...r,component:o,variant:x},E=w0e({...u,...typeof c.img=="function"?c.img(_):c.img,src:p,srcSet:m}),T=p||m,A=T&&E!=="error";_.colorDefault=!A,delete _.ownerState;const C=v0e(_),[M,P]=Ft("root",{ref:n,className:qe(C.root,a),elementType:b0e,externalForwardedProps:{slots:l,slotProps:c,component:o,...b},ownerState:_}),[D,N]=Ft("img",{className:C.img,elementType:_0e,externalForwardedProps:{slots:l,slotProps:{img:{...u,...c.img}}},additionalProps:{alt:i,src:p,srcSet:m,sizes:f},ownerState:_}),[L,k]=Ft("fallback",{className:C.fallback,elementType:S0e,externalForwardedProps:{slots:l,slotProps:c},shouldForwardComponentProp:!0,ownerState:_});return A?v=g.jsx(D,{...N}):s||s===0?v=s:T&&i?v=i[0]:v=g.jsx(L,{...k}),g.jsx(M,{...P,children:v})}),T0e={entering:{opacity:1},entered:{opacity:1}},aD=w.forwardRef(function(e,n){const r=ec(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:s,appear:a=!0,children:o,easing:l,in:c,onEnter:u,onEntered:f,onEntering:p,onExit:m,onExited:x,onExiting:b,style:v,timeout:_=i,TransitionComponent:E=bl,...T}=e,A=w.useRef(null),C=Vr(A,Xf(o),n),M=z=>H=>{if(z){const B=A.current;H===void 0?z(B):z(B,H)}},P=M(p),D=M((z,H)=>{tk(z);const B=kf({style:v,timeout:_,easing:l},{mode:"enter"});z.style.webkitTransition=r.transitions.create("opacity",B),z.style.transition=r.transitions.create("opacity",B),u&&u(z,H)}),N=M(f),L=M(b),k=M(z=>{const H=kf({style:v,timeout:_,easing:l},{mode:"exit"});z.style.webkitTransition=r.transitions.create("opacity",H),z.style.transition=r.transitions.create("opacity",H),m&&m(z)}),I=M(x),F=z=>{s&&s(A.current,z)};return g.jsx(E,{appear:a,in:c,nodeRef:A,onEnter:D,onEntered:N,onEntering:P,onExit:k,onExited:I,onExiting:L,addEndListener:F,timeout:_,...T,children:(z,{ownerState:H,...B})=>w.cloneElement(o,{style:{opacity:0,visibility:z==="exited"&&!c?"hidden":void 0,...T0e[z],...v,...o.props.style},ref:C,...B})})});function E0e(t){return Rt("MuiBackdrop",t)}Pt("MuiBackdrop",["root","invisible"]);const C0e=t=>{const{classes:e,invisible:n}=t;return Nt({root:["root",n&&"invisible"]},E0e,e)},A0e=Ue("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.invisible&&e.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),oK=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiBackdrop"}),{children:i,className:s,component:a="div",invisible:o=!1,open:l,components:c={},componentsProps:u={},slotProps:f={},slots:p={},TransitionComponent:m,transitionDuration:x,...b}=r,v={...r,component:a,invisible:o},_=C0e(v),E={transition:m,root:c.Root,...p},T={...u,...f},A={component:a,slots:E,slotProps:T},[C,M]=Ft("root",{elementType:A0e,externalForwardedProps:A,className:qe(_.root,s),ownerState:v}),[P,D]=Ft("transition",{elementType:aD,externalForwardedProps:A,ownerState:v});return g.jsx(P,{in:l,timeout:x,...b,...D,children:g.jsx(C,{"aria-hidden":!0,...M,classes:_,ref:n,children:i})})});function M0e(t){const{badgeContent:e,invisible:n=!1,max:r=99,showZero:i=!1}=t,s=KY({badgeContent:e,max:r});let a=n;n===!1&&e===0&&!i&&(a=!0);const{badgeContent:o,max:l=r}=a?s:t,c=o&&Number(o)>l?`${l}+`:o;return{badgeContent:o,invisible:a,max:l,displayValue:c}}function R0e(t){return Rt("MuiBadge",t)}const nf=Pt("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),s3=10,a3=4,P0e=t=>{const{color:e,anchorOrigin:n,invisible:r,overlap:i,variant:s,classes:a={}}=t,o={root:["root"],badge:["badge",s,r&&"invisible",`anchorOrigin${Re(n.vertical)}${Re(n.horizontal)}`,`anchorOrigin${Re(n.vertical)}${Re(n.horizontal)}${Re(i)}`,`overlap${Re(i)}`,e!=="default"&&`color${Re(e)}`]};return Nt(o,R0e,a)},N0e=Ue("span",{name:"MuiBadge",slot:"Root"})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),O0e=Ue("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.badge,e[n.variant],e[`anchorOrigin${Re(n.anchorOrigin.vertical)}${Re(n.anchorOrigin.horizontal)}${Re(n.overlap)}`],n.color!=="default"&&e[`color${Re(n.color)}`],n.invisible&&e.invisible]}})(wt(({theme:t})=>({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:s3*2,lineHeight:1,padding:"0 6px",height:s3*2,borderRadius:s3,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen}),variants:[...Object.entries(t.palette).filter(Hn(["contrastText"])).map(([e])=>({props:{color:e},style:{backgroundColor:(t.vars||t).palette[e].main,color:(t.vars||t).palette[e].contrastText}})),{props:{variant:"dot"},style:{borderRadius:a3,height:a3*2,minWidth:a3*2,padding:0}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${nf.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${nf.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${nf.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${nf.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${nf.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${nf.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${nf.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${nf.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})}}]})));function u8(t){return{vertical:t?.vertical??"top",horizontal:t?.horizontal??"right"}}const oD=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiBadge"}),{anchorOrigin:i,className:s,classes:a,component:o,components:l={},componentsProps:c={},children:u,overlap:f="rectangular",color:p="default",invisible:m=!1,max:x=99,badgeContent:b,slots:v,slotProps:_,showZero:E=!1,variant:T="standard",...A}=r,{badgeContent:C,invisible:M,max:P,displayValue:D}=M0e({max:x,invisible:m,badgeContent:b,showZero:E}),N=KY({anchorOrigin:u8(i),color:p,overlap:f,variant:T,badgeContent:b}),L=M||C==null&&T!=="dot",{color:k=p,overlap:I=f,anchorOrigin:F,variant:z=T}=L?N:r,H=u8(F),B=z!=="dot"?D:void 0,j={...r,badgeContent:C,invisible:L,max:P,displayValue:B,showZero:E,anchorOrigin:H,color:k,overlap:I,variant:z},G=P0e(j),W={slots:{root:v?.root??l.Root,badge:v?.badge??l.Badge},slotProps:{root:_?.root??c.root,badge:_?.badge??c.badge}},[re,$]=Ft("root",{elementType:N0e,externalForwardedProps:{...W,...A},ownerState:j,className:qe(G.root,s),ref:n,additionalProps:{as:o}}),[ee,oe]=Ft("badge",{elementType:O0e,externalForwardedProps:W,ownerState:j,className:G.badge});return g.jsxs(re,{...$,children:[u,g.jsx(ee,{...oe,children:B})]})}),D0e=Pt("MuiBox",["root"]),L0e=FE(),Y=wfe({themeId:Hl,defaultTheme:L0e,defaultClassName:D0e.root,generateClassName:_Y.generate});function I0e(t){return Rt("MuiButton",t)}const wh=Pt("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),lK=w.createContext({}),cK=w.createContext(void 0),k0e=t=>{const{color:e,disableElevation:n,fullWidth:r,size:i,variant:s,loading:a,loadingPosition:o,classes:l}=t,c={root:["root",a&&"loading",s,`${s}${Re(e)}`,`size${Re(i)}`,`${s}Size${Re(i)}`,`color${Re(e)}`,n&&"disableElevation",r&&"fullWidth",a&&`loadingPosition${Re(o)}`],startIcon:["icon","startIcon",`iconSize${Re(i)}`],endIcon:["icon","endIcon",`iconSize${Re(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},u=Nt(c,I0e,l);return{...l,...u}},uK=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],B0e=Ue(ul,{shouldForwardProp:t=>Fs(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${Re(n.color)}`],e[`size${Re(n.size)}`],e[`${n.variant}Size${Re(n.size)}`],n.color==="inherit"&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth,n.loading&&e.loading]}})(wt(({theme:t})=>{const e=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],n=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return{...t.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${wh.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(t.vars||t).shadows[2],"&:hover":{boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2]}},"&:active":{boxShadow:(t.vars||t).shadows[8]},[`&.${wh.focusVisible}`]:{boxShadow:(t.vars||t).shadows[6]},[`&.${wh.disabled}`]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${wh.disabled}`]:{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(t.palette).filter(Hn()).map(([r])=>({props:{color:r},style:{"--variant-textColor":(t.vars||t).palette[r].main,"--variant-outlinedColor":(t.vars||t).palette[r].main,"--variant-outlinedBorder":t.alpha((t.vars||t).palette[r].main,.5),"--variant-containedColor":(t.vars||t).palette[r].contrastText,"--variant-containedBg":(t.vars||t).palette[r].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(t.vars||t).palette[r].dark,"--variant-textBg":t.alpha((t.vars||t).palette[r].main,(t.vars||t).palette.action.hoverOpacity),"--variant-outlinedBorder":(t.vars||t).palette[r].main,"--variant-outlinedBg":t.alpha((t.vars||t).palette[r].main,(t.vars||t).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedBg:e,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedHoverBg:n,"--variant-textBg":t.alpha((t.vars||t).palette.text.primary,(t.vars||t).palette.action.hoverOpacity),"--variant-outlinedBg":t.alpha((t.vars||t).palette.text.primary,(t.vars||t).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:t.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${wh.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${wh.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),[`&.${wh.loading}`]:{color:"transparent"}}}]}})),F0e=Ue("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.startIcon,n.loading&&e.startIconLoadingStart,e[`iconSize${Re(n.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...uK]})),U0e=Ue("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.endIcon,n.loading&&e.endIconLoadingEnd,e[`iconSize${Re(n.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...uK]})),j0e=Ue("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:t})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(t.vars||t).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),d8=Ue("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),un=w.forwardRef(function(e,n){const r=w.useContext(lK),i=w.useContext(cK),s=Kg(r,e),a=Lt({props:s,name:"MuiButton"}),{children:o,color:l="primary",component:c="button",className:u,disabled:f=!1,disableElevation:p=!1,disableFocusRipple:m=!1,endIcon:x,focusVisibleClassName:b,fullWidth:v=!1,id:_,loading:E=null,loadingIndicator:T,loadingPosition:A="center",size:C="medium",startIcon:M,type:P,variant:D="text",...N}=a,L=$p(_),k=T??g.jsx(lr,{"aria-labelledby":L,color:"inherit",size:16}),I={...a,color:l,component:c,disabled:f,disableElevation:p,disableFocusRipple:m,fullWidth:v,loading:E,loadingIndicator:k,loadingPosition:A,size:C,type:P,variant:D},F=k0e(I),z=(M||E&&A==="start")&&g.jsx(F0e,{className:F.startIcon,ownerState:I,children:M||g.jsx(d8,{className:F.loadingIconPlaceholder,ownerState:I})}),H=(x||E&&A==="end")&&g.jsx(U0e,{className:F.endIcon,ownerState:I,children:x||g.jsx(d8,{className:F.loadingIconPlaceholder,ownerState:I})}),B=i||"",j=typeof E=="boolean"?g.jsx("span",{className:F.loadingWrapper,style:{display:"contents"},children:E&&g.jsx(j0e,{className:F.loadingIndicator,ownerState:I,children:k})}):null;return g.jsxs(B0e,{ownerState:I,className:qe(r.className,F.root,u,B),component:c,disabled:f||E,focusRipple:!m,focusVisibleClassName:qe(F.focusVisible,b),ref:n,type:P,id:E?L:_,...N,classes:F,children:[z,A!=="end"&&j,o,A==="end"&&j,H]})});function dK(t){return w.Children.toArray(t).filter(e=>w.isValidElement(e))}function z0e(t){return Rt("MuiButtonGroup",t)}const An=Pt("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","horizontal","vertical","colorPrimary","colorSecondary","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),$0e=(t,e)=>{const{ownerState:n}=t;return[{[`& .${An.grouped}`]:e.grouped},{[`& .${An.grouped}`]:e[`grouped${Re(n.orientation)}`]},{[`& .${An.grouped}`]:e[`grouped${Re(n.variant)}`]},{[`& .${An.grouped}`]:e[`grouped${Re(n.variant)}${Re(n.orientation)}`]},{[`& .${An.grouped}`]:e[`grouped${Re(n.variant)}${Re(n.color)}`]},{[`& .${An.firstButton}`]:e.firstButton},{[`& .${An.lastButton}`]:e.lastButton},{[`& .${An.middleButton}`]:e.middleButton},e.root,e[n.variant],n.disableElevation===!0&&e.disableElevation,n.fullWidth&&e.fullWidth,n.orientation==="vertical"&&e.vertical]},G0e=t=>{const{classes:e,color:n,disabled:r,disableElevation:i,fullWidth:s,orientation:a,variant:o}=t,l={root:["root",o,a,s&&"fullWidth",i&&"disableElevation",`color${Re(n)}`],grouped:["grouped",`grouped${Re(a)}`,`grouped${Re(o)}`,`grouped${Re(o)}${Re(a)}`,`grouped${Re(o)}${Re(n)}`,r&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return Nt(l,z0e,e)},V0e=Ue("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:$0e})(wt(({theme:t})=>({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius,variants:[{props:{variant:"contained"},style:{boxShadow:(t.vars||t).shadows[2]}},{props:{disableElevation:!0},style:{boxShadow:"none"}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{orientation:"vertical"},style:{flexDirection:"column",[`& .${An.lastButton},& .${An.middleButton}`]:{borderTopRightRadius:0,borderTopLeftRadius:0},[`& .${An.firstButton},& .${An.middleButton}`]:{borderBottomRightRadius:0,borderBottomLeftRadius:0}}},{props:{orientation:"horizontal"},style:{[`& .${An.firstButton},& .${An.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${An.lastButton},& .${An.middleButton}`]:{borderTopLeftRadius:0,borderBottomLeftRadius:0}}},{props:{variant:"text",orientation:"horizontal"},style:{[`& .${An.firstButton},& .${An.middleButton}`]:{borderRight:t.vars?`1px solid ${t.alpha(t.vars.palette.common.onBackground,.23)}`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${An.disabled}`]:{borderRight:`1px solid ${(t.vars||t).palette.action.disabled}`}}}},{props:{variant:"text",orientation:"vertical"},style:{[`& .${An.firstButton},& .${An.middleButton}`]:{borderBottom:t.vars?`1px solid ${t.alpha(t.vars.palette.common.onBackground,.23)}`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${An.disabled}`]:{borderBottom:`1px solid ${(t.vars||t).palette.action.disabled}`}}}},...Object.entries(t.palette).filter(Hn()).flatMap(([e])=>[{props:{variant:"text",color:e},style:{[`& .${An.firstButton},& .${An.middleButton}`]:{borderColor:t.alpha((t.vars||t).palette[e].main,.5)}}}]),{props:{variant:"outlined",orientation:"horizontal"},style:{[`& .${An.firstButton},& .${An.middleButton}`]:{borderRightColor:"transparent","&:hover":{borderRightColor:"currentColor"}},[`& .${An.lastButton},& .${An.middleButton}`]:{marginLeft:-1}}},{props:{variant:"outlined",orientation:"vertical"},style:{[`& .${An.firstButton},& .${An.middleButton}`]:{borderBottomColor:"transparent","&:hover":{borderBottomColor:"currentColor"}},[`& .${An.lastButton},& .${An.middleButton}`]:{marginTop:-1}}},{props:{variant:"contained",orientation:"horizontal"},style:{[`& .${An.firstButton},& .${An.middleButton}`]:{borderRight:`1px solid ${(t.vars||t).palette.grey[400]}`,[`&.${An.disabled}`]:{borderRight:`1px solid ${(t.vars||t).palette.action.disabled}`}}}},{props:{variant:"contained",orientation:"vertical"},style:{[`& .${An.firstButton},& .${An.middleButton}`]:{borderBottom:`1px solid ${(t.vars||t).palette.grey[400]}`,[`&.${An.disabled}`]:{borderBottom:`1px solid ${(t.vars||t).palette.action.disabled}`}}}},...Object.entries(t.palette).filter(Hn(["dark"])).map(([e])=>({props:{variant:"contained",color:e},style:{[`& .${An.firstButton},& .${An.middleButton}`]:{borderColor:(t.vars||t).palette[e].dark}}}))],[`& .${An.grouped}`]:{minWidth:40,boxShadow:"none",props:{variant:"contained"},style:{"&:hover":{boxShadow:"none"}}}}))),lD=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiButtonGroup"}),{children:i,className:s,color:a="primary",component:o="div",disabled:l=!1,disableElevation:c=!1,disableFocusRipple:u=!1,disableRipple:f=!1,fullWidth:p=!1,orientation:m="horizontal",size:x="medium",variant:b="outlined",...v}=r,_={...r,color:a,component:o,disabled:l,disableElevation:c,disableFocusRipple:u,disableRipple:f,fullWidth:p,orientation:m,size:x,variant:b},E=G0e(_),T=w.useMemo(()=>({className:E.grouped,color:a,disabled:l,disableElevation:c,disableFocusRipple:u,disableRipple:f,fullWidth:p,size:x,variant:b}),[a,l,c,u,f,p,x,b,E.grouped]),A=dK(i),C=A.length,M=P=>{const D=P===0,N=P===C-1;return D&&N?"":D?E.firstButton:N?E.lastButton:E.middleButton};return g.jsx(V0e,{as:o,role:"group",className:qe(E.root,s),ref:n,ownerState:_,...v,children:g.jsx(lK.Provider,{value:T,children:A.map((P,D)=>g.jsx(cK.Provider,{value:M(D),children:P},D))})})});function H0e(t){return Rt("MuiCard",t)}Pt("MuiCard",["root"]);const W0e=t=>{const{classes:e}=t;return Nt({root:["root"]},H0e,e)},q0e=Ue(gn,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),xi=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiCard"}),{className:i,raised:s=!1,...a}=r,o={...r,raised:s},l=W0e(o);return g.jsx(q0e,{className:qe(l.root,i),elevation:s?8:void 0,ref:n,ownerState:o,...a})});function X0e(t){return Rt("MuiCardActions",t)}Pt("MuiCardActions",["root","spacing"]);const Y0e=t=>{const{classes:e,disableSpacing:n}=t;return Nt({root:["root",!n&&"spacing"]},X0e,e)},K0e=Ue("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableSpacing&&e.spacing]}})({display:"flex",alignItems:"center",padding:8,variants:[{props:{disableSpacing:!1},style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),Z0e=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiCardActions"}),{disableSpacing:i=!1,className:s,...a}=r,o={...r,disableSpacing:i},l=Y0e(o);return g.jsx(K0e,{className:qe(l.root,s),ownerState:o,ref:n,...a})});function Q0e(t){return Rt("MuiCardContent",t)}Pt("MuiCardContent",["root"]);const J0e=t=>{const{classes:e}=t;return Nt({root:["root"]},Q0e,e)},exe=Ue("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),yi=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiCardContent"}),{className:i,component:s="div",...a}=r,o={...r,component:s},l=J0e(o);return g.jsx(exe,{as:s,className:qe(l.root,i),ownerState:o,ref:n,...a})});function txe(t){return Rt("MuiCardMedia",t)}Pt("MuiCardMedia",["root","media","img"]);const nxe=t=>{const{classes:e,isMediaComponent:n,isImageComponent:r}=t;return Nt({root:["root",n&&"media",r&&"img"]},txe,e)},rxe=Ue("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t,{isMediaComponent:r,isImageComponent:i}=n;return[e.root,r&&e.media,i&&e.img]}})({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",variants:[{props:{isMediaComponent:!0},style:{width:"100%"}},{props:{isImageComponent:!0},style:{objectFit:"cover"}}]}),ixe=["video","audio","picture","iframe","img"],sxe=["picture","img"],fK=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiCardMedia"}),{children:i,className:s,component:a="div",image:o,src:l,style:c,...u}=r,f=ixe.includes(a),p=!f&&o?{backgroundImage:`url("${o}")`,...c}:c,m={...r,component:a,isMediaComponent:f,isImageComponent:sxe.includes(a)},x=nxe(m);return g.jsx(rxe,{className:qe(x.root,s),as:a,role:!f&&o?"img":void 0,ref:n,style:p,ownerState:m,src:f?o||l:void 0,...u,children:i})});function axe(t){return Rt("PrivateSwitchBase",t)}Pt("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const oxe=t=>{const{classes:e,checked:n,disabled:r,edge:i}=t,s={root:["root",n&&"checked",r&&"disabled",i&&`edge${Re(i)}`],input:["input"]};return Nt(s,axe,e)},lxe=Ue(ul,{name:"MuiSwitchBase"})({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:t,ownerState:e})=>t==="start"&&e.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:t,ownerState:e})=>t==="end"&&e.size!=="small",style:{marginRight:-12}}]}),cxe=Ue("input",{name:"MuiSwitchBase",shouldForwardProp:Fs})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),hK=w.forwardRef(function(e,n){const{autoFocus:r,checked:i,checkedIcon:s,defaultChecked:a,disabled:o,disableFocusRipple:l=!1,edge:c=!1,icon:u,id:f,inputProps:p,inputRef:m,name:x,onBlur:b,onChange:v,onFocus:_,readOnly:E,required:T=!1,tabIndex:A,type:C,value:M,slots:P={},slotProps:D={},...N}=e,[L,k]=Zg({controlled:i,default:!!a,name:"SwitchBase",state:"checked"}),I=_d(),F=te=>{_&&_(te),I&&I.onFocus&&I.onFocus(te)},z=te=>{b&&b(te),I&&I.onBlur&&I.onBlur(te)},H=te=>{if(te.nativeEvent.defaultPrevented)return;const K=te.target.checked;k(K),v&&v(te,K)};let B=o;I&&typeof B>"u"&&(B=I.disabled);const j=C==="checkbox"||C==="radio",G={...e,checked:L,disabled:B,disableFocusRipple:l,edge:c},W=oxe(G),re={slots:P,slotProps:{input:p,...D}},[$,ee]=Ft("root",{ref:n,elementType:lxe,className:W.root,shouldForwardComponentProp:!0,externalForwardedProps:{...re,component:"span",...N},getSlotProps:te=>({...te,onFocus:K=>{te.onFocus?.(K),F(K)},onBlur:K=>{te.onBlur?.(K),z(K)}}),ownerState:G,additionalProps:{centerRipple:!0,focusRipple:!l,disabled:B,role:void 0,tabIndex:null}}),[oe,me]=Ft("input",{ref:m,elementType:cxe,className:W.input,externalForwardedProps:re,getSlotProps:te=>({...te,onChange:K=>{te.onChange?.(K),H(K)}}),ownerState:G,additionalProps:{autoFocus:r,checked:i,defaultChecked:a,disabled:B,id:j?f:void 0,name:x,readOnly:E,required:T,tabIndex:A,type:C,...C==="checkbox"&&M===void 0?{}:{value:M}}});return g.jsxs($,{...ee,children:[g.jsx(oe,{...me}),L?s:u]})}),uxe=Et(g.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})),dxe=Et(g.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})),fxe=Et(g.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}));function hxe(t){return Rt("MuiCheckbox",t)}const o3=Pt("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),pxe=t=>{const{classes:e,indeterminate:n,color:r,size:i}=t,s={root:["root",n&&"indeterminate",`color${Re(r)}`,`size${Re(i)}`]},a=Nt(s,hxe,e);return{...e,...a}},mxe=Ue(hK,{shouldForwardProp:t=>Fs(t)||t==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.indeterminate&&e.indeterminate,e[`size${Re(n.size)}`],n.color!=="default"&&e[`color${Re(n.color)}`]]}})(wt(({theme:t})=>({color:(t.vars||t).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:t.alpha((t.vars||t).palette.action.active,(t.vars||t).palette.action.hoverOpacity)}}},...Object.entries(t.palette).filter(Hn()).map(([e])=>({props:{color:e,disableRipple:!1},style:{"&:hover":{backgroundColor:t.alpha((t.vars||t).palette[e].main,(t.vars||t).palette.action.hoverOpacity)}}})),...Object.entries(t.palette).filter(Hn()).map(([e])=>({props:{color:e},style:{[`&.${o3.checked}, &.${o3.indeterminate}`]:{color:(t.vars||t).palette[e].main},[`&.${o3.disabled}`]:{color:(t.vars||t).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),gxe=g.jsx(dxe,{}),xxe=g.jsx(uxe,{}),yxe=g.jsx(fxe,{}),dk=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiCheckbox"}),{checkedIcon:i=gxe,color:s="primary",icon:a=xxe,indeterminate:o=!1,indeterminateIcon:l=yxe,inputProps:c,size:u="medium",disableRipple:f=!1,className:p,slots:m={},slotProps:x={},...b}=r,v=o?l:a,_=o?l:i,E={...r,disableRipple:f,color:s,indeterminate:o,size:u},T=pxe(E),A=x.input??c,[C,M]=Ft("root",{ref:n,elementType:mxe,className:qe(T.root,p),shouldForwardComponentProp:!0,externalForwardedProps:{slots:m,slotProps:x,...b},ownerState:E,additionalProps:{type:"checkbox",icon:w.cloneElement(v,{fontSize:v.props.fontSize??u}),checkedIcon:w.cloneElement(_,{fontSize:_.props.fontSize??u}),disableRipple:f,slots:m,slotProps:{input:ZI(typeof A=="function"?A(E):A,{"data-indeterminate":o})}}});return g.jsx(C,{...M,classes:T})});function f8(t){return t.substring(2).toLowerCase()}function vxe(t,e){return e.documentElement.clientWidth<t.clientX||e.documentElement.clientHeight<t.clientY}function bxe(t){const{children:e,disableReactTree:n=!1,mouseEvent:r="onClick",onClickAway:i,touchEvent:s="onTouchEnd"}=t,a=w.useRef(!1),o=w.useRef(null),l=w.useRef(!1),c=w.useRef(!1);w.useEffect(()=>(setTimeout(()=>{l.current=!0},0),()=>{l.current=!1}),[]);const u=Vr(Xf(e),o),f=ta(x=>{const b=c.current;c.current=!1;const v=Ai(o.current);if(!l.current||!o.current||"clientX"in x&&vxe(x,v))return;if(a.current){a.current=!1;return}let _;x.composedPath?_=x.composedPath().includes(o.current):_=!v.documentElement.contains(x.target)||o.current.contains(x.target),!_&&(n||!b)&&i(x)}),p=x=>b=>{c.current=!0;const v=e.props[x];v&&v(b)},m={ref:u};return s!==!1&&(m[s]=p(s)),w.useEffect(()=>{if(s!==!1){const x=f8(s),b=Ai(o.current),v=()=>{a.current=!0};return b.addEventListener(x,f),b.addEventListener("touchmove",v),()=>{b.removeEventListener(x,f),b.removeEventListener("touchmove",v)}}},[f,s]),r!==!1&&(m[r]=p(r)),w.useEffect(()=>{if(r!==!1){const x=f8(r),b=Ai(o.current);return b.addEventListener(x,f),()=>{b.removeEventListener(x,f)}}},[f,r]),w.cloneElement(e,m)}const cD=typeof KI({})=="function",_xe=(t,e)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...e&&!t.vars&&{colorScheme:t.palette.mode}}),Sxe=t=>({color:(t.vars||t).palette.text.primary,...t.typography.body1,backgroundColor:(t.vars||t).palette.background.default,"@media print":{backgroundColor:(t.vars||t).palette.common.white}}),pK=(t,e=!1)=>{const n={};e&&t.colorSchemes&&typeof t.getColorSchemeSelector=="function"&&Object.entries(t.colorSchemes).forEach(([s,a])=>{const o=t.getColorSchemeSelector(s);o.startsWith("@")?n[o]={":root":{colorScheme:a.palette?.mode}}:n[o.replace(/\s*&/,"")]={colorScheme:a.palette?.mode}});let r={html:_xe(t,e),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:t.typography.fontWeightBold},body:{margin:0,...Sxe(t),"&::backdrop":{backgroundColor:(t.vars||t).palette.background.default}},...n};const i=t.components?.MuiCssBaseline?.styleOverrides;return i&&(r=[r,i]),r},vT="mui-ecs",wxe=t=>{const e=pK(t,!1),n=Array.isArray(e)?e[0]:e;return!t.vars&&n&&(n.html[`:root:has(${vT})`]={colorScheme:t.palette.mode}),t.colorSchemes&&Object.entries(t.colorSchemes).forEach(([r,i])=>{const s=t.getColorSchemeSelector(r);s.startsWith("@")?n[s]={[`:root:not(:has(.${vT}))`]:{colorScheme:i.palette?.mode}}:n[s.replace(/\s*&/,"")]={[`&:not(:has(.${vT}))`]:{colorScheme:i.palette?.mode}}}),e},Txe=KI(cD?({theme:t,enableColorScheme:e})=>pK(t,e):({theme:t})=>wxe(t));function Exe(t){const e=Lt({props:t,name:"MuiCssBaseline"}),{children:n,enableColorScheme:r=!1}=e;return g.jsxs(w.Fragment,{children:[cD&&g.jsx(Txe,{enableColorScheme:r}),!cD&&!r&&g.jsx("span",{className:vT,style:{display:"none"}}),n]})}function mK(t=window){const e=t.document.documentElement.clientWidth;return t.innerWidth-e}function Cxe(t){const e=Ai(t);return e.body===t?Ro(t).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}function $v(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function h8(t){return parseInt(Ro(t).getComputedStyle(t).paddingRight,10)||0}function Axe(t){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(t.tagName),r=t.tagName==="INPUT"&&t.getAttribute("type")==="hidden";return n||r}function p8(t,e,n,r,i){const s=[e,n,...r];[].forEach.call(t.children,a=>{const o=!s.includes(a),l=!Axe(a);o&&l&&$v(a,i)})}function l3(t,e){let n=-1;return t.some((r,i)=>e(r)?(n=i,!0):!1),n}function Mxe(t,e){const n=[],r=t.container;if(!e.disableScrollLock){if(Cxe(r)){const a=mK(Ro(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${h8(r)+a}px`;const o=Ai(r).querySelectorAll(".mui-fixed");[].forEach.call(o,l=>{n.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${h8(l)+a}px`})}let s;if(r.parentNode instanceof DocumentFragment)s=Ai(r).body;else{const a=r.parentElement,o=Ro(r);s=a?.nodeName==="HTML"&&o.getComputedStyle(a).overflowY==="scroll"?a:r}n.push({value:s.style.overflow,property:"overflow",el:s},{value:s.style.overflowX,property:"overflow-x",el:s},{value:s.style.overflowY,property:"overflow-y",el:s}),s.style.overflow="hidden"}return()=>{n.forEach(({value:s,el:a,property:o})=>{s?a.style.setProperty(o,s):a.style.removeProperty(o)})}}function Rxe(t){const e=[];return[].forEach.call(t.children,n=>{n.getAttribute("aria-hidden")==="true"&&e.push(n)}),e}class Pxe{constructor(){this.modals=[],this.containers=[]}add(e,n){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&$v(e.modalRef,!1);const i=Rxe(n);p8(n,e.mount,e.modalRef,i,!0);const s=l3(this.containers,a=>a.container===n);return s!==-1?(this.containers[s].modals.push(e),r):(this.containers.push({modals:[e],container:n,restore:null,hiddenSiblings:i}),r)}mount(e,n){const r=l3(this.containers,s=>s.modals.includes(e)),i=this.containers[r];i.restore||(i.restore=Mxe(i,n))}remove(e,n=!0){const r=this.modals.indexOf(e);if(r===-1)return r;const i=l3(this.containers,a=>a.modals.includes(e)),s=this.containers[i];if(s.modals.splice(s.modals.indexOf(e),1),this.modals.splice(r,1),s.modals.length===0)s.restore&&s.restore(),e.modalRef&&$v(e.modalRef,n),p8(s.container,e.mount,e.modalRef,s.hiddenSiblings,!1),this.containers.splice(i,1);else{const a=s.modals[s.modals.length-1];a.modalRef&&$v(a.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}const Nxe=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function Oxe(t){const e=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(e)?t.contentEditable==="true"||(t.nodeName==="AUDIO"||t.nodeName==="VIDEO"||t.nodeName==="DETAILS")&&t.getAttribute("tabindex")===null?0:t.tabIndex:e}function Dxe(t){if(t.tagName!=="INPUT"||t.type!=="radio"||!t.name)return!1;const e=r=>t.ownerDocument.querySelector(`input[type="radio"]${r}`);let n=e(`[name="${t.name}"]:checked`);return n||(n=e(`[name="${t.name}"]`)),n!==t}function Lxe(t){return!(t.disabled||t.tagName==="INPUT"&&t.type==="hidden"||Dxe(t))}function Ixe(t){const e=[],n=[];return Array.from(t.querySelectorAll(Nxe)).forEach((r,i)=>{const s=Oxe(r);s===-1||!Lxe(r)||(s===0?e.push(r):n.push({documentOrder:i,tabIndex:s,node:r}))}),n.sort((r,i)=>r.tabIndex===i.tabIndex?r.documentOrder-i.documentOrder:r.tabIndex-i.tabIndex).map(r=>r.node).concat(e)}function kxe(){return!0}function Bxe(t){const{children:e,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:i=!1,getTabbable:s=Ixe,isEnabled:a=kxe,open:o}=t,l=w.useRef(!1),c=w.useRef(null),u=w.useRef(null),f=w.useRef(null),p=w.useRef(null),m=w.useRef(!1),x=w.useRef(null),b=Vr(Xf(e),x),v=w.useRef(null);w.useEffect(()=>{!o||!x.current||(m.current=!n)},[n,o]),w.useEffect(()=>{if(!o||!x.current)return;const T=Ai(x.current);return x.current.contains(T.activeElement)||(x.current.hasAttribute("tabIndex")||x.current.setAttribute("tabIndex","-1"),m.current&&x.current.focus()),()=>{i||(f.current&&f.current.focus&&(l.current=!0,f.current.focus()),f.current=null)}},[o]),w.useEffect(()=>{if(!o||!x.current)return;const T=Ai(x.current),A=P=>{v.current=P,!(r||!a()||P.key!=="Tab")&&T.activeElement===x.current&&P.shiftKey&&(l.current=!0,u.current&&u.current.focus())},C=()=>{const P=x.current;if(P===null)return;if(!T.hasFocus()||!a()||l.current){l.current=!1;return}if(P.contains(T.activeElement)||r&&T.activeElement!==c.current&&T.activeElement!==u.current)return;if(T.activeElement!==p.current)p.current=null;else if(p.current!==null)return;if(!m.current)return;let D=[];if((T.activeElement===c.current||T.activeElement===u.current)&&(D=s(x.current)),D.length>0){const N=!!(v.current?.shiftKey&&v.current?.key==="Tab"),L=D[0],k=D[D.length-1];typeof L!="string"&&typeof k!="string"&&(N?k.focus():L.focus())}else P.focus()};T.addEventListener("focusin",C),T.addEventListener("keydown",A,!0);const M=setInterval(()=>{T.activeElement&&T.activeElement.tagName==="BODY"&&C()},50);return()=>{clearInterval(M),T.removeEventListener("focusin",C),T.removeEventListener("keydown",A,!0)}},[n,r,i,a,o,s]);const _=T=>{f.current===null&&(f.current=T.relatedTarget),m.current=!0,p.current=T.target;const A=e.props.onFocus;A&&A(T)},E=T=>{f.current===null&&(f.current=T.relatedTarget),m.current=!0};return g.jsxs(w.Fragment,{children:[g.jsx("div",{tabIndex:o?0:-1,onFocus:E,ref:c,"data-testid":"sentinelStart"}),w.cloneElement(e,{ref:b,onFocus:_}),g.jsx("div",{tabIndex:o?0:-1,onFocus:E,ref:u,"data-testid":"sentinelEnd"})]})}function Fxe(t){return typeof t=="function"?t():t}function Uxe(t){return t?t.props.hasOwnProperty("in"):!1}const m8=()=>{},RS=new Pxe;function jxe(t){const{container:e,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,closeAfterTransition:i=!1,onTransitionEnter:s,onTransitionExited:a,children:o,onClose:l,open:c,rootRef:u}=t,f=w.useRef({}),p=w.useRef(null),m=w.useRef(null),x=Vr(m,u),[b,v]=w.useState(!c),_=Uxe(o);let E=!0;(t["aria-hidden"]==="false"||t["aria-hidden"]===!1)&&(E=!1);const T=()=>Ai(p.current),A=()=>(f.current.modalRef=m.current,f.current.mount=p.current,f.current),C=()=>{RS.mount(A(),{disableScrollLock:r}),m.current&&(m.current.scrollTop=0)},M=ta(()=>{const H=Fxe(e)||T().body;RS.add(A(),H),m.current&&C()}),P=()=>RS.isTopModal(A()),D=ta(H=>{p.current=H,H&&(c&&P()?C():m.current&&$v(m.current,E))}),N=w.useCallback(()=>{RS.remove(A(),E)},[E]);w.useEffect(()=>()=>{N()},[N]),w.useEffect(()=>{c?M():(!_||!i)&&N()},[c,N,_,i,M]);const L=H=>B=>{H.onKeyDown?.(B),!(B.key!=="Escape"||B.which===229||!P())&&(n||(B.stopPropagation(),l&&l(B,"escapeKeyDown")))},k=H=>B=>{H.onClick?.(B),B.target===B.currentTarget&&l&&l(B,"backdropClick")};return{getRootProps:(H={})=>{const B=Uv(t);delete B.onTransitionEnter,delete B.onTransitionExited;const j={...B,...H};return{role:"presentation",...j,onKeyDown:L(j),ref:x}},getBackdropProps:(H={})=>{const B=H;return{"aria-hidden":!0,...B,onClick:k(B),open:c}},getTransitionProps:()=>{const H=()=>{v(!1),s&&s()},B=()=>{v(!0),a&&a(),i&&N()};return{onEnter:U6(H,o?.props.onEnter??m8),onExited:U6(B,o?.props.onExited??m8)}},rootRef:x,portalRef:D,isTopModal:P,exited:b,hasTransition:_}}function zxe(t){return Rt("MuiModal",t)}Pt("MuiModal",["root","hidden","backdrop"]);const $xe=t=>{const{open:e,exited:n,classes:r}=t;return Nt({root:["root",!e&&n&&"hidden"],backdrop:["backdrop"]},zxe,r)},Gxe=Ue("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.open&&n.exited&&e.hidden]}})(wt(({theme:t})=>({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:e})=>!e.open&&e.exited,style:{visibility:"hidden"}}]}))),Vxe=Ue(oK,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),fk=w.forwardRef(function(e,n){const r=Lt({name:"MuiModal",props:e}),{BackdropComponent:i=Vxe,BackdropProps:s,classes:a,className:o,closeAfterTransition:l=!1,children:c,container:u,component:f,components:p={},componentsProps:m={},disableAutoFocus:x=!1,disableEnforceFocus:b=!1,disableEscapeKeyDown:v=!1,disablePortal:_=!1,disableRestoreFocus:E=!1,disableScrollLock:T=!1,hideBackdrop:A=!1,keepMounted:C=!1,onClose:M,onTransitionEnter:P,onTransitionExited:D,open:N,slotProps:L={},slots:k={},theme:I,...F}=r,z={...r,closeAfterTransition:l,disableAutoFocus:x,disableEnforceFocus:b,disableEscapeKeyDown:v,disablePortal:_,disableRestoreFocus:E,disableScrollLock:T,hideBackdrop:A,keepMounted:C},{getRootProps:H,getBackdropProps:B,getTransitionProps:j,portalRef:G,isTopModal:W,exited:re,hasTransition:$}=jxe({...z,rootRef:n}),ee={...z,exited:re},oe=$xe(ee),me={};if(c.props.tabIndex===void 0&&(me.tabIndex="-1"),$){const{onEnter:ve,onExited:Pe}=j();me.onEnter=ve,me.onExited=Pe}const te={slots:{root:p.Root,backdrop:p.Backdrop,...k},slotProps:{...m,...L}},[K,ne]=Ft("root",{ref:n,elementType:Gxe,externalForwardedProps:{...te,...F,component:f},getSlotProps:H,ownerState:ee,className:qe(o,oe?.root,!ee.open&&ee.exited&&oe?.hidden)}),[Ee,se]=Ft("backdrop",{ref:s?.ref,elementType:i,externalForwardedProps:te,shouldForwardComponentProp:!0,additionalProps:s,getSlotProps:ve=>B({...ve,onClick:Pe=>{ve?.onClick&&ve.onClick(Pe)}}),className:qe(s?.className,oe?.backdrop),ownerState:ee});return!C&&!N&&(!$||re)?null:g.jsx(aK,{ref:G,container:u,disablePortal:_,children:g.jsxs(K,{...ne,children:[!A&&i?g.jsx(Ee,{...se}):null,g.jsx(Bxe,{disableEnforceFocus:b,disableAutoFocus:x,disableRestoreFocus:E,isEnabled:W,open:N,children:w.cloneElement(c,me)})]})})});function Hxe(t){return Rt("MuiDialog",t)}const c3=Pt("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),gK=w.createContext({}),Wxe=Ue(oK,{name:"MuiDialog",slot:"Backdrop",overrides:(t,e)=>e.backdrop})({zIndex:-1}),qxe=t=>{const{classes:e,scroll:n,maxWidth:r,fullWidth:i,fullScreen:s}=t,a={root:["root"],container:["container",`scroll${Re(n)}`],paper:["paper",`paperScroll${Re(n)}`,`paperWidth${Re(String(r))}`,i&&"paperFullWidth",s&&"paperFullScreen"]};return Nt(a,Hxe,e)},Xxe=Ue(fk,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),Yxe=Ue("div",{name:"MuiDialog",slot:"Container",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.container,e[`scroll${Re(n.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),Kxe=Ue(gn,{name:"MuiDialog",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.paper,e[`scrollPaper${Re(n.scroll)}`],e[`paperWidth${Re(String(n.maxWidth))}`],n.fullWidth&&e.paperFullWidth,n.fullScreen&&e.paperFullScreen]}})(wt(({theme:t})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:e})=>!e.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:t.breakpoints.unit==="px"?Math.max(t.breakpoints.values.xs,444):`max(${t.breakpoints.values.xs}${t.breakpoints.unit}, 444px)`,[`&.${c3.paperScrollBody}`]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(t.breakpoints.values).filter(e=>e!=="xs").map(e=>({props:{maxWidth:e},style:{maxWidth:`${t.breakpoints.values[e]}${t.breakpoints.unit}`,[`&.${c3.paperScrollBody}`]:{[t.breakpoints.down(t.breakpoints.values[e]+64)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:e})=>e.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:e})=>e.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${c3.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),Bf=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiDialog"}),i=ec(),s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{"aria-describedby":a,"aria-labelledby":o,"aria-modal":l=!0,BackdropComponent:c,BackdropProps:u,children:f,className:p,disableEscapeKeyDown:m=!1,fullScreen:x=!1,fullWidth:b=!1,maxWidth:v="sm",onClick:_,onClose:E,open:T,PaperComponent:A=gn,PaperProps:C={},scroll:M="paper",slots:P={},slotProps:D={},TransitionComponent:N=aD,transitionDuration:L=s,TransitionProps:k,...I}=r,F={...r,disableEscapeKeyDown:m,fullScreen:x,fullWidth:b,maxWidth:v,scroll:M},z=qxe(F),H=w.useRef(),B=be=>{H.current=be.target===be.currentTarget},j=be=>{_&&_(be),H.current&&(H.current=null,E&&E(be,"backdropClick"))},G=$p(o),W=w.useMemo(()=>({titleId:G}),[G]),re={transition:N,...P},$={transition:k,paper:C,backdrop:u,...D},ee={slots:re,slotProps:$},[oe,me]=Ft("root",{elementType:Xxe,shouldForwardComponentProp:!0,externalForwardedProps:ee,ownerState:F,className:qe(z.root,p),ref:n}),[te,K]=Ft("backdrop",{elementType:Wxe,shouldForwardComponentProp:!0,externalForwardedProps:ee,ownerState:F}),[ne,Ee]=Ft("paper",{elementType:Kxe,shouldForwardComponentProp:!0,externalForwardedProps:ee,ownerState:F,className:qe(z.paper,C.className)}),[se,ve]=Ft("container",{elementType:Yxe,externalForwardedProps:ee,ownerState:F,className:z.container}),[Pe,ge]=Ft("transition",{elementType:aD,externalForwardedProps:ee,ownerState:F,additionalProps:{appear:!0,in:T,timeout:L,role:"presentation"}});return g.jsx(oe,{closeAfterTransition:!0,slots:{backdrop:te},slotProps:{backdrop:{transitionDuration:L,as:c,...K}},disableEscapeKeyDown:m,onClose:E,open:T,onClick:j,...me,...I,children:g.jsx(Pe,{...ge,children:g.jsx(se,{onMouseDown:B,...ve,children:g.jsx(ne,{as:A,elevation:24,role:"dialog","aria-describedby":a,"aria-labelledby":G,"aria-modal":l,...Ee,children:g.jsx(gK.Provider,{value:W,children:f})})})})})});function Zxe(t){return Rt("MuiDialogActions",t)}Pt("MuiDialogActions",["root","spacing"]);const Qxe=t=>{const{classes:e,disableSpacing:n}=t;return Nt({root:["root",!n&&"spacing"]},Zxe,e)},Jxe=Ue("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableSpacing&&e.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:t})=>!t.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),i0=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiDialogActions"}),{className:i,disableSpacing:s=!1,...a}=r,o={...r,disableSpacing:s},l=Qxe(o);return g.jsx(Jxe,{className:qe(l.root,i),ownerState:o,ref:n,...a})});function eye(t){return Rt("MuiDialogContent",t)}Pt("MuiDialogContent",["root","dividers"]);function tye(t){return Rt("MuiDialogTitle",t)}const nye=Pt("MuiDialogTitle",["root"]),rye=t=>{const{classes:e,dividers:n}=t;return Nt({root:["root",n&&"dividers"]},eye,e)},iye=Ue("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.dividers&&e.dividers]}})(wt(({theme:t})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:e})=>e.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(t.vars||t).palette.divider}`,borderBottom:`1px solid ${(t.vars||t).palette.divider}`}},{props:({ownerState:e})=>!e.dividers,style:{[`.${nye.root} + &`]:{paddingTop:0}}}]}))),Ff=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiDialogContent"}),{className:i,dividers:s=!1,...a}=r,o={...r,dividers:s},l=rye(o);return g.jsx(iye,{className:qe(l.root,i),ownerState:o,ref:n,...a})}),sye=t=>{const{classes:e}=t;return Nt({root:["root"]},tye,e)},aye=Ue(Z,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),wp=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiDialogTitle"}),{className:i,id:s,...a}=r,o=r,l=sye(o),{titleId:c=s}=w.useContext(gK);return g.jsx(aye,{component:"h2",className:qe(l.root,i),ownerState:o,ref:n,variant:"h6",id:s??c,...a})});function oye(t){return Rt("MuiDivider",t)}const g8=Pt("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),lye=t=>{const{absolute:e,children:n,classes:r,flexItem:i,light:s,orientation:a,textAlign:o,variant:l}=t;return Nt({root:["root",e&&"absolute",l,s&&"light",a==="vertical"&&"vertical",i&&"flexItem",n&&"withChildren",n&&a==="vertical"&&"withChildrenVertical",o==="right"&&a!=="vertical"&&"textAlignRight",o==="left"&&a!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",a==="vertical"&&"wrapperVertical"]},oye,r)},cye=Ue("div",{name:"MuiDivider",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.absolute&&e.absolute,e[n.variant],n.light&&e.light,n.orientation==="vertical"&&e.vertical,n.flexItem&&e.flexItem,n.children&&e.withChildren,n.children&&n.orientation==="vertical"&&e.withChildrenVertical,n.textAlign==="right"&&n.orientation!=="vertical"&&e.textAlignRight,n.textAlign==="left"&&n.orientation!=="vertical"&&e.textAlignLeft]}})(wt(({theme:t})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:t.alpha((t.vars||t).palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:t.spacing(2),marginRight:t.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:t.spacing(1),marginBottom:t.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:e})=>!!e.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:e})=>e.children&&e.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(t.vars||t).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:e})=>e.orientation==="vertical"&&e.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(t.vars||t).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:e})=>e.textAlign==="right"&&e.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:e})=>e.textAlign==="left"&&e.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),uye=Ue("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.wrapper,n.orientation==="vertical"&&e.wrapperVertical]}})(wt(({theme:t})=>({display:"inline-block",paddingLeft:`calc(${t.spacing(1)} * 1.2)`,paddingRight:`calc(${t.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${t.spacing(1)} * 1.2)`,paddingBottom:`calc(${t.spacing(1)} * 1.2)`}}]}))),bs=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiDivider"}),{absolute:i=!1,children:s,className:a,orientation:o="horizontal",component:l=s||o==="vertical"?"div":"hr",flexItem:c=!1,light:u=!1,role:f=l!=="hr"?"separator":void 0,textAlign:p="center",variant:m="fullWidth",...x}=r,b={...r,absolute:i,component:l,flexItem:c,light:u,orientation:o,role:f,textAlign:p,variant:m},v=lye(b);return g.jsx(cye,{as:l,className:qe(v.root,a),role:f,ref:n,ownerState:b,"aria-orientation":f==="separator"&&(l!=="hr"||o==="vertical")?o:void 0,...x,children:s?g.jsx(uye,{className:v.wrapper,ownerState:b,children:s}):null})});bs&&(bs.muiSkipListHighlight=!0);function dye(t,e,n){const r=e.getBoundingClientRect(),i=n&&n.getBoundingClientRect(),s=Ro(e);let a;if(e.fakeTransform)a=e.fakeTransform;else{const c=s.getComputedStyle(e);a=c.getPropertyValue("-webkit-transform")||c.getPropertyValue("transform")}let o=0,l=0;if(a&&a!=="none"&&typeof a=="string"){const c=a.split("(")[1].split(")")[0].split(",");o=parseInt(c[4],10),l=parseInt(c[5],10)}return t==="left"?i?`translateX(${i.right+o-r.left}px)`:`translateX(${s.innerWidth+o-r.left}px)`:t==="right"?i?`translateX(-${r.right-i.left-o}px)`:`translateX(-${r.left+r.width-o}px)`:t==="up"?i?`translateY(${i.bottom+l-r.top}px)`:`translateY(${s.innerHeight+l-r.top}px)`:i?`translateY(-${r.top-i.top+r.height-l}px)`:`translateY(-${r.top+r.height-l}px)`}function fye(t){return typeof t=="function"?t():t}function PS(t,e,n){const r=fye(n),i=dye(t,e,r);i&&(e.style.webkitTransform=i,e.style.transform=i)}const hye=w.forwardRef(function(e,n){const r=ec(),i={enter:r.transitions.easing.easeOut,exit:r.transitions.easing.sharp},s={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:a,appear:o=!0,children:l,container:c,direction:u="down",easing:f=i,in:p,onEnter:m,onEntered:x,onEntering:b,onExit:v,onExited:_,onExiting:E,style:T,timeout:A=s,TransitionComponent:C=bl,...M}=e,P=w.useRef(null),D=Vr(Xf(l),P,n),N=G=>W=>{G&&(W===void 0?G(P.current):G(P.current,W))},L=N((G,W)=>{PS(u,G,c),tk(G),m&&m(G,W)}),k=N((G,W)=>{const re=kf({timeout:A,style:T,easing:f},{mode:"enter"});G.style.webkitTransition=r.transitions.create("-webkit-transform",{...re}),G.style.transition=r.transitions.create("transform",{...re}),G.style.webkitTransform="none",G.style.transform="none",b&&b(G,W)}),I=N(x),F=N(E),z=N(G=>{const W=kf({timeout:A,style:T,easing:f},{mode:"exit"});G.style.webkitTransition=r.transitions.create("-webkit-transform",W),G.style.transition=r.transitions.create("transform",W),PS(u,G,c),v&&v(G)}),H=N(G=>{G.style.webkitTransition="",G.style.transition="",_&&_(G)}),B=G=>{a&&a(P.current,G)},j=w.useCallback(()=>{P.current&&PS(u,P.current,c)},[u,c]);return w.useEffect(()=>{if(p||u==="down"||u==="right")return;const G=m_(()=>{P.current&&PS(u,P.current,c)}),W=Ro(P.current);return W.addEventListener("resize",G),()=>{G.clear(),W.removeEventListener("resize",G)}},[u,p,c]),w.useEffect(()=>{p||j()},[p,j]),g.jsx(C,{nodeRef:P,onEnter:L,onEntered:I,onEntering:k,onExit:z,onExited:H,onExiting:F,addEndListener:B,appear:o,in:p,timeout:A,...M,children:(G,{ownerState:W,...re})=>w.cloneElement(l,{ref:D,style:{visibility:G==="exited"&&!p?"hidden":void 0,...T,...l.props.style},...re})})});function pye(t){return Rt("MuiDrawer",t)}Pt("MuiDrawer",["root","docked","paper","anchorLeft","anchorRight","anchorTop","anchorBottom","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const xK=(t,e)=>{const{ownerState:n}=t;return[e.root,(n.variant==="permanent"||n.variant==="persistent")&&e.docked,e.modal]},mye=t=>{const{classes:e,anchor:n,variant:r}=t,i={root:["root",`anchor${Re(n)}`],docked:[(r==="permanent"||r==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${Re(n)}`,r!=="temporary"&&`paperAnchorDocked${Re(n)}`]};return Nt(i,pye,e)},gye=Ue(fk,{name:"MuiDrawer",slot:"Root",overridesResolver:xK})(wt(({theme:t})=>({zIndex:(t.vars||t).zIndex.drawer}))),xye=Ue("div",{shouldForwardProp:Fs,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:xK})({flex:"0 0 auto"}),yye=Ue(gn,{name:"MuiDrawer",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.paper,e[`paperAnchor${Re(n.anchor)}`],n.variant!=="temporary"&&e[`paperAnchorDocked${Re(n.anchor)}`]]}})(wt(({theme:t})=>({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(t.vars||t).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,variants:[{props:{anchor:"left"},style:{left:0}},{props:{anchor:"top"},style:{top:0,left:0,right:0,height:"auto",maxHeight:"100%"}},{props:{anchor:"right"},style:{right:0}},{props:{anchor:"bottom"},style:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"}},{props:({ownerState:e})=>e.anchor==="left"&&e.variant!=="temporary",style:{borderRight:`1px solid ${(t.vars||t).palette.divider}`}},{props:({ownerState:e})=>e.anchor==="top"&&e.variant!=="temporary",style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`}},{props:({ownerState:e})=>e.anchor==="right"&&e.variant!=="temporary",style:{borderLeft:`1px solid ${(t.vars||t).palette.divider}`}},{props:({ownerState:e})=>e.anchor==="bottom"&&e.variant!=="temporary",style:{borderTop:`1px solid ${(t.vars||t).palette.divider}`}}]}))),yK={left:"right",right:"left",top:"down",bottom:"up"};function vye(t){return["left","right"].includes(t)}function bye({direction:t},e){return t==="rtl"&&vye(e)?yK[e]:e}const vK=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiDrawer"}),i=ec(),s=Wf(),a={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{anchor:o="left",BackdropProps:l,children:c,className:u,elevation:f=16,hideBackdrop:p=!1,ModalProps:{BackdropProps:m,...x}={},onClose:b,open:v=!1,PaperProps:_={},SlideProps:E,TransitionComponent:T,transitionDuration:A=a,variant:C="temporary",slots:M={},slotProps:P={},...D}=r,N=w.useRef(!1);w.useEffect(()=>{N.current=!0},[]);const L=bye({direction:s?"rtl":"ltr"},o),I={...r,anchor:o,elevation:f,open:v,variant:C,...D},F=mye(I),z={slots:{transition:T,...M},slotProps:{paper:_,transition:E,...P,backdrop:ZI(P.backdrop||{...l,...m},{transitionDuration:A})}},[H,B]=Ft("root",{ref:n,elementType:gye,className:qe(F.root,F.modal,u),shouldForwardComponentProp:!0,ownerState:I,externalForwardedProps:{...z,...D,...x},additionalProps:{open:v,onClose:b,hideBackdrop:p,slots:{backdrop:z.slots.backdrop},slotProps:{backdrop:z.slotProps.backdrop}}}),[j,G]=Ft("paper",{elementType:yye,shouldForwardComponentProp:!0,className:qe(F.paper,_.className),ownerState:I,externalForwardedProps:z,additionalProps:{elevation:C==="temporary"?f:0,square:!0,...C==="temporary"&&{role:"dialog","aria-modal":"true"}}}),[W,re]=Ft("docked",{elementType:xye,ref:n,className:qe(F.root,F.docked,u),ownerState:I,externalForwardedProps:z,additionalProps:D}),[$,ee]=Ft("transition",{elementType:hye,ownerState:I,externalForwardedProps:z,additionalProps:{in:v,direction:yK[L],timeout:A,appear:N.current}}),oe=g.jsx(j,{...G,children:c});if(C==="permanent")return g.jsx(W,{...re,children:oe});const me=g.jsx($,{...ee,children:oe});return C==="persistent"?g.jsx(W,{...re,children:me}):g.jsx(H,{...B,children:me})});function _ye(t){return Rt("MuiFab",t)}const x8=Pt("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]),Sye=t=>{const{color:e,variant:n,classes:r,size:i}=t,s={root:["root",n,`size${Re(i)}`,e==="inherit"?"colorInherit":e]},a=Nt(s,_ye,r);return{...r,...a}},wye=Ue(ul,{name:"MuiFab",slot:"Root",shouldForwardProp:t=>Fs(t)||t==="classes",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`size${Re(n.size)}`],n.color==="inherit"&&e.colorInherit,e[Re(n.size)],e[n.color]]}})(wt(({theme:t})=>({...t.typography.button,minHeight:36,transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(t.vars||t).zIndex.fab,boxShadow:(t.vars||t).shadows[6],"&:active":{boxShadow:(t.vars||t).shadows[12]},color:t.vars?t.vars.palette.grey[900]:t.palette.getContrastText?.(t.palette.grey[300]),backgroundColor:(t.vars||t).palette.grey[300],"&:hover":{backgroundColor:(t.vars||t).palette.grey.A100,"@media (hover: none)":{backgroundColor:(t.vars||t).palette.grey[300]},textDecoration:"none"},[`&.${x8.focusVisible}`]:{boxShadow:(t.vars||t).shadows[6]},variants:[{props:{size:"small"},style:{width:40,height:40}},{props:{size:"medium"},style:{width:48,height:48}},{props:{variant:"extended"},style:{borderRadius:48/2,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48}},{props:{variant:"extended",size:"small"},style:{width:"auto",padding:"0 8px",borderRadius:34/2,minWidth:34,height:34}},{props:{variant:"extended",size:"medium"},style:{width:"auto",padding:"0 16px",borderRadius:40/2,minWidth:40,height:40}},{props:{color:"inherit"},style:{color:"inherit"}}]})),wt(({theme:t})=>({variants:[...Object.entries(t.palette).filter(Hn(["dark","contrastText"])).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].contrastText,backgroundColor:(t.vars||t).palette[e].main,"&:hover":{backgroundColor:(t.vars||t).palette[e].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[e].main}}}}))]})),wt(({theme:t})=>({[`&.${x8.disabled}`]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}))),jh=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiFab"}),{children:i,className:s,color:a="default",component:o="button",disabled:l=!1,disableFocusRipple:c=!1,focusVisibleClassName:u,size:f="large",variant:p="circular",...m}=r,x={...r,color:a,component:o,disabled:l,disableFocusRipple:c,size:f,variant:p},b=Sye(x);return g.jsx(wye,{className:qe(b.root,s),component:o,disabled:l,focusRipple:!c,focusVisibleClassName:qe(b.focusVisible,u),ownerState:x,ref:n,...m,classes:b,children:i})}),Tye=t=>{const{classes:e,disableUnderline:n,startAdornment:r,endAdornment:i,size:s,hiddenLabel:a,multiline:o}=t,l={root:["root",!n&&"underline",r&&"adornedStart",i&&"adornedEnd",s==="small"&&`size${Re(s)}`,a&&"hiddenLabel",o&&"multiline"],input:["input"]},c=Nt(l,m0e,e);return{...e,...c}},Eye=Ue(HE,{shouldForwardProp:t=>Fs(t)||t==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...GE(t,e),!n.disableUnderline&&e.underline]}})(wt(({theme:t})=>{const e=t.palette.mode==="light",n=e?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=e?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",i=e?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",s=e?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:i,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r}},[`&.${Sh.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r},[`&.${Sh.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:s},variants:[{props:({ownerState:a})=>!a.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Sh.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Sh.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?t.alpha(t.vars.palette.common.onBackground,t.vars.opacity.inputUnderline):n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Sh.disabled}, .${Sh.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${Sh.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(Hn()).map(([a])=>({props:{disableUnderline:!1,color:a},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[a]?.main}`}}})),{props:({ownerState:a})=>a.startAdornment,style:{paddingLeft:12}},{props:({ownerState:a})=>a.endAdornment,style:{paddingRight:12}},{props:({ownerState:a})=>a.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:a,size:o})=>a.multiline&&o==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:a})=>a.multiline&&a.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:a})=>a.multiline&&a.hiddenLabel&&a.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),Cye=Ue(WE,{name:"MuiFilledInput",slot:"Input",overridesResolver:VE})(wt(({theme:t})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:e})=>e.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}},{props:({ownerState:e})=>e.hiddenLabel&&e.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:e})=>e.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),hk=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiFilledInput"}),{disableUnderline:i=!1,components:s={},componentsProps:a,fullWidth:o=!1,hiddenLabel:l,inputComponent:c="input",multiline:u=!1,slotProps:f,slots:p={},type:m="text",...x}=r,b={...r,disableUnderline:i,fullWidth:o,inputComponent:c,multiline:u,type:m},v=Tye(r),_={root:{ownerState:b},input:{ownerState:b}},E=f??a?ea(_,f??a):_,T=p.root??s.Root??Eye,A=p.input??s.Input??Cye;return g.jsx(uk,{slots:{root:T,input:A},slotProps:E,fullWidth:o,inputComponent:c,multiline:u,ref:n,type:m,...x,classes:v})});hk.muiName="Input";function Aye(t){return Rt("MuiFormControl",t)}Pt("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const Mye=t=>{const{classes:e,margin:n,fullWidth:r}=t,i={root:["root",n!=="none"&&`margin${Re(n)}`,r&&"fullWidth"]};return Nt(i,Aye,e)},Rye=Ue("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`margin${Re(n.margin)}`],n.fullWidth&&e.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),Tf=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiFormControl"}),{children:i,className:s,color:a="primary",component:o="div",disabled:l=!1,error:c=!1,focused:u,fullWidth:f=!1,hiddenLabel:p=!1,margin:m="none",required:x=!1,size:b="medium",variant:v="outlined",..._}=r,E={...r,color:a,component:o,disabled:l,error:c,fullWidth:f,hiddenLabel:p,margin:m,required:x,size:b,variant:v},T=Mye(E),[A,C]=w.useState(()=>{let H=!1;return i&&w.Children.forEach(i,B=>{if(!Fv(B,["Input","Select"]))return;const j=Fv(B,["Select"])?B.props.input:B;j&&u0e(j.props)&&(H=!0)}),H}),[M,P]=w.useState(()=>{let H=!1;return i&&w.Children.forEach(i,B=>{Fv(B,["Input","Select"])&&(XT(B.props,!0)||XT(B.props.inputProps,!0))&&(H=!0)}),H}),[D,N]=w.useState(!1);l&&D&&N(!1);const L=u!==void 0&&!l?u:D;let k;w.useRef(!1);const I=w.useCallback(()=>{P(!0)},[]),F=w.useCallback(()=>{P(!1)},[]),z=w.useMemo(()=>({adornedStart:A,setAdornedStart:C,color:a,disabled:l,error:c,filled:M,focused:L,fullWidth:f,hiddenLabel:p,size:b,onBlur:()=>{N(!1)},onFocus:()=>{N(!0)},onEmpty:F,onFilled:I,registerEffect:k,required:x,variant:v}),[A,a,l,c,M,L,f,p,k,F,I,x,b,v]);return g.jsx($E.Provider,{value:z,children:g.jsx(Rye,{as:o,ownerState:E,className:qe(T.root,s),ref:n,..._,children:i})})});function Pye(t){return Rt("MuiFormControlLabel",t)}const Tv=Pt("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Nye=t=>{const{classes:e,disabled:n,labelPlacement:r,error:i,required:s}=t,a={root:["root",n&&"disabled",`labelPlacement${Re(r)}`,i&&"error",s&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",i&&"error"]};return Nt(a,Pye,e)},Oye=Ue("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${Tv.label}`]:e.label},e.root,e[`labelPlacement${Re(n.labelPlacement)}`]]}})(wt(({theme:t})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Tv.disabled}`]:{cursor:"default"},[`& .${Tv.label}`]:{[`&.${Tv.disabled}`]:{color:(t.vars||t).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:e})=>e==="start"||e==="top"||e==="bottom",style:{marginLeft:16}}]}))),Dye=Ue("span",{name:"MuiFormControlLabel",slot:"Asterisk"})(wt(({theme:t})=>({[`&.${Tv.error}`]:{color:(t.vars||t).palette.error.main}}))),Ef=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiFormControlLabel"}),{checked:i,className:s,componentsProps:a={},control:o,disabled:l,disableTypography:c,inputRef:u,label:f,labelPlacement:p="end",name:m,onChange:x,required:b,slots:v={},slotProps:_={},value:E,...T}=r,A=_d(),C=l??o.props.disabled??A?.disabled,M=b??o.props.required,P={disabled:C,required:M};["checked","name","onChange","value","inputRef"].forEach(H=>{typeof o.props[H]>"u"&&typeof r[H]<"u"&&(P[H]=r[H])});const D=Gp({props:r,muiFormControl:A,states:["error"]}),N={...r,disabled:C,labelPlacement:p,required:M,error:D.error},L=Nye(N),k={slots:v,slotProps:{...a,..._}},[I,F]=Ft("typography",{elementType:Z,externalForwardedProps:k,ownerState:N});let z=f;return z!=null&&z.type!==Z&&!c&&(z=g.jsx(I,{component:"span",...F,className:qe(L.label,F?.className),children:z})),g.jsxs(Oye,{className:qe(L.root,s),ownerState:N,ref:n,...T,children:[w.cloneElement(o,P),M?g.jsxs("div",{children:[z,g.jsxs(Dye,{ownerState:N,"aria-hidden":!0,className:L.asterisk,children:["","*"]})]}):z]})});function Lye(t){return Rt("MuiFormHelperText",t)}const y8=Pt("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var v8;const Iye=t=>{const{classes:e,contained:n,size:r,disabled:i,error:s,filled:a,focused:o,required:l}=t,c={root:["root",i&&"disabled",s&&"error",r&&`size${Re(r)}`,n&&"contained",o&&"focused",a&&"filled",l&&"required"]};return Nt(c,Lye,e)},kye=Ue("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.size&&e[`size${Re(n.size)}`],n.contained&&e.contained,n.filled&&e.filled]}})(wt(({theme:t})=>({color:(t.vars||t).palette.text.secondary,...t.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${y8.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${y8.error}`]:{color:(t.vars||t).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:e})=>e.contained,style:{marginLeft:14,marginRight:14}}]}))),Bye=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiFormHelperText"}),{children:i,className:s,component:a="p",disabled:o,error:l,filled:c,focused:u,margin:f,required:p,variant:m,...x}=r,b=_d(),v=Gp({props:r,muiFormControl:b,states:["variant","size","disabled","error","filled","focused","required"]}),_={...r,component:a,contained:v.variant==="filled"||v.variant==="outlined",variant:v.variant,size:v.size,disabled:v.disabled,error:v.error,filled:v.filled,focused:v.focused,required:v.required};delete _.ownerState;const E=Iye(_);return g.jsx(kye,{as:a,className:qe(E.root,s),ref:n,...x,ownerState:_,children:i===" "?v8||(v8=g.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):i})});function Fye(t){return Rt("MuiFormLabel",t)}const Gv=Pt("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),Uye=t=>{const{classes:e,color:n,focused:r,disabled:i,error:s,filled:a,required:o}=t,l={root:["root",`color${Re(n)}`,i&&"disabled",s&&"error",a&&"filled",r&&"focused",o&&"required"],asterisk:["asterisk",s&&"error"]};return Nt(l,Fye,e)},jye=Ue("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color==="secondary"&&e.colorSecondary,n.filled&&e.filled]}})(wt(({theme:t})=>({color:(t.vars||t).palette.text.secondary,...t.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(t.palette).filter(Hn()).map(([e])=>({props:{color:e},style:{[`&.${Gv.focused}`]:{color:(t.vars||t).palette[e].main}}})),{props:{},style:{[`&.${Gv.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${Gv.error}`]:{color:(t.vars||t).palette.error.main}}}]}))),zye=Ue("span",{name:"MuiFormLabel",slot:"Asterisk"})(wt(({theme:t})=>({[`&.${Gv.error}`]:{color:(t.vars||t).palette.error.main}}))),$ye=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiFormLabel"}),{children:i,className:s,color:a,component:o="label",disabled:l,error:c,filled:u,focused:f,required:p,...m}=r,x=_d(),b=Gp({props:r,muiFormControl:x,states:["color","required","focused","disabled","error","filled"]}),v={...r,color:b.color||"primary",component:o,disabled:b.disabled,error:b.error,filled:b.filled,focused:b.focused,required:b.required},_=Uye(v);return g.jsxs(jye,{as:o,ownerState:v,className:qe(_.root,s),ref:n,...m,children:[i,b.required&&g.jsxs(zye,{ownerState:v,"aria-hidden":!0,className:_.asterisk,children:["","*"]})]})}),Fn=Ahe({createStyledComponent:Ue("div",{name:"MuiGrid",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.container&&e.container]}}),componentName:"MuiGrid",useThemeProps:t=>Lt({props:t,name:"MuiGrid"}),useTheme:ec});function uD(t){return`scale(${t}, ${t**2})`}const Gye={entering:{opacity:1,transform:uD(1)},entered:{opacity:1,transform:"none"}},u3=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),YT=w.forwardRef(function(e,n){const{addEndListener:r,appear:i=!0,children:s,easing:a,in:o,onEnter:l,onEntered:c,onEntering:u,onExit:f,onExited:p,onExiting:m,style:x,timeout:b="auto",TransitionComponent:v=bl,..._}=e,E=rp(),T=w.useRef(),A=ec(),C=w.useRef(null),M=Vr(C,Xf(s),n),P=H=>B=>{if(H){const j=C.current;B===void 0?H(j):H(j,B)}},D=P(u),N=P((H,B)=>{tk(H);const{duration:j,delay:G,easing:W}=kf({style:x,timeout:b,easing:a},{mode:"enter"});let re;b==="auto"?(re=A.transitions.getAutoHeightDuration(H.clientHeight),T.current=re):re=j,H.style.transition=[A.transitions.create("opacity",{duration:re,delay:G}),A.transitions.create("transform",{duration:u3?re:re*.666,delay:G,easing:W})].join(","),l&&l(H,B)}),L=P(c),k=P(m),I=P(H=>{const{duration:B,delay:j,easing:G}=kf({style:x,timeout:b,easing:a},{mode:"exit"});let W;b==="auto"?(W=A.transitions.getAutoHeightDuration(H.clientHeight),T.current=W):W=B,H.style.transition=[A.transitions.create("opacity",{duration:W,delay:j}),A.transitions.create("transform",{duration:u3?W:W*.666,delay:u3?j:j||W*.333,easing:G})].join(","),H.style.opacity=0,H.style.transform=uD(.75),f&&f(H)}),F=P(p),z=H=>{b==="auto"&&E.start(T.current||0,H),r&&r(C.current,H)};return g.jsx(v,{appear:i,in:o,nodeRef:C,onEnter:N,onEntered:L,onEntering:D,onExit:I,onExited:F,onExiting:k,addEndListener:z,timeout:b==="auto"?null:b,..._,children:(H,{ownerState:B,...j})=>w.cloneElement(s,{style:{opacity:0,transform:uD(.75),visibility:H==="exited"&&!o?"hidden":void 0,...Gye[H],...x,...s.props.style},ref:M,...j})})});YT&&(YT.muiSupportAuto=!0);const Vye=t=>{const{classes:e,disableUnderline:n}=t,i=Nt({root:["root",!n&&"underline"],input:["input"]},h0e,e);return{...e,...i}},Hye=Ue(HE,{shouldForwardProp:t=>Fs(t)||t==="classes",name:"MuiInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...GE(t,e),!n.disableUnderline&&e.underline]}})(wt(({theme:t})=>{let n=t.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(n=t.alpha(t.vars.palette.common.onBackground,t.vars.opacity.inputUnderline)),{position:"relative",variants:[{props:({ownerState:r})=>r.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:r})=>!r.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Ny.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Ny.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Ny.disabled}, .${Ny.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${Ny.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(Hn()).map(([r])=>({props:{color:r,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[r].main}`}}}))]}})),Wye=Ue(WE,{name:"MuiInput",slot:"Input",overridesResolver:VE})({}),pk=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiInput"}),{disableUnderline:i=!1,components:s={},componentsProps:a,fullWidth:o=!1,inputComponent:l="input",multiline:c=!1,slotProps:u,slots:f={},type:p="text",...m}=r,x=Vye(r),v={root:{ownerState:{disableUnderline:i}}},_=u??a?ea(u??a,v):v,E=f.root??s.Root??Hye,T=f.input??s.Input??Wye;return g.jsx(uk,{slots:{root:E,input:T},slotProps:_,fullWidth:o,inputComponent:l,multiline:c,ref:n,type:p,...m,classes:x})});pk.muiName="Input";function qye(t){return Rt("MuiInputAdornment",t)}const b8=Pt("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var _8;const Xye=(t,e)=>{const{ownerState:n}=t;return[e.root,e[`position${Re(n.position)}`],n.disablePointerEvents===!0&&e.disablePointerEvents,e[n.variant]]},Yye=t=>{const{classes:e,disablePointerEvents:n,hiddenLabel:r,position:i,size:s,variant:a}=t,o={root:["root",n&&"disablePointerEvents",i&&`position${Re(i)}`,a,r&&"hiddenLabel",s&&`size${Re(s)}`]};return Nt(o,qye,e)},Kye=Ue("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:Xye})(wt(({theme:t})=>({display:"flex",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active,variants:[{props:{variant:"filled"},style:{[`&.${b8.positionStart}&:not(.${b8.hiddenLabel})`]:{marginTop:16}}},{props:{position:"start"},style:{marginRight:8}},{props:{position:"end"},style:{marginLeft:8}},{props:{disablePointerEvents:!0},style:{pointerEvents:"none"}}]}))),Ua=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiInputAdornment"}),{children:i,className:s,component:a="div",disablePointerEvents:o=!1,disableTypography:l=!1,position:c,variant:u,...f}=r,p=_d()||{};let m=u;u&&p.variant,p&&!m&&(m=p.variant);const x={...r,hiddenLabel:p.hiddenLabel,size:p.size,disablePointerEvents:o,position:c,variant:m},b=Yye(x);return g.jsx($E.Provider,{value:null,children:g.jsx(Kye,{as:a,ownerState:x,className:qe(b.root,s),ref:n,...f,children:typeof i=="string"&&!l?g.jsx(Z,{color:"textSecondary",children:i}):g.jsxs(w.Fragment,{children:[c==="start"?_8||(_8=g.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):null,i]})})})});function Zye(t){return Rt("MuiInputLabel",t)}Pt("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const Qye=t=>{const{classes:e,formControl:n,size:r,shrink:i,disableAnimation:s,variant:a,required:o}=t,l={root:["root",n&&"formControl",!s&&"animated",i&&"shrink",r&&r!=="medium"&&`size${Re(r)}`,a],asterisk:[o&&"asterisk"]},c=Nt(l,Zye,e);return{...e,...c}},Jye=Ue($ye,{shouldForwardProp:t=>Fs(t)||t==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${Gv.asterisk}`]:e.asterisk},e.root,n.formControl&&e.formControl,n.size==="small"&&e.sizeSmall,n.shrink&&e.shrink,!n.disableAnimation&&e.animated,n.focused&&e.focused,e[n.variant]]}})(wt(({theme:t})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:e})=>e.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:e})=>e.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:e})=>!e.disableAnimation,style:{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:e,ownerState:n})=>e==="filled"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:e,ownerState:n,size:r})=>e==="filled"&&n.shrink&&r==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:e,ownerState:n})=>e==="outlined"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),dp=w.forwardRef(function(e,n){const r=Lt({name:"MuiInputLabel",props:e}),{disableAnimation:i=!1,margin:s,shrink:a,variant:o,className:l,...c}=r,u=_d();let f=a;typeof f>"u"&&u&&(f=u.filled||u.focused||u.adornedStart);const p=Gp({props:r,muiFormControl:u,states:["size","variant","required","focused"]}),m={...r,disableAnimation:i,formControl:u,shrink:f,size:p.size,variant:p.variant,required:p.required,focused:p.focused},x=Qye(m);return g.jsx(Jye,{"data-shrink":f,ref:n,className:qe(x.root,l),...c,ownerState:m,classes:x})});function eve(t){return Rt("MuiLinearProgress",t)}Pt("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","bar1","bar2","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const dD=4,fD=Hf`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`,tve=typeof fD!="string"?dx`
        animation: ${fD} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
      `:null,hD=Hf`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`,nve=typeof hD!="string"?dx`
        animation: ${hD} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
      `:null,pD=Hf`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`,rve=typeof pD!="string"?dx`
        animation: ${pD} 3s infinite linear;
      `:null,ive=t=>{const{classes:e,variant:n,color:r}=t,i={root:["root",`color${Re(r)}`,n],dashed:["dashed",`dashedColor${Re(r)}`],bar1:["bar","bar1",`barColor${Re(r)}`,(n==="indeterminate"||n==="query")&&"bar1Indeterminate",n==="determinate"&&"bar1Determinate",n==="buffer"&&"bar1Buffer"],bar2:["bar","bar2",n!=="buffer"&&`barColor${Re(r)}`,n==="buffer"&&`color${Re(r)}`,(n==="indeterminate"||n==="query")&&"bar2Indeterminate",n==="buffer"&&"bar2Buffer"]};return Nt(i,eve,e)},mk=(t,e)=>t.vars?t.vars.palette.LinearProgress[`${e}Bg`]:t.palette.mode==="light"?t.lighten(t.palette[e].main,.62):t.darken(t.palette[e].main,.5),sve=Ue("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`color${Re(n.color)}`],e[n.variant]]}})(wt(({theme:t})=>({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},variants:[...Object.entries(t.palette).filter(Hn()).map(([e])=>({props:{color:e},style:{backgroundColor:mk(t,e)}})),{props:({ownerState:e})=>e.color==="inherit"&&e.variant!=="buffer",style:{"&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}}},{props:{variant:"buffer"},style:{backgroundColor:"transparent"}},{props:{variant:"query"},style:{transform:"rotate(180deg)"}}]}))),ave=Ue("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.dashed,e[`dashedColor${Re(n.color)}`]]}})(wt(({theme:t})=>({position:"absolute",marginTop:0,height:"100%",width:"100%",backgroundSize:"10px 10px",backgroundPosition:"0 -23px",variants:[{props:{color:"inherit"},style:{opacity:.3,backgroundImage:"radial-gradient(currentColor 0%, currentColor 16%, transparent 42%)"}},...Object.entries(t.palette).filter(Hn()).map(([e])=>{const n=mk(t,e);return{props:{color:e},style:{backgroundImage:`radial-gradient(${n} 0%, ${n} 16%, transparent 42%)`}}})]})),rve||{animation:`${pD} 3s infinite linear`}),ove=Ue("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.bar,e.bar1,e[`barColor${Re(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&e.bar1Indeterminate,n.variant==="determinate"&&e.bar1Determinate,n.variant==="buffer"&&e.bar1Buffer]}})(wt(({theme:t})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[{props:{color:"inherit"},style:{backgroundColor:"currentColor"}},...Object.entries(t.palette).filter(Hn()).map(([e])=>({props:{color:e},style:{backgroundColor:(t.vars||t).palette[e].main}})),{props:{variant:"determinate"},style:{transition:`transform .${dD}s linear`}},{props:{variant:"buffer"},style:{zIndex:1,transition:`transform .${dD}s linear`}},{props:({ownerState:e})=>e.variant==="indeterminate"||e.variant==="query",style:{width:"auto"}},{props:({ownerState:e})=>e.variant==="indeterminate"||e.variant==="query",style:tve||{animation:`${fD} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite`}}]}))),lve=Ue("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.bar,e.bar2,e[`barColor${Re(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&e.bar2Indeterminate,n.variant==="buffer"&&e.bar2Buffer]}})(wt(({theme:t})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[...Object.entries(t.palette).filter(Hn()).map(([e])=>({props:{color:e},style:{"--LinearProgressBar2-barColor":(t.vars||t).palette[e].main}})),{props:({ownerState:e})=>e.variant!=="buffer"&&e.color!=="inherit",style:{backgroundColor:"var(--LinearProgressBar2-barColor, currentColor)"}},{props:({ownerState:e})=>e.variant!=="buffer"&&e.color==="inherit",style:{backgroundColor:"currentColor"}},{props:{color:"inherit"},style:{opacity:.3}},...Object.entries(t.palette).filter(Hn()).map(([e])=>({props:{color:e,variant:"buffer"},style:{backgroundColor:mk(t,e),transition:`transform .${dD}s linear`}})),{props:({ownerState:e})=>e.variant==="indeterminate"||e.variant==="query",style:{width:"auto"}},{props:({ownerState:e})=>e.variant==="indeterminate"||e.variant==="query",style:nve||{animation:`${hD} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite`}}]}))),gk=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiLinearProgress"}),{className:i,color:s="primary",value:a,valueBuffer:o,variant:l="indeterminate",...c}=r,u={...r,color:s,variant:l},f=ive(u),p=Wf(),m={},x={bar1:{},bar2:{}};if((l==="determinate"||l==="buffer")&&a!==void 0){m["aria-valuenow"]=Math.round(a),m["aria-valuemin"]=0,m["aria-valuemax"]=100;let b=a-100;p&&(b=-b),x.bar1.transform=`translateX(${b}%)`}if(l==="buffer"&&o!==void 0){let b=(o||0)-100;p&&(b=-b),x.bar2.transform=`translateX(${b}%)`}return g.jsxs(sve,{className:qe(f.root,i),ownerState:u,role:"progressbar",...m,ref:n,...c,children:[l==="buffer"?g.jsx(ave,{className:f.dashed,ownerState:u}):null,g.jsx(ove,{className:f.bar1,ownerState:u,style:x.bar1}),l==="determinate"?null:g.jsx(lve,{className:f.bar2,ownerState:u,style:x.bar2})]})}),al=w.createContext({});function cve(t){return Rt("MuiList",t)}Pt("MuiList",["root","padding","dense","subheader"]);const uve=t=>{const{classes:e,disablePadding:n,dense:r,subheader:i}=t;return Nt({root:["root",!n&&"padding",r&&"dense",i&&"subheader"]},cve,e)},dve=Ue("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>t.subheader,style:{paddingTop:0}}]}),Tp=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiList"}),{children:i,className:s,component:a="ul",dense:o=!1,disablePadding:l=!1,subheader:c,...u}=r,f=w.useMemo(()=>({dense:o}),[o]),p={...r,component:a,dense:o,disablePadding:l},m=uve(p);return g.jsx(al.Provider,{value:f,children:g.jsxs(dve,{as:a,className:qe(m.root,s),ref:n,ownerState:p,...u,children:[c,i]})})});function fve(t){return Rt("MuiListItem",t)}Pt("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);function hve(t){return Rt("MuiListItemButton",t)}const Sg=Pt("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),pve=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.alignItems==="flex-start"&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters]},mve=t=>{const{alignItems:e,classes:n,dense:r,disabled:i,disableGutters:s,divider:a,selected:o}=t,c=Nt({root:["root",r&&"dense",!s&&"gutters",a&&"divider",i&&"disabled",e==="flex-start"&&"alignItemsFlexStart",o&&"selected"]},hve,n);return{...n,...c}},gve=Ue(ul,{shouldForwardProp:t=>Fs(t)||t==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:pve})(wt(({theme:t})=>({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Sg.selected}`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,(t.vars||t).palette.action.selectedOpacity),[`&.${Sg.focusVisible}`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.focusOpacity}`)}},[`&.${Sg.selected}:hover`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:t.alpha((t.vars||t).palette.primary.main,(t.vars||t).palette.action.selectedOpacity)}},[`&.${Sg.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${Sg.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},variants:[{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.dense,style:{paddingTop:4,paddingBottom:4}}]}))),mb=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiListItemButton"}),{alignItems:i="center",autoFocus:s=!1,component:a="div",children:o,dense:l=!1,disableGutters:c=!1,divider:u=!1,focusVisibleClassName:f,selected:p=!1,className:m,...x}=r,b=w.useContext(al),v=w.useMemo(()=>({dense:l||b.dense||!1,alignItems:i,disableGutters:c}),[i,b.dense,l,c]),_=w.useRef(null);ia(()=>{s&&_.current&&_.current.focus()},[s]);const E={...r,alignItems:i,dense:v.dense,disableGutters:c,divider:u,selected:p},T=mve(E),A=Vr(_,n);return g.jsx(al.Provider,{value:v,children:g.jsx(gve,{ref:A,href:x.href||x.to,component:(x.href||x.to)&&a==="div"?"button":a,focusVisibleClassName:qe(T.focusVisible,f),ownerState:E,className:qe(T.root,m),...x,classes:T,children:o})})});function xve(t){return Rt("MuiListItemSecondaryAction",t)}Pt("MuiListItemSecondaryAction",["root","disableGutters"]);const yve=t=>{const{disableGutters:e,classes:n}=t;return Nt({root:["root",e&&"disableGutters"]},xve,n)},vve=Ue("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.disableGutters&&e.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:t})=>t.disableGutters,style:{right:0}}]}),xk=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiListItemSecondaryAction"}),{className:i,...s}=r,a=w.useContext(al),o={...r,disableGutters:a.disableGutters},l=yve(o);return g.jsx(vve,{className:qe(l.root,i),ownerState:o,ref:n,...s})});xk.muiName="ListItemSecondaryAction";const bve=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.alignItems==="flex-start"&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters,!n.disablePadding&&e.padding,n.hasSecondaryAction&&e.secondaryAction]},_ve=t=>{const{alignItems:e,classes:n,dense:r,disableGutters:i,disablePadding:s,divider:a,hasSecondaryAction:o}=t;return Nt({root:["root",r&&"dense",!i&&"gutters",!s&&"padding",a&&"divider",e==="flex-start"&&"alignItemsFlexStart",o&&"secondaryAction"],container:["container"]},fve,n)},Sve=Ue("div",{name:"MuiListItem",slot:"Root",overridesResolver:bve})(wt(({theme:t})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>!e.disablePadding&&e.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:e})=>!e.disablePadding&&!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>!e.disablePadding&&!!e.secondaryAction,style:{paddingRight:48}},{props:({ownerState:e})=>!!e.secondaryAction,style:{[`& > .${Sg.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:e})=>e.button,style:{transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:e})=>e.hasSecondaryAction,style:{paddingRight:48}}]}))),wve=Ue("li",{name:"MuiListItem",slot:"Container"})({position:"relative"}),Cf=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiListItem"}),{alignItems:i="center",children:s,className:a,component:o,components:l={},componentsProps:c={},ContainerComponent:u="li",ContainerProps:{className:f,...p}={},dense:m=!1,disableGutters:x=!1,disablePadding:b=!1,divider:v=!1,secondaryAction:_,slotProps:E={},slots:T={},...A}=r,C=w.useContext(al),M=w.useMemo(()=>({dense:m||C.dense||!1,alignItems:i,disableGutters:x}),[i,C.dense,m,x]),P=w.useRef(null),D=w.Children.toArray(s),N=D.length&&Fv(D[D.length-1],["ListItemSecondaryAction"]),L={...r,alignItems:i,dense:M.dense,disableGutters:x,disablePadding:b,divider:v,hasSecondaryAction:N},k=_ve(L),I=Vr(P,n),F=T.root||l.Root||Sve,z=E.root||c.root||{},H={className:qe(k.root,z.className,a),...A};let B=o||"li";return N?(B=!H.component&&!o?"div":B,u==="li"&&(B==="li"?B="div":H.component==="li"&&(H.component="div")),g.jsx(al.Provider,{value:M,children:g.jsxs(wve,{as:u,className:qe(k.container,f),ref:I,ownerState:L,...p,children:[g.jsx(F,{...z,...!Dc(F)&&{as:B,ownerState:{...L,...z.ownerState}},...H,children:D}),D.pop()]})})):g.jsx(al.Provider,{value:M,children:g.jsxs(F,{...z,as:B,ref:I,...!Dc(F)&&{ownerState:{...L,...z.ownerState}},...H,children:[D,_&&g.jsx(xk,{children:_})]})})});function Tve(t){return Rt("MuiListItemAvatar",t)}Pt("MuiListItemAvatar",["root","alignItemsFlexStart"]);const Eve=t=>{const{alignItems:e,classes:n}=t;return Nt({root:["root",e==="flex-start"&&"alignItemsFlexStart"]},Tve,n)},Cve=Ue("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.alignItems==="flex-start"&&e.alignItemsFlexStart]}})({minWidth:56,flexShrink:0,variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}),KT=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiListItemAvatar"}),{className:i,...s}=r,a=w.useContext(al),o={...r,alignItems:a.alignItems},l=Eve(o);return g.jsx(Cve,{className:qe(l.root,i),ownerState:o,ref:n,...s})});function Ave(t){return Rt("MuiListItemIcon",t)}const S8=Pt("MuiListItemIcon",["root","alignItemsFlexStart"]),Mve=t=>{const{alignItems:e,classes:n}=t;return Nt({root:["root",e==="flex-start"&&"alignItemsFlexStart"]},Ave,n)},Rve=Ue("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.alignItems==="flex-start"&&e.alignItemsFlexStart]}})(wt(({theme:t})=>({minWidth:56,color:(t.vars||t).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}))),gf=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiListItemIcon"}),{className:i,...s}=r,a=w.useContext(al),o={...r,alignItems:a.alignItems},l=Mve(o);return g.jsx(Rve,{className:qe(l.root,i),ownerState:o,ref:n,...s})});function Pve(t){return Rt("MuiListItemText",t)}const Eg=Pt("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),Nve=t=>{const{classes:e,inset:n,primary:r,secondary:i,dense:s}=t;return Nt({root:["root",n&&"inset",s&&"dense",r&&i&&"multiline"],primary:["primary"],secondary:["secondary"]},Pve,e)},Ove=Ue("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${Eg.primary}`]:e.primary},{[`& .${Eg.secondary}`]:e.secondary},e.root,n.inset&&e.inset,n.primary&&n.secondary&&e.multiline,n.dense&&e.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${q6.root}:where(& .${Eg.primary})`]:{display:"block"},[`.${q6.root}:where(& .${Eg.secondary})`]:{display:"block"},variants:[{props:({ownerState:t})=>t.primary&&t.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:t})=>t.inset,style:{paddingLeft:56}}]}),Ba=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiListItemText"}),{children:i,className:s,disableTypography:a=!1,inset:o=!1,primary:l,primaryTypographyProps:c,secondary:u,secondaryTypographyProps:f,slots:p={},slotProps:m={},...x}=r,{dense:b}=w.useContext(al);let v=l??i,_=u;const E={...r,disableTypography:a,inset:o,primary:!!v,secondary:!!_,dense:b},T=Nve(E),A={slots:p,slotProps:{primary:c,secondary:f,...m}},[C,M]=Ft("root",{className:qe(T.root,s),elementType:Ove,externalForwardedProps:{...A,...x},ownerState:E,ref:n}),[P,D]=Ft("primary",{className:T.primary,elementType:Z,externalForwardedProps:A,ownerState:E}),[N,L]=Ft("secondary",{className:T.secondary,elementType:Z,externalForwardedProps:A,ownerState:E});return v!=null&&v.type!==Z&&!a&&(v=g.jsx(P,{variant:b?"body2":"body1",component:D?.variant?void 0:"span",...D,children:v})),_!=null&&_.type!==Z&&!a&&(_=g.jsx(N,{variant:"body2",color:"textSecondary",...L,children:_})),g.jsxs(C,{...M,children:[v,_]})});function d3(t,e,n){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:t.firstChild}function w8(t,e,n){return t===e?n?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:t.lastChild}function bK(t,e){if(e===void 0)return!0;let n=t.innerText;return n===void 0&&(n=t.textContent),n=n.trim().toLowerCase(),n.length===0?!1:e.repeating?n[0]===e.keys[0]:n.startsWith(e.keys.join(""))}function Oy(t,e,n,r,i,s){let a=!1,o=i(t,e,e?n:!1);for(;o;){if(o===t.firstChild){if(a)return!1;a=!0}const l=r?!1:o.disabled||o.getAttribute("aria-disabled")==="true";if(!o.hasAttribute("tabindex")||!bK(o,s)||l)o=i(t,o,n);else return o.focus(),!0}return!1}const Dve=w.forwardRef(function(e,n){const{actions:r,autoFocus:i=!1,autoFocusItem:s=!1,children:a,className:o,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:u,variant:f="selectedMenu",...p}=e,m=w.useRef(null),x=w.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});ia(()=>{i&&m.current.focus()},[i]),w.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(T,{direction:A})=>{const C=!m.current.style.width;if(T.clientHeight<m.current.clientHeight&&C){const M=`${mK(Ro(T))}px`;m.current.style[A==="rtl"?"paddingLeft":"paddingRight"]=M,m.current.style.width=`calc(100% + ${M})`}return m.current}}),[]);const b=T=>{const A=m.current,C=T.key;if(T.ctrlKey||T.metaKey||T.altKey){u&&u(T);return}const P=Ai(A).activeElement;if(C==="ArrowDown")T.preventDefault(),Oy(A,P,c,l,d3);else if(C==="ArrowUp")T.preventDefault(),Oy(A,P,c,l,w8);else if(C==="Home")T.preventDefault(),Oy(A,null,c,l,d3);else if(C==="End")T.preventDefault(),Oy(A,null,c,l,w8);else if(C.length===1){const D=x.current,N=C.toLowerCase(),L=performance.now();D.keys.length>0&&(L-D.lastTime>500?(D.keys=[],D.repeating=!0,D.previousKeyMatched=!0):D.repeating&&N!==D.keys[0]&&(D.repeating=!1)),D.lastTime=L,D.keys.push(N);const k=P&&!D.repeating&&bK(P,D);D.previousKeyMatched&&(k||Oy(A,P,!1,l,d3,D))?T.preventDefault():D.previousKeyMatched=!1}u&&u(T)},v=Vr(m,n);let _=-1;w.Children.forEach(a,(T,A)=>{if(!w.isValidElement(T)){_===A&&(_+=1,_>=a.length&&(_=-1));return}T.props.disabled||(f==="selectedMenu"&&T.props.selected||_===-1)&&(_=A),_===A&&(T.props.disabled||T.props.muiSkipListHighlight||T.type.muiSkipListHighlight)&&(_+=1,_>=a.length&&(_=-1))});const E=w.Children.map(a,(T,A)=>{if(A===_){const C={};return s&&(C.autoFocus=!0),T.props.tabIndex===void 0&&f==="selectedMenu"&&(C.tabIndex=0),w.cloneElement(T,C)}return T});return g.jsx(Tp,{role:"menu",ref:v,className:o,onKeyDown:b,tabIndex:i?0:-1,...p,children:E})});function Lve(t){return Rt("MuiPopover",t)}Pt("MuiPopover",["root","paper"]);function T8(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.height/2:e==="bottom"&&(n=t.height),n}function E8(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.width/2:e==="right"&&(n=t.width),n}function C8(t){return[t.horizontal,t.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function NS(t){return typeof t=="function"?t():t}const Ive=t=>{const{classes:e}=t;return Nt({root:["root"],paper:["paper"]},Lve,e)},kve=Ue(fk,{name:"MuiPopover",slot:"Root"})({}),_K=Ue(gn,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Bve=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiPopover"}),{action:i,anchorEl:s,anchorOrigin:a={vertical:"top",horizontal:"left"},anchorPosition:o,anchorReference:l="anchorEl",children:c,className:u,container:f,elevation:p=8,marginThreshold:m=16,open:x,PaperProps:b={},slots:v={},slotProps:_={},transformOrigin:E={vertical:"top",horizontal:"left"},TransitionComponent:T,transitionDuration:A="auto",TransitionProps:C={},disableScrollLock:M=!1,...P}=r,D=w.useRef(),N={...r,anchorOrigin:a,anchorReference:l,elevation:p,marginThreshold:m,transformOrigin:E,TransitionComponent:T,transitionDuration:A,TransitionProps:C},L=Ive(N),k=w.useCallback(()=>{if(l==="anchorPosition")return o;const ve=NS(s),ge=(ve&&ve.nodeType===1?ve:Ai(D.current).body).getBoundingClientRect();return{top:ge.top+T8(ge,a.vertical),left:ge.left+E8(ge,a.horizontal)}},[s,a.horizontal,a.vertical,o,l]),I=w.useCallback(ve=>({vertical:T8(ve,E.vertical),horizontal:E8(ve,E.horizontal)}),[E.horizontal,E.vertical]),F=w.useCallback(ve=>{const Pe={width:ve.offsetWidth,height:ve.offsetHeight},ge=I(Pe);if(l==="none")return{top:null,left:null,transformOrigin:C8(ge)};const be=k();let _e=be.top-ge.vertical,Q=be.left-ge.horizontal;const et=_e+Pe.height,ze=Q+Pe.width,Je=Ro(NS(s)),fe=Je.innerHeight-m,rt=Je.innerWidth-m;if(m!==null&&_e<m){const $e=_e-m;_e-=$e,ge.vertical+=$e}else if(m!==null&&et>fe){const $e=et-fe;_e-=$e,ge.vertical+=$e}if(m!==null&&Q<m){const $e=Q-m;Q-=$e,ge.horizontal+=$e}else if(ze>rt){const $e=ze-rt;Q-=$e,ge.horizontal+=$e}return{top:`${Math.round(_e)}px`,left:`${Math.round(Q)}px`,transformOrigin:C8(ge)}},[s,l,k,I,m]),[z,H]=w.useState(x),B=w.useCallback(()=>{const ve=D.current;if(!ve)return;const Pe=F(ve);Pe.top!==null&&ve.style.setProperty("top",Pe.top),Pe.left!==null&&(ve.style.left=Pe.left),ve.style.transformOrigin=Pe.transformOrigin,H(!0)},[F]);w.useEffect(()=>(M&&window.addEventListener("scroll",B),()=>window.removeEventListener("scroll",B)),[s,M,B]);const j=()=>{B()},G=()=>{H(!1)};w.useEffect(()=>{x&&B()}),w.useImperativeHandle(i,()=>x?{updatePosition:()=>{B()}}:null,[x,B]),w.useEffect(()=>{if(!x)return;const ve=m_(()=>{B()}),Pe=Ro(NS(s));return Pe.addEventListener("resize",ve),()=>{ve.clear(),Pe.removeEventListener("resize",ve)}},[s,x,B]);let W=A;const re={slots:{transition:T,...v},slotProps:{transition:C,paper:b,..._}},[$,ee]=Ft("transition",{elementType:YT,externalForwardedProps:re,ownerState:N,getSlotProps:ve=>({...ve,onEntering:(Pe,ge)=>{ve.onEntering?.(Pe,ge),j()},onExited:Pe=>{ve.onExited?.(Pe),G()}}),additionalProps:{appear:!0,in:x}});A==="auto"&&!$.muiSupportAuto&&(W=void 0);const oe=f||(s?Ai(NS(s)).body:void 0),[me,{slots:te,slotProps:K,...ne}]=Ft("root",{ref:n,elementType:kve,externalForwardedProps:{...re,...P},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:v.backdrop},slotProps:{backdrop:ZI(typeof _.backdrop=="function"?_.backdrop(N):_.backdrop,{invisible:!0})},container:oe,open:x},ownerState:N,className:qe(L.root,u)}),[Ee,se]=Ft("paper",{ref:D,className:L.paper,elementType:_K,externalForwardedProps:re,shouldForwardComponentProp:!0,additionalProps:{elevation:p,style:z?void 0:{opacity:0}},ownerState:N});return g.jsx(me,{...ne,...!Dc(me)&&{slots:te,slotProps:K,disableScrollLock:M},children:g.jsx($,{...ee,timeout:W,children:g.jsx(Ee,{...se,children:c})})})});function Fve(t){return Rt("MuiMenu",t)}Pt("MuiMenu",["root","paper","list"]);const Uve={vertical:"top",horizontal:"right"},jve={vertical:"top",horizontal:"left"},zve=t=>{const{classes:e}=t;return Nt({root:["root"],paper:["paper"],list:["list"]},Fve,e)},$ve=Ue(Bve,{shouldForwardProp:t=>Fs(t)||t==="classes",name:"MuiMenu",slot:"Root"})({}),Gve=Ue(_K,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Vve=Ue(Dve,{name:"MuiMenu",slot:"List"})({outline:0}),yk=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiMenu"}),{autoFocus:i=!0,children:s,className:a,disableAutoFocusItem:o=!1,MenuListProps:l={},onClose:c,open:u,PaperProps:f={},PopoverClasses:p,transitionDuration:m="auto",TransitionProps:{onEntering:x,...b}={},variant:v="selectedMenu",slots:_={},slotProps:E={},...T}=r,A=Wf(),C={...r,autoFocus:i,disableAutoFocusItem:o,MenuListProps:l,onEntering:x,PaperProps:f,transitionDuration:m,TransitionProps:b,variant:v},M=zve(C),P=i&&!o&&u,D=w.useRef(null),N=(W,re)=>{D.current&&D.current.adjustStyleForScrollbar(W,{direction:A?"rtl":"ltr"}),x&&x(W,re)},L=W=>{W.key==="Tab"&&(W.preventDefault(),c&&c(W,"tabKeyDown"))};let k=-1;w.Children.map(s,(W,re)=>{w.isValidElement(W)&&(W.props.disabled||(v==="selectedMenu"&&W.props.selected||k===-1)&&(k=re))});const I={slots:_,slotProps:{list:l,transition:b,paper:f,...E}},F=Ia({elementType:_.root,externalSlotProps:E.root,ownerState:C,className:[M.root,a]}),[z,H]=Ft("paper",{className:M.paper,elementType:Gve,externalForwardedProps:I,shouldForwardComponentProp:!0,ownerState:C}),[B,j]=Ft("list",{className:qe(M.list,l.className),elementType:Vve,shouldForwardComponentProp:!0,externalForwardedProps:I,getSlotProps:W=>({...W,onKeyDown:re=>{L(re),W.onKeyDown?.(re)}}),ownerState:C}),G=typeof I.slotProps.transition=="function"?I.slotProps.transition(C):I.slotProps.transition;return g.jsx($ve,{onClose:c,anchorOrigin:{vertical:"bottom",horizontal:A?"right":"left"},transformOrigin:A?Uve:jve,slots:{root:_.root,paper:z,backdrop:_.backdrop,..._.transition&&{transition:_.transition}},slotProps:{root:F,paper:H,backdrop:typeof E.backdrop=="function"?E.backdrop(C):E.backdrop,transition:{...G,onEntering:(...W)=>{N(...W),G?.onEntering?.(...W)}}},open:u,ref:n,transitionDuration:m,ownerState:C,...T,classes:p,children:g.jsx(B,{actions:D,autoFocus:i&&(k===-1||o),autoFocusItem:P,variant:v,...j,children:s})})});function Hve(t){return Rt("MuiMenuItem",t)}const Dy=Pt("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),Wve=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.divider&&e.divider,!n.disableGutters&&e.gutters]},qve=t=>{const{disabled:e,dense:n,divider:r,disableGutters:i,selected:s,classes:a}=t,l=Nt({root:["root",n&&"dense",e&&"disabled",!i&&"gutters",r&&"divider",s&&"selected"]},Hve,a);return{...a,...l}},Xve=Ue(ul,{shouldForwardProp:t=>Fs(t)||t==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:Wve})(wt(({theme:t})=>({...t.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Dy.selected}`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,(t.vars||t).palette.action.selectedOpacity),[`&.${Dy.focusVisible}`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.focusOpacity}`)}},[`&.${Dy.selected}:hover`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:t.alpha((t.vars||t).palette.primary.main,(t.vars||t).palette.action.selectedOpacity)}},[`&.${Dy.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${Dy.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${g8.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${g8.inset}`]:{marginLeft:52},[`& .${Eg.root}`]:{marginTop:0,marginBottom:0},[`& .${Eg.inset}`]:{paddingLeft:36},[`& .${S8.root}`]:{minWidth:36},variants:[{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:e})=>!e.dense,style:{[t.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:e})=>e.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...t.typography.body2,[`& .${S8.root} svg`]:{fontSize:"1.25rem"}}}]}))),nr=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:s="li",dense:a=!1,divider:o=!1,disableGutters:l=!1,focusVisibleClassName:c,role:u="menuitem",tabIndex:f,className:p,...m}=r,x=w.useContext(al),b=w.useMemo(()=>({dense:a||x.dense||!1,disableGutters:l}),[x.dense,a,l]),v=w.useRef(null);ia(()=>{i&&v.current&&v.current.focus()},[i]);const _={...r,dense:b.dense,divider:o,disableGutters:l},E=qve(r),T=Vr(v,n);let A;return r.disabled||(A=f!==void 0?f:-1),g.jsx(al.Provider,{value:b,children:g.jsx(Xve,{ref:T,role:u,tabIndex:A,component:s,focusVisibleClassName:qe(E.focusVisible,c),className:qe(E.root,p),...m,ownerState:_,classes:E})})});function Yve(t){return Rt("MuiNativeSelect",t)}const vk=Pt("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),Kve=t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:s,error:a}=t,o={select:["select",n,r&&"disabled",i&&"multiple",a&&"error"],icon:["icon",`icon${Re(n)}`,s&&"iconOpen",r&&"disabled"]};return Nt(o,Yve,e)},SK=Ue("select",{name:"MuiNativeSelect"})(({theme:t})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${vk.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},variants:[{props:({ownerState:e})=>e.variant!=="filled"&&e.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}}]})),Zve=Ue(SK,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Fs,overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.select,e[n.variant],n.error&&e.error,{[`&.${vk.multiple}`]:e.multiple}]}})({}),wK=Ue("svg",{name:"MuiNativeSelect"})(({theme:t})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${vk.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:({ownerState:e})=>e.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),Qve=Ue(wK,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${Re(n.variant)}`],n.open&&e.iconOpen]}})({}),Jve=w.forwardRef(function(e,n){const{className:r,disabled:i,error:s,IconComponent:a,inputRef:o,variant:l="standard",...c}=e,u={...e,disabled:i,variant:l,error:s},f=Kve(u);return g.jsxs(w.Fragment,{children:[g.jsx(Zve,{ownerState:u,className:qe(f.select,r),disabled:i,ref:o||n,...c}),e.multiple?null:g.jsx(Qve,{as:a,ownerState:u,className:f.icon})]})});var A8;const ebe=Ue("fieldset",{name:"MuiNotchedOutlined",shouldForwardProp:Fs})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),tbe=Ue("legend",{name:"MuiNotchedOutlined",shouldForwardProp:Fs})(wt(({theme:t})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:e})=>!e.withLabel,style:{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})}},{props:({ownerState:e})=>e.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:e})=>e.withLabel&&e.notched,style:{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})}}]})));function nbe(t){const{children:e,classes:n,className:r,label:i,notched:s,...a}=t,o=i!=null&&i!=="",l={...t,notched:s,withLabel:o};return g.jsx(ebe,{"aria-hidden":!0,className:r,ownerState:l,...a,children:g.jsx(tbe,{ownerState:l,children:o?g.jsx("span",{children:i}):A8||(A8=g.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}const rbe=t=>{const{classes:e}=t,r=Nt({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},p0e,e);return{...e,...r}},ibe=Ue(HE,{shouldForwardProp:t=>Fs(t)||t==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:GE})(wt(({theme:t})=>{const e=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${dc.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${dc.notchedOutline}`]:{borderColor:t.vars?t.alpha(t.vars.palette.common.onBackground,.23):e}},[`&.${dc.focused} .${dc.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(t.palette).filter(Hn()).map(([n])=>({props:{color:n},style:{[`&.${dc.focused} .${dc.notchedOutline}`]:{borderColor:(t.vars||t).palette[n].main}}})),{props:{},style:{[`&.${dc.error} .${dc.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${dc.disabled} .${dc.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}}},{props:({ownerState:n})=>n.startAdornment,style:{paddingLeft:14}},{props:({ownerState:n})=>n.endAdornment,style:{paddingRight:14}},{props:({ownerState:n})=>n.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:n,size:r})=>n.multiline&&r==="small",style:{padding:"8.5px 14px"}}]}})),sbe=Ue(nbe,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(wt(({theme:t})=>{const e=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?t.alpha(t.vars.palette.common.onBackground,.23):e}})),abe=Ue(WE,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:VE})(wt(({theme:t})=>({padding:"16.5px 14px",...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:e})=>e.multiline,style:{padding:0}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}}]}))),qE=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiOutlinedInput"}),{components:i={},fullWidth:s=!1,inputComponent:a="input",label:o,multiline:l=!1,notched:c,slots:u={},slotProps:f={},type:p="text",...m}=r,x=rbe(r),b=_d(),v=Gp({props:r,muiFormControl:b,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),_={...r,color:v.color||"primary",disabled:v.disabled,error:v.error,focused:v.focused,formControl:b,fullWidth:s,hiddenLabel:v.hiddenLabel,multiline:l,size:v.size,type:p},E=u.root??i.Root??ibe,T=u.input??i.Input??abe,[A,C]=Ft("notchedOutline",{elementType:sbe,className:x.notchedOutline,shouldForwardComponentProp:!0,ownerState:_,externalForwardedProps:{slots:u,slotProps:f},additionalProps:{label:o!=null&&o!==""&&v.required?g.jsxs(w.Fragment,{children:[o,"","*"]}):o}});return g.jsx(uk,{slots:{root:E,input:T},slotProps:f,renderSuffix:M=>g.jsx(A,{...C,notched:typeof c<"u"?c:!!(M.startAdornment||M.filled||M.focused)}),fullWidth:s,inputComponent:a,multiline:l,ref:n,type:p,...m,classes:{...x,notchedOutline:null}})});qE.muiName="Input";const obe={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function TK(t){return Rt("MuiSelect",t)}const Ly=Pt("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var M8;const lbe=Ue(SK,{name:"MuiSelect",slot:"Select",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`&.${Ly.select}`]:e.select},{[`&.${Ly.select}`]:e[n.variant]},{[`&.${Ly.error}`]:e.error},{[`&.${Ly.multiple}`]:e.multiple}]}})({[`&.${Ly.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),cbe=Ue(wK,{name:"MuiSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${Re(n.variant)}`],n.open&&e.iconOpen]}})({}),ube=Ue("input",{shouldForwardProp:t=>UE(t)&&t!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function R8(t,e){return typeof e=="object"&&e!==null?t===e:String(t)===String(e)}function dbe(t){return t==null||typeof t=="string"&&!t.trim()}const fbe=t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:s,error:a}=t,o={select:["select",n,r&&"disabled",i&&"multiple",a&&"error"],icon:["icon",`icon${Re(n)}`,s&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return Nt(o,TK,e)},hbe=w.forwardRef(function(e,n){const{"aria-describedby":r,"aria-label":i,autoFocus:s,autoWidth:a,children:o,className:l,defaultOpen:c,defaultValue:u,disabled:f,displayEmpty:p,error:m=!1,IconComponent:x,inputRef:b,labelId:v,MenuProps:_={},multiple:E,name:T,onBlur:A,onChange:C,onClose:M,onFocus:P,onOpen:D,open:N,readOnly:L,renderValue:k,required:I,SelectDisplayProps:F={},tabIndex:z,type:H,value:B,variant:j="standard",...G}=e,[W,re]=Zg({controlled:B,default:u,name:"Select"}),[$,ee]=Zg({controlled:N,default:c,name:"Select"}),oe=w.useRef(null),me=w.useRef(null),[te,K]=w.useState(null),{current:ne}=w.useRef(N!=null),[Ee,se]=w.useState(),ve=Vr(n,b),Pe=w.useCallback(st=>{me.current=st,st&&K(st)},[]),ge=te?.parentNode;w.useImperativeHandle(ve,()=>({focus:()=>{me.current.focus()},node:oe.current,value:W}),[W]),w.useEffect(()=>{c&&$&&te&&!ne&&(se(a?null:ge.clientWidth),me.current.focus())},[te,a]),w.useEffect(()=>{s&&me.current.focus()},[s]),w.useEffect(()=>{if(!v)return;const st=Ai(me.current).getElementById(v);if(st){const ht=()=>{getSelection().isCollapsed&&me.current.focus()};return st.addEventListener("click",ht),()=>{st.removeEventListener("click",ht)}}},[v]);const be=(st,ht)=>{st?D&&D(ht):M&&M(ht),ne||(se(a?null:ge.clientWidth),ee(st))},_e=st=>{st.button===0&&(st.preventDefault(),me.current.focus(),be(!0,st))},Q=st=>{be(!1,st)},et=w.Children.toArray(o),ze=st=>{const ht=et.find(gt=>gt.props.value===st.target.value);ht!==void 0&&(re(ht.props.value),C&&C(st,ht))},Je=st=>ht=>{let gt;if(ht.currentTarget.hasAttribute("tabindex")){if(E){gt=Array.isArray(W)?W.slice():[];const Ut=W.indexOf(st.props.value);Ut===-1?gt.push(st.props.value):gt.splice(Ut,1)}else gt=st.props.value;if(st.props.onClick&&st.props.onClick(ht),W!==gt&&(re(gt),C)){const Ut=ht.nativeEvent||ht,ue=new Ut.constructor(Ut.type,Ut);Object.defineProperty(ue,"target",{writable:!0,value:{value:gt,name:T}}),C(ue,st)}E||be(!1,ht)}},fe=st=>{L||[" ","ArrowUp","ArrowDown","Enter"].includes(st.key)&&(st.preventDefault(),be(!0,st))},rt=te!==null&&$,$e=st=>{!rt&&A&&(Object.defineProperty(st,"target",{writable:!0,value:{value:W,name:T}}),A(st))};delete G["aria-invalid"];let Se,q;const V=[];let ie=!1;(XT({value:W})||p)&&(k?Se=k(W):ie=!0);const le=et.map(st=>{if(!w.isValidElement(st))return null;let ht;if(E){if(!Array.isArray(W))throw new Error(ad(2));ht=W.some(gt=>R8(gt,st.props.value)),ht&&ie&&V.push(st.props.children)}else ht=R8(W,st.props.value),ht&&ie&&(q=st.props.children);return w.cloneElement(st,{"aria-selected":ht?"true":"false",onClick:Je(st),onKeyUp:gt=>{gt.key===" "&&gt.preventDefault(),st.props.onKeyUp&&st.props.onKeyUp(gt)},role:"option",selected:ht,value:void 0,"data-value":st.props.value})});ie&&(E?V.length===0?Se=null:Se=V.reduce((st,ht,gt)=>(st.push(ht),gt<V.length-1&&st.push(", "),st),[]):Se=q);let xe=Ee;!a&&ne&&te&&(xe=ge.clientWidth);let pe;typeof z<"u"?pe=z:pe=f?null:0;const it=F.id||(T?`mui-component-select-${T}`:void 0),We={...e,variant:j,value:W,open:rt,error:m},dt=fbe(We),ft={..._.PaperProps,...typeof _.slotProps?.paper=="function"?_.slotProps.paper(We):_.slotProps?.paper},Be={..._.MenuListProps,...typeof _.slotProps?.list=="function"?_.slotProps.list(We):_.slotProps?.list},ot=$p();return g.jsxs(w.Fragment,{children:[g.jsx(lbe,{as:"div",ref:Pe,tabIndex:pe,role:"combobox","aria-controls":rt?ot:void 0,"aria-disabled":f?"true":void 0,"aria-expanded":rt?"true":"false","aria-haspopup":"listbox","aria-label":i,"aria-labelledby":[v,it].filter(Boolean).join(" ")||void 0,"aria-describedby":r,"aria-required":I?"true":void 0,"aria-invalid":m?"true":void 0,onKeyDown:fe,onMouseDown:f||L?null:_e,onBlur:$e,onFocus:P,...F,ownerState:We,className:qe(F.className,dt.select,l),id:it,children:dbe(Se)?M8||(M8=g.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):Se}),g.jsx(ube,{"aria-invalid":m,value:Array.isArray(W)?W.join(","):W,name:T,ref:oe,"aria-hidden":!0,onChange:ze,tabIndex:-1,disabled:f,className:dt.nativeInput,autoFocus:s,required:I,...G,ownerState:We}),g.jsx(cbe,{as:x,className:dt.icon,ownerState:We}),g.jsx(yk,{id:`menu-${T||""}`,anchorEl:ge,open:rt,onClose:Q,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},..._,slotProps:{..._.slotProps,list:{"aria-labelledby":v,role:"listbox","aria-multiselectable":E?"true":void 0,disableListWrap:!0,id:ot,...Be},paper:{...ft,style:{minWidth:xe,...ft!=null?ft.style:null}}},children:le})]})}),pbe=t=>{const{classes:e}=t,r=Nt({root:["root"]},TK,e);return{...e,...r}},bk={name:"MuiSelect",slot:"Root",shouldForwardProp:t=>Fs(t)&&t!=="variant"},mbe=Ue(pk,bk)(""),gbe=Ue(qE,bk)(""),xbe=Ue(hk,bk)(""),Ku=w.forwardRef(function(e,n){const r=Lt({name:"MuiSelect",props:e}),{autoWidth:i=!1,children:s,classes:a={},className:o,defaultOpen:l=!1,displayEmpty:c=!1,IconComponent:u=g0e,id:f,input:p,inputProps:m,label:x,labelId:b,MenuProps:v,multiple:_=!1,native:E=!1,onClose:T,onOpen:A,open:C,renderValue:M,SelectDisplayProps:P,variant:D="outlined",...N}=r,L=E?Jve:hbe,k=_d(),I=Gp({props:r,muiFormControl:k,states:["variant","error"]}),F=I.variant||D,z={...r,variant:F,classes:a},H=pbe(z),{root:B,...j}=H,G=p||{standard:g.jsx(mbe,{ownerState:z}),outlined:g.jsx(gbe,{label:x,ownerState:z}),filled:g.jsx(xbe,{ownerState:z})}[F],W=Vr(n,Xf(G));return g.jsx(w.Fragment,{children:w.cloneElement(G,{inputComponent:L,inputProps:{children:s,error:I.error,IconComponent:u,variant:F,type:void 0,multiple:_,...E?{id:f}:{autoWidth:i,defaultOpen:l,displayEmpty:c,labelId:b,MenuProps:v,onClose:T,onOpen:A,open:C,renderValue:M,SelectDisplayProps:{id:f,...P}},...m,classes:m?ea(j,m.classes):j,...p?p.props.inputProps:{}},...(_&&E||c)&&F==="outlined"?{notched:!0}:{},ref:W,className:qe(G.props.className,o,H.root),...!p&&{variant:F},...N})})});Ku.muiName="Select";function ybe(t,e,n=(r,i)=>r===i){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}const vbe=2;function Bm(t,e,n,r,i){return n===1?Math.min(t+e,i):Math.max(t-e,r)}function EK(t,e){return t-e}function P8(t,e){const{index:n}=t.reduce((r,i,s)=>{const a=Math.abs(e-i);return r===null||a<r.distance||a===r.distance?{distance:a,index:s}:r},null)??{};return n}function OS(t,e){if(e.current!==void 0&&t.changedTouches){const n=t;for(let r=0;r<n.changedTouches.length;r+=1){const i=n.changedTouches[r];if(i.identifier===e.current)return{x:i.clientX,y:i.clientY}}return!1}return{x:t.clientX,y:t.clientY}}function ZT(t,e,n){return(t-e)*100/(n-e)}function bbe(t,e,n){return(n-e)*t+e}function _be(t){if(Math.abs(t)<1){const n=t.toExponential().split("e-"),r=n[0].split(".")[1];return(r?r.length:0)+parseInt(n[1],10)}const e=t.toString().split(".")[1];return e?e.length:0}function Sbe(t,e,n){const r=Math.round((t-n)/e)*e+n;return Number(r.toFixed(_be(e)))}function N8({values:t,newValue:e,index:n}){const r=t.slice();return r[n]=e,r.sort(EK)}function DS({sliderRef:t,activeIndex:e,setActive:n}){const r=Ai(t.current);(!t.current?.contains(r.activeElement)||Number(r?.activeElement?.getAttribute("data-index"))!==e)&&t.current?.querySelector(`[type="range"][data-index="${e}"]`).focus(),n&&n(e)}function LS(t,e){return typeof t=="number"&&typeof e=="number"?t===e:typeof t=="object"&&typeof e=="object"?ybe(t,e):!1}const wbe={horizontal:{offset:t=>({left:`${t}%`}),leap:t=>({width:`${t}%`})},"horizontal-reverse":{offset:t=>({right:`${t}%`}),leap:t=>({width:`${t}%`})},vertical:{offset:t=>({bottom:`${t}%`}),leap:t=>({height:`${t}%`})}},Tbe=t=>t;let IS;function O8(){return IS===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?IS=CSS.supports("touch-action","none"):IS=!0),IS}function Ebe(t){const{"aria-labelledby":e,defaultValue:n,disabled:r=!1,disableSwap:i=!1,isRtl:s=!1,marks:a=!1,max:o=100,min:l=0,name:c,onChange:u,onChangeCommitted:f,orientation:p="horizontal",rootRef:m,scale:x=Tbe,step:b=1,shiftStep:v=10,tabIndex:_,value:E}=t,T=w.useRef(void 0),[A,C]=w.useState(-1),[M,P]=w.useState(-1),[D,N]=w.useState(!1),L=w.useRef(0),k=w.useRef(null),[I,F]=Zg({controlled:E,default:n??l,name:"Slider"}),z=u&&((ie,le,xe)=>{const pe=ie.nativeEvent||ie,it=new pe.constructor(pe.type,pe);Object.defineProperty(it,"target",{writable:!0,value:{value:le,name:c}}),k.current=le,u(it,le,xe)}),H=Array.isArray(I);let B=H?I.slice().sort(EK):[I];B=B.map(ie=>ie==null?l:bg(ie,l,o));const j=a===!0&&b!==null?[...Array(Math.floor((o-l)/b)+1)].map((ie,le)=>({value:l+b*le})):a||[],G=j.map(ie=>ie.value),[W,re]=w.useState(-1),$=w.useRef(null),ee=Vr(m,$),oe=ie=>le=>{const xe=Number(le.currentTarget.getAttribute("data-index"));Qg(le.target)&&re(xe),P(xe),ie?.onFocus?.(le)},me=ie=>le=>{Qg(le.target)||re(-1),P(-1),ie?.onBlur?.(le)},te=(ie,le)=>{const xe=Number(ie.currentTarget.getAttribute("data-index")),pe=B[xe],it=G.indexOf(pe);let We=le;if(j&&b==null){const dt=G[G.length-1];We>=dt?We=dt:We<=G[0]?We=G[0]:We=We<pe?G[it-1]:G[it+1]}if(We=bg(We,l,o),H){i&&(We=bg(We,B[xe-1]||-1/0,B[xe+1]||1/0));const dt=We;We=N8({values:B,newValue:We,index:xe});let ft=xe;i||(ft=We.indexOf(dt)),DS({sliderRef:$,activeIndex:ft})}F(We),re(xe),z&&!LS(We,I)&&z(ie,We,xe),f&&f(ie,k.current??We)},K=ie=>le=>{if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(le.key)){le.preventDefault();const xe=Number(le.currentTarget.getAttribute("data-index")),pe=B[xe];let it=null;if(b!=null){const We=le.shiftKey?v:b;switch(le.key){case"ArrowUp":it=Bm(pe,We,1,l,o);break;case"ArrowRight":it=Bm(pe,We,s?-1:1,l,o);break;case"ArrowDown":it=Bm(pe,We,-1,l,o);break;case"ArrowLeft":it=Bm(pe,We,s?1:-1,l,o);break;case"PageUp":it=Bm(pe,v,1,l,o);break;case"PageDown":it=Bm(pe,v,-1,l,o);break;case"Home":it=l;break;case"End":it=o;break}}else if(j){const We=G[G.length-1],dt=G.indexOf(pe),ft=[s?"ArrowRight":"ArrowLeft","ArrowDown","PageDown","Home"],Be=[s?"ArrowLeft":"ArrowRight","ArrowUp","PageUp","End"];ft.includes(le.key)?dt===0?it=G[0]:it=G[dt-1]:Be.includes(le.key)&&(dt===G.length-1?it=We:it=G[dt+1])}it!=null&&te(le,it)}ie?.onKeyDown?.(le)};ia(()=>{r&&$.current.contains(document.activeElement)&&document.activeElement?.blur()},[r]),r&&A!==-1&&C(-1),r&&W!==-1&&re(-1);const ne=ie=>le=>{ie.onChange?.(le),te(le,le.target.valueAsNumber)},Ee=w.useRef(void 0);let se=p;s&&p==="horizontal"&&(se+="-reverse");const ve=({finger:ie,move:le=!1})=>{const{current:xe}=$,{width:pe,height:it,bottom:We,left:dt}=xe.getBoundingClientRect();let ft;se.startsWith("vertical")?ft=(We-ie.y)/it:ft=(ie.x-dt)/pe,se.includes("-reverse")&&(ft=1-ft);let Be;if(Be=bbe(ft,l,o),b)Be=Sbe(Be,b,l);else{const st=P8(G,Be);Be=G[st]}Be=bg(Be,l,o);let ot=0;if(H){le?ot=Ee.current:ot=P8(B,Be),i&&(Be=bg(Be,B[ot-1]||-1/0,B[ot+1]||1/0));const st=Be;Be=N8({values:B,newValue:Be,index:ot}),i&&le||(ot=Be.indexOf(st),Ee.current=ot)}return{newValue:Be,activeIndex:ot}},Pe=ta(ie=>{const le=OS(ie,T);if(!le)return;if(L.current+=1,ie.type==="mousemove"&&ie.buttons===0){ge(ie);return}const{newValue:xe,activeIndex:pe}=ve({finger:le,move:!0});DS({sliderRef:$,activeIndex:pe,setActive:C}),F(xe),!D&&L.current>vbe&&N(!0),z&&!LS(xe,I)&&z(ie,xe,pe)}),ge=ta(ie=>{const le=OS(ie,T);if(N(!1),!le)return;const{newValue:xe}=ve({finger:le,move:!0});C(-1),ie.type==="touchend"&&P(-1),f&&f(ie,k.current??xe),T.current=void 0,_e()}),be=ta(ie=>{if(r)return;O8()||ie.preventDefault();const le=ie.changedTouches[0];le!=null&&(T.current=le.identifier);const xe=OS(ie,T);if(xe!==!1){const{newValue:it,activeIndex:We}=ve({finger:xe});DS({sliderRef:$,activeIndex:We,setActive:C}),F(it),z&&!LS(it,I)&&z(ie,it,We)}L.current=0;const pe=Ai($.current);pe.addEventListener("touchmove",Pe,{passive:!0}),pe.addEventListener("touchend",ge,{passive:!0})}),_e=w.useCallback(()=>{const ie=Ai($.current);ie.removeEventListener("mousemove",Pe),ie.removeEventListener("mouseup",ge),ie.removeEventListener("touchmove",Pe),ie.removeEventListener("touchend",ge)},[ge,Pe]);w.useEffect(()=>{const{current:ie}=$;return ie.addEventListener("touchstart",be,{passive:O8()}),()=>{ie.removeEventListener("touchstart",be),_e()}},[_e,be]),w.useEffect(()=>{r&&_e()},[r,_e]);const Q=ie=>le=>{if(ie.onMouseDown?.(le),r||le.defaultPrevented||le.button!==0)return;le.preventDefault();const xe=OS(le,T);if(xe!==!1){const{newValue:it,activeIndex:We}=ve({finger:xe});DS({sliderRef:$,activeIndex:We,setActive:C}),F(it),z&&!LS(it,I)&&z(le,it,We)}L.current=0;const pe=Ai($.current);pe.addEventListener("mousemove",Pe,{passive:!0}),pe.addEventListener("mouseup",ge)},et=ZT(H?B[0]:l,l,o),ze=ZT(B[B.length-1],l,o)-et,Je=(ie={})=>{const le=Uv(ie),xe={onMouseDown:Q(le||{})},pe={...le,...xe};return{...ie,ref:ee,...pe}},fe=ie=>le=>{ie.onMouseOver?.(le);const xe=Number(le.currentTarget.getAttribute("data-index"));P(xe)},rt=ie=>le=>{ie.onMouseLeave?.(le),P(-1)},$e=(ie={})=>{const le=Uv(ie),xe={onMouseOver:fe(le||{}),onMouseLeave:rt(le||{})};return{...ie,...le,...xe}},Se=ie=>({pointerEvents:A!==-1&&A!==ie?"none":void 0});let q;return p==="vertical"&&(q=s?"vertical-rl":"vertical-lr"),{active:A,axis:se,axisProps:wbe,dragging:D,focusedThumbIndex:W,getHiddenInputProps:(ie={})=>{const le=Uv(ie),xe={onChange:ne(le||{}),onFocus:oe(le||{}),onBlur:me(le||{}),onKeyDown:K(le||{})},pe={...le,...xe};return{tabIndex:_,"aria-labelledby":e,"aria-orientation":p,"aria-valuemax":x(o),"aria-valuemin":x(l),name:c,type:"range",min:t.min,max:t.max,step:t.step===null&&t.marks?"any":t.step??void 0,disabled:r,...ie,...pe,style:{...obe,direction:s?"rtl":"ltr",width:"100%",height:"100%",writingMode:q}}},getRootProps:Je,getThumbProps:$e,marks:j,open:M,range:H,rootRef:ee,trackLeap:ze,trackOffset:et,values:B,getThumbStyle:Se}}const Cbe=t=>!t||!Dc(t);function Abe(t){return Rt("MuiSlider",t)}const nl=Pt("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),Mbe=t=>{const{open:e}=t;return{offset:qe(e&&nl.valueLabelOpen),circle:nl.valueLabelCircle,label:nl.valueLabelLabel}};function Rbe(t){const{children:e,className:n,value:r}=t,i=Mbe(t);return e?w.cloneElement(e,{className:e.props.className},g.jsxs(w.Fragment,{children:[e.props.children,g.jsx("span",{className:qe(i.offset,n),"aria-hidden":!0,children:g.jsx("span",{className:i.circle,children:g.jsx("span",{className:i.label,children:r})})})]})):null}function D8(t){return t}const Pbe=Ue("span",{name:"MuiSlider",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`color${Re(n.color)}`],n.size!=="medium"&&e[`size${Re(n.size)}`],n.marked&&e.marked,n.orientation==="vertical"&&e.vertical,n.track==="inverted"&&e.trackInverted,n.track===!1&&e.trackFalse]}})(wt(({theme:t})=>({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${nl.disabled}`]:{pointerEvents:"none",cursor:"default",color:(t.vars||t).palette.grey[400]},[`&.${nl.dragging}`]:{[`& .${nl.thumb}, & .${nl.track}`]:{transition:"none"}},variants:[...Object.entries(t.palette).filter(Hn()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}))),Nbe=Ue("span",{name:"MuiSlider",slot:"Rail"})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),Obe=Ue("span",{name:"MuiSlider",slot:"Track"})(wt(({theme:t})=>({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:t.transitions.create(["left","width","bottom","height"],{duration:t.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.entries(t.palette).filter(Hn()).map(([e])=>({props:{color:e,track:"inverted"},style:{...t.vars?{backgroundColor:t.vars.palette.Slider[`${e}Track`],borderColor:t.vars.palette.Slider[`${e}Track`]}:{backgroundColor:t.lighten(t.palette[e].main,.62),borderColor:t.lighten(t.palette[e].main,.62),...t.applyStyles("dark",{backgroundColor:t.darken(t.palette[e].main,.5)}),...t.applyStyles("dark",{borderColor:t.darken(t.palette[e].main,.5)})}}}))]}))),Dbe=Ue("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.thumb,e[`thumbColor${Re(n.color)}`],n.size!=="medium"&&e[`thumbSize${Re(n.size)}`]]}})(wt(({theme:t})=>({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:t.transitions.create(["box-shadow","left","bottom"],{duration:t.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(t.vars||t).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${nl.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.entries(t.palette).filter(Hn()).map(([e])=>({props:{color:e},style:{[`&:hover, &.${nl.focusVisible}`]:{boxShadow:`0px 0px 0px 8px ${t.alpha((t.vars||t).palette[e].main,.16)}`,"@media (hover: none)":{boxShadow:"none"}},[`&.${nl.active}`]:{boxShadow:`0px 0px 0px 14px ${t.alpha((t.vars||t).palette[e].main,.16)}`}}}))]}))),Lbe=Ue(Rbe,{name:"MuiSlider",slot:"ValueLabel"})(wt(({theme:t})=>({zIndex:1,whiteSpace:"nowrap",...t.typography.body2,fontWeight:500,transition:t.transitions.create(["transform"],{duration:t.transitions.duration.shortest}),position:"absolute",backgroundColor:(t.vars||t).palette.grey[600],borderRadius:2,color:(t.vars||t).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${nl.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${nl.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:t.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]}))),Ibe=Ue("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:t=>UE(t)&&t!=="markActive",overridesResolver:(t,e)=>{const{markActive:n}=t;return[e.mark,n&&e.markActive]}})(wt(({theme:t})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(t.vars||t).palette.background.paper,opacity:.8}}]}))),kbe=Ue("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:t=>UE(t)&&t!=="markLabelActive"})(wt(({theme:t})=>({...t.typography.body2,color:(t.vars||t).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(t.vars||t).palette.text.primary}}]}))),Bbe=t=>{const{disabled:e,dragging:n,marked:r,orientation:i,track:s,classes:a,color:o,size:l}=t,c={root:["root",e&&"disabled",n&&"dragging",r&&"marked",i==="vertical"&&"vertical",s==="inverted"&&"trackInverted",s===!1&&"trackFalse",o&&`color${Re(o)}`,l&&`size${Re(l)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",e&&"disabled",l&&`thumbSize${Re(l)}`,o&&`thumbColor${Re(o)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return Nt(c,Abe,a)},Fbe=({children:t})=>t,_k=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiSlider"}),i=Wf(),{"aria-label":s,"aria-valuetext":a,"aria-labelledby":o,component:l="span",components:c={},componentsProps:u={},color:f="primary",classes:p,className:m,disableSwap:x=!1,disabled:b=!1,getAriaLabel:v,getAriaValueText:_,marks:E=!1,max:T=100,min:A=0,name:C,onChange:M,onChangeCommitted:P,orientation:D="horizontal",shiftStep:N=10,size:L="medium",step:k=1,scale:I=D8,slotProps:F,slots:z,tabIndex:H,track:B="normal",value:j,valueLabelDisplay:G="off",valueLabelFormat:W=D8,...re}=r,$={...r,isRtl:i,max:T,min:A,classes:p,disabled:b,disableSwap:x,orientation:D,marks:E,color:f,size:L,step:k,shiftStep:N,scale:I,track:B,valueLabelDisplay:G,valueLabelFormat:W},{axisProps:ee,getRootProps:oe,getHiddenInputProps:me,getThumbProps:te,open:K,active:ne,axis:Ee,focusedThumbIndex:se,range:ve,dragging:Pe,marks:ge,values:be,trackOffset:_e,trackLeap:Q,getThumbStyle:et}=Ebe({...$,rootRef:n});$.marked=ge.length>0&&ge.some(Ge=>Ge.label),$.dragging=Pe,$.focusedThumbIndex=se;const ze=Bbe($),Je=z?.root??c.Root??Pbe,fe=z?.rail??c.Rail??Nbe,rt=z?.track??c.Track??Obe,$e=z?.thumb??c.Thumb??Dbe,Se=z?.valueLabel??c.ValueLabel??Lbe,q=z?.mark??c.Mark??Ibe,V=z?.markLabel??c.MarkLabel??kbe,ie=z?.input??c.Input??"input",le=F?.root??u.root,xe=F?.rail??u.rail,pe=F?.track??u.track,it=F?.thumb??u.thumb,We=F?.valueLabel??u.valueLabel,dt=F?.mark??u.mark,ft=F?.markLabel??u.markLabel,Be=F?.input??u.input,ot=Ia({elementType:Je,getSlotProps:oe,externalSlotProps:le,externalForwardedProps:re,additionalProps:{...Cbe(Je)&&{as:l}},ownerState:{...$,...le?.ownerState},className:[ze.root,m]}),st=Ia({elementType:fe,externalSlotProps:xe,ownerState:$,className:ze.rail}),ht=Ia({elementType:rt,externalSlotProps:pe,additionalProps:{style:{...ee[Ee].offset(_e),...ee[Ee].leap(Q)}},ownerState:{...$,...pe?.ownerState},className:ze.track}),gt=Ia({elementType:$e,getSlotProps:te,externalSlotProps:it,ownerState:{...$,...it?.ownerState},className:ze.thumb}),Ut=Ia({elementType:Se,externalSlotProps:We,ownerState:{...$,...We?.ownerState},className:ze.valueLabel}),ue=Ia({elementType:q,externalSlotProps:dt,ownerState:$,className:ze.mark}),we=Ia({elementType:V,externalSlotProps:ft,ownerState:$,className:ze.markLabel}),Ke=Ia({elementType:ie,getSlotProps:me,externalSlotProps:Be,ownerState:$});return g.jsxs(Je,{...ot,children:[g.jsx(fe,{...st}),g.jsx(rt,{...ht}),ge.filter(Ge=>Ge.value>=A&&Ge.value<=T).map((Ge,Xe)=>{const Ve=ZT(Ge.value,A,T),yt=ee[Ee].offset(Ve);let Mt;return B===!1?Mt=be.includes(Ge.value):Mt=B==="normal"&&(ve?Ge.value>=be[0]&&Ge.value<=be[be.length-1]:Ge.value<=be[0])||B==="inverted"&&(ve?Ge.value<=be[0]||Ge.value>=be[be.length-1]:Ge.value>=be[0]),g.jsxs(w.Fragment,{children:[g.jsx(q,{"data-index":Xe,...ue,...!Dc(q)&&{markActive:Mt},style:{...yt,...ue.style},className:qe(ue.className,Mt&&ze.markActive)}),Ge.label!=null?g.jsx(V,{"aria-hidden":!0,"data-index":Xe,...we,...!Dc(V)&&{markLabelActive:Mt},style:{...yt,...we.style},className:qe(ze.markLabel,we.className,Mt&&ze.markLabelActive),children:Ge.label}):null]},Xe)}),be.map((Ge,Xe)=>{const Ve=ZT(Ge,A,T),yt=ee[Ee].offset(Ve),Mt=G==="off"?Fbe:Se;return g.jsx(Mt,{...!Dc(Mt)&&{valueLabelFormat:W,valueLabelDisplay:G,value:typeof W=="function"?W(I(Ge),Xe):W,index:Xe,open:K===Xe||ne===Xe||G==="on",disabled:b},...Ut,children:g.jsx($e,{"data-index":Xe,...gt,className:qe(ze.thumb,gt.className,ne===Xe&&ze.active,se===Xe&&ze.focusVisible),style:{...yt,...et(Xe),...gt.style},children:g.jsx(ie,{"data-index":Xe,"aria-label":v?v(Xe):s,"aria-valuenow":I(Ge),"aria-labelledby":o,"aria-valuetext":_?_(I(Ge),Xe):a,value:be[Xe],...Ke})})},Xe)})]})});function Ube(t){return Rt("MuiTooltip",t)}const hi=Pt("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function jbe(t){return Math.round(t*1e5)/1e5}const zbe=t=>{const{classes:e,disableInteractive:n,arrow:r,touch:i,placement:s}=t,a={popper:["popper",!n&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",i&&"touch",`tooltipPlacement${Re(s.split("-")[0])}`],arrow:["arrow"]};return Nt(a,Ube,e)},$be=Ue(ck,{name:"MuiTooltip",slot:"Popper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.popper,!n.disableInteractive&&e.popperInteractive,n.arrow&&e.popperArrow,!n.open&&e.popperClose]}})(wt(({theme:t})=>({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:e})=>!e.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:e})=>!e,style:{pointerEvents:"none"}},{props:({ownerState:e})=>e.arrow,style:{[`&[data-popper-placement*="bottom"] .${hi.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${hi.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${hi.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${hi.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:e})=>e.arrow&&!e.isRtl,style:{[`&[data-popper-placement*="right"] .${hi.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!!e.isRtl,style:{[`&[data-popper-placement*="right"] .${hi.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!e.isRtl,style:{[`&[data-popper-placement*="left"] .${hi.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!!e.isRtl,style:{[`&[data-popper-placement*="left"] .${hi.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),Gbe=Ue("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.tooltip,n.touch&&e.touch,n.arrow&&e.tooltipArrow,e[`tooltipPlacement${Re(n.placement.split("-")[0])}`]]}})(wt(({theme:t})=>({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:t.alpha(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium,[`.${hi.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${hi.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${hi.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${hi.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:e})=>e.arrow,style:{position:"relative",margin:0}},{props:({ownerState:e})=>e.touch,style:{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:`${jbe(16/14)}em`,fontWeight:t.typography.fontWeightRegular}},{props:({ownerState:e})=>!e.isRtl,style:{[`.${hi.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${hi.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:e})=>!e.isRtl&&e.touch,style:{[`.${hi.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${hi.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:e})=>!!e.isRtl,style:{[`.${hi.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${hi.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:e})=>!!e.isRtl&&e.touch,style:{[`.${hi.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${hi.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:e})=>e.touch,style:{[`.${hi.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:e})=>e.touch,style:{[`.${hi.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),Vbe=Ue("span",{name:"MuiTooltip",slot:"Arrow"})(wt(({theme:t})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:t.alpha(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let kS=!1;const L8=new jE;let Iy={x:0,y:0};function BS(t,e){return(n,...r)=>{e&&e(n,...r),t(n,...r)}}const Jt=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiTooltip"}),{arrow:i=!1,children:s,classes:a,components:o={},componentsProps:l={},describeChild:c=!1,disableFocusListener:u=!1,disableHoverListener:f=!1,disableInteractive:p=!1,disableTouchListener:m=!1,enterDelay:x=100,enterNextDelay:b=0,enterTouchDelay:v=700,followCursor:_=!1,id:E,leaveDelay:T=0,leaveTouchDelay:A=1500,onClose:C,onOpen:M,open:P,placement:D="bottom",PopperComponent:N,PopperProps:L={},slotProps:k={},slots:I={},title:F,TransitionComponent:z,TransitionProps:H,...B}=r,j=w.isValidElement(s)?s:g.jsx("span",{children:s}),G=ec(),W=Wf(),[re,$]=w.useState(),[ee,oe]=w.useState(null),me=w.useRef(!1),te=p||_,K=rp(),ne=rp(),Ee=rp(),se=rp(),[ve,Pe]=Zg({controlled:P,default:!1,name:"Tooltip",state:"open"});let ge=ve;const be=$p(E),_e=w.useRef(),Q=ta(()=>{_e.current!==void 0&&(document.body.style.WebkitUserSelect=_e.current,_e.current=void 0),se.clear()});w.useEffect(()=>Q,[Q]);const et=Ct=>{L8.clear(),kS=!0,Pe(!0),M&&!ge&&M(Ct)},ze=ta(Ct=>{L8.start(800+T,()=>{kS=!1}),Pe(!1),C&&ge&&C(Ct),K.start(G.transitions.duration.shortest,()=>{me.current=!1})}),Je=Ct=>{me.current&&Ct.type!=="touchstart"||(re&&re.removeAttribute("title"),ne.clear(),Ee.clear(),x||kS&&b?ne.start(kS?b:x,()=>{et(Ct)}):et(Ct))},fe=Ct=>{ne.clear(),Ee.start(T,()=>{ze(Ct)})},[,rt]=w.useState(!1),$e=Ct=>{Qg(Ct.target)||(rt(!1),fe(Ct))},Se=Ct=>{re||$(Ct.currentTarget),Qg(Ct.target)&&(rt(!0),Je(Ct))},q=Ct=>{me.current=!0;const Kt=j.props;Kt.onTouchStart&&Kt.onTouchStart(Ct)},V=Ct=>{q(Ct),Ee.clear(),K.clear(),Q(),_e.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",se.start(v,()=>{document.body.style.WebkitUserSelect=_e.current,Je(Ct)})},ie=Ct=>{j.props.onTouchEnd&&j.props.onTouchEnd(Ct),Q(),Ee.start(A,()=>{ze(Ct)})};w.useEffect(()=>{if(!ge)return;function Ct(Kt){Kt.key==="Escape"&&ze(Kt)}return document.addEventListener("keydown",Ct),()=>{document.removeEventListener("keydown",Ct)}},[ze,ge]);const le=Vr(Xf(j),$,n);!F&&F!==0&&(ge=!1);const xe=w.useRef(),pe=Ct=>{const Kt=j.props;Kt.onMouseMove&&Kt.onMouseMove(Ct),Iy={x:Ct.clientX,y:Ct.clientY},xe.current&&xe.current.update()},it={},We=typeof F=="string";c?(it.title=!ge&&We&&!f?F:null,it["aria-describedby"]=ge?be:null):(it["aria-label"]=We?F:null,it["aria-labelledby"]=ge&&!We?be:null);const dt={...it,...B,...j.props,className:qe(B.className,j.props.className),onTouchStart:q,ref:le,..._?{onMouseMove:pe}:{}},ft={};m||(dt.onTouchStart=V,dt.onTouchEnd=ie),f||(dt.onMouseOver=BS(Je,dt.onMouseOver),dt.onMouseLeave=BS(fe,dt.onMouseLeave),te||(ft.onMouseOver=Je,ft.onMouseLeave=fe)),u||(dt.onFocus=BS(Se,dt.onFocus),dt.onBlur=BS($e,dt.onBlur),te||(ft.onFocus=Se,ft.onBlur=$e));const Be={...r,isRtl:W,arrow:i,disableInteractive:te,placement:D,PopperComponentProp:N,touch:me.current},ot=typeof k.popper=="function"?k.popper(Be):k.popper,st=w.useMemo(()=>{let Ct=[{name:"arrow",enabled:!!ee,options:{element:ee,padding:4}}];return L.popperOptions?.modifiers&&(Ct=Ct.concat(L.popperOptions.modifiers)),ot?.popperOptions?.modifiers&&(Ct=Ct.concat(ot.popperOptions.modifiers)),{...L.popperOptions,...ot?.popperOptions,modifiers:Ct}},[ee,L.popperOptions,ot?.popperOptions]),ht=zbe(Be),gt=typeof k.transition=="function"?k.transition(Be):k.transition,Ut={slots:{popper:o.Popper,transition:o.Transition??z,tooltip:o.Tooltip,arrow:o.Arrow,...I},slotProps:{arrow:k.arrow??l.arrow,popper:{...L,...ot??l.popper},tooltip:k.tooltip??l.tooltip,transition:{...H,...gt??l.transition}}},[ue,we]=Ft("popper",{elementType:$be,externalForwardedProps:Ut,ownerState:Be,className:qe(ht.popper,L?.className)}),[Ke,Ge]=Ft("transition",{elementType:YT,externalForwardedProps:Ut,ownerState:Be}),[Xe,Ve]=Ft("tooltip",{elementType:Gbe,className:ht.tooltip,externalForwardedProps:Ut,ownerState:Be}),[yt,Mt]=Ft("arrow",{elementType:Vbe,className:ht.arrow,externalForwardedProps:Ut,ownerState:Be,ref:oe});return g.jsxs(w.Fragment,{children:[w.cloneElement(j,dt),g.jsx(ue,{as:N??ck,placement:D,anchorEl:_?{getBoundingClientRect:()=>({top:Iy.y,left:Iy.x,right:Iy.x,bottom:Iy.y,width:0,height:0})}:re,popperRef:xe,open:re?ge:!1,id:be,transition:!0,...ft,...we,popperOptions:st,children:({TransitionProps:Ct})=>g.jsx(Ke,{timeout:G.transitions.duration.shorter,...Ct,...Ge,children:g.jsxs(Xe,{...Ve,children:[F,i?g.jsx(yt,{...Mt}):null]})})})]})});function Hbe(t){return Rt("MuiSwitch",t)}const fa=Pt("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),Wbe=t=>{const{classes:e,edge:n,size:r,color:i,checked:s,disabled:a}=t,o={root:["root",n&&`edge${Re(n)}`,`size${Re(r)}`],switchBase:["switchBase",`color${Re(i)}`,s&&"checked",a&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},l=Nt(o,Hbe,e);return{...e,...l}},qbe=Ue("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.edge&&e[`edge${Re(n.edge)}`],e[`size${Re(n.size)}`]]}})({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${fa.thumb}`]:{width:16,height:16},[`& .${fa.switchBase}`]:{padding:4,[`&.${fa.checked}`]:{transform:"translateX(16px)"}}}}]}),Xbe=Ue(hK,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.switchBase,{[`& .${fa.input}`]:e.input},n.color!=="default"&&e[`color${Re(n.color)}`]]}})(wt(({theme:t})=>({position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:`${t.palette.mode==="light"?t.palette.common.white:t.palette.grey[300]}`,transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),[`&.${fa.checked}`]:{transform:"translateX(20px)"},[`&.${fa.disabled}`]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:`${t.palette.mode==="light"?t.palette.grey[100]:t.palette.grey[600]}`},[`&.${fa.checked} + .${fa.track}`]:{opacity:.5},[`&.${fa.disabled} + .${fa.track}`]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:`${t.palette.mode==="light"?.12:.2}`},[`& .${fa.input}`]:{left:"-100%",width:"300%"}})),wt(({theme:t})=>({"&:hover":{backgroundColor:t.alpha((t.vars||t).palette.action.active,(t.vars||t).palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(t.palette).filter(Hn(["light"])).map(([e])=>({props:{color:e},style:{[`&.${fa.checked}`]:{color:(t.vars||t).palette[e].main,"&:hover":{backgroundColor:t.alpha((t.vars||t).palette[e].main,(t.vars||t).palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${fa.disabled}`]:{color:t.vars?t.vars.palette.Switch[`${e}DisabledColor`]:`${t.palette.mode==="light"?t.lighten(t.palette[e].main,.62):t.darken(t.palette[e].main,.55)}`}},[`&.${fa.checked} + .${fa.track}`]:{backgroundColor:(t.vars||t).palette[e].main}}}))]}))),Ybe=Ue("span",{name:"MuiSwitch",slot:"Track"})(wt(({theme:t})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:`${t.palette.mode==="light"?t.palette.common.black:t.palette.common.white}`,opacity:t.vars?t.vars.opacity.switchTrack:`${t.palette.mode==="light"?.38:.3}`}))),Kbe=Ue("span",{name:"MuiSwitch",slot:"Thumb"})(wt(({theme:t})=>({boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),kg=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiSwitch"}),{className:i,color:s="primary",edge:a=!1,size:o="medium",sx:l,slots:c={},slotProps:u={},...f}=r,p={...r,color:s,edge:a,size:o},m=Wbe(p),x={slots:c,slotProps:u},[b,v]=Ft("root",{className:qe(m.root,i),elementType:qbe,externalForwardedProps:x,ownerState:p,additionalProps:{sx:l}}),[_,E]=Ft("thumb",{className:m.thumb,elementType:Kbe,externalForwardedProps:x,ownerState:p}),T=g.jsx(_,{...E}),[A,C]=Ft("track",{className:m.track,elementType:Ybe,externalForwardedProps:x,ownerState:p});return g.jsxs(b,{...v,children:[g.jsx(Xbe,{type:"checkbox",icon:T,checkedIcon:T,ref:n,ownerState:p,...f,classes:{...m,root:m.switchBase},slots:{...c.switchBase&&{root:c.switchBase},...c.input&&{input:c.input}},slotProps:{...u.switchBase&&{root:typeof u.switchBase=="function"?u.switchBase(p):u.switchBase},input:{role:"switch"},...u.input&&{input:typeof u.input=="function"?u.input(p):u.input}}}),g.jsx(A,{...C})]})});function Zbe(t){return Rt("MuiTab",t)}const zo=Pt("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper","icon"]),Qbe=t=>{const{classes:e,textColor:n,fullWidth:r,wrapped:i,icon:s,label:a,selected:o,disabled:l}=t,c={root:["root",s&&a&&"labelIcon",`textColor${Re(n)}`,r&&"fullWidth",i&&"wrapped",o&&"selected",l&&"disabled"],icon:["iconWrapper","icon"]};return Nt(c,Zbe,e)},Jbe=Ue(ul,{name:"MuiTab",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.label&&n.icon&&e.labelIcon,e[`textColor${Re(n.textColor)}`],n.fullWidth&&e.fullWidth,n.wrapped&&e.wrapped,{[`& .${zo.iconWrapper}`]:e.iconWrapper},{[`& .${zo.icon}`]:e.icon}]}})(wt(({theme:t})=>({...t.typography.button,maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center",lineHeight:1.25,variants:[{props:({ownerState:e})=>e.label&&(e.iconPosition==="top"||e.iconPosition==="bottom"),style:{flexDirection:"column"}},{props:({ownerState:e})=>e.label&&e.iconPosition!=="top"&&e.iconPosition!=="bottom",style:{flexDirection:"row"}},{props:({ownerState:e})=>e.icon&&e.label,style:{minHeight:72,paddingTop:9,paddingBottom:9}},{props:({ownerState:e,iconPosition:n})=>e.icon&&e.label&&n==="top",style:{[`& > .${zo.icon}`]:{marginBottom:6}}},{props:({ownerState:e,iconPosition:n})=>e.icon&&e.label&&n==="bottom",style:{[`& > .${zo.icon}`]:{marginTop:6}}},{props:({ownerState:e,iconPosition:n})=>e.icon&&e.label&&n==="start",style:{[`& > .${zo.icon}`]:{marginRight:t.spacing(1)}}},{props:({ownerState:e,iconPosition:n})=>e.icon&&e.label&&n==="end",style:{[`& > .${zo.icon}`]:{marginLeft:t.spacing(1)}}},{props:{textColor:"inherit"},style:{color:"inherit",opacity:.6,[`&.${zo.selected}`]:{opacity:1},[`&.${zo.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}}},{props:{textColor:"primary"},style:{color:(t.vars||t).palette.text.secondary,[`&.${zo.selected}`]:{color:(t.vars||t).palette.primary.main},[`&.${zo.disabled}`]:{color:(t.vars||t).palette.text.disabled}}},{props:{textColor:"secondary"},style:{color:(t.vars||t).palette.text.secondary,[`&.${zo.selected}`]:{color:(t.vars||t).palette.secondary.main},[`&.${zo.disabled}`]:{color:(t.vars||t).palette.text.disabled}}},{props:({ownerState:e})=>e.fullWidth,style:{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"}},{props:({ownerState:e})=>e.wrapped,style:{fontSize:t.typography.pxToRem(12)}}]}))),Nu=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiTab"}),{className:i,disabled:s=!1,disableFocusRipple:a=!1,fullWidth:o,icon:l,iconPosition:c="top",indicator:u,label:f,onChange:p,onClick:m,onFocus:x,selected:b,selectionFollowsFocus:v,textColor:_="inherit",value:E,wrapped:T=!1,...A}=r,C={...r,disabled:s,disableFocusRipple:a,selected:b,icon:!!l,iconPosition:c,label:!!f,fullWidth:o,textColor:_,wrapped:T},M=Qbe(C),P=l&&f&&w.isValidElement(l)?w.cloneElement(l,{className:qe(M.icon,l.props.className)}):l,D=L=>{!b&&p&&p(L,E),m&&m(L)},N=L=>{v&&!b&&p&&p(L,E),x&&x(L)};return g.jsxs(Jbe,{focusRipple:!a,className:qe(M.root,i),ref:n,role:"tab","aria-selected":b,disabled:s,onClick:D,onFocus:N,ownerState:C,tabIndex:b?0:-1,...A,children:[c==="top"||c==="start"?g.jsxs(w.Fragment,{children:[P,f]}):g.jsxs(w.Fragment,{children:[f,P]}),u]})}),CK=w.createContext();function e_e(t){return Rt("MuiTable",t)}Pt("MuiTable",["root","stickyHeader"]);const t_e=t=>{const{classes:e,stickyHeader:n}=t;return Nt({root:["root",n&&"stickyHeader"]},e_e,e)},n_e=Ue("table",{name:"MuiTable",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.stickyHeader&&e.stickyHeader]}})(wt(({theme:t})=>({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...t.typography.body2,padding:t.spacing(2),color:(t.vars||t).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:({ownerState:e})=>e.stickyHeader,style:{borderCollapse:"separate"}}]}))),I8="table",Fm=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiTable"}),{className:i,component:s=I8,padding:a="normal",size:o="medium",stickyHeader:l=!1,...c}=r,u={...r,component:s,padding:a,size:o,stickyHeader:l},f=t_e(u),p=w.useMemo(()=>({padding:a,size:o,stickyHeader:l}),[a,o,l]);return g.jsx(CK.Provider,{value:p,children:g.jsx(n_e,{as:s,role:s===I8?null:"table",ref:n,className:qe(f.root,i),ownerState:u,...c})})}),XE=w.createContext();function r_e(t){return Rt("MuiTableBody",t)}Pt("MuiTableBody",["root"]);const i_e=t=>{const{classes:e}=t;return Nt({root:["root"]},r_e,e)},s_e=Ue("tbody",{name:"MuiTableBody",slot:"Root"})({display:"table-row-group"}),a_e={variant:"body"},k8="tbody",Um=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiTableBody"}),{className:i,component:s=k8,...a}=r,o={...r,component:s},l=i_e(o);return g.jsx(XE.Provider,{value:a_e,children:g.jsx(s_e,{className:qe(l.root,i),as:s,ref:n,role:s===k8?null:"rowgroup",ownerState:o,...a})})});function o_e(t){return Rt("MuiTableCell",t)}const l_e=Pt("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),c_e=t=>{const{classes:e,variant:n,align:r,padding:i,size:s,stickyHeader:a}=t,o={root:["root",n,a&&"stickyHeader",r!=="inherit"&&`align${Re(r)}`,i!=="normal"&&`padding${Re(i)}`,`size${Re(s)}`]};return Nt(o,o_e,e)},u_e=Ue("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`size${Re(n.size)}`],n.padding!=="normal"&&e[`padding${Re(n.padding)}`],n.align!=="inherit"&&e[`align${Re(n.align)}`],n.stickyHeader&&e.stickyHeader]}})(wt(({theme:t})=>({...t.typography.body2,display:"table-cell",verticalAlign:"inherit",borderBottom:t.vars?`1px solid ${t.vars.palette.TableCell.border}`:`1px solid
    ${t.palette.mode==="light"?t.lighten(t.alpha(t.palette.divider,1),.88):t.darken(t.alpha(t.palette.divider,1),.68)}`,textAlign:"left",padding:16,variants:[{props:{variant:"head"},style:{color:(t.vars||t).palette.text.primary,lineHeight:t.typography.pxToRem(24),fontWeight:t.typography.fontWeightMedium}},{props:{variant:"body"},style:{color:(t.vars||t).palette.text.primary}},{props:{variant:"footer"},style:{color:(t.vars||t).palette.text.secondary,lineHeight:t.typography.pxToRem(21),fontSize:t.typography.pxToRem(12)}},{props:{size:"small"},style:{padding:"6px 16px",[`&.${l_e.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}}},{props:{padding:"checkbox"},style:{width:48,padding:"0 0 0 4px"}},{props:{padding:"none"},style:{padding:0}},{props:{align:"left"},style:{textAlign:"left"}},{props:{align:"center"},style:{textAlign:"center"}},{props:{align:"right"},style:{textAlign:"right",flexDirection:"row-reverse"}},{props:{align:"justify"},style:{textAlign:"justify"}},{props:({ownerState:e})=>e.stickyHeader,style:{position:"sticky",top:0,zIndex:2,backgroundColor:(t.vars||t).palette.background.default}}]}))),hn=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiTableCell"}),{align:i="inherit",className:s,component:a,padding:o,scope:l,size:c,sortDirection:u,variant:f,...p}=r,m=w.useContext(CK),x=w.useContext(XE),b=x&&x.variant==="head";let v;a?v=a:v=b?"th":"td";let _=l;v==="td"?_=void 0:!_&&b&&(_="col");const E=f||x&&x.variant,T={...r,align:i,component:v,padding:o||(m&&m.padding?m.padding:"normal"),size:c||(m&&m.size?m.size:"medium"),sortDirection:u,stickyHeader:E==="head"&&m&&m.stickyHeader,variant:E},A=c_e(T);let C=null;return u&&(C=u==="asc"?"ascending":"descending"),g.jsx(u_e,{as:v,ref:n,className:qe(A.root,s),"aria-sort":C,scope:_,ownerState:T,...p})});function d_e(t){return Rt("MuiTableContainer",t)}Pt("MuiTableContainer",["root"]);const f_e=t=>{const{classes:e}=t;return Nt({root:["root"]},d_e,e)},h_e=Ue("div",{name:"MuiTableContainer",slot:"Root"})({width:"100%",overflowX:"auto"}),jm=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiTableContainer"}),{className:i,component:s="div",...a}=r,o={...r,component:s},l=f_e(o);return g.jsx(h_e,{ref:n,as:s,className:qe(l.root,i),ownerState:o,...a})});function p_e(t){return Rt("MuiTableHead",t)}Pt("MuiTableHead",["root"]);const m_e=t=>{const{classes:e}=t;return Nt({root:["root"]},p_e,e)},g_e=Ue("thead",{name:"MuiTableHead",slot:"Root"})({display:"table-header-group"}),x_e={variant:"head"},B8="thead",zm=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiTableHead"}),{className:i,component:s=B8,...a}=r,o={...r,component:s},l=m_e(o);return g.jsx(XE.Provider,{value:x_e,children:g.jsx(g_e,{as:s,className:qe(l.root,i),ref:n,role:s===B8?null:"rowgroup",ownerState:o,...a})})});function y_e(t){return Rt("MuiToolbar",t)}Pt("MuiToolbar",["root","gutters","regular","dense"]);const v_e=t=>{const{classes:e,disableGutters:n,variant:r}=t;return Nt({root:["root",!n&&"gutters",r]},y_e,e)},b_e=Ue("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableGutters&&e.gutters,e[n.variant]]}})(wt(({theme:t})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:t.mixins.toolbar}]}))),__e=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiToolbar"}),{className:i,component:s="div",disableGutters:a=!1,variant:o="regular",...l}=r,c={...r,component:s,disableGutters:a,variant:o},u=v_e(c);return g.jsx(b_e,{as:s,className:qe(u.root,i),ref:n,ownerState:c,...l})}),S_e=Et(g.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"})),w_e=Et(g.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}));function T_e(t){return Rt("MuiTableRow",t)}const F8=Pt("MuiTableRow",["root","selected","hover","head","footer"]),E_e=t=>{const{classes:e,selected:n,hover:r,head:i,footer:s}=t;return Nt({root:["root",n&&"selected",r&&"hover",i&&"head",s&&"footer"]},T_e,e)},C_e=Ue("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.head&&e.head,n.footer&&e.footer]}})(wt(({theme:t})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${F8.hover}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${F8.selected}`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,(t.vars||t).palette.action.selectedOpacity),"&:hover":{backgroundColor:t.alpha((t.vars||t).palette.primary.main,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.hoverOpacity}`)}}}))),U8="tr",$o=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiTableRow"}),{className:i,component:s=U8,hover:a=!1,selected:o=!1,...l}=r,c=w.useContext(XE),u={...r,component:s,hover:a,selected:o,head:c&&c.variant==="head",footer:c&&c.variant==="footer"},f=E_e(u);return g.jsx(C_e,{as:s,ref:n,className:qe(f.root,i),role:s===U8?null:"row",ownerState:u,...l})});function A_e(t){return(1+Math.sin(Math.PI*t-Math.PI/2))/2}function M_e(t,e,n,r={},i=()=>{}){const{ease:s=A_e,duration:a=300}=r;let o=null;const l=e[t];let c=!1;const u=()=>{c=!0},f=p=>{if(c){i(new Error("Animation cancelled"));return}o===null&&(o=p);const m=Math.min(1,(p-o)/a);if(e[t]=s(m)*(n-l)+l,m>=1){requestAnimationFrame(()=>{i(null)});return}requestAnimationFrame(f)};return l===n?(i(new Error("Element already at target position")),u):(requestAnimationFrame(f),u)}const R_e={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function P_e(t){const{onChange:e,...n}=t,r=w.useRef(),i=w.useRef(null),s=()=>{r.current=i.current.offsetHeight-i.current.clientHeight};return ia(()=>{const a=m_(()=>{const l=r.current;s(),l!==r.current&&e(r.current)}),o=Ro(i.current);return o.addEventListener("resize",a),()=>{a.clear(),o.removeEventListener("resize",a)}},[e]),w.useEffect(()=>{s(),e(r.current)},[e]),g.jsx("div",{style:R_e,...n,ref:i})}function N_e(t){return Rt("MuiTabScrollButton",t)}const O_e=Pt("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),D_e=t=>{const{classes:e,orientation:n,disabled:r}=t;return Nt({root:["root",n,r&&"disabled"]},N_e,e)},L_e=Ue(ul,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.orientation&&e[n.orientation]]}})({width:40,flexShrink:0,opacity:.8,[`&.${O_e.disabled}`]:{opacity:0},variants:[{props:{orientation:"vertical"},style:{width:"100%",height:40,"& svg":{transform:"var(--TabScrollButton-svgRotate)"}}}]}),I_e=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiTabScrollButton"}),{className:i,slots:s={},slotProps:a={},direction:o,orientation:l,disabled:c,...u}=r,f=Wf(),p={isRtl:f,...r},m=D_e(p),x=s.StartScrollButtonIcon??S_e,b=s.EndScrollButtonIcon??w_e,v=Ia({elementType:x,externalSlotProps:a.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:p}),_=Ia({elementType:b,externalSlotProps:a.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:p});return g.jsx(L_e,{component:"div",className:qe(m.root,i),ref:n,role:null,ownerState:p,tabIndex:null,...u,style:{...u.style,...l==="vertical"&&{"--TabScrollButton-svgRotate":`rotate(${f?-90:90}deg)`}},children:o==="left"?g.jsx(x,{...v}):g.jsx(b,{..._})})});function k_e(t){return Rt("MuiTabs",t)}const f3=Pt("MuiTabs",["root","vertical","list","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),j8=(t,e)=>t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:t.firstChild,z8=(t,e)=>t===e?t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:t.lastChild,FS=(t,e,n)=>{let r=!1,i=n(t,e);for(;i;){if(i===t.firstChild){if(r)return;r=!0}const s=i.disabled||i.getAttribute("aria-disabled")==="true";if(!i.hasAttribute("tabindex")||s)i=n(t,i);else{i.focus();return}}},B_e=t=>{const{vertical:e,fixed:n,hideScrollbar:r,scrollableX:i,scrollableY:s,centered:a,scrollButtonsHideMobile:o,classes:l}=t;return Nt({root:["root",e&&"vertical"],scroller:["scroller",n&&"fixed",r&&"hideScrollbar",i&&"scrollableX",s&&"scrollableY"],list:["list","flexContainer",e&&"flexContainerVertical",e&&"vertical",a&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",o&&"scrollButtonsHideMobile"],scrollableX:[i&&"scrollableX"],hideScrollbar:[r&&"hideScrollbar"]},k_e,l)},F_e=Ue("div",{name:"MuiTabs",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${f3.scrollButtons}`]:e.scrollButtons},{[`& .${f3.scrollButtons}`]:n.scrollButtonsHideMobile&&e.scrollButtonsHideMobile},e.root,n.vertical&&e.vertical]}})(wt(({theme:t})=>({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex",variants:[{props:({ownerState:e})=>e.vertical,style:{flexDirection:"column"}},{props:({ownerState:e})=>e.scrollButtonsHideMobile,style:{[`& .${f3.scrollButtons}`]:{[t.breakpoints.down("sm")]:{display:"none"}}}}]}))),U_e=Ue("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.scroller,n.fixed&&e.fixed,n.hideScrollbar&&e.hideScrollbar,n.scrollableX&&e.scrollableX,n.scrollableY&&e.scrollableY]}})({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap",variants:[{props:({ownerState:t})=>t.fixed,style:{overflowX:"hidden",width:"100%"}},{props:({ownerState:t})=>t.hideScrollbar,style:{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}},{props:({ownerState:t})=>t.scrollableX,style:{overflowX:"auto",overflowY:"hidden"}},{props:({ownerState:t})=>t.scrollableY,style:{overflowY:"auto",overflowX:"hidden"}}]}),j_e=Ue("div",{name:"MuiTabs",slot:"List",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.list,e.flexContainer,n.vertical&&e.flexContainerVertical,n.centered&&e.centered]}})({display:"flex",variants:[{props:({ownerState:t})=>t.vertical,style:{flexDirection:"column"}},{props:({ownerState:t})=>t.centered,style:{justifyContent:"center"}}]}),z_e=Ue("span",{name:"MuiTabs",slot:"Indicator"})(wt(({theme:t})=>({position:"absolute",height:2,bottom:0,width:"100%",transition:t.transitions.create(),variants:[{props:{indicatorColor:"primary"},style:{backgroundColor:(t.vars||t).palette.primary.main}},{props:{indicatorColor:"secondary"},style:{backgroundColor:(t.vars||t).palette.secondary.main}},{props:({ownerState:e})=>e.vertical,style:{height:"100%",width:2,right:0}}]}))),$_e=Ue(P_e)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),$8={},AK=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiTabs"}),i=ec(),s=Wf(),{"aria-label":a,"aria-labelledby":o,action:l,centered:c=!1,children:u,className:f,component:p="div",allowScrollButtonsMobile:m=!1,indicatorColor:x="primary",onChange:b,orientation:v="horizontal",ScrollButtonComponent:_,scrollButtons:E="auto",selectionFollowsFocus:T,slots:A={},slotProps:C={},TabIndicatorProps:M={},TabScrollButtonProps:P={},textColor:D="primary",value:N,variant:L="standard",visibleScrollbar:k=!1,...I}=r,F=L==="scrollable",z=v==="vertical",H=z?"scrollTop":"scrollLeft",B=z?"top":"left",j=z?"bottom":"right",G=z?"clientHeight":"clientWidth",W=z?"height":"width",re={...r,component:p,allowScrollButtonsMobile:m,indicatorColor:x,orientation:v,vertical:z,scrollButtons:E,textColor:D,variant:L,visibleScrollbar:k,fixed:!F,hideScrollbar:F&&!k,scrollableX:F&&!z,scrollableY:F&&z,centered:c&&!F,scrollButtonsHideMobile:!m},$=B_e(re),ee=Ia({elementType:A.StartScrollButtonIcon,externalSlotProps:C.startScrollButtonIcon,ownerState:re}),oe=Ia({elementType:A.EndScrollButtonIcon,externalSlotProps:C.endScrollButtonIcon,ownerState:re}),[me,te]=w.useState(!1),[K,ne]=w.useState($8),[Ee,se]=w.useState(!1),[ve,Pe]=w.useState(!1),[ge,be]=w.useState(!1),[_e,Q]=w.useState({overflow:"hidden",scrollbarWidth:0}),et=new Map,ze=w.useRef(null),Je=w.useRef(null),fe={slots:A,slotProps:{indicator:M,scrollButton:P,...C}},rt=()=>{const vt=ze.current;let It;if(vt){const bn=vt.getBoundingClientRect();It={clientWidth:vt.clientWidth,scrollLeft:vt.scrollLeft,scrollTop:vt.scrollTop,scrollWidth:vt.scrollWidth,top:bn.top,bottom:bn.bottom,left:bn.left,right:bn.right}}let dn;if(vt&&N!==!1){const bn=Je.current.children;if(bn.length>0){const sr=bn[et.get(N)];dn=sr?sr.getBoundingClientRect():null}}return{tabsMeta:It,tabMeta:dn}},$e=ta(()=>{const{tabsMeta:vt,tabMeta:It}=rt();let dn=0,bn;z?(bn="top",It&&vt&&(dn=It.top-vt.top+vt.scrollTop)):(bn=s?"right":"left",It&&vt&&(dn=(s?-1:1)*(It[bn]-vt[bn]+vt.scrollLeft)));const sr={[bn]:dn,[W]:It?It[W]:0};if(typeof K[bn]!="number"||typeof K[W]!="number")ne(sr);else{const Rr=Math.abs(K[bn]-sr[bn]),ls=Math.abs(K[W]-sr[W]);(Rr>=1||ls>=1)&&ne(sr)}}),Se=(vt,{animation:It=!0}={})=>{It?M_e(H,ze.current,vt,{duration:i.transitions.duration.standard}):ze.current[H]=vt},q=vt=>{let It=ze.current[H];z?It+=vt:It+=vt*(s?-1:1),Se(It)},V=()=>{const vt=ze.current[G];let It=0;const dn=Array.from(Je.current.children);for(let bn=0;bn<dn.length;bn+=1){const sr=dn[bn];if(It+sr[G]>vt){bn===0&&(It=vt);break}It+=sr[G]}return It},ie=()=>{q(-1*V())},le=()=>{q(V())},[xe,{onChange:pe,...it}]=Ft("scrollbar",{className:qe($.scrollableX,$.hideScrollbar),elementType:$_e,shouldForwardComponentProp:!0,externalForwardedProps:fe,ownerState:re}),We=w.useCallback(vt=>{pe?.(vt),Q({overflow:null,scrollbarWidth:vt})},[pe]),[dt,ft]=Ft("scrollButtons",{className:qe($.scrollButtons,P.className),elementType:I_e,externalForwardedProps:fe,ownerState:re,additionalProps:{orientation:v,slots:{StartScrollButtonIcon:A.startScrollButtonIcon||A.StartScrollButtonIcon,EndScrollButtonIcon:A.endScrollButtonIcon||A.EndScrollButtonIcon},slotProps:{startScrollButtonIcon:ee,endScrollButtonIcon:oe}}}),Be=()=>{const vt={};vt.scrollbarSizeListener=F?g.jsx(xe,{...it,onChange:We}):null;const dn=F&&(E==="auto"&&(Ee||ve)||E===!0);return vt.scrollButtonStart=dn?g.jsx(dt,{direction:s?"right":"left",onClick:ie,disabled:!Ee,...ft}):null,vt.scrollButtonEnd=dn?g.jsx(dt,{direction:s?"left":"right",onClick:le,disabled:!ve,...ft}):null,vt},ot=ta(vt=>{const{tabsMeta:It,tabMeta:dn}=rt();if(!(!dn||!It)){if(dn[B]<It[B]){const bn=It[H]+(dn[B]-It[B]);Se(bn,{animation:vt})}else if(dn[j]>It[j]){const bn=It[H]+(dn[j]-It[j]);Se(bn,{animation:vt})}}}),st=ta(()=>{F&&E!==!1&&be(!ge)});w.useEffect(()=>{const vt=m_(()=>{ze.current&&$e()});let It;const dn=Rr=>{Rr.forEach(ls=>{ls.removedNodes.forEach(aa=>{It?.unobserve(aa)}),ls.addedNodes.forEach(aa=>{It?.observe(aa)})}),vt(),st()},bn=Ro(ze.current);bn.addEventListener("resize",vt);let sr;return typeof ResizeObserver<"u"&&(It=new ResizeObserver(vt),Array.from(Je.current.children).forEach(Rr=>{It.observe(Rr)})),typeof MutationObserver<"u"&&(sr=new MutationObserver(dn),sr.observe(Je.current,{childList:!0})),()=>{vt.clear(),bn.removeEventListener("resize",vt),sr?.disconnect(),It?.disconnect()}},[$e,st]),w.useEffect(()=>{const vt=Array.from(Je.current.children),It=vt.length;if(typeof IntersectionObserver<"u"&&It>0&&F&&E!==!1){const dn=vt[0],bn=vt[It-1],sr={root:ze.current,threshold:.99},Rr=Ts=>{se(!Ts[0].isIntersecting)},ls=new IntersectionObserver(Rr,sr);ls.observe(dn);const aa=Ts=>{Pe(!Ts[0].isIntersecting)},Pd=new IntersectionObserver(aa,sr);return Pd.observe(bn),()=>{ls.disconnect(),Pd.disconnect()}}},[F,E,ge,u?.length]),w.useEffect(()=>{te(!0)},[]),w.useEffect(()=>{$e()}),w.useEffect(()=>{ot($8!==K)},[ot,K]),w.useImperativeHandle(l,()=>({updateIndicator:$e,updateScrollButtons:st}),[$e,st]);const[ht,gt]=Ft("indicator",{className:qe($.indicator,M.className),elementType:z_e,externalForwardedProps:fe,ownerState:re,additionalProps:{style:K}}),Ut=g.jsx(ht,{...gt});let ue=0;const we=w.Children.map(u,vt=>{if(!w.isValidElement(vt))return null;const It=vt.props.value===void 0?ue:vt.props.value;et.set(It,ue);const dn=It===N;return ue+=1,w.cloneElement(vt,{fullWidth:L==="fullWidth",indicator:dn&&!me&&Ut,selected:dn,selectionFollowsFocus:T,onChange:b,textColor:D,value:It,...ue===1&&N===!1&&!vt.props.tabIndex?{tabIndex:0}:{}})}),Ke=vt=>{if(vt.altKey||vt.shiftKey||vt.ctrlKey||vt.metaKey)return;const It=Je.current,dn=Ai(It).activeElement;if(dn.getAttribute("role")!=="tab")return;let sr=v==="horizontal"?"ArrowLeft":"ArrowUp",Rr=v==="horizontal"?"ArrowRight":"ArrowDown";switch(v==="horizontal"&&s&&(sr="ArrowRight",Rr="ArrowLeft"),vt.key){case sr:vt.preventDefault(),FS(It,dn,z8);break;case Rr:vt.preventDefault(),FS(It,dn,j8);break;case"Home":vt.preventDefault(),FS(It,null,j8);break;case"End":vt.preventDefault(),FS(It,null,z8);break}},Ge=Be(),[Xe,Ve]=Ft("root",{ref:n,className:qe($.root,f),elementType:F_e,externalForwardedProps:{...fe,...I,component:p},ownerState:re}),[yt,Mt]=Ft("scroller",{ref:ze,className:$.scroller,elementType:U_e,externalForwardedProps:fe,ownerState:re,additionalProps:{style:{overflow:_e.overflow,[z?`margin${s?"Left":"Right"}`:"marginBottom"]:k?void 0:-_e.scrollbarWidth}}}),[Ct,Kt]=Ft("list",{ref:Je,className:qe($.list,$.flexContainer),elementType:j_e,externalForwardedProps:fe,ownerState:re,getSlotProps:vt=>({...vt,onKeyDown:It=>{Ke(It),vt.onKeyDown?.(It)}})});return g.jsxs(Xe,{...Ve,children:[Ge.scrollButtonStart,Ge.scrollbarSizeListener,g.jsxs(yt,{...Mt,children:[g.jsx(Ct,{"aria-label":a,"aria-labelledby":o,"aria-orientation":v==="vertical"?"vertical":null,role:"tablist",...Kt,children:we}),me&&Ut]}),Ge.scrollButtonEnd]})});function G_e(t){return Rt("MuiTextField",t)}Pt("MuiTextField",["root"]);const V_e={standard:pk,filled:hk,outlined:qE},H_e=t=>{const{classes:e}=t;return Nt({root:["root"]},G_e,e)},W_e=Ue(Tf,{name:"MuiTextField",slot:"Root"})({}),wi=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiTextField"}),{autoComplete:i,autoFocus:s=!1,children:a,className:o,color:l="primary",defaultValue:c,disabled:u=!1,error:f=!1,FormHelperTextProps:p,fullWidth:m=!1,helperText:x,id:b,InputLabelProps:v,inputProps:_,InputProps:E,inputRef:T,label:A,maxRows:C,minRows:M,multiline:P=!1,name:D,onBlur:N,onChange:L,onFocus:k,placeholder:I,required:F=!1,rows:z,select:H=!1,SelectProps:B,slots:j={},slotProps:G={},type:W,value:re,variant:$="outlined",...ee}=r,oe={...r,autoFocus:s,color:l,disabled:u,error:f,fullWidth:m,multiline:P,required:F,select:H,variant:$},me=H_e(oe),te=$p(b),K=x&&te?`${te}-helper-text`:void 0,ne=A&&te?`${te}-label`:void 0,Ee=V_e[$],se={slots:j,slotProps:{input:E,inputLabel:v,htmlInput:_,formHelperText:p,select:B,...G}},ve={},Pe=se.slotProps.inputLabel;$==="outlined"&&(Pe&&typeof Pe.shrink<"u"&&(ve.notched=Pe.shrink),ve.label=A),H&&((!B||!B.native)&&(ve.id=void 0),ve["aria-describedby"]=void 0);const[ge,be]=Ft("root",{elementType:W_e,shouldForwardComponentProp:!0,externalForwardedProps:{...se,...ee},ownerState:oe,className:qe(me.root,o),ref:n,additionalProps:{disabled:u,error:f,fullWidth:m,required:F,color:l,variant:$}}),[_e,Q]=Ft("input",{elementType:Ee,externalForwardedProps:se,additionalProps:ve,ownerState:oe}),[et,ze]=Ft("inputLabel",{elementType:dp,externalForwardedProps:se,ownerState:oe}),[Je,fe]=Ft("htmlInput",{elementType:"input",externalForwardedProps:se,ownerState:oe}),[rt,$e]=Ft("formHelperText",{elementType:Bye,externalForwardedProps:se,ownerState:oe}),[Se,q]=Ft("select",{elementType:Ku,externalForwardedProps:se,ownerState:oe}),V=g.jsx(_e,{"aria-describedby":K,autoComplete:i,autoFocus:s,defaultValue:c,fullWidth:m,multiline:P,name:D,rows:z,maxRows:C,minRows:M,type:W,value:re,id:te,inputRef:T,onBlur:N,onChange:L,onFocus:k,placeholder:I,inputProps:fe,slots:{input:j.htmlInput?Je:void 0},...Q});return g.jsxs(ge,{...be,children:[A!=null&&A!==""&&g.jsx(et,{htmlFor:te,id:ne,...ze,children:A}),H?g.jsx(Se,{"aria-describedby":K,id:te,labelId:ne,value:re,input:V,...q,children:a}):V,x&&g.jsx(rt,{id:K,...$e,children:x})]})});function q_e(t){return Rt("MuiToggleButton",t)}const ip=Pt("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]),MK=w.createContext({}),RK=w.createContext(void 0);function X_e(t,e){return e===void 0||t===void 0?!1:Array.isArray(e)?e.includes(t):t===e}const Y_e=t=>{const{classes:e,fullWidth:n,selected:r,disabled:i,size:s,color:a}=t,o={root:["root",r&&"selected",i&&"disabled",n&&"fullWidth",`size${Re(s)}`,a]};return Nt(o,q_e,e)},K_e=Ue(ul,{name:"MuiToggleButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`size${Re(n.size)}`]]}})(wt(({theme:t})=>({...t.typography.button,borderRadius:(t.vars||t).shape.borderRadius,padding:11,border:`1px solid ${(t.vars||t).palette.divider}`,color:(t.vars||t).palette.action.active,[`&.${ip.disabled}`]:{color:(t.vars||t).palette.action.disabled,border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:t.alpha((t.vars||t).palette.text.primary,(t.vars||t).palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[{props:{color:"standard"},style:{[`&.${ip.selected}`]:{color:(t.vars||t).palette.text.primary,backgroundColor:t.alpha((t.vars||t).palette.text.primary,(t.vars||t).palette.action.selectedOpacity),"&:hover":{backgroundColor:t.alpha((t.vars||t).palette.text.primary,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:t.alpha((t.vars||t).palette.text.primary,(t.vars||t).palette.action.selectedOpacity)}}}}},...Object.entries(t.palette).filter(Hn()).map(([e])=>({props:{color:e},style:{[`&.${ip.selected}`]:{color:(t.vars||t).palette[e].main,backgroundColor:t.alpha((t.vars||t).palette[e].main,(t.vars||t).palette.action.selectedOpacity),"&:hover":{backgroundColor:t.alpha((t.vars||t).palette[e].main,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:t.alpha((t.vars||t).palette[e].main,(t.vars||t).palette.action.selectedOpacity)}}}}})),{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{padding:7,fontSize:t.typography.pxToRem(13)}},{props:{size:"large"},style:{padding:15,fontSize:t.typography.pxToRem(15)}}]}))),Vv=w.forwardRef(function(e,n){const{value:r,...i}=w.useContext(MK),s=w.useContext(RK),a=Kg({...i,selected:X_e(e.value,r)},e),o=Lt({props:a,name:"MuiToggleButton"}),{children:l,className:c,color:u="standard",disabled:f=!1,disableFocusRipple:p=!1,fullWidth:m=!1,onChange:x,onClick:b,selected:v,size:_="medium",value:E,...T}=o,A={...o,color:u,disabled:f,disableFocusRipple:p,fullWidth:m,size:_},C=Y_e(A),M=D=>{b&&(b(D,E),D.defaultPrevented)||x&&x(D,E)},P=s||"";return g.jsx(K_e,{className:qe(i.className,C.root,c,P),disabled:f,focusRipple:!p,ref:n,onClick:M,onChange:x,value:E,ownerState:A,"aria-pressed":v,...T,children:l})});function Z_e(t){return Rt("MuiToggleButtonGroup",t)}const Fr=Pt("MuiToggleButtonGroup",["root","selected","horizontal","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth","firstButton","lastButton","middleButton"]),Q_e=t=>{const{classes:e,orientation:n,fullWidth:r,disabled:i}=t,s={root:["root",n,r&&"fullWidth"],grouped:["grouped",`grouped${Re(n)}`,i&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return Nt(s,Z_e,e)},J_e=Ue("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${Fr.grouped}`]:e.grouped},{[`& .${Fr.grouped}`]:e[`grouped${Re(n.orientation)}`]},{[`& .${Fr.firstButton}`]:e.firstButton},{[`& .${Fr.lastButton}`]:e.lastButton},{[`& .${Fr.middleButton}`]:e.middleButton},e.root,n.orientation==="vertical"&&e.vertical,n.fullWidth&&e.fullWidth]}})(wt(({theme:t})=>({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius,variants:[{props:{orientation:"vertical"},style:{flexDirection:"column",[`& .${Fr.grouped}`]:{[`&.${Fr.selected} + .${Fr.grouped}.${Fr.selected}`]:{borderTop:0,marginTop:0}},[`& .${Fr.firstButton},& .${Fr.middleButton}`]:{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`& .${Fr.lastButton},& .${Fr.middleButton}`]:{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},[`& .${Fr.lastButton}.${ip.disabled},& .${Fr.middleButton}.${ip.disabled}`]:{borderTop:"1px solid transparent"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{orientation:"horizontal"},style:{[`& .${Fr.grouped}`]:{[`&.${Fr.selected} + .${Fr.grouped}.${Fr.selected}`]:{borderLeft:0,marginLeft:0}},[`& .${Fr.firstButton},& .${Fr.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${Fr.lastButton},& .${Fr.middleButton}`]:{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},[`& .${Fr.lastButton}.${ip.disabled},& .${Fr.middleButton}.${ip.disabled}`]:{borderLeft:"1px solid transparent"}}}]}))),PK=w.forwardRef(function(e,n){const r=Lt({props:e,name:"MuiToggleButtonGroup"}),{children:i,className:s,color:a="standard",disabled:o=!1,exclusive:l=!1,fullWidth:c=!1,onChange:u,orientation:f="horizontal",size:p="medium",value:m,...x}=r,b={...r,disabled:o,fullWidth:c,orientation:f,size:p},v=Q_e(b),_=w.useCallback((P,D)=>{if(!u)return;const N=m&&m.indexOf(D);let L;m&&N>=0?(L=m.slice(),L.splice(N,1)):L=m?m.concat(D):[D],u(P,L)},[u,m]),E=w.useCallback((P,D)=>{u&&u(P,m===D?null:D)},[u,m]),T=w.useMemo(()=>({className:v.grouped,onChange:l?E:_,value:m,size:p,fullWidth:c,color:a,disabled:o}),[v.grouped,l,E,_,m,p,c,a,o]),A=dK(i),C=A.length,M=P=>{const D=P===0,N=P===C-1;return D&&N?"":D?v.firstButton:N?v.lastButton:v.middleButton};return g.jsx(J_e,{role:"group",className:qe(v.root,s),ref:n,ownerState:b,...x,children:g.jsx(MK.Provider,{value:T,children:A.map((P,D)=>g.jsx(RK.Provider,{value:M(D),children:P},D))})})}),h3=MY({themeId:Hl});var p3,G8;function e1e(){if(G8)return p3;G8=1;var t=typeof Element<"u",e=typeof Map=="function",n=typeof Set=="function",r=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function i(s,a){if(s===a)return!0;if(s&&a&&typeof s=="object"&&typeof a=="object"){if(s.constructor!==a.constructor)return!1;var o,l,c;if(Array.isArray(s)){if(o=s.length,o!=a.length)return!1;for(l=o;l--!==0;)if(!i(s[l],a[l]))return!1;return!0}var u;if(e&&s instanceof Map&&a instanceof Map){if(s.size!==a.size)return!1;for(u=s.entries();!(l=u.next()).done;)if(!a.has(l.value[0]))return!1;for(u=s.entries();!(l=u.next()).done;)if(!i(l.value[1],a.get(l.value[0])))return!1;return!0}if(n&&s instanceof Set&&a instanceof Set){if(s.size!==a.size)return!1;for(u=s.entries();!(l=u.next()).done;)if(!a.has(l.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(s)&&ArrayBuffer.isView(a)){if(o=s.length,o!=a.length)return!1;for(l=o;l--!==0;)if(s[l]!==a[l])return!1;return!0}if(s.constructor===RegExp)return s.source===a.source&&s.flags===a.flags;if(s.valueOf!==Object.prototype.valueOf&&typeof s.valueOf=="function"&&typeof a.valueOf=="function")return s.valueOf()===a.valueOf();if(s.toString!==Object.prototype.toString&&typeof s.toString=="function"&&typeof a.toString=="function")return s.toString()===a.toString();if(c=Object.keys(s),o=c.length,o!==Object.keys(a).length)return!1;for(l=o;l--!==0;)if(!Object.prototype.hasOwnProperty.call(a,c[l]))return!1;if(t&&s instanceof Element)return!1;for(l=o;l--!==0;)if(!((c[l]==="_owner"||c[l]==="__v"||c[l]==="__o")&&s.$$typeof)&&!i(s[c[l]],a[c[l]]))return!1;return!0}return s!==s&&a!==a}return p3=function(a,o){try{return i(a,o)}catch(l){if((l.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw l}},p3}var t1e=e1e();const n1e=Ea(t1e);var m3,V8;function r1e(){if(V8)return m3;V8=1;var t=function(e,n,r,i,s,a,o,l){if(!e){var c;if(n===void 0)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,i,s,a,o,l],f=0;c=new Error(n.replace(/%s/g,function(){return u[f++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}};return m3=t,m3}var i1e=r1e();const H8=Ea(i1e);var g3,W8;function s1e(){return W8||(W8=1,g3=function(e,n,r,i){var s=r?r.call(i,e,n):void 0;if(s!==void 0)return!!s;if(e===n)return!0;if(typeof e!="object"||!e||typeof n!="object"||!n)return!1;var a=Object.keys(e),o=Object.keys(n);if(a.length!==o.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(n),c=0;c<a.length;c++){var u=a[c];if(!l(u))return!1;var f=e[u],p=n[u];if(s=r?r.call(i,f,p,u):void 0,s===!1||s===void 0&&f!==p)return!1}return!0}),g3}var a1e=s1e();const o1e=Ea(a1e);var NK=(t=>(t.BASE="base",t.BODY="body",t.HEAD="head",t.HTML="html",t.LINK="link",t.META="meta",t.NOSCRIPT="noscript",t.SCRIPT="script",t.STYLE="style",t.TITLE="title",t.FRAGMENT="Symbol(react.fragment)",t))(NK||{}),x3={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},q8=Object.values(NK),Sk={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},l1e=Object.entries(Sk).reduce((t,[e,n])=>(t[n]=e,t),{}),jl="data-rh",Bg={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},Fg=(t,e)=>{for(let n=t.length-1;n>=0;n-=1){const r=t[n];if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}return null},c1e=t=>{let e=Fg(t,"title");const n=Fg(t,Bg.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),n&&e)return n.replace(/%s/g,()=>e);const r=Fg(t,Bg.DEFAULT_TITLE);return e||r||void 0},u1e=t=>Fg(t,Bg.ON_CHANGE_CLIENT_STATE)||(()=>{}),y3=(t,e)=>e.filter(n=>typeof n[t]<"u").map(n=>n[t]).reduce((n,r)=>({...n,...r}),{}),d1e=(t,e)=>e.filter(n=>typeof n.base<"u").map(n=>n.base).reverse().reduce((n,r)=>{if(!n.length){const i=Object.keys(r);for(let s=0;s<i.length;s+=1){const o=i[s].toLowerCase();if(t.indexOf(o)!==-1&&r[o])return n.concat(r)}}return n},[]),f1e=t=>console&&typeof console.warn=="function"&&console.warn(t),ky=(t,e,n)=>{const r={};return n.filter(i=>Array.isArray(i[t])?!0:(typeof i[t]<"u"&&f1e(`Helmet: ${t} should be of type "Array". Instead found type "${typeof i[t]}"`),!1)).map(i=>i[t]).reverse().reduce((i,s)=>{const a={};s.filter(l=>{let c;const u=Object.keys(l);for(let p=0;p<u.length;p+=1){const m=u[p],x=m.toLowerCase();e.indexOf(x)!==-1&&!(c==="rel"&&l[c].toLowerCase()==="canonical")&&!(x==="rel"&&l[x].toLowerCase()==="stylesheet")&&(c=x),e.indexOf(m)!==-1&&(m==="innerHTML"||m==="cssText"||m==="itemprop")&&(c=m)}if(!c||!l[c])return!1;const f=l[c].toLowerCase();return r[c]||(r[c]={}),a[c]||(a[c]={}),r[c][f]?!1:(a[c][f]=!0,!0)}).reverse().forEach(l=>i.push(l));const o=Object.keys(a);for(let l=0;l<o.length;l+=1){const c=o[l],u={...r[c],...a[c]};r[c]=u}return i},[]).reverse()},h1e=(t,e)=>{if(Array.isArray(t)&&t.length){for(let n=0;n<t.length;n+=1)if(t[n][e])return!0}return!1},p1e=t=>({baseTag:d1e(["href"],t),bodyAttributes:y3("bodyAttributes",t),defer:Fg(t,Bg.DEFER),encode:Fg(t,Bg.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:y3("htmlAttributes",t),linkTags:ky("link",["rel","href"],t),metaTags:ky("meta",["name","charset","http-equiv","property","itemprop"],t),noscriptTags:ky("noscript",["innerHTML"],t),onChangeClientState:u1e(t),scriptTags:ky("script",["src","innerHTML"],t),styleTags:ky("style",["cssText"],t),title:c1e(t),titleAttributes:y3("titleAttributes",t),prioritizeSeoTags:h1e(t,Bg.PRIORITIZE_SEO_TAGS)}),OK=t=>Array.isArray(t)?t.join(""):t,m1e=(t,e)=>{const n=Object.keys(t);for(let r=0;r<n.length;r+=1)if(e[n[r]]&&e[n[r]].includes(t[n[r]]))return!0;return!1},v3=(t,e)=>Array.isArray(t)?t.reduce((n,r)=>(m1e(r,e)?n.priority.push(r):n.default.push(r),n),{priority:[],default:[]}):{default:t,priority:[]},X8=(t,e)=>({...t,[e]:void 0}),g1e=["noscript","script","style"],mD=(t,e=!0)=>e===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),DK=t=>Object.keys(t).reduce((e,n)=>{const r=typeof t[n]<"u"?`${n}="${t[n]}"`:`${n}`;return e?`${e} ${r}`:r},""),x1e=(t,e,n,r)=>{const i=DK(n),s=OK(e);return i?`<${t} ${jl}="true" ${i}>${mD(s,r)}</${t}>`:`<${t} ${jl}="true">${mD(s,r)}</${t}>`},y1e=(t,e,n=!0)=>e.reduce((r,i)=>{const s=i,a=Object.keys(s).filter(c=>!(c==="innerHTML"||c==="cssText")).reduce((c,u)=>{const f=typeof s[u]>"u"?u:`${u}="${mD(s[u],n)}"`;return c?`${c} ${f}`:f},""),o=s.innerHTML||s.cssText||"",l=g1e.indexOf(t)===-1;return`${r}<${t} ${jl}="true" ${a}${l?"/>":`>${o}</${t}>`}`},""),LK=(t,e={})=>Object.keys(t).reduce((n,r)=>{const i=Sk[r];return n[i||r]=t[r],n},e),v1e=(t,e,n)=>{const r={key:e,[jl]:!0},i=LK(n,r);return[ri.createElement("title",i,e)]},bT=(t,e)=>e.map((n,r)=>{const i={key:r,[jl]:!0};return Object.keys(n).forEach(s=>{const o=Sk[s]||s;if(o==="innerHTML"||o==="cssText"){const l=n.innerHTML||n.cssText;i.dangerouslySetInnerHTML={__html:l}}else i[o]=n[s]}),ri.createElement(t,i)}),Yo=(t,e,n=!0)=>{switch(t){case"title":return{toComponent:()=>v1e(t,e.title,e.titleAttributes),toString:()=>x1e(t,e.title,e.titleAttributes,n)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>LK(e),toString:()=>DK(e)};default:return{toComponent:()=>bT(t,e),toString:()=>y1e(t,e,n)}}},b1e=({metaTags:t,linkTags:e,scriptTags:n,encode:r})=>{const i=v3(t,x3.meta),s=v3(e,x3.link),a=v3(n,x3.script);return{priorityMethods:{toComponent:()=>[...bT("meta",i.priority),...bT("link",s.priority),...bT("script",a.priority)],toString:()=>`${Yo("meta",i.priority,r)} ${Yo("link",s.priority,r)} ${Yo("script",a.priority,r)}`},metaTags:i.default,linkTags:s.default,scriptTags:a.default}},_1e=t=>{const{baseTag:e,bodyAttributes:n,encode:r=!0,htmlAttributes:i,noscriptTags:s,styleTags:a,title:o="",titleAttributes:l,prioritizeSeoTags:c}=t;let{linkTags:u,metaTags:f,scriptTags:p}=t,m={toComponent:()=>{},toString:()=>""};return c&&({priorityMethods:m,linkTags:u,metaTags:f,scriptTags:p}=b1e(t)),{priority:m,base:Yo("base",e,r),bodyAttributes:Yo("bodyAttributes",n,r),htmlAttributes:Yo("htmlAttributes",i,r),link:Yo("link",u,r),meta:Yo("meta",f,r),noscript:Yo("noscript",s,r),script:Yo("script",p,r),style:Yo("style",a,r),title:Yo("title",{title:o,titleAttributes:l},r)}},gD=_1e,US=[],IK=!!(typeof window<"u"&&window.document&&window.document.createElement),xD=class{instances=[];canUseDOM=IK;context;value={setHelmet:t=>{this.context.helmet=t},helmetInstances:{get:()=>this.canUseDOM?US:this.instances,add:t=>{(this.canUseDOM?US:this.instances).push(t)},remove:t=>{const e=(this.canUseDOM?US:this.instances).indexOf(t);(this.canUseDOM?US:this.instances).splice(e,1)}}};constructor(t,e){this.context=t,this.canUseDOM=e||!1,e||(t.helmet=gD({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},S1e={},kK=ri.createContext(S1e),BK=class FK extends w.Component{static canUseDOM=IK;helmetData;constructor(e){super(e),this.helmetData=new xD(this.props.context||{},FK.canUseDOM)}render(){return ri.createElement(kK.Provider,{value:this.helmetData.value},this.props.children)}},$m=(t,e)=>{const n=document.head||document.querySelector("head"),r=n.querySelectorAll(`${t}[${jl}]`),i=[].slice.call(r),s=[];let a;return e&&e.length&&e.forEach(o=>{const l=document.createElement(t);for(const c in o)if(Object.prototype.hasOwnProperty.call(o,c))if(c==="innerHTML")l.innerHTML=o.innerHTML;else if(c==="cssText")l.styleSheet?l.styleSheet.cssText=o.cssText:l.appendChild(document.createTextNode(o.cssText));else{const u=c,f=typeof o[u]>"u"?"":o[u];l.setAttribute(c,f)}l.setAttribute(jl,"true"),i.some((c,u)=>(a=u,l.isEqualNode(c)))?i.splice(a,1):s.push(l)}),i.forEach(o=>o.parentNode?.removeChild(o)),s.forEach(o=>n.appendChild(o)),{oldTags:i,newTags:s}},yD=(t,e)=>{const n=document.getElementsByTagName(t)[0];if(!n)return;const r=n.getAttribute(jl),i=r?r.split(","):[],s=[...i],a=Object.keys(e);for(const o of a){const l=e[o]||"";n.getAttribute(o)!==l&&n.setAttribute(o,l),i.indexOf(o)===-1&&i.push(o);const c=s.indexOf(o);c!==-1&&s.splice(c,1)}for(let o=s.length-1;o>=0;o-=1)n.removeAttribute(s[o]);i.length===s.length?n.removeAttribute(jl):n.getAttribute(jl)!==a.join(",")&&n.setAttribute(jl,a.join(","))},w1e=(t,e)=>{typeof t<"u"&&document.title!==t&&(document.title=OK(t)),yD("title",e)},Y8=(t,e)=>{const{baseTag:n,bodyAttributes:r,htmlAttributes:i,linkTags:s,metaTags:a,noscriptTags:o,onChangeClientState:l,scriptTags:c,styleTags:u,title:f,titleAttributes:p}=t;yD("body",r),yD("html",i),w1e(f,p);const m={baseTag:$m("base",n),linkTags:$m("link",s),metaTags:$m("meta",a),noscriptTags:$m("noscript",o),scriptTags:$m("script",c),styleTags:$m("style",u)},x={},b={};Object.keys(m).forEach(v=>{const{newTags:_,oldTags:E}=m[v];_.length&&(x[v]=_),E.length&&(b[v]=m[v].oldTags)}),e&&e(),l(t,x,b)},By=null,T1e=t=>{By&&cancelAnimationFrame(By),t.defer?By=requestAnimationFrame(()=>{Y8(t,()=>{By=null})}):(Y8(t),By=null)},E1e=T1e,K8=class extends w.Component{rendered=!1;shouldComponentUpdate(t){return!o1e(t,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:t}=this.props.context;t.remove(this),this.emitChange()}emitChange(){const{helmetInstances:t,setHelmet:e}=this.props.context;let n=null;const r=p1e(t.get().map(i=>{const s={...i.props};return delete s.context,s}));BK.canUseDOM?E1e(r):gD&&(n=gD(r)),e(n)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:t}=this.props.context;t.add(this),this.emitChange()}render(){return this.init(),null}},C1e=class extends w.Component{static defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1};shouldComponentUpdate(t){return!n1e(X8(this.props,"helmetData"),X8(t,"helmetData"))}mapNestedChildrenToProps(t,e){if(!e)return null;switch(t.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${t.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(t,e,n,r){return{...e,[t.type]:[...e[t.type]||[],{...n,...this.mapNestedChildrenToProps(t,r)}]}}mapObjectTypeChildren(t,e,n,r){switch(t.type){case"title":return{...e,[t.type]:r,titleAttributes:{...n}};case"body":return{...e,bodyAttributes:{...n}};case"html":return{...e,htmlAttributes:{...n}};default:return{...e,[t.type]:{...n}}}}mapArrayTypeChildrenToProps(t,e){let n={...e};return Object.keys(t).forEach(r=>{n={...n,[r]:t[r]}}),n}warnOnInvalidChildren(t,e){return H8(q8.some(n=>t.type===n),typeof t.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${q8.join(", ")} are allowed. Helmet does not support rendering <${t.type}> elements. Refer to our API for more information.`),H8(!e||typeof e=="string"||Array.isArray(e)&&!e.some(n=>typeof n!="string"),`Helmet expects a string as a child of <${t.type}>. Did you forget to wrap your children in braces? ( <${t.type}>{\`\`}</${t.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(t,e){let n={};return ri.Children.forEach(t,r=>{if(!r||!r.props)return;const{children:i,...s}=r.props,a=Object.keys(s).reduce((l,c)=>(l[l1e[c]||c]=s[c],l),{});let{type:o}=r;switch(typeof o=="symbol"?o=o.toString():this.warnOnInvalidChildren(r,i),o){case"Symbol(react.fragment)":e=this.mapChildrenToProps(i,e);break;case"link":case"meta":case"noscript":case"script":case"style":n=this.flattenArrayTypeChildren(r,n,a,i);break;default:e=this.mapObjectTypeChildren(r,e,a,i);break}}),this.mapArrayTypeChildrenToProps(n,e)}render(){const{children:t,...e}=this.props;let n={...e},{helmetData:r}=e;if(t&&(n=this.mapChildrenToProps(t,n)),r&&!(r instanceof xD)){const i=r;r=new xD(i.context,!0),delete n.helmetData}return r?ri.createElement(K8,{...n,context:r.value}):ri.createElement(kK.Consumer,null,i=>ri.createElement(K8,{...n,context:i}))}};const A1e={currentView:"classification",selectedEntity:void 0,graphData:{nodes:[],links:[]},filters:{show_images:!0,similarity_threshold:.7},loading:{classification:!1,preprocess:!1,graph:!1,image:!1,embedding:!1},error:void 0};function M1e(t,e){switch(e.type){case"SET_VIEW":return{...t,currentView:e.payload};case"SET_SELECTED_ENTITY":return{...t,selectedEntity:e.payload};case"SET_GRAPH_DATA":return{...t,graphData:e.payload};case"SET_FILTERS":return{...t,filters:{...t.filters,...e.payload}};case"SET_LOADING":return{...t,loading:{...t.loading,...e.payload}};case"SET_ERROR":return{...t,error:e.payload};case"ADD_ENTITY_TO_GRAPH":const n={id:e.payload.uuid,name:e.payload.name,uht_code:e.payload.uht_code,layer_dominance:UK(e.payload),trait_count:e.payload.trait_evaluations?.filter(i=>i.applicable).length||0,image_url:e.payload.image_url,color:Z8(e.payload)};return{...t,graphData:{...t.graphData,nodes:[...t.graphData.nodes,n]}};case"UPDATE_ENTITY":const r=t.graphData.nodes.map(i=>i.id===e.payload.uuid?{...i,name:e.payload.name,uht_code:e.payload.uht_code,image_url:e.payload.image_url,color:Z8(e.payload)}:i);return{...t,selectedEntity:e.payload,graphData:{...t.graphData,nodes:r}};case"CLEAR_ERROR":return{...t,error:void 0};default:return t}}function UK(t){if(!t.layers)return"Physical";const e={Physical:parseInt(t.layers.Physical,16).toString(2).split("1").length-1,Functional:parseInt(t.layers.Functional,16).toString(2).split("1").length-1,Abstract:parseInt(t.layers.Abstract,16).toString(2).split("1").length-1,Social:parseInt(t.layers.Social,16).toString(2).split("1").length-1};return Object.entries(e).reduce((n,r)=>e[n[0]]>e[r[0]]?n:r)[0]}function Z8(t){const e=UK(t);return{Physical:"#FF6B35",Functional:"#00E5FF",Abstract:"#9C27B0",Social:"#4CAF50"}[e]||"#FFFFFF"}const jK=w.createContext(void 0);function R1e({children:t}){const[e,n]=w.useReducer(M1e,A1e),r={setView:i=>n({type:"SET_VIEW",payload:i}),setSelectedEntity:i=>n({type:"SET_SELECTED_ENTITY",payload:i}),setGraphData:i=>n({type:"SET_GRAPH_DATA",payload:i}),setFilters:i=>n({type:"SET_FILTERS",payload:i}),setLoading:i=>n({type:"SET_LOADING",payload:i}),setError:i=>n({type:"SET_ERROR",payload:i}),addEntityToGraph:i=>n({type:"ADD_ENTITY_TO_GRAPH",payload:i}),updateEntity:i=>n({type:"UPDATE_ENTITY",payload:i}),clearError:()=>n({type:"CLEAR_ERROR"})};return g.jsx(jK.Provider,{value:{state:e,dispatch:n,actions:r},children:t})}function YE(){const t=w.useContext(jK);if(t===void 0)throw new Error("useApp must be used within an AppProvider");return t}const zK=w.createContext(void 0);function P1e({children:t}){const e=ec(),n=h3(e.breakpoints.down("sm")),r=h3(e.breakpoints.between("sm","md")),i=h3(e.breakpoints.up("md")),[s,a]=w.useState(!1),o=w.useCallback(()=>{a(f=>!f)},[]),l=w.useCallback(()=>{a(!0)},[]),c=w.useCallback(()=>{a(!1)},[]),u=w.useMemo(()=>({isMobile:n,isTablet:r,isDesktop:i,drawerOpen:s,toggleDrawer:o,openDrawer:l,closeDrawer:c}),[n,r,i,s,o,l,c]);return g.jsx(zK.Provider,{value:u,children:t})}function tc(){const t=w.useContext(zK);if(t===void 0)throw new Error("useMobile must be used within a MobileProvider");return t}function $K(t,e){return function(){return t.apply(e,arguments)}}const{toString:N1e}=Object.prototype,{getPrototypeOf:wk}=Object,{iterator:KE,toStringTag:GK}=Symbol,ZE=(t=>e=>{const n=N1e.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),nc=t=>(t=t.toLowerCase(),e=>ZE(e)===t),QE=t=>e=>typeof e===t,{isArray:hx}=Array,s0=QE("undefined");function y_(t){return t!==null&&!s0(t)&&t.constructor!==null&&!s0(t.constructor)&&qa(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const VK=nc("ArrayBuffer");function O1e(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&VK(t.buffer),e}const D1e=QE("string"),qa=QE("function"),HK=QE("number"),v_=t=>t!==null&&typeof t=="object",L1e=t=>t===!0||t===!1,_T=t=>{if(ZE(t)!=="object")return!1;const e=wk(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(GK in t)&&!(KE in t)},I1e=t=>{if(!v_(t)||y_(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},k1e=nc("Date"),B1e=nc("File"),F1e=nc("Blob"),U1e=nc("FileList"),j1e=t=>v_(t)&&qa(t.pipe),z1e=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||qa(t.append)&&((e=ZE(t))==="formdata"||e==="object"&&qa(t.toString)&&t.toString()==="[object FormData]"))},$1e=nc("URLSearchParams"),[G1e,V1e,H1e,W1e]=["ReadableStream","Request","Response","Headers"].map(nc),q1e=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function b_(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),hx(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{if(y_(t))return;const s=n?Object.getOwnPropertyNames(t):Object.keys(t),a=s.length;let o;for(r=0;r<a;r++)o=s[r],e.call(null,t[o],o,t)}}function WK(t,e){if(y_(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const sp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,qK=t=>!s0(t)&&t!==sp;function vD(){const{caseless:t,skipUndefined:e}=qK(this)&&this||{},n={},r=(i,s)=>{const a=t&&WK(n,s)||s;_T(n[a])&&_T(i)?n[a]=vD(n[a],i):_T(i)?n[a]=vD({},i):hx(i)?n[a]=i.slice():(!e||!s0(i))&&(n[a]=i)};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&b_(arguments[i],r);return n}const X1e=(t,e,n,{allOwnKeys:r}={})=>(b_(e,(i,s)=>{n&&qa(i)?t[s]=$K(i,n):t[s]=i},{allOwnKeys:r}),t),Y1e=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),K1e=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},Z1e=(t,e,n,r)=>{let i,s,a;const o={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)a=i[s],(!r||r(a,t,e))&&!o[a]&&(e[a]=t[a],o[a]=!0);t=n!==!1&&wk(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Q1e=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},J1e=t=>{if(!t)return null;if(hx(t))return t;let e=t.length;if(!HK(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},eSe=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&wk(Uint8Array)),tSe=(t,e)=>{const r=(t&&t[KE]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},nSe=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},rSe=nc("HTMLFormElement"),iSe=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),Q8=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),sSe=nc("RegExp"),XK=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};b_(n,(i,s)=>{let a;(a=e(i,s,t))!==!1&&(r[s]=a||i)}),Object.defineProperties(t,r)},aSe=t=>{XK(t,(e,n)=>{if(qa(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(qa(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},oSe=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return hx(t)?r(t):r(String(t).split(e)),n},lSe=()=>{},cSe=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function uSe(t){return!!(t&&qa(t.append)&&t[GK]==="FormData"&&t[KE])}const dSe=t=>{const e=new Array(10),n=(r,i)=>{if(v_(r)){if(e.indexOf(r)>=0)return;if(y_(r))return r;if(!("toJSON"in r)){e[i]=r;const s=hx(r)?[]:{};return b_(r,(a,o)=>{const l=n(a,i+1);!s0(l)&&(s[o]=l)}),e[i]=void 0,s}}return r};return n(t,0)},fSe=nc("AsyncFunction"),hSe=t=>t&&(v_(t)||qa(t))&&qa(t.then)&&qa(t.catch),YK=((t,e)=>t?setImmediate:e?((n,r)=>(sp.addEventListener("message",({source:i,data:s})=>{i===sp&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),sp.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",qa(sp.postMessage)),pSe=typeof queueMicrotask<"u"?queueMicrotask.bind(sp):typeof process<"u"&&process.nextTick||YK,mSe=t=>t!=null&&qa(t[KE]),Fe={isArray:hx,isArrayBuffer:VK,isBuffer:y_,isFormData:z1e,isArrayBufferView:O1e,isString:D1e,isNumber:HK,isBoolean:L1e,isObject:v_,isPlainObject:_T,isEmptyObject:I1e,isReadableStream:G1e,isRequest:V1e,isResponse:H1e,isHeaders:W1e,isUndefined:s0,isDate:k1e,isFile:B1e,isBlob:F1e,isRegExp:sSe,isFunction:qa,isStream:j1e,isURLSearchParams:$1e,isTypedArray:eSe,isFileList:U1e,forEach:b_,merge:vD,extend:X1e,trim:q1e,stripBOM:Y1e,inherits:K1e,toFlatObject:Z1e,kindOf:ZE,kindOfTest:nc,endsWith:Q1e,toArray:J1e,forEachEntry:tSe,matchAll:nSe,isHTMLForm:rSe,hasOwnProperty:Q8,hasOwnProp:Q8,reduceDescriptors:XK,freezeMethods:aSe,toObjectSet:oSe,toCamelCase:iSe,noop:lSe,toFiniteNumber:cSe,findKey:WK,global:sp,isContextDefined:qK,isSpecCompliantForm:uSe,toJSONObject:dSe,isAsyncFn:fSe,isThenable:hSe,setImmediate:YK,asap:pSe,isIterable:mSe};function wn(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Fe.inherits(wn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Fe.toJSONObject(this.config),code:this.code,status:this.status}}});const KK=wn.prototype,ZK={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{ZK[t]={value:t}});Object.defineProperties(wn,ZK);Object.defineProperty(KK,"isAxiosError",{value:!0});wn.from=(t,e,n,r,i,s)=>{const a=Object.create(KK);Fe.toFlatObject(t,a,function(u){return u!==Error.prototype},c=>c!=="isAxiosError");const o=t&&t.message?t.message:"Error",l=e==null&&t?t.code:e;return wn.call(a,o,l,n,r,i),t&&a.cause==null&&Object.defineProperty(a,"cause",{value:t,configurable:!0}),a.name=t&&t.name||"Error",s&&Object.assign(a,s),a};const gSe=null;function bD(t){return Fe.isPlainObject(t)||Fe.isArray(t)}function QK(t){return Fe.endsWith(t,"[]")?t.slice(0,-2):t}function J8(t,e,n){return t?t.concat(e).map(function(i,s){return i=QK(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function xSe(t){return Fe.isArray(t)&&!t.some(bD)}const ySe=Fe.toFlatObject(Fe,{},null,function(e){return/^is[A-Z]/.test(e)});function JE(t,e,n){if(!Fe.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Fe.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,v){return!Fe.isUndefined(v[b])});const r=n.metaTokens,i=n.visitor||u,s=n.dots,a=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&Fe.isSpecCompliantForm(e);if(!Fe.isFunction(i))throw new TypeError("visitor must be a function");function c(x){if(x===null)return"";if(Fe.isDate(x))return x.toISOString();if(Fe.isBoolean(x))return x.toString();if(!l&&Fe.isBlob(x))throw new wn("Blob is not supported. Use a Buffer instead.");return Fe.isArrayBuffer(x)||Fe.isTypedArray(x)?l&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function u(x,b,v){let _=x;if(x&&!v&&typeof x=="object"){if(Fe.endsWith(b,"{}"))b=r?b:b.slice(0,-2),x=JSON.stringify(x);else if(Fe.isArray(x)&&xSe(x)||(Fe.isFileList(x)||Fe.endsWith(b,"[]"))&&(_=Fe.toArray(x)))return b=QK(b),_.forEach(function(T,A){!(Fe.isUndefined(T)||T===null)&&e.append(a===!0?J8([b],A,s):a===null?b:b+"[]",c(T))}),!1}return bD(x)?!0:(e.append(J8(v,b,s),c(x)),!1)}const f=[],p=Object.assign(ySe,{defaultVisitor:u,convertValue:c,isVisitable:bD});function m(x,b){if(!Fe.isUndefined(x)){if(f.indexOf(x)!==-1)throw Error("Circular reference detected in "+b.join("."));f.push(x),Fe.forEach(x,function(_,E){(!(Fe.isUndefined(_)||_===null)&&i.call(e,_,Fe.isString(E)?E.trim():E,b,p))===!0&&m(_,b?b.concat(E):[E])}),f.pop()}}if(!Fe.isObject(t))throw new TypeError("data must be an object");return m(t),e}function e$(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Tk(t,e){this._pairs=[],t&&JE(t,this,e)}const JK=Tk.prototype;JK.append=function(e,n){this._pairs.push([e,n])};JK.toString=function(e){const n=e?function(r){return e.call(this,r,e$)}:e$;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function vSe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function eZ(t,e,n){if(!e)return t;const r=n&&n.encode||vSe;Fe.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(e,n):s=Fe.isURLSearchParams(e)?e.toString():new Tk(e,n).toString(r),s){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class t${constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Fe.forEach(this.handlers,function(r){r!==null&&e(r)})}}const tZ={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},bSe=typeof URLSearchParams<"u"?URLSearchParams:Tk,_Se=typeof FormData<"u"?FormData:null,SSe=typeof Blob<"u"?Blob:null,wSe={isBrowser:!0,classes:{URLSearchParams:bSe,FormData:_Se,Blob:SSe},protocols:["http","https","file","blob","url","data"]},Ek=typeof window<"u"&&typeof document<"u",_D=typeof navigator=="object"&&navigator||void 0,TSe=Ek&&(!_D||["ReactNative","NativeScript","NS"].indexOf(_D.product)<0),ESe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",CSe=Ek&&window.location.href||"http://localhost",ASe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ek,hasStandardBrowserEnv:TSe,hasStandardBrowserWebWorkerEnv:ESe,navigator:_D,origin:CSe},Symbol.toStringTag,{value:"Module"})),Ks={...ASe,...wSe};function MSe(t,e){return JE(t,new Ks.classes.URLSearchParams,{visitor:function(n,r,i,s){return Ks.isNode&&Fe.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...e})}function RSe(t){return Fe.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function PSe(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function nZ(t){function e(n,r,i,s){let a=n[s++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),l=s>=n.length;return a=!a&&Fe.isArray(i)?i.length:a,l?(Fe.hasOwnProp(i,a)?i[a]=[i[a],r]:i[a]=r,!o):((!i[a]||!Fe.isObject(i[a]))&&(i[a]=[]),e(n,r,i[a],s)&&Fe.isArray(i[a])&&(i[a]=PSe(i[a])),!o)}if(Fe.isFormData(t)&&Fe.isFunction(t.entries)){const n={};return Fe.forEachEntry(t,(r,i)=>{e(RSe(r),i,n,0)}),n}return null}function NSe(t,e,n){if(Fe.isString(t))try{return(e||JSON.parse)(t),Fe.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const __={transitional:tZ,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=Fe.isObject(e);if(s&&Fe.isHTMLForm(e)&&(e=new FormData(e)),Fe.isFormData(e))return i?JSON.stringify(nZ(e)):e;if(Fe.isArrayBuffer(e)||Fe.isBuffer(e)||Fe.isStream(e)||Fe.isFile(e)||Fe.isBlob(e)||Fe.isReadableStream(e))return e;if(Fe.isArrayBufferView(e))return e.buffer;if(Fe.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return MSe(e,this.formSerializer).toString();if((o=Fe.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return JE(o?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),NSe(e)):e}],transformResponse:[function(e){const n=this.transitional||__.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Fe.isResponse(e)||Fe.isReadableStream(e))return e;if(e&&Fe.isString(e)&&(r&&!this.responseType||i)){const a=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(o){if(a)throw o.name==="SyntaxError"?wn.from(o,wn.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ks.classes.FormData,Blob:Ks.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Fe.forEach(["delete","get","head","post","put","patch"],t=>{__.headers[t]={}});const OSe=Fe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),DSe=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(a){i=a.indexOf(":"),n=a.substring(0,i).trim().toLowerCase(),r=a.substring(i+1).trim(),!(!n||e[n]&&OSe[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},n$=Symbol("internals");function Fy(t){return t&&String(t).trim().toLowerCase()}function ST(t){return t===!1||t==null?t:Fe.isArray(t)?t.map(ST):String(t)}function LSe(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const ISe=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function b3(t,e,n,r,i){if(Fe.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!Fe.isString(e)){if(Fe.isString(r))return e.indexOf(r)!==-1;if(Fe.isRegExp(r))return r.test(e)}}function kSe(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function BSe(t,e){const n=Fe.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,a){return this[r].call(this,e,i,s,a)},configurable:!0})})}let Xa=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(o,l,c){const u=Fy(l);if(!u)throw new Error("header name must be a non-empty string");const f=Fe.findKey(i,u);(!f||i[f]===void 0||c===!0||c===void 0&&i[f]!==!1)&&(i[f||l]=ST(o))}const a=(o,l)=>Fe.forEach(o,(c,u)=>s(c,u,l));if(Fe.isPlainObject(e)||e instanceof this.constructor)a(e,n);else if(Fe.isString(e)&&(e=e.trim())&&!ISe(e))a(DSe(e),n);else if(Fe.isObject(e)&&Fe.isIterable(e)){let o={},l,c;for(const u of e){if(!Fe.isArray(u))throw TypeError("Object iterator must return a key-value pair");o[c=u[0]]=(l=o[c])?Fe.isArray(l)?[...l,u[1]]:[l,u[1]]:u[1]}a(o,n)}else e!=null&&s(n,e,r);return this}get(e,n){if(e=Fy(e),e){const r=Fe.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return LSe(i);if(Fe.isFunction(n))return n.call(this,i,r);if(Fe.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Fy(e),e){const r=Fe.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||b3(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(a){if(a=Fy(a),a){const o=Fe.findKey(r,a);o&&(!n||b3(r,r[o],o,n))&&(delete r[o],i=!0)}}return Fe.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||b3(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return Fe.forEach(this,(i,s)=>{const a=Fe.findKey(r,s);if(a){n[a]=ST(i),delete n[s];return}const o=e?kSe(s):String(s).trim();o!==s&&delete n[s],n[o]=ST(i),r[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Fe.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&Fe.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[n$]=this[n$]={accessors:{}}).accessors,i=this.prototype;function s(a){const o=Fy(a);r[o]||(BSe(i,a),r[o]=!0)}return Fe.isArray(e)?e.forEach(s):s(e),this}};Xa.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Fe.reduceDescriptors(Xa.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Fe.freezeMethods(Xa);function _3(t,e){const n=this||__,r=e||n,i=Xa.from(r.headers);let s=r.data;return Fe.forEach(t,function(o){s=o.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function rZ(t){return!!(t&&t.__CANCEL__)}function px(t,e,n){wn.call(this,t??"canceled",wn.ERR_CANCELED,e,n),this.name="CanceledError"}Fe.inherits(px,wn,{__CANCEL__:!0});function iZ(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new wn("Request failed with status code "+n.status,[wn.ERR_BAD_REQUEST,wn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function FSe(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function USe(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,a;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=r[s];a||(a=c),n[i]=l,r[i]=c;let f=s,p=0;for(;f!==i;)p+=n[f++],f=f%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-a<e)return;const m=u&&c-u;return m?Math.round(p*1e3/m):void 0}}function jSe(t,e){let n=0,r=1e3/e,i,s;const a=(c,u=Date.now())=>{n=u,i=null,s&&(clearTimeout(s),s=null),t(...c)};return[(...c)=>{const u=Date.now(),f=u-n;f>=r?a(c,u):(i=c,s||(s=setTimeout(()=>{s=null,a(i)},r-f)))},()=>i&&a(i)]}const QT=(t,e,n=3)=>{let r=0;const i=USe(50,250);return jSe(s=>{const a=s.loaded,o=s.lengthComputable?s.total:void 0,l=a-r,c=i(l),u=a<=o;r=a;const f={loaded:a,total:o,progress:o?a/o:void 0,bytes:l,rate:c||void 0,estimated:c&&o&&u?(o-a)/c:void 0,event:s,lengthComputable:o!=null,[e?"download":"upload"]:!0};t(f)},n)},r$=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},i$=t=>(...e)=>Fe.asap(()=>t(...e)),zSe=Ks.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Ks.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Ks.origin),Ks.navigator&&/(msie|trident)/i.test(Ks.navigator.userAgent)):()=>!0,$Se=Ks.hasStandardBrowserEnv?{write(t,e,n,r,i,s,a){if(typeof document>"u")return;const o=[`${t}=${encodeURIComponent(e)}`];Fe.isNumber(n)&&o.push(`expires=${new Date(n).toUTCString()}`),Fe.isString(r)&&o.push(`path=${r}`),Fe.isString(i)&&o.push(`domain=${i}`),s===!0&&o.push("secure"),Fe.isString(a)&&o.push(`SameSite=${a}`),document.cookie=o.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function GSe(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function VSe(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function sZ(t,e,n){let r=!GSe(e);return t&&(r||n==!1)?VSe(t,e):e}const s$=t=>t instanceof Xa?{...t}:t;function Ep(t,e){e=e||{};const n={};function r(c,u,f,p){return Fe.isPlainObject(c)&&Fe.isPlainObject(u)?Fe.merge.call({caseless:p},c,u):Fe.isPlainObject(u)?Fe.merge({},u):Fe.isArray(u)?u.slice():u}function i(c,u,f,p){if(Fe.isUndefined(u)){if(!Fe.isUndefined(c))return r(void 0,c,f,p)}else return r(c,u,f,p)}function s(c,u){if(!Fe.isUndefined(u))return r(void 0,u)}function a(c,u){if(Fe.isUndefined(u)){if(!Fe.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function o(c,u,f){if(f in e)return r(c,u);if(f in t)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(c,u,f)=>i(s$(c),s$(u),f,!0)};return Fe.forEach(Object.keys({...t,...e}),function(u){const f=l[u]||i,p=f(t[u],e[u],u);Fe.isUndefined(p)&&f!==o||(n[u]=p)}),n}const aZ=t=>{const e=Ep({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:a,auth:o}=e;if(e.headers=a=Xa.from(a),e.url=eZ(sZ(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),Fe.isFormData(n)){if(Ks.hasStandardBrowserEnv||Ks.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(Fe.isFunction(n.getHeaders)){const l=n.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([u,f])=>{c.includes(u.toLowerCase())&&a.set(u,f)})}}if(Ks.hasStandardBrowserEnv&&(r&&Fe.isFunction(r)&&(r=r(e)),r||r!==!1&&zSe(e.url))){const l=i&&s&&$Se.read(s);l&&a.set(i,l)}return e},HSe=typeof XMLHttpRequest<"u",WSe=HSe&&function(t){return new Promise(function(n,r){const i=aZ(t);let s=i.data;const a=Xa.from(i.headers).normalize();let{responseType:o,onUploadProgress:l,onDownloadProgress:c}=i,u,f,p,m,x;function b(){m&&m(),x&&x(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let v=new XMLHttpRequest;v.open(i.method.toUpperCase(),i.url,!0),v.timeout=i.timeout;function _(){if(!v)return;const T=Xa.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),C={data:!o||o==="text"||o==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:T,config:t,request:v};iZ(function(P){n(P),b()},function(P){r(P),b()},C),v=null}"onloadend"in v?v.onloadend=_:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(_)},v.onabort=function(){v&&(r(new wn("Request aborted",wn.ECONNABORTED,t,v)),v=null)},v.onerror=function(A){const C=A&&A.message?A.message:"Network Error",M=new wn(C,wn.ERR_NETWORK,t,v);M.event=A||null,r(M),v=null},v.ontimeout=function(){let A=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const C=i.transitional||tZ;i.timeoutErrorMessage&&(A=i.timeoutErrorMessage),r(new wn(A,C.clarifyTimeoutError?wn.ETIMEDOUT:wn.ECONNABORTED,t,v)),v=null},s===void 0&&a.setContentType(null),"setRequestHeader"in v&&Fe.forEach(a.toJSON(),function(A,C){v.setRequestHeader(C,A)}),Fe.isUndefined(i.withCredentials)||(v.withCredentials=!!i.withCredentials),o&&o!=="json"&&(v.responseType=i.responseType),c&&([p,x]=QT(c,!0),v.addEventListener("progress",p)),l&&v.upload&&([f,m]=QT(l),v.upload.addEventListener("progress",f),v.upload.addEventListener("loadend",m)),(i.cancelToken||i.signal)&&(u=T=>{v&&(r(!T||T.type?new px(null,t,v):T),v.abort(),v=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const E=FSe(i.url);if(E&&Ks.protocols.indexOf(E)===-1){r(new wn("Unsupported protocol "+E+":",wn.ERR_BAD_REQUEST,t));return}v.send(s||null)})},qSe=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(c){if(!i){i=!0,o();const u=c instanceof Error?c:this.reason;r.abort(u instanceof wn?u:new px(u instanceof Error?u.message:u))}};let a=e&&setTimeout(()=>{a=null,s(new wn(`timeout ${e} of ms exceeded`,wn.ETIMEDOUT))},e);const o=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),t=null)};t.forEach(c=>c.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>Fe.asap(o),l}},XSe=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},YSe=async function*(t,e){for await(const n of KSe(t))yield*XSe(n,e)},KSe=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},a$=(t,e,n,r)=>{const i=YSe(t,e);let s=0,a,o=l=>{a||(a=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await i.next();if(c){o(),l.close();return}let f=u.byteLength;if(n){let p=s+=f;n(p)}l.enqueue(new Uint8Array(u))}catch(c){throw o(c),c}},cancel(l){return o(l),i.return()}},{highWaterMark:2})},o$=64*1024,{isFunction:jS}=Fe,ZSe=(({Request:t,Response:e})=>({Request:t,Response:e}))(Fe.global),{ReadableStream:l$,TextEncoder:c$}=Fe.global,u$=(t,...e)=>{try{return!!t(...e)}catch{return!1}},QSe=t=>{t=Fe.merge.call({skipUndefined:!0},ZSe,t);const{fetch:e,Request:n,Response:r}=t,i=e?jS(e):typeof fetch=="function",s=jS(n),a=jS(r);if(!i)return!1;const o=i&&jS(l$),l=i&&(typeof c$=="function"?(x=>b=>x.encode(b))(new c$):async x=>new Uint8Array(await new n(x).arrayBuffer())),c=s&&o&&u$(()=>{let x=!1;const b=new n(Ks.origin,{body:new l$,method:"POST",get duplex(){return x=!0,"half"}}).headers.has("Content-Type");return x&&!b}),u=a&&o&&u$(()=>Fe.isReadableStream(new r("").body)),f={stream:u&&(x=>x.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(x=>{!f[x]&&(f[x]=(b,v)=>{let _=b&&b[x];if(_)return _.call(b);throw new wn(`Response type '${x}' is not supported`,wn.ERR_NOT_SUPPORT,v)})});const p=async x=>{if(x==null)return 0;if(Fe.isBlob(x))return x.size;if(Fe.isSpecCompliantForm(x))return(await new n(Ks.origin,{method:"POST",body:x}).arrayBuffer()).byteLength;if(Fe.isArrayBufferView(x)||Fe.isArrayBuffer(x))return x.byteLength;if(Fe.isURLSearchParams(x)&&(x=x+""),Fe.isString(x))return(await l(x)).byteLength},m=async(x,b)=>{const v=Fe.toFiniteNumber(x.getContentLength());return v??p(b)};return async x=>{let{url:b,method:v,data:_,signal:E,cancelToken:T,timeout:A,onDownloadProgress:C,onUploadProgress:M,responseType:P,headers:D,withCredentials:N="same-origin",fetchOptions:L}=aZ(x),k=e||fetch;P=P?(P+"").toLowerCase():"text";let I=qSe([E,T&&T.toAbortSignal()],A),F=null;const z=I&&I.unsubscribe&&(()=>{I.unsubscribe()});let H;try{if(M&&c&&v!=="get"&&v!=="head"&&(H=await m(D,_))!==0){let $=new n(b,{method:"POST",body:_,duplex:"half"}),ee;if(Fe.isFormData(_)&&(ee=$.headers.get("content-type"))&&D.setContentType(ee),$.body){const[oe,me]=r$(H,QT(i$(M)));_=a$($.body,o$,oe,me)}}Fe.isString(N)||(N=N?"include":"omit");const B=s&&"credentials"in n.prototype,j={...L,signal:I,method:v.toUpperCase(),headers:D.normalize().toJSON(),body:_,duplex:"half",credentials:B?N:void 0};F=s&&new n(b,j);let G=await(s?k(F,L):k(b,j));const W=u&&(P==="stream"||P==="response");if(u&&(C||W&&z)){const $={};["status","statusText","headers"].forEach(te=>{$[te]=G[te]});const ee=Fe.toFiniteNumber(G.headers.get("content-length")),[oe,me]=C&&r$(ee,QT(i$(C),!0))||[];G=new r(a$(G.body,o$,oe,()=>{me&&me(),z&&z()}),$)}P=P||"text";let re=await f[Fe.findKey(f,P)||"text"](G,x);return!W&&z&&z(),await new Promise(($,ee)=>{iZ($,ee,{data:re,headers:Xa.from(G.headers),status:G.status,statusText:G.statusText,config:x,request:F})})}catch(B){throw z&&z(),B&&B.name==="TypeError"&&/Load failed|fetch/i.test(B.message)?Object.assign(new wn("Network Error",wn.ERR_NETWORK,x,F),{cause:B.cause||B}):wn.from(B,B&&B.code,x,F)}}},JSe=new Map,oZ=t=>{let e=t&&t.env||{};const{fetch:n,Request:r,Response:i}=e,s=[r,i,n];let a=s.length,o=a,l,c,u=JSe;for(;o--;)l=s[o],c=u.get(l),c===void 0&&u.set(l,c=o?new Map:QSe(e)),u=c;return c};oZ();const Ck={http:gSe,xhr:WSe,fetch:{get:oZ}};Fe.forEach(Ck,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const d$=t=>`- ${t}`,ewe=t=>Fe.isFunction(t)||t===null||t===!1;function twe(t,e){t=Fe.isArray(t)?t:[t];const{length:n}=t;let r,i;const s={};for(let a=0;a<n;a++){r=t[a];let o;if(i=r,!ewe(r)&&(i=Ck[(o=String(r)).toLowerCase()],i===void 0))throw new wn(`Unknown adapter '${o}'`);if(i&&(Fe.isFunction(i)||(i=i.get(e))))break;s[o||"#"+a]=i}if(!i){const a=Object.entries(s).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=n?a.length>1?`since :
`+a.map(d$).join(`
`):" "+d$(a[0]):"as no adapter specified";throw new wn("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i}const lZ={getAdapter:twe,adapters:Ck};function S3(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new px(null,t)}function f$(t){return S3(t),t.headers=Xa.from(t.headers),t.data=_3.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),lZ.getAdapter(t.adapter||__.adapter,t)(t).then(function(r){return S3(t),r.data=_3.call(t,t.transformResponse,r),r.headers=Xa.from(r.headers),r},function(r){return rZ(r)||(S3(t),r&&r.response&&(r.response.data=_3.call(t,t.transformResponse,r.response),r.response.headers=Xa.from(r.response.headers))),Promise.reject(r)})}const cZ="1.13.2",eC={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{eC[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const h$={};eC.transitional=function(e,n,r){function i(s,a){return"[Axios v"+cZ+"] Transitional option '"+s+"'"+a+(r?". "+r:"")}return(s,a,o)=>{if(e===!1)throw new wn(i(a," has been removed"+(n?" in "+n:"")),wn.ERR_DEPRECATED);return n&&!h$[a]&&(h$[a]=!0,console.warn(i(a," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,a,o):!0}};eC.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function nwe(t,e,n){if(typeof t!="object")throw new wn("options must be an object",wn.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],a=e[s];if(a){const o=t[s],l=o===void 0||a(o,s,t);if(l!==!0)throw new wn("option "+s+" must be "+l,wn.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new wn("Unknown option "+s,wn.ERR_BAD_OPTION)}}const wT={assertOptions:nwe,validators:eC},fc=wT.validators;let fp=class{constructor(e){this.defaults=e||{},this.interceptors={request:new t$,response:new t$}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Ep(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&wT.assertOptions(r,{silentJSONParsing:fc.transitional(fc.boolean),forcedJSONParsing:fc.transitional(fc.boolean),clarifyTimeoutError:fc.transitional(fc.boolean)},!1),i!=null&&(Fe.isFunction(i)?n.paramsSerializer={serialize:i}:wT.assertOptions(i,{encode:fc.function,serialize:fc.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),wT.assertOptions(n,{baseUrl:fc.spelling("baseURL"),withXsrfToken:fc.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=s&&Fe.merge(s.common,s[n.method]);s&&Fe.forEach(["delete","get","head","post","put","patch","common"],x=>{delete s[x]}),n.headers=Xa.concat(a,s);const o=[];let l=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(n)===!1||(l=l&&b.synchronous,o.unshift(b.fulfilled,b.rejected))});const c=[];this.interceptors.response.forEach(function(b){c.push(b.fulfilled,b.rejected)});let u,f=0,p;if(!l){const x=[f$.bind(this),void 0];for(x.unshift(...o),x.push(...c),p=x.length,u=Promise.resolve(n);f<p;)u=u.then(x[f++],x[f++]);return u}p=o.length;let m=n;for(;f<p;){const x=o[f++],b=o[f++];try{m=x(m)}catch(v){b.call(this,v);break}}try{u=f$.call(this,m)}catch(x){return Promise.reject(x)}for(f=0,p=c.length;f<p;)u=u.then(c[f++],c[f++]);return u}getUri(e){e=Ep(this.defaults,e);const n=sZ(e.baseURL,e.url,e.allowAbsoluteUrls);return eZ(n,e.params,e.paramsSerializer)}};Fe.forEach(["delete","get","head","options"],function(e){fp.prototype[e]=function(n,r){return this.request(Ep(r||{},{method:e,url:n,data:(r||{}).data}))}});Fe.forEach(["post","put","patch"],function(e){function n(r){return function(s,a,o){return this.request(Ep(o||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}fp.prototype[e]=n(),fp.prototype[e+"Form"]=n(!0)});let rwe=class uZ{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const a=new Promise(o=>{r.subscribe(o),s=o}).then(i);return a.cancel=function(){r.unsubscribe(s)},a},e(function(s,a,o){r.reason||(r.reason=new px(s,a,o),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new uZ(function(i){e=i}),cancel:e}}};function iwe(t){return function(n){return t.apply(null,n)}}function swe(t){return Fe.isObject(t)&&t.isAxiosError===!0}const SD={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(SD).forEach(([t,e])=>{SD[e]=t});function dZ(t){const e=new fp(t),n=$K(fp.prototype.request,e);return Fe.extend(n,fp.prototype,e,{allOwnKeys:!0}),Fe.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return dZ(Ep(t,i))},n}const vi=dZ(__);vi.Axios=fp;vi.CanceledError=px;vi.CancelToken=rwe;vi.isCancel=rZ;vi.VERSION=cZ;vi.toFormData=JE;vi.AxiosError=wn;vi.Cancel=vi.CanceledError;vi.all=function(e){return Promise.all(e)};vi.spread=iwe;vi.isAxiosError=swe;vi.mergeConfig=Ep;vi.AxiosHeaders=Xa;vi.formToJSON=t=>nZ(Fe.isHTMLForm(t)?new FormData(t):t);vi.getAdapter=lZ.getAdapter;vi.HttpStatusCode=SD;vi.default=vi;const{Axios:uat,AxiosError:dat,CanceledError:fat,isCancel:hat,CancelToken:pat,VERSION:mat,all:gat,Cancel:xat,isAxiosError:yat,spread:vat,toFormData:bat,AxiosHeaders:_at,HttpStatusCode:Sat,formToJSON:wat,getAdapter:Tat,mergeConfig:Eat}=vi,awe=typeof window<"u"&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"),owe=awe?"http://localhost:8100/api/v1":"/api/v1",Ak="uht_api_key",Xh=()=>typeof window>"u"?null:localStorage.getItem(Ak),lwe=t=>{typeof window>"u"||localStorage.setItem(Ak,t)},cwe=()=>{typeof window>"u"||localStorage.removeItem(Ak)},fn=vi.create({baseURL:owe,headers:{"Content-Type":"application/json"},withCredentials:!0});fn.interceptors.request.use(t=>{const e=Xh();return e&&(t.headers["X-API-Key"]=e),t});const wD={classifyEntity:async t=>(await fn.post("/classify/",t)).data,explainClassification:async(t,e)=>(await fn.post("/classify/explain",null,{params:{entity_name:t,uht_code:e}})).data,batchClassify:async t=>(await fn.post("/classify/batch",{entities:t,parallel_workers:4})).data},vo={getEntity:async t=>(await fn.get(`/entities/${t}`)).data,searchEntities:async t=>(await fn.get("/entities/",{params:t})).data,findSimilarEntities:async(t,e=28)=>(await fn.get(`/entities/${t}/similar`,{params:{threshold:e}})).data,getAllEntities:async()=>(await fn.get("/entities/",{params:{limit:5e4}})).data.entities||[],getEntitiesMinimal:async()=>(await fn.get("/entities/list/minimal")).data.entities||[],searchEntitiesByName:async(t,e=500)=>(await fn.get("/entities/",{params:{name_contains:t,limit:e}})).data.entities||[],updateEntity:async(t,e)=>(await fn.patch(`/entities/${t}`,e)).data,searchByPattern:async(t,e=0,n=100)=>(await fn.get("/entities/search/pattern",{params:{pattern:t,tolerance:e,limit:n}})).data.entities||[],flagNsfw:async t=>(await fn.post(`/entities/${t}/flag-nsfw`)).data,unflagNsfw:async t=>(await fn.post(`/entities/${t}/unflag-nsfw`)).data};let zS=null;const uwe=3e5,Mk={getAllTraits:async()=>{const t=Date.now();if(zS&&t-zS.timestamp<uwe)return zS.data;const e=await fn.get("/traits/");return zS={data:e.data,timestamp:t},e.data},getTraitByBit:async t=>(await fn.get(`/traits/${t}`)).data,getTraitsByLayer:async t=>(await fn.get(`/traits/layer/${t}`)).data},fZ={preprocessEntity:async t=>(await fn.post(`/preprocess/preprocess?entity_name=${encodeURIComponent(t)}`)).data,checkDuplicate:async t=>(await fn.post(`/preprocess/duplicate-check?entity_name=${encodeURIComponent(t)}`)).data},hZ={generateImage:async t=>(await fn.post("/images/generate",t)).data,getImageHistory:async t=>(await fn.get(`/images/history/${t}`)).data},dwe={generateEmbedding:async t=>(await fn.post("/embeddings/generate",{entity_uuid:t})).data,compareEmbeddings:async(t,e)=>(await fn.post("/embeddings/compare",{entity_uuid_1:t,entity_uuid_2:e})).data,getEmbeddingMetrics:async t=>(await fn.get(`/embeddings/metrics/${t}`)).data,getAllEmbeddings:async()=>(await fn.get("/embeddings/")).data},fwe={getNodes:async(t=100)=>(await fn.get(`/graph/nodes?limit=${t}`)).data,getLinks:async(t=.7)=>(await fn.get(`/graph/links?similarity_threshold=${t}`)).data,getFullGraph:async(t=50,e=.7)=>(await fn.get(`/graph/full?node_limit=${t}&similarity_threshold=${e}`)).data},hwe={getHealth:async()=>(await fn.get("/health")).data,getStats:async()=>(await fn.get("/stats")).data},Pl={register:async(t,e)=>(await fn.post("/users/register",{email:t,password:e})).data,login:async(t,e)=>(await fn.post("/users/login",{email:t,password:e})).data,logout:async t=>{await fn.post("/users/logout",null,{headers:{Authorization:`Bearer ${t}`}})},refresh:async t=>(await fn.post("/users/refresh",t?{refresh_token:t}:{})).data,me:async t=>(await fn.get("/users/me",{headers:{Authorization:`Bearer ${t}`}})).data,forgotPassword:async t=>(await fn.post("/users/forgot-password",{email:t})).data,resetPassword:async(t,e)=>(await fn.post("/users/reset-password",{token:t,password:e})).data,changePassword:async(t,e,n)=>(await fn.post("/users/change-password",{current_password:e,new_password:n},{headers:{Authorization:`Bearer ${t}`}})).data,getMyApiKeys:async t=>(await fn.get("/users/me/apikeys",{headers:{Authorization:`Bearer ${t}`}})).data,generateMyApiKey:async t=>(await fn.post("/users/me/apikeys/generate",null,{headers:{Authorization:`Bearer ${t}`}})).data},Th=t=>({headers:{Authorization:`Bearer ${t}`}}),Wo={list:async t=>(await fn.get("/collections",Th(t))).data,create:async(t,e,n)=>(await fn.post("/collections",{name:e,description:n},Th(t))).data,get:async(t,e)=>(await fn.get(`/collections/${e}`,Th(t))).data,update:async(t,e,n)=>(await fn.patch(`/collections/${e}`,n,Th(t))).data,delete:async(t,e)=>{await fn.delete(`/collections/${e}`,Th(t))},addEntities:async(t,e,n)=>(await fn.post(`/collections/${e}/entities`,{entity_uuids:n},Th(t))).data,removeEntities:async(t,e,n)=>(await fn.delete(`/collections/${e}/entities`,{...Th(t),data:{entity_uuids:n}})).data},Hv={classification:wD,entities:vo,traits:Mk,preprocess:fZ,images:hZ,embeddings:dwe,graph:fwe,system:hwe,auth:Pl,collections:Wo},TD="uht_auth",pwe=()=>{try{const t=localStorage.getItem(TD);if(t){const e=JSON.parse(t);return{accessToken:e.accessToken||null,user:e.user||null}}}catch{}return{accessToken:null,user:null}},w3=(t,e)=>{try{t&&e?localStorage.setItem(TD,JSON.stringify({accessToken:t,user:e})):localStorage.removeItem(TD)}catch(n){console.error("Failed to save auth state:",n)}},mwe={user:null,accessToken:null,isAuthenticated:!1,isLoading:!0,error:null};function gwe(t,e){switch(e.type){case"SET_LOADING":return{...t,isLoading:e.payload};case"SET_ERROR":return{...t,error:e.payload,isLoading:!1};case"LOGIN_SUCCESS":return w3(e.payload.accessToken,e.payload.user),{...t,user:e.payload.user,accessToken:e.payload.accessToken,isAuthenticated:!0,isLoading:!1,error:null};case"LOGOUT":return w3(null,null),{...t,user:null,accessToken:null,isAuthenticated:!1,isLoading:!1,error:null};case"SET_USER":return{...t,user:e.payload};case"TOKEN_REFRESH":return w3(e.payload,t.user),{...t,accessToken:e.payload};default:return t}}const pZ=w.createContext(void 0);function xwe({children:t}){const[e,n]=w.useReducer(gwe,mwe);w.useEffect(()=>{(async()=>{const{accessToken:f,user:p}=pwe();if(f&&p)try{const m=await Pl.me(f);n({type:"LOGIN_SUCCESS",payload:{user:m,accessToken:f}})}catch{try{const m=await Pl.refresh(),x=await Pl.me(m.access_token);n({type:"LOGIN_SUCCESS",payload:{user:x,accessToken:m.access_token}})}catch{n({type:"LOGOUT"})}}else n({type:"SET_LOADING",payload:!1})})()},[]);const r=w.useCallback(async(u,f)=>{n({type:"SET_LOADING",payload:!0}),n({type:"SET_ERROR",payload:null});try{const p=await Pl.login(u,f),m=await Pl.me(p.access_token);n({type:"LOGIN_SUCCESS",payload:{user:m,accessToken:p.access_token}});try{const x=await Pl.getMyApiKeys(p.access_token);if(x.count>0&&x.api_keys.length>0)localStorage.getItem("uht_api_key")||console.log("User has API keys but none stored locally. They need to re-enter or generate a new one.");else{console.log("No API keys found for user. Auto-generating...");const b=await Pl.generateMyApiKey(p.access_token);b.api_key&&(localStorage.setItem("uht_api_key",b.api_key),console.log("API key auto-generated and saved!"))}}catch(x){console.error("Failed to load/generate API key:",x)}return!0}catch(p){const m=p.response?.data?.detail||"Login failed. Please try again.";return n({type:"SET_ERROR",payload:m}),!1}},[]),i=w.useCallback(async(u,f)=>{n({type:"SET_LOADING",payload:!0}),n({type:"SET_ERROR",payload:null});try{return await Pl.register(u,f),n({type:"SET_LOADING",payload:!1}),{success:!0,message:"Registration successful! Please check your email to verify your account."}}catch(p){const m=p.response?.data?.detail||"Registration failed. Please try again.";return n({type:"SET_ERROR",payload:m}),{success:!1,message:m}}},[]),s=w.useCallback(async()=>{try{e.accessToken&&await Pl.logout(e.accessToken)}catch(u){console.error("Logout error:",u)}finally{n({type:"LOGOUT"})}},[e.accessToken]),a=w.useCallback(async()=>{try{const u=await Pl.refresh();return n({type:"TOKEN_REFRESH",payload:u.access_token}),!0}catch{return n({type:"LOGOUT"}),!1}},[]),o=w.useCallback(()=>{n({type:"SET_ERROR",payload:null})},[]),l=w.useCallback(()=>e.accessToken,[e.accessToken]),c={state:e,login:r,register:i,logout:s,refreshToken:a,clearError:o,getAccessToken:l};return g.jsx(pZ.Provider,{value:c,children:t})}function Rk(){const t=w.useContext(pZ);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}async function Eh(t,e,n){const r=e();if(!r)throw new Error("No access token");try{return await t(r)}catch(i){if(i.response?.status===401&&await n()){const a=e();if(a)return await t(a)}throw i}}const Pk="uht_collections",ywe=()=>`col_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,$S=()=>{try{const t=localStorage.getItem(Pk);return t?JSON.parse(t):[]}catch{return[]}},T3=t=>{try{localStorage.setItem(Pk,JSON.stringify(t))}catch(e){console.error("Failed to save collections:",e)}},vwe=()=>{try{localStorage.removeItem(Pk)}catch(t){console.error("Failed to clear local collections:",t)}};function bwe(t,e){switch(e.type){case"SET_LOADING":return{...t,isLoading:e.payload};case"LOAD_COLLECTIONS":return{...t,collections:e.payload.collections,isSynced:e.payload.synced,isLoading:!1};case"CREATE_COLLECTION":const n=[...t.collections,e.payload];return t.isSynced||T3(n),{...t,collections:n};case"UPDATE_COLLECTION":const r=t.collections.map(s=>s.id===e.payload.id?e.payload:s);return t.isSynced||T3(r),{...t,collections:r};case"DELETE_COLLECTION":const i=t.collections.filter(s=>s.id!==e.payload);return t.isSynced||T3(i),{...t,collections:i,activeCollectionId:t.activeCollectionId===e.payload?null:t.activeCollectionId};case"SET_ACTIVE_COLLECTION":return{...t,activeCollectionId:e.payload};case"CLEAR_ALL":return{...t,collections:[],activeCollectionId:null};default:return t}}const mZ=w.createContext(void 0);function _we({children:t}){const{state:e,getAccessToken:n,refreshToken:r}=Rk(),[i,s]=w.useReducer(bwe,{collections:[],activeCollectionId:null,isLoading:!0,isSynced:!1}),a=w.useRef(null);w.useEffect(()=>{(async()=>{const D=e.isAuthenticated?e.user?.id??null:"anonymous";if(a.current!==D){if(s({type:"SET_LOADING",payload:!0}),e.isAuthenticated&&!e.isLoading)try{const N=n();if(N){const k=(await Wo.list(N)).collections.map(I=>({id:I.id,name:I.name,entityUuids:I.entity_uuids||[],createdAt:I.created_at,updatedAt:I.updated_at}));s({type:"LOAD_COLLECTIONS",payload:{collections:k,synced:!0}}),a.current=D}}catch(N){console.error("Failed to load collections from server:",N);const L=$S();s({type:"LOAD_COLLECTIONS",payload:{collections:L,synced:!1}}),a.current=D}else if(!e.isLoading){const N=$S();s({type:"LOAD_COLLECTIONS",payload:{collections:N,synced:!1}}),a.current=D}}})()},[e.isAuthenticated,e.isLoading,e.user?.id,n]);const o=w.useCallback(async()=>{if(!e.isAuthenticated){const D=$S();s({type:"LOAD_COLLECTIONS",payload:{collections:D,synced:!1}});return}const P=n();if(P)try{const N=(await Wo.list(P)).collections.map(L=>({id:L.id,name:L.name,entityUuids:L.entity_uuids||[],createdAt:L.created_at,updatedAt:L.updated_at}));s({type:"LOAD_COLLECTIONS",payload:{collections:N,synced:!0}})}catch(D){console.error("Failed to refresh collections:",D)}},[e.isAuthenticated,n]),l=w.useCallback(async(P,D)=>{const N=new Date().toISOString();if(e.isAuthenticated)try{const L=await Eh(I=>Wo.create(I,P,D),n,r),k={id:L.id,name:L.name,entityUuids:[],createdAt:L.created_at,updatedAt:L.updated_at};return s({type:"CREATE_COLLECTION",payload:k}),k}catch(L){return console.error("Failed to create collection:",L),null}else{const L={id:ywe(),name:P||"Untitled Collection",entityUuids:[],createdAt:N,updatedAt:N};return s({type:"CREATE_COLLECTION",payload:L}),L}},[e.isAuthenticated,n,r]),c=w.useCallback(async P=>{if(e.isAuthenticated)try{await Eh(D=>Wo.delete(D,P),n,r),s({type:"DELETE_COLLECTION",payload:P})}catch(D){console.error("Failed to delete collection:",D)}else s({type:"DELETE_COLLECTION",payload:P})},[e.isAuthenticated,n,r]),u=w.useCallback(async(P,D)=>{if(e.isAuthenticated)try{const N=await Eh(k=>Wo.update(k,P,{name:D}),n,r),L=i.collections.find(k=>k.id===P);L&&s({type:"UPDATE_COLLECTION",payload:{...L,name:N.name,updatedAt:N.updated_at}})}catch(N){console.error("Failed to rename collection:",N)}else{const N=i.collections.find(L=>L.id===P);N&&s({type:"UPDATE_COLLECTION",payload:{...N,name:D,updatedAt:new Date().toISOString()}})}},[e.isAuthenticated,n,r,i.collections]),f=w.useCallback(async(P,D)=>{const N=i.collections.find(L=>L.id===P);if(!(!N||N.entityUuids.includes(D)))if(e.isAuthenticated)try{await Eh(L=>Wo.addEntities(L,P,[D]),n,r),s({type:"UPDATE_COLLECTION",payload:{...N,entityUuids:[...N.entityUuids,D],updatedAt:new Date().toISOString()}})}catch(L){console.error("Failed to add entity:",L)}else s({type:"UPDATE_COLLECTION",payload:{...N,entityUuids:[...N.entityUuids,D],updatedAt:new Date().toISOString()}})},[e.isAuthenticated,n,r,i.collections]),p=w.useCallback(async(P,D)=>{const N=i.collections.find(L=>L.id===P);if(N)if(e.isAuthenticated)try{await Eh(L=>Wo.removeEntities(L,P,[D]),n,r),s({type:"UPDATE_COLLECTION",payload:{...N,entityUuids:N.entityUuids.filter(L=>L!==D),updatedAt:new Date().toISOString()}})}catch(L){console.error("Failed to remove entity:",L)}else s({type:"UPDATE_COLLECTION",payload:{...N,entityUuids:N.entityUuids.filter(L=>L!==D),updatedAt:new Date().toISOString()}})},[e.isAuthenticated,n,r,i.collections]),m=w.useCallback(async(P,D)=>{const N=i.collections.find(I=>I.id===P);if(!N)return;const L=new Set(N.entityUuids),k=D.filter(I=>!L.has(I));if(k.length!==0)if(e.isAuthenticated)try{await Eh(I=>Wo.addEntities(I,P,k),n,r),s({type:"UPDATE_COLLECTION",payload:{...N,entityUuids:[...N.entityUuids,...k],updatedAt:new Date().toISOString()}})}catch(I){console.error("Failed to add entities:",I)}else s({type:"UPDATE_COLLECTION",payload:{...N,entityUuids:[...N.entityUuids,...k],updatedAt:new Date().toISOString()}})},[e.isAuthenticated,n,r,i.collections]),x=w.useCallback(async P=>{const D=i.collections.find(N=>N.id===P);if(D)if(e.isAuthenticated)try{D.entityUuids.length>0&&await Eh(N=>Wo.removeEntities(N,P,D.entityUuids),n,r),s({type:"UPDATE_COLLECTION",payload:{...D,entityUuids:[],updatedAt:new Date().toISOString()}})}catch(N){console.error("Failed to clear collection:",N)}else s({type:"UPDATE_COLLECTION",payload:{...D,entityUuids:[],updatedAt:new Date().toISOString()}})},[e.isAuthenticated,n,r,i.collections]),b=w.useCallback(P=>{s({type:"SET_ACTIVE_COLLECTION",payload:P})},[]),v=w.useCallback(P=>i.collections.find(D=>D.id===P),[i.collections]),_=w.useCallback((P,D)=>{const N=i.collections.find(L=>L.id===P);return N?N.entityUuids.includes(D):!1},[i.collections]),E=w.useCallback(P=>i.collections.filter(D=>D.entityUuids.includes(P)),[i.collections]),T=w.useCallback(P=>{const D=i.collections.find(L=>L.id===P);if(!D)return"";const N=new URLSearchParams;return N.set("name",D.name),N.set("entities",D.entityUuids.join(",")),`${window.location.origin}/collections?${N.toString()}`},[i.collections]),A=w.useCallback(async P=>{const D=P.get("name"),N=P.get("entities");if(!D||!N)return null;const L=N.split(",").filter(Boolean);if(L.length===0)return null;const k=await l(`${D} (Imported)`);return k&&L.length>0&&await m(k.id,L),k},[l,m]),C=w.useCallback(async()=>{if(!e.isAuthenticated)return 0;const P=n();if(!P)return 0;const D=$S();if(D.length===0)return 0;let N=0;for(const L of D)try{const k=await Wo.create(P,L.name);L.entityUuids.length>0&&await Wo.addEntities(P,k.id,L.entityUuids),N++}catch(k){console.error(`Failed to migrate collection "${L.name}":`,k)}return N>0&&(vwe(),await o()),N},[e.isAuthenticated,n,o]),M={state:i,createCollection:l,deleteCollection:c,renameCollection:u,addEntity:f,removeEntity:p,addEntities:m,clearCollection:x,setActiveCollection:b,getCollection:v,isEntityInCollection:_,getCollectionsForEntity:E,exportCollectionToUrl:T,importCollectionFromUrl:A,refreshCollections:o,migrateLocalCollections:C};return g.jsx(mZ.Provider,{value:M,children:t})}function tC(){const t=w.useContext(mZ);if(t===void 0)throw new Error("useCollections must be used within a CollectionProvider");return t}const gZ=Et(g.jsx("path",{d:"M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3z"})),gb=Et(g.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"})),xZ=Et(g.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M9 17H7v-5h2zm4 0h-2v-3h2zm0-5h-2v-2h2zm4 5h-2V7h2z"})),ED=Et(g.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"})),a0=Et(g.jsx("path",{d:"m19 9 1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25zm-7.5.5L9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12zM19 15l-1.25 2.75L15 19l2.75 1.25L19 23l1.25-2.75L23 19l-2.75-1.25z"})),yZ=Et(g.jsx("path",{d:"m22.7 19-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4"})),Swe=Et(g.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"})),JT=Et([g.jsx("path",{d:"m12 2-5.5 9h11z"},"0"),g.jsx("circle",{cx:"17.5",cy:"17.5",r:"4.5"},"1"),g.jsx("path",{d:"M3 13.5h8v8H3z"},"2")]),wwe=Et(g.jsx("path",{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m-7 7H3v4c0 1.1.9 2 2 2h4v-2H5zM5 5h4V3H5c-1.1 0-2 .9-2 2v4h2zm14-2h-4v2h4v4h2V5c0-1.1-.9-2-2-2m0 16h-4v2h4c1.1 0 2-.9 2-2v-4h-2z"})),Twe=Et(g.jsx("path",{d:"M12 7.77 18.39 18H5.61zM12 4 2 20h20z"})),e2=Et(g.jsx("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})),S_=Et(g.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"})),Wl=Et(g.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),mx=Et(g.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),Ewe=Et(g.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"})),Cwe=Et(g.jsx("path",{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6z"})),Cp=Et(g.jsx("path",{d:"M10 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h5v2h2V1h-2zm0 15H5l5-6zm9-15h-5v2h5v13l-5-6v9h5c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"})),vZ=Et(g.jsx("path",{d:"M9.01 14H2v2h7.01v3L13 15l-3.99-4zm5.98-1v-3H22V8h-7.01V5L11 9z"})),t2=Et(g.jsx("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"})),Nk=Et(g.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),Awe=Et(g.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"})),p$=Et(g.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"})),Mwe=Et(g.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"})),w_=Et(g.jsx("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"})),gx=Et(g.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"})),CD=Et(g.jsx("path",{d:"M10 18h4v-2h-4zM3 6v2h18V6zm3 7h12v-2H6z"})),xb=Et(g.jsx("path",{d:"M20 6h-8l-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m-2.06 11L15 15.28 12.06 17l.78-3.33-2.59-2.24 3.41-.29L15 8l1.34 3.14 3.41.29-2.59 2.24z"})),Rwe=Et(g.jsx("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M8 20H4v-4h4zm0-6H4v-4h4zm0-6H4V4h4zm6 12h-4v-4h4zm0-6h-4v-4h4zm0-6h-4V4h4zm6 12h-4v-4h4zm0-6h-4v-4h4zm0-6h-4V4h4z"})),Pwe=Et(g.jsx("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"})),nC=Et(g.jsx("path",{d:"M8.4 18.2c.38.5.6 1.12.6 1.8 0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3c.44 0 .85.09 1.23.26l1.41-1.77c-.92-1.03-1.29-2.39-1.09-3.69l-2.03-.68c-.54.83-1.46 1.38-2.52 1.38-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3c0 .07 0 .14-.01.21l2.03.68c.64-1.21 1.82-2.09 3.22-2.32V5.91C9.96 5.57 9 4.4 9 3c0-1.66 1.34-3 3-3s3 1.34 3 3c0 1.4-.96 2.57-2.25 2.91v2.16c1.4.23 2.58 1.11 3.22 2.32L18 9.71V9.5c0-1.66 1.34-3 3-3s3 1.34 3 3-1.34 3-3 3c-1.06 0-1.98-.55-2.52-1.37l-2.03.68c.2 1.29-.16 2.65-1.09 3.69l1.41 1.77Q17.34 17 18 17c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3c0-.68.22-1.3.6-1.8l-1.41-1.77c-1.35.75-3.01.76-4.37 0z"})),o0=Et(g.jsx("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2M8.5 13.5l2.5 3.01L14.5 12l4.5 6H5z"})),bZ=Et(g.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"})),m$=Et(g.jsx("path",{d:"M21 10h-8.35C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H13l2 2 2-2 2 2 4-4.04zM7 15c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3"})),g$=Et(g.jsx("path",{d:"M11 7 9.6 8.4l2.6 2.6H2v2h10.2l-2.6 2.6L11 17l5-5zm9 12h-8v2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-8v2h8z"})),Nwe=Et(g.jsx("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"})),Owe=Et(g.jsx("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"})),Dwe=Et(g.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"})),Yf=Et(g.jsx("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"})),Lwe=Et(g.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"})),_Z=Et(g.jsx("path",{d:"M22 16V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2m-11-4 2.03 2.71L16 11l4 5H8zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6z"})),Iwe=Et(g.jsx("path",{d:"M14 10H3v2h11zm0-4H3v2h11zm4 8v-4h-2v4h-4v2h4v4h2v-4h4v-2zM3 16h7v-2H3z"})),yb=Et([g.jsx("path",{d:"M13 8.57c-.79 0-1.43.64-1.43 1.43s.64 1.43 1.43 1.43 1.43-.64 1.43-1.43-.64-1.43-1.43-1.43"},"0"),g.jsx("path",{d:"M13 3C9.25 3 6.2 5.94 6.02 9.64L4.1 12.2c-.25.33-.01.8.4.8H6v3c0 1.1.9 2 2 2h1v3h7v-4.68c2.36-1.12 4-3.53 4-6.32 0-3.87-3.13-7-7-7m3 7c0 .13-.01.26-.02.39l.83.66c.08.06.1.16.05.25l-.8 1.39c-.05.09-.16.12-.24.09l-.99-.4c-.21.16-.43.29-.67.39L14 13.83c-.01.1-.1.17-.2.17h-1.6c-.1 0-.18-.07-.2-.17l-.15-1.06c-.25-.1-.47-.23-.68-.39l-.99.4c-.09.03-.2 0-.25-.09l-.8-1.39c-.05-.08-.03-.19.05-.25l.84-.66c-.01-.13-.02-.26-.02-.39s.02-.27.04-.39l-.85-.66c-.08-.06-.1-.16-.05-.26l.8-1.38c.05-.09.15-.12.24-.09l1 .4c.2-.15.43-.29.67-.39L12 6.17c.02-.1.1-.17.2-.17h1.6c.1 0 .18.07.2.17l.15 1.06c.24.1.46.23.67.39l1-.4c.09-.03.2 0 .24.09l.8 1.38c.05.09.03.2-.05.26l-.85.66c.03.12.04.25.04.39"},"1")]),kwe=Et(g.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"})),Zu=Et(g.jsx("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"})),Bwe=Et([g.jsx("circle",{cx:"7",cy:"14",r:"3"},"0"),g.jsx("circle",{cx:"11",cy:"6",r:"3"},"1"),g.jsx("circle",{cx:"16.6",cy:"17.6",r:"3"},"2")]),vb=Et(g.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"})),SZ=Et(g.jsx("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"})),bb=Et(g.jsx("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92"})),Fwe=Et(g.jsx("path",{d:"M6 6h12v12H6z"})),wZ=Et(g.jsx("path",{d:"M10 10.02h5V21h-5zM17 21h3c1.1 0 2-.9 2-2v-9h-5zm3-18H5c-1.1 0-2 .9-2 2v3h19V5c0-1.1-.9-2-2-2M3 19c0 1.1.9 2 2 2h3V10H3z"})),Uwe=Et(g.jsx("path",{d:"M23 8c0 1.1-.9 2-2 2-.18 0-.35-.02-.51-.07l-3.56 3.55c.05.16.07.34.07.52 0 1.1-.9 2-2 2s-2-.9-2-2c0-.18.02-.36.07-.52l-2.55-2.55c-.16.05-.34.07-.52.07s-.36-.02-.52-.07l-4.55 4.56c.05.16.07.33.07.51 0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2c.18 0 .35.02.51.07l4.56-4.55C8.02 9.36 8 9.18 8 9c0-1.1.9-2 2-2s2 .9 2 2c0 .18-.02.36-.07.52l2.55 2.55c.16-.05.34-.07.52-.07s.36.02.52.07l3.55-3.56C19.02 8.35 19 8.18 19 8c0-1.1.9-2 2-2s2 .9 2 2"})),jwe=Et(g.jsx("path",{d:"M7 20h4c0 1.1-.9 2-2 2s-2-.9-2-2m-2-1h8v-2H5zm11.5-9.5c0 3.82-2.66 5.86-3.77 6.5H5.27c-1.11-.64-3.77-2.68-3.77-6.5C1.5 5.36 4.86 2 9 2s7.5 3.36 7.5 7.5m4.87-2.13L20 8l1.37.63L22 10l.63-1.37L24 8l-1.37-.63L22 6zM19 6l.94-2.06L22 3l-2.06-.94L19 0l-.94 2.06L16 3l2.06.94z"})),x$=Et(g.jsx("path",{d:"m16 18 2.29-2.29-4.88-4.88-4 4L2 7.41 3.41 6l6 6 4-4 6.3 6.29L22 12v6z"})),y$=Et(g.jsx("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"})),Ok=Et(g.jsx("path",{d:"M3 17v2h6v-2zM3 5v2h10V5zm10 16v-2h8v-2h-8v-2h-2v6zM7 9v2H3v2h4v2h2V9zm14 4v-2H11v2zm-6-4h2V7h4V5h-4V3h-2z"})),zwe=Et(g.jsx("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8"})),TZ=Et(g.jsx("path",{d:"M5 20h14v-2H5zm0-10h4v6h6v-6h4l-7-7z"})),$we=Et(g.jsx("path",{d:"M3 14h4v-4H3zm0 5h4v-4H3zM3 9h4V5H3zm5 5h13v-4H8zm0 5h13v-4H8zM8 5v4h13V5z"})),EZ=Et(g.jsx("path",{d:"M14.67 5v6.5H9.33V5zm1 6.5H21V5h-5.33zm-1 7.5v-6.5H9.33V19zm1-6.5V19H21v-6.5zm-7.34 0H3V19h5.33zm0-1V5H3v6.5z"})),Gwe=Et(g.jsx("path",{d:"M3 17v-2c0-1.1.9-2 2-2h14c1.1 0 2 .9 2 2v2c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2M3 7v2c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2"})),n2=Et(g.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"})),AD=Et(g.jsx("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"})),CZ=Et([g.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"},"0"),g.jsx("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"},"1")]),AZ=Et(g.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14M7 9h5v1H7z"}));function Vwe({open:t,onClose:e}){const[n,r]=w.useState("status"),[i,s]=w.useState(""),[a,o]=w.useState(""),[l,c]=w.useState(!1),[u,f]=w.useState(!1),[p,m]=w.useState(null),[x,b]=w.useState(!1),[v,_]=w.useState(null);w.useEffect(()=>{t&&E()},[t]);const E=async()=>{const M=Xh();if(!M){b(!1),_(null);return}try{const P=await fetch("/api/v1/auth/keys/verify",{headers:{"X-API-Key":M}});if(P.ok){const D=await P.json();b(!0),_({name:D.name,scopes:D.scopes})}else b(!1),_(null)}catch{b(!1),_(null)}},T=async()=>{if(!i||!i.includes("@")){m({type:"error",text:"Please enter a valid email address"});return}f(!0),m(null);try{const M=await fetch("/api/v1/auth/request-access",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i})});if(M.ok)m({type:"success",text:"Access request sent! You will receive an email with your API key once approved."}),s("");else{const P=await M.json();m({type:"error",text:P.detail||"Failed to send request"})}}catch{m({type:"error",text:"Network error. Please try again."})}finally{f(!1)}},A=async()=>{if(!a||!a.startsWith("uht_")){m({type:"error",text:"Please enter a valid API key (starts with uht_)"});return}f(!0),m(null);try{const M=await fetch("/api/v1/auth/keys/verify",{headers:{"X-API-Key":a}});if(M.ok){lwe(a);const P=await M.json();b(!0),_({name:P.name,scopes:P.scopes}),m({type:"success",text:"API key saved successfully!"}),o(""),r("status")}else m({type:"error",text:"Invalid API key"})}catch{m({type:"error",text:"Failed to verify API key"})}finally{f(!1)}},C=()=>{cwe(),b(!1),_(null),m({type:"info",text:"Logged out successfully"})};return g.jsxs(Bf,{open:t,onClose:e,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{backgroundColor:"rgba(26, 26, 26, 0.98)",border:"1px solid rgba(0, 229, 255, 0.3)"}},children:[g.jsx(wp,{sx:{borderBottom:"1px solid rgba(0, 229, 255, 0.2)"},children:"Settings"}),g.jsxs(Ff,{sx:{pt:3},children:[g.jsxs(Y,{sx:{mb:3},children:[g.jsx(Z,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Authentication Status"}),g.jsx(Y,{sx:{display:"flex",alignItems:"center",gap:1},children:x?g.jsxs(g.Fragment,{children:[g.jsx(S_,{color:"success"}),g.jsx(Z,{color:"success.main",children:"Authenticated"}),v&&g.jsx(Dt,{label:v.name,size:"small",color:"primary",variant:"outlined"})]}):g.jsxs(g.Fragment,{children:[g.jsx(Swe,{color:"error"}),g.jsx(Z,{color:"error.main",children:"Not authenticated"})]})}),v&&g.jsx(Y,{sx:{mt:1},children:g.jsxs(Z,{variant:"caption",color:"text.secondary",children:["Scopes: ",v.scopes.join(", ")]})})]}),g.jsx(bs,{sx:{my:2}}),g.jsxs(Y,{sx:{display:"flex",gap:1,mb:3},children:[g.jsx(un,{variant:n==="request"?"contained":"outlined",startIcon:g.jsx(p$,{}),onClick:()=>r("request"),size:"small",children:"Request Access"}),g.jsx(un,{variant:n==="apikey"?"contained":"outlined",startIcon:g.jsx(m$,{}),onClick:()=>r("apikey"),size:"small",children:"Enter API Key"})]}),n==="request"&&g.jsxs(Y,{children:[g.jsx(Z,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Enter your email to request access. An admin will review your request and send you an API key."}),g.jsx(wi,{fullWidth:!0,label:"Email Address",type:"email",value:i,onChange:M=>s(M.target.value),placeholder:"your@email.com",disabled:u,sx:{mb:2}}),g.jsx(un,{variant:"contained",onClick:T,disabled:u||!i,startIcon:u?g.jsx(lr,{size:16}):g.jsx(p$,{}),children:u?"Sending...":"Request Access"})]}),n==="apikey"&&g.jsxs(Y,{children:[g.jsx(Z,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"If you already have an API key, enter it below to enable classification and other LLM features."}),g.jsx(wi,{fullWidth:!0,label:"API Key",type:l?"text":"password",value:a,onChange:M=>o(M.target.value),placeholder:"uht_...",disabled:u,sx:{mb:2},InputProps:{endAdornment:g.jsx(Ua,{position:"end",children:g.jsx(Gt,{onClick:()=>c(!l),edge:"end",children:l?g.jsx(AD,{}):g.jsx(n2,{})})})}}),g.jsx(un,{variant:"contained",onClick:A,disabled:u||!a,startIcon:u?g.jsx(lr,{size:16}):g.jsx(m$,{}),children:u?"Verifying...":"Save API Key"})]}),p&&g.jsx(mi,{severity:p.type,sx:{mt:2},children:p.text})]}),g.jsxs(i0,{sx:{borderTop:"1px solid rgba(0, 229, 255, 0.2)",p:2},children:[x&&g.jsx(un,{color:"error",onClick:C,children:"Logout"}),g.jsx(Y,{sx:{flexGrow:1}}),g.jsx(un,{onClick:e,children:"Close"})]})]})}function v$({children:t,value:e,index:n}){return g.jsx("div",{role:"tabpanel",hidden:e!==n,children:e===n&&g.jsx(Y,{sx:{pt:2},children:t})})}function Hwe({open:t,onClose:e,initialTab:n="login"}){const{login:r,register:i,state:s,clearError:a}=Rk(),[o,l]=w.useState(n==="register"?1:0),[c,u]=w.useState(""),[f,p]=w.useState(""),[m,x]=w.useState(!1),[b,v]=w.useState(""),[_,E]=w.useState(""),[T,A]=w.useState(""),[C,M]=w.useState(!1),[P,D]=w.useState(null),[N,L]=w.useState(null),k=(B,j)=>{l(j),D(null),L(null),a()},I=async B=>{if(B.preventDefault(),D(null),!c||!f){D("Please fill in all fields");return}await r(c,f)&&z()},F=async B=>{if(B.preventDefault(),D(null),L(null),!b||!_||!T){D("Please fill in all fields");return}if(_.length<8){D("Password must be at least 8 characters");return}if(_!==T){D("Passwords do not match");return}const j=await i(b,_);j.success&&(L(j.message),v(""),E(""),A(""))},z=()=>{u(""),p(""),v(""),E(""),A(""),D(null),L(null),a(),e()},H=P||s.error;return g.jsxs(Bf,{open:t,onClose:z,maxWidth:"xs",fullWidth:!0,PaperProps:{sx:{backgroundColor:"background.paper",border:"1px solid rgba(0, 229, 255, 0.3)"}},children:[g.jsxs(wp,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[g.jsx(Z,{component:"span",variant:"h6",children:"Account"}),g.jsx(Gt,{onClick:z,size:"small",children:g.jsx(mx,{})})]}),g.jsxs(Ff,{children:[g.jsxs(AK,{value:o,onChange:k,centered:!0,sx:{borderBottom:1,borderColor:"divider","& .MuiTab-root":{minWidth:100}},children:[g.jsx(Nu,{label:"Login"}),g.jsx(Nu,{label:"Register"})]}),H&&g.jsx(mi,{severity:"error",sx:{mt:2},onClose:()=>{D(null),a()},children:H}),N&&g.jsx(mi,{severity:"success",sx:{mt:2},children:N}),g.jsx(v$,{value:o,index:0,children:g.jsxs(Y,{component:"form",onSubmit:I,autoComplete:"on",sx:{display:"flex",flexDirection:"column",gap:2},children:[g.jsx(wi,{label:"Email",type:"email",name:"email",id:"login-email",value:c,onChange:B=>u(B.target.value),fullWidth:!0,autoComplete:"username email",autoFocus:o===0,disabled:s.isLoading}),g.jsx(wi,{label:"Password",type:m?"text":"password",name:"password",id:"login-password",value:f,onChange:B=>p(B.target.value),fullWidth:!0,autoComplete:"current-password",disabled:s.isLoading,InputProps:{endAdornment:g.jsx(Ua,{position:"end",children:g.jsx(Gt,{onClick:()=>x(!m),edge:"end",size:"small",children:m?g.jsx(AD,{}):g.jsx(n2,{})})})}}),g.jsx(un,{type:"submit",variant:"contained",fullWidth:!0,disabled:s.isLoading,sx:{mt:1},children:s.isLoading?g.jsx(lr,{size:24}):"Login"}),g.jsx(Z,{variant:"caption",color:"text.secondary",textAlign:"center",children:"Don't have an account? Click the Register tab above."})]})}),g.jsx(v$,{value:o,index:1,children:g.jsxs(Y,{component:"form",onSubmit:F,autoComplete:"on",sx:{display:"flex",flexDirection:"column",gap:2},children:[g.jsx(wi,{label:"Email",type:"email",name:"email",id:"register-email",value:b,onChange:B=>v(B.target.value),fullWidth:!0,autoComplete:"email",autoFocus:o===1,disabled:s.isLoading}),g.jsx(wi,{label:"Password",type:C?"text":"password",name:"new-password",id:"register-password",value:_,onChange:B=>E(B.target.value),fullWidth:!0,autoComplete:"new-password",disabled:s.isLoading,helperText:"At least 8 characters",InputProps:{endAdornment:g.jsx(Ua,{position:"end",children:g.jsx(Gt,{onClick:()=>M(!C),edge:"end",size:"small",children:C?g.jsx(AD,{}):g.jsx(n2,{})})})}}),g.jsx(wi,{label:"Confirm Password",type:C?"text":"password",name:"confirm-password",id:"register-confirm-password",value:T,onChange:B=>A(B.target.value),fullWidth:!0,autoComplete:"new-password",disabled:s.isLoading}),g.jsx(un,{type:"submit",variant:"contained",fullWidth:!0,disabled:s.isLoading,sx:{mt:1},children:s.isLoading?g.jsx(lr,{size:24}):"Create Account"}),g.jsx(Z,{variant:"caption",color:"text.secondary",textAlign:"center",children:"Already have an account? Click the Login tab above."})]})})]})]})}function Wwe(){const{state:t,actions:e}=YE(),{isMobile:n,isTablet:r,toggleDrawer:i}=tc(),{state:s,logout:a}=Rk(),[o,l]=w.useState(!1),[c,u]=w.useState(!1),f=n||r,p=Object.values(t.loading).some(v=>v),m=qwe(t.loading),x=()=>{window.location.reload()},b=async()=>{await a()};return g.jsxs(g.Fragment,{children:[g.jsxs(jme,{position:"static",elevation:0,sx:{backgroundColor:"rgba(26, 26, 26, 0.95)",borderBottom:"1px solid rgba(0, 229, 255, 0.3)",backdropFilter:"blur(10px)"},children:[g.jsxs(__e,{sx:{minHeight:{xs:"56px",sm:"64px"},px:{xs:1,sm:2}},children:[f&&g.jsx(Gt,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:i,sx:{mr:1},children:g.jsx(Owe,{})}),g.jsxs(Z,{variant:"h6",component:"div",sx:{flexGrow:1,fontSize:{xs:"0.95rem",sm:"1.25rem"},whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:["UHT Factory",!n&&t.selectedEntity&&g.jsxs(Z,{component:"span",variant:"body2",sx:{ml:2,color:"text.secondary",fontFamily:"monospace",fontSize:"0.9rem"},children:[t.selectedEntity.name,"  ",t.selectedEntity.uht_code]})]}),g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:{xs:.5,sm:1},mr:{xs:.5,sm:2}},children:[!n&&t.graphData.nodes.length>0&&g.jsx(Dt,{icon:g.jsx(S_,{}),label:`${t.graphData.nodes.length} entities`,size:"small",color:"success",variant:"outlined"}),p&&g.jsx(Dt,{label:n?"...":m,size:"small",color:"primary",sx:{animation:"pulse 1.5s ease-in-out infinite"}}),!n&&g.jsx(Dt,{label:t.currentView,size:"small",color:"primary",sx:{textTransform:"capitalize",fontWeight:600}})]}),g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:.5},children:[s.isLoading?g.jsx(lr,{size:24,sx:{mx:1}}):s.isAuthenticated?g.jsxs(g.Fragment,{children:[!n&&g.jsx(Dt,{icon:g.jsx(Lwe,{}),label:s.user?.email?.split("@")[0]||"User",size:"small",variant:"outlined",sx:{mr:1}}),g.jsx(Jt,{title:"Logout",children:g.jsx(Gt,{color:"inherit",onClick:b,children:g.jsx(Nwe,{})})})]}):g.jsx(un,{color:"inherit",startIcon:!n&&g.jsx(g$,{}),onClick:()=>u(!0),size:"small",sx:{mr:1},children:n?g.jsx(g$,{}):"Login"}),g.jsx(Jt,{title:"Refresh",children:g.jsx(Gt,{color:"inherit",onClick:x,disabled:p,children:g.jsx(Zu,{})})}),g.jsx(Jt,{title:"Settings",children:g.jsx(Gt,{color:"inherit",onClick:()=>l(!0),children:g.jsx(SZ,{})})})]})]}),g.jsx(Vwe,{open:o,onClose:()=>l(!1)}),g.jsx(Hwe,{open:c,onClose:()=>u(!1)}),p&&g.jsx(gk,{color:"primary",sx:{position:"absolute",bottom:0,left:0,right:0,"& .MuiLinearProgress-bar":{backgroundColor:"#00E5FF"}}})]}),g.jsx(ld,{in:!!t.error,children:g.jsx(mi,{severity:"error",action:g.jsx(Gt,{"aria-label":"close",color:"inherit",size:"small",onClick:e.clearError,children:g.jsx(mx,{fontSize:"inherit"})}),sx:{borderRadius:0,borderBottom:"1px solid rgba(0, 229, 255, 0.3)"},children:t.error})})]})}function qwe(t){return t.classification?"Classifying...":t.preprocess?"Pre-processing...":t.graph?"Loading graph...":t.image?"Generating image...":t.embedding?"Computing embeddings...":"Processing..."}const Xwe=240,Ywe=[{path:"/traits",label:"Canonical Traits",icon:g.jsx(JT,{}),description:"View the 32 fundamental traits"},{path:"/meta-classes",label:"Meta-Classes",icon:g.jsx(a0,{}),description:"Emergent trait archetypes"},{path:"/classify",label:"Classification",icon:g.jsx(yb,{}),description:"Classify entities with AI"},{path:"/graph",label:"3D Graph",icon:g.jsx(gZ,{}),description:"Explore entity relationships",hideOnMobile:!0,hidden:!0},{path:"/comparison",label:"Entity Comparison",icon:g.jsx(Cp,{}),description:"Compare 2-4 entities side by side"},{path:"/build",label:"Build-a-Code",icon:g.jsx(yZ,{}),description:"Create patterns & find matches"},{path:"/collections",label:"Collections",icon:g.jsx(xb,{}),description:"Organize entities into groups"},{path:"/list",label:"List View",icon:g.jsx(wZ,{}),description:"Spreadsheet view with filters"},{path:"/gallery",label:"Gallery",icon:g.jsx(_Z,{}),description:"Browse entity images"},{path:"/analytics",label:"Trait Analytics",icon:g.jsx(xZ,{}),description:"Statistics & co-occurrence",hideOnMobile:!0}];function b$({onNavigate:t}){const e=yl(),n=bd(),{state:r}=YE(),{isMobile:i}=tc(),s=Ywe.filter(l=>!l.hidden).filter(l=>!i||!l.hideOnMobile),a=l=>n.pathname===l,o=l=>{e(l),t?.()};return g.jsxs(Y,{sx:{width:Xwe,flexShrink:0,height:"100%",backgroundColor:"rgba(10, 10, 10, 0.95)",borderRight:"1px solid rgba(0, 229, 255, 0.3)",display:"flex",flexDirection:"column",overflow:"hidden"},children:[g.jsxs(Y,{sx:{overflow:"auto",flex:1},children:[g.jsxs(Y,{sx:{p:2,textAlign:"center"},children:[g.jsxs(Y,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:1},children:[g.jsx(nC,{sx:{color:"primary.main",mr:1,fontSize:28}}),g.jsx(Z,{variant:"h6",sx:{color:"primary.main",fontWeight:"bold"},children:"UHT Factory"})]}),g.jsx(Z,{variant:"body2",sx:{color:"text.secondary",fontSize:"0.75rem"},children:"Universal Hex Taxonomy"}),g.jsx(Z,{variant:"body2",sx:{color:"text.secondary",fontSize:"0.75rem"},children:"Classification System"})]}),g.jsx(bs,{sx:{borderColor:"rgba(0, 229, 255, 0.3)"}}),g.jsx(Tp,{sx:{px:1,py:2},children:s.map(l=>g.jsx(Cf,{disablePadding:!0,sx:{mb:1},children:g.jsxs(mb,{selected:a(l.path),onClick:()=>o(l.path),sx:{borderRadius:2,minHeight:48,"&.Mui-selected":{backgroundColor:"rgba(0, 229, 255, 0.15)","&:hover":{backgroundColor:"rgba(0, 229, 255, 0.2)"}},"&:hover":{backgroundColor:"rgba(255, 255, 255, 0.05)"}},children:[g.jsx(gf,{sx:{color:a(l.path)?"primary.main":"text.secondary",minWidth:40},children:l.icon}),g.jsx(Ba,{primary:l.label,secondary:l.description,primaryTypographyProps:{fontSize:"0.9rem",fontWeight:a(l.path)?600:400,color:a(l.path)?"primary.main":"text.primary"},secondaryTypographyProps:{fontSize:"0.75rem",color:"text.secondary"}})]})},l.path))}),g.jsx(bs,{sx:{borderColor:"rgba(0, 229, 255, 0.3)",mx:2}}),g.jsxs(Y,{sx:{p:2},children:[g.jsx(Z,{variant:"subtitle2",sx:{color:"text.secondary",mb:2},children:"System Status"}),g.jsxs(Y,{sx:{mb:2},children:[g.jsxs(Y,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[g.jsx(Z,{variant:"body2",sx:{color:"text.secondary",fontSize:"0.8rem"},children:"Graph Nodes"}),g.jsx(Dt,{label:r.graphData.nodes.length,size:"small",color:"primary",sx:{fontSize:"0.7rem"}})]}),g.jsxs(Y,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[g.jsx(Z,{variant:"body2",sx:{color:"text.secondary",fontSize:"0.8rem"},children:"Selected Entity"}),g.jsx(Dt,{label:r.selectedEntity?"1":"0",size:"small",color:r.selectedEntity?"secondary":"default",sx:{fontSize:"0.7rem"}})]})]}),g.jsxs(Y,{children:[g.jsx(Z,{variant:"body2",sx:{color:"text.secondary",fontSize:"0.8rem",mb:1},children:"Current View"}),g.jsx(Dt,{label:r.currentView,size:"small",variant:"outlined",color:"primary",sx:{fontSize:"0.7rem",textTransform:"capitalize"}})]})]})]}),g.jsx(Y,{sx:{p:2,textAlign:"center",borderTop:"1px solid rgba(0, 229, 255, 0.1)"},children:g.jsx(Z,{variant:"caption",sx:{color:"text.disabled",fontSize:"0.7rem"},children:"Powered by GPT-4o mini"})})]})}const Ki={Physical:"#FF6B35",Functional:"#00E5FF",Abstract:"#9C27B0",Social:"#4CAF50"},Kwe={Physical:"Material existence and tangible properties (Bits 1-8)",Functional:"Operational capabilities and purpose (Bits 9-16)",Abstract:"Conceptual and symbolic properties (Bits 17-24)",Social:"Cultural and collective aspects (Bits 25-32)"},_$="",Zwe=({trait:t,onUploadImage:e})=>g.jsxs(xi,{sx:{height:"100%",display:"flex",flexDirection:"column",border:`2px solid ${Ki[t.layer]}`,"&:hover":{boxShadow:`0 8px 24px ${Ki[t.layer]}20`,transform:"translateY(-2px)"},transition:"all 0.3s ease"},children:[g.jsxs(yi,{sx:{flexGrow:1,pb:1},children:[g.jsxs(Y,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",mb:2},children:[g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:1},children:[g.jsx(Dt,{label:`Bit ${t.bit}`,size:"small",sx:{backgroundColor:Ki[t.layer],color:"white",fontWeight:"bold",fontSize:"0.7rem"}}),g.jsx(Dt,{label:t.layer,size:"small",variant:"outlined",sx:{borderColor:Ki[t.layer],color:Ki[t.layer],fontSize:"0.7rem"}})]}),g.jsx(Jt,{title:"View canonical definition",children:g.jsx(Gt,{size:"small",onClick:()=>window.open(t.url,"_blank"),sx:{color:"text.secondary"},children:g.jsx(bZ,{fontSize:"small"})})})]}),g.jsx(Z,{variant:"h6",component:"h3",sx:{fontWeight:"bold",mb:1,color:Ki[t.layer],fontSize:"1rem"},children:t.name}),g.jsx(Z,{variant:"body2",sx:{color:"text.secondary",mb:2,lineHeight:1.4},children:t.short_description}),g.jsx(Z,{variant:"body2",sx:{color:"text.primary",fontSize:"0.85rem",lineHeight:1.4},children:t.expanded_definition})]}),g.jsx(Z0e,{sx:{pt:0,px:2,pb:2},children:g.jsx(un,{variant:"outlined",startIcon:g.jsx(TZ,{}),onClick:()=>e(t),sx:{borderColor:Ki[t.layer],color:Ki[t.layer],"&:hover":{borderColor:Ki[t.layer],backgroundColor:`${Ki[t.layer]}10`}},fullWidth:!0,children:"Upload Example Image"})})]}),Qwe=({trait:t,open:e,onClose:n,onUpload:r})=>{const[i,s]=w.useState(null),[a,o]=w.useState(!1),l=w.useRef(null),c=p=>{const m=p.target.files?.[0];m&&s(m)},u=async()=>{if(t&&i){o(!0);try{await r(t,i),s(null),n()}catch(p){console.error("Upload failed:",p)}finally{o(!1)}}},f=()=>{a||(s(null),n())};return t?g.jsxs(Bf,{open:e,onClose:f,maxWidth:"sm",fullWidth:!0,children:[g.jsxs(wp,{sx:{display:"flex",alignItems:"center",gap:1,borderBottom:`2px solid ${Ki[t.layer]}`},children:[g.jsx(o0,{sx:{color:Ki[t.layer]}}),'Upload Example for "',t.name,'"']}),g.jsxs(Ff,{sx:{pt:3},children:[g.jsxs(Z,{variant:"body2",sx:{mb:3,color:"text.secondary"},children:['Upload an image that exemplifies the "',t.name,'" trait. This will help users understand this canonical trait better.']}),g.jsx("input",{ref:l,type:"file",accept:"image/*",onChange:c,style:{display:"none"}}),g.jsx(un,{variant:"outlined",startIcon:g.jsx(Ewe,{}),onClick:()=>l.current?.click(),fullWidth:!0,sx:{mb:2},children:"Choose Image File"}),i&&g.jsxs(Y,{sx:{p:2,border:"1px dashed rgba(0, 229, 255, 0.5)",borderRadius:1,display:"flex",alignItems:"center",gap:2},children:[g.jsx(S_,{color:"success"}),g.jsxs(Y,{children:[g.jsx(Z,{variant:"body2",sx:{fontWeight:"bold"},children:i.name}),g.jsxs(Z,{variant:"caption",color:"text.secondary",children:[(i.size/1024/1024).toFixed(2)," MB"]})]})]}),a&&g.jsxs(Y,{sx:{mt:2},children:[g.jsx(Z,{variant:"body2",sx:{mb:1},children:"Uploading image..."}),g.jsx(gk,{})]})]}),g.jsxs(i0,{children:[g.jsx(un,{onClick:f,disabled:a,children:"Cancel"}),g.jsx(un,{onClick:u,disabled:!i||a,variant:"contained",sx:{backgroundColor:Ki[t.layer],"&:hover":{backgroundColor:Ki[t.layer],filter:"brightness(0.9)"}},children:"Upload"})]})]}):null};function Jwe(){const{isMobile:t,isTablet:e}=tc(),n=t||e,[r,i]=w.useState([]),[s,a]=w.useState(!0),[o,l]=w.useState(null),[c,u]=w.useState(""),[f,p]=w.useState(!1),[m,x]=w.useState(null),b=async()=>{try{a(!0);const T=await fetch(`${_$}/api/v1/traits/`);if(!T.ok)throw new Error(`Failed to fetch traits: ${T.statusText}`);const A=await T.json(),C=[];Object.values(A.layers).forEach(M=>{C.push(...M)}),C.sort((M,P)=>M.bit-P.bit),i(C),l(null)}catch(T){console.error("Traits fetch error:",T),l(T instanceof Error?T.message:"Failed to load traits")}finally{a(!1)}};w.useEffect(()=>{b()},[]);const v=c?r.filter(T=>T.layer===c):r,_=T=>{x(T),p(!0)},E=async(T,A)=>{const C=new FormData;C.append("image",A),C.append("trait_bit",T.bit.toString()),C.append("description",`Example image for ${T.name} trait`);const M=await fetch(`${_$}/api/v1/images/upload-trait-example`,{method:"POST",body:C});if(!M.ok)throw new Error(`Upload failed: ${M.statusText}`);console.log("Image uploaded successfully")};return o?g.jsx(Y,{sx:{p:3},children:g.jsx(mi,{severity:"error",sx:{mb:2},children:o})}):g.jsxs(Y,{sx:{p:n?1.5:3,height:"100%",overflow:"auto"},children:[g.jsxs(Y,{sx:{mb:n?2:3,display:"flex",alignItems:n?"flex-start":"center",justifyContent:"space-between",flexDirection:n?"column":"row",gap:n?2:0},children:[g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:n?1:2},children:[g.jsx(yb,{sx:{fontSize:n?24:32,color:"primary.main"}}),g.jsxs(Y,{children:[g.jsx(Z,{variant:n?"h6":"h4",sx:{fontWeight:"bold",color:"primary.main"},children:"Canonical Traits"}),!n&&g.jsx(Z,{variant:"body2",color:"text.secondary",children:"The 32 fundamental traits that define the Universal Hex Taxonomy"})]})]}),g.jsxs(Tf,{size:"small",sx:{minWidth:n?140:200},children:[g.jsx(dp,{sx:{fontSize:n?"0.8rem":"1rem"},children:n?"Layer":"Filter by Layer"}),g.jsxs(Ku,{value:c,label:n?"Layer":"Filter by Layer",onChange:T=>u(T.target.value),sx:{fontSize:n?"0.85rem":"1rem"},children:[g.jsxs(nr,{value:"",children:["All (",r.length,")"]}),Object.keys(Ki).map(T=>g.jsx(nr,{value:T,children:g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:1},children:[g.jsx(Y,{sx:{width:12,height:12,borderRadius:"50%",backgroundColor:Ki[T]}}),n?T:`${T} (${r.filter(A=>A.layer===T).length})`]})},T))]})]})]}),!c&&g.jsxs(Y,{sx:{mb:n?2:3},children:[!n&&g.jsx(Z,{variant:"h6",sx:{mb:2,color:"text.primary"},children:"Layers Overview"}),g.jsx(Fn,{container:!0,spacing:n?1:2,children:Object.entries(Kwe).map(([T,A])=>g.jsx(Fn,{size:{xs:6,sm:6,md:3},children:g.jsx(xi,{sx:{border:`2px solid ${Ki[T]}`,backgroundColor:`${Ki[T]}10`},children:g.jsxs(yi,{sx:{p:n?1:2},children:[g.jsx(Z,{variant:n?"body2":"subtitle1",sx:{fontWeight:"bold",color:Ki[T],mb:n?0:1},children:T}),!n&&g.jsx(Z,{variant:"body2",color:"text.secondary",children:A})]})})},T))})]}),s?g.jsx(Y,{sx:{display:"flex",justifyContent:"center",py:4},children:g.jsx(Z,{children:"Loading traits..."})}):g.jsx(Fn,{container:!0,spacing:n?1.5:3,children:v.map(T=>g.jsx(Fn,{size:{xs:12,sm:6,md:4,lg:3},children:g.jsx(Zwe,{trait:T,onUploadImage:_})},T.bit))}),g.jsx(Qwe,{trait:m,open:f,onClose:()=>p(!1),onUpload:E})]})}const qs={Physical:"#FF6B35",Functional:"#00E5FF",Abstract:"#9C27B0",Social:"#4CAF50"},S$={rare_trait:{bg:"#FFD70010",border:"#FFD700",text:"#FFD700"},cross_layer_correlation:{bg:"#E040FB10",border:"#E040FB",text:"#E040FB"},layer_pattern:{bg:"#00BCD410",border:"#00BCD4",text:"#00BCD4"},distribution_edge:{bg:"#FF572210",border:"#FF5722",text:"#FF5722"}},eTe={rare_trait:"Rare Trait",cross_layer_correlation:"Cross-Layer",layer_pattern:"Layer Pattern",distribution_edge:"Distribution Edge"},tTe="",nTe=({metaClass:t})=>g.jsx(xi,{sx:{height:"100%",display:"flex",flexDirection:"column",border:`2px solid ${qs[t.layer]}`,background:`linear-gradient(135deg, ${qs[t.layer]}08 0%, transparent 100%)`,"&:hover":{boxShadow:`0 8px 24px ${qs[t.layer]}30`,transform:"translateY(-2px)"},transition:"all 0.3s ease"},children:g.jsxs(yi,{sx:{flexGrow:1},children:[g.jsxs(Y,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[g.jsx(Y,{sx:{display:"flex",alignItems:"center",gap:1},children:g.jsx(Dt,{label:t.hex,size:"small",sx:{backgroundColor:qs[t.layer],color:"white",fontWeight:"bold",fontSize:"0.9rem",fontFamily:"monospace"}})}),g.jsx(Dt,{label:`${t.frequency_percent.toFixed(1)}%`,size:"small",sx:{backgroundColor:"rgba(255, 255, 255, 0.1)",color:"text.secondary",fontWeight:"bold",fontSize:"0.75rem"}})]}),g.jsx(Z,{variant:"h6",sx:{fontWeight:"bold",mb:1,color:qs[t.layer],fontSize:"1rem"},children:t.name}),g.jsx(Z,{variant:"body2",sx:{color:"text.secondary",mb:2,lineHeight:1.5,fontSize:"0.8rem",minHeight:60},children:t.description}),g.jsxs(Y,{sx:{mb:1.5},children:[g.jsxs(Z,{variant:"caption",sx:{color:"text.secondary",display:"block",mb:.5},children:["Binary: ",g.jsx("code",{style:{color:qs[t.layer]},children:t.binary})]}),g.jsxs(Z,{variant:"caption",sx:{color:"text.secondary"},children:["Entities: ",g.jsx("strong",{children:t.entity_count.toLocaleString()})]})]}),t.trait_names.length>0&&g.jsxs(Y,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:[t.trait_names.slice(0,4).map((e,n)=>g.jsx(Dt,{label:e,size:"small",sx:{fontSize:"0.6rem",height:18,backgroundColor:`${qs[t.layer]}20`,color:qs[t.layer],border:`1px solid ${qs[t.layer]}40`}},n)),t.trait_names.length>4&&g.jsx(Dt,{label:`+${t.trait_names.length-4}`,size:"small",sx:{fontSize:"0.6rem",height:18,backgroundColor:"rgba(255,255,255,0.1)",color:"text.secondary"}})]}),t.trait_names.length===0&&g.jsx(Z,{variant:"caption",sx:{color:"text.disabled",fontStyle:"italic"},children:"No traits active"})]})}),rTe=({metaClass:t})=>g.jsx(xi,{sx:{height:"100%",display:"flex",flexDirection:"column",border:"2px solid",borderImage:"linear-gradient(135deg, #FF6B35, #00E5FF, #9C27B0, #4CAF50) 1",background:"linear-gradient(135deg, rgba(255,107,53,0.05) 0%, rgba(0,229,255,0.05) 25%, rgba(156,39,176,0.05) 50%, rgba(76,175,80,0.05) 75%, transparent 100%)","&:hover":{boxShadow:"0 8px 24px rgba(0, 229, 255, 0.3)",transform:"translateY(-2px)"},transition:"all 0.3s ease"},children:g.jsxs(yi,{sx:{flexGrow:1},children:[g.jsxs(Y,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[g.jsx(Dt,{label:t.uht_code,size:"small",sx:{background:"linear-gradient(90deg, #FF6B35, #00E5FF, #9C27B0, #4CAF50)",color:"white",fontWeight:"bold",fontSize:"0.85rem",fontFamily:"monospace",letterSpacing:1}}),g.jsx(Dt,{label:`${t.frequency_percent.toFixed(1)}%`,size:"small",sx:{backgroundColor:"rgba(255, 255, 255, 0.1)",color:"text.secondary",fontWeight:"bold",fontSize:"0.75rem"}})]}),g.jsx(Z,{variant:"h6",sx:{fontWeight:"bold",mb:1,color:"primary.main",fontSize:"1rem"},children:t.name}),g.jsx(Z,{variant:"body2",sx:{color:"text.secondary",mb:2,lineHeight:1.5,fontSize:"0.8rem",minHeight:40},children:t.description}),g.jsxs(Z,{variant:"caption",sx:{color:"text.secondary",display:"block",mb:1},children:["Entities: ",g.jsx("strong",{children:t.entity_count.toLocaleString()})]}),g.jsx(Y,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:Object.entries(t.layers).map(([e,n])=>g.jsx(Jt,{title:n.traits.join(", ")||"No traits",children:g.jsx(Dt,{label:n.hex,size:"small",sx:{fontSize:"0.65rem",height:18,fontFamily:"monospace",backgroundColor:`${qs[e.charAt(0).toUpperCase()+e.slice(1)]}30`,color:qs[e.charAt(0).toUpperCase()+e.slice(1)],border:`1px solid ${qs[e.charAt(0).toUpperCase()+e.slice(1)]}60`}})},e))})]})}),iTe=({metaClass:t})=>{const e=S$[t.type]||S$.rare_trait,n=eTe[t.type]||t.type;return g.jsx(xi,{sx:{height:"100%",display:"flex",flexDirection:"column",border:`2px solid ${e.border}`,background:e.bg,"&:hover":{boxShadow:`0 8px 24px ${e.border}40`,transform:"translateY(-2px)"},transition:"all 0.3s ease"},children:g.jsxs(yi,{sx:{flexGrow:1},children:[g.jsxs(Y,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[g.jsx(Dt,{label:n,size:"small",sx:{backgroundColor:`${e.border}30`,color:e.text,fontWeight:"bold",fontSize:"0.7rem",border:`1px solid ${e.border}`}}),g.jsx(Dt,{label:`${t.entity_count.toLocaleString()} entities`,size:"small",sx:{backgroundColor:"rgba(255, 255, 255, 0.1)",color:"text.secondary",fontSize:"0.7rem"}})]}),g.jsx(Z,{variant:"h6",sx:{fontWeight:"bold",mb:1,color:e.text,fontSize:"1rem"},children:t.name}),g.jsx(Z,{variant:"body2",sx:{color:"text.secondary",mb:2,lineHeight:1.5,fontSize:"0.8rem",minHeight:50},children:t.description}),t.defining_traits.length>0&&g.jsxs(Y,{sx:{mb:1.5},children:[g.jsx(Z,{variant:"caption",sx:{color:"text.secondary",display:"block",mb:.5},children:"Defining Traits:"}),g.jsx(Y,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:t.defining_traits.map((r,i)=>g.jsx(Dt,{label:r,size:"small",sx:{fontSize:"0.6rem",height:18,backgroundColor:`${e.border}25`,color:e.text,border:`1px solid ${e.border}50`}},i))})]}),t.anti_traits&&t.anti_traits.length>0&&g.jsxs(Y,{sx:{mb:1.5},children:[g.jsx(Z,{variant:"caption",sx:{color:"text.secondary",display:"block",mb:.5},children:"Anti-Traits (absent):"}),g.jsx(Y,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:t.anti_traits.map((r,i)=>g.jsx(Dt,{label:r,size:"small",sx:{fontSize:"0.6rem",height:18,backgroundColor:"rgba(255, 82, 82, 0.15)",color:"#FF5252",border:"1px solid rgba(255, 82, 82, 0.3)",textDecoration:"line-through"}},i))})]}),g.jsxs(Y,{sx:{mb:1.5},children:[g.jsx(Z,{variant:"caption",sx:{color:"text.secondary",display:"block",mb:.5},children:"Examples:"}),g.jsxs(Z,{variant:"caption",sx:{color:"text.primary",fontStyle:"italic"},children:[t.examples.slice(0,3).join(", "),t.examples.length>3&&` +${t.examples.length-3} more`]})]}),g.jsx(bs,{sx:{my:1.5,borderColor:`${e.border}30`}}),g.jsxs(Y,{sx:{display:"flex",alignItems:"flex-start",gap:1},children:[g.jsx(jwe,{sx:{fontSize:16,color:e.text,mt:.3}}),g.jsx(Z,{variant:"caption",sx:{color:e.text,fontWeight:500,lineHeight:1.4,fontSize:"0.75rem"},children:t.insight})]})]})})};function sTe(){const[t,e]=w.useState([]),[n,r]=w.useState([]),[i,s]=w.useState([]),[a,o]=w.useState(!0),[l,c]=w.useState(null),u=async()=>{try{o(!0);const p=await fetch(`${tTe}/api/v1/traits/meta-classes`);if(!p.ok)throw new Error(`Failed to fetch meta-classes: ${p.statusText}`);const m=await p.json();e(m.meta_classes),r(m.cross_domain||[]),s(m.emergent||[]),c(null)}catch(p){console.error("Meta-classes fetch error:",p),c(p instanceof Error?p.message:"Failed to load meta-classes")}finally{o(!1)}};w.useEffect(()=>{u()},[]);const f=p=>t.filter(m=>m.layer===p).sort((m,x)=>x.frequency_percent-m.frequency_percent).slice(0,8);return l?g.jsx(Y,{sx:{p:3},children:g.jsx(mi,{severity:"error",children:l})}):g.jsxs(Y,{sx:{p:3,height:"100%",overflow:"auto"},children:[g.jsxs(Y,{sx:{mb:4},children:[g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:2,mb:1},children:[g.jsx(JT,{sx:{fontSize:32,color:"primary.main"}}),g.jsx(Z,{variant:"h4",sx:{fontWeight:"bold",color:"primary.main"},children:"Meta-Classes"}),g.jsx(Jt,{title:"Meta-classes are emergent archetypes representing frequently occurring trait combination patterns across classified entities. They help identify common entity types in the taxonomy.",children:g.jsx(Gt,{size:"small",sx:{color:"text.secondary"},children:g.jsx(bZ,{})})})]}),g.jsx(Z,{variant:"body2",color:"text.secondary",children:"Emergent archetypes from frequently occurring trait combinations (patterns above 5% frequency)"})]}),a?g.jsx(Y,{sx:{display:"flex",justifyContent:"center",alignItems:"center",py:8},children:g.jsx(lr,{})}):g.jsxs(g.Fragment,{children:[n.length>0&&g.jsxs(Y,{sx:{mb:5},children:[g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:[g.jsx(nC,{sx:{color:"primary.main"}}),g.jsx(Z,{variant:"h5",sx:{fontWeight:"bold",color:"primary.main"},children:"Cross-Domain Archetypes"}),g.jsx(Dt,{label:n.length,size:"small",sx:{backgroundColor:"rgba(0, 229, 255, 0.2)",color:"primary.main",fontWeight:"bold"}})]}),g.jsx(Z,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Complete 32-bit UHT patterns that occur frequently across all four layers"}),g.jsx(Fn,{container:!0,spacing:2,children:n.slice(0,8).map(p=>g.jsx(Fn,{size:{xs:12,sm:6,md:4,lg:3},children:g.jsx(rTe,{metaClass:p})},p.id))}),g.jsx(bs,{sx:{mt:4,borderColor:"rgba(0, 229, 255, 0.2)"}})]}),i.length>0&&g.jsxs(Y,{sx:{mb:5},children:[g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:[g.jsx(a0,{sx:{color:"#FFD700"}}),g.jsx(Z,{variant:"h5",sx:{fontWeight:"bold",color:"#FFD700"},children:"Emergent Patterns"}),g.jsx(Dt,{label:i.length,size:"small",sx:{backgroundColor:"rgba(255, 215, 0, 0.2)",color:"#FFD700",fontWeight:"bold"}})]}),g.jsx(Z,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Discovered patterns from graph analysis: rare traits, cross-layer correlations, and distribution edges"}),g.jsx(Fn,{container:!0,spacing:2,children:i.map(p=>g.jsx(Fn,{size:{xs:12,sm:6,md:4,lg:3},children:g.jsx(iTe,{metaClass:p})},p.id))}),g.jsx(bs,{sx:{mt:4,borderColor:"rgba(255, 215, 0, 0.2)"}})]}),["Physical","Functional","Abstract","Social"].map(p=>{const m=f(p);return m.length===0?null:g.jsxs(Y,{sx:{mb:5},children:[g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:[g.jsx(Y,{sx:{width:24,height:24,borderRadius:"50%",backgroundColor:qs[p],display:"flex",alignItems:"center",justifyContent:"center"},children:g.jsx(Z,{sx:{color:"white",fontWeight:"bold",fontSize:"0.7rem"},children:p.charAt(0)})}),g.jsxs(Z,{variant:"h5",sx:{fontWeight:"bold",color:qs[p]},children:[p," Layer"]}),g.jsx(Dt,{label:`Top ${m.length}`,size:"small",sx:{backgroundColor:`${qs[p]}20`,color:qs[p],fontWeight:"bold"}})]}),g.jsx(Fn,{container:!0,spacing:2,children:m.map(x=>g.jsx(Fn,{size:{xs:12,sm:6,md:4,lg:3},children:g.jsx(nTe,{metaClass:x})},x.id))})]},p)})]})]})}function aTe(){const{state:t,actions:e}=YE(),{isMobile:n,isTablet:r}=tc(),i=n||r,[s,a]=w.useState(""),[o,l]=w.useState(""),[c,u]=w.useState(""),[f,p]=w.useState(null),[m,x]=w.useState(null),[b,v]=w.useState(!0),[_,E]=w.useState(!0),[T,A]=w.useState(null),C=async()=>{if(s.length<3){e.setError("Please enter at least 3 characters");return}try{e.setLoading({preprocess:!0});const[D,N]=await Promise.all([Hv.preprocess.preprocessEntity(s),Hv.preprocess.checkDuplicate(s)]);p(D),x(N)}catch(D){console.error("Pre-processing failed:",D),e.setError("Pre-processing failed")}finally{e.setLoading({preprocess:!1})}},M=()=>{f&&(a(f.suggested_name),l(f.suggested_description),u(f.additional_context))},P=async()=>{if(!s.trim()){e.setError("Please enter an entity name");return}try{e.setLoading({classification:!0}),e.clearError();const D={entity:{name:s.trim(),description:o.trim()||void 0,context:c.trim()||void 0},use_cache:!1,detailed:!0,generate_image:b,generate_embedding:_},N=await Hv.classification.classifyEntity(D),L=N.entity||N.data||N;A(L),e.setSelectedEntity(L),e.addEntityToGraph(L),e.setError(void 0)}catch(D){console.error("Classification failed:",D),e.setError(D.response?.data?.detail||"Classification failed")}finally{e.setLoading({classification:!1})}};return g.jsx(Y,{sx:{height:"100%",overflow:"auto",p:i?1.5:3},children:g.jsxs(Fn,{container:!0,spacing:i?2:3,children:[g.jsx(Fn,{size:{xs:12,md:6},children:g.jsx(xi,{children:g.jsxs(yi,{sx:{p:i?2:3},children:[g.jsxs(Z,{variant:i?"subtitle1":"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",fontWeight:600},children:[g.jsx(yb,{sx:{mr:1,color:"primary.main",fontSize:i?20:24}}),i?"Classification":"Entity Classification"]}),g.jsx(wi,{fullWidth:!0,label:"Entity Name",value:s,onChange:D=>a(D.target.value),placeholder:"e.g., smartphone, democracy...",sx:{mb:2,"& .MuiOutlinedInput-root":{minHeight:i?48:"auto"}}}),g.jsx(un,{fullWidth:!0,variant:"outlined",onClick:C,disabled:s.length<3||t.loading.preprocess,sx:{mb:2,minHeight:i?48:42},startIcon:t.loading.preprocess?g.jsx(lr,{size:20}):g.jsx(a0,{}),children:t.loading.preprocess?"Analyzing...":i?"AI Enhance":"AI Enhancement & Duplicate Check"}),f&&g.jsxs(gn,{sx:{p:i?1.5:2,mb:2,bgcolor:"rgba(0, 229, 255, 0.05)"},children:[g.jsxs(Y,{sx:{display:"flex",alignItems:"center",mb:1,flexWrap:"wrap",gap:1},children:[g.jsx(a0,{sx:{color:"primary.main",fontSize:20}}),g.jsx(Z,{variant:"subtitle2",color:"primary",sx:{flex:1},children:i?"Suggestions":"AI Enhancement Suggestions"}),g.jsx(Dt,{label:`${Math.round(f.confidence*100)}%`,size:"small",color:"primary"})]}),f.suggested_name!==s&&g.jsxs(mi,{severity:"info",sx:{mb:1,py:0,fontSize:i?"0.8rem":"0.875rem"},children:[g.jsx("strong",{children:"Suggested:"})," ",f.suggested_name]}),g.jsx(un,{size:"small",variant:"outlined",onClick:M,sx:{mt:1,minHeight:i?40:32},children:"Apply Suggestions"})]}),m&&m.exists&&g.jsxs(mi,{severity:"warning",sx:{mb:2,fontSize:i?"0.8rem":"0.875rem"},children:[g.jsx("strong",{children:"Similar found:"})," ",m.existing_entity?.name,g.jsx("br",{}),g.jsx(Z,{variant:"caption",sx:{fontFamily:"monospace"},children:m.existing_entity?.uht_code})]}),g.jsx(wi,{fullWidth:!0,label:"Description (Optional)",value:o,onChange:D=>l(D.target.value),multiline:!0,minRows:i?2:3,placeholder:"Detailed description...",sx:{mb:2}}),g.jsx(wi,{fullWidth:!0,label:"Context (Optional)",value:c,onChange:D=>u(D.target.value),multiline:!0,minRows:1,placeholder:"Additional context...",sx:{mb:2}}),g.jsxs(Y,{sx:{mb:2,display:"flex",flexDirection:i?"column":"row",gap:1},children:[g.jsx(Ef,{control:g.jsx(kg,{checked:b,onChange:D=>v(D.target.checked),color:"primary"}),label:g.jsx(Z,{variant:"body2",children:"Generate Image"}),sx:{minHeight:i?44:"auto"}}),g.jsx(Ef,{control:g.jsx(kg,{checked:_,onChange:D=>E(D.target.checked),color:"primary"}),label:g.jsx(Z,{variant:"body2",children:"Embeddings"}),sx:{minHeight:i?44:"auto"}})]}),g.jsx(un,{fullWidth:!0,variant:"contained",onClick:P,disabled:!s.trim()||t.loading.classification,sx:{minHeight:i?52:48,fontSize:i?"1rem":"0.875rem"},children:t.loading.classification?g.jsx(lr,{size:24,color:"inherit"}):"Classify Entity"})]})})}),g.jsx(Fn,{size:{xs:12,md:6},children:T?g.jsx(lTe,{entity:T,isCompact:i}):g.jsx(xi,{children:g.jsxs(yi,{sx:{textAlign:"center",py:i?4:8},children:[g.jsx(yb,{sx:{fontSize:i?48:64,color:"text.disabled",mb:2}}),g.jsx(Z,{variant:i?"subtitle1":"h6",color:"text.secondary",gutterBottom:!0,children:"Ready for Classification"}),g.jsx(Z,{variant:"body2",color:"text.disabled",children:i?"Enter an entity to classify":'Enter an entity name and click "Classify Entity" to see the results'})]})})})]})})}const oTe={Physical:"#FF6B35",Functional:"#00E5FF",Abstract:"#9C27B0",Social:"#4CAF50"},lTe=w.memo(function({entity:e,isCompact:n=!1}){const r=e.trait_evaluations?.filter(o=>o.applicable)||[],i=e.embedding&&e.embedding.length>0,a=(o=>o?(o.startsWith("data:")||o.startsWith("http://")||o.startsWith("https://"),o):null)(e.image_url);return g.jsx(xi,{children:g.jsxs(yi,{sx:{p:n?2:3},children:[g.jsxs(Y,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:[g.jsxs(Z,{variant:n?"subtitle1":"h6",sx:{display:"flex",alignItems:"center",fontWeight:600},children:[g.jsx(S_,{sx:{mr:1,color:"success.main",fontSize:n?20:24}}),n?"Results":"Classification Results"]}),e.uuid&&g.jsx(Jt,{title:"Open entity details",children:g.jsx(Gt,{size:"small",onClick:()=>window.location.href=`/entity/${e.uuid}`,sx:{color:"primary.main","&:hover":{bgcolor:"primary.main",color:"white"}},children:g.jsx(Yf,{fontSize:"small"})})})]}),g.jsx(Y,{sx:{mb:n?2:3,p:n?1.5:2,bgcolor:"background.default",borderRadius:2},children:g.jsxs(Y,{sx:{display:"flex",flexDirection:n?"column":"row",gap:2},children:[a?g.jsx(Y,{component:"img",src:a,alt:e.name,sx:{width:n?"100%":120,height:n?160:120,objectFit:"cover",borderRadius:2,border:"2px solid",borderColor:"primary.main",flexShrink:0}}):g.jsx(Y,{sx:{width:n?"100%":120,height:n?160:120,borderRadius:2,border:"2px dashed",borderColor:"divider",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"action.hover",flexShrink:0},children:g.jsx(o0,{sx:{fontSize:40,color:"text.disabled"}})}),g.jsxs(Y,{sx:{flex:1},children:[g.jsx(Z,{variant:n?"h6":"h5",gutterBottom:!0,children:e.name}),g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[g.jsx(Z,{variant:n?"h5":"h4",color:"primary.main",sx:{fontFamily:"monospace",fontSize:n?"1.5rem":"2rem"},children:e.uht_code}),a&&g.jsx(Jt,{title:"Has generated image",children:g.jsx(o0,{sx:{fontSize:18,color:"#E91E63"}})}),i&&g.jsx(Jt,{title:`Has embedding (${e.embedding?.length} dimensions)`,children:g.jsx(nC,{sx:{fontSize:18,color:"#00BCD4"}})})]}),g.jsx(Z,{variant:"body2",color:"text.secondary",sx:{fontSize:n?"0.8rem":"0.875rem"},children:e.description})]})]})}),g.jsx(Z,{variant:n?"body1":"subtitle1",gutterBottom:!0,sx:{fontWeight:600},children:"Layer Analysis"}),g.jsx(Fn,{container:!0,spacing:n?1:2,sx:{mb:n?2:3},children:Object.entries(e.layers||{}).map(([o,l])=>{const u=parseInt(l,16).toString(2).padStart(8,"0").split("1").length-1;return g.jsx(Fn,{size:{xs:6,sm:3},children:g.jsxs(gn,{sx:{p:n?1:1.5,textAlign:"center",bgcolor:"background.default"},children:[g.jsx(Z,{variant:n?"caption":"subtitle2",sx:{color:oTe[o],fontWeight:600},children:n?o.slice(0,4):o}),g.jsx(Z,{variant:n?"body1":"h6",sx:{fontFamily:"monospace"},children:l}),g.jsxs(Z,{variant:"caption",color:"text.secondary",children:[u,"/8"]})]})},o)})}),g.jsxs(kpe,{defaultExpanded:!n,children:[g.jsx(ame,{expandIcon:g.jsx(gx,{}),sx:{minHeight:n?44:48},children:g.jsxs(Z,{variant:n?"body2":"subtitle1",sx:{fontWeight:600},children:["Active Traits (",r.length,")"]})}),g.jsx(jpe,{sx:{pt:0},children:g.jsx(Y,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:r.map(o=>g.jsx(Dt,{label:n?`${o.trait_bit}`:`${o.trait_bit}. ${o.trait_name}`,color:"primary",variant:"outlined",size:"small",sx:{fontSize:n?"0.7rem":"0.75rem"},title:o.trait_name},o.trait_bit))})})]}),g.jsxs(Y,{sx:{mt:2,p:n?1.5:2,bgcolor:"background.default",borderRadius:1},children:[g.jsx(Z,{variant:"caption",display:"block",color:"text.secondary",children:n?`${e.processing_time_ms?.toFixed(0)}ms`:`Processing time: ${e.processing_time_ms?.toFixed(1)}ms`}),!n&&g.jsxs(Z,{variant:"caption",display:"block",color:"text.secondary",children:["UUID: ",e.uuid]}),g.jsx(Z,{variant:"caption",display:"block",color:"text.secondary",children:new Date(e.created_at).toLocaleString()})]})]})})});function cTe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function uTe(t,e,n){return e=yTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w$(t,e){return hTe(t)||cTe(t,e)||MZ(t,e)||gTe()}function dTe(t){return fTe(t)||pTe(t)||MZ(t)||mTe()}function fTe(t){if(Array.isArray(t))return MD(t)}function hTe(t){if(Array.isArray(t))return t}function pTe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function MZ(t,e){if(t){if(typeof t=="string")return MD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MD(t,e)}}function MD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function mTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xTe(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yTe(t){var e=xTe(t,"string");return typeof e=="symbol"?e:String(e)}var vTe=function(e,n){var r=new Set(n);return Object.assign.apply(Object,[{}].concat(dTe(Object.entries(e).filter(function(i){var s=w$(i,1),a=s[0];return!r.has(a)}).map(function(i){var s=w$(i,2),a=s[0],o=s[1];return uTe({},a,o)}))))};function RD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function bTe(t){if(Array.isArray(t))return t}function _Te(t){if(Array.isArray(t))return RD(t)}function STe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function wTe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function TTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ETe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CTe(t,e){return bTe(t)||wTe(t,e)||RZ(t,e)||TTe()}function T$(t){return _Te(t)||STe(t)||RZ(t)||ETe()}function RZ(t,e){if(t){if(typeof t=="string")return RD(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?RD(t,e):void 0}}function ATe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.wrapperElementType,r=n===void 0?"div":n,i=e.nodeMapper,s=i===void 0?function(u){return u}:i,a=e.methodNames,o=a===void 0?[]:a,l=e.initPropNames,c=l===void 0?[]:l;return w.forwardRef(function(u,f){var p=w.useRef(),m=w.useMemo(function(){var v=Object.fromEntries(c.filter(function(_){return u.hasOwnProperty(_)}).map(function(_){return[_,u[_]]}));return t(v)},[]);E$(function(){m(s(p.current))},w.useLayoutEffect),E$(function(){return m._destructor instanceof Function?m._destructor:void 0});var x=w.useCallback(function(v){for(var _=arguments.length,E=new Array(_>1?_-1:0),T=1;T<_;T++)E[T-1]=arguments[T];return m[v]instanceof Function?m[v].apply(m,E):void 0},[m]),b=w.useRef({});return Object.keys(vTe(u,[].concat(T$(o),T$(c)))).filter(function(v){return b.current[v]!==u[v]}).forEach(function(v){return x(v,u[v])}),b.current=u,w.useImperativeHandle(f,function(){return Object.fromEntries(o.map(function(v){return[v,function(){for(var _=arguments.length,E=new Array(_),T=0;T<_;T++)E[T]=arguments[T];return x.apply(void 0,[v].concat(E))}]}))},[x]),ri.createElement(r,{ref:p})})}function E$(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:w.useEffect,n=w.useRef(),r=w.useRef(!1),i=w.useRef(!1),s=w.useState(0),a=CTe(s,2);a[0];var o=a[1];r.current&&(i.current=!0),e(function(){return r.current||(n.current=t(),r.current=!0),o(function(l){return l+1}),function(){i.current&&n.current&&n.current()}},[])}const Vp="181",Ls={ROTATE:0,DOLLY:1,PAN:2},Gu={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},PZ=0,PD=1,NZ=2,MTe=0,Dk=1,RTe=2,mo=3,wo=0,Sr=1,Zs=2,_a=0,To=1,l0=2,c0=3,u0=4,Ug=5,Qs=100,Lk=101,Ik=102,OZ=103,DZ=104,Ou=200,kk=201,Bk=202,Fk=203,_b=204,Sb=205,Uk=206,jk=207,zk=208,$k=209,Gk=210,PTe=211,NTe=212,OTe=213,DTe=214,wb=0,Tb=1,Eb=2,Uf=3,Cb=4,Ab=5,Mb=6,Rb=7,T_=0,LZ=1,IZ=2,ya=0,kZ=1,BZ=2,FZ=3,UZ=4,LTe=5,jZ=6,zZ=7,Vk=300,Fc=301,Uc=302,d0=303,f0=304,Ap=306,Mp=1e3,ja=1001,Rp=1002,Lr=1003,Hk=1004,Vu=1005,ii=1006,jg=1007,za=1008,si=1009,hp=1010,pp=1011,zl=1012,xs=1013,Ar=1014,Ti=1015,Ci=1016,rC=1017,iC=1018,Eo=1020,sC=35902,aC=35899,Wk=1021,E_=1022,gi=1023,Co=1026,Ao=1027,C_=1028,xx=1029,$l=1030,yx=1031,ITe=1032,vx=1033,Af=33776,Mf=33777,Rf=33778,Pf=33779,Pb=35840,Nb=35841,Ob=35842,Db=35843,h0=36196,p0=37492,m0=37496,g0=37808,x0=37809,y0=37810,v0=37811,b0=37812,_0=37813,S0=37814,w0=37815,T0=37816,E0=37817,C0=37818,A0=37819,M0=37820,R0=37821,P0=36492,ND=36494,OD=36495,N0=36283,O0=36284,D0=36285,L0=36286,kTe=3200,BTe=3201,ud=0,$Z=1,Fa="",ha="srgb",Pp="srgb-linear",I0="linear",Ot="srgb",FTe=0,zh=7680,UTe=7681,jTe=7682,zTe=7683,$Te=34055,GTe=34056,VTe=5386,HTe=512,WTe=513,qTe=514,XTe=515,YTe=516,KTe=517,ZTe=518,DD=519,qk=512,oC=513,Xk=514,lC=515,Yk=516,Kk=517,Zk=518,Qk=519,r2=35044,Cg=35048,C$="300 es",va=2e3,jf=2001,Ac={COMPUTE:"compute",RENDER:"render"};function Jk(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function Lb(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function GZ(){const t=Lb("canvas");return t.style.display="block",t}const A$={};function Ib(...t){const e="THREE."+t.shift();console.log(e,...t)}function ct(...t){const e="THREE."+t.shift();console.warn(e,...t)}function xt(...t){const e="THREE."+t.shift();console.error(e,...t)}function jr(...t){const e=t.join(" ");e in A$||(A$[e]=!0,ct(...t))}function QTe(t,e,n){return new Promise(function(r,i){function s(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:i();break;case t.TIMEOUT_EXPIRED:setTimeout(s,n);break;default:r()}}setTimeout(s,n)})}class Yc{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){const r=this._listeners;return r===void 0?!1:r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){const r=this._listeners;if(r===void 0)return;const i=r[e];if(i!==void 0){const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}dispatchEvent(e){const n=this._listeners;if(n===void 0)return;const r=n[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,a=i.length;s<a;s++)i[s].call(this,e);e.target=null}}}const $s=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let M$=1234567;const Wv=Math.PI/180,Np=180/Math.PI;function Qu(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return($s[t&255]+$s[t>>8&255]+$s[t>>16&255]+$s[t>>24&255]+"-"+$s[e&255]+$s[e>>8&255]+"-"+$s[e>>16&15|64]+$s[e>>24&255]+"-"+$s[n&63|128]+$s[n>>8&255]+"-"+$s[n>>16&255]+$s[n>>24&255]+$s[r&255]+$s[r>>8&255]+$s[r>>16&255]+$s[r>>24&255]).toLowerCase()}function Tn(t,e,n){return Math.max(e,Math.min(n,t))}function eB(t,e){return(t%e+e)%e}function JTe(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function e2e(t,e,n){return t!==e?(n-t)/(e-t):0}function qv(t,e,n){return(1-n)*t+n*e}function t2e(t,e,n,r){return qv(t,e,1-Math.exp(-n*r))}function n2e(t,e=1){return e-Math.abs(eB(t,e*2)-e)}function r2e(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function i2e(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function s2e(t,e){return t+Math.floor(Math.random()*(e-t+1))}function a2e(t,e){return t+Math.random()*(e-t)}function o2e(t){return t*(.5-Math.random())}function l2e(t){t!==void 0&&(M$=t);let e=M$+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function c2e(t){return t*Wv}function u2e(t){return t*Np}function d2e(t){return(t&t-1)===0&&t!==0}function f2e(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function h2e(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function p2e(t,e,n,r,i){const s=Math.cos,a=Math.sin,o=s(n/2),l=a(n/2),c=s((e+r)/2),u=a((e+r)/2),f=s((e-r)/2),p=a((e-r)/2),m=s((r-e)/2),x=a((r-e)/2);switch(i){case"XYX":t.set(o*u,l*f,l*p,o*c);break;case"YZY":t.set(l*p,o*u,l*f,o*c);break;case"ZXZ":t.set(l*f,l*p,o*u,o*c);break;case"XZX":t.set(o*u,l*x,l*m,o*c);break;case"YXY":t.set(l*m,o*u,l*x,o*c);break;case"ZYZ":t.set(l*x,l*m,o*u,o*c);break;default:ct("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function ga(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Sn(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const i2={DEG2RAD:Wv,RAD2DEG:Np,generateUUID:Qu,clamp:Tn,euclideanModulo:eB,mapLinear:JTe,inverseLerp:e2e,lerp:qv,damp:t2e,pingpong:n2e,smoothstep:r2e,smootherstep:i2e,randInt:s2e,randFloat:a2e,randFloatSpread:o2e,seededRandom:l2e,degToRad:c2e,radToDeg:u2e,isPowerOfTwo:d2e,ceilPowerOfTwo:f2e,floorPowerOfTwo:h2e,setQuaternionFromProperEuler:p2e,normalize:Sn,denormalize:ga};class mt{constructor(e=0,n=0){mt.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Tn(this.x,e.x,n.x),this.y=Tn(this.y,e.y,n.y),this}clampScalar(e,n){return this.x=Tn(this.x,e,n),this.y=Tn(this.y,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Tn(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Tn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),s=this.x-e.x,a=this.y-e.y;return this.x=s*r-a*i+e.x,this.y=s*i+a*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Xl{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,s,a,o){let l=r[i+0],c=r[i+1],u=r[i+2],f=r[i+3],p=s[a+0],m=s[a+1],x=s[a+2],b=s[a+3];if(o<=0){e[n+0]=l,e[n+1]=c,e[n+2]=u,e[n+3]=f;return}if(o>=1){e[n+0]=p,e[n+1]=m,e[n+2]=x,e[n+3]=b;return}if(f!==b||l!==p||c!==m||u!==x){let v=l*p+c*m+u*x+f*b;v<0&&(p=-p,m=-m,x=-x,b=-b,v=-v);let _=1-o;if(v<.9995){const E=Math.acos(v),T=Math.sin(E);_=Math.sin(_*E)/T,o=Math.sin(o*E)/T,l=l*_+p*o,c=c*_+m*o,u=u*_+x*o,f=f*_+b*o}else{l=l*_+p*o,c=c*_+m*o,u=u*_+x*o,f=f*_+b*o;const E=1/Math.sqrt(l*l+c*c+u*u+f*f);l*=E,c*=E,u*=E,f*=E}}e[n]=l,e[n+1]=c,e[n+2]=u,e[n+3]=f}static multiplyQuaternionsFlat(e,n,r,i,s,a){const o=r[i],l=r[i+1],c=r[i+2],u=r[i+3],f=s[a],p=s[a+1],m=s[a+2],x=s[a+3];return e[n]=o*x+u*f+l*m-c*p,e[n+1]=l*x+u*p+c*f-o*m,e[n+2]=c*x+u*m+o*p-l*f,e[n+3]=u*x-o*f-l*p-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,i=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,c=o(r/2),u=o(i/2),f=o(s/2),p=l(r/2),m=l(i/2),x=l(s/2);switch(a){case"XYZ":this._x=p*u*f+c*m*x,this._y=c*m*f-p*u*x,this._z=c*u*x+p*m*f,this._w=c*u*f-p*m*x;break;case"YXZ":this._x=p*u*f+c*m*x,this._y=c*m*f-p*u*x,this._z=c*u*x-p*m*f,this._w=c*u*f+p*m*x;break;case"ZXY":this._x=p*u*f-c*m*x,this._y=c*m*f+p*u*x,this._z=c*u*x+p*m*f,this._w=c*u*f-p*m*x;break;case"ZYX":this._x=p*u*f-c*m*x,this._y=c*m*f+p*u*x,this._z=c*u*x-p*m*f,this._w=c*u*f+p*m*x;break;case"YZX":this._x=p*u*f+c*m*x,this._y=c*m*f+p*u*x,this._z=c*u*x-p*m*f,this._w=c*u*f-p*m*x;break;case"XZY":this._x=p*u*f-c*m*x,this._y=c*m*f-p*u*x,this._z=c*u*x+p*m*f,this._w=c*u*f+p*m*x;break;default:ct("Quaternion: .setFromEuler() encountered an unknown order: "+a)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],s=n[8],a=n[1],o=n[5],l=n[9],c=n[2],u=n[6],f=n[10],p=r+o+f;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(u-l)*m,this._y=(s-c)*m,this._z=(a-i)*m}else if(r>o&&r>f){const m=2*Math.sqrt(1+r-o-f);this._w=(u-l)/m,this._x=.25*m,this._y=(i+a)/m,this._z=(s+c)/m}else if(o>f){const m=2*Math.sqrt(1+o-r-f);this._w=(s-c)/m,this._x=(i+a)/m,this._y=.25*m,this._z=(l+u)/m}else{const m=2*Math.sqrt(1+f-r-o);this._w=(a-i)/m,this._x=(s+c)/m,this._y=(l+u)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<1e-8?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Tn(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,s=e._z,a=e._w,o=n._x,l=n._y,c=n._z,u=n._w;return this._x=r*u+a*o+i*c-s*l,this._y=i*u+a*l+s*o-r*c,this._z=s*u+a*c+r*l-i*o,this._w=a*u-r*o-i*l-s*c,this._onChangeCallback(),this}slerp(e,n){if(n<=0)return this;if(n>=1)return this.copy(e);let r=e._x,i=e._y,s=e._z,a=e._w,o=this.dot(e);o<0&&(r=-r,i=-i,s=-s,a=-a,o=-o);let l=1-n;if(o<.9995){const c=Math.acos(o),u=Math.sin(c);l=Math.sin(l*c)/u,n=Math.sin(n*c)/u,this._x=this._x*l+r*n,this._y=this._y*l+i*n,this._z=this._z*l+s*n,this._w=this._w*l+a*n,this._onChangeCallback()}else this._x=this._x*l+r*n,this._y=this._y*l+i*n,this._z=this._z*l+s*n,this._w=this._w*l+a*n,this.normalize();return this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),s=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(n),s*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ae{constructor(e=0,n=0,r=0){ae.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(R$.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(R$.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[3]*r+s[6]*i,this.y=s[1]*n+s[4]*r+s[7]*i,this.z=s[2]*n+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=e.elements,a=1/(s[3]*n+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*n+s[4]*r+s[8]*i+s[12])*a,this.y=(s[1]*n+s[5]*r+s[9]*i+s[13])*a,this.z=(s[2]*n+s[6]*r+s[10]*i+s[14])*a,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,s=e.x,a=e.y,o=e.z,l=e.w,c=2*(a*i-o*r),u=2*(o*n-s*i),f=2*(s*r-a*n);return this.x=n+l*c+a*f-o*u,this.y=r+l*u+o*c-s*f,this.z=i+l*f+s*u-a*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i,this.y=s[1]*n+s[5]*r+s[9]*i,this.z=s[2]*n+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Tn(this.x,e.x,n.x),this.y=Tn(this.y,e.y,n.y),this.z=Tn(this.z,e.z,n.z),this}clampScalar(e,n){return this.x=Tn(this.x,e,n),this.y=Tn(this.y,e,n),this.z=Tn(this.z,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Tn(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,s=e.z,a=n.x,o=n.y,l=n.z;return this.x=i*l-s*o,this.y=s*a-r*l,this.z=r*o-i*a,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return E3.copy(this).projectOnVector(e),this.sub(E3)}reflect(e){return this.sub(E3.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Tn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,r=Math.sqrt(1-n*n);return this.x=r*Math.cos(e),this.y=n,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const E3=new ae,R$=new Xl;class pn{constructor(e,n,r,i,s,a,o,l,c){pn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,a,o,l,c)}set(e,n,r,i,s,a,o,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=o,u[3]=n,u[4]=s,u[5]=l,u[6]=r,u[7]=a,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,a=r[0],o=r[3],l=r[6],c=r[1],u=r[4],f=r[7],p=r[2],m=r[5],x=r[8],b=i[0],v=i[3],_=i[6],E=i[1],T=i[4],A=i[7],C=i[2],M=i[5],P=i[8];return s[0]=a*b+o*E+l*C,s[3]=a*v+o*T+l*M,s[6]=a*_+o*A+l*P,s[1]=c*b+u*E+f*C,s[4]=c*v+u*T+f*M,s[7]=c*_+u*A+f*P,s[2]=p*b+m*E+x*C,s[5]=p*v+m*T+x*M,s[8]=p*_+m*A+x*P,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8];return n*a*u-n*o*c-r*s*u+r*o*l+i*s*c-i*a*l}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],f=u*a-o*c,p=o*l-u*s,m=c*s-a*l,x=n*f+r*p+i*m;if(x===0)return this.set(0,0,0,0,0,0,0,0,0);const b=1/x;return e[0]=f*b,e[1]=(i*c-u*r)*b,e[2]=(o*r-i*a)*b,e[3]=p*b,e[4]=(u*n-i*l)*b,e[5]=(i*s-o*n)*b,e[6]=m*b,e[7]=(r*l-c*n)*b,e[8]=(a*n-r*s)*b,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,s,a,o){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*a+c*o)+a+e,-i*c,i*l,-i*(-c*a+l*o)+o+n,0,0,1),this}scale(e,n){return this.premultiply(C3.makeScale(e,n)),this}rotate(e){return this.premultiply(C3.makeRotation(-e)),this}translate(e,n){return this.premultiply(C3.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const C3=new pn,P$=new pn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),N$=new pn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function m2e(){const t={enabled:!0,workingColorSpace:Pp,spaces:{},convert:function(i,s,a){return this.enabled===!1||s===a||!s||!a||(this.spaces[s].transfer===Ot&&(i.r=Ju(i.r),i.g=Ju(i.g),i.b=Ju(i.b)),this.spaces[s].primaries!==this.spaces[a].primaries&&(i.applyMatrix3(this.spaces[s].toXYZ),i.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===Ot&&(i.r=zg(i.r),i.g=zg(i.g),i.b=zg(i.b))),i},workingToColorSpace:function(i,s){return this.convert(i,this.workingColorSpace,s)},colorSpaceToWorking:function(i,s){return this.convert(i,s,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===Fa?I0:this.spaces[i].transfer},getToneMappingMode:function(i){return this.spaces[i].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(i,s=this.workingColorSpace){return i.fromArray(this.spaces[s].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,s,a){return i.copy(this.spaces[s].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(i,s){return jr("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),t.workingToColorSpace(i,s)},toWorkingColorSpace:function(i,s){return jr("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),t.colorSpaceToWorking(i,s)}},e=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],r=[.3127,.329];return t.define({[Pp]:{primaries:e,whitePoint:r,transfer:I0,toXYZ:P$,fromXYZ:N$,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:ha},outputColorSpaceConfig:{drawingBufferColorSpace:ha}},[ha]:{primaries:e,whitePoint:r,transfer:Ot,toXYZ:P$,fromXYZ:N$,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:ha}}}),t}const sn=m2e();function Ju(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function zg(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let Gm;class g2e{static getDataURL(e,n="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let r;if(e instanceof HTMLCanvasElement)r=e;else{Gm===void 0&&(Gm=Lb("canvas")),Gm.width=e.width,Gm.height=e.height;const i=Gm.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),r=Gm}return r.toDataURL(n)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=Lb("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let a=0;a<s.length;a++)s[a]=Ju(s[a]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(Ju(n[r]/255)*255):n[r]=Ju(n[r]);return{data:n,width:e.width,height:e.height}}else return ct("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let x2e=0;class tB{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:x2e++}),this.uuid=Qu(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const n=this.data;return typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement?e.set(n.videoWidth,n.videoHeight,0):n instanceof VideoFrame?e.set(n.displayHeight,n.displayWidth,0):n!==null?e.set(n.width,n.height,n.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let a=0,o=i.length;a<o;a++)i[a].isDataTexture?s.push(A3(i[a].image)):s.push(A3(i[a]))}else s=A3(i);r.url=s}return n||(e.images[this.uuid]=r),r}}function A3(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?g2e.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(ct("Texture: Unable to serialize Texture."),{})}let y2e=0;const M3=new ae;class $i extends Yc{constructor(e=$i.DEFAULT_IMAGE,n=$i.DEFAULT_MAPPING,r=ja,i=ja,s=ii,a=za,o=gi,l=si,c=$i.DEFAULT_ANISOTROPY,u=Fa){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:y2e++}),this.uuid=Qu(),this.name="",this.source=new tB(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=a,this.anisotropy=c,this.format=o,this.internalFormat=null,this.type=l,this.offset=new mt(0,0),this.repeat=new mt(1,1),this.center=new mt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new pn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(M3).x}get height(){return this.source.getSize(M3).y}get depth(){return this.source.getSize(M3).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const n in e){const r=e[n];if(r===void 0){ct(`Texture.setValues(): parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){ct(`Texture.setValues(): property '${n}' does not exist.`);continue}i&&r&&i.isVector2&&r.isVector2||i&&r&&i.isVector3&&r.isVector3||i&&r&&i.isMatrix3&&r.isMatrix3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Vk)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Mp:e.x=e.x-Math.floor(e.x);break;case ja:e.x=e.x<0?0:1;break;case Rp:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Mp:e.y=e.y-Math.floor(e.y);break;case ja:e.y=e.y<0?0:1;break;case Rp:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}$i.DEFAULT_IMAGE=null;$i.DEFAULT_MAPPING=Vk;$i.DEFAULT_ANISOTROPY=1;class an{constructor(e=0,n=0,r=0,i=1){an.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=this.w,a=e.elements;return this.x=a[0]*n+a[4]*r+a[8]*i+a[12]*s,this.y=a[1]*n+a[5]*r+a[9]*i+a[13]*s,this.z=a[2]*n+a[6]*r+a[10]*i+a[14]*s,this.w=a[3]*n+a[7]*r+a[11]*i+a[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,s;const l=e.elements,c=l[0],u=l[4],f=l[8],p=l[1],m=l[5],x=l[9],b=l[2],v=l[6],_=l[10];if(Math.abs(u-p)<.01&&Math.abs(f-b)<.01&&Math.abs(x-v)<.01){if(Math.abs(u+p)<.1&&Math.abs(f+b)<.1&&Math.abs(x+v)<.1&&Math.abs(c+m+_-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const T=(c+1)/2,A=(m+1)/2,C=(_+1)/2,M=(u+p)/4,P=(f+b)/4,D=(x+v)/4;return T>A&&T>C?T<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(T),i=M/r,s=P/r):A>C?A<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(A),r=M/i,s=D/i):C<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(C),r=P/s,i=D/s),this.set(r,i,s,n),this}let E=Math.sqrt((v-x)*(v-x)+(f-b)*(f-b)+(p-u)*(p-u));return Math.abs(E)<.001&&(E=1),this.x=(v-x)/E,this.y=(f-b)/E,this.z=(p-u)/E,this.w=Math.acos((c+m+_-1)/2),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Tn(this.x,e.x,n.x),this.y=Tn(this.y,e.y,n.y),this.z=Tn(this.z,e.z,n.z),this.w=Tn(this.w,e.w,n.w),this}clampScalar(e,n){return this.x=Tn(this.x,e,n),this.y=Tn(this.y,e,n),this.z=Tn(this.z,e,n),this.w=Tn(this.w,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Tn(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Hp extends Yc{constructor(e=1,n=1,r={}){super(),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:ii,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},r),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=r.depth,this.scissor=new an(0,0,e,n),this.scissorTest=!1,this.viewport=new an(0,0,e,n);const i={width:e,height:n,depth:r.depth},s=new $i(i);this.textures=[];const a=r.count;for(let o=0;o<a;o++)this.textures[o]=s.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this._setTextureOptions(r),this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=r.depthTexture,this.samples=r.samples,this.multiview=r.multiview}_setTextureOptions(e={}){const n={minFilter:ii,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(n.mapping=e.mapping),e.wrapS!==void 0&&(n.wrapS=e.wrapS),e.wrapT!==void 0&&(n.wrapT=e.wrapT),e.wrapR!==void 0&&(n.wrapR=e.wrapR),e.magFilter!==void 0&&(n.magFilter=e.magFilter),e.minFilter!==void 0&&(n.minFilter=e.minFilter),e.format!==void 0&&(n.format=e.format),e.type!==void 0&&(n.type=e.type),e.anisotropy!==void 0&&(n.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(n.colorSpace=e.colorSpace),e.flipY!==void 0&&(n.flipY=e.flipY),e.generateMipmaps!==void 0&&(n.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(n.internalFormat=e.internalFormat);for(let r=0;r<this.textures.length;r++)this.textures[r].setValues(n)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=n,this.textures[i].image.depth=r,this.textures[i].isData3DTexture!==!0&&(this.textures[i].isArrayTexture=this.textures[i].image.depth>1);this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,r=e.textures.length;n<r;n++){this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0,this.textures[n].renderTarget=this;const i=Object.assign({},e.textures[n].image);this.textures[n].source=new tB(i)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class zf extends Hp{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class nB extends $i{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Lr,this.minFilter=Lr,this.wrapR=ja,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class v2e extends $i{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Lr,this.minFilter=Lr,this.wrapR=ja,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Wp{constructor(e=new ae(1/0,1/0,1/0),n=new ae(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(Cl.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(Cl.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=Cl.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(n===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,o=s.count;a<o;a++)e.isMesh===!0?e.getVertexPosition(a,Cl):Cl.fromBufferAttribute(s,a),Cl.applyMatrix4(e.matrixWorld),this.expandByPoint(Cl);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),GS.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),GS.copy(r.boundingBox)),GS.applyMatrix4(e.matrixWorld),this.union(GS)}const i=e.children;for(let s=0,a=i.length;s<a;s++)this.expandByObject(i[s],n);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Cl),Cl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Uy),VS.subVectors(this.max,Uy),Vm.subVectors(e.a,Uy),Hm.subVectors(e.b,Uy),Wm.subVectors(e.c,Uy),rf.subVectors(Hm,Vm),sf.subVectors(Wm,Hm),Ch.subVectors(Vm,Wm);let n=[0,-rf.z,rf.y,0,-sf.z,sf.y,0,-Ch.z,Ch.y,rf.z,0,-rf.x,sf.z,0,-sf.x,Ch.z,0,-Ch.x,-rf.y,rf.x,0,-sf.y,sf.x,0,-Ch.y,Ch.x,0];return!R3(n,Vm,Hm,Wm,VS)||(n=[1,0,0,0,1,0,0,0,1],!R3(n,Vm,Hm,Wm,VS))?!1:(HS.crossVectors(rf,sf),n=[HS.x,HS.y,HS.z],R3(n,Vm,Hm,Wm,VS))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Cl).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Cl).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(bu[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),bu[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),bu[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),bu[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),bu[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),bu[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),bu[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),bu[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(bu),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const bu=[new ae,new ae,new ae,new ae,new ae,new ae,new ae,new ae],Cl=new ae,GS=new Wp,Vm=new ae,Hm=new ae,Wm=new ae,rf=new ae,sf=new ae,Ch=new ae,Uy=new ae,VS=new ae,HS=new ae,Ah=new ae;function R3(t,e,n,r,i){for(let s=0,a=t.length-3;s<=a;s+=3){Ah.fromArray(t,s);const o=i.x*Math.abs(Ah.x)+i.y*Math.abs(Ah.y)+i.z*Math.abs(Ah.z),l=e.dot(Ah),c=n.dot(Ah),u=r.dot(Ah);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>o)return!1}return!0}const b2e=new Wp,jy=new ae,P3=new ae;class A_{constructor(e=new ae,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):b2e.setFromPoints(e).getCenter(r);let i=0;for(let s=0,a=e.length;s<a;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;jy.subVectors(e,this.center);const n=jy.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(jy,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(P3.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(jy.copy(e.center).add(P3)),this.expandByPoint(jy.copy(e.center).sub(P3))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const _u=new ae,N3=new ae,WS=new ae,af=new ae,O3=new ae,qS=new ae,D3=new ae;class cC{constructor(e=new ae,n=new ae(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,_u)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=_u.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(_u.copy(this.origin).addScaledVector(this.direction,n),_u.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){N3.copy(e).add(n).multiplyScalar(.5),WS.copy(n).sub(e).normalize(),af.copy(this.origin).sub(N3);const s=e.distanceTo(n)*.5,a=-this.direction.dot(WS),o=af.dot(this.direction),l=-af.dot(WS),c=af.lengthSq(),u=Math.abs(1-a*a);let f,p,m,x;if(u>0)if(f=a*l-o,p=a*o-l,x=s*u,f>=0)if(p>=-x)if(p<=x){const b=1/u;f*=b,p*=b,m=f*(f+a*p+2*o)+p*(a*f+p+2*l)+c}else p=s,f=Math.max(0,-(a*p+o)),m=-f*f+p*(p+2*l)+c;else p=-s,f=Math.max(0,-(a*p+o)),m=-f*f+p*(p+2*l)+c;else p<=-x?(f=Math.max(0,-(-a*s+o)),p=f>0?-s:Math.min(Math.max(-s,-l),s),m=-f*f+p*(p+2*l)+c):p<=x?(f=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+c):(f=Math.max(0,-(a*s+o)),p=f>0?s:Math.min(Math.max(-s,-l),s),m=-f*f+p*(p+2*l)+c);else p=a>0?-s:s,f=Math.max(0,-(a*p+o)),m=-f*f+p*(p+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,f),i&&i.copy(N3).addScaledVector(WS,p),m}intersectSphere(e,n){_u.subVectors(e.center,this.origin);const r=_u.dot(this.direction),i=_u.dot(_u)-r*r,s=e.radius*e.radius;if(i>s)return null;const a=Math.sqrt(s-i),o=r-a,l=r+a;return l<0?null:o<0?this.at(l,n):this.at(o,n)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,s,a,o,l;const c=1/this.direction.x,u=1/this.direction.y,f=1/this.direction.z,p=this.origin;return c>=0?(r=(e.min.x-p.x)*c,i=(e.max.x-p.x)*c):(r=(e.max.x-p.x)*c,i=(e.min.x-p.x)*c),u>=0?(s=(e.min.y-p.y)*u,a=(e.max.y-p.y)*u):(s=(e.max.y-p.y)*u,a=(e.min.y-p.y)*u),r>a||s>i||((s>r||isNaN(r))&&(r=s),(a<i||isNaN(i))&&(i=a),f>=0?(o=(e.min.z-p.z)*f,l=(e.max.z-p.z)*f):(o=(e.max.z-p.z)*f,l=(e.min.z-p.z)*f),r>l||o>i)||((o>r||r!==r)&&(r=o),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,_u)!==null}intersectTriangle(e,n,r,i,s){O3.subVectors(n,e),qS.subVectors(r,e),D3.crossVectors(O3,qS);let a=this.direction.dot(D3),o;if(a>0){if(i)return null;o=1}else if(a<0)o=-1,a=-a;else return null;af.subVectors(this.origin,e);const l=o*this.direction.dot(qS.crossVectors(af,qS));if(l<0)return null;const c=o*this.direction.dot(O3.cross(af));if(c<0||l+c>a)return null;const u=-o*af.dot(D3);return u<0?null:this.at(u/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class In{constructor(e,n,r,i,s,a,o,l,c,u,f,p,m,x,b,v){In.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,a,o,l,c,u,f,p,m,x,b,v)}set(e,n,r,i,s,a,o,l,c,u,f,p,m,x,b,v){const _=this.elements;return _[0]=e,_[4]=n,_[8]=r,_[12]=i,_[1]=s,_[5]=a,_[9]=o,_[13]=l,_[2]=c,_[6]=u,_[10]=f,_[14]=p,_[3]=m,_[7]=x,_[11]=b,_[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new In().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/qm.setFromMatrixColumn(e,0).length(),s=1/qm.setFromMatrixColumn(e,1).length(),a=1/qm.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*s,n[5]=r[5]*s,n[6]=r[6]*s,n[7]=0,n[8]=r[8]*a,n[9]=r[9]*a,n[10]=r[10]*a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,s=e.z,a=Math.cos(r),o=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const p=a*u,m=a*f,x=o*u,b=o*f;n[0]=l*u,n[4]=-l*f,n[8]=c,n[1]=m+x*c,n[5]=p-b*c,n[9]=-o*l,n[2]=b-p*c,n[6]=x+m*c,n[10]=a*l}else if(e.order==="YXZ"){const p=l*u,m=l*f,x=c*u,b=c*f;n[0]=p+b*o,n[4]=x*o-m,n[8]=a*c,n[1]=a*f,n[5]=a*u,n[9]=-o,n[2]=m*o-x,n[6]=b+p*o,n[10]=a*l}else if(e.order==="ZXY"){const p=l*u,m=l*f,x=c*u,b=c*f;n[0]=p-b*o,n[4]=-a*f,n[8]=x+m*o,n[1]=m+x*o,n[5]=a*u,n[9]=b-p*o,n[2]=-a*c,n[6]=o,n[10]=a*l}else if(e.order==="ZYX"){const p=a*u,m=a*f,x=o*u,b=o*f;n[0]=l*u,n[4]=x*c-m,n[8]=p*c+b,n[1]=l*f,n[5]=b*c+p,n[9]=m*c-x,n[2]=-c,n[6]=o*l,n[10]=a*l}else if(e.order==="YZX"){const p=a*l,m=a*c,x=o*l,b=o*c;n[0]=l*u,n[4]=b-p*f,n[8]=x*f+m,n[1]=f,n[5]=a*u,n[9]=-o*u,n[2]=-c*u,n[6]=m*f+x,n[10]=p-b*f}else if(e.order==="XZY"){const p=a*l,m=a*c,x=o*l,b=o*c;n[0]=l*u,n[4]=-f,n[8]=c*u,n[1]=p*f+b,n[5]=a*u,n[9]=m*f-x,n[2]=x*f-m,n[6]=o*u,n[10]=b*f+p}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(_2e,e,S2e)}lookAt(e,n,r){const i=this.elements;return lo.subVectors(e,n),lo.lengthSq()===0&&(lo.z=1),lo.normalize(),of.crossVectors(r,lo),of.lengthSq()===0&&(Math.abs(r.z)===1?lo.x+=1e-4:lo.z+=1e-4,lo.normalize(),of.crossVectors(r,lo)),of.normalize(),XS.crossVectors(lo,of),i[0]=of.x,i[4]=XS.x,i[8]=lo.x,i[1]=of.y,i[5]=XS.y,i[9]=lo.y,i[2]=of.z,i[6]=XS.z,i[10]=lo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,a=r[0],o=r[4],l=r[8],c=r[12],u=r[1],f=r[5],p=r[9],m=r[13],x=r[2],b=r[6],v=r[10],_=r[14],E=r[3],T=r[7],A=r[11],C=r[15],M=i[0],P=i[4],D=i[8],N=i[12],L=i[1],k=i[5],I=i[9],F=i[13],z=i[2],H=i[6],B=i[10],j=i[14],G=i[3],W=i[7],re=i[11],$=i[15];return s[0]=a*M+o*L+l*z+c*G,s[4]=a*P+o*k+l*H+c*W,s[8]=a*D+o*I+l*B+c*re,s[12]=a*N+o*F+l*j+c*$,s[1]=u*M+f*L+p*z+m*G,s[5]=u*P+f*k+p*H+m*W,s[9]=u*D+f*I+p*B+m*re,s[13]=u*N+f*F+p*j+m*$,s[2]=x*M+b*L+v*z+_*G,s[6]=x*P+b*k+v*H+_*W,s[10]=x*D+b*I+v*B+_*re,s[14]=x*N+b*F+v*j+_*$,s[3]=E*M+T*L+A*z+C*G,s[7]=E*P+T*k+A*H+C*W,s[11]=E*D+T*I+A*B+C*re,s[15]=E*N+T*F+A*j+C*$,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],s=e[12],a=e[1],o=e[5],l=e[9],c=e[13],u=e[2],f=e[6],p=e[10],m=e[14],x=e[3],b=e[7],v=e[11],_=e[15];return x*(+s*l*f-i*c*f-s*o*p+r*c*p+i*o*m-r*l*m)+b*(+n*l*m-n*c*p+s*a*p-i*a*m+i*c*u-s*l*u)+v*(+n*c*f-n*o*m-s*a*f+r*a*m+s*o*u-r*c*u)+_*(-i*o*u-n*l*f+n*o*p+i*a*f-r*a*p+r*l*u)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],f=e[9],p=e[10],m=e[11],x=e[12],b=e[13],v=e[14],_=e[15],E=f*v*c-b*p*c+b*l*m-o*v*m-f*l*_+o*p*_,T=x*p*c-u*v*c-x*l*m+a*v*m+u*l*_-a*p*_,A=u*b*c-x*f*c+x*o*m-a*b*m-u*o*_+a*f*_,C=x*f*l-u*b*l-x*o*p+a*b*p+u*o*v-a*f*v,M=n*E+r*T+i*A+s*C;if(M===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/M;return e[0]=E*P,e[1]=(b*p*s-f*v*s-b*i*m+r*v*m+f*i*_-r*p*_)*P,e[2]=(o*v*s-b*l*s+b*i*c-r*v*c-o*i*_+r*l*_)*P,e[3]=(f*l*s-o*p*s-f*i*c+r*p*c+o*i*m-r*l*m)*P,e[4]=T*P,e[5]=(u*v*s-x*p*s+x*i*m-n*v*m-u*i*_+n*p*_)*P,e[6]=(x*l*s-a*v*s-x*i*c+n*v*c+a*i*_-n*l*_)*P,e[7]=(a*p*s-u*l*s+u*i*c-n*p*c-a*i*m+n*l*m)*P,e[8]=A*P,e[9]=(x*f*s-u*b*s-x*r*m+n*b*m+u*r*_-n*f*_)*P,e[10]=(a*b*s-x*o*s+x*r*c-n*b*c-a*r*_+n*o*_)*P,e[11]=(u*o*s-a*f*s-u*r*c+n*f*c+a*r*m-n*o*m)*P,e[12]=C*P,e[13]=(u*b*i-x*f*i+x*r*p-n*b*p-u*r*v+n*f*v)*P,e[14]=(x*o*i-a*b*i-x*r*l+n*b*l+a*r*v-n*o*v)*P,e[15]=(a*f*i-u*o*i+u*r*l-n*f*l-a*r*p+n*o*p)*P,this}scale(e){const n=this.elements,r=e.x,i=e.y,s=e.z;return n[0]*=r,n[4]*=i,n[8]*=s,n[1]*=r,n[5]*=i,n[9]*=s,n[2]*=r,n[6]*=i,n[10]*=s,n[3]*=r,n[7]*=i,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),s=1-r,a=e.x,o=e.y,l=e.z,c=s*a,u=s*o;return this.set(c*a+r,c*o-i*l,c*l+i*o,0,c*o+i*l,u*o+r,u*l-i*a,0,c*l-i*o,u*l+i*a,s*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,s,a){return this.set(1,r,s,0,e,1,a,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,s=n._x,a=n._y,o=n._z,l=n._w,c=s+s,u=a+a,f=o+o,p=s*c,m=s*u,x=s*f,b=a*u,v=a*f,_=o*f,E=l*c,T=l*u,A=l*f,C=r.x,M=r.y,P=r.z;return i[0]=(1-(b+_))*C,i[1]=(m+A)*C,i[2]=(x-T)*C,i[3]=0,i[4]=(m-A)*M,i[5]=(1-(p+_))*M,i[6]=(v+E)*M,i[7]=0,i[8]=(x+T)*P,i[9]=(v-E)*P,i[10]=(1-(p+b))*P,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let s=qm.set(i[0],i[1],i[2]).length();const a=qm.set(i[4],i[5],i[6]).length(),o=qm.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Al.copy(this);const c=1/s,u=1/a,f=1/o;return Al.elements[0]*=c,Al.elements[1]*=c,Al.elements[2]*=c,Al.elements[4]*=u,Al.elements[5]*=u,Al.elements[6]*=u,Al.elements[8]*=f,Al.elements[9]*=f,Al.elements[10]*=f,n.setFromRotationMatrix(Al),r.x=s,r.y=a,r.z=o,this}makePerspective(e,n,r,i,s,a,o=va,l=!1){const c=this.elements,u=2*s/(n-e),f=2*s/(r-i),p=(n+e)/(n-e),m=(r+i)/(r-i);let x,b;if(l)x=s/(a-s),b=a*s/(a-s);else if(o===va)x=-(a+s)/(a-s),b=-2*a*s/(a-s);else if(o===jf)x=-a/(a-s),b=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return c[0]=u,c[4]=0,c[8]=p,c[12]=0,c[1]=0,c[5]=f,c[9]=m,c[13]=0,c[2]=0,c[6]=0,c[10]=x,c[14]=b,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,n,r,i,s,a,o=va,l=!1){const c=this.elements,u=2/(n-e),f=2/(r-i),p=-(n+e)/(n-e),m=-(r+i)/(r-i);let x,b;if(l)x=1/(a-s),b=a/(a-s);else if(o===va)x=-2/(a-s),b=-(a+s)/(a-s);else if(o===jf)x=-1/(a-s),b=-s/(a-s);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return c[0]=u,c[4]=0,c[8]=0,c[12]=p,c[1]=0,c[5]=f,c[9]=0,c[13]=m,c[2]=0,c[6]=0,c[10]=x,c[14]=b,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const qm=new ae,Al=new In,_2e=new ae(0,0,0),S2e=new ae(1,1,1),of=new ae,XS=new ae,lo=new ae,O$=new In,D$=new Xl;class Ka{constructor(e=0,n=0,r=0,i=Ka.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,s=i[0],a=i[4],o=i[8],l=i[1],c=i[5],u=i[9],f=i[2],p=i[6],m=i[10];switch(n){case"XYZ":this._y=Math.asin(Tn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,m),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(p,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Tn(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(Tn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-f,m),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Tn(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(Tn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(o,m));break;case"XZY":this._z=Math.asin(-Tn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(p,c),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-u,m),this._y=0);break;default:ct("Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return O$.makeRotationFromQuaternion(e),this.setFromRotationMatrix(O$,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return D$.setFromEuler(this),this.setFromQuaternion(D$,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ka.DEFAULT_ORDER="XYZ";class rB{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let w2e=0;const L$=new ae,Xm=new Xl,Su=new In,YS=new ae,zy=new ae,T2e=new ae,E2e=new Xl,I$=new ae(1,0,0),k$=new ae(0,1,0),B$=new ae(0,0,1),F$={type:"added"},C2e={type:"removed"},Ym={type:"childadded",child:null},L3={type:"childremoved",child:null};class Gi extends Yc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:w2e++}),this.uuid=Qu(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Gi.DEFAULT_UP.clone();const e=new ae,n=new Ka,r=new Xl,i=new ae(1,1,1);function s(){r.setFromEuler(n,!1)}function a(){n.setFromQuaternion(r,void 0,!1)}n._onChange(s),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new In},normalMatrix:{value:new pn}}),this.matrix=new In,this.matrixWorld=new In,this.matrixAutoUpdate=Gi.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Gi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new rB,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return Xm.setFromAxisAngle(e,n),this.quaternion.multiply(Xm),this}rotateOnWorldAxis(e,n){return Xm.setFromAxisAngle(e,n),this.quaternion.premultiply(Xm),this}rotateX(e){return this.rotateOnAxis(I$,e)}rotateY(e){return this.rotateOnAxis(k$,e)}rotateZ(e){return this.rotateOnAxis(B$,e)}translateOnAxis(e,n){return L$.copy(e).applyQuaternion(this.quaternion),this.position.add(L$.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(I$,e)}translateY(e){return this.translateOnAxis(k$,e)}translateZ(e){return this.translateOnAxis(B$,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Su.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?YS.copy(e):YS.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),zy.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Su.lookAt(zy,YS,this.up):Su.lookAt(YS,zy,this.up),this.quaternion.setFromRotationMatrix(Su),i&&(Su.extractRotation(i.matrixWorld),Xm.setFromRotationMatrix(Su),this.quaternion.premultiply(Xm.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(xt("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(F$),Ym.child=e,this.dispatchEvent(Ym),Ym.child=null):xt("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(C2e),L3.child=e,this.dispatchEvent(L3),L3.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Su.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Su.multiply(e.parent.matrixWorld)),e.applyMatrix4(Su),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(F$),Ym.child=e,this.dispatchEvent(Ym),Ym.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const a=this.children[r].getObjectByProperty(e,n);if(a!==void 0)return a}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(zy,e,T2e),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(zy,E2e,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].updateMatrixWorld(e)}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.geometryInfo=this._geometryInfo.map(o=>({...o,boundingBox:o.boundingBox?o.boundingBox.toJSON():void 0,boundingSphere:o.boundingSphere?o.boundingSphere.toJSON():void 0})),i.instanceInfo=this._instanceInfo.map(o=>({...o})),i.availableInstanceIds=this._availableInstanceIds.slice(),i.availableGeometryIds=this._availableGeometryIds.slice(),i.nextIndexStart=this._nextIndexStart,i.nextVertexStart=this._nextVertexStart,i.geometryCount=this._geometryCount,i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.matricesTexture=this._matricesTexture.toJSON(e),i.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(i.boundingBox=this.boundingBox.toJSON()));function s(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const f=l[c];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,c=this.material.length;l<c;l++)o.push(s(e.materials,this.material[l]));i.material=o}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];i.animations.push(s(e.animations,l))}}if(n){const o=a(e.geometries),l=a(e.materials),c=a(e.textures),u=a(e.images),f=a(e.shapes),p=a(e.skeletons),m=a(e.animations),x=a(e.nodes);o.length>0&&(r.geometries=o),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),f.length>0&&(r.shapes=f),p.length>0&&(r.skeletons=p),m.length>0&&(r.animations=m),x.length>0&&(r.nodes=x)}return r.object=i,r;function a(o){const l=[];for(const c in o){const u=o[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Gi.DEFAULT_UP=new ae(0,1,0);Gi.DEFAULT_MATRIX_AUTO_UPDATE=!0;Gi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ml=new ae,wu=new ae,I3=new ae,Tu=new ae,Km=new ae,Zm=new ae,U$=new ae,k3=new ae,B3=new ae,F3=new ae,U3=new an,j3=new an,z3=new an;class Il{constructor(e=new ae,n=new ae,r=new ae){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),Ml.subVectors(e,n),i.cross(Ml);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,n,r,i,s){Ml.subVectors(i,n),wu.subVectors(r,n),I3.subVectors(e,n);const a=Ml.dot(Ml),o=Ml.dot(wu),l=Ml.dot(I3),c=wu.dot(wu),u=wu.dot(I3),f=a*c-o*o;if(f===0)return s.set(0,0,0),null;const p=1/f,m=(c*l-o*u)*p,x=(a*u-o*l)*p;return s.set(1-m-x,x,m)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,Tu)===null?!1:Tu.x>=0&&Tu.y>=0&&Tu.x+Tu.y<=1}static getInterpolation(e,n,r,i,s,a,o,l){return this.getBarycoord(e,n,r,i,Tu)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Tu.x),l.addScaledVector(a,Tu.y),l.addScaledVector(o,Tu.z),l)}static getInterpolatedAttribute(e,n,r,i,s,a){return U3.setScalar(0),j3.setScalar(0),z3.setScalar(0),U3.fromBufferAttribute(e,n),j3.fromBufferAttribute(e,r),z3.fromBufferAttribute(e,i),a.setScalar(0),a.addScaledVector(U3,s.x),a.addScaledVector(j3,s.y),a.addScaledVector(z3,s.z),a}static isFrontFacing(e,n,r,i){return Ml.subVectors(r,n),wu.subVectors(e,n),Ml.cross(wu).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ml.subVectors(this.c,this.b),wu.subVectors(this.a,this.b),Ml.cross(wu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Il.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Il.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,r,i,s){return Il.getInterpolation(e,this.a,this.b,this.c,n,r,i,s)}containsPoint(e){return Il.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Il.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,s=this.c;let a,o;Km.subVectors(i,r),Zm.subVectors(s,r),k3.subVectors(e,r);const l=Km.dot(k3),c=Zm.dot(k3);if(l<=0&&c<=0)return n.copy(r);B3.subVectors(e,i);const u=Km.dot(B3),f=Zm.dot(B3);if(u>=0&&f<=u)return n.copy(i);const p=l*f-u*c;if(p<=0&&l>=0&&u<=0)return a=l/(l-u),n.copy(r).addScaledVector(Km,a);F3.subVectors(e,s);const m=Km.dot(F3),x=Zm.dot(F3);if(x>=0&&m<=x)return n.copy(s);const b=m*c-l*x;if(b<=0&&c>=0&&x<=0)return o=c/(c-x),n.copy(r).addScaledVector(Zm,o);const v=u*x-m*f;if(v<=0&&f-u>=0&&m-x>=0)return U$.subVectors(s,i),o=(f-u)/(f-u+(m-x)),n.copy(i).addScaledVector(U$,o);const _=1/(v+b+p);return a=b*_,o=p*_,n.copy(r).addScaledVector(Km,a).addScaledVector(Zm,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const VZ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},lf={h:0,s:0,l:0},KS={h:0,s:0,l:0};function $3(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}let Xt=class{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=ha){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,sn.colorSpaceToWorking(this,n),this}setRGB(e,n,r,i=sn.workingColorSpace){return this.r=e,this.g=n,this.b=r,sn.colorSpaceToWorking(this,i),this}setHSL(e,n,r,i=sn.workingColorSpace){if(e=eB(e,1),n=Tn(n,0,1),r=Tn(r,0,1),n===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+n):r+n-r*n,a=2*r-s;this.r=$3(a,s,e+1/3),this.g=$3(a,s,e),this.b=$3(a,s,e-1/3)}return sn.colorSpaceToWorking(this,i),this}setStyle(e,n=ha){function r(s){s!==void 0&&parseFloat(s)<1&&ct("Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=i[1],o=i[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,n);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,n);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,n);break;default:ct("Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(a===6)return this.setHex(parseInt(s,16),n);ct("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=ha){const r=VZ[e.toLowerCase()];return r!==void 0?this.setHex(r,n):ct("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ju(e.r),this.g=Ju(e.g),this.b=Ju(e.b),this}copyLinearToSRGB(e){return this.r=zg(e.r),this.g=zg(e.g),this.b=zg(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ha){return sn.workingToColorSpace(Gs.copy(this),e),Math.round(Tn(Gs.r*255,0,255))*65536+Math.round(Tn(Gs.g*255,0,255))*256+Math.round(Tn(Gs.b*255,0,255))}getHexString(e=ha){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=sn.workingColorSpace){sn.workingToColorSpace(Gs.copy(this),n);const r=Gs.r,i=Gs.g,s=Gs.b,a=Math.max(r,i,s),o=Math.min(r,i,s);let l,c;const u=(o+a)/2;if(o===a)l=0,c=0;else{const f=a-o;switch(c=u<=.5?f/(a+o):f/(2-a-o),a){case r:l=(i-s)/f+(i<s?6:0);break;case i:l=(s-r)/f+2;break;case s:l=(r-i)/f+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,n=sn.workingColorSpace){return sn.workingToColorSpace(Gs.copy(this),n),e.r=Gs.r,e.g=Gs.g,e.b=Gs.b,e}getStyle(e=ha){sn.workingToColorSpace(Gs.copy(this),e);const n=Gs.r,r=Gs.g,i=Gs.b;return e!==ha?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(lf),this.setHSL(lf.h+e,lf.s+n,lf.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(lf),e.getHSL(KS);const r=qv(lf.h,KS.h,n),i=qv(lf.s,KS.s,n),s=qv(lf.l,KS.l,n);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*n+s[3]*r+s[6]*i,this.g=s[1]*n+s[4]*r+s[7]*i,this.b=s[2]*n+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const Gs=new Xt;Xt.NAMES=VZ;let A2e=0;class sa extends Yc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:A2e++}),this.uuid=Qu(),this.name="",this.type="Material",this.blending=To,this.side=wo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=_b,this.blendDst=Sb,this.blendEquation=Qs,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Xt(0,0,0),this.blendAlpha=0,this.depthFunc=Uf,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=DD,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=zh,this.stencilZFail=zh,this.stencilZPass=zh,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){ct(`Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){ct(`Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(r.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(r.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==To&&(r.blending=this.blending),this.side!==wo&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==_b&&(r.blendSrc=this.blendSrc),this.blendDst!==Sb&&(r.blendDst=this.blendDst),this.blendEquation!==Qs&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==Uf&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==DD&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==zh&&(r.stencilFail=this.stencilFail),this.stencilZFail!==zh&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==zh&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const a=[];for(const o in s){const l=s[o];delete l.metadata,a.push(l)}return a}if(n){const s=i(e.textures),a=i(e.images);s.length>0&&(r.textures=s),a.length>0&&(r.images=a)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=n[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Cc extends sa{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Xt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ka,this.combine=T_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Bu=M2e();function M2e(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;(c&8388608)===0;)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:a,offsetTable:o}}function co(t){Math.abs(t)>65504&&ct("DataUtils.toHalfFloat(): Value out of range."),t=Tn(t,-65504,65504),Bu.floatView[0]=t;const e=Bu.uint32View[0],n=e>>23&511;return Bu.baseTable[n]+((e&8388607)>>Bu.shiftTable[n])}function ZS(t){const e=t>>10;return Bu.uint32View[0]=Bu.mantissaTable[Bu.offsetTable[e]+(t&1023)]+Bu.exponentTable[e],Bu.floatView[0]}const Bi=new ae,QS=new mt;let R2e=0;class Bs{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:R2e++}),this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=r2,this.updateRanges=[],this.gpuType=Ti,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)QS.fromBufferAttribute(this,n),QS.applyMatrix3(e),this.setXY(n,QS.x,QS.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)Bi.fromBufferAttribute(this,n),Bi.applyMatrix3(e),this.setXYZ(n,Bi.x,Bi.y,Bi.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)Bi.fromBufferAttribute(this,n),Bi.applyMatrix4(e),this.setXYZ(n,Bi.x,Bi.y,Bi.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Bi.fromBufferAttribute(this,n),Bi.applyNormalMatrix(e),this.setXYZ(n,Bi.x,Bi.y,Bi.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Bi.fromBufferAttribute(this,n),Bi.transformDirection(e),this.setXYZ(n,Bi.x,Bi.y,Bi.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=ga(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Sn(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=ga(n,this.array)),n}setX(e,n){return this.normalized&&(n=Sn(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=ga(n,this.array)),n}setY(e,n){return this.normalized&&(n=Sn(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=ga(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Sn(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=ga(n,this.array)),n}setW(e,n){return this.normalized&&(n=Sn(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Sn(n,this.array),r=Sn(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Sn(n,this.array),r=Sn(r,this.array),i=Sn(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=Sn(n,this.array),r=Sn(r,this.array),i=Sn(i,this.array),s=Sn(s,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==r2&&(e.usage=this.usage),e}}class iB extends Bs{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class sB extends Bs{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class HZ extends Bs{constructor(e,n,r){super(new Uint16Array(e),n,r),this.isFloat16BufferAttribute=!0}getX(e){let n=ZS(this.array[e*this.itemSize]);return this.normalized&&(n=ga(n,this.array)),n}setX(e,n){return this.normalized&&(n=Sn(n,this.array)),this.array[e*this.itemSize]=co(n),this}getY(e){let n=ZS(this.array[e*this.itemSize+1]);return this.normalized&&(n=ga(n,this.array)),n}setY(e,n){return this.normalized&&(n=Sn(n,this.array)),this.array[e*this.itemSize+1]=co(n),this}getZ(e){let n=ZS(this.array[e*this.itemSize+2]);return this.normalized&&(n=ga(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Sn(n,this.array)),this.array[e*this.itemSize+2]=co(n),this}getW(e){let n=ZS(this.array[e*this.itemSize+3]);return this.normalized&&(n=ga(n,this.array)),n}setW(e,n){return this.normalized&&(n=Sn(n,this.array)),this.array[e*this.itemSize+3]=co(n),this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Sn(n,this.array),r=Sn(r,this.array)),this.array[e+0]=co(n),this.array[e+1]=co(r),this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Sn(n,this.array),r=Sn(r,this.array),i=Sn(i,this.array)),this.array[e+0]=co(n),this.array[e+1]=co(r),this.array[e+2]=co(i),this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=Sn(n,this.array),r=Sn(r,this.array),i=Sn(i,this.array),s=Sn(s,this.array)),this.array[e+0]=co(n),this.array[e+1]=co(r),this.array[e+2]=co(i),this.array[e+3]=co(s),this}}class Mi extends Bs{constructor(e,n,r){super(new Float32Array(e),n,r)}}let P2e=0;const Go=new In,G3=new Gi,Qm=new ae,uo=new Wp,$y=new Wp,hs=new ae;class Us extends Yc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:P2e++}),this.uuid=Qu(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Jk(e)?sB:iB)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new pn().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Go.makeRotationFromQuaternion(e),this.applyMatrix4(Go),this}rotateX(e){return Go.makeRotationX(e),this.applyMatrix4(Go),this}rotateY(e){return Go.makeRotationY(e),this.applyMatrix4(Go),this}rotateZ(e){return Go.makeRotationZ(e),this.applyMatrix4(Go),this}translate(e,n,r){return Go.makeTranslation(e,n,r),this.applyMatrix4(Go),this}scale(e,n,r){return Go.makeScale(e,n,r),this.applyMatrix4(Go),this}lookAt(e){return G3.lookAt(e),G3.updateMatrix(),this.applyMatrix4(G3.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Qm).negate(),this.translate(Qm.x,Qm.y,Qm.z),this}setFromPoints(e){const n=this.getAttribute("position");if(n===void 0){const r=[];for(let i=0,s=e.length;i<s;i++){const a=e[i];r.push(a.x,a.y,a.z||0)}this.setAttribute("position",new Mi(r,3))}else{const r=Math.min(e.length,n.count);for(let i=0;i<r;i++){const s=e[i];n.setXYZ(i,s.x,s.y,s.z||0)}e.length>n.count&&ct("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),n.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Wp);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){xt("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ae(-1/0,-1/0,-1/0),new ae(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const s=n[r];uo.setFromBufferAttribute(s),this.morphTargetsRelative?(hs.addVectors(this.boundingBox.min,uo.min),this.boundingBox.expandByPoint(hs),hs.addVectors(this.boundingBox.max,uo.max),this.boundingBox.expandByPoint(hs)):(this.boundingBox.expandByPoint(uo.min),this.boundingBox.expandByPoint(uo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&xt('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new A_);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){xt("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ae,1/0);return}if(e){const r=this.boundingSphere.center;if(uo.setFromBufferAttribute(e),n)for(let s=0,a=n.length;s<a;s++){const o=n[s];$y.setFromBufferAttribute(o),this.morphTargetsRelative?(hs.addVectors(uo.min,$y.min),uo.expandByPoint(hs),hs.addVectors(uo.max,$y.max),uo.expandByPoint(hs)):(uo.expandByPoint($y.min),uo.expandByPoint($y.max))}uo.getCenter(r);let i=0;for(let s=0,a=e.count;s<a;s++)hs.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(hs));if(n)for(let s=0,a=n.length;s<a;s++){const o=n[s],l=this.morphTargetsRelative;for(let c=0,u=o.count;c<u;c++)hs.fromBufferAttribute(o,c),l&&(Qm.fromBufferAttribute(e,c),hs.add(Qm)),i=Math.max(i,r.distanceToSquared(hs))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&xt('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){xt("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=n.position,i=n.normal,s=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Bs(new Float32Array(4*r.count),4));const a=this.getAttribute("tangent"),o=[],l=[];for(let D=0;D<r.count;D++)o[D]=new ae,l[D]=new ae;const c=new ae,u=new ae,f=new ae,p=new mt,m=new mt,x=new mt,b=new ae,v=new ae;function _(D,N,L){c.fromBufferAttribute(r,D),u.fromBufferAttribute(r,N),f.fromBufferAttribute(r,L),p.fromBufferAttribute(s,D),m.fromBufferAttribute(s,N),x.fromBufferAttribute(s,L),u.sub(c),f.sub(c),m.sub(p),x.sub(p);const k=1/(m.x*x.y-x.x*m.y);isFinite(k)&&(b.copy(u).multiplyScalar(x.y).addScaledVector(f,-m.y).multiplyScalar(k),v.copy(f).multiplyScalar(m.x).addScaledVector(u,-x.x).multiplyScalar(k),o[D].add(b),o[N].add(b),o[L].add(b),l[D].add(v),l[N].add(v),l[L].add(v))}let E=this.groups;E.length===0&&(E=[{start:0,count:e.count}]);for(let D=0,N=E.length;D<N;++D){const L=E[D],k=L.start,I=L.count;for(let F=k,z=k+I;F<z;F+=3)_(e.getX(F+0),e.getX(F+1),e.getX(F+2))}const T=new ae,A=new ae,C=new ae,M=new ae;function P(D){C.fromBufferAttribute(i,D),M.copy(C);const N=o[D];T.copy(N),T.sub(C.multiplyScalar(C.dot(N))).normalize(),A.crossVectors(M,N);const k=A.dot(l[D])<0?-1:1;a.setXYZW(D,T.x,T.y,T.z,k)}for(let D=0,N=E.length;D<N;++D){const L=E[D],k=L.start,I=L.count;for(let F=k,z=k+I;F<z;F+=3)P(e.getX(F+0)),P(e.getX(F+1)),P(e.getX(F+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Bs(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let p=0,m=r.count;p<m;p++)r.setXYZ(p,0,0,0);const i=new ae,s=new ae,a=new ae,o=new ae,l=new ae,c=new ae,u=new ae,f=new ae;if(e)for(let p=0,m=e.count;p<m;p+=3){const x=e.getX(p+0),b=e.getX(p+1),v=e.getX(p+2);i.fromBufferAttribute(n,x),s.fromBufferAttribute(n,b),a.fromBufferAttribute(n,v),u.subVectors(a,s),f.subVectors(i,s),u.cross(f),o.fromBufferAttribute(r,x),l.fromBufferAttribute(r,b),c.fromBufferAttribute(r,v),o.add(u),l.add(u),c.add(u),r.setXYZ(x,o.x,o.y,o.z),r.setXYZ(b,l.x,l.y,l.z),r.setXYZ(v,c.x,c.y,c.z)}else for(let p=0,m=n.count;p<m;p+=3)i.fromBufferAttribute(n,p+0),s.fromBufferAttribute(n,p+1),a.fromBufferAttribute(n,p+2),u.subVectors(a,s),f.subVectors(i,s),u.cross(f),r.setXYZ(p+0,u.x,u.y,u.z),r.setXYZ(p+1,u.x,u.y,u.z),r.setXYZ(p+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)hs.fromBufferAttribute(e,n),hs.normalize(),e.setXYZ(n,hs.x,hs.y,hs.z)}toNonIndexed(){function e(o,l){const c=o.array,u=o.itemSize,f=o.normalized,p=new c.constructor(l.length*u);let m=0,x=0;for(let b=0,v=l.length;b<v;b++){o.isInterleavedBufferAttribute?m=l[b]*o.data.stride+o.offset:m=l[b]*u;for(let _=0;_<u;_++)p[x++]=c[m++]}return new Bs(p,u,f)}if(this.index===null)return ct("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new Us,r=this.index.array,i=this.attributes;for(const o in i){const l=i[o],c=e(l,r);n.setAttribute(o,c)}const s=this.morphAttributes;for(const o in s){const l=[],c=s[o];for(let u=0,f=c.length;u<f;u++){const p=c[u],m=e(p,r);l.push(m)}n.morphAttributes[o]=l}n.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const c=a[o];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let f=0,p=c.length;f<p;f++){const m=c[f];u.push(m.toJSON(e.data))}u.length>0&&(i[l]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere=o.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone());const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(n))}const s=e.morphAttributes;for(const c in s){const u=[],f=s[c];for(let p=0,m=f.length;p<m;p++)u.push(f[p].clone(n));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let c=0,u=a.length;c<u;c++){const f=a[c];this.addGroup(f.start,f.count,f.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const j$=new In,Mh=new cC,JS=new A_,z$=new ae,ew=new ae,tw=new ae,nw=new ae,V3=new ae,rw=new ae,$$=new ae,iw=new ae;class Ji extends Gi{constructor(e=new Us,n=new Cc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,a=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const o=this.morphTargetInfluences;if(s&&o){rw.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=o[l],f=s[l];u!==0&&(V3.fromBufferAttribute(f,e),a?rw.addScaledVector(V3,u):rw.addScaledVector(V3.sub(n),u))}n.add(rw)}return n}raycast(e,n){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),JS.copy(r.boundingSphere),JS.applyMatrix4(s),Mh.copy(e.ray).recast(e.near),!(JS.containsPoint(Mh.origin)===!1&&(Mh.intersectSphere(JS,z$)===null||Mh.origin.distanceToSquared(z$)>(e.far-e.near)**2))&&(j$.copy(s).invert(),Mh.copy(e.ray).applyMatrix4(j$),!(r.boundingBox!==null&&Mh.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,Mh)))}_computeIntersections(e,n,r){let i;const s=this.geometry,a=this.material,o=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,f=s.attributes.normal,p=s.groups,m=s.drawRange;if(o!==null)if(Array.isArray(a))for(let x=0,b=p.length;x<b;x++){const v=p[x],_=a[v.materialIndex],E=Math.max(v.start,m.start),T=Math.min(o.count,Math.min(v.start+v.count,m.start+m.count));for(let A=E,C=T;A<C;A+=3){const M=o.getX(A),P=o.getX(A+1),D=o.getX(A+2);i=sw(this,_,e,r,c,u,f,M,P,D),i&&(i.faceIndex=Math.floor(A/3),i.face.materialIndex=v.materialIndex,n.push(i))}}else{const x=Math.max(0,m.start),b=Math.min(o.count,m.start+m.count);for(let v=x,_=b;v<_;v+=3){const E=o.getX(v),T=o.getX(v+1),A=o.getX(v+2);i=sw(this,a,e,r,c,u,f,E,T,A),i&&(i.faceIndex=Math.floor(v/3),n.push(i))}}else if(l!==void 0)if(Array.isArray(a))for(let x=0,b=p.length;x<b;x++){const v=p[x],_=a[v.materialIndex],E=Math.max(v.start,m.start),T=Math.min(l.count,Math.min(v.start+v.count,m.start+m.count));for(let A=E,C=T;A<C;A+=3){const M=A,P=A+1,D=A+2;i=sw(this,_,e,r,c,u,f,M,P,D),i&&(i.faceIndex=Math.floor(A/3),i.face.materialIndex=v.materialIndex,n.push(i))}}else{const x=Math.max(0,m.start),b=Math.min(l.count,m.start+m.count);for(let v=x,_=b;v<_;v+=3){const E=v,T=v+1,A=v+2;i=sw(this,a,e,r,c,u,f,E,T,A),i&&(i.faceIndex=Math.floor(v/3),n.push(i))}}}}function N2e(t,e,n,r,i,s,a,o){let l;if(e.side===Sr?l=r.intersectTriangle(a,s,i,!0,o):l=r.intersectTriangle(i,s,a,e.side===wo,o),l===null)return null;iw.copy(o),iw.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(iw);return c<n.near||c>n.far?null:{distance:c,point:iw.clone(),object:t}}function sw(t,e,n,r,i,s,a,o,l,c){t.getVertexPosition(o,ew),t.getVertexPosition(l,tw),t.getVertexPosition(c,nw);const u=N2e(t,e,n,r,ew,tw,nw,$$);if(u){const f=new ae;Il.getBarycoord($$,ew,tw,nw,f),i&&(u.uv=Il.getInterpolatedAttribute(i,o,l,c,f,new mt)),s&&(u.uv1=Il.getInterpolatedAttribute(s,o,l,c,f,new mt)),a&&(u.normal=Il.getInterpolatedAttribute(a,o,l,c,f,new ae),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const p={a:o,b:l,c,normal:new ae,materialIndex:0};Il.getNormal(ew,tw,nw,p.normal),u.face=p,u.barycoord=f}return u}class qp extends Us{constructor(e=1,n=1,r=1,i=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:s,depthSegments:a};const o=this;i=Math.floor(i),s=Math.floor(s),a=Math.floor(a);const l=[],c=[],u=[],f=[];let p=0,m=0;x("z","y","x",-1,-1,r,n,e,a,s,0),x("z","y","x",1,-1,r,n,-e,a,s,1),x("x","z","y",1,1,e,r,n,i,a,2),x("x","z","y",1,-1,e,r,-n,i,a,3),x("x","y","z",1,-1,e,n,r,i,s,4),x("x","y","z",-1,-1,e,n,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new Mi(c,3)),this.setAttribute("normal",new Mi(u,3)),this.setAttribute("uv",new Mi(f,2));function x(b,v,_,E,T,A,C,M,P,D,N){const L=A/P,k=C/D,I=A/2,F=C/2,z=M/2,H=P+1,B=D+1;let j=0,G=0;const W=new ae;for(let re=0;re<B;re++){const $=re*k-F;for(let ee=0;ee<H;ee++){const oe=ee*L-I;W[b]=oe*E,W[v]=$*T,W[_]=z,c.push(W.x,W.y,W.z),W[b]=0,W[v]=0,W[_]=M>0?1:-1,u.push(W.x,W.y,W.z),f.push(ee/P),f.push(1-re/D),j+=1}}for(let re=0;re<D;re++)for(let $=0;$<P;$++){const ee=p+$+H*re,oe=p+$+H*(re+1),me=p+($+1)+H*(re+1),te=p+($+1)+H*re;l.push(ee,oe,te),l.push(oe,me,te),G+=6}o.addGroup(m,G,N),m+=G,p+=j}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new qp(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function k0(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(ct("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function ua(t){const e={};for(let n=0;n<t.length;n++){const r=k0(t[n]);for(const i in r)e[i]=r[i]}return e}function O2e(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function WZ(t){const e=t.getRenderTarget();return e===null?t.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:sn.workingColorSpace}const qZ={clone:k0,merge:ua};var D2e=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,L2e=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Yl extends sa{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=D2e,this.fragmentShader=L2e,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=k0(e.uniforms),this.uniformsGroups=O2e(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const a=this.uniforms[i].value;a&&a.isTexture?n.uniforms[i]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?n.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?n.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?n.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?n.uniforms[i]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?n.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?n.uniforms[i]={type:"m4",value:a.toArray()}:n.uniforms[i]={value:a}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class aB extends Gi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new In,this.projectionMatrix=new In,this.projectionMatrixInverse=new In,this.coordinateSystem=va,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const cf=new ae,G$=new mt,V$=new mt;class ys extends aB{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=Np*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Wv*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Np*2*Math.atan(Math.tan(Wv*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,r){cf.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(cf.x,cf.y).multiplyScalar(-e/cf.z),cf.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(cf.x,cf.y).multiplyScalar(-e/cf.z)}getViewSize(e,n){return this.getViewBounds(e,G$,V$),n.subVectors(V$,G$)}setViewOffset(e,n,r,i,s,a){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(Wv*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,s=-.5*i;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,c=a.fullHeight;s+=a.offsetX*i/l,n-=a.offsetY*r/c,i*=a.width/l,r*=a.height/c}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,n,n-r,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const Jm=-90,eg=1;class XZ extends Gi{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new ys(Jm,eg,e,n);i.layers=this.layers,this.add(i);const s=new ys(Jm,eg,e,n);s.layers=this.layers,this.add(s);const a=new ys(Jm,eg,e,n);a.layers=this.layers,this.add(a);const o=new ys(Jm,eg,e,n);o.layers=this.layers,this.add(o);const l=new ys(Jm,eg,e,n);l.layers=this.layers,this.add(l);const c=new ys(Jm,eg,e,n);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,s,a,o,l]=n;for(const c of n)this.remove(c);if(e===va)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===jf)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of n)this.add(c),c.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,o,l,c,u]=this.children,f=e.getRenderTarget(),p=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),x=e.xr.enabled;e.xr.enabled=!1;const b=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,s),e.setRenderTarget(r,1,i),e.render(n,a),e.setRenderTarget(r,2,i),e.render(n,o),e.setRenderTarget(r,3,i),e.render(n,l),e.setRenderTarget(r,4,i),e.render(n,c),r.texture.generateMipmaps=b,e.setRenderTarget(r,5,i),e.render(n,u),e.setRenderTarget(f,p,m),e.xr.enabled=x,r.texture.needsPMREMUpdate=!0}}class M_ extends $i{constructor(e=[],n=Fc,r,i,s,a,o,l,c,u){super(e,n,r,i,s,a,o,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class YZ extends zf{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new M_(i),this._setTextureOptions(n),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new qp(5,5,5),s=new Yl({name:"CubemapFromEquirect",uniforms:k0(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Sr,blending:_a});s.uniforms.tEquirect.value=n;const a=new Ji(i,s),o=n.minFilter;return n.minFilter===za&&(n.minFilter=ii),new XZ(1,10,this).update(e,a),n.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,n=!0,r=!0,i=!0){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(n,r,i);e.setRenderTarget(s)}}let Ag=class extends Gi{constructor(){super(),this.isGroup=!0,this.type="Group"}};const I2e={type:"move"};class TT{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ag,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ag,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ae,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ae),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ag,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ae,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ae),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,s=null,a=null;const o=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){a=!0;for(const b of e.hand.values()){const v=n.getJointPose(b,r),_=this._getHandJoint(c,b);v!==null&&(_.matrix.fromArray(v.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,_.jointRadius=v.radius),_.visible=v!==null}const u=c.joints["index-finger-tip"],f=c.joints["thumb-tip"],p=u.position.distanceTo(f.position),m=.02,x=.005;c.inputState.pinching&&p>m+x?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&p<=m-x&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(I2e)))}return o!==null&&(o.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=a!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new Ag;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}class uC extends Gi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Ka,this.environmentIntensity=1,this.environmentRotation=new Ka,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class KZ{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=r2,this.updateRanges=[],this.version=0,this.uuid=Qu()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,r){e*=this.stride,r*=n.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=n.array[r+i];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Qu()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Qu()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const la=new ae;class oB{constructor(e,n,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,r=this.data.count;n<r;n++)la.fromBufferAttribute(this,n),la.applyMatrix4(e),this.setXYZ(n,la.x,la.y,la.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)la.fromBufferAttribute(this,n),la.applyNormalMatrix(e),this.setXYZ(n,la.x,la.y,la.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)la.fromBufferAttribute(this,n),la.transformDirection(e),this.setXYZ(n,la.x,la.y,la.z);return this}getComponent(e,n){let r=this.array[e*this.data.stride+this.offset+n];return this.normalized&&(r=ga(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Sn(r,this.array)),this.data.array[e*this.data.stride+this.offset+n]=r,this}setX(e,n){return this.normalized&&(n=Sn(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=Sn(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=Sn(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=Sn(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=ga(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=ga(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=ga(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=ga(n,this.array)),n}setXY(e,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=Sn(n,this.array),r=Sn(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this}setXYZ(e,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=Sn(n,this.array),r=Sn(r,this.array),i=Sn(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=Sn(n,this.array),r=Sn(r,this.array),i=Sn(i,this.array),s=Sn(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){Ib("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return new Bs(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new oB(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){Ib("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class k2e extends sa{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Xt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}class lB extends $i{constructor(e=null,n=1,r=1,i,s,a,o,l,c=Lr,u=Lr,f,p){super(null,a,o,l,c,u,i,s,f,p),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class B2e extends Bs{constructor(e,n,r,i=1){super(e,n,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const H3=new ae,F2e=new ae,U2e=new pn;class Ll{constructor(e=new ae(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=H3.subVectors(r,n).cross(F2e.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(H3),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:n.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||U2e.getNormalMatrix(e),i=this.coplanarPoint(H3).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Rh=new A_,j2e=new mt(.5,.5),aw=new ae;class R_{constructor(e=new Ll,n=new Ll,r=new Ll,i=new Ll,s=new Ll,a=new Ll){this.planes=[e,n,r,i,s,a]}set(e,n,r,i,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(n),o[2].copy(r),o[3].copy(i),o[4].copy(s),o[5].copy(a),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=va,r=!1){const i=this.planes,s=e.elements,a=s[0],o=s[1],l=s[2],c=s[3],u=s[4],f=s[5],p=s[6],m=s[7],x=s[8],b=s[9],v=s[10],_=s[11],E=s[12],T=s[13],A=s[14],C=s[15];if(i[0].setComponents(c-a,m-u,_-x,C-E).normalize(),i[1].setComponents(c+a,m+u,_+x,C+E).normalize(),i[2].setComponents(c+o,m+f,_+b,C+T).normalize(),i[3].setComponents(c-o,m-f,_-b,C-T).normalize(),r)i[4].setComponents(l,p,v,A).normalize(),i[5].setComponents(c-l,m-p,_-v,C-A).normalize();else if(i[4].setComponents(c-l,m-p,_-v,C-A).normalize(),n===va)i[5].setComponents(c+l,m+p,_+v,C+A).normalize();else if(n===jf)i[5].setComponents(l,p,v,A).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Rh.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),Rh.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Rh)}intersectsSprite(e){Rh.center.set(0,0,0);const n=j2e.distanceTo(e.center);return Rh.radius=.7071067811865476+n,Rh.applyMatrix4(e.matrixWorld),this.intersectsSphere(Rh)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(aw.x=i.normal.x>0?e.max.x:e.min.x,aw.y=i.normal.y>0?e.max.y:e.min.y,aw.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(aw)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const hc=new In,pc=new R_;class cB{constructor(){this.coordinateSystem=va}intersectsObject(e,n){if(!n.isArrayCamera||n.cameras.length===0)return!1;for(let r=0;r<n.cameras.length;r++){const i=n.cameras[r];if(hc.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),pc.setFromProjectionMatrix(hc,i.coordinateSystem,i.reversedDepth),pc.intersectsObject(e))return!0}return!1}intersectsSprite(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let r=0;r<n.cameras.length;r++){const i=n.cameras[r];if(hc.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),pc.setFromProjectionMatrix(hc,i.coordinateSystem,i.reversedDepth),pc.intersectsSprite(e))return!0}return!1}intersectsSphere(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let r=0;r<n.cameras.length;r++){const i=n.cameras[r];if(hc.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),pc.setFromProjectionMatrix(hc,i.coordinateSystem,i.reversedDepth),pc.intersectsSphere(e))return!0}return!1}intersectsBox(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let r=0;r<n.cameras.length;r++){const i=n.cameras[r];if(hc.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),pc.setFromProjectionMatrix(hc,i.coordinateSystem,i.reversedDepth),pc.intersectsBox(e))return!0}return!1}containsPoint(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let r=0;r<n.cameras.length;r++){const i=n.cameras[r];if(hc.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),pc.setFromProjectionMatrix(hc,i.coordinateSystem,i.reversedDepth),pc.containsPoint(e))return!0}return!1}clone(){return new cB}}class dC extends sa{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Xt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const s2=new ae,a2=new ae,H$=new In,Gy=new cC,ow=new A_,W3=new ae,W$=new ae;class z2e extends Gi{constructor(e=new Us,n=new dC){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let i=1,s=n.count;i<s;i++)s2.fromBufferAttribute(n,i-1),a2.fromBufferAttribute(n,i),r[i]=r[i-1],r[i]+=s2.distanceTo(a2);e.setAttribute("lineDistance",new Mi(r,1))}else ct("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,a=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),ow.copy(r.boundingSphere),ow.applyMatrix4(i),ow.radius+=s,e.ray.intersectsSphere(ow)===!1)return;H$.copy(i).invert(),Gy.copy(e.ray).applyMatrix4(H$);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=this.isLineSegments?2:1,u=r.index,p=r.attributes.position;if(u!==null){const m=Math.max(0,a.start),x=Math.min(u.count,a.start+a.count);for(let b=m,v=x-1;b<v;b+=c){const _=u.getX(b),E=u.getX(b+1),T=lw(this,e,Gy,l,_,E,b);T&&n.push(T)}if(this.isLineLoop){const b=u.getX(x-1),v=u.getX(m),_=lw(this,e,Gy,l,b,v,x-1);_&&n.push(_)}}else{const m=Math.max(0,a.start),x=Math.min(p.count,a.start+a.count);for(let b=m,v=x-1;b<v;b+=c){const _=lw(this,e,Gy,l,b,b+1,b);_&&n.push(_)}if(this.isLineLoop){const b=lw(this,e,Gy,l,x-1,m,x-1);b&&n.push(b)}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function lw(t,e,n,r,i,s,a){const o=t.geometry.attributes.position;if(s2.fromBufferAttribute(o,i),a2.fromBufferAttribute(o,s),n.distanceSqToSegment(s2,a2,W3,W$)>r)return;W3.applyMatrix4(t.matrixWorld);const c=e.ray.origin.distanceTo(W3);if(!(c<e.near||c>e.far))return{distance:c,point:W$.clone().applyMatrix4(t.matrixWorld),index:a,face:null,faceIndex:null,barycoord:null,object:t}}class $2e extends sa{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Xt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}class ZZ extends $i{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=Lr,this.minFilter=Lr,this.generateMipmaps=!1,this.needsUpdate=!0}}class ol extends $i{constructor(e,n,r=Ar,i,s,a,o=Lr,l=Lr,c,u=Co,f=1){if(u!==Co&&u!==Ao)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const p={width:e,height:n,depth:f};super(p,i,s,a,o,l,u,r,c),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new tB(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}class QZ extends $i{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class P_ extends Us{constructor(e=1,n=1,r=1,i=32,s=1,a=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:r,radialSegments:i,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l};const c=this;i=Math.floor(i),s=Math.floor(s);const u=[],f=[],p=[],m=[];let x=0;const b=[],v=r/2;let _=0;E(),a===!1&&(e>0&&T(!0),n>0&&T(!1)),this.setIndex(u),this.setAttribute("position",new Mi(f,3)),this.setAttribute("normal",new Mi(p,3)),this.setAttribute("uv",new Mi(m,2));function E(){const A=new ae,C=new ae;let M=0;const P=(n-e)/r;for(let D=0;D<=s;D++){const N=[],L=D/s,k=L*(n-e)+e;for(let I=0;I<=i;I++){const F=I/i,z=F*l+o,H=Math.sin(z),B=Math.cos(z);C.x=k*H,C.y=-L*r+v,C.z=k*B,f.push(C.x,C.y,C.z),A.set(H,P,B).normalize(),p.push(A.x,A.y,A.z),m.push(F,1-L),N.push(x++)}b.push(N)}for(let D=0;D<i;D++)for(let N=0;N<s;N++){const L=b[N][D],k=b[N+1][D],I=b[N+1][D+1],F=b[N][D+1];(e>0||N!==0)&&(u.push(L,k,F),M+=3),(n>0||N!==s-1)&&(u.push(k,I,F),M+=3)}c.addGroup(_,M,0),_+=M}function T(A){const C=x,M=new mt,P=new ae;let D=0;const N=A===!0?e:n,L=A===!0?1:-1;for(let I=1;I<=i;I++)f.push(0,v*L,0),p.push(0,L,0),m.push(.5,.5),x++;const k=x;for(let I=0;I<=i;I++){const z=I/i*l+o,H=Math.cos(z),B=Math.sin(z);P.x=N*B,P.y=v*L,P.z=N*H,f.push(P.x,P.y,P.z),p.push(0,L,0),M.x=H*.5+.5,M.y=B*.5*L+.5,m.push(M.x,M.y),x++}for(let I=0;I<i;I++){const F=C+I,z=k+I;A===!0?u.push(z,z+1,F):u.push(z+1,z,F),D+=3}c.addGroup(_,D,A===!0?1:2),_+=D}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new P_(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class uB extends P_{constructor(e=1,n=1,r=32,i=1,s=!1,a=0,o=Math.PI*2){super(0,e,n,r,i,s,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:a,thetaLength:o}}static fromJSON(e){return new uB(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}let Sd=class{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){ct("Curve: .getPoint() not implemented.")}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,i=this.getPoint(0),s=0;n.push(0);for(let a=1;a<=e;a++)r=this.getPoint(a/e),s+=r.distanceTo(i),n.push(s),i=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n=null){const r=this.getLengths();let i=0;const s=r.length;let a;n?a=n:a=e*r[s-1];let o=0,l=s-1,c;for(;o<=l;)if(i=Math.floor(o+(l-o)/2),c=r[i]-a,c<0)o=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===a)return i/(s-1);const u=r[i],p=r[i+1]-u,m=(a-u)/p;return(i+m)/(s-1)}getTangent(e,n){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const a=this.getPoint(i),o=this.getPoint(s),l=n||(a.isVector2?new mt:new ae);return l.copy(o).sub(a).normalize(),l}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n=!1){const r=new ae,i=[],s=[],a=[],o=new ae,l=new In;for(let m=0;m<=e;m++){const x=m/e;i[m]=this.getTangentAt(x,new ae)}s[0]=new ae,a[0]=new ae;let c=Number.MAX_VALUE;const u=Math.abs(i[0].x),f=Math.abs(i[0].y),p=Math.abs(i[0].z);u<=c&&(c=u,r.set(1,0,0)),f<=c&&(c=f,r.set(0,1,0)),p<=c&&r.set(0,0,1),o.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],o),a[0].crossVectors(i[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),a[m]=a[m-1].clone(),o.crossVectors(i[m-1],i[m]),o.length()>Number.EPSILON){o.normalize();const x=Math.acos(Tn(i[m-1].dot(i[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(o,x))}a[m].crossVectors(i[m],s[m])}if(n===!0){let m=Math.acos(Tn(s[0].dot(s[e]),-1,1));m/=e,i[0].dot(o.crossVectors(s[0],s[e]))>0&&(m=-m);for(let x=1;x<=e;x++)s[x].applyMatrix4(l.makeRotationAxis(i[x],m*x)),a[x].crossVectors(i[x],s[x])}return{tangents:i,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}};class JZ extends Sd{constructor(e=0,n=0,r=1,i=1,s=0,a=Math.PI*2,o=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=o,this.aRotation=l}getPoint(e,n=new mt){const r=n,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(a?s=0:s=i),this.aClockwise===!0&&!a&&(s===i?s=-i:s=s-i);const o=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(o),c=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const u=Math.cos(this.aRotation),f=Math.sin(this.aRotation),p=l-this.aX,m=c-this.aY;l=p*u-m*f+this.aX,c=p*f+m*u+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class G2e extends JZ{constructor(e,n,r,i,s,a){super(e,n,r,r,i,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function dB(){let t=0,e=0,n=0,r=0;function i(s,a,o,l){t=s,e=o,n=-3*s+3*a-2*o-l,r=2*s-2*a+o+l}return{initCatmullRom:function(s,a,o,l,c){i(a,o,c*(o-s),c*(l-a))},initNonuniformCatmullRom:function(s,a,o,l,c,u,f){let p=(a-s)/c-(o-s)/(c+u)+(o-a)/u,m=(o-a)/u-(l-a)/(u+f)+(l-o)/f;p*=u,m*=u,i(a,o,p,m)},calc:function(s){const a=s*s,o=a*s;return t+e*s+n*a+r*o}}}const cw=new ae,q3=new dB,X3=new dB,Y3=new dB;class V2e extends Sd{constructor(e=[],n=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=r,this.tension=i}getPoint(e,n=new ae){const r=n,i=this.points,s=i.length,a=(s-(this.closed?0:1))*e;let o=Math.floor(a),l=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/s)+1)*s:l===0&&o===s-1&&(o=s-2,l=1);let c,u;this.closed||o>0?c=i[(o-1)%s]:(cw.subVectors(i[0],i[1]).add(i[0]),c=cw);const f=i[o%s],p=i[(o+1)%s];if(this.closed||o+2<s?u=i[(o+2)%s]:(cw.subVectors(i[s-1],i[s-2]).add(i[s-1]),u=cw),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let x=Math.pow(c.distanceToSquared(f),m),b=Math.pow(f.distanceToSquared(p),m),v=Math.pow(p.distanceToSquared(u),m);b<1e-4&&(b=1),x<1e-4&&(x=b),v<1e-4&&(v=b),q3.initNonuniformCatmullRom(c.x,f.x,p.x,u.x,x,b,v),X3.initNonuniformCatmullRom(c.y,f.y,p.y,u.y,x,b,v),Y3.initNonuniformCatmullRom(c.z,f.z,p.z,u.z,x,b,v)}else this.curveType==="catmullrom"&&(q3.initCatmullRom(c.x,f.x,p.x,u.x,this.tension),X3.initCatmullRom(c.y,f.y,p.y,u.y,this.tension),Y3.initCatmullRom(c.z,f.z,p.z,u.z,this.tension));return r.set(q3.calc(l),X3.calc(l),Y3.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new ae().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function q$(t,e,n,r,i){const s=(r-e)*.5,a=(i-n)*.5,o=t*t,l=t*o;return(2*n-2*r+s+a)*l+(-3*n+3*r-2*s-a)*o+s*t+n}function H2e(t,e){const n=1-t;return n*n*e}function W2e(t,e){return 2*(1-t)*t*e}function q2e(t,e){return t*t*e}function Xv(t,e,n,r){return H2e(t,e)+W2e(t,n)+q2e(t,r)}function X2e(t,e){const n=1-t;return n*n*n*e}function Y2e(t,e){const n=1-t;return 3*n*n*t*e}function K2e(t,e){return 3*(1-t)*t*t*e}function Z2e(t,e){return t*t*t*e}function Yv(t,e,n,r,i){return X2e(t,e)+Y2e(t,n)+K2e(t,r)+Z2e(t,i)}class Q2e extends Sd{constructor(e=new mt,n=new mt,r=new mt,i=new mt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new mt){const r=n,i=this.v0,s=this.v1,a=this.v2,o=this.v3;return r.set(Yv(e,i.x,s.x,a.x,o.x),Yv(e,i.y,s.y,a.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class eQ extends Sd{constructor(e=new ae,n=new ae,r=new ae,i=new ae){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new ae){const r=n,i=this.v0,s=this.v1,a=this.v2,o=this.v3;return r.set(Yv(e,i.x,s.x,a.x,o.x),Yv(e,i.y,s.y,a.y,o.y),Yv(e,i.z,s.z,a.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class J2e extends Sd{constructor(e=new mt,n=new mt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new mt){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new mt){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class eEe extends Sd{constructor(e=new ae,n=new ae){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new ae){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new ae){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class tEe extends Sd{constructor(e=new mt,n=new mt,r=new mt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new mt){const r=n,i=this.v0,s=this.v1,a=this.v2;return r.set(Xv(e,i.x,s.x,a.x),Xv(e,i.y,s.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class fB extends Sd{constructor(e=new ae,n=new ae,r=new ae){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new ae){const r=n,i=this.v0,s=this.v1,a=this.v2;return r.set(Xv(e,i.x,s.x,a.x),Xv(e,i.y,s.y,a.y),Xv(e,i.z,s.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class nEe extends Sd{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new mt){const r=n,i=this.points,s=(i.length-1)*e,a=Math.floor(s),o=s-a,l=i[a===0?a:a-1],c=i[a],u=i[a>i.length-2?i.length-1:a+1],f=i[a>i.length-3?i.length-1:a+2];return r.set(q$(o,l.x,c.x,u.x,f.x),q$(o,l.y,c.y,u.y,f.y)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new mt().fromArray(i))}return this}}var rEe=Object.freeze({__proto__:null,ArcCurve:G2e,CatmullRomCurve3:V2e,CubicBezierCurve:Q2e,CubicBezierCurve3:eQ,EllipseCurve:JZ,LineCurve:J2e,LineCurve3:eEe,QuadraticBezierCurve:tEe,QuadraticBezierCurve3:fB,SplineCurve:nEe});class N_ extends Us{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const s=e/2,a=n/2,o=Math.floor(r),l=Math.floor(i),c=o+1,u=l+1,f=e/o,p=n/l,m=[],x=[],b=[],v=[];for(let _=0;_<u;_++){const E=_*p-a;for(let T=0;T<c;T++){const A=T*f-s;x.push(A,-E,0),b.push(0,0,1),v.push(T/o),v.push(1-_/l)}}for(let _=0;_<l;_++)for(let E=0;E<o;E++){const T=E+c*_,A=E+c*(_+1),C=E+1+c*(_+1),M=E+1+c*_;m.push(T,A,M),m.push(A,C,M)}this.setIndex(m),this.setAttribute("position",new Mi(x,3)),this.setAttribute("normal",new Mi(b,3)),this.setAttribute("uv",new Mi(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new N_(e.width,e.height,e.widthSegments,e.heightSegments)}}class O_ extends Us{constructor(e=1,n=32,r=16,i=0,s=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:s,thetaStart:a,thetaLength:o},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const l=Math.min(a+o,Math.PI);let c=0;const u=[],f=new ae,p=new ae,m=[],x=[],b=[],v=[];for(let _=0;_<=r;_++){const E=[],T=_/r;let A=0;_===0&&a===0?A=.5/n:_===r&&l===Math.PI&&(A=-.5/n);for(let C=0;C<=n;C++){const M=C/n;f.x=-e*Math.cos(i+M*s)*Math.sin(a+T*o),f.y=e*Math.cos(a+T*o),f.z=e*Math.sin(i+M*s)*Math.sin(a+T*o),x.push(f.x,f.y,f.z),p.copy(f).normalize(),b.push(p.x,p.y,p.z),v.push(M+A,1-T),E.push(c++)}u.push(E)}for(let _=0;_<r;_++)for(let E=0;E<n;E++){const T=u[_][E+1],A=u[_][E],C=u[_+1][E],M=u[_+1][E+1];(_!==0||a>0)&&m.push(T,A,M),(_!==r-1||l<Math.PI)&&m.push(A,C,M)}this.setIndex(m),this.setAttribute("position",new Mi(x,3)),this.setAttribute("normal",new Mi(b,3)),this.setAttribute("uv",new Mi(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new O_(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class hB extends Us{constructor(e=new fB(new ae(-1,-1,0),new ae(-1,1,0),new ae(1,1,0)),n=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:r,radialSegments:i,closed:s};const a=e.computeFrenetFrames(n,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const o=new ae,l=new ae,c=new mt;let u=new ae;const f=[],p=[],m=[],x=[];b(),this.setIndex(x),this.setAttribute("position",new Mi(f,3)),this.setAttribute("normal",new Mi(p,3)),this.setAttribute("uv",new Mi(m,2));function b(){for(let T=0;T<n;T++)v(T);v(s===!1?n:0),E(),_()}function v(T){u=e.getPointAt(T/n,u);const A=a.normals[T],C=a.binormals[T];for(let M=0;M<=i;M++){const P=M/i*Math.PI*2,D=Math.sin(P),N=-Math.cos(P);l.x=N*A.x+D*C.x,l.y=N*A.y+D*C.y,l.z=N*A.z+D*C.z,l.normalize(),p.push(l.x,l.y,l.z),o.x=u.x+r*l.x,o.y=u.y+r*l.y,o.z=u.z+r*l.z,f.push(o.x,o.y,o.z)}}function _(){for(let T=1;T<=n;T++)for(let A=1;A<=i;A++){const C=(i+1)*(T-1)+(A-1),M=(i+1)*T+(A-1),P=(i+1)*T+A,D=(i+1)*(T-1)+A;x.push(C,M,D),x.push(M,P,D)}}function E(){for(let T=0;T<=n;T++)for(let A=0;A<=i;A++)c.x=T/n,c.y=A/i,m.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new hB(new rEe[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class iEe extends sa{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Xt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class tQ extends sa{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Xt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Xt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ud,this.normalScale=new mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ka,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class sEe extends tQ{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new mt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Tn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Xt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Xt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Xt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class aEe extends sa{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Xt(16777215),this.specular=new Xt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Xt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ud,this.normalScale=new mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ka,this.combine=T_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class oEe extends sa{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Xt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Xt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ud,this.normalScale=new mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class lEe extends sa{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ud,this.normalScale=new mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class nQ extends sa{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Xt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Xt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ud,this.normalScale=new mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ka,this.combine=T_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class cEe extends sa{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=kTe,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class uEe extends sa{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class dEe extends sa{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Xt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ud,this.normalScale=new mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this.fog=e.fog,this}}class fEe extends dC{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}const K3={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class hEe{constructor(e,n,r){const i=this;let s=!1,a=0,o=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this._abortController=null,this.itemStart=function(u){o++,s===!1&&i.onStart!==void 0&&i.onStart(u,a,o),s=!0},this.itemEnd=function(u){a++,i.onProgress!==void 0&&i.onProgress(u,a,o),a===o&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,f){return c.push(u,f),this},this.removeHandler=function(u){const f=c.indexOf(u);return f!==-1&&c.splice(f,2),this},this.getHandler=function(u){for(let f=0,p=c.length;f<p;f+=2){const m=c[f],x=c[f+1];if(m.global&&(m.lastIndex=0),m.test(u))return x}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const pEe=new hEe;class pB{constructor(e){this.manager=e!==void 0?e:pEe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(i,s){r.load(e,i,n,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}pB.DEFAULT_MATERIAL_NAME="__DEFAULT";const tg=new WeakMap;class mEe extends pB{constructor(e){super(e)}load(e,n,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=K3.get(`image:${e}`);if(a!==void 0){if(a.complete===!0)s.manager.itemStart(e),setTimeout(function(){n&&n(a),s.manager.itemEnd(e)},0);else{let f=tg.get(a);f===void 0&&(f=[],tg.set(a,f)),f.push({onLoad:n,onError:i})}return a}const o=Lb("img");function l(){u(),n&&n(this);const f=tg.get(this)||[];for(let p=0;p<f.length;p++){const m=f[p];m.onLoad&&m.onLoad(this)}tg.delete(this),s.manager.itemEnd(e)}function c(f){u(),i&&i(f),K3.remove(`image:${e}`);const p=tg.get(this)||[];for(let m=0;m<p.length;m++){const x=p[m];x.onError&&x.onError(f)}tg.delete(this),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){o.removeEventListener("load",l,!1),o.removeEventListener("error",c,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),K3.add(`image:${e}`,o),s.manager.itemStart(e),o.src=e,o}}class gEe extends pB{constructor(e){super(e)}load(e,n,r,i){const s=new $i,a=new mEe(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){s.image=o,s.needsUpdate=!0,n!==void 0&&n(s)},r,i),s}}class Xp extends Gi{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new Xt(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(n.object.target=this.target.uuid),n}}class xEe extends Xp{constructor(e,n,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Gi.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Xt(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const Z3=new In,X$=new ae,Y$=new ae;class mB{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new mt(512,512),this.mapType=si,this.map=null,this.mapPass=null,this.matrix=new In,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new R_,this._frameExtents=new mt(1,1),this._viewportCount=1,this._viewports=[new an(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;X$.setFromMatrixPosition(e.matrixWorld),n.position.copy(X$),Y$.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(Y$),n.updateMatrixWorld(),Z3.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Z3,n.coordinateSystem,n.reversedDepth),n.reversedDepth?r.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(Z3)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class yEe extends mB{constructor(){super(new ys(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const n=this.camera,r=Np*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height*this.aspect,s=e.distance||n.far;(r!==n.fov||i!==n.aspect||s!==n.far)&&(n.fov=r,n.aspect=i,n.far=s,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class gB extends Xp{constructor(e,n,r=0,i=Math.PI/3,s=0,a=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Gi.DEFAULT_UP),this.updateMatrix(),this.target=new Gi,this.distance=r,this.angle=i,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new yEe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const K$=new In,Vy=new ae,Q3=new ae;class vEe extends mB{constructor(){super(new ys(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new mt(4,2),this._viewportCount=6,this._viewports=[new an(2,1,1,1),new an(0,1,1,1),new an(3,1,1,1),new an(1,1,1,1),new an(3,0,1,1),new an(1,0,1,1)],this._cubeDirections=[new ae(1,0,0),new ae(-1,0,0),new ae(0,0,1),new ae(0,0,-1),new ae(0,1,0),new ae(0,-1,0)],this._cubeUps=[new ae(0,1,0),new ae(0,1,0),new ae(0,1,0),new ae(0,1,0),new ae(0,0,1),new ae(0,0,-1)]}updateMatrices(e,n=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),Vy.setFromMatrixPosition(e.matrixWorld),r.position.copy(Vy),Q3.copy(r.position),Q3.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(Q3),r.updateMatrixWorld(),i.makeTranslation(-Vy.x,-Vy.y,-Vy.z),K$.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(K$,r.coordinateSystem,r.reversedDepth)}}class bEe extends Xp{constructor(e,n,r=0,i=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new vEe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class D_ extends aB{constructor(e=-1,n=1,r=1,i=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,a=r+e,o=i+n,l=i-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,a=s+c*this.view.width,o-=u*this.view.offsetY,l=o-u*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,l,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}class _Ee extends mB{constructor(){super(new D_(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class rQ extends Xp{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Gi.DEFAULT_UP),this.updateMatrix(),this.target=new Gi,this.shadow=new _Ee}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class iQ extends Xp{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class SEe extends Xp{constructor(e,n,r=10,i=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class wEe{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ae)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const r=e.x,i=e.y,s=e.z,a=this.coefficients;return n.copy(a[0]).multiplyScalar(.282095),n.addScaledVector(a[1],.488603*i),n.addScaledVector(a[2],.488603*s),n.addScaledVector(a[3],.488603*r),n.addScaledVector(a[4],1.092548*(r*i)),n.addScaledVector(a[5],1.092548*(i*s)),n.addScaledVector(a[6],.315392*(3*s*s-1)),n.addScaledVector(a[7],1.092548*(r*s)),n.addScaledVector(a[8],.546274*(r*r-i*i)),n}getIrradianceAt(e,n){const r=e.x,i=e.y,s=e.z,a=this.coefficients;return n.copy(a[0]).multiplyScalar(.886227),n.addScaledVector(a[1],2*.511664*i),n.addScaledVector(a[2],2*.511664*s),n.addScaledVector(a[3],2*.511664*r),n.addScaledVector(a[4],2*.429043*r*i),n.addScaledVector(a[5],2*.429043*i*s),n.addScaledVector(a[6],.743125*s*s-.247708),n.addScaledVector(a[7],2*.429043*r*s),n.addScaledVector(a[8],.429043*(r*r-i*i)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,n+i*3);return this}toArray(e=[],n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,n+i*3);return e}static getBasisAt(e,n){const r=e.x,i=e.y,s=e.z;n[0]=.282095,n[1]=.488603*i,n[2]=.488603*s,n[3]=.488603*r,n[4]=1.092548*r*i,n[5]=1.092548*i*s,n[6]=.315392*(3*s*s-1),n[7]=1.092548*r*s,n[8]=.546274*(r*r-i*i)}}class TEe extends Xp{constructor(e=new wEe,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class sQ extends ys{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class aQ{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=performance.now();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}class EEe extends KZ{constructor(e,n,r=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}const Z$=new In;class oQ{constructor(e,n,r=0,i=1/0){this.ray=new cC(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new rB,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):xt("Raycaster: Unsupported camera type: "+n.type)}setFromXRController(e){return Z$.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(Z$),this}intersectObject(e,n=!0,r=[]){return LD(e,this,r,n),r.sort(Q$),r}intersectObjects(e,n=!0,r=[]){for(let i=0,s=e.length;i<s;i++)LD(e[i],this,r,n);return r.sort(Q$),r}}function Q$(t,e){return t.distance-e.distance}function LD(t,e,n,r){let i=!0;if(t.layers.test(e.layers)&&t.raycast(e,n)===!1&&(i=!1),i===!0&&r===!0){const s=t.children;for(let a=0,o=s.length;a<o;a++)LD(s[a],e,n,!0)}}class J${constructor(e=1,n=0,r=0){this.radius=e,this.phi=n,this.theta=r}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Tn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Tn(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class fC{constructor(e,n,r,i){fC.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,n,r,i)}identity(){return this.set(1,0,0,1),this}fromArray(e,n=0){for(let r=0;r<4;r++)this.elements[r]=e[r+n];return this}set(e,n,r,i){const s=this.elements;return s[0]=e,s[2]=n,s[1]=r,s[3]=i,this}}class hC extends Yc{constructor(e,n=null){super(),this.object=e,this.domElement=n,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){ct("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function ID(t,e,n,r){const i=CEe(r);switch(n){case Wk:return t*e;case C_:return t*e/i.components*i.byteLength;case xx:return t*e/i.components*i.byteLength;case $l:return t*e*2/i.components*i.byteLength;case yx:return t*e*2/i.components*i.byteLength;case E_:return t*e*3/i.components*i.byteLength;case gi:return t*e*4/i.components*i.byteLength;case vx:return t*e*4/i.components*i.byteLength;case Af:case Mf:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case Rf:case Pf:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case Nb:case Db:return Math.max(t,16)*Math.max(e,8)/4;case Pb:case Ob:return Math.max(t,8)*Math.max(e,8)/2;case h0:case p0:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case m0:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case g0:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case x0:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case y0:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case v0:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case b0:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case _0:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case S0:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case w0:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case T0:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case E0:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case C0:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case A0:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case M0:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case R0:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case P0:case ND:case OD:return Math.ceil(t/4)*Math.ceil(e/4)*16;case N0:case O0:return Math.ceil(t/4)*Math.ceil(e/4)*8;case D0:case L0:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function CEe(t){switch(t){case si:case hp:return{byteLength:1,components:1};case zl:case pp:case Ci:return{byteLength:2,components:1};case rC:case iC:return{byteLength:2,components:4};case Ar:case xs:case Ti:return{byteLength:4,components:1};case sC:case aC:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Vp}}));typeof window<"u"&&(window.__THREE__?ct("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Vp);function lQ(){let t=null,e=!1,n=null,r=null;function i(s,a){n(s,a),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function AEe(t){const e=new WeakMap;function n(o,l){const c=o.array,u=o.usage,f=c.byteLength,p=t.createBuffer();t.bindBuffer(l,p),t.bufferData(l,c,u),o.onUploadCallback();let m;if(c instanceof Float32Array)m=t.FLOAT;else if(typeof Float16Array<"u"&&c instanceof Float16Array)m=t.HALF_FLOAT;else if(c instanceof Uint16Array)o.isFloat16BufferAttribute?m=t.HALF_FLOAT:m=t.UNSIGNED_SHORT;else if(c instanceof Int16Array)m=t.SHORT;else if(c instanceof Uint32Array)m=t.UNSIGNED_INT;else if(c instanceof Int32Array)m=t.INT;else if(c instanceof Int8Array)m=t.BYTE;else if(c instanceof Uint8Array)m=t.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)m=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:p,type:m,bytesPerElement:c.BYTES_PER_ELEMENT,version:o.version,size:f}}function r(o,l,c){const u=l.array,f=l.updateRanges;if(t.bindBuffer(c,o),f.length===0)t.bufferSubData(c,0,u);else{f.sort((m,x)=>m.start-x.start);let p=0;for(let m=1;m<f.length;m++){const x=f[p],b=f[m];b.start<=x.start+x.count+1?x.count=Math.max(x.count,b.start+b.count-x.start):(++p,f[p]=b)}f.length=p+1;for(let m=0,x=f.length;m<x;m++){const b=f[m];t.bufferSubData(c,b.start*u.BYTES_PER_ELEMENT,u,b.start,b.count)}l.clearUpdateRanges()}l.onUploadCallback()}function i(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function s(o){o.isInterleavedBufferAttribute&&(o=o.data);const l=e.get(o);l&&(t.deleteBuffer(l.buffer),e.delete(o))}function a(o,l){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const u=e.get(o);(!u||u.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const c=e.get(o);if(c===void 0)e.set(o,n(o,l));else if(c.version<o.version){if(c.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(c.buffer,o,l),c.version=o.version}}return{get:i,remove:s,update:a}}var MEe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,REe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,PEe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,NEe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,OEe=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,DEe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,LEe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,IEe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,kEe=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,BEe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,FEe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,UEe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,jEe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,zEe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,$Ee=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,GEe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,VEe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,HEe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,WEe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,qEe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,XEe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,YEe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,KEe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,ZEe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,QEe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,JEe=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,eCe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,tCe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,nCe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,rCe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,iCe="gl_FragColor = linearToOutputTexel( gl_FragColor );",sCe=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,aCe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,oCe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,lCe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,cCe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,uCe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,dCe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,fCe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,hCe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,pCe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,mCe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,gCe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,xCe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,yCe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,vCe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,bCe=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,_Ce=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,SCe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,wCe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,TCe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,ECe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,CCe=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 uv = vec2( roughness, dotNV );
	return texture2D( dfgLUT, uv ).rg;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = DFGApprox( vec3(0.0, 0.0, 1.0), vec3(sqrt(1.0 - dotNV * dotNV), 0.0, dotNV), material.roughness );
	vec2 dfgL = DFGApprox( vec3(0.0, 0.0, 1.0), vec3(sqrt(1.0 - dotNL * dotNL), 0.0, dotNL), material.roughness );
	vec3 FssEss_V = material.specularColor * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColor * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColor + ( 1.0 - material.specularColor ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,ACe=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,MCe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,RCe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,PCe=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,NCe=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,OCe=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,DCe=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,LCe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,ICe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,kCe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,BCe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,FCe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,UCe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,jCe=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,zCe=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,$Ce=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,GCe=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,VCe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,HCe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,WCe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,qCe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,XCe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,YCe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,KCe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,ZCe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,QCe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,JCe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,eAe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,tAe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,nAe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,rAe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,iAe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,sAe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,aAe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,oAe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,lAe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,cAe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow( sampler2D shadow, vec2 uv, float compare ) {
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare, distribution.x );
		#endif
		if ( hard_shadow != 1.0 ) {
			float distance = compare - distribution.x;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,uAe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,dAe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,fAe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,hAe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,pAe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,mAe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,gAe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,xAe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,yAe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,vAe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,bAe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,_Ae=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,SAe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,wAe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,TAe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,EAe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,CAe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const AAe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,MAe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,RAe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,PAe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,NAe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,OAe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,DAe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,LAe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,IAe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,kAe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,BAe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,FAe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,UAe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,jAe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,zAe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,$Ae=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,GAe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,VAe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,HAe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,WAe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qAe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,XAe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,YAe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,KAe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ZAe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,QAe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,JAe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,eMe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tMe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,nMe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,rMe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,iMe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,sMe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,aMe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Mn={alphahash_fragment:MEe,alphahash_pars_fragment:REe,alphamap_fragment:PEe,alphamap_pars_fragment:NEe,alphatest_fragment:OEe,alphatest_pars_fragment:DEe,aomap_fragment:LEe,aomap_pars_fragment:IEe,batching_pars_vertex:kEe,batching_vertex:BEe,begin_vertex:FEe,beginnormal_vertex:UEe,bsdfs:jEe,iridescence_fragment:zEe,bumpmap_pars_fragment:$Ee,clipping_planes_fragment:GEe,clipping_planes_pars_fragment:VEe,clipping_planes_pars_vertex:HEe,clipping_planes_vertex:WEe,color_fragment:qEe,color_pars_fragment:XEe,color_pars_vertex:YEe,color_vertex:KEe,common:ZEe,cube_uv_reflection_fragment:QEe,defaultnormal_vertex:JEe,displacementmap_pars_vertex:eCe,displacementmap_vertex:tCe,emissivemap_fragment:nCe,emissivemap_pars_fragment:rCe,colorspace_fragment:iCe,colorspace_pars_fragment:sCe,envmap_fragment:aCe,envmap_common_pars_fragment:oCe,envmap_pars_fragment:lCe,envmap_pars_vertex:cCe,envmap_physical_pars_fragment:bCe,envmap_vertex:uCe,fog_vertex:dCe,fog_pars_vertex:fCe,fog_fragment:hCe,fog_pars_fragment:pCe,gradientmap_pars_fragment:mCe,lightmap_pars_fragment:gCe,lights_lambert_fragment:xCe,lights_lambert_pars_fragment:yCe,lights_pars_begin:vCe,lights_toon_fragment:_Ce,lights_toon_pars_fragment:SCe,lights_phong_fragment:wCe,lights_phong_pars_fragment:TCe,lights_physical_fragment:ECe,lights_physical_pars_fragment:CCe,lights_fragment_begin:ACe,lights_fragment_maps:MCe,lights_fragment_end:RCe,logdepthbuf_fragment:PCe,logdepthbuf_pars_fragment:NCe,logdepthbuf_pars_vertex:OCe,logdepthbuf_vertex:DCe,map_fragment:LCe,map_pars_fragment:ICe,map_particle_fragment:kCe,map_particle_pars_fragment:BCe,metalnessmap_fragment:FCe,metalnessmap_pars_fragment:UCe,morphinstance_vertex:jCe,morphcolor_vertex:zCe,morphnormal_vertex:$Ce,morphtarget_pars_vertex:GCe,morphtarget_vertex:VCe,normal_fragment_begin:HCe,normal_fragment_maps:WCe,normal_pars_fragment:qCe,normal_pars_vertex:XCe,normal_vertex:YCe,normalmap_pars_fragment:KCe,clearcoat_normal_fragment_begin:ZCe,clearcoat_normal_fragment_maps:QCe,clearcoat_pars_fragment:JCe,iridescence_pars_fragment:eAe,opaque_fragment:tAe,packing:nAe,premultiplied_alpha_fragment:rAe,project_vertex:iAe,dithering_fragment:sAe,dithering_pars_fragment:aAe,roughnessmap_fragment:oAe,roughnessmap_pars_fragment:lAe,shadowmap_pars_fragment:cAe,shadowmap_pars_vertex:uAe,shadowmap_vertex:dAe,shadowmask_pars_fragment:fAe,skinbase_vertex:hAe,skinning_pars_vertex:pAe,skinning_vertex:mAe,skinnormal_vertex:gAe,specularmap_fragment:xAe,specularmap_pars_fragment:yAe,tonemapping_fragment:vAe,tonemapping_pars_fragment:bAe,transmission_fragment:_Ae,transmission_pars_fragment:SAe,uv_pars_fragment:wAe,uv_pars_vertex:TAe,uv_vertex:EAe,worldpos_vertex:CAe,background_vert:AAe,background_frag:MAe,backgroundCube_vert:RAe,backgroundCube_frag:PAe,cube_vert:NAe,cube_frag:OAe,depth_vert:DAe,depth_frag:LAe,distanceRGBA_vert:IAe,distanceRGBA_frag:kAe,equirect_vert:BAe,equirect_frag:FAe,linedashed_vert:UAe,linedashed_frag:jAe,meshbasic_vert:zAe,meshbasic_frag:$Ae,meshlambert_vert:GAe,meshlambert_frag:VAe,meshmatcap_vert:HAe,meshmatcap_frag:WAe,meshnormal_vert:qAe,meshnormal_frag:XAe,meshphong_vert:YAe,meshphong_frag:KAe,meshphysical_vert:ZAe,meshphysical_frag:QAe,meshtoon_vert:JAe,meshtoon_frag:eMe,points_vert:tMe,points_frag:nMe,shadow_vert:rMe,shadow_frag:iMe,sprite_vert:sMe,sprite_frag:aMe},At={common:{diffuse:{value:new Xt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new pn},alphaMap:{value:null},alphaMapTransform:{value:new pn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new pn}},envmap:{envMap:{value:null},envMapRotation:{value:new pn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new pn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new pn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new pn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new pn},normalScale:{value:new mt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new pn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new pn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new pn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new pn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Xt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Xt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new pn},alphaTest:{value:0},uvTransform:{value:new pn}},sprite:{diffuse:{value:new Xt(16777215)},opacity:{value:1},center:{value:new mt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new pn},alphaMap:{value:null},alphaMapTransform:{value:new pn},alphaTest:{value:0}}},Tc={basic:{uniforms:ua([At.common,At.specularmap,At.envmap,At.aomap,At.lightmap,At.fog]),vertexShader:Mn.meshbasic_vert,fragmentShader:Mn.meshbasic_frag},lambert:{uniforms:ua([At.common,At.specularmap,At.envmap,At.aomap,At.lightmap,At.emissivemap,At.bumpmap,At.normalmap,At.displacementmap,At.fog,At.lights,{emissive:{value:new Xt(0)}}]),vertexShader:Mn.meshlambert_vert,fragmentShader:Mn.meshlambert_frag},phong:{uniforms:ua([At.common,At.specularmap,At.envmap,At.aomap,At.lightmap,At.emissivemap,At.bumpmap,At.normalmap,At.displacementmap,At.fog,At.lights,{emissive:{value:new Xt(0)},specular:{value:new Xt(1118481)},shininess:{value:30}}]),vertexShader:Mn.meshphong_vert,fragmentShader:Mn.meshphong_frag},standard:{uniforms:ua([At.common,At.envmap,At.aomap,At.lightmap,At.emissivemap,At.bumpmap,At.normalmap,At.displacementmap,At.roughnessmap,At.metalnessmap,At.fog,At.lights,{emissive:{value:new Xt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Mn.meshphysical_vert,fragmentShader:Mn.meshphysical_frag},toon:{uniforms:ua([At.common,At.aomap,At.lightmap,At.emissivemap,At.bumpmap,At.normalmap,At.displacementmap,At.gradientmap,At.fog,At.lights,{emissive:{value:new Xt(0)}}]),vertexShader:Mn.meshtoon_vert,fragmentShader:Mn.meshtoon_frag},matcap:{uniforms:ua([At.common,At.bumpmap,At.normalmap,At.displacementmap,At.fog,{matcap:{value:null}}]),vertexShader:Mn.meshmatcap_vert,fragmentShader:Mn.meshmatcap_frag},points:{uniforms:ua([At.points,At.fog]),vertexShader:Mn.points_vert,fragmentShader:Mn.points_frag},dashed:{uniforms:ua([At.common,At.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Mn.linedashed_vert,fragmentShader:Mn.linedashed_frag},depth:{uniforms:ua([At.common,At.displacementmap]),vertexShader:Mn.depth_vert,fragmentShader:Mn.depth_frag},normal:{uniforms:ua([At.common,At.bumpmap,At.normalmap,At.displacementmap,{opacity:{value:1}}]),vertexShader:Mn.meshnormal_vert,fragmentShader:Mn.meshnormal_frag},sprite:{uniforms:ua([At.sprite,At.fog]),vertexShader:Mn.sprite_vert,fragmentShader:Mn.sprite_frag},background:{uniforms:{uvTransform:{value:new pn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Mn.background_vert,fragmentShader:Mn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new pn}},vertexShader:Mn.backgroundCube_vert,fragmentShader:Mn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Mn.cube_vert,fragmentShader:Mn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Mn.equirect_vert,fragmentShader:Mn.equirect_frag},distanceRGBA:{uniforms:ua([At.common,At.displacementmap,{referencePosition:{value:new ae},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Mn.distanceRGBA_vert,fragmentShader:Mn.distanceRGBA_frag},shadow:{uniforms:ua([At.lights,At.fog,{color:{value:new Xt(0)},opacity:{value:1}}]),vertexShader:Mn.shadow_vert,fragmentShader:Mn.shadow_frag}};Tc.physical={uniforms:ua([Tc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new pn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new pn},clearcoatNormalScale:{value:new mt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new pn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new pn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new pn},sheen:{value:0},sheenColor:{value:new Xt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new pn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new pn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new pn},transmissionSamplerSize:{value:new mt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new pn},attenuationDistance:{value:0},attenuationColor:{value:new Xt(0)},specularColor:{value:new Xt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new pn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new pn},anisotropyVector:{value:new mt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new pn}}]),vertexShader:Mn.meshphysical_vert,fragmentShader:Mn.meshphysical_frag};const uw={r:0,b:0,g:0},Ph=new Ka,oMe=new In;function lMe(t,e,n,r,i,s,a){const o=new Xt(0);let l=s===!0?0:1,c,u,f=null,p=0,m=null;function x(T){let A=T.isScene===!0?T.background:null;return A&&A.isTexture&&(A=(T.backgroundBlurriness>0?n:e).get(A)),A}function b(T){let A=!1;const C=x(T);C===null?_(o,l):C&&C.isColor&&(_(C,1),A=!0);const M=t.xr.getEnvironmentBlendMode();M==="additive"?r.buffers.color.setClear(0,0,0,1,a):M==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,a),(t.autoClear||A)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))}function v(T,A){const C=x(A);C&&(C.isCubeTexture||C.mapping===Ap)?(u===void 0&&(u=new Ji(new qp(1,1,1),new Yl({name:"BackgroundCubeMaterial",uniforms:k0(Tc.backgroundCube.uniforms),vertexShader:Tc.backgroundCube.vertexShader,fragmentShader:Tc.backgroundCube.fragmentShader,side:Sr,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(M,P,D){this.matrixWorld.copyPosition(D.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),Ph.copy(A.backgroundRotation),Ph.x*=-1,Ph.y*=-1,Ph.z*=-1,C.isCubeTexture&&C.isRenderTargetTexture===!1&&(Ph.y*=-1,Ph.z*=-1),u.material.uniforms.envMap.value=C,u.material.uniforms.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=A.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=A.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(oMe.makeRotationFromEuler(Ph)),u.material.toneMapped=sn.getTransfer(C.colorSpace)!==Ot,(f!==C||p!==C.version||m!==t.toneMapping)&&(u.material.needsUpdate=!0,f=C,p=C.version,m=t.toneMapping),u.layers.enableAll(),T.unshift(u,u.geometry,u.material,0,0,null)):C&&C.isTexture&&(c===void 0&&(c=new Ji(new N_(2,2),new Yl({name:"BackgroundMaterial",uniforms:k0(Tc.background.uniforms),vertexShader:Tc.background.vertexShader,fragmentShader:Tc.background.fragmentShader,side:wo,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=C,c.material.uniforms.backgroundIntensity.value=A.backgroundIntensity,c.material.toneMapped=sn.getTransfer(C.colorSpace)!==Ot,C.matrixAutoUpdate===!0&&C.updateMatrix(),c.material.uniforms.uvTransform.value.copy(C.matrix),(f!==C||p!==C.version||m!==t.toneMapping)&&(c.material.needsUpdate=!0,f=C,p=C.version,m=t.toneMapping),c.layers.enableAll(),T.unshift(c,c.geometry,c.material,0,0,null))}function _(T,A){T.getRGB(uw,WZ(t)),r.buffers.color.setClear(uw.r,uw.g,uw.b,A,a)}function E(){u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0),c!==void 0&&(c.geometry.dispose(),c.material.dispose(),c=void 0)}return{getClearColor:function(){return o},setClearColor:function(T,A=1){o.set(T),l=A,_(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(T){l=T,_(o,l)},render:b,addToRenderList:v,dispose:E}}function cMe(t,e){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),r={},i=p(null);let s=i,a=!1;function o(L,k,I,F,z){let H=!1;const B=f(F,I,k);s!==B&&(s=B,c(s.object)),H=m(L,F,I,z),H&&x(L,F,I,z),z!==null&&e.update(z,t.ELEMENT_ARRAY_BUFFER),(H||a)&&(a=!1,A(L,k,I,F),z!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(z).buffer))}function l(){return t.createVertexArray()}function c(L){return t.bindVertexArray(L)}function u(L){return t.deleteVertexArray(L)}function f(L,k,I){const F=I.wireframe===!0;let z=r[L.id];z===void 0&&(z={},r[L.id]=z);let H=z[k.id];H===void 0&&(H={},z[k.id]=H);let B=H[F];return B===void 0&&(B=p(l()),H[F]=B),B}function p(L){const k=[],I=[],F=[];for(let z=0;z<n;z++)k[z]=0,I[z]=0,F[z]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:k,enabledAttributes:I,attributeDivisors:F,object:L,attributes:{},index:null}}function m(L,k,I,F){const z=s.attributes,H=k.attributes;let B=0;const j=I.getAttributes();for(const G in j)if(j[G].location>=0){const re=z[G];let $=H[G];if($===void 0&&(G==="instanceMatrix"&&L.instanceMatrix&&($=L.instanceMatrix),G==="instanceColor"&&L.instanceColor&&($=L.instanceColor)),re===void 0||re.attribute!==$||$&&re.data!==$.data)return!0;B++}return s.attributesNum!==B||s.index!==F}function x(L,k,I,F){const z={},H=k.attributes;let B=0;const j=I.getAttributes();for(const G in j)if(j[G].location>=0){let re=H[G];re===void 0&&(G==="instanceMatrix"&&L.instanceMatrix&&(re=L.instanceMatrix),G==="instanceColor"&&L.instanceColor&&(re=L.instanceColor));const $={};$.attribute=re,re&&re.data&&($.data=re.data),z[G]=$,B++}s.attributes=z,s.attributesNum=B,s.index=F}function b(){const L=s.newAttributes;for(let k=0,I=L.length;k<I;k++)L[k]=0}function v(L){_(L,0)}function _(L,k){const I=s.newAttributes,F=s.enabledAttributes,z=s.attributeDivisors;I[L]=1,F[L]===0&&(t.enableVertexAttribArray(L),F[L]=1),z[L]!==k&&(t.vertexAttribDivisor(L,k),z[L]=k)}function E(){const L=s.newAttributes,k=s.enabledAttributes;for(let I=0,F=k.length;I<F;I++)k[I]!==L[I]&&(t.disableVertexAttribArray(I),k[I]=0)}function T(L,k,I,F,z,H,B){B===!0?t.vertexAttribIPointer(L,k,I,z,H):t.vertexAttribPointer(L,k,I,F,z,H)}function A(L,k,I,F){b();const z=F.attributes,H=I.getAttributes(),B=k.defaultAttributeValues;for(const j in H){const G=H[j];if(G.location>=0){let W=z[j];if(W===void 0&&(j==="instanceMatrix"&&L.instanceMatrix&&(W=L.instanceMatrix),j==="instanceColor"&&L.instanceColor&&(W=L.instanceColor)),W!==void 0){const re=W.normalized,$=W.itemSize,ee=e.get(W);if(ee===void 0)continue;const oe=ee.buffer,me=ee.type,te=ee.bytesPerElement,K=me===t.INT||me===t.UNSIGNED_INT||W.gpuType===xs;if(W.isInterleavedBufferAttribute){const ne=W.data,Ee=ne.stride,se=W.offset;if(ne.isInstancedInterleavedBuffer){for(let ve=0;ve<G.locationSize;ve++)_(G.location+ve,ne.meshPerAttribute);L.isInstancedMesh!==!0&&F._maxInstanceCount===void 0&&(F._maxInstanceCount=ne.meshPerAttribute*ne.count)}else for(let ve=0;ve<G.locationSize;ve++)v(G.location+ve);t.bindBuffer(t.ARRAY_BUFFER,oe);for(let ve=0;ve<G.locationSize;ve++)T(G.location+ve,$/G.locationSize,me,re,Ee*te,(se+$/G.locationSize*ve)*te,K)}else{if(W.isInstancedBufferAttribute){for(let ne=0;ne<G.locationSize;ne++)_(G.location+ne,W.meshPerAttribute);L.isInstancedMesh!==!0&&F._maxInstanceCount===void 0&&(F._maxInstanceCount=W.meshPerAttribute*W.count)}else for(let ne=0;ne<G.locationSize;ne++)v(G.location+ne);t.bindBuffer(t.ARRAY_BUFFER,oe);for(let ne=0;ne<G.locationSize;ne++)T(G.location+ne,$/G.locationSize,me,re,$*te,$/G.locationSize*ne*te,K)}}else if(B!==void 0){const re=B[j];if(re!==void 0)switch(re.length){case 2:t.vertexAttrib2fv(G.location,re);break;case 3:t.vertexAttrib3fv(G.location,re);break;case 4:t.vertexAttrib4fv(G.location,re);break;default:t.vertexAttrib1fv(G.location,re)}}}}E()}function C(){D();for(const L in r){const k=r[L];for(const I in k){const F=k[I];for(const z in F)u(F[z].object),delete F[z];delete k[I]}delete r[L]}}function M(L){if(r[L.id]===void 0)return;const k=r[L.id];for(const I in k){const F=k[I];for(const z in F)u(F[z].object),delete F[z];delete k[I]}delete r[L.id]}function P(L){for(const k in r){const I=r[k];if(I[L.id]===void 0)continue;const F=I[L.id];for(const z in F)u(F[z].object),delete F[z];delete I[L.id]}}function D(){N(),a=!0,s!==i&&(s=i,c(s.object))}function N(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:o,reset:D,resetDefaultState:N,dispose:C,releaseStatesOfGeometry:M,releaseStatesOfProgram:P,initAttributes:b,enableAttribute:v,disableUnusedAttributes:E}}function uMe(t,e,n){let r;function i(c){r=c}function s(c,u){t.drawArrays(r,c,u),n.update(u,r,1)}function a(c,u,f){f!==0&&(t.drawArraysInstanced(r,c,u,f),n.update(u,r,f))}function o(c,u,f){if(f===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,c,0,u,0,f);let m=0;for(let x=0;x<f;x++)m+=u[x];n.update(m,r,1)}function l(c,u,f,p){if(f===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let x=0;x<c.length;x++)a(c[x],u[x],p[x]);else{m.multiDrawArraysInstancedWEBGL(r,c,0,u,0,p,0,f);let x=0;for(let b=0;b<f;b++)x+=u[b]*p[b];n.update(x,r,1)}}this.setMode=i,this.render=s,this.renderInstances=a,this.renderMultiDraw=o,this.renderMultiDrawInstances=l}function dMe(t,e,n,r){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const P=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function a(P){return!(P!==gi&&r.convert(P)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(P){const D=P===Ci&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(P!==si&&r.convert(P)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&P!==Ti&&!D)}function l(P){if(P==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";P="mediump"}return P==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=n.precision!==void 0?n.precision:"highp";const u=l(c);u!==c&&(ct("WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const f=n.logarithmicDepthBuffer===!0,p=n.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),m=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),x=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),b=t.getParameter(t.MAX_TEXTURE_SIZE),v=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),_=t.getParameter(t.MAX_VERTEX_ATTRIBS),E=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),T=t.getParameter(t.MAX_VARYING_VECTORS),A=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),C=x>0,M=t.getParameter(t.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:a,textureTypeReadable:o,precision:c,logarithmicDepthBuffer:f,reversedDepthBuffer:p,maxTextures:m,maxVertexTextures:x,maxTextureSize:b,maxCubemapSize:v,maxAttributes:_,maxVertexUniforms:E,maxVaryings:T,maxFragmentUniforms:A,vertexTextures:C,maxSamples:M}}function fMe(t){const e=this;let n=null,r=0,i=!1,s=!1;const a=new Ll,o=new pn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,p){const m=f.length!==0||p||r!==0||i;return i=p,r=f.length,m},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,p){n=u(f,p,0)},this.setState=function(f,p,m){const x=f.clippingPlanes,b=f.clipIntersection,v=f.clipShadows,_=t.get(f);if(!i||x===null||x.length===0||s&&!v)s?u(null):c();else{const E=s?0:r,T=E*4;let A=_.clippingState||null;l.value=A,A=u(x,p,T,m);for(let C=0;C!==T;++C)A[C]=n[C];_.clippingState=A,this.numIntersection=b?this.numPlanes:0,this.numPlanes+=E}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(f,p,m,x){const b=f!==null?f.length:0;let v=null;if(b!==0){if(v=l.value,x!==!0||v===null){const _=m+b*4,E=p.matrixWorldInverse;o.getNormalMatrix(E),(v===null||v.length<_)&&(v=new Float32Array(_));for(let T=0,A=m;T!==b;++T,A+=4)a.copy(f[T]).applyMatrix4(E,o),a.normal.toArray(v,A),v[A+3]=a.constant}l.value=v,l.needsUpdate=!0}return e.numPlanes=b,e.numIntersection=0,v}}function hMe(t){let e=new WeakMap;function n(a,o){return o===d0?a.mapping=Fc:o===f0&&(a.mapping=Uc),a}function r(a){if(a&&a.isTexture){const o=a.mapping;if(o===d0||o===f0)if(e.has(a)){const l=e.get(a).texture;return n(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const c=new YZ(l.height);return c.fromEquirectangularTexture(t,a),e.set(a,c),a.addEventListener("dispose",i),n(c.texture,a.mapping)}else return null}}return a}function i(a){const o=a.target;o.removeEventListener("dispose",i);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}const _f=4,e9=[.125,.215,.35,.446,.526,.582],Yh=20,pMe=256,Hy=new D_,t9=new Xt;let J3=null,eP=0,tP=0,nP=!1;const mMe=new ae;let n9=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,n=0,r=.1,i=100,s={}){const{size:a=256,position:o=mMe}=s;J3=this._renderer.getRenderTarget(),eP=this._renderer.getActiveCubeFace(),tP=this._renderer.getActiveMipmapLevel(),nP=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(a);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,r,i,l,o),n>0&&this._blur(l,0,0,n),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=s9(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=i9(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(J3,eP,tP),this._renderer.xr.enabled=nP,e.scissorTest=!1,ng(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===Fc||e.mapping===Uc?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),J3=this._renderer.getRenderTarget(),eP=this._renderer.getActiveCubeFace(),tP=this._renderer.getActiveMipmapLevel(),nP=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:ii,minFilter:ii,generateMipmaps:!1,type:Ci,format:gi,colorSpace:Pp,depthBuffer:!1},i=r9(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=r9(e,n,r);const{_lodMax:s}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=gMe(s)),this._blurMaterial=yMe(s,e,n),this._ggxMaterial=xMe(s,e,n)}return i}_compileMaterial(e){const n=new Ji(new Us,e);this._renderer.compile(n,Hy)}_sceneToCubeUV(e,n,r,i,s){const l=new ys(90,1,n,r),c=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],f=this._renderer,p=f.autoClear,m=f.toneMapping;f.getClearColor(t9),f.toneMapping=ya,f.autoClear=!1,f.state.buffers.depth.getReversed()&&(f.setRenderTarget(i),f.clearDepth(),f.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new Ji(new qp,new Cc({name:"PMREM.Background",side:Sr,depthWrite:!1,depthTest:!1})));const b=this._backgroundBox,v=b.material;let _=!1;const E=e.background;E?E.isColor&&(v.color.copy(E),e.background=null,_=!0):(v.color.copy(t9),_=!0);for(let T=0;T<6;T++){const A=T%3;A===0?(l.up.set(0,c[T],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x+u[T],s.y,s.z)):A===1?(l.up.set(0,0,c[T]),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y+u[T],s.z)):(l.up.set(0,c[T],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y,s.z+u[T]));const C=this._cubeSize;ng(i,A*C,T>2?C:0,C,C),f.setRenderTarget(i),_&&f.render(b,l),f.render(e,l)}f.toneMapping=m,f.autoClear=p,e.background=E}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===Fc||e.mapping===Uc;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=s9()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=i9());const s=i?this._cubemapMaterial:this._equirectMaterial,a=this._lodMeshes[0];a.material=s;const o=s.uniforms;o.envMap.value=e;const l=this._cubeSize;ng(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(a,Hy)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;const i=this._lodMeshes.length;for(let s=1;s<i;s++)this._applyGGXFilter(e,s-1,s);n.autoClear=r}_applyGGXFilter(e,n,r){const i=this._renderer,s=this._pingPongRenderTarget,a=this._ggxMaterial,o=this._lodMeshes[r];o.material=a;const l=a.uniforms,c=r/(this._lodMeshes.length-1),u=n/(this._lodMeshes.length-1),f=Math.sqrt(c*c-u*u),p=.05+c*.95,m=f*p,{_lodMax:x}=this,b=this._sizeLods[r],v=3*b*(r>x-_f?r-x+_f:0),_=4*(this._cubeSize-b);l.envMap.value=e.texture,l.roughness.value=m,l.mipInt.value=x-n,ng(s,v,_,3*b,2*b),i.setRenderTarget(s),i.render(o,Hy),l.envMap.value=s.texture,l.roughness.value=0,l.mipInt.value=x-r,ng(e,v,_,3*b,2*b),i.setRenderTarget(e),i.render(o,Hy)}_blur(e,n,r,i,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,n,r,i,"latitudinal",s),this._halfBlur(a,e,r,r,i,"longitudinal",s)}_halfBlur(e,n,r,i,s,a,o){const l=this._renderer,c=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&xt("blur direction must be either latitudinal or longitudinal!");const u=3,f=this._lodMeshes[i];f.material=c;const p=c.uniforms,m=this._sizeLods[r]-1,x=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*Yh-1),b=s/x,v=isFinite(s)?1+Math.floor(u*b):Yh;v>Yh&&ct(`sigmaRadians, ${s}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${Yh}`);const _=[];let E=0;for(let P=0;P<Yh;++P){const D=P/b,N=Math.exp(-D*D/2);_.push(N),P===0?E+=N:P<v&&(E+=2*N)}for(let P=0;P<_.length;P++)_[P]=_[P]/E;p.envMap.value=e.texture,p.samples.value=v,p.weights.value=_,p.latitudinal.value=a==="latitudinal",o&&(p.poleAxis.value=o);const{_lodMax:T}=this;p.dTheta.value=x,p.mipInt.value=T-r;const A=this._sizeLods[i],C=3*A*(i>T-_f?i-T+_f:0),M=4*(this._cubeSize-A);ng(n,C,M,3*A,2*A),l.setRenderTarget(n),l.render(f,Hy)}};function gMe(t){const e=[],n=[],r=[];let i=t;const s=t-_f+1+e9.length;for(let a=0;a<s;a++){const o=Math.pow(2,i);e.push(o);let l=1/o;a>t-_f?l=e9[a-t+_f-1]:a===0&&(l=0),n.push(l);const c=1/(o-2),u=-c,f=1+c,p=[u,u,f,u,f,f,u,u,f,f,u,f],m=6,x=6,b=3,v=2,_=1,E=new Float32Array(b*x*m),T=new Float32Array(v*x*m),A=new Float32Array(_*x*m);for(let M=0;M<m;M++){const P=M%3*2/3-1,D=M>2?0:-1,N=[P,D,0,P+2/3,D,0,P+2/3,D+1,0,P,D,0,P+2/3,D+1,0,P,D+1,0];E.set(N,b*x*M),T.set(p,v*x*M);const L=[M,M,M,M,M,M];A.set(L,_*x*M)}const C=new Us;C.setAttribute("position",new Bs(E,b)),C.setAttribute("uv",new Bs(T,v)),C.setAttribute("faceIndex",new Bs(A,_)),r.push(new Ji(C,null)),i>_f&&i--}return{lodMeshes:r,sizeLods:e,sigmas:n}}function r9(t,e,n){const r=new zf(t,e,n);return r.texture.mapping=Ap,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function ng(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function xMe(t,e,n){return new Yl({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:pMe,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:pC(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:_a,depthTest:!1,depthWrite:!1})}function yMe(t,e,n){const r=new Float32Array(Yh),i=new ae(0,1,0);return new Yl({name:"SphericalGaussianBlur",defines:{n:Yh,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:pC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:_a,depthTest:!1,depthWrite:!1})}function i9(){return new Yl({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:pC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:_a,depthTest:!1,depthWrite:!1})}function s9(){return new Yl({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:pC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:_a,depthTest:!1,depthWrite:!1})}function pC(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function vMe(t){let e=new WeakMap,n=null;function r(o){if(o&&o.isTexture){const l=o.mapping,c=l===d0||l===f0,u=l===Fc||l===Uc;if(c||u){let f=e.get(o);const p=f!==void 0?f.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==p)return n===null&&(n=new n9(t)),f=c?n.fromEquirectangular(o,f):n.fromCubemap(o,f),f.texture.pmremVersion=o.pmremVersion,e.set(o,f),f.texture;if(f!==void 0)return f.texture;{const m=o.image;return c&&m&&m.height>0||u&&m&&i(m)?(n===null&&(n=new n9(t)),f=c?n.fromEquirectangular(o):n.fromCubemap(o),f.texture.pmremVersion=o.pmremVersion,e.set(o,f),o.addEventListener("dispose",s),f.texture):null}}}return o}function i(o){let l=0;const c=6;for(let u=0;u<c;u++)o[u]!==void 0&&l++;return l===c}function s(o){const l=o.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function a(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:a}}function bMe(t){const e={};function n(r){if(e[r]!==void 0)return e[r];const i=t.getExtension(r);return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(r){const i=n(r);return i===null&&jr("WebGLRenderer: "+r+" extension not supported."),i}}}function _Me(t,e,n,r){const i={},s=new WeakMap;function a(f){const p=f.target;p.index!==null&&e.remove(p.index);for(const x in p.attributes)e.remove(p.attributes[x]);p.removeEventListener("dispose",a),delete i[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),r.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,n.memory.geometries--}function o(f,p){return i[p.id]===!0||(p.addEventListener("dispose",a),i[p.id]=!0,n.memory.geometries++),p}function l(f){const p=f.attributes;for(const m in p)e.update(p[m],t.ARRAY_BUFFER)}function c(f){const p=[],m=f.index,x=f.attributes.position;let b=0;if(m!==null){const E=m.array;b=m.version;for(let T=0,A=E.length;T<A;T+=3){const C=E[T+0],M=E[T+1],P=E[T+2];p.push(C,M,M,P,P,C)}}else if(x!==void 0){const E=x.array;b=x.version;for(let T=0,A=E.length/3-1;T<A;T+=3){const C=T+0,M=T+1,P=T+2;p.push(C,M,M,P,P,C)}}else return;const v=new(Jk(p)?sB:iB)(p,1);v.version=b;const _=s.get(f);_&&e.remove(_),s.set(f,v)}function u(f){const p=s.get(f);if(p){const m=f.index;m!==null&&p.version<m.version&&c(f)}else c(f);return s.get(f)}return{get:o,update:l,getWireframeAttribute:u}}function SMe(t,e,n){let r;function i(p){r=p}let s,a;function o(p){s=p.type,a=p.bytesPerElement}function l(p,m){t.drawElements(r,m,s,p*a),n.update(m,r,1)}function c(p,m,x){x!==0&&(t.drawElementsInstanced(r,m,s,p*a,x),n.update(m,r,x))}function u(p,m,x){if(x===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,m,0,s,p,0,x);let v=0;for(let _=0;_<x;_++)v+=m[_];n.update(v,r,1)}function f(p,m,x,b){if(x===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let _=0;_<p.length;_++)c(p[_]/a,m[_],b[_]);else{v.multiDrawElementsInstancedWEBGL(r,m,0,s,p,0,b,0,x);let _=0;for(let E=0;E<x;E++)_+=m[E]*b[E];n.update(_,r,1)}}this.setMode=i,this.setIndex=o,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=f}function wMe(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,a,o){switch(n.calls++,a){case t.TRIANGLES:n.triangles+=o*(s/3);break;case t.LINES:n.lines+=o*(s/2);break;case t.LINE_STRIP:n.lines+=o*(s-1);break;case t.LINE_LOOP:n.lines+=o*s;break;case t.POINTS:n.points+=o*s;break;default:xt("WebGLInfo: Unknown draw mode:",a);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function TMe(t,e,n){const r=new WeakMap,i=new an;function s(a,o,l){const c=a.morphTargetInfluences,u=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,f=u!==void 0?u.length:0;let p=r.get(o);if(p===void 0||p.count!==f){let L=function(){D.dispose(),r.delete(o),o.removeEventListener("dispose",L)};var m=L;p!==void 0&&p.texture.dispose();const x=o.morphAttributes.position!==void 0,b=o.morphAttributes.normal!==void 0,v=o.morphAttributes.color!==void 0,_=o.morphAttributes.position||[],E=o.morphAttributes.normal||[],T=o.morphAttributes.color||[];let A=0;x===!0&&(A=1),b===!0&&(A=2),v===!0&&(A=3);let C=o.attributes.position.count*A,M=1;C>e.maxTextureSize&&(M=Math.ceil(C/e.maxTextureSize),C=e.maxTextureSize);const P=new Float32Array(C*M*4*f),D=new nB(P,C,M,f);D.type=Ti,D.needsUpdate=!0;const N=A*4;for(let k=0;k<f;k++){const I=_[k],F=E[k],z=T[k],H=C*M*4*k;for(let B=0;B<I.count;B++){const j=B*N;x===!0&&(i.fromBufferAttribute(I,B),P[H+j+0]=i.x,P[H+j+1]=i.y,P[H+j+2]=i.z,P[H+j+3]=0),b===!0&&(i.fromBufferAttribute(F,B),P[H+j+4]=i.x,P[H+j+5]=i.y,P[H+j+6]=i.z,P[H+j+7]=0),v===!0&&(i.fromBufferAttribute(z,B),P[H+j+8]=i.x,P[H+j+9]=i.y,P[H+j+10]=i.z,P[H+j+11]=z.itemSize===4?i.w:1)}}p={count:f,texture:D,size:new mt(C,M)},r.set(o,p),o.addEventListener("dispose",L)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)l.getUniforms().setValue(t,"morphTexture",a.morphTexture,n);else{let x=0;for(let v=0;v<c.length;v++)x+=c[v];const b=o.morphTargetsRelative?1:1-x;l.getUniforms().setValue(t,"morphTargetBaseInfluence",b),l.getUniforms().setValue(t,"morphTargetInfluences",c)}l.getUniforms().setValue(t,"morphTargetsTexture",p.texture,n),l.getUniforms().setValue(t,"morphTargetsTextureSize",p.size)}return{update:s}}function EMe(t,e,n,r){let i=new WeakMap;function s(l){const c=r.render.frame,u=l.geometry,f=e.get(l,u);if(i.get(f)!==c&&(e.update(f),i.set(f,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),i.get(l)!==c&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const p=l.skeleton;i.get(p)!==c&&(p.update(),i.set(p,c))}return f}function a(){i=new WeakMap}function o(l){const c=l.target;c.removeEventListener("dispose",o),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:s,dispose:a}}const cQ=new $i,a9=new ol(1,1),uQ=new nB,dQ=new v2e,fQ=new M_,o9=[],l9=[],c9=new Float32Array(16),u9=new Float32Array(9),d9=new Float32Array(4);function bx(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let s=o9[i];if(s===void 0&&(s=new Float32Array(i),o9[i]=s),e!==0){r.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=n,t[a].toArray(s,o)}return s}function es(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function ts(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function mC(t,e){let n=l9[e];n===void 0&&(n=new Int32Array(e),l9[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function CMe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function AMe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(es(n,e))return;t.uniform2fv(this.addr,e),ts(n,e)}}function MMe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(es(n,e))return;t.uniform3fv(this.addr,e),ts(n,e)}}function RMe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(es(n,e))return;t.uniform4fv(this.addr,e),ts(n,e)}}function PMe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(es(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),ts(n,e)}else{if(es(n,r))return;d9.set(r),t.uniformMatrix2fv(this.addr,!1,d9),ts(n,r)}}function NMe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(es(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),ts(n,e)}else{if(es(n,r))return;u9.set(r),t.uniformMatrix3fv(this.addr,!1,u9),ts(n,r)}}function OMe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(es(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),ts(n,e)}else{if(es(n,r))return;c9.set(r),t.uniformMatrix4fv(this.addr,!1,c9),ts(n,r)}}function DMe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function LMe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(es(n,e))return;t.uniform2iv(this.addr,e),ts(n,e)}}function IMe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(es(n,e))return;t.uniform3iv(this.addr,e),ts(n,e)}}function kMe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(es(n,e))return;t.uniform4iv(this.addr,e),ts(n,e)}}function BMe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function FMe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(es(n,e))return;t.uniform2uiv(this.addr,e),ts(n,e)}}function UMe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(es(n,e))return;t.uniform3uiv(this.addr,e),ts(n,e)}}function jMe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(es(n,e))return;t.uniform4uiv(this.addr,e),ts(n,e)}}function zMe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);let s;this.type===t.SAMPLER_2D_SHADOW?(a9.compareFunction=lC,s=a9):s=cQ,n.setTexture2D(e||s,i)}function $Me(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||dQ,i)}function GMe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||fQ,i)}function VMe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||uQ,i)}function HMe(t){switch(t){case 5126:return CMe;case 35664:return AMe;case 35665:return MMe;case 35666:return RMe;case 35674:return PMe;case 35675:return NMe;case 35676:return OMe;case 5124:case 35670:return DMe;case 35667:case 35671:return LMe;case 35668:case 35672:return IMe;case 35669:case 35673:return kMe;case 5125:return BMe;case 36294:return FMe;case 36295:return UMe;case 36296:return jMe;case 35678:case 36198:case 36298:case 36306:case 35682:return zMe;case 35679:case 36299:case 36307:return $Me;case 35680:case 36300:case 36308:case 36293:return GMe;case 36289:case 36303:case 36311:case 36292:return VMe}}function WMe(t,e){t.uniform1fv(this.addr,e)}function qMe(t,e){const n=bx(e,this.size,2);t.uniform2fv(this.addr,n)}function XMe(t,e){const n=bx(e,this.size,3);t.uniform3fv(this.addr,n)}function YMe(t,e){const n=bx(e,this.size,4);t.uniform4fv(this.addr,n)}function KMe(t,e){const n=bx(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function ZMe(t,e){const n=bx(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function QMe(t,e){const n=bx(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function JMe(t,e){t.uniform1iv(this.addr,e)}function eRe(t,e){t.uniform2iv(this.addr,e)}function tRe(t,e){t.uniform3iv(this.addr,e)}function nRe(t,e){t.uniform4iv(this.addr,e)}function rRe(t,e){t.uniform1uiv(this.addr,e)}function iRe(t,e){t.uniform2uiv(this.addr,e)}function sRe(t,e){t.uniform3uiv(this.addr,e)}function aRe(t,e){t.uniform4uiv(this.addr,e)}function oRe(t,e,n){const r=this.cache,i=e.length,s=mC(n,i);es(r,s)||(t.uniform1iv(this.addr,s),ts(r,s));for(let a=0;a!==i;++a)n.setTexture2D(e[a]||cQ,s[a])}function lRe(t,e,n){const r=this.cache,i=e.length,s=mC(n,i);es(r,s)||(t.uniform1iv(this.addr,s),ts(r,s));for(let a=0;a!==i;++a)n.setTexture3D(e[a]||dQ,s[a])}function cRe(t,e,n){const r=this.cache,i=e.length,s=mC(n,i);es(r,s)||(t.uniform1iv(this.addr,s),ts(r,s));for(let a=0;a!==i;++a)n.setTextureCube(e[a]||fQ,s[a])}function uRe(t,e,n){const r=this.cache,i=e.length,s=mC(n,i);es(r,s)||(t.uniform1iv(this.addr,s),ts(r,s));for(let a=0;a!==i;++a)n.setTexture2DArray(e[a]||uQ,s[a])}function dRe(t){switch(t){case 5126:return WMe;case 35664:return qMe;case 35665:return XMe;case 35666:return YMe;case 35674:return KMe;case 35675:return ZMe;case 35676:return QMe;case 5124:case 35670:return JMe;case 35667:case 35671:return eRe;case 35668:case 35672:return tRe;case 35669:case 35673:return nRe;case 5125:return rRe;case 36294:return iRe;case 36295:return sRe;case 36296:return aRe;case 35678:case 36198:case 36298:case 36306:case 35682:return oRe;case 35679:case 36299:case 36307:return lRe;case 35680:case 36300:case 36308:case 36293:return cRe;case 36289:case 36303:case 36311:case 36292:return uRe}}class fRe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=HMe(n.type)}}class hRe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=dRe(n.type)}}class pRe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let s=0,a=i.length;s!==a;++s){const o=i[s];o.setValue(e,n[o.id],r)}}}const rP=/(\w+)(\])?(\[|\.)?/g;function f9(t,e){t.seq.push(e),t.map[e.id]=e}function mRe(t,e,n){const r=t.name,i=r.length;for(rP.lastIndex=0;;){const s=rP.exec(r),a=rP.lastIndex;let o=s[1];const l=s[2]==="]",c=s[3];if(l&&(o=o|0),c===void 0||c==="["&&a+2===i){f9(n,c===void 0?new fRe(o,t,e):new hRe(o,t,e));break}else{let f=n.map[o];f===void 0&&(f=new pRe(o),f9(n,f)),n=f}}}class ET{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(n,i),a=e.getUniformLocation(n,s.name);mRe(s,a,this)}}setValue(e,n,r,i){const s=this.map[n];s!==void 0&&s.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let s=0,a=n.length;s!==a;++s){const o=n[s],l=r[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,s=e.length;i!==s;++i){const a=e[i];a.id in n&&r.push(a)}return r}}function h9(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const gRe=37297;let xRe=0;function yRe(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let a=i;a<s;a++){const o=a+1;r.push(`${o===e?">":" "} ${o}: ${n[a]}`)}return r.join(`
`)}const p9=new pn;function vRe(t){sn._getMatrix(p9,sn.workingColorSpace,t);const e=`mat3( ${p9.elements.map(n=>n.toFixed(4))} )`;switch(sn.getTransfer(t)){case I0:return[e,"LinearTransferOETF"];case Ot:return[e,"sRGBTransferOETF"];default:return ct("WebGLProgram: Unsupported color space: ",t),[e,"LinearTransferOETF"]}}function m9(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),s=(t.getShaderInfoLog(e)||"").trim();if(r&&s==="")return"";const a=/ERROR: 0:(\d+)/.exec(s);if(a){const o=parseInt(a[1]);return n.toUpperCase()+`

`+s+`

`+yRe(t.getShaderSource(e),o)}else return s}function bRe(t,e){const n=vRe(e);return[`vec4 ${t}( vec4 value ) {`,`	return ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join(`
`)}function _Re(t,e){let n;switch(e){case kZ:n="Linear";break;case BZ:n="Reinhard";break;case FZ:n="Cineon";break;case UZ:n="ACESFilmic";break;case jZ:n="AgX";break;case zZ:n="Neutral";break;case LTe:n="Custom";break;default:ct("WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const dw=new ae;function SRe(){sn.getLuminanceCoefficients(dw);const t=dw.x.toFixed(4),e=dw.y.toFixed(4),n=dw.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${t}, ${e}, ${n} );`,"	return dot( weights, rgb );","}"].join(`
`)}function wRe(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Ev).join(`
`)}function TRe(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function ERe(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=t.getActiveAttrib(e,i),a=s.name;let o=1;s.type===t.FLOAT_MAT2&&(o=2),s.type===t.FLOAT_MAT3&&(o=3),s.type===t.FLOAT_MAT4&&(o=4),n[a]={type:s.type,location:t.getAttribLocation(e,a),locationSize:o}}return n}function Ev(t){return t!==""}function g9(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function x9(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const CRe=/^[ \t]*#include +<([\w\d./]+)>/gm;function kD(t){return t.replace(CRe,MRe)}const ARe=new Map;function MRe(t,e){let n=Mn[e];if(n===void 0){const r=ARe.get(e);if(r!==void 0)n=Mn[r],ct('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return kD(n)}const RRe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function y9(t){return t.replace(RRe,PRe)}function PRe(t,e,n,r){let i="";for(let s=parseInt(e);s<parseInt(n);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function v9(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function NRe(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===Dk?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===RTe?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===mo&&(e="SHADOWMAP_TYPE_VSM"),e}function ORe(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Fc:case Uc:e="ENVMAP_TYPE_CUBE";break;case Ap:e="ENVMAP_TYPE_CUBE_UV";break}return e}function DRe(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case Uc:e="ENVMAP_MODE_REFRACTION";break}return e}function LRe(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case T_:e="ENVMAP_BLENDING_MULTIPLY";break;case LZ:e="ENVMAP_BLENDING_MIX";break;case IZ:e="ENVMAP_BLENDING_ADD";break}return e}function IRe(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}function kRe(t,e,n,r){const i=t.getContext(),s=n.defines;let a=n.vertexShader,o=n.fragmentShader;const l=NRe(n),c=ORe(n),u=DRe(n),f=LRe(n),p=IRe(n),m=wRe(n),x=TRe(s),b=i.createProgram();let v,_,E=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(v=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,x].filter(Ev).join(`
`),v.length>0&&(v+=`
`),_=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,x].filter(Ev).join(`
`),_.length>0&&(_+=`
`)):(v=[v9(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,x,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",n.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ev).join(`
`),_=[v9(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,x,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+f:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",n.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==ya?"#define TONE_MAPPING":"",n.toneMapping!==ya?Mn.tonemapping_pars_fragment:"",n.toneMapping!==ya?_Re("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Mn.colorspace_pars_fragment,bRe("linearToOutputTexel",n.outputColorSpace),SRe(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Ev).join(`
`)),a=kD(a),a=g9(a,n),a=x9(a,n),o=kD(o),o=g9(o,n),o=x9(o,n),a=y9(a),o=y9(o),n.isRawShaderMaterial!==!0&&(E=`#version 300 es
`,v=[m,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,_=["#define varying in",n.glslVersion===C$?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===C$?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+_);const T=E+v+a,A=E+_+o,C=h9(i,i.VERTEX_SHADER,T),M=h9(i,i.FRAGMENT_SHADER,A);i.attachShader(b,C),i.attachShader(b,M),n.index0AttributeName!==void 0?i.bindAttribLocation(b,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(b,0,"position"),i.linkProgram(b);function P(k){if(t.debug.checkShaderErrors){const I=i.getProgramInfoLog(b)||"",F=i.getShaderInfoLog(C)||"",z=i.getShaderInfoLog(M)||"",H=I.trim(),B=F.trim(),j=z.trim();let G=!0,W=!0;if(i.getProgramParameter(b,i.LINK_STATUS)===!1)if(G=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,b,C,M);else{const re=m9(i,C,"vertex"),$=m9(i,M,"fragment");xt("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(b,i.VALIDATE_STATUS)+`

Material Name: `+k.name+`
Material Type: `+k.type+`

Program Info Log: `+H+`
`+re+`
`+$)}else H!==""?ct("WebGLProgram: Program Info Log:",H):(B===""||j==="")&&(W=!1);W&&(k.diagnostics={runnable:G,programLog:H,vertexShader:{log:B,prefix:v},fragmentShader:{log:j,prefix:_}})}i.deleteShader(C),i.deleteShader(M),D=new ET(i,b),N=ERe(i,b)}let D;this.getUniforms=function(){return D===void 0&&P(this),D};let N;this.getAttributes=function(){return N===void 0&&P(this),N};let L=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return L===!1&&(L=i.getProgramParameter(b,gRe)),L},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(b),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=xRe++,this.cacheKey=e,this.usedTimes=1,this.program=b,this.vertexShader=C,this.fragmentShader=M,this}let BRe=0;class FRe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),s=this._getShaderStage(r),a=this._getShaderCacheForMaterial(e);return a.has(i)===!1&&(a.add(i),i.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new URe(e),n.set(e,r)),r}}class URe{constructor(e){this.id=BRe++,this.code=e,this.usedTimes=0}}function jRe(t,e,n,r,i,s,a){const o=new rB,l=new FRe,c=new Set,u=[],f=i.logarithmicDepthBuffer,p=i.vertexTextures;let m=i.precision;const x={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function b(N){return c.add(N),N===0?"uv":`uv${N}`}function v(N,L,k,I,F){const z=I.fog,H=F.geometry,B=N.isMeshStandardMaterial?I.environment:null,j=(N.isMeshStandardMaterial?n:e).get(N.envMap||B),G=j&&j.mapping===Ap?j.image.height:null,W=x[N.type];N.precision!==null&&(m=i.getMaxPrecision(N.precision),m!==N.precision&&ct("WebGLProgram.getParameters:",N.precision,"not supported, using",m,"instead."));const re=H.morphAttributes.position||H.morphAttributes.normal||H.morphAttributes.color,$=re!==void 0?re.length:0;let ee=0;H.morphAttributes.position!==void 0&&(ee=1),H.morphAttributes.normal!==void 0&&(ee=2),H.morphAttributes.color!==void 0&&(ee=3);let oe,me,te,K;if(W){const Kt=Tc[W];oe=Kt.vertexShader,me=Kt.fragmentShader}else oe=N.vertexShader,me=N.fragmentShader,l.update(N),te=l.getVertexShaderID(N),K=l.getFragmentShaderID(N);const ne=t.getRenderTarget(),Ee=t.state.buffers.depth.getReversed(),se=F.isInstancedMesh===!0,ve=F.isBatchedMesh===!0,Pe=!!N.map,ge=!!N.matcap,be=!!j,_e=!!N.aoMap,Q=!!N.lightMap,et=!!N.bumpMap,ze=!!N.normalMap,Je=!!N.displacementMap,fe=!!N.emissiveMap,rt=!!N.metalnessMap,$e=!!N.roughnessMap,Se=N.anisotropy>0,q=N.clearcoat>0,V=N.dispersion>0,ie=N.iridescence>0,le=N.sheen>0,xe=N.transmission>0,pe=Se&&!!N.anisotropyMap,it=q&&!!N.clearcoatMap,We=q&&!!N.clearcoatNormalMap,dt=q&&!!N.clearcoatRoughnessMap,ft=ie&&!!N.iridescenceMap,Be=ie&&!!N.iridescenceThicknessMap,ot=le&&!!N.sheenColorMap,st=le&&!!N.sheenRoughnessMap,ht=!!N.specularMap,gt=!!N.specularColorMap,Ut=!!N.specularIntensityMap,ue=xe&&!!N.transmissionMap,we=xe&&!!N.thicknessMap,Ke=!!N.gradientMap,Ge=!!N.alphaMap,Xe=N.alphaTest>0,Ve=!!N.alphaHash,yt=!!N.extensions;let Mt=ya;N.toneMapped&&(ne===null||ne.isXRRenderTarget===!0)&&(Mt=t.toneMapping);const Ct={shaderID:W,shaderType:N.type,shaderName:N.name,vertexShader:oe,fragmentShader:me,defines:N.defines,customVertexShaderID:te,customFragmentShaderID:K,isRawShaderMaterial:N.isRawShaderMaterial===!0,glslVersion:N.glslVersion,precision:m,batching:ve,batchingColor:ve&&F._colorsTexture!==null,instancing:se,instancingColor:se&&F.instanceColor!==null,instancingMorph:se&&F.morphTexture!==null,supportsVertexTextures:p,outputColorSpace:ne===null?t.outputColorSpace:ne.isXRRenderTarget===!0?ne.texture.colorSpace:Pp,alphaToCoverage:!!N.alphaToCoverage,map:Pe,matcap:ge,envMap:be,envMapMode:be&&j.mapping,envMapCubeUVHeight:G,aoMap:_e,lightMap:Q,bumpMap:et,normalMap:ze,displacementMap:p&&Je,emissiveMap:fe,normalMapObjectSpace:ze&&N.normalMapType===$Z,normalMapTangentSpace:ze&&N.normalMapType===ud,metalnessMap:rt,roughnessMap:$e,anisotropy:Se,anisotropyMap:pe,clearcoat:q,clearcoatMap:it,clearcoatNormalMap:We,clearcoatRoughnessMap:dt,dispersion:V,iridescence:ie,iridescenceMap:ft,iridescenceThicknessMap:Be,sheen:le,sheenColorMap:ot,sheenRoughnessMap:st,specularMap:ht,specularColorMap:gt,specularIntensityMap:Ut,transmission:xe,transmissionMap:ue,thicknessMap:we,gradientMap:Ke,opaque:N.transparent===!1&&N.blending===To&&N.alphaToCoverage===!1,alphaMap:Ge,alphaTest:Xe,alphaHash:Ve,combine:N.combine,mapUv:Pe&&b(N.map.channel),aoMapUv:_e&&b(N.aoMap.channel),lightMapUv:Q&&b(N.lightMap.channel),bumpMapUv:et&&b(N.bumpMap.channel),normalMapUv:ze&&b(N.normalMap.channel),displacementMapUv:Je&&b(N.displacementMap.channel),emissiveMapUv:fe&&b(N.emissiveMap.channel),metalnessMapUv:rt&&b(N.metalnessMap.channel),roughnessMapUv:$e&&b(N.roughnessMap.channel),anisotropyMapUv:pe&&b(N.anisotropyMap.channel),clearcoatMapUv:it&&b(N.clearcoatMap.channel),clearcoatNormalMapUv:We&&b(N.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:dt&&b(N.clearcoatRoughnessMap.channel),iridescenceMapUv:ft&&b(N.iridescenceMap.channel),iridescenceThicknessMapUv:Be&&b(N.iridescenceThicknessMap.channel),sheenColorMapUv:ot&&b(N.sheenColorMap.channel),sheenRoughnessMapUv:st&&b(N.sheenRoughnessMap.channel),specularMapUv:ht&&b(N.specularMap.channel),specularColorMapUv:gt&&b(N.specularColorMap.channel),specularIntensityMapUv:Ut&&b(N.specularIntensityMap.channel),transmissionMapUv:ue&&b(N.transmissionMap.channel),thicknessMapUv:we&&b(N.thicknessMap.channel),alphaMapUv:Ge&&b(N.alphaMap.channel),vertexTangents:!!H.attributes.tangent&&(ze||Se),vertexColors:N.vertexColors,vertexAlphas:N.vertexColors===!0&&!!H.attributes.color&&H.attributes.color.itemSize===4,pointsUvs:F.isPoints===!0&&!!H.attributes.uv&&(Pe||Ge),fog:!!z,useFog:N.fog===!0,fogExp2:!!z&&z.isFogExp2,flatShading:N.flatShading===!0&&N.wireframe===!1,sizeAttenuation:N.sizeAttenuation===!0,logarithmicDepthBuffer:f,reversedDepthBuffer:Ee,skinning:F.isSkinnedMesh===!0,morphTargets:H.morphAttributes.position!==void 0,morphNormals:H.morphAttributes.normal!==void 0,morphColors:H.morphAttributes.color!==void 0,morphTargetsCount:$,morphTextureStride:ee,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numSpotLightMaps:L.spotLightMap.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numSpotLightShadowsWithMaps:L.numSpotLightShadowsWithMaps,numLightProbes:L.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:N.dithering,shadowMapEnabled:t.shadowMap.enabled&&k.length>0,shadowMapType:t.shadowMap.type,toneMapping:Mt,decodeVideoTexture:Pe&&N.map.isVideoTexture===!0&&sn.getTransfer(N.map.colorSpace)===Ot,decodeVideoTextureEmissive:fe&&N.emissiveMap.isVideoTexture===!0&&sn.getTransfer(N.emissiveMap.colorSpace)===Ot,premultipliedAlpha:N.premultipliedAlpha,doubleSided:N.side===Zs,flipSided:N.side===Sr,useDepthPacking:N.depthPacking>=0,depthPacking:N.depthPacking||0,index0AttributeName:N.index0AttributeName,extensionClipCullDistance:yt&&N.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(yt&&N.extensions.multiDraw===!0||ve)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:N.customProgramCacheKey()};return Ct.vertexUv1s=c.has(1),Ct.vertexUv2s=c.has(2),Ct.vertexUv3s=c.has(3),c.clear(),Ct}function _(N){const L=[];if(N.shaderID?L.push(N.shaderID):(L.push(N.customVertexShaderID),L.push(N.customFragmentShaderID)),N.defines!==void 0)for(const k in N.defines)L.push(k),L.push(N.defines[k]);return N.isRawShaderMaterial===!1&&(E(L,N),T(L,N),L.push(t.outputColorSpace)),L.push(N.customProgramCacheKey),L.join()}function E(N,L){N.push(L.precision),N.push(L.outputColorSpace),N.push(L.envMapMode),N.push(L.envMapCubeUVHeight),N.push(L.mapUv),N.push(L.alphaMapUv),N.push(L.lightMapUv),N.push(L.aoMapUv),N.push(L.bumpMapUv),N.push(L.normalMapUv),N.push(L.displacementMapUv),N.push(L.emissiveMapUv),N.push(L.metalnessMapUv),N.push(L.roughnessMapUv),N.push(L.anisotropyMapUv),N.push(L.clearcoatMapUv),N.push(L.clearcoatNormalMapUv),N.push(L.clearcoatRoughnessMapUv),N.push(L.iridescenceMapUv),N.push(L.iridescenceThicknessMapUv),N.push(L.sheenColorMapUv),N.push(L.sheenRoughnessMapUv),N.push(L.specularMapUv),N.push(L.specularColorMapUv),N.push(L.specularIntensityMapUv),N.push(L.transmissionMapUv),N.push(L.thicknessMapUv),N.push(L.combine),N.push(L.fogExp2),N.push(L.sizeAttenuation),N.push(L.morphTargetsCount),N.push(L.morphAttributeCount),N.push(L.numDirLights),N.push(L.numPointLights),N.push(L.numSpotLights),N.push(L.numSpotLightMaps),N.push(L.numHemiLights),N.push(L.numRectAreaLights),N.push(L.numDirLightShadows),N.push(L.numPointLightShadows),N.push(L.numSpotLightShadows),N.push(L.numSpotLightShadowsWithMaps),N.push(L.numLightProbes),N.push(L.shadowMapType),N.push(L.toneMapping),N.push(L.numClippingPlanes),N.push(L.numClipIntersection),N.push(L.depthPacking)}function T(N,L){o.disableAll(),L.supportsVertexTextures&&o.enable(0),L.instancing&&o.enable(1),L.instancingColor&&o.enable(2),L.instancingMorph&&o.enable(3),L.matcap&&o.enable(4),L.envMap&&o.enable(5),L.normalMapObjectSpace&&o.enable(6),L.normalMapTangentSpace&&o.enable(7),L.clearcoat&&o.enable(8),L.iridescence&&o.enable(9),L.alphaTest&&o.enable(10),L.vertexColors&&o.enable(11),L.vertexAlphas&&o.enable(12),L.vertexUv1s&&o.enable(13),L.vertexUv2s&&o.enable(14),L.vertexUv3s&&o.enable(15),L.vertexTangents&&o.enable(16),L.anisotropy&&o.enable(17),L.alphaHash&&o.enable(18),L.batching&&o.enable(19),L.dispersion&&o.enable(20),L.batchingColor&&o.enable(21),L.gradientMap&&o.enable(22),N.push(o.mask),o.disableAll(),L.fog&&o.enable(0),L.useFog&&o.enable(1),L.flatShading&&o.enable(2),L.logarithmicDepthBuffer&&o.enable(3),L.reversedDepthBuffer&&o.enable(4),L.skinning&&o.enable(5),L.morphTargets&&o.enable(6),L.morphNormals&&o.enable(7),L.morphColors&&o.enable(8),L.premultipliedAlpha&&o.enable(9),L.shadowMapEnabled&&o.enable(10),L.doubleSided&&o.enable(11),L.flipSided&&o.enable(12),L.useDepthPacking&&o.enable(13),L.dithering&&o.enable(14),L.transmission&&o.enable(15),L.sheen&&o.enable(16),L.opaque&&o.enable(17),L.pointsUvs&&o.enable(18),L.decodeVideoTexture&&o.enable(19),L.decodeVideoTextureEmissive&&o.enable(20),L.alphaToCoverage&&o.enable(21),N.push(o.mask)}function A(N){const L=x[N.type];let k;if(L){const I=Tc[L];k=qZ.clone(I.uniforms)}else k=N.uniforms;return k}function C(N,L){let k;for(let I=0,F=u.length;I<F;I++){const z=u[I];if(z.cacheKey===L){k=z,++k.usedTimes;break}}return k===void 0&&(k=new kRe(t,L,N,s),u.push(k)),k}function M(N){if(--N.usedTimes===0){const L=u.indexOf(N);u[L]=u[u.length-1],u.pop(),N.destroy()}}function P(N){l.remove(N)}function D(){l.dispose()}return{getParameters:v,getProgramCacheKey:_,getUniforms:A,acquireProgram:C,releaseProgram:M,releaseShaderCache:P,programs:u,dispose:D}}function zRe(){let t=new WeakMap;function e(a){return t.has(a)}function n(a){let o=t.get(a);return o===void 0&&(o={},t.set(a,o)),o}function r(a){t.delete(a)}function i(a,o,l){t.get(a)[o]=l}function s(){t=new WeakMap}return{has:e,get:n,remove:r,update:i,dispose:s}}function $Re(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function b9(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function _9(){const t=[];let e=0;const n=[],r=[],i=[];function s(){e=0,n.length=0,r.length=0,i.length=0}function a(f,p,m,x,b,v){let _=t[e];return _===void 0?(_={id:f.id,object:f,geometry:p,material:m,groupOrder:x,renderOrder:f.renderOrder,z:b,group:v},t[e]=_):(_.id=f.id,_.object=f,_.geometry=p,_.material=m,_.groupOrder=x,_.renderOrder=f.renderOrder,_.z=b,_.group=v),e++,_}function o(f,p,m,x,b,v){const _=a(f,p,m,x,b,v);m.transmission>0?r.push(_):m.transparent===!0?i.push(_):n.push(_)}function l(f,p,m,x,b,v){const _=a(f,p,m,x,b,v);m.transmission>0?r.unshift(_):m.transparent===!0?i.unshift(_):n.unshift(_)}function c(f,p){n.length>1&&n.sort(f||$Re),r.length>1&&r.sort(p||b9),i.length>1&&i.sort(p||b9)}function u(){for(let f=e,p=t.length;f<p;f++){const m=t[f];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:n,transmissive:r,transparent:i,init:s,push:o,unshift:l,finish:u,sort:c}}function GRe(){let t=new WeakMap;function e(r,i){const s=t.get(r);let a;return s===void 0?(a=new _9,t.set(r,[a])):i>=s.length?(a=new _9,s.push(a)):a=s[i],a}function n(){t=new WeakMap}return{get:e,dispose:n}}function VRe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new ae,color:new Xt};break;case"SpotLight":n={position:new ae,direction:new ae,color:new Xt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new ae,color:new Xt,distance:0,decay:0};break;case"HemisphereLight":n={direction:new ae,skyColor:new Xt,groundColor:new Xt};break;case"RectAreaLight":n={color:new Xt,position:new ae,halfWidth:new ae,halfHeight:new ae};break}return t[e.id]=n,n}}}function HRe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new mt};break;case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new mt};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new mt,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let WRe=0;function qRe(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function XRe(t){const e=new VRe,n=HRe(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)r.probe.push(new ae);const i=new ae,s=new In,a=new In;function o(c){let u=0,f=0,p=0;for(let N=0;N<9;N++)r.probe[N].set(0,0,0);let m=0,x=0,b=0,v=0,_=0,E=0,T=0,A=0,C=0,M=0,P=0;c.sort(qRe);for(let N=0,L=c.length;N<L;N++){const k=c[N],I=k.color,F=k.intensity,z=k.distance,H=k.shadow&&k.shadow.map?k.shadow.map.texture:null;if(k.isAmbientLight)u+=I.r*F,f+=I.g*F,p+=I.b*F;else if(k.isLightProbe){for(let B=0;B<9;B++)r.probe[B].addScaledVector(k.sh.coefficients[B],F);P++}else if(k.isDirectionalLight){const B=e.get(k);if(B.color.copy(k.color).multiplyScalar(k.intensity),k.castShadow){const j=k.shadow,G=n.get(k);G.shadowIntensity=j.intensity,G.shadowBias=j.bias,G.shadowNormalBias=j.normalBias,G.shadowRadius=j.radius,G.shadowMapSize=j.mapSize,r.directionalShadow[m]=G,r.directionalShadowMap[m]=H,r.directionalShadowMatrix[m]=k.shadow.matrix,E++}r.directional[m]=B,m++}else if(k.isSpotLight){const B=e.get(k);B.position.setFromMatrixPosition(k.matrixWorld),B.color.copy(I).multiplyScalar(F),B.distance=z,B.coneCos=Math.cos(k.angle),B.penumbraCos=Math.cos(k.angle*(1-k.penumbra)),B.decay=k.decay,r.spot[b]=B;const j=k.shadow;if(k.map&&(r.spotLightMap[C]=k.map,C++,j.updateMatrices(k),k.castShadow&&M++),r.spotLightMatrix[b]=j.matrix,k.castShadow){const G=n.get(k);G.shadowIntensity=j.intensity,G.shadowBias=j.bias,G.shadowNormalBias=j.normalBias,G.shadowRadius=j.radius,G.shadowMapSize=j.mapSize,r.spotShadow[b]=G,r.spotShadowMap[b]=H,A++}b++}else if(k.isRectAreaLight){const B=e.get(k);B.color.copy(I).multiplyScalar(F),B.halfWidth.set(k.width*.5,0,0),B.halfHeight.set(0,k.height*.5,0),r.rectArea[v]=B,v++}else if(k.isPointLight){const B=e.get(k);if(B.color.copy(k.color).multiplyScalar(k.intensity),B.distance=k.distance,B.decay=k.decay,k.castShadow){const j=k.shadow,G=n.get(k);G.shadowIntensity=j.intensity,G.shadowBias=j.bias,G.shadowNormalBias=j.normalBias,G.shadowRadius=j.radius,G.shadowMapSize=j.mapSize,G.shadowCameraNear=j.camera.near,G.shadowCameraFar=j.camera.far,r.pointShadow[x]=G,r.pointShadowMap[x]=H,r.pointShadowMatrix[x]=k.shadow.matrix,T++}r.point[x]=B,x++}else if(k.isHemisphereLight){const B=e.get(k);B.skyColor.copy(k.color).multiplyScalar(F),B.groundColor.copy(k.groundColor).multiplyScalar(F),r.hemi[_]=B,_++}}v>0&&(t.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=At.LTC_FLOAT_1,r.rectAreaLTC2=At.LTC_FLOAT_2):(r.rectAreaLTC1=At.LTC_HALF_1,r.rectAreaLTC2=At.LTC_HALF_2)),r.ambient[0]=u,r.ambient[1]=f,r.ambient[2]=p;const D=r.hash;(D.directionalLength!==m||D.pointLength!==x||D.spotLength!==b||D.rectAreaLength!==v||D.hemiLength!==_||D.numDirectionalShadows!==E||D.numPointShadows!==T||D.numSpotShadows!==A||D.numSpotMaps!==C||D.numLightProbes!==P)&&(r.directional.length=m,r.spot.length=b,r.rectArea.length=v,r.point.length=x,r.hemi.length=_,r.directionalShadow.length=E,r.directionalShadowMap.length=E,r.pointShadow.length=T,r.pointShadowMap.length=T,r.spotShadow.length=A,r.spotShadowMap.length=A,r.directionalShadowMatrix.length=E,r.pointShadowMatrix.length=T,r.spotLightMatrix.length=A+C-M,r.spotLightMap.length=C,r.numSpotLightShadowsWithMaps=M,r.numLightProbes=P,D.directionalLength=m,D.pointLength=x,D.spotLength=b,D.rectAreaLength=v,D.hemiLength=_,D.numDirectionalShadows=E,D.numPointShadows=T,D.numSpotShadows=A,D.numSpotMaps=C,D.numLightProbes=P,r.version=WRe++)}function l(c,u){let f=0,p=0,m=0,x=0,b=0;const v=u.matrixWorldInverse;for(let _=0,E=c.length;_<E;_++){const T=c[_];if(T.isDirectionalLight){const A=r.directional[f];A.direction.setFromMatrixPosition(T.matrixWorld),i.setFromMatrixPosition(T.target.matrixWorld),A.direction.sub(i),A.direction.transformDirection(v),f++}else if(T.isSpotLight){const A=r.spot[m];A.position.setFromMatrixPosition(T.matrixWorld),A.position.applyMatrix4(v),A.direction.setFromMatrixPosition(T.matrixWorld),i.setFromMatrixPosition(T.target.matrixWorld),A.direction.sub(i),A.direction.transformDirection(v),m++}else if(T.isRectAreaLight){const A=r.rectArea[x];A.position.setFromMatrixPosition(T.matrixWorld),A.position.applyMatrix4(v),a.identity(),s.copy(T.matrixWorld),s.premultiply(v),a.extractRotation(s),A.halfWidth.set(T.width*.5,0,0),A.halfHeight.set(0,T.height*.5,0),A.halfWidth.applyMatrix4(a),A.halfHeight.applyMatrix4(a),x++}else if(T.isPointLight){const A=r.point[p];A.position.setFromMatrixPosition(T.matrixWorld),A.position.applyMatrix4(v),p++}else if(T.isHemisphereLight){const A=r.hemi[b];A.direction.setFromMatrixPosition(T.matrixWorld),A.direction.transformDirection(v),b++}}}return{setup:o,setupView:l,state:r}}function S9(t){const e=new XRe(t),n=[],r=[];function i(u){c.camera=u,n.length=0,r.length=0}function s(u){n.push(u)}function a(u){r.push(u)}function o(){e.setup(n)}function l(u){e.setupView(n,u)}const c={lightsArray:n,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:c,setupLights:o,setupLightsView:l,pushLight:s,pushShadow:a}}function YRe(t){let e=new WeakMap;function n(i,s=0){const a=e.get(i);let o;return a===void 0?(o=new S9(t),e.set(i,[o])):s>=a.length?(o=new S9(t),a.push(o)):o=a[s],o}function r(){e=new WeakMap}return{get:n,dispose:r}}const KRe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,ZRe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function QRe(t,e,n){let r=new R_;const i=new mt,s=new mt,a=new an,o=new cEe({depthPacking:BTe}),l=new uEe,c={},u=n.maxTextureSize,f={[wo]:Sr,[Sr]:wo,[Zs]:Zs},p=new Yl({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new mt},radius:{value:4}},vertexShader:KRe,fragmentShader:ZRe}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const x=new Us;x.setAttribute("position",new Bs(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const b=new Ji(x,p),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Dk;let _=this.type;this.render=function(M,P,D){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||M.length===0)return;const N=t.getRenderTarget(),L=t.getActiveCubeFace(),k=t.getActiveMipmapLevel(),I=t.state;I.setBlending(_a),I.buffers.depth.getReversed()===!0?I.buffers.color.setClear(0,0,0,0):I.buffers.color.setClear(1,1,1,1),I.buffers.depth.setTest(!0),I.setScissorTest(!1);const F=_!==mo&&this.type===mo,z=_===mo&&this.type!==mo;for(let H=0,B=M.length;H<B;H++){const j=M[H],G=j.shadow;if(G===void 0){ct("WebGLShadowMap:",j,"has no shadow.");continue}if(G.autoUpdate===!1&&G.needsUpdate===!1)continue;i.copy(G.mapSize);const W=G.getFrameExtents();if(i.multiply(W),s.copy(G.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/W.x),i.x=s.x*W.x,G.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/W.y),i.y=s.y*W.y,G.mapSize.y=s.y)),G.map===null||F===!0||z===!0){const $=this.type!==mo?{minFilter:Lr,magFilter:Lr}:{};G.map!==null&&G.map.dispose(),G.map=new zf(i.x,i.y,$),G.map.texture.name=j.name+".shadowMap",G.camera.updateProjectionMatrix()}t.setRenderTarget(G.map),t.clear();const re=G.getViewportCount();for(let $=0;$<re;$++){const ee=G.getViewport($);a.set(s.x*ee.x,s.y*ee.y,s.x*ee.z,s.y*ee.w),I.viewport(a),G.updateMatrices(j,$),r=G.getFrustum(),A(P,D,G.camera,j,this.type)}G.isPointLightShadow!==!0&&this.type===mo&&E(G,D),G.needsUpdate=!1}_=this.type,v.needsUpdate=!1,t.setRenderTarget(N,L,k)};function E(M,P){const D=e.update(b);p.defines.VSM_SAMPLES!==M.blurSamples&&(p.defines.VSM_SAMPLES=M.blurSamples,m.defines.VSM_SAMPLES=M.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),M.mapPass===null&&(M.mapPass=new zf(i.x,i.y)),p.uniforms.shadow_pass.value=M.map.texture,p.uniforms.resolution.value=M.mapSize,p.uniforms.radius.value=M.radius,t.setRenderTarget(M.mapPass),t.clear(),t.renderBufferDirect(P,null,D,p,b,null),m.uniforms.shadow_pass.value=M.mapPass.texture,m.uniforms.resolution.value=M.mapSize,m.uniforms.radius.value=M.radius,t.setRenderTarget(M.map),t.clear(),t.renderBufferDirect(P,null,D,m,b,null)}function T(M,P,D,N){let L=null;const k=D.isPointLight===!0?M.customDistanceMaterial:M.customDepthMaterial;if(k!==void 0)L=k;else if(L=D.isPointLight===!0?l:o,t.localClippingEnabled&&P.clipShadows===!0&&Array.isArray(P.clippingPlanes)&&P.clippingPlanes.length!==0||P.displacementMap&&P.displacementScale!==0||P.alphaMap&&P.alphaTest>0||P.map&&P.alphaTest>0||P.alphaToCoverage===!0){const I=L.uuid,F=P.uuid;let z=c[I];z===void 0&&(z={},c[I]=z);let H=z[F];H===void 0&&(H=L.clone(),z[F]=H,P.addEventListener("dispose",C)),L=H}if(L.visible=P.visible,L.wireframe=P.wireframe,N===mo?L.side=P.shadowSide!==null?P.shadowSide:P.side:L.side=P.shadowSide!==null?P.shadowSide:f[P.side],L.alphaMap=P.alphaMap,L.alphaTest=P.alphaToCoverage===!0?.5:P.alphaTest,L.map=P.map,L.clipShadows=P.clipShadows,L.clippingPlanes=P.clippingPlanes,L.clipIntersection=P.clipIntersection,L.displacementMap=P.displacementMap,L.displacementScale=P.displacementScale,L.displacementBias=P.displacementBias,L.wireframeLinewidth=P.wireframeLinewidth,L.linewidth=P.linewidth,D.isPointLight===!0&&L.isMeshDistanceMaterial===!0){const I=t.properties.get(L);I.light=D}return L}function A(M,P,D,N,L){if(M.visible===!1)return;if(M.layers.test(P.layers)&&(M.isMesh||M.isLine||M.isPoints)&&(M.castShadow||M.receiveShadow&&L===mo)&&(!M.frustumCulled||r.intersectsObject(M))){M.modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,M.matrixWorld);const F=e.update(M),z=M.material;if(Array.isArray(z)){const H=F.groups;for(let B=0,j=H.length;B<j;B++){const G=H[B],W=z[G.materialIndex];if(W&&W.visible){const re=T(M,W,N,L);M.onBeforeShadow(t,M,P,D,F,re,G),t.renderBufferDirect(D,null,F,re,M,G),M.onAfterShadow(t,M,P,D,F,re,G)}}}else if(z.visible){const H=T(M,z,N,L);M.onBeforeShadow(t,M,P,D,F,H,null),t.renderBufferDirect(D,null,F,H,M,null),M.onAfterShadow(t,M,P,D,F,H,null)}}const I=M.children;for(let F=0,z=I.length;F<z;F++)A(I[F],P,D,N,L)}function C(M){M.target.removeEventListener("dispose",C);for(const D in c){const N=c[D],L=M.target.uuid;L in N&&(N[L].dispose(),delete N[L])}}}const JRe={[wb]:Tb,[Eb]:Mb,[Cb]:Rb,[Uf]:Ab,[Tb]:wb,[Mb]:Eb,[Rb]:Cb,[Ab]:Uf};function e3e(t,e){function n(){let ue=!1;const we=new an;let Ke=null;const Ge=new an(0,0,0,0);return{setMask:function(Xe){Ke!==Xe&&!ue&&(t.colorMask(Xe,Xe,Xe,Xe),Ke=Xe)},setLocked:function(Xe){ue=Xe},setClear:function(Xe,Ve,yt,Mt,Ct){Ct===!0&&(Xe*=Mt,Ve*=Mt,yt*=Mt),we.set(Xe,Ve,yt,Mt),Ge.equals(we)===!1&&(t.clearColor(Xe,Ve,yt,Mt),Ge.copy(we))},reset:function(){ue=!1,Ke=null,Ge.set(-1,0,0,0)}}}function r(){let ue=!1,we=!1,Ke=null,Ge=null,Xe=null;return{setReversed:function(Ve){if(we!==Ve){const yt=e.get("EXT_clip_control");Ve?yt.clipControlEXT(yt.LOWER_LEFT_EXT,yt.ZERO_TO_ONE_EXT):yt.clipControlEXT(yt.LOWER_LEFT_EXT,yt.NEGATIVE_ONE_TO_ONE_EXT),we=Ve;const Mt=Xe;Xe=null,this.setClear(Mt)}},getReversed:function(){return we},setTest:function(Ve){Ve?ne(t.DEPTH_TEST):Ee(t.DEPTH_TEST)},setMask:function(Ve){Ke!==Ve&&!ue&&(t.depthMask(Ve),Ke=Ve)},setFunc:function(Ve){if(we&&(Ve=JRe[Ve]),Ge!==Ve){switch(Ve){case wb:t.depthFunc(t.NEVER);break;case Tb:t.depthFunc(t.ALWAYS);break;case Eb:t.depthFunc(t.LESS);break;case Uf:t.depthFunc(t.LEQUAL);break;case Cb:t.depthFunc(t.EQUAL);break;case Ab:t.depthFunc(t.GEQUAL);break;case Mb:t.depthFunc(t.GREATER);break;case Rb:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}Ge=Ve}},setLocked:function(Ve){ue=Ve},setClear:function(Ve){Xe!==Ve&&(we&&(Ve=1-Ve),t.clearDepth(Ve),Xe=Ve)},reset:function(){ue=!1,Ke=null,Ge=null,Xe=null,we=!1}}}function i(){let ue=!1,we=null,Ke=null,Ge=null,Xe=null,Ve=null,yt=null,Mt=null,Ct=null;return{setTest:function(Kt){ue||(Kt?ne(t.STENCIL_TEST):Ee(t.STENCIL_TEST))},setMask:function(Kt){we!==Kt&&!ue&&(t.stencilMask(Kt),we=Kt)},setFunc:function(Kt,vt,It){(Ke!==Kt||Ge!==vt||Xe!==It)&&(t.stencilFunc(Kt,vt,It),Ke=Kt,Ge=vt,Xe=It)},setOp:function(Kt,vt,It){(Ve!==Kt||yt!==vt||Mt!==It)&&(t.stencilOp(Kt,vt,It),Ve=Kt,yt=vt,Mt=It)},setLocked:function(Kt){ue=Kt},setClear:function(Kt){Ct!==Kt&&(t.clearStencil(Kt),Ct=Kt)},reset:function(){ue=!1,we=null,Ke=null,Ge=null,Xe=null,Ve=null,yt=null,Mt=null,Ct=null}}}const s=new n,a=new r,o=new i,l=new WeakMap,c=new WeakMap;let u={},f={},p=new WeakMap,m=[],x=null,b=!1,v=null,_=null,E=null,T=null,A=null,C=null,M=null,P=new Xt(0,0,0),D=0,N=!1,L=null,k=null,I=null,F=null,z=null;const H=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let B=!1,j=0;const G=t.getParameter(t.VERSION);G.indexOf("WebGL")!==-1?(j=parseFloat(/^WebGL (\d)/.exec(G)[1]),B=j>=1):G.indexOf("OpenGL ES")!==-1&&(j=parseFloat(/^OpenGL ES (\d)/.exec(G)[1]),B=j>=2);let W=null,re={};const $=t.getParameter(t.SCISSOR_BOX),ee=t.getParameter(t.VIEWPORT),oe=new an().fromArray($),me=new an().fromArray(ee);function te(ue,we,Ke,Ge){const Xe=new Uint8Array(4),Ve=t.createTexture();t.bindTexture(ue,Ve),t.texParameteri(ue,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(ue,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let yt=0;yt<Ke;yt++)ue===t.TEXTURE_3D||ue===t.TEXTURE_2D_ARRAY?t.texImage3D(we,0,t.RGBA,1,1,Ge,0,t.RGBA,t.UNSIGNED_BYTE,Xe):t.texImage2D(we+yt,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,Xe);return Ve}const K={};K[t.TEXTURE_2D]=te(t.TEXTURE_2D,t.TEXTURE_2D,1),K[t.TEXTURE_CUBE_MAP]=te(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),K[t.TEXTURE_2D_ARRAY]=te(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),K[t.TEXTURE_3D]=te(t.TEXTURE_3D,t.TEXTURE_3D,1,1),s.setClear(0,0,0,1),a.setClear(1),o.setClear(0),ne(t.DEPTH_TEST),a.setFunc(Uf),et(!1),ze(PD),ne(t.CULL_FACE),_e(_a);function ne(ue){u[ue]!==!0&&(t.enable(ue),u[ue]=!0)}function Ee(ue){u[ue]!==!1&&(t.disable(ue),u[ue]=!1)}function se(ue,we){return f[ue]!==we?(t.bindFramebuffer(ue,we),f[ue]=we,ue===t.DRAW_FRAMEBUFFER&&(f[t.FRAMEBUFFER]=we),ue===t.FRAMEBUFFER&&(f[t.DRAW_FRAMEBUFFER]=we),!0):!1}function ve(ue,we){let Ke=m,Ge=!1;if(ue){Ke=p.get(we),Ke===void 0&&(Ke=[],p.set(we,Ke));const Xe=ue.textures;if(Ke.length!==Xe.length||Ke[0]!==t.COLOR_ATTACHMENT0){for(let Ve=0,yt=Xe.length;Ve<yt;Ve++)Ke[Ve]=t.COLOR_ATTACHMENT0+Ve;Ke.length=Xe.length,Ge=!0}}else Ke[0]!==t.BACK&&(Ke[0]=t.BACK,Ge=!0);Ge&&t.drawBuffers(Ke)}function Pe(ue){return x!==ue?(t.useProgram(ue),x=ue,!0):!1}const ge={[Qs]:t.FUNC_ADD,[Lk]:t.FUNC_SUBTRACT,[Ik]:t.FUNC_REVERSE_SUBTRACT};ge[OZ]=t.MIN,ge[DZ]=t.MAX;const be={[Ou]:t.ZERO,[kk]:t.ONE,[Bk]:t.SRC_COLOR,[_b]:t.SRC_ALPHA,[Gk]:t.SRC_ALPHA_SATURATE,[zk]:t.DST_COLOR,[Uk]:t.DST_ALPHA,[Fk]:t.ONE_MINUS_SRC_COLOR,[Sb]:t.ONE_MINUS_SRC_ALPHA,[$k]:t.ONE_MINUS_DST_COLOR,[jk]:t.ONE_MINUS_DST_ALPHA,[PTe]:t.CONSTANT_COLOR,[NTe]:t.ONE_MINUS_CONSTANT_COLOR,[OTe]:t.CONSTANT_ALPHA,[DTe]:t.ONE_MINUS_CONSTANT_ALPHA};function _e(ue,we,Ke,Ge,Xe,Ve,yt,Mt,Ct,Kt){if(ue===_a){b===!0&&(Ee(t.BLEND),b=!1);return}if(b===!1&&(ne(t.BLEND),b=!0),ue!==Ug){if(ue!==v||Kt!==N){if((_!==Qs||A!==Qs)&&(t.blendEquation(t.FUNC_ADD),_=Qs,A=Qs),Kt)switch(ue){case To:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case l0:t.blendFunc(t.ONE,t.ONE);break;case c0:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case u0:t.blendFuncSeparate(t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ZERO,t.ONE);break;default:xt("WebGLState: Invalid blending: ",ue);break}else switch(ue){case To:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case l0:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE,t.ONE,t.ONE);break;case c0:xt("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case u0:xt("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:xt("WebGLState: Invalid blending: ",ue);break}E=null,T=null,C=null,M=null,P.set(0,0,0),D=0,v=ue,N=Kt}return}Xe=Xe||we,Ve=Ve||Ke,yt=yt||Ge,(we!==_||Xe!==A)&&(t.blendEquationSeparate(ge[we],ge[Xe]),_=we,A=Xe),(Ke!==E||Ge!==T||Ve!==C||yt!==M)&&(t.blendFuncSeparate(be[Ke],be[Ge],be[Ve],be[yt]),E=Ke,T=Ge,C=Ve,M=yt),(Mt.equals(P)===!1||Ct!==D)&&(t.blendColor(Mt.r,Mt.g,Mt.b,Ct),P.copy(Mt),D=Ct),v=ue,N=!1}function Q(ue,we){ue.side===Zs?Ee(t.CULL_FACE):ne(t.CULL_FACE);let Ke=ue.side===Sr;we&&(Ke=!Ke),et(Ke),ue.blending===To&&ue.transparent===!1?_e(_a):_e(ue.blending,ue.blendEquation,ue.blendSrc,ue.blendDst,ue.blendEquationAlpha,ue.blendSrcAlpha,ue.blendDstAlpha,ue.blendColor,ue.blendAlpha,ue.premultipliedAlpha),a.setFunc(ue.depthFunc),a.setTest(ue.depthTest),a.setMask(ue.depthWrite),s.setMask(ue.colorWrite);const Ge=ue.stencilWrite;o.setTest(Ge),Ge&&(o.setMask(ue.stencilWriteMask),o.setFunc(ue.stencilFunc,ue.stencilRef,ue.stencilFuncMask),o.setOp(ue.stencilFail,ue.stencilZFail,ue.stencilZPass)),fe(ue.polygonOffset,ue.polygonOffsetFactor,ue.polygonOffsetUnits),ue.alphaToCoverage===!0?ne(t.SAMPLE_ALPHA_TO_COVERAGE):Ee(t.SAMPLE_ALPHA_TO_COVERAGE)}function et(ue){L!==ue&&(ue?t.frontFace(t.CW):t.frontFace(t.CCW),L=ue)}function ze(ue){ue!==PZ?(ne(t.CULL_FACE),ue!==k&&(ue===PD?t.cullFace(t.BACK):ue===NZ?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):Ee(t.CULL_FACE),k=ue}function Je(ue){ue!==I&&(B&&t.lineWidth(ue),I=ue)}function fe(ue,we,Ke){ue?(ne(t.POLYGON_OFFSET_FILL),(F!==we||z!==Ke)&&(t.polygonOffset(we,Ke),F=we,z=Ke)):Ee(t.POLYGON_OFFSET_FILL)}function rt(ue){ue?ne(t.SCISSOR_TEST):Ee(t.SCISSOR_TEST)}function $e(ue){ue===void 0&&(ue=t.TEXTURE0+H-1),W!==ue&&(t.activeTexture(ue),W=ue)}function Se(ue,we,Ke){Ke===void 0&&(W===null?Ke=t.TEXTURE0+H-1:Ke=W);let Ge=re[Ke];Ge===void 0&&(Ge={type:void 0,texture:void 0},re[Ke]=Ge),(Ge.type!==ue||Ge.texture!==we)&&(W!==Ke&&(t.activeTexture(Ke),W=Ke),t.bindTexture(ue,we||K[ue]),Ge.type=ue,Ge.texture=we)}function q(){const ue=re[W];ue!==void 0&&ue.type!==void 0&&(t.bindTexture(ue.type,null),ue.type=void 0,ue.texture=void 0)}function V(){try{t.compressedTexImage2D(...arguments)}catch(ue){ue("WebGLState:",ue)}}function ie(){try{t.compressedTexImage3D(...arguments)}catch(ue){ue("WebGLState:",ue)}}function le(){try{t.texSubImage2D(...arguments)}catch(ue){ue("WebGLState:",ue)}}function xe(){try{t.texSubImage3D(...arguments)}catch(ue){ue("WebGLState:",ue)}}function pe(){try{t.compressedTexSubImage2D(...arguments)}catch(ue){ue("WebGLState:",ue)}}function it(){try{t.compressedTexSubImage3D(...arguments)}catch(ue){ue("WebGLState:",ue)}}function We(){try{t.texStorage2D(...arguments)}catch(ue){ue("WebGLState:",ue)}}function dt(){try{t.texStorage3D(...arguments)}catch(ue){ue("WebGLState:",ue)}}function ft(){try{t.texImage2D(...arguments)}catch(ue){ue("WebGLState:",ue)}}function Be(){try{t.texImage3D(...arguments)}catch(ue){ue("WebGLState:",ue)}}function ot(ue){oe.equals(ue)===!1&&(t.scissor(ue.x,ue.y,ue.z,ue.w),oe.copy(ue))}function st(ue){me.equals(ue)===!1&&(t.viewport(ue.x,ue.y,ue.z,ue.w),me.copy(ue))}function ht(ue,we){let Ke=c.get(we);Ke===void 0&&(Ke=new WeakMap,c.set(we,Ke));let Ge=Ke.get(ue);Ge===void 0&&(Ge=t.getUniformBlockIndex(we,ue.name),Ke.set(ue,Ge))}function gt(ue,we){const Ge=c.get(we).get(ue);l.get(we)!==Ge&&(t.uniformBlockBinding(we,Ge,ue.__bindingPointIndex),l.set(we,Ge))}function Ut(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),a.setReversed(!1),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),u={},W=null,re={},f={},p=new WeakMap,m=[],x=null,b=!1,v=null,_=null,E=null,T=null,A=null,C=null,M=null,P=new Xt(0,0,0),D=0,N=!1,L=null,k=null,I=null,F=null,z=null,oe.set(0,0,t.canvas.width,t.canvas.height),me.set(0,0,t.canvas.width,t.canvas.height),s.reset(),a.reset(),o.reset()}return{buffers:{color:s,depth:a,stencil:o},enable:ne,disable:Ee,bindFramebuffer:se,drawBuffers:ve,useProgram:Pe,setBlending:_e,setMaterial:Q,setFlipSided:et,setCullFace:ze,setLineWidth:Je,setPolygonOffset:fe,setScissorTest:rt,activeTexture:$e,bindTexture:Se,unbindTexture:q,compressedTexImage2D:V,compressedTexImage3D:ie,texImage2D:ft,texImage3D:Be,updateUBOMapping:ht,uniformBlockBinding:gt,texStorage2D:We,texStorage3D:dt,texSubImage2D:le,texSubImage3D:xe,compressedTexSubImage2D:pe,compressedTexSubImage3D:it,scissor:ot,viewport:st,reset:Ut}}function t3e(t,e,n,r,i,s,a){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new mt,u=new WeakMap;let f;const p=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(q,V){return m?new OffscreenCanvas(q,V):Lb("canvas")}function b(q,V,ie){let le=1;const xe=Se(q);if((xe.width>ie||xe.height>ie)&&(le=ie/Math.max(xe.width,xe.height)),le<1)if(typeof HTMLImageElement<"u"&&q instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&q instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&q instanceof ImageBitmap||typeof VideoFrame<"u"&&q instanceof VideoFrame){const pe=Math.floor(le*xe.width),it=Math.floor(le*xe.height);f===void 0&&(f=x(pe,it));const We=V?x(pe,it):f;return We.width=pe,We.height=it,We.getContext("2d").drawImage(q,0,0,pe,it),ct("WebGLRenderer: Texture has been resized from ("+xe.width+"x"+xe.height+") to ("+pe+"x"+it+")."),We}else return"data"in q&&ct("WebGLRenderer: Image in DataTexture is too big ("+xe.width+"x"+xe.height+")."),q;return q}function v(q){return q.generateMipmaps}function _(q){t.generateMipmap(q)}function E(q){return q.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:q.isWebGL3DRenderTarget?t.TEXTURE_3D:q.isWebGLArrayRenderTarget||q.isCompressedArrayTexture?t.TEXTURE_2D_ARRAY:t.TEXTURE_2D}function T(q,V,ie,le,xe=!1){if(q!==null){if(t[q]!==void 0)return t[q];ct("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+q+"'")}let pe=V;if(V===t.RED&&(ie===t.FLOAT&&(pe=t.R32F),ie===t.HALF_FLOAT&&(pe=t.R16F),ie===t.UNSIGNED_BYTE&&(pe=t.R8)),V===t.RED_INTEGER&&(ie===t.UNSIGNED_BYTE&&(pe=t.R8UI),ie===t.UNSIGNED_SHORT&&(pe=t.R16UI),ie===t.UNSIGNED_INT&&(pe=t.R32UI),ie===t.BYTE&&(pe=t.R8I),ie===t.SHORT&&(pe=t.R16I),ie===t.INT&&(pe=t.R32I)),V===t.RG&&(ie===t.FLOAT&&(pe=t.RG32F),ie===t.HALF_FLOAT&&(pe=t.RG16F),ie===t.UNSIGNED_BYTE&&(pe=t.RG8)),V===t.RG_INTEGER&&(ie===t.UNSIGNED_BYTE&&(pe=t.RG8UI),ie===t.UNSIGNED_SHORT&&(pe=t.RG16UI),ie===t.UNSIGNED_INT&&(pe=t.RG32UI),ie===t.BYTE&&(pe=t.RG8I),ie===t.SHORT&&(pe=t.RG16I),ie===t.INT&&(pe=t.RG32I)),V===t.RGB_INTEGER&&(ie===t.UNSIGNED_BYTE&&(pe=t.RGB8UI),ie===t.UNSIGNED_SHORT&&(pe=t.RGB16UI),ie===t.UNSIGNED_INT&&(pe=t.RGB32UI),ie===t.BYTE&&(pe=t.RGB8I),ie===t.SHORT&&(pe=t.RGB16I),ie===t.INT&&(pe=t.RGB32I)),V===t.RGBA_INTEGER&&(ie===t.UNSIGNED_BYTE&&(pe=t.RGBA8UI),ie===t.UNSIGNED_SHORT&&(pe=t.RGBA16UI),ie===t.UNSIGNED_INT&&(pe=t.RGBA32UI),ie===t.BYTE&&(pe=t.RGBA8I),ie===t.SHORT&&(pe=t.RGBA16I),ie===t.INT&&(pe=t.RGBA32I)),V===t.RGB&&(ie===t.UNSIGNED_INT_5_9_9_9_REV&&(pe=t.RGB9_E5),ie===t.UNSIGNED_INT_10F_11F_11F_REV&&(pe=t.R11F_G11F_B10F)),V===t.RGBA){const it=xe?I0:sn.getTransfer(le);ie===t.FLOAT&&(pe=t.RGBA32F),ie===t.HALF_FLOAT&&(pe=t.RGBA16F),ie===t.UNSIGNED_BYTE&&(pe=it===Ot?t.SRGB8_ALPHA8:t.RGBA8),ie===t.UNSIGNED_SHORT_4_4_4_4&&(pe=t.RGBA4),ie===t.UNSIGNED_SHORT_5_5_5_1&&(pe=t.RGB5_A1)}return(pe===t.R16F||pe===t.R32F||pe===t.RG16F||pe===t.RG32F||pe===t.RGBA16F||pe===t.RGBA32F)&&e.get("EXT_color_buffer_float"),pe}function A(q,V){let ie;return q?V===null||V===Ar||V===Eo?ie=t.DEPTH24_STENCIL8:V===Ti?ie=t.DEPTH32F_STENCIL8:V===zl&&(ie=t.DEPTH24_STENCIL8,ct("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):V===null||V===Ar||V===Eo?ie=t.DEPTH_COMPONENT24:V===Ti?ie=t.DEPTH_COMPONENT32F:V===zl&&(ie=t.DEPTH_COMPONENT16),ie}function C(q,V){return v(q)===!0||q.isFramebufferTexture&&q.minFilter!==Lr&&q.minFilter!==ii?Math.log2(Math.max(V.width,V.height))+1:q.mipmaps!==void 0&&q.mipmaps.length>0?q.mipmaps.length:q.isCompressedTexture&&Array.isArray(q.image)?V.mipmaps.length:1}function M(q){const V=q.target;V.removeEventListener("dispose",M),D(V),V.isVideoTexture&&u.delete(V)}function P(q){const V=q.target;V.removeEventListener("dispose",P),L(V)}function D(q){const V=r.get(q);if(V.__webglInit===void 0)return;const ie=q.source,le=p.get(ie);if(le){const xe=le[V.__cacheKey];xe.usedTimes--,xe.usedTimes===0&&N(q),Object.keys(le).length===0&&p.delete(ie)}r.remove(q)}function N(q){const V=r.get(q);t.deleteTexture(V.__webglTexture);const ie=q.source,le=p.get(ie);delete le[V.__cacheKey],a.memory.textures--}function L(q){const V=r.get(q);if(q.depthTexture&&(q.depthTexture.dispose(),r.remove(q.depthTexture)),q.isWebGLCubeRenderTarget)for(let le=0;le<6;le++){if(Array.isArray(V.__webglFramebuffer[le]))for(let xe=0;xe<V.__webglFramebuffer[le].length;xe++)t.deleteFramebuffer(V.__webglFramebuffer[le][xe]);else t.deleteFramebuffer(V.__webglFramebuffer[le]);V.__webglDepthbuffer&&t.deleteRenderbuffer(V.__webglDepthbuffer[le])}else{if(Array.isArray(V.__webglFramebuffer))for(let le=0;le<V.__webglFramebuffer.length;le++)t.deleteFramebuffer(V.__webglFramebuffer[le]);else t.deleteFramebuffer(V.__webglFramebuffer);if(V.__webglDepthbuffer&&t.deleteRenderbuffer(V.__webglDepthbuffer),V.__webglMultisampledFramebuffer&&t.deleteFramebuffer(V.__webglMultisampledFramebuffer),V.__webglColorRenderbuffer)for(let le=0;le<V.__webglColorRenderbuffer.length;le++)V.__webglColorRenderbuffer[le]&&t.deleteRenderbuffer(V.__webglColorRenderbuffer[le]);V.__webglDepthRenderbuffer&&t.deleteRenderbuffer(V.__webglDepthRenderbuffer)}const ie=q.textures;for(let le=0,xe=ie.length;le<xe;le++){const pe=r.get(ie[le]);pe.__webglTexture&&(t.deleteTexture(pe.__webglTexture),a.memory.textures--),r.remove(ie[le])}r.remove(q)}let k=0;function I(){k=0}function F(){const q=k;return q>=i.maxTextures&&ct("WebGLTextures: Trying to use "+q+" texture units while this GPU supports only "+i.maxTextures),k+=1,q}function z(q){const V=[];return V.push(q.wrapS),V.push(q.wrapT),V.push(q.wrapR||0),V.push(q.magFilter),V.push(q.minFilter),V.push(q.anisotropy),V.push(q.internalFormat),V.push(q.format),V.push(q.type),V.push(q.generateMipmaps),V.push(q.premultiplyAlpha),V.push(q.flipY),V.push(q.unpackAlignment),V.push(q.colorSpace),V.join()}function H(q,V){const ie=r.get(q);if(q.isVideoTexture&&rt(q),q.isRenderTargetTexture===!1&&q.isExternalTexture!==!0&&q.version>0&&ie.__version!==q.version){const le=q.image;if(le===null)ct("WebGLRenderer: Texture marked for update but no image data found.");else if(le.complete===!1)ct("WebGLRenderer: Texture marked for update but image is incomplete");else{K(ie,q,V);return}}else q.isExternalTexture&&(ie.__webglTexture=q.sourceTexture?q.sourceTexture:null);n.bindTexture(t.TEXTURE_2D,ie.__webglTexture,t.TEXTURE0+V)}function B(q,V){const ie=r.get(q);if(q.isRenderTargetTexture===!1&&q.version>0&&ie.__version!==q.version){K(ie,q,V);return}else q.isExternalTexture&&(ie.__webglTexture=q.sourceTexture?q.sourceTexture:null);n.bindTexture(t.TEXTURE_2D_ARRAY,ie.__webglTexture,t.TEXTURE0+V)}function j(q,V){const ie=r.get(q);if(q.isRenderTargetTexture===!1&&q.version>0&&ie.__version!==q.version){K(ie,q,V);return}n.bindTexture(t.TEXTURE_3D,ie.__webglTexture,t.TEXTURE0+V)}function G(q,V){const ie=r.get(q);if(q.version>0&&ie.__version!==q.version){ne(ie,q,V);return}n.bindTexture(t.TEXTURE_CUBE_MAP,ie.__webglTexture,t.TEXTURE0+V)}const W={[Mp]:t.REPEAT,[ja]:t.CLAMP_TO_EDGE,[Rp]:t.MIRRORED_REPEAT},re={[Lr]:t.NEAREST,[Hk]:t.NEAREST_MIPMAP_NEAREST,[Vu]:t.NEAREST_MIPMAP_LINEAR,[ii]:t.LINEAR,[jg]:t.LINEAR_MIPMAP_NEAREST,[za]:t.LINEAR_MIPMAP_LINEAR},$={[qk]:t.NEVER,[Qk]:t.ALWAYS,[oC]:t.LESS,[lC]:t.LEQUAL,[Xk]:t.EQUAL,[Zk]:t.GEQUAL,[Yk]:t.GREATER,[Kk]:t.NOTEQUAL};function ee(q,V){if(V.type===Ti&&e.has("OES_texture_float_linear")===!1&&(V.magFilter===ii||V.magFilter===jg||V.magFilter===Vu||V.magFilter===za||V.minFilter===ii||V.minFilter===jg||V.minFilter===Vu||V.minFilter===za)&&ct("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(q,t.TEXTURE_WRAP_S,W[V.wrapS]),t.texParameteri(q,t.TEXTURE_WRAP_T,W[V.wrapT]),(q===t.TEXTURE_3D||q===t.TEXTURE_2D_ARRAY)&&t.texParameteri(q,t.TEXTURE_WRAP_R,W[V.wrapR]),t.texParameteri(q,t.TEXTURE_MAG_FILTER,re[V.magFilter]),t.texParameteri(q,t.TEXTURE_MIN_FILTER,re[V.minFilter]),V.compareFunction&&(t.texParameteri(q,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(q,t.TEXTURE_COMPARE_FUNC,$[V.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(V.magFilter===Lr||V.minFilter!==Vu&&V.minFilter!==za||V.type===Ti&&e.has("OES_texture_float_linear")===!1)return;if(V.anisotropy>1||r.get(V).__currentAnisotropy){const ie=e.get("EXT_texture_filter_anisotropic");t.texParameterf(q,ie.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(V.anisotropy,i.getMaxAnisotropy())),r.get(V).__currentAnisotropy=V.anisotropy}}}function oe(q,V){let ie=!1;q.__webglInit===void 0&&(q.__webglInit=!0,V.addEventListener("dispose",M));const le=V.source;let xe=p.get(le);xe===void 0&&(xe={},p.set(le,xe));const pe=z(V);if(pe!==q.__cacheKey){xe[pe]===void 0&&(xe[pe]={texture:t.createTexture(),usedTimes:0},a.memory.textures++,ie=!0),xe[pe].usedTimes++;const it=xe[q.__cacheKey];it!==void 0&&(xe[q.__cacheKey].usedTimes--,it.usedTimes===0&&N(V)),q.__cacheKey=pe,q.__webglTexture=xe[pe].texture}return ie}function me(q,V,ie){return Math.floor(Math.floor(q/ie)/V)}function te(q,V,ie,le){const pe=q.updateRanges;if(pe.length===0)n.texSubImage2D(t.TEXTURE_2D,0,0,0,V.width,V.height,ie,le,V.data);else{pe.sort((Be,ot)=>Be.start-ot.start);let it=0;for(let Be=1;Be<pe.length;Be++){const ot=pe[it],st=pe[Be],ht=ot.start+ot.count,gt=me(st.start,V.width,4),Ut=me(ot.start,V.width,4);st.start<=ht+1&&gt===Ut&&me(st.start+st.count-1,V.width,4)===gt?ot.count=Math.max(ot.count,st.start+st.count-ot.start):(++it,pe[it]=st)}pe.length=it+1;const We=t.getParameter(t.UNPACK_ROW_LENGTH),dt=t.getParameter(t.UNPACK_SKIP_PIXELS),ft=t.getParameter(t.UNPACK_SKIP_ROWS);t.pixelStorei(t.UNPACK_ROW_LENGTH,V.width);for(let Be=0,ot=pe.length;Be<ot;Be++){const st=pe[Be],ht=Math.floor(st.start/4),gt=Math.ceil(st.count/4),Ut=ht%V.width,ue=Math.floor(ht/V.width),we=gt,Ke=1;t.pixelStorei(t.UNPACK_SKIP_PIXELS,Ut),t.pixelStorei(t.UNPACK_SKIP_ROWS,ue),n.texSubImage2D(t.TEXTURE_2D,0,Ut,ue,we,Ke,ie,le,V.data)}q.clearUpdateRanges(),t.pixelStorei(t.UNPACK_ROW_LENGTH,We),t.pixelStorei(t.UNPACK_SKIP_PIXELS,dt),t.pixelStorei(t.UNPACK_SKIP_ROWS,ft)}}function K(q,V,ie){let le=t.TEXTURE_2D;(V.isDataArrayTexture||V.isCompressedArrayTexture)&&(le=t.TEXTURE_2D_ARRAY),V.isData3DTexture&&(le=t.TEXTURE_3D);const xe=oe(q,V),pe=V.source;n.bindTexture(le,q.__webglTexture,t.TEXTURE0+ie);const it=r.get(pe);if(pe.version!==it.__version||xe===!0){n.activeTexture(t.TEXTURE0+ie);const We=sn.getPrimaries(sn.workingColorSpace),dt=V.colorSpace===Fa?null:sn.getPrimaries(V.colorSpace),ft=V.colorSpace===Fa||We===dt?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,V.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,V.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,ft);let Be=b(V.image,!1,i.maxTextureSize);Be=$e(V,Be);const ot=s.convert(V.format,V.colorSpace),st=s.convert(V.type);let ht=T(V.internalFormat,ot,st,V.colorSpace,V.isVideoTexture);ee(le,V);let gt;const Ut=V.mipmaps,ue=V.isVideoTexture!==!0,we=it.__version===void 0||xe===!0,Ke=pe.dataReady,Ge=C(V,Be);if(V.isDepthTexture)ht=A(V.format===Ao,V.type),we&&(ue?n.texStorage2D(t.TEXTURE_2D,1,ht,Be.width,Be.height):n.texImage2D(t.TEXTURE_2D,0,ht,Be.width,Be.height,0,ot,st,null));else if(V.isDataTexture)if(Ut.length>0){ue&&we&&n.texStorage2D(t.TEXTURE_2D,Ge,ht,Ut[0].width,Ut[0].height);for(let Xe=0,Ve=Ut.length;Xe<Ve;Xe++)gt=Ut[Xe],ue?Ke&&n.texSubImage2D(t.TEXTURE_2D,Xe,0,0,gt.width,gt.height,ot,st,gt.data):n.texImage2D(t.TEXTURE_2D,Xe,ht,gt.width,gt.height,0,ot,st,gt.data);V.generateMipmaps=!1}else ue?(we&&n.texStorage2D(t.TEXTURE_2D,Ge,ht,Be.width,Be.height),Ke&&te(V,Be,ot,st)):n.texImage2D(t.TEXTURE_2D,0,ht,Be.width,Be.height,0,ot,st,Be.data);else if(V.isCompressedTexture)if(V.isCompressedArrayTexture){ue&&we&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Ge,ht,Ut[0].width,Ut[0].height,Be.depth);for(let Xe=0,Ve=Ut.length;Xe<Ve;Xe++)if(gt=Ut[Xe],V.format!==gi)if(ot!==null)if(ue){if(Ke)if(V.layerUpdates.size>0){const yt=ID(gt.width,gt.height,V.format,V.type);for(const Mt of V.layerUpdates){const Ct=gt.data.subarray(Mt*yt/gt.data.BYTES_PER_ELEMENT,(Mt+1)*yt/gt.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,Xe,0,0,Mt,gt.width,gt.height,1,ot,Ct)}V.clearLayerUpdates()}else n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,Xe,0,0,0,gt.width,gt.height,Be.depth,ot,gt.data)}else n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,Xe,ht,gt.width,gt.height,Be.depth,0,gt.data,0,0);else ct("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else ue?Ke&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,Xe,0,0,0,gt.width,gt.height,Be.depth,ot,st,gt.data):n.texImage3D(t.TEXTURE_2D_ARRAY,Xe,ht,gt.width,gt.height,Be.depth,0,ot,st,gt.data)}else{ue&&we&&n.texStorage2D(t.TEXTURE_2D,Ge,ht,Ut[0].width,Ut[0].height);for(let Xe=0,Ve=Ut.length;Xe<Ve;Xe++)gt=Ut[Xe],V.format!==gi?ot!==null?ue?Ke&&n.compressedTexSubImage2D(t.TEXTURE_2D,Xe,0,0,gt.width,gt.height,ot,gt.data):n.compressedTexImage2D(t.TEXTURE_2D,Xe,ht,gt.width,gt.height,0,gt.data):ct("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ue?Ke&&n.texSubImage2D(t.TEXTURE_2D,Xe,0,0,gt.width,gt.height,ot,st,gt.data):n.texImage2D(t.TEXTURE_2D,Xe,ht,gt.width,gt.height,0,ot,st,gt.data)}else if(V.isDataArrayTexture)if(ue){if(we&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Ge,ht,Be.width,Be.height,Be.depth),Ke)if(V.layerUpdates.size>0){const Xe=ID(Be.width,Be.height,V.format,V.type);for(const Ve of V.layerUpdates){const yt=Be.data.subarray(Ve*Xe/Be.data.BYTES_PER_ELEMENT,(Ve+1)*Xe/Be.data.BYTES_PER_ELEMENT);n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,Ve,Be.width,Be.height,1,ot,st,yt)}V.clearLayerUpdates()}else n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,Be.width,Be.height,Be.depth,ot,st,Be.data)}else n.texImage3D(t.TEXTURE_2D_ARRAY,0,ht,Be.width,Be.height,Be.depth,0,ot,st,Be.data);else if(V.isData3DTexture)ue?(we&&n.texStorage3D(t.TEXTURE_3D,Ge,ht,Be.width,Be.height,Be.depth),Ke&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,Be.width,Be.height,Be.depth,ot,st,Be.data)):n.texImage3D(t.TEXTURE_3D,0,ht,Be.width,Be.height,Be.depth,0,ot,st,Be.data);else if(V.isFramebufferTexture){if(we)if(ue)n.texStorage2D(t.TEXTURE_2D,Ge,ht,Be.width,Be.height);else{let Xe=Be.width,Ve=Be.height;for(let yt=0;yt<Ge;yt++)n.texImage2D(t.TEXTURE_2D,yt,ht,Xe,Ve,0,ot,st,null),Xe>>=1,Ve>>=1}}else if(Ut.length>0){if(ue&&we){const Xe=Se(Ut[0]);n.texStorage2D(t.TEXTURE_2D,Ge,ht,Xe.width,Xe.height)}for(let Xe=0,Ve=Ut.length;Xe<Ve;Xe++)gt=Ut[Xe],ue?Ke&&n.texSubImage2D(t.TEXTURE_2D,Xe,0,0,ot,st,gt):n.texImage2D(t.TEXTURE_2D,Xe,ht,ot,st,gt);V.generateMipmaps=!1}else if(ue){if(we){const Xe=Se(Be);n.texStorage2D(t.TEXTURE_2D,Ge,ht,Xe.width,Xe.height)}Ke&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,ot,st,Be)}else n.texImage2D(t.TEXTURE_2D,0,ht,ot,st,Be);v(V)&&_(le),it.__version=pe.version,V.onUpdate&&V.onUpdate(V)}q.__version=V.version}function ne(q,V,ie){if(V.image.length!==6)return;const le=oe(q,V),xe=V.source;n.bindTexture(t.TEXTURE_CUBE_MAP,q.__webglTexture,t.TEXTURE0+ie);const pe=r.get(xe);if(xe.version!==pe.__version||le===!0){n.activeTexture(t.TEXTURE0+ie);const it=sn.getPrimaries(sn.workingColorSpace),We=V.colorSpace===Fa?null:sn.getPrimaries(V.colorSpace),dt=V.colorSpace===Fa||it===We?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,V.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,V.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,dt);const ft=V.isCompressedTexture||V.image[0].isCompressedTexture,Be=V.image[0]&&V.image[0].isDataTexture,ot=[];for(let Ve=0;Ve<6;Ve++)!ft&&!Be?ot[Ve]=b(V.image[Ve],!0,i.maxCubemapSize):ot[Ve]=Be?V.image[Ve].image:V.image[Ve],ot[Ve]=$e(V,ot[Ve]);const st=ot[0],ht=s.convert(V.format,V.colorSpace),gt=s.convert(V.type),Ut=T(V.internalFormat,ht,gt,V.colorSpace),ue=V.isVideoTexture!==!0,we=pe.__version===void 0||le===!0,Ke=xe.dataReady;let Ge=C(V,st);ee(t.TEXTURE_CUBE_MAP,V);let Xe;if(ft){ue&&we&&n.texStorage2D(t.TEXTURE_CUBE_MAP,Ge,Ut,st.width,st.height);for(let Ve=0;Ve<6;Ve++){Xe=ot[Ve].mipmaps;for(let yt=0;yt<Xe.length;yt++){const Mt=Xe[yt];V.format!==gi?ht!==null?ue?Ke&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,yt,0,0,Mt.width,Mt.height,ht,Mt.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,yt,Ut,Mt.width,Mt.height,0,Mt.data):ct("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ue?Ke&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,yt,0,0,Mt.width,Mt.height,ht,gt,Mt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,yt,Ut,Mt.width,Mt.height,0,ht,gt,Mt.data)}}}else{if(Xe=V.mipmaps,ue&&we){Xe.length>0&&Ge++;const Ve=Se(ot[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,Ge,Ut,Ve.width,Ve.height)}for(let Ve=0;Ve<6;Ve++)if(Be){ue?Ke&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,0,0,0,ot[Ve].width,ot[Ve].height,ht,gt,ot[Ve].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,0,Ut,ot[Ve].width,ot[Ve].height,0,ht,gt,ot[Ve].data);for(let yt=0;yt<Xe.length;yt++){const Ct=Xe[yt].image[Ve].image;ue?Ke&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,yt+1,0,0,Ct.width,Ct.height,ht,gt,Ct.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,yt+1,Ut,Ct.width,Ct.height,0,ht,gt,Ct.data)}}else{ue?Ke&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,0,0,0,ht,gt,ot[Ve]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,0,Ut,ht,gt,ot[Ve]);for(let yt=0;yt<Xe.length;yt++){const Mt=Xe[yt];ue?Ke&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,yt+1,0,0,ht,gt,Mt.image[Ve]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,yt+1,Ut,ht,gt,Mt.image[Ve])}}}v(V)&&_(t.TEXTURE_CUBE_MAP),pe.__version=xe.version,V.onUpdate&&V.onUpdate(V)}q.__version=V.version}function Ee(q,V,ie,le,xe,pe){const it=s.convert(ie.format,ie.colorSpace),We=s.convert(ie.type),dt=T(ie.internalFormat,it,We,ie.colorSpace),ft=r.get(V),Be=r.get(ie);if(Be.__renderTarget=V,!ft.__hasExternalTextures){const ot=Math.max(1,V.width>>pe),st=Math.max(1,V.height>>pe);xe===t.TEXTURE_3D||xe===t.TEXTURE_2D_ARRAY?n.texImage3D(xe,pe,dt,ot,st,V.depth,0,it,We,null):n.texImage2D(xe,pe,dt,ot,st,0,it,We,null)}n.bindFramebuffer(t.FRAMEBUFFER,q),fe(V)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,le,xe,Be.__webglTexture,0,Je(V)):(xe===t.TEXTURE_2D||xe>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&xe<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,le,xe,Be.__webglTexture,pe),n.bindFramebuffer(t.FRAMEBUFFER,null)}function se(q,V,ie){if(t.bindRenderbuffer(t.RENDERBUFFER,q),V.depthBuffer){const le=V.depthTexture,xe=le&&le.isDepthTexture?le.type:null,pe=A(V.stencilBuffer,xe),it=V.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,We=Je(V);fe(V)?o.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,We,pe,V.width,V.height):ie?t.renderbufferStorageMultisample(t.RENDERBUFFER,We,pe,V.width,V.height):t.renderbufferStorage(t.RENDERBUFFER,pe,V.width,V.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,it,t.RENDERBUFFER,q)}else{const le=V.textures;for(let xe=0;xe<le.length;xe++){const pe=le[xe],it=s.convert(pe.format,pe.colorSpace),We=s.convert(pe.type),dt=T(pe.internalFormat,it,We,pe.colorSpace),ft=Je(V);ie&&fe(V)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,ft,dt,V.width,V.height):fe(V)?o.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,ft,dt,V.width,V.height):t.renderbufferStorage(t.RENDERBUFFER,dt,V.width,V.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function ve(q,V){if(V&&V.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,q),!(V.depthTexture&&V.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const le=r.get(V.depthTexture);le.__renderTarget=V,(!le.__webglTexture||V.depthTexture.image.width!==V.width||V.depthTexture.image.height!==V.height)&&(V.depthTexture.image.width=V.width,V.depthTexture.image.height=V.height,V.depthTexture.needsUpdate=!0),H(V.depthTexture,0);const xe=le.__webglTexture,pe=Je(V);if(V.depthTexture.format===Co)fe(V)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,xe,0,pe):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,xe,0);else if(V.depthTexture.format===Ao)fe(V)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,xe,0,pe):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,xe,0);else throw new Error("Unknown depthTexture format")}function Pe(q){const V=r.get(q),ie=q.isWebGLCubeRenderTarget===!0;if(V.__boundDepthTexture!==q.depthTexture){const le=q.depthTexture;if(V.__depthDisposeCallback&&V.__depthDisposeCallback(),le){const xe=()=>{delete V.__boundDepthTexture,delete V.__depthDisposeCallback,le.removeEventListener("dispose",xe)};le.addEventListener("dispose",xe),V.__depthDisposeCallback=xe}V.__boundDepthTexture=le}if(q.depthTexture&&!V.__autoAllocateDepthBuffer){if(ie)throw new Error("target.depthTexture not supported in Cube render targets");const le=q.texture.mipmaps;le&&le.length>0?ve(V.__webglFramebuffer[0],q):ve(V.__webglFramebuffer,q)}else if(ie){V.__webglDepthbuffer=[];for(let le=0;le<6;le++)if(n.bindFramebuffer(t.FRAMEBUFFER,V.__webglFramebuffer[le]),V.__webglDepthbuffer[le]===void 0)V.__webglDepthbuffer[le]=t.createRenderbuffer(),se(V.__webglDepthbuffer[le],q,!1);else{const xe=q.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,pe=V.__webglDepthbuffer[le];t.bindRenderbuffer(t.RENDERBUFFER,pe),t.framebufferRenderbuffer(t.FRAMEBUFFER,xe,t.RENDERBUFFER,pe)}}else{const le=q.texture.mipmaps;if(le&&le.length>0?n.bindFramebuffer(t.FRAMEBUFFER,V.__webglFramebuffer[0]):n.bindFramebuffer(t.FRAMEBUFFER,V.__webglFramebuffer),V.__webglDepthbuffer===void 0)V.__webglDepthbuffer=t.createRenderbuffer(),se(V.__webglDepthbuffer,q,!1);else{const xe=q.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,pe=V.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,pe),t.framebufferRenderbuffer(t.FRAMEBUFFER,xe,t.RENDERBUFFER,pe)}}n.bindFramebuffer(t.FRAMEBUFFER,null)}function ge(q,V,ie){const le=r.get(q);V!==void 0&&Ee(le.__webglFramebuffer,q,q.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),ie!==void 0&&Pe(q)}function be(q){const V=q.texture,ie=r.get(q),le=r.get(V);q.addEventListener("dispose",P);const xe=q.textures,pe=q.isWebGLCubeRenderTarget===!0,it=xe.length>1;if(it||(le.__webglTexture===void 0&&(le.__webglTexture=t.createTexture()),le.__version=V.version,a.memory.textures++),pe){ie.__webglFramebuffer=[];for(let We=0;We<6;We++)if(V.mipmaps&&V.mipmaps.length>0){ie.__webglFramebuffer[We]=[];for(let dt=0;dt<V.mipmaps.length;dt++)ie.__webglFramebuffer[We][dt]=t.createFramebuffer()}else ie.__webglFramebuffer[We]=t.createFramebuffer()}else{if(V.mipmaps&&V.mipmaps.length>0){ie.__webglFramebuffer=[];for(let We=0;We<V.mipmaps.length;We++)ie.__webglFramebuffer[We]=t.createFramebuffer()}else ie.__webglFramebuffer=t.createFramebuffer();if(it)for(let We=0,dt=xe.length;We<dt;We++){const ft=r.get(xe[We]);ft.__webglTexture===void 0&&(ft.__webglTexture=t.createTexture(),a.memory.textures++)}if(q.samples>0&&fe(q)===!1){ie.__webglMultisampledFramebuffer=t.createFramebuffer(),ie.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,ie.__webglMultisampledFramebuffer);for(let We=0;We<xe.length;We++){const dt=xe[We];ie.__webglColorRenderbuffer[We]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,ie.__webglColorRenderbuffer[We]);const ft=s.convert(dt.format,dt.colorSpace),Be=s.convert(dt.type),ot=T(dt.internalFormat,ft,Be,dt.colorSpace,q.isXRRenderTarget===!0),st=Je(q);t.renderbufferStorageMultisample(t.RENDERBUFFER,st,ot,q.width,q.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+We,t.RENDERBUFFER,ie.__webglColorRenderbuffer[We])}t.bindRenderbuffer(t.RENDERBUFFER,null),q.depthBuffer&&(ie.__webglDepthRenderbuffer=t.createRenderbuffer(),se(ie.__webglDepthRenderbuffer,q,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(pe){n.bindTexture(t.TEXTURE_CUBE_MAP,le.__webglTexture),ee(t.TEXTURE_CUBE_MAP,V);for(let We=0;We<6;We++)if(V.mipmaps&&V.mipmaps.length>0)for(let dt=0;dt<V.mipmaps.length;dt++)Ee(ie.__webglFramebuffer[We][dt],q,V,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+We,dt);else Ee(ie.__webglFramebuffer[We],q,V,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+We,0);v(V)&&_(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(it){for(let We=0,dt=xe.length;We<dt;We++){const ft=xe[We],Be=r.get(ft);let ot=t.TEXTURE_2D;(q.isWebGL3DRenderTarget||q.isWebGLArrayRenderTarget)&&(ot=q.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(ot,Be.__webglTexture),ee(ot,ft),Ee(ie.__webglFramebuffer,q,ft,t.COLOR_ATTACHMENT0+We,ot,0),v(ft)&&_(ot)}n.unbindTexture()}else{let We=t.TEXTURE_2D;if((q.isWebGL3DRenderTarget||q.isWebGLArrayRenderTarget)&&(We=q.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(We,le.__webglTexture),ee(We,V),V.mipmaps&&V.mipmaps.length>0)for(let dt=0;dt<V.mipmaps.length;dt++)Ee(ie.__webglFramebuffer[dt],q,V,t.COLOR_ATTACHMENT0,We,dt);else Ee(ie.__webglFramebuffer,q,V,t.COLOR_ATTACHMENT0,We,0);v(V)&&_(We),n.unbindTexture()}q.depthBuffer&&Pe(q)}function _e(q){const V=q.textures;for(let ie=0,le=V.length;ie<le;ie++){const xe=V[ie];if(v(xe)){const pe=E(q),it=r.get(xe).__webglTexture;n.bindTexture(pe,it),_(pe),n.unbindTexture()}}}const Q=[],et=[];function ze(q){if(q.samples>0){if(fe(q)===!1){const V=q.textures,ie=q.width,le=q.height;let xe=t.COLOR_BUFFER_BIT;const pe=q.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,it=r.get(q),We=V.length>1;if(We)for(let ft=0;ft<V.length;ft++)n.bindFramebuffer(t.FRAMEBUFFER,it.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+ft,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,it.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+ft,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,it.__webglMultisampledFramebuffer);const dt=q.texture.mipmaps;dt&&dt.length>0?n.bindFramebuffer(t.DRAW_FRAMEBUFFER,it.__webglFramebuffer[0]):n.bindFramebuffer(t.DRAW_FRAMEBUFFER,it.__webglFramebuffer);for(let ft=0;ft<V.length;ft++){if(q.resolveDepthBuffer&&(q.depthBuffer&&(xe|=t.DEPTH_BUFFER_BIT),q.stencilBuffer&&q.resolveStencilBuffer&&(xe|=t.STENCIL_BUFFER_BIT)),We){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,it.__webglColorRenderbuffer[ft]);const Be=r.get(V[ft]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,Be,0)}t.blitFramebuffer(0,0,ie,le,0,0,ie,le,xe,t.NEAREST),l===!0&&(Q.length=0,et.length=0,Q.push(t.COLOR_ATTACHMENT0+ft),q.depthBuffer&&q.resolveDepthBuffer===!1&&(Q.push(pe),et.push(pe),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,et)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,Q))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),We)for(let ft=0;ft<V.length;ft++){n.bindFramebuffer(t.FRAMEBUFFER,it.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+ft,t.RENDERBUFFER,it.__webglColorRenderbuffer[ft]);const Be=r.get(V[ft]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,it.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+ft,t.TEXTURE_2D,Be,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,it.__webglMultisampledFramebuffer)}else if(q.depthBuffer&&q.resolveDepthBuffer===!1&&l){const V=q.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[V])}}}function Je(q){return Math.min(i.maxSamples,q.samples)}function fe(q){const V=r.get(q);return q.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&V.__useRenderToTexture!==!1}function rt(q){const V=a.render.frame;u.get(q)!==V&&(u.set(q,V),q.update())}function $e(q,V){const ie=q.colorSpace,le=q.format,xe=q.type;return q.isCompressedTexture===!0||q.isVideoTexture===!0||ie!==Pp&&ie!==Fa&&(sn.getTransfer(ie)===Ot?(le!==gi||xe!==si)&&ct("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):xt("WebGLTextures: Unsupported texture color space:",ie)),V}function Se(q){return typeof HTMLImageElement<"u"&&q instanceof HTMLImageElement?(c.width=q.naturalWidth||q.width,c.height=q.naturalHeight||q.height):typeof VideoFrame<"u"&&q instanceof VideoFrame?(c.width=q.displayWidth,c.height=q.displayHeight):(c.width=q.width,c.height=q.height),c}this.allocateTextureUnit=F,this.resetTextureUnits=I,this.setTexture2D=H,this.setTexture2DArray=B,this.setTexture3D=j,this.setTextureCube=G,this.rebindTextures=ge,this.setupRenderTarget=be,this.updateRenderTargetMipmap=_e,this.updateMultisampleRenderTarget=ze,this.setupDepthRenderbuffer=Pe,this.setupFrameBufferTexture=Ee,this.useMultisampledRTT=fe}function n3e(t,e){function n(r,i=Fa){let s;const a=sn.getTransfer(i);if(r===si)return t.UNSIGNED_BYTE;if(r===rC)return t.UNSIGNED_SHORT_4_4_4_4;if(r===iC)return t.UNSIGNED_SHORT_5_5_5_1;if(r===sC)return t.UNSIGNED_INT_5_9_9_9_REV;if(r===aC)return t.UNSIGNED_INT_10F_11F_11F_REV;if(r===hp)return t.BYTE;if(r===pp)return t.SHORT;if(r===zl)return t.UNSIGNED_SHORT;if(r===xs)return t.INT;if(r===Ar)return t.UNSIGNED_INT;if(r===Ti)return t.FLOAT;if(r===Ci)return t.HALF_FLOAT;if(r===Wk)return t.ALPHA;if(r===E_)return t.RGB;if(r===gi)return t.RGBA;if(r===Co)return t.DEPTH_COMPONENT;if(r===Ao)return t.DEPTH_STENCIL;if(r===C_)return t.RED;if(r===xx)return t.RED_INTEGER;if(r===$l)return t.RG;if(r===yx)return t.RG_INTEGER;if(r===vx)return t.RGBA_INTEGER;if(r===Af||r===Mf||r===Rf||r===Pf)if(a===Ot)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(r===Af)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===Mf)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===Rf)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===Pf)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(r===Af)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===Mf)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===Rf)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===Pf)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===Pb||r===Nb||r===Ob||r===Db)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(r===Pb)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===Nb)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===Ob)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===Db)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===h0||r===p0||r===m0)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(r===h0||r===p0)return a===Ot?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(r===m0)return a===Ot?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===g0||r===x0||r===y0||r===v0||r===b0||r===_0||r===S0||r===w0||r===T0||r===E0||r===C0||r===A0||r===M0||r===R0)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(r===g0)return a===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===x0)return a===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===y0)return a===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===v0)return a===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===b0)return a===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===_0)return a===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===S0)return a===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===w0)return a===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===T0)return a===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===E0)return a===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===C0)return a===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===A0)return a===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===M0)return a===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===R0)return a===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===P0||r===ND||r===OD)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(r===P0)return a===Ot?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===ND)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===OD)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===N0||r===O0||r===D0||r===L0)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(r===N0)return s.COMPRESSED_RED_RGTC1_EXT;if(r===O0)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===D0)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===L0)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===Eo?t.UNSIGNED_INT_24_8:t[r]!==void 0?t[r]:null}return{convert:n}}const r3e=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,i3e=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class s3e{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n){if(this.texture===null){const r=new QZ(e.texture);(e.depthNear!==n.depthNear||e.depthFar!==n.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const n=e.cameras[0].viewport,r=new Yl({vertexShader:r3e,fragmentShader:i3e,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new Ji(new N_(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class a3e extends Yc{constructor(e,n){super();const r=this;let i=null,s=1,a=null,o="local-floor",l=1,c=null,u=null,f=null,p=null,m=null,x=null;const b=typeof XRWebGLBinding<"u",v=new s3e,_={},E=n.getContextAttributes();let T=null,A=null;const C=[],M=[],P=new mt;let D=null;const N=new ys;N.viewport=new an;const L=new ys;L.viewport=new an;const k=[N,L],I=new sQ;let F=null,z=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(K){let ne=C[K];return ne===void 0&&(ne=new TT,C[K]=ne),ne.getTargetRaySpace()},this.getControllerGrip=function(K){let ne=C[K];return ne===void 0&&(ne=new TT,C[K]=ne),ne.getGripSpace()},this.getHand=function(K){let ne=C[K];return ne===void 0&&(ne=new TT,C[K]=ne),ne.getHandSpace()};function H(K){const ne=M.indexOf(K.inputSource);if(ne===-1)return;const Ee=C[ne];Ee!==void 0&&(Ee.update(K.inputSource,K.frame,c||a),Ee.dispatchEvent({type:K.type,data:K.inputSource}))}function B(){i.removeEventListener("select",H),i.removeEventListener("selectstart",H),i.removeEventListener("selectend",H),i.removeEventListener("squeeze",H),i.removeEventListener("squeezestart",H),i.removeEventListener("squeezeend",H),i.removeEventListener("end",B),i.removeEventListener("inputsourceschange",j);for(let K=0;K<C.length;K++){const ne=M[K];ne!==null&&(M[K]=null,C[K].disconnect(ne))}F=null,z=null,v.reset();for(const K in _)delete _[K];e.setRenderTarget(T),m=null,p=null,f=null,i=null,A=null,te.stop(),r.isPresenting=!1,e.setPixelRatio(D),e.setSize(P.width,P.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(K){s=K,r.isPresenting===!0&&ct("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(K){o=K,r.isPresenting===!0&&ct("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||a},this.setReferenceSpace=function(K){c=K},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return f===null&&b&&(f=new XRWebGLBinding(i,n)),f},this.getFrame=function(){return x},this.getSession=function(){return i},this.setSession=async function(K){if(i=K,i!==null){if(T=e.getRenderTarget(),i.addEventListener("select",H),i.addEventListener("selectstart",H),i.addEventListener("selectend",H),i.addEventListener("squeeze",H),i.addEventListener("squeezestart",H),i.addEventListener("squeezeend",H),i.addEventListener("end",B),i.addEventListener("inputsourceschange",j),E.xrCompatible!==!0&&await n.makeXRCompatible(),D=e.getPixelRatio(),e.getSize(P),b&&"createProjectionLayer"in XRWebGLBinding.prototype){let Ee=null,se=null,ve=null;E.depth&&(ve=E.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,Ee=E.stencil?Ao:Co,se=E.stencil?Eo:Ar);const Pe={colorFormat:n.RGBA8,depthFormat:ve,scaleFactor:s};f=this.getBinding(),p=f.createProjectionLayer(Pe),i.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),A=new zf(p.textureWidth,p.textureHeight,{format:gi,type:si,depthTexture:new ol(p.textureWidth,p.textureHeight,se,void 0,void 0,void 0,void 0,void 0,void 0,Ee),stencilBuffer:E.stencil,colorSpace:e.outputColorSpace,samples:E.antialias?4:0,resolveDepthBuffer:p.ignoreDepthValues===!1,resolveStencilBuffer:p.ignoreDepthValues===!1})}else{const Ee={antialias:E.antialias,alpha:!0,depth:E.depth,stencil:E.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(i,n,Ee),i.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),A=new zf(m.framebufferWidth,m.framebufferHeight,{format:gi,type:si,colorSpace:e.outputColorSpace,stencilBuffer:E.stencil,resolveDepthBuffer:m.ignoreDepthValues===!1,resolveStencilBuffer:m.ignoreDepthValues===!1})}A.isXRRenderTarget=!0,this.setFoveation(l),c=null,a=await i.requestReferenceSpace(o),te.setContext(i),te.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return v.getDepthTexture()};function j(K){for(let ne=0;ne<K.removed.length;ne++){const Ee=K.removed[ne],se=M.indexOf(Ee);se>=0&&(M[se]=null,C[se].disconnect(Ee))}for(let ne=0;ne<K.added.length;ne++){const Ee=K.added[ne];let se=M.indexOf(Ee);if(se===-1){for(let Pe=0;Pe<C.length;Pe++)if(Pe>=M.length){M.push(Ee),se=Pe;break}else if(M[Pe]===null){M[Pe]=Ee,se=Pe;break}if(se===-1)break}const ve=C[se];ve&&ve.connect(Ee)}}const G=new ae,W=new ae;function re(K,ne,Ee){G.setFromMatrixPosition(ne.matrixWorld),W.setFromMatrixPosition(Ee.matrixWorld);const se=G.distanceTo(W),ve=ne.projectionMatrix.elements,Pe=Ee.projectionMatrix.elements,ge=ve[14]/(ve[10]-1),be=ve[14]/(ve[10]+1),_e=(ve[9]+1)/ve[5],Q=(ve[9]-1)/ve[5],et=(ve[8]-1)/ve[0],ze=(Pe[8]+1)/Pe[0],Je=ge*et,fe=ge*ze,rt=se/(-et+ze),$e=rt*-et;if(ne.matrixWorld.decompose(K.position,K.quaternion,K.scale),K.translateX($e),K.translateZ(rt),K.matrixWorld.compose(K.position,K.quaternion,K.scale),K.matrixWorldInverse.copy(K.matrixWorld).invert(),ve[10]===-1)K.projectionMatrix.copy(ne.projectionMatrix),K.projectionMatrixInverse.copy(ne.projectionMatrixInverse);else{const Se=ge+rt,q=be+rt,V=Je-$e,ie=fe+(se-$e),le=_e*be/q*Se,xe=Q*be/q*Se;K.projectionMatrix.makePerspective(V,ie,le,xe,Se,q),K.projectionMatrixInverse.copy(K.projectionMatrix).invert()}}function $(K,ne){ne===null?K.matrixWorld.copy(K.matrix):K.matrixWorld.multiplyMatrices(ne.matrixWorld,K.matrix),K.matrixWorldInverse.copy(K.matrixWorld).invert()}this.updateCamera=function(K){if(i===null)return;let ne=K.near,Ee=K.far;v.texture!==null&&(v.depthNear>0&&(ne=v.depthNear),v.depthFar>0&&(Ee=v.depthFar)),I.near=L.near=N.near=ne,I.far=L.far=N.far=Ee,(F!==I.near||z!==I.far)&&(i.updateRenderState({depthNear:I.near,depthFar:I.far}),F=I.near,z=I.far),I.layers.mask=K.layers.mask|6,N.layers.mask=I.layers.mask&3,L.layers.mask=I.layers.mask&5;const se=K.parent,ve=I.cameras;$(I,se);for(let Pe=0;Pe<ve.length;Pe++)$(ve[Pe],se);ve.length===2?re(I,N,L):I.projectionMatrix.copy(N.projectionMatrix),ee(K,I,se)};function ee(K,ne,Ee){Ee===null?K.matrix.copy(ne.matrixWorld):(K.matrix.copy(Ee.matrixWorld),K.matrix.invert(),K.matrix.multiply(ne.matrixWorld)),K.matrix.decompose(K.position,K.quaternion,K.scale),K.updateMatrixWorld(!0),K.projectionMatrix.copy(ne.projectionMatrix),K.projectionMatrixInverse.copy(ne.projectionMatrixInverse),K.isPerspectiveCamera&&(K.fov=Np*2*Math.atan(1/K.projectionMatrix.elements[5]),K.zoom=1)}this.getCamera=function(){return I},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(K){l=K,p!==null&&(p.fixedFoveation=K),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=K)},this.hasDepthSensing=function(){return v.texture!==null},this.getDepthSensingMesh=function(){return v.getMesh(I)},this.getCameraTexture=function(K){return _[K]};let oe=null;function me(K,ne){if(u=ne.getViewerPose(c||a),x=ne,u!==null){const Ee=u.views;m!==null&&(e.setRenderTargetFramebuffer(A,m.framebuffer),e.setRenderTarget(A));let se=!1;Ee.length!==I.cameras.length&&(I.cameras.length=0,se=!0);for(let be=0;be<Ee.length;be++){const _e=Ee[be];let Q=null;if(m!==null)Q=m.getViewport(_e);else{const ze=f.getViewSubImage(p,_e);Q=ze.viewport,be===0&&(e.setRenderTargetTextures(A,ze.colorTexture,ze.depthStencilTexture),e.setRenderTarget(A))}let et=k[be];et===void 0&&(et=new ys,et.layers.enable(be),et.viewport=new an,k[be]=et),et.matrix.fromArray(_e.transform.matrix),et.matrix.decompose(et.position,et.quaternion,et.scale),et.projectionMatrix.fromArray(_e.projectionMatrix),et.projectionMatrixInverse.copy(et.projectionMatrix).invert(),et.viewport.set(Q.x,Q.y,Q.width,Q.height),be===0&&(I.matrix.copy(et.matrix),I.matrix.decompose(I.position,I.quaternion,I.scale)),se===!0&&I.cameras.push(et)}const ve=i.enabledFeatures;if(ve&&ve.includes("depth-sensing")&&i.depthUsage=="gpu-optimized"&&b){f=r.getBinding();const be=f.getDepthInformation(Ee[0]);be&&be.isValid&&be.texture&&v.init(be,i.renderState)}if(ve&&ve.includes("camera-access")&&b){e.state.unbindTexture(),f=r.getBinding();for(let be=0;be<Ee.length;be++){const _e=Ee[be].camera;if(_e){let Q=_[_e];Q||(Q=new QZ,_[_e]=Q);const et=f.getCameraImage(_e);Q.sourceTexture=et}}}}for(let Ee=0;Ee<C.length;Ee++){const se=M[Ee],ve=C[Ee];se!==null&&ve!==void 0&&ve.update(se,ne,c||a)}oe&&oe(K,ne),ne.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:ne}),x=null}const te=new lQ;te.setAnimationLoop(me),this.setAnimationLoop=function(K){oe=K},this.dispose=function(){}}}const Nh=new Ka,o3e=new In;function l3e(t,e){function n(v,_){v.matrixAutoUpdate===!0&&v.updateMatrix(),_.value.copy(v.matrix)}function r(v,_){_.color.getRGB(v.fogColor.value,WZ(t)),_.isFog?(v.fogNear.value=_.near,v.fogFar.value=_.far):_.isFogExp2&&(v.fogDensity.value=_.density)}function i(v,_,E,T,A){_.isMeshBasicMaterial||_.isMeshLambertMaterial?s(v,_):_.isMeshToonMaterial?(s(v,_),f(v,_)):_.isMeshPhongMaterial?(s(v,_),u(v,_)):_.isMeshStandardMaterial?(s(v,_),p(v,_),_.isMeshPhysicalMaterial&&m(v,_,A)):_.isMeshMatcapMaterial?(s(v,_),x(v,_)):_.isMeshDepthMaterial?s(v,_):_.isMeshDistanceMaterial?(s(v,_),b(v,_)):_.isMeshNormalMaterial?s(v,_):_.isLineBasicMaterial?(a(v,_),_.isLineDashedMaterial&&o(v,_)):_.isPointsMaterial?l(v,_,E,T):_.isSpriteMaterial?c(v,_):_.isShadowMaterial?(v.color.value.copy(_.color),v.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}function s(v,_){v.opacity.value=_.opacity,_.color&&v.diffuse.value.copy(_.color),_.emissive&&v.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(v.map.value=_.map,n(_.map,v.mapTransform)),_.alphaMap&&(v.alphaMap.value=_.alphaMap,n(_.alphaMap,v.alphaMapTransform)),_.bumpMap&&(v.bumpMap.value=_.bumpMap,n(_.bumpMap,v.bumpMapTransform),v.bumpScale.value=_.bumpScale,_.side===Sr&&(v.bumpScale.value*=-1)),_.normalMap&&(v.normalMap.value=_.normalMap,n(_.normalMap,v.normalMapTransform),v.normalScale.value.copy(_.normalScale),_.side===Sr&&v.normalScale.value.negate()),_.displacementMap&&(v.displacementMap.value=_.displacementMap,n(_.displacementMap,v.displacementMapTransform),v.displacementScale.value=_.displacementScale,v.displacementBias.value=_.displacementBias),_.emissiveMap&&(v.emissiveMap.value=_.emissiveMap,n(_.emissiveMap,v.emissiveMapTransform)),_.specularMap&&(v.specularMap.value=_.specularMap,n(_.specularMap,v.specularMapTransform)),_.alphaTest>0&&(v.alphaTest.value=_.alphaTest);const E=e.get(_),T=E.envMap,A=E.envMapRotation;T&&(v.envMap.value=T,Nh.copy(A),Nh.x*=-1,Nh.y*=-1,Nh.z*=-1,T.isCubeTexture&&T.isRenderTargetTexture===!1&&(Nh.y*=-1,Nh.z*=-1),v.envMapRotation.value.setFromMatrix4(o3e.makeRotationFromEuler(Nh)),v.flipEnvMap.value=T.isCubeTexture&&T.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=_.reflectivity,v.ior.value=_.ior,v.refractionRatio.value=_.refractionRatio),_.lightMap&&(v.lightMap.value=_.lightMap,v.lightMapIntensity.value=_.lightMapIntensity,n(_.lightMap,v.lightMapTransform)),_.aoMap&&(v.aoMap.value=_.aoMap,v.aoMapIntensity.value=_.aoMapIntensity,n(_.aoMap,v.aoMapTransform))}function a(v,_){v.diffuse.value.copy(_.color),v.opacity.value=_.opacity,_.map&&(v.map.value=_.map,n(_.map,v.mapTransform))}function o(v,_){v.dashSize.value=_.dashSize,v.totalSize.value=_.dashSize+_.gapSize,v.scale.value=_.scale}function l(v,_,E,T){v.diffuse.value.copy(_.color),v.opacity.value=_.opacity,v.size.value=_.size*E,v.scale.value=T*.5,_.map&&(v.map.value=_.map,n(_.map,v.uvTransform)),_.alphaMap&&(v.alphaMap.value=_.alphaMap,n(_.alphaMap,v.alphaMapTransform)),_.alphaTest>0&&(v.alphaTest.value=_.alphaTest)}function c(v,_){v.diffuse.value.copy(_.color),v.opacity.value=_.opacity,v.rotation.value=_.rotation,_.map&&(v.map.value=_.map,n(_.map,v.mapTransform)),_.alphaMap&&(v.alphaMap.value=_.alphaMap,n(_.alphaMap,v.alphaMapTransform)),_.alphaTest>0&&(v.alphaTest.value=_.alphaTest)}function u(v,_){v.specular.value.copy(_.specular),v.shininess.value=Math.max(_.shininess,1e-4)}function f(v,_){_.gradientMap&&(v.gradientMap.value=_.gradientMap)}function p(v,_){v.metalness.value=_.metalness,_.metalnessMap&&(v.metalnessMap.value=_.metalnessMap,n(_.metalnessMap,v.metalnessMapTransform)),v.roughness.value=_.roughness,_.roughnessMap&&(v.roughnessMap.value=_.roughnessMap,n(_.roughnessMap,v.roughnessMapTransform)),_.envMap&&(v.envMapIntensity.value=_.envMapIntensity)}function m(v,_,E){v.ior.value=_.ior,_.sheen>0&&(v.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),v.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(v.sheenColorMap.value=_.sheenColorMap,n(_.sheenColorMap,v.sheenColorMapTransform)),_.sheenRoughnessMap&&(v.sheenRoughnessMap.value=_.sheenRoughnessMap,n(_.sheenRoughnessMap,v.sheenRoughnessMapTransform))),_.clearcoat>0&&(v.clearcoat.value=_.clearcoat,v.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(v.clearcoatMap.value=_.clearcoatMap,n(_.clearcoatMap,v.clearcoatMapTransform)),_.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap,n(_.clearcoatRoughnessMap,v.clearcoatRoughnessMapTransform)),_.clearcoatNormalMap&&(v.clearcoatNormalMap.value=_.clearcoatNormalMap,n(_.clearcoatNormalMap,v.clearcoatNormalMapTransform),v.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),_.side===Sr&&v.clearcoatNormalScale.value.negate())),_.dispersion>0&&(v.dispersion.value=_.dispersion),_.iridescence>0&&(v.iridescence.value=_.iridescence,v.iridescenceIOR.value=_.iridescenceIOR,v.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&&(v.iridescenceMap.value=_.iridescenceMap,n(_.iridescenceMap,v.iridescenceMapTransform)),_.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=_.iridescenceThicknessMap,n(_.iridescenceThicknessMap,v.iridescenceThicknessMapTransform))),_.transmission>0&&(v.transmission.value=_.transmission,v.transmissionSamplerMap.value=E.texture,v.transmissionSamplerSize.value.set(E.width,E.height),_.transmissionMap&&(v.transmissionMap.value=_.transmissionMap,n(_.transmissionMap,v.transmissionMapTransform)),v.thickness.value=_.thickness,_.thicknessMap&&(v.thicknessMap.value=_.thicknessMap,n(_.thicknessMap,v.thicknessMapTransform)),v.attenuationDistance.value=_.attenuationDistance,v.attenuationColor.value.copy(_.attenuationColor)),_.anisotropy>0&&(v.anisotropyVector.value.set(_.anisotropy*Math.cos(_.anisotropyRotation),_.anisotropy*Math.sin(_.anisotropyRotation)),_.anisotropyMap&&(v.anisotropyMap.value=_.anisotropyMap,n(_.anisotropyMap,v.anisotropyMapTransform))),v.specularIntensity.value=_.specularIntensity,v.specularColor.value.copy(_.specularColor),_.specularColorMap&&(v.specularColorMap.value=_.specularColorMap,n(_.specularColorMap,v.specularColorMapTransform)),_.specularIntensityMap&&(v.specularIntensityMap.value=_.specularIntensityMap,n(_.specularIntensityMap,v.specularIntensityMapTransform))}function x(v,_){_.matcap&&(v.matcap.value=_.matcap)}function b(v,_){const E=e.get(_).light;v.referencePosition.value.setFromMatrixPosition(E.matrixWorld),v.nearDistance.value=E.shadow.camera.near,v.farDistance.value=E.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function c3e(t,e,n,r){let i={},s={},a=[];const o=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function l(E,T){const A=T.program;r.uniformBlockBinding(E,A)}function c(E,T){let A=i[E.id];A===void 0&&(x(E),A=u(E),i[E.id]=A,E.addEventListener("dispose",v));const C=T.program;r.updateUBOMapping(E,C);const M=e.render.frame;s[E.id]!==M&&(p(E),s[E.id]=M)}function u(E){const T=f();E.__bindingPointIndex=T;const A=t.createBuffer(),C=E.__size,M=E.usage;return t.bindBuffer(t.UNIFORM_BUFFER,A),t.bufferData(t.UNIFORM_BUFFER,C,M),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,T,A),A}function f(){for(let E=0;E<o;E++)if(a.indexOf(E)===-1)return a.push(E),E;return xt("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(E){const T=i[E.id],A=E.uniforms,C=E.__cache;t.bindBuffer(t.UNIFORM_BUFFER,T);for(let M=0,P=A.length;M<P;M++){const D=Array.isArray(A[M])?A[M]:[A[M]];for(let N=0,L=D.length;N<L;N++){const k=D[N];if(m(k,M,N,C)===!0){const I=k.__offset,F=Array.isArray(k.value)?k.value:[k.value];let z=0;for(let H=0;H<F.length;H++){const B=F[H],j=b(B);typeof B=="number"||typeof B=="boolean"?(k.__data[0]=B,t.bufferSubData(t.UNIFORM_BUFFER,I+z,k.__data)):B.isMatrix3?(k.__data[0]=B.elements[0],k.__data[1]=B.elements[1],k.__data[2]=B.elements[2],k.__data[3]=0,k.__data[4]=B.elements[3],k.__data[5]=B.elements[4],k.__data[6]=B.elements[5],k.__data[7]=0,k.__data[8]=B.elements[6],k.__data[9]=B.elements[7],k.__data[10]=B.elements[8],k.__data[11]=0):(B.toArray(k.__data,z),z+=j.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,I,k.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function m(E,T,A,C){const M=E.value,P=T+"_"+A;if(C[P]===void 0)return typeof M=="number"||typeof M=="boolean"?C[P]=M:C[P]=M.clone(),!0;{const D=C[P];if(typeof M=="number"||typeof M=="boolean"){if(D!==M)return C[P]=M,!0}else if(D.equals(M)===!1)return D.copy(M),!0}return!1}function x(E){const T=E.uniforms;let A=0;const C=16;for(let P=0,D=T.length;P<D;P++){const N=Array.isArray(T[P])?T[P]:[T[P]];for(let L=0,k=N.length;L<k;L++){const I=N[L],F=Array.isArray(I.value)?I.value:[I.value];for(let z=0,H=F.length;z<H;z++){const B=F[z],j=b(B),G=A%C,W=G%j.boundary,re=G+W;A+=W,re!==0&&C-re<j.storage&&(A+=C-re),I.__data=new Float32Array(j.storage/Float32Array.BYTES_PER_ELEMENT),I.__offset=A,A+=j.storage}}}const M=A%C;return M>0&&(A+=C-M),E.__size=A,E.__cache={},this}function b(E){const T={boundary:0,storage:0};return typeof E=="number"||typeof E=="boolean"?(T.boundary=4,T.storage=4):E.isVector2?(T.boundary=8,T.storage=8):E.isVector3||E.isColor?(T.boundary=16,T.storage=12):E.isVector4?(T.boundary=16,T.storage=16):E.isMatrix3?(T.boundary=48,T.storage=48):E.isMatrix4?(T.boundary=64,T.storage=64):E.isTexture?ct("WebGLRenderer: Texture samplers can not be part of an uniforms group."):ct("WebGLRenderer: Unsupported uniform value type.",E),T}function v(E){const T=E.target;T.removeEventListener("dispose",v);const A=a.indexOf(T.__bindingPointIndex);a.splice(A,1),t.deleteBuffer(i[T.id]),delete i[T.id],delete s[T.id]}function _(){for(const E in i)t.deleteBuffer(i[E]);a=[],i={},s={}}return{bind:l,update:c,dispose:_}}const u3e=new Uint16Array([11481,15204,11534,15171,11808,15015,12385,14843,12894,14716,13396,14600,13693,14483,13976,14366,14237,14171,14405,13961,14511,13770,14605,13598,14687,13444,14760,13305,14822,13066,14876,12857,14923,12675,14963,12517,14997,12379,15025,12230,15049,12023,15070,11843,15086,11687,15100,11551,15111,11433,15120,11330,15127,11217,15132,11060,15135,10922,15138,10801,15139,10695,15139,10600,13012,14923,13020,14917,13064,14886,13176,14800,13349,14666,13513,14526,13724,14398,13960,14230,14200,14020,14383,13827,14488,13651,14583,13491,14667,13348,14740,13132,14803,12908,14856,12713,14901,12542,14938,12394,14968,12241,14992,12017,15010,11822,15024,11654,15034,11507,15041,11380,15044,11269,15044,11081,15042,10913,15037,10764,15031,10635,15023,10520,15014,10419,15003,10330,13657,14676,13658,14673,13670,14660,13698,14622,13750,14547,13834,14442,13956,14317,14112,14093,14291,13889,14407,13704,14499,13538,14586,13389,14664,13201,14733,12966,14792,12758,14842,12577,14882,12418,14915,12272,14940,12033,14959,11826,14972,11646,14980,11490,14983,11355,14983,11212,14979,11008,14971,10830,14961,10675,14950,10540,14936,10420,14923,10315,14909,10204,14894,10041,14089,14460,14090,14459,14096,14452,14112,14431,14141,14388,14186,14305,14252,14130,14341,13941,14399,13756,14467,13585,14539,13430,14610,13272,14677,13026,14737,12808,14790,12617,14833,12449,14869,12303,14896,12065,14916,11845,14929,11655,14937,11490,14939,11347,14936,11184,14930,10970,14921,10783,14912,10621,14900,10480,14885,10356,14867,10247,14848,10062,14827,9894,14805,9745,14400,14208,14400,14206,14402,14198,14406,14174,14415,14122,14427,14035,14444,13913,14469,13767,14504,13613,14548,13463,14598,13324,14651,13082,14704,12858,14752,12658,14795,12483,14831,12330,14860,12106,14881,11875,14895,11675,14903,11501,14905,11351,14903,11178,14900,10953,14892,10757,14880,10589,14865,10442,14847,10313,14827,10162,14805,9965,14782,9792,14757,9642,14731,9507,14562,13883,14562,13883,14563,13877,14566,13862,14570,13830,14576,13773,14584,13689,14595,13582,14613,13461,14637,13336,14668,13120,14704,12897,14741,12695,14776,12516,14808,12358,14835,12150,14856,11910,14870,11701,14878,11519,14882,11361,14884,11187,14880,10951,14871,10748,14858,10572,14842,10418,14823,10286,14801,10099,14777,9897,14751,9722,14725,9567,14696,9430,14666,9309,14702,13604,14702,13604,14702,13600,14703,13591,14705,13570,14707,13533,14709,13477,14712,13400,14718,13305,14727,13106,14743,12907,14762,12716,14784,12539,14807,12380,14827,12190,14844,11943,14855,11727,14863,11539,14870,11376,14871,11204,14868,10960,14858,10748,14845,10565,14829,10406,14809,10269,14786,10058,14761,9852,14734,9671,14705,9512,14674,9374,14641,9253,14608,9076,14821,13366,14821,13365,14821,13364,14821,13358,14821,13344,14821,13320,14819,13252,14817,13145,14815,13011,14814,12858,14817,12698,14823,12539,14832,12389,14841,12214,14850,11968,14856,11750,14861,11558,14866,11390,14867,11226,14862,10972,14853,10754,14840,10565,14823,10401,14803,10259,14780,10032,14754,9820,14725,9635,14694,9473,14661,9333,14627,9203,14593,8988,14557,8798,14923,13014,14922,13014,14922,13012,14922,13004,14920,12987,14919,12957,14915,12907,14909,12834,14902,12738,14894,12623,14888,12498,14883,12370,14880,12203,14878,11970,14875,11759,14873,11569,14874,11401,14872,11243,14865,10986,14855,10762,14842,10568,14825,10401,14804,10255,14781,10017,14754,9799,14725,9611,14692,9445,14658,9301,14623,9139,14587,8920,14548,8729,14509,8562,15008,12672,15008,12672,15008,12671,15007,12667,15005,12656,15001,12637,14997,12605,14989,12556,14978,12490,14966,12407,14953,12313,14940,12136,14927,11934,14914,11742,14903,11563,14896,11401,14889,11247,14879,10992,14866,10767,14851,10570,14833,10400,14812,10252,14789,10007,14761,9784,14731,9592,14698,9424,14663,9279,14627,9088,14588,8868,14548,8676,14508,8508,14467,8360,15080,12386,15080,12386,15079,12385,15078,12383,15076,12378,15072,12367,15066,12347,15057,12315,15045,12253,15030,12138,15012,11998,14993,11845,14972,11685,14951,11530,14935,11383,14920,11228,14904,10981,14887,10762,14870,10567,14850,10397,14827,10248,14803,9997,14774,9771,14743,9578,14710,9407,14674,9259,14637,9048,14596,8826,14555,8632,14514,8464,14471,8317,14427,8182,15139,12008,15139,12008,15138,12008,15137,12007,15135,12003,15130,11990,15124,11969,15115,11929,15102,11872,15086,11794,15064,11693,15041,11581,15013,11459,14987,11336,14966,11170,14944,10944,14921,10738,14898,10552,14875,10387,14850,10239,14824,9983,14794,9758,14762,9563,14728,9392,14692,9244,14653,9014,14611,8791,14569,8597,14526,8427,14481,8281,14436,8110,14391,7885,15188,11617,15188,11617,15187,11617,15186,11618,15183,11617,15179,11612,15173,11601,15163,11581,15150,11546,15133,11495,15110,11427,15083,11346,15051,11246,15024,11057,14996,10868,14967,10687,14938,10517,14911,10362,14882,10206,14853,9956,14821,9737,14787,9543,14752,9375,14715,9228,14675,8980,14632,8760,14589,8565,14544,8395,14498,8248,14451,8049,14404,7824,14357,7630,15228,11298,15228,11298,15227,11299,15226,11301,15223,11303,15219,11302,15213,11299,15204,11290,15191,11271,15174,11217,15150,11129,15119,11015,15087,10886,15057,10744,15024,10599,14990,10455,14957,10318,14924,10143,14891,9911,14856,9701,14820,9516,14782,9352,14744,9200,14703,8946,14659,8725,14615,8533,14568,8366,14521,8220,14472,7992,14423,7770,14374,7578,14315,7408,15260,10819,15260,10819,15259,10822,15258,10826,15256,10832,15251,10836,15246,10841,15237,10838,15225,10821,15207,10788,15183,10734,15151,10660,15120,10571,15087,10469,15049,10359,15012,10249,14974,10041,14937,9837,14900,9647,14860,9475,14820,9320,14779,9147,14736,8902,14691,8688,14646,8499,14598,8335,14549,8189,14499,7940,14448,7720,14397,7529,14347,7363,14256,7218,15285,10410,15285,10411,15285,10413,15284,10418,15282,10425,15278,10434,15272,10442,15264,10449,15252,10445,15235,10433,15210,10403,15179,10358,15149,10301,15113,10218,15073,10059,15033,9894,14991,9726,14951,9565,14909,9413,14865,9273,14822,9073,14777,8845,14730,8641,14682,8459,14633,8300,14583,8129,14531,7883,14479,7670,14426,7482,14373,7321,14305,7176,14201,6939,15305,9939,15305,9940,15305,9945,15304,9955,15302,9967,15298,9989,15293,10010,15286,10033,15274,10044,15258,10045,15233,10022,15205,9975,15174,9903,15136,9808,15095,9697,15053,9578,15009,9451,14965,9327,14918,9198,14871,8973,14825,8766,14775,8579,14725,8408,14675,8259,14622,8058,14569,7821,14515,7615,14460,7435,14405,7276,14350,7108,14256,6866,14149,6653,15321,9444,15321,9445,15321,9448,15320,9458,15317,9470,15314,9490,15310,9515,15302,9540,15292,9562,15276,9579,15251,9577,15226,9559,15195,9519,15156,9463,15116,9389,15071,9304,15025,9208,14978,9023,14927,8838,14878,8661,14827,8496,14774,8344,14722,8206,14667,7973,14612,7749,14556,7555,14499,7382,14443,7229,14385,7025,14322,6791,14210,6588,14100,6409,15333,8920,15333,8921,15332,8927,15332,8943,15329,8965,15326,9002,15322,9048,15316,9106,15307,9162,15291,9204,15267,9221,15244,9221,15212,9196,15175,9134,15133,9043,15088,8930,15040,8801,14990,8665,14938,8526,14886,8391,14830,8261,14775,8087,14719,7866,14661,7664,14603,7482,14544,7322,14485,7178,14426,6936,14367,6713,14281,6517,14166,6348,14054,6198,15341,8360,15341,8361,15341,8366,15341,8379,15339,8399,15336,8431,15332,8473,15326,8527,15318,8585,15302,8632,15281,8670,15258,8690,15227,8690,15191,8664,15149,8612,15104,8543,15055,8456,15001,8360,14948,8259,14892,8122,14834,7923,14776,7734,14716,7558,14656,7397,14595,7250,14534,7070,14472,6835,14410,6628,14350,6443,14243,6283,14125,6135,14010,5889,15348,7715,15348,7717,15348,7725,15347,7745,15345,7780,15343,7836,15339,7905,15334,8e3,15326,8103,15310,8193,15293,8239,15270,8270,15240,8287,15204,8283,15163,8260,15118,8223,15067,8143,15014,8014,14958,7873,14899,7723,14839,7573,14778,7430,14715,7293,14652,7164,14588,6931,14524,6720,14460,6531,14396,6362,14330,6210,14207,6015,14086,5781,13969,5576,15352,7114,15352,7116,15352,7128,15352,7159,15350,7195,15348,7237,15345,7299,15340,7374,15332,7457,15317,7544,15301,7633,15280,7703,15251,7754,15216,7775,15176,7767,15131,7733,15079,7670,15026,7588,14967,7492,14906,7387,14844,7278,14779,7171,14714,6965,14648,6770,14581,6587,14515,6420,14448,6269,14382,6123,14299,5881,14172,5665,14049,5477,13929,5310,15355,6329,15355,6330,15355,6339,15355,6362,15353,6410,15351,6472,15349,6572,15344,6688,15337,6835,15323,6985,15309,7142,15287,7220,15260,7277,15226,7310,15188,7326,15142,7318,15090,7285,15036,7239,14976,7177,14914,7045,14849,6892,14782,6736,14714,6581,14645,6433,14576,6293,14506,6164,14438,5946,14369,5733,14270,5540,14140,5369,14014,5216,13892,5043,15357,5483,15357,5484,15357,5496,15357,5528,15356,5597,15354,5692,15351,5835,15347,6011,15339,6195,15328,6317,15314,6446,15293,6566,15268,6668,15235,6746,15197,6796,15152,6811,15101,6790,15046,6748,14985,6673,14921,6583,14854,6479,14785,6371,14714,6259,14643,6149,14571,5946,14499,5750,14428,5567,14358,5401,14242,5250,14109,5111,13980,4870,13856,4657,15359,4555,15359,4557,15358,4573,15358,4633,15357,4715,15355,4841,15353,5061,15349,5216,15342,5391,15331,5577,15318,5770,15299,5967,15274,6150,15243,6223,15206,6280,15161,6310,15111,6317,15055,6300,14994,6262,14928,6208,14860,6141,14788,5994,14715,5838,14641,5684,14566,5529,14492,5384,14418,5247,14346,5121,14216,4892,14079,4682,13948,4496,13822,4330,15359,3498,15359,3501,15359,3520,15359,3598,15358,3719,15356,3860,15355,4137,15351,4305,15344,4563,15334,4809,15321,5116,15303,5273,15280,5418,15250,5547,15214,5653,15170,5722,15120,5761,15064,5763,15002,5733,14935,5673,14865,5597,14792,5504,14716,5400,14640,5294,14563,5185,14486,5041,14410,4841,14335,4655,14191,4482,14051,4325,13918,4183,13790,4012,15360,2282,15360,2285,15360,2306,15360,2401,15359,2547,15357,2748,15355,3103,15352,3349,15345,3675,15336,4020,15324,4272,15307,4496,15285,4716,15255,4908,15220,5086,15178,5170,15128,5214,15072,5234,15010,5231,14943,5206,14871,5166,14796,5102,14718,4971,14639,4833,14559,4687,14480,4541,14402,4401,14315,4268,14167,4142,14025,3958,13888,3747,13759,3556,15360,923,15360,925,15360,946,15360,1052,15359,1214,15357,1494,15356,1892,15352,2274,15346,2663,15338,3099,15326,3393,15309,3679,15288,3980,15260,4183,15226,4325,15185,4437,15136,4517,15080,4570,15018,4591,14950,4581,14877,4545,14800,4485,14720,4411,14638,4325,14556,4231,14475,4136,14395,3988,14297,3803,14145,3628,13999,3465,13861,3314,13729,3177,15360,263,15360,264,15360,272,15360,325,15359,407,15358,548,15356,780,15352,1144,15347,1580,15339,2099,15328,2425,15312,2795,15292,3133,15264,3329,15232,3517,15191,3689,15143,3819,15088,3923,15025,3978,14956,3999,14882,3979,14804,3931,14722,3855,14639,3756,14554,3645,14470,3529,14388,3409,14279,3289,14124,3173,13975,3055,13834,2848,13701,2658,15360,49,15360,49,15360,52,15360,75,15359,111,15358,201,15356,283,15353,519,15348,726,15340,1045,15329,1415,15314,1795,15295,2173,15269,2410,15237,2649,15197,2866,15150,3054,15095,3140,15032,3196,14963,3228,14888,3236,14808,3224,14725,3191,14639,3146,14553,3088,14466,2976,14382,2836,14262,2692,14103,2549,13952,2409,13808,2278,13674,2154,15360,4,15360,4,15360,4,15360,13,15359,33,15358,59,15357,112,15353,199,15348,302,15341,456,15331,628,15316,827,15297,1082,15272,1332,15241,1601,15202,1851,15156,2069,15101,2172,15039,2256,14970,2314,14894,2348,14813,2358,14728,2344,14640,2311,14551,2263,14463,2203,14376,2133,14247,2059,14084,1915,13930,1761,13784,1609,13648,1464,15360,0,15360,0,15360,0,15360,3,15359,18,15358,26,15357,53,15354,80,15348,97,15341,165,15332,238,15318,326,15299,427,15275,529,15245,654,15207,771,15161,885,15108,994,15046,1089,14976,1170,14900,1229,14817,1266,14731,1284,14641,1282,14550,1260,14460,1223,14370,1174,14232,1116,14066,1050,13909,981,13761,910,13623,839]);let Eu=null;function d3e(){return Eu===null&&(Eu=new lB(u3e,32,32,$l,Ci),Eu.minFilter=ii,Eu.magFilter=ii,Eu.wrapS=ja,Eu.wrapT=ja,Eu.generateMipmaps=!1,Eu.needsUpdate=!0),Eu}class f3e{constructor(e={}){const{canvas:n=GZ(),context:r=null,depth:i=!0,stencil:s=!1,alpha:a=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:f=!1,reversedDepthBuffer:p=!1}=e;this.isWebGLRenderer=!0;let m;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");m=r.getContextAttributes().alpha}else m=a;const x=new Set([vx,yx,xx]),b=new Set([si,Ar,zl,Eo,rC,iC]),v=new Uint32Array(4),_=new Int32Array(4);let E=null,T=null;const A=[],C=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=ya,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const M=this;let P=!1;this._outputColorSpace=ha;let D=0,N=0,L=null,k=-1,I=null;const F=new an,z=new an;let H=null;const B=new Xt(0);let j=0,G=n.width,W=n.height,re=1,$=null,ee=null;const oe=new an(0,0,G,W),me=new an(0,0,G,W);let te=!1;const K=new R_;let ne=!1,Ee=!1;const se=new In,ve=new ae,Pe=new an,ge={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let be=!1;function _e(){return L===null?re:1}let Q=r;function et(J,Te){return n.getContext(J,Te)}try{const J={alpha:!0,depth:i,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:f};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${Vp}`),n.addEventListener("webglcontextlost",Xe,!1),n.addEventListener("webglcontextrestored",Ve,!1),n.addEventListener("webglcontextcreationerror",yt,!1),Q===null){const Te="webgl2";if(Q=et(Te,J),Q===null)throw et(Te)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(J){throw J("WebGLRenderer: "+J.message),J}let ze,Je,fe,rt,$e,Se,q,V,ie,le,xe,pe,it,We,dt,ft,Be,ot,st,ht,gt,Ut,ue,we;function Ke(){ze=new bMe(Q),ze.init(),Ut=new n3e(Q,ze),Je=new dMe(Q,ze,e,Ut),fe=new e3e(Q,ze),Je.reversedDepthBuffer&&p&&fe.buffers.depth.setReversed(!0),rt=new wMe(Q),$e=new zRe,Se=new t3e(Q,ze,fe,$e,Je,Ut,rt),q=new hMe(M),V=new vMe(M),ie=new AEe(Q),ue=new cMe(Q,ie),le=new _Me(Q,ie,rt,ue),xe=new EMe(Q,le,ie,rt),st=new TMe(Q,Je,Se),ft=new fMe($e),pe=new jRe(M,q,V,ze,Je,ue,ft),it=new l3e(M,$e),We=new GRe,dt=new YRe(ze),ot=new lMe(M,q,V,fe,xe,m,l),Be=new QRe(M,xe,Je),we=new c3e(Q,rt,Je,fe),ht=new uMe(Q,ze,rt),gt=new SMe(Q,ze,rt),rt.programs=pe.programs,M.capabilities=Je,M.extensions=ze,M.properties=$e,M.renderLists=We,M.shadowMap=Be,M.state=fe,M.info=rt}Ke();const Ge=new a3e(M,Q);this.xr=Ge,this.getContext=function(){return Q},this.getContextAttributes=function(){return Q.getContextAttributes()},this.forceContextLoss=function(){const J=ze.get("WEBGL_lose_context");J&&J.loseContext()},this.forceContextRestore=function(){const J=ze.get("WEBGL_lose_context");J&&J.restoreContext()},this.getPixelRatio=function(){return re},this.setPixelRatio=function(J){J!==void 0&&(re=J,this.setSize(G,W,!1))},this.getSize=function(J){return J.set(G,W)},this.setSize=function(J,Te,ke=!0){if(Ge.isPresenting){ct("WebGLRenderer: Can't change size while VR device is presenting.");return}G=J,W=Te,n.width=Math.floor(J*re),n.height=Math.floor(Te*re),ke===!0&&(n.style.width=J+"px",n.style.height=Te+"px"),this.setViewport(0,0,J,Te)},this.getDrawingBufferSize=function(J){return J.set(G*re,W*re).floor()},this.setDrawingBufferSize=function(J,Te,ke){G=J,W=Te,re=ke,n.width=Math.floor(J*ke),n.height=Math.floor(Te*ke),this.setViewport(0,0,J,Te)},this.getCurrentViewport=function(J){return J.copy(F)},this.getViewport=function(J){return J.copy(oe)},this.setViewport=function(J,Te,ke,De){J.isVector4?oe.set(J.x,J.y,J.z,J.w):oe.set(J,Te,ke,De),fe.viewport(F.copy(oe).multiplyScalar(re).round())},this.getScissor=function(J){return J.copy(me)},this.setScissor=function(J,Te,ke,De){J.isVector4?me.set(J.x,J.y,J.z,J.w):me.set(J,Te,ke,De),fe.scissor(z.copy(me).multiplyScalar(re).round())},this.getScissorTest=function(){return te},this.setScissorTest=function(J){fe.setScissorTest(te=J)},this.setOpaqueSort=function(J){$=J},this.setTransparentSort=function(J){ee=J},this.getClearColor=function(J){return J.copy(ot.getClearColor())},this.setClearColor=function(){ot.setClearColor(...arguments)},this.getClearAlpha=function(){return ot.getClearAlpha()},this.setClearAlpha=function(){ot.setClearAlpha(...arguments)},this.clear=function(J=!0,Te=!0,ke=!0){let De=0;if(J){let Me=!1;if(L!==null){const _t=L.texture.format;Me=x.has(_t)}if(Me){const _t=L.texture.type,Tt=b.has(_t),Bt=ot.getClearColor(),jt=ot.getClearAlpha(),rn=Bt.r,ln=Bt.g,Zt=Bt.b;Tt?(v[0]=rn,v[1]=ln,v[2]=Zt,v[3]=jt,Q.clearBufferuiv(Q.COLOR,0,v)):(_[0]=rn,_[1]=ln,_[2]=Zt,_[3]=jt,Q.clearBufferiv(Q.COLOR,0,_))}else De|=Q.COLOR_BUFFER_BIT}Te&&(De|=Q.DEPTH_BUFFER_BIT),ke&&(De|=Q.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Q.clear(De)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Xe,!1),n.removeEventListener("webglcontextrestored",Ve,!1),n.removeEventListener("webglcontextcreationerror",yt,!1),ot.dispose(),We.dispose(),dt.dispose(),$e.dispose(),q.dispose(),V.dispose(),xe.dispose(),ue.dispose(),we.dispose(),pe.dispose(),Ge.dispose(),Ge.removeEventListener("sessionstart",bn),Ge.removeEventListener("sessionend",sr),Rr.stop()};function Xe(J){J.preventDefault(),Ib("WebGLRenderer: Context Lost."),P=!0}function Ve(){Ib("WebGLRenderer: Context Restored."),P=!1;const J=rt.autoReset,Te=Be.enabled,ke=Be.autoUpdate,De=Be.needsUpdate,Me=Be.type;Ke(),rt.autoReset=J,Be.enabled=Te,Be.autoUpdate=ke,Be.needsUpdate=De,Be.type=Me}function yt(J){xt("WebGLRenderer: A WebGL context could not be created. Reason: ",J.statusMessage)}function Mt(J){const Te=J.target;Te.removeEventListener("dispose",Mt),Ct(Te)}function Ct(J){Kt(J),$e.remove(J)}function Kt(J){const Te=$e.get(J).programs;Te!==void 0&&(Te.forEach(function(ke){pe.releaseProgram(ke)}),J.isShaderMaterial&&pe.releaseShaderCache(J))}this.renderBufferDirect=function(J,Te,ke,De,Me,_t){Te===null&&(Te=ge);const Tt=Me.isMesh&&Me.matrixWorld.determinant()<0,Bt=DA(J,Te,ke,De,Me);fe.setMaterial(De,Tt);let jt=ke.index,rn=1;if(De.wireframe===!0){if(jt=le.getWireframeAttribute(ke),jt===void 0)return;rn=2}const ln=ke.drawRange,Zt=ke.attributes.position;let En=ln.start*rn,Vn=(ln.start+ln.count)*rn;_t!==null&&(En=Math.max(En,_t.start*rn),Vn=Math.min(Vn,(_t.start+_t.count)*rn)),jt!==null?(En=Math.max(En,0),Vn=Math.min(Vn,jt.count)):Zt!=null&&(En=Math.max(En,0),Vn=Math.min(Vn,Zt.count));const qn=Vn-En;if(qn<0||qn===1/0)return;ue.setup(Me,De,Bt,ke,jt);let Un,ar=ht;if(jt!==null&&(Un=ie.get(jt),ar=gt,ar.setIndex(Un)),Me.isMesh)De.wireframe===!0?(fe.setLineWidth(De.wireframeLinewidth*_e()),ar.setMode(Q.LINES)):ar.setMode(Q.TRIANGLES);else if(Me.isLine){let tn=De.linewidth;tn===void 0&&(tn=1),fe.setLineWidth(tn*_e()),Me.isLineSegments?ar.setMode(Q.LINES):Me.isLineLoop?ar.setMode(Q.LINE_LOOP):ar.setMode(Q.LINE_STRIP)}else Me.isPoints?ar.setMode(Q.POINTS):Me.isSprite&&ar.setMode(Q.TRIANGLES);if(Me.isBatchedMesh)if(Me._multiDrawInstances!==null)jr("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),ar.renderMultiDrawInstances(Me._multiDrawStarts,Me._multiDrawCounts,Me._multiDrawCount,Me._multiDrawInstances);else if(ze.get("WEBGL_multi_draw"))ar.renderMultiDraw(Me._multiDrawStarts,Me._multiDrawCounts,Me._multiDrawCount);else{const tn=Me._multiDrawStarts,wr=Me._multiDrawCounts,jn=Me._multiDrawCount,cs=jt?ie.get(jt).bytesPerElement:1,Od=$e.get(De).currentProgram.getUniforms();for(let Pr=0;Pr<jn;Pr++)Od.setValue(Q,"_gl_DrawID",Pr),ar.render(tn[Pr]/cs,wr[Pr])}else if(Me.isInstancedMesh)ar.renderInstances(En,qn,Me.count);else if(ke.isInstancedBufferGeometry){const tn=ke._maxInstanceCount!==void 0?ke._maxInstanceCount:1/0,wr=Math.min(ke.instanceCount,tn);ar.renderInstances(En,qn,wr)}else ar.render(En,qn)};function vt(J,Te,ke){J.transparent===!0&&J.side===Zs&&J.forceSinglePass===!1?(J.side=Sr,J.needsUpdate=!0,Wi(J,Te,ke),J.side=wo,J.needsUpdate=!0,Wi(J,Te,ke),J.side=Zs):Wi(J,Te,ke)}this.compile=function(J,Te,ke=null){ke===null&&(ke=J),T=dt.get(ke),T.init(Te),C.push(T),ke.traverseVisible(function(Me){Me.isLight&&Me.layers.test(Te.layers)&&(T.pushLight(Me),Me.castShadow&&T.pushShadow(Me))}),J!==ke&&J.traverseVisible(function(Me){Me.isLight&&Me.layers.test(Te.layers)&&(T.pushLight(Me),Me.castShadow&&T.pushShadow(Me))}),T.setupLights();const De=new Set;return J.traverse(function(Me){if(!(Me.isMesh||Me.isPoints||Me.isLine||Me.isSprite))return;const _t=Me.material;if(_t)if(Array.isArray(_t))for(let Tt=0;Tt<_t.length;Tt++){const Bt=_t[Tt];vt(Bt,ke,Me),De.add(Bt)}else vt(_t,ke,Me),De.add(_t)}),T=C.pop(),De},this.compileAsync=function(J,Te,ke=null){const De=this.compile(J,Te,ke);return new Promise(Me=>{function _t(){if(De.forEach(function(Tt){$e.get(Tt).currentProgram.isReady()&&De.delete(Tt)}),De.size===0){Me(J);return}setTimeout(_t,10)}ze.get("KHR_parallel_shader_compile")!==null?_t():setTimeout(_t,10)})};let It=null;function dn(J){It&&It(J)}function bn(){Rr.stop()}function sr(){Rr.start()}const Rr=new lQ;Rr.setAnimationLoop(dn),typeof self<"u"&&Rr.setContext(self),this.setAnimationLoop=function(J){It=J,Ge.setAnimationLoop(J),J===null?Rr.stop():Rr.start()},Ge.addEventListener("sessionstart",bn),Ge.addEventListener("sessionend",sr),this.render=function(J,Te){if(Te!==void 0&&Te.isCamera!==!0){xt("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(P===!0)return;if(J.matrixWorldAutoUpdate===!0&&J.updateMatrixWorld(),Te.parent===null&&Te.matrixWorldAutoUpdate===!0&&Te.updateMatrixWorld(),Ge.enabled===!0&&Ge.isPresenting===!0&&(Ge.cameraAutoUpdate===!0&&Ge.updateCamera(Te),Te=Ge.getCamera()),J.isScene===!0&&J.onBeforeRender(M,J,Te,L),T=dt.get(J,C.length),T.init(Te),C.push(T),se.multiplyMatrices(Te.projectionMatrix,Te.matrixWorldInverse),K.setFromProjectionMatrix(se,va,Te.reversedDepth),Ee=this.localClippingEnabled,ne=ft.init(this.clippingPlanes,Ee),E=We.get(J,A.length),E.init(),A.push(E),Ge.enabled===!0&&Ge.isPresenting===!0){const _t=M.xr.getDepthSensingMesh();_t!==null&&ls(_t,Te,-1/0,M.sortObjects)}ls(J,Te,0,M.sortObjects),E.finish(),M.sortObjects===!0&&E.sort($,ee),be=Ge.enabled===!1||Ge.isPresenting===!1||Ge.hasDepthSensing()===!1,be&&ot.addToRenderList(E,J),this.info.render.frame++,ne===!0&&ft.beginShadows();const ke=T.state.shadowsArray;Be.render(ke,J,Te),ne===!0&&ft.endShadows(),this.info.autoReset===!0&&this.info.reset();const De=E.opaque,Me=E.transmissive;if(T.setupLights(),Te.isArrayCamera){const _t=Te.cameras;if(Me.length>0)for(let Tt=0,Bt=_t.length;Tt<Bt;Tt++){const jt=_t[Tt];Pd(De,Me,J,jt)}be&&ot.render(J);for(let Tt=0,Bt=_t.length;Tt<Bt;Tt++){const jt=_t[Tt];aa(E,J,jt,jt.viewport)}}else Me.length>0&&Pd(De,Me,J,Te),be&&ot.render(J),aa(E,J,Te);L!==null&&N===0&&(Se.updateMultisampleRenderTarget(L),Se.updateRenderTargetMipmap(L)),J.isScene===!0&&J.onAfterRender(M,J,Te),ue.resetDefaultState(),k=-1,I=null,C.pop(),C.length>0?(T=C[C.length-1],ne===!0&&ft.setGlobalState(M.clippingPlanes,T.state.camera)):T=null,A.pop(),A.length>0?E=A[A.length-1]:E=null};function ls(J,Te,ke,De){if(J.visible===!1)return;if(J.layers.test(Te.layers)){if(J.isGroup)ke=J.renderOrder;else if(J.isLOD)J.autoUpdate===!0&&J.update(Te);else if(J.isLight)T.pushLight(J),J.castShadow&&T.pushShadow(J);else if(J.isSprite){if(!J.frustumCulled||K.intersectsSprite(J)){De&&Pe.setFromMatrixPosition(J.matrixWorld).applyMatrix4(se);const Tt=xe.update(J),Bt=J.material;Bt.visible&&E.push(J,Tt,Bt,ke,Pe.z,null)}}else if((J.isMesh||J.isLine||J.isPoints)&&(!J.frustumCulled||K.intersectsObject(J))){const Tt=xe.update(J),Bt=J.material;if(De&&(J.boundingSphere!==void 0?(J.boundingSphere===null&&J.computeBoundingSphere(),Pe.copy(J.boundingSphere.center)):(Tt.boundingSphere===null&&Tt.computeBoundingSphere(),Pe.copy(Tt.boundingSphere.center)),Pe.applyMatrix4(J.matrixWorld).applyMatrix4(se)),Array.isArray(Bt)){const jt=Tt.groups;for(let rn=0,ln=jt.length;rn<ln;rn++){const Zt=jt[rn],En=Bt[Zt.materialIndex];En&&En.visible&&E.push(J,Tt,En,ke,Pe.z,Zt)}}else Bt.visible&&E.push(J,Tt,Bt,ke,Pe.z,null)}}const _t=J.children;for(let Tt=0,Bt=_t.length;Tt<Bt;Tt++)ls(_t[Tt],Te,ke,De)}function aa(J,Te,ke,De){const{opaque:Me,transmissive:_t,transparent:Tt}=J;T.setupLightsView(ke),ne===!0&&ft.setGlobalState(M.clippingPlanes,ke),De&&fe.viewport(F.copy(De)),Me.length>0&&Ts(Me,Te,ke),_t.length>0&&Ts(_t,Te,ke),Tt.length>0&&Ts(Tt,Te,ke),fe.buffers.depth.setTest(!0),fe.buffers.depth.setMask(!0),fe.buffers.color.setMask(!0),fe.setPolygonOffset(!1)}function Pd(J,Te,ke,De){if((ke.isScene===!0?ke.overrideMaterial:null)!==null)return;T.state.transmissionRenderTarget[De.id]===void 0&&(T.state.transmissionRenderTarget[De.id]=new zf(1,1,{generateMipmaps:!0,type:ze.has("EXT_color_buffer_half_float")||ze.has("EXT_color_buffer_float")?Ci:si,minFilter:za,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:sn.workingColorSpace}));const _t=T.state.transmissionRenderTarget[De.id],Tt=De.viewport||F;_t.setSize(Tt.z*M.transmissionResolutionScale,Tt.w*M.transmissionResolutionScale);const Bt=M.getRenderTarget(),jt=M.getActiveCubeFace(),rn=M.getActiveMipmapLevel();M.setRenderTarget(_t),M.getClearColor(B),j=M.getClearAlpha(),j<1&&M.setClearColor(16777215,.5),M.clear(),be&&ot.render(ke);const ln=M.toneMapping;M.toneMapping=ya;const Zt=De.viewport;if(De.viewport!==void 0&&(De.viewport=void 0),T.setupLightsView(De),ne===!0&&ft.setGlobalState(M.clippingPlanes,De),Ts(J,ke,De),Se.updateMultisampleRenderTarget(_t),Se.updateRenderTargetMipmap(_t),ze.has("WEBGL_multisampled_render_to_texture")===!1){let En=!1;for(let Vn=0,qn=Te.length;Vn<qn;Vn++){const Un=Te[Vn],{object:ar,geometry:tn,material:wr,group:jn}=Un;if(wr.side===Zs&&ar.layers.test(De.layers)){const cs=wr.side;wr.side=Sr,wr.needsUpdate=!0,Oi(ar,ke,De,tn,wr,jn),wr.side=cs,wr.needsUpdate=!0,En=!0}}En===!0&&(Se.updateMultisampleRenderTarget(_t),Se.updateRenderTargetMipmap(_t))}M.setRenderTarget(Bt,jt,rn),M.setClearColor(B,j),Zt!==void 0&&(De.viewport=Zt),M.toneMapping=ln}function Ts(J,Te,ke){const De=Te.isScene===!0?Te.overrideMaterial:null;for(let Me=0,_t=J.length;Me<_t;Me++){const Tt=J[Me],{object:Bt,geometry:jt,group:rn}=Tt;let ln=Tt.material;ln.allowOverride===!0&&De!==null&&(ln=De),Bt.layers.test(ke.layers)&&Oi(Bt,Te,ke,jt,ln,rn)}}function Oi(J,Te,ke,De,Me,_t){J.onBeforeRender(M,Te,ke,De,Me,_t),J.modelViewMatrix.multiplyMatrices(ke.matrixWorldInverse,J.matrixWorld),J.normalMatrix.getNormalMatrix(J.modelViewMatrix),Me.onBeforeRender(M,Te,ke,De,J,_t),Me.transparent===!0&&Me.side===Zs&&Me.forceSinglePass===!1?(Me.side=Sr,Me.needsUpdate=!0,M.renderBufferDirect(ke,Te,De,Me,J,_t),Me.side=wo,Me.needsUpdate=!0,M.renderBufferDirect(ke,Te,De,Me,J,_t),Me.side=Zs):M.renderBufferDirect(ke,Te,De,Me,J,_t),J.onAfterRender(M,Te,ke,De,Me,_t)}function Wi(J,Te,ke){Te.isScene!==!0&&(Te=ge);const De=$e.get(J),Me=T.state.lights,_t=T.state.shadowsArray,Tt=Me.state.version,Bt=pe.getParameters(J,Me.state,_t,Te,ke),jt=pe.getProgramCacheKey(Bt);let rn=De.programs;De.environment=J.isMeshStandardMaterial?Te.environment:null,De.fog=Te.fog,De.envMap=(J.isMeshStandardMaterial?V:q).get(J.envMap||De.environment),De.envMapRotation=De.environment!==null&&J.envMap===null?Te.environmentRotation:J.envMapRotation,rn===void 0&&(J.addEventListener("dispose",Mt),rn=new Map,De.programs=rn);let ln=rn.get(jt);if(ln!==void 0){if(De.currentProgram===ln&&De.lightsStateVersion===Tt)return Jp(J,Bt),ln}else Bt.uniforms=pe.getUniforms(J),J.onBeforeCompile(Bt,M),ln=pe.acquireProgram(Bt,jt),rn.set(jt,ln),De.uniforms=Bt.uniforms;const Zt=De.uniforms;return(!J.isShaderMaterial&&!J.isRawShaderMaterial||J.clipping===!0)&&(Zt.clippingPlanes=ft.uniform),Jp(J,Bt),De.needsLights=d1(J),De.lightsStateVersion=Tt,De.needsLights&&(Zt.ambientLightColor.value=Me.state.ambient,Zt.lightProbe.value=Me.state.probe,Zt.directionalLights.value=Me.state.directional,Zt.directionalLightShadows.value=Me.state.directionalShadow,Zt.spotLights.value=Me.state.spot,Zt.spotLightShadows.value=Me.state.spotShadow,Zt.rectAreaLights.value=Me.state.rectArea,Zt.ltc_1.value=Me.state.rectAreaLTC1,Zt.ltc_2.value=Me.state.rectAreaLTC2,Zt.pointLights.value=Me.state.point,Zt.pointLightShadows.value=Me.state.pointShadow,Zt.hemisphereLights.value=Me.state.hemi,Zt.directionalShadowMap.value=Me.state.directionalShadowMap,Zt.directionalShadowMatrix.value=Me.state.directionalShadowMatrix,Zt.spotShadowMap.value=Me.state.spotShadowMap,Zt.spotLightMatrix.value=Me.state.spotLightMatrix,Zt.spotLightMap.value=Me.state.spotLightMap,Zt.pointShadowMap.value=Me.state.pointShadowMap,Zt.pointShadowMatrix.value=Me.state.pointShadowMatrix),De.currentProgram=ln,De.uniformsList=null,ln}function Qc(J){if(J.uniformsList===null){const Te=J.currentProgram.getUniforms();J.uniformsList=ET.seqWithValue(Te.seq,J.uniforms)}return J.uniformsList}function Jp(J,Te){const ke=$e.get(J);ke.outputColorSpace=Te.outputColorSpace,ke.batching=Te.batching,ke.batchingColor=Te.batchingColor,ke.instancing=Te.instancing,ke.instancingColor=Te.instancingColor,ke.instancingMorph=Te.instancingMorph,ke.skinning=Te.skinning,ke.morphTargets=Te.morphTargets,ke.morphNormals=Te.morphNormals,ke.morphColors=Te.morphColors,ke.morphTargetsCount=Te.morphTargetsCount,ke.numClippingPlanes=Te.numClippingPlanes,ke.numIntersection=Te.numClipIntersection,ke.vertexAlphas=Te.vertexAlphas,ke.vertexTangents=Te.vertexTangents,ke.toneMapping=Te.toneMapping}function DA(J,Te,ke,De,Me){Te.isScene!==!0&&(Te=ge),Se.resetTextureUnits();const _t=Te.fog,Tt=De.isMeshStandardMaterial?Te.environment:null,Bt=L===null?M.outputColorSpace:L.isXRRenderTarget===!0?L.texture.colorSpace:Pp,jt=(De.isMeshStandardMaterial?V:q).get(De.envMap||Tt),rn=De.vertexColors===!0&&!!ke.attributes.color&&ke.attributes.color.itemSize===4,ln=!!ke.attributes.tangent&&(!!De.normalMap||De.anisotropy>0),Zt=!!ke.morphAttributes.position,En=!!ke.morphAttributes.normal,Vn=!!ke.morphAttributes.color;let qn=ya;De.toneMapped&&(L===null||L.isXRRenderTarget===!0)&&(qn=M.toneMapping);const Un=ke.morphAttributes.position||ke.morphAttributes.normal||ke.morphAttributes.color,ar=Un!==void 0?Un.length:0,tn=$e.get(De),wr=T.state.lights;if(ne===!0&&(Ee===!0||J!==I)){const ds=J===I&&De.id===k;ft.setState(De,J,ds)}let jn=!1;De.version===tn.__version?(tn.needsLights&&tn.lightsStateVersion!==wr.state.version||tn.outputColorSpace!==Bt||Me.isBatchedMesh&&tn.batching===!1||!Me.isBatchedMesh&&tn.batching===!0||Me.isBatchedMesh&&tn.batchingColor===!0&&Me.colorTexture===null||Me.isBatchedMesh&&tn.batchingColor===!1&&Me.colorTexture!==null||Me.isInstancedMesh&&tn.instancing===!1||!Me.isInstancedMesh&&tn.instancing===!0||Me.isSkinnedMesh&&tn.skinning===!1||!Me.isSkinnedMesh&&tn.skinning===!0||Me.isInstancedMesh&&tn.instancingColor===!0&&Me.instanceColor===null||Me.isInstancedMesh&&tn.instancingColor===!1&&Me.instanceColor!==null||Me.isInstancedMesh&&tn.instancingMorph===!0&&Me.morphTexture===null||Me.isInstancedMesh&&tn.instancingMorph===!1&&Me.morphTexture!==null||tn.envMap!==jt||De.fog===!0&&tn.fog!==_t||tn.numClippingPlanes!==void 0&&(tn.numClippingPlanes!==ft.numPlanes||tn.numIntersection!==ft.numIntersection)||tn.vertexAlphas!==rn||tn.vertexTangents!==ln||tn.morphTargets!==Zt||tn.morphNormals!==En||tn.morphColors!==Vn||tn.toneMapping!==qn||tn.morphTargetsCount!==ar)&&(jn=!0):(jn=!0,tn.__version=De.version);let cs=tn.currentProgram;jn===!0&&(cs=Wi(De,Te,Me));let Od=!1,Pr=!1,Jc=!1;const Nr=cs.getUniforms(),us=tn.uniforms;if(fe.useProgram(cs.program)&&(Od=!0,Pr=!0,Jc=!0),De.id!==k&&(k=De.id,Pr=!0),Od||I!==J){fe.buffers.depth.getReversed()&&J.reversedDepth!==!0&&(J._reversedDepth=!0,J.updateProjectionMatrix()),Nr.setValue(Q,"projectionMatrix",J.projectionMatrix),Nr.setValue(Q,"viewMatrix",J.matrixWorldInverse);const Es=Nr.map.cameraPosition;Es!==void 0&&Es.setValue(Q,ve.setFromMatrixPosition(J.matrixWorld)),Je.logarithmicDepthBuffer&&Nr.setValue(Q,"logDepthBufFC",2/(Math.log(J.far+1)/Math.LN2)),(De.isMeshPhongMaterial||De.isMeshToonMaterial||De.isMeshLambertMaterial||De.isMeshBasicMaterial||De.isMeshStandardMaterial||De.isShaderMaterial)&&Nr.setValue(Q,"isOrthographic",J.isOrthographicCamera===!0),I!==J&&(I=J,Pr=!0,Jc=!0)}if(Me.isSkinnedMesh){Nr.setOptional(Q,Me,"bindMatrix"),Nr.setOptional(Q,Me,"bindMatrixInverse");const ds=Me.skeleton;ds&&(ds.boneTexture===null&&ds.computeBoneTexture(),Nr.setValue(Q,"boneTexture",ds.boneTexture,Se))}Me.isBatchedMesh&&(Nr.setOptional(Q,Me,"batchingTexture"),Nr.setValue(Q,"batchingTexture",Me._matricesTexture,Se),Nr.setOptional(Q,Me,"batchingIdTexture"),Nr.setValue(Q,"batchingIdTexture",Me._indirectTexture,Se),Nr.setOptional(Q,Me,"batchingColorTexture"),Me._colorsTexture!==null&&Nr.setValue(Q,"batchingColorTexture",Me._colorsTexture,Se));const qi=ke.morphAttributes;if((qi.position!==void 0||qi.normal!==void 0||qi.color!==void 0)&&st.update(Me,ke,cs),(Pr||tn.receiveShadow!==Me.receiveShadow)&&(tn.receiveShadow=Me.receiveShadow,Nr.setValue(Q,"receiveShadow",Me.receiveShadow)),De.isMeshGouraudMaterial&&De.envMap!==null&&(us.envMap.value=jt,us.flipEnvMap.value=jt.isCubeTexture&&jt.isRenderTargetTexture===!1?-1:1),De.isMeshStandardMaterial&&De.envMap===null&&Te.environment!==null&&(us.envMapIntensity.value=Te.environmentIntensity),us.dfgLUT!==void 0&&(us.dfgLUT.value=d3e()),Pr&&(Nr.setValue(Q,"toneMappingExposure",M.toneMappingExposure),tn.needsLights&&LA(us,Jc),_t&&De.fog===!0&&it.refreshFogUniforms(us,_t),it.refreshMaterialUniforms(us,De,re,W,T.state.transmissionRenderTarget[J.id]),ET.upload(Q,Qc(tn),us,Se)),De.isShaderMaterial&&De.uniformsNeedUpdate===!0&&(ET.upload(Q,Qc(tn),us,Se),De.uniformsNeedUpdate=!1),De.isSpriteMaterial&&Nr.setValue(Q,"center",Me.center),Nr.setValue(Q,"modelViewMatrix",Me.modelViewMatrix),Nr.setValue(Q,"normalMatrix",Me.normalMatrix),Nr.setValue(Q,"modelMatrix",Me.matrixWorld),De.isShaderMaterial||De.isRawShaderMaterial){const ds=De.uniformsGroups;for(let Es=0,sc=ds.length;Es<sc;Es++){const eu=ds[Es];we.update(eu,cs),we.bind(eu,cs)}}return cs}function LA(J,Te){J.ambientLightColor.needsUpdate=Te,J.lightProbe.needsUpdate=Te,J.directionalLights.needsUpdate=Te,J.directionalLightShadows.needsUpdate=Te,J.pointLights.needsUpdate=Te,J.pointLightShadows.needsUpdate=Te,J.spotLights.needsUpdate=Te,J.spotLightShadows.needsUpdate=Te,J.rectAreaLights.needsUpdate=Te,J.hemisphereLights.needsUpdate=Te}function d1(J){return J.isMeshLambertMaterial||J.isMeshToonMaterial||J.isMeshPhongMaterial||J.isMeshStandardMaterial||J.isShadowMaterial||J.isShaderMaterial&&J.lights===!0}this.getActiveCubeFace=function(){return D},this.getActiveMipmapLevel=function(){return N},this.getRenderTarget=function(){return L},this.setRenderTargetTextures=function(J,Te,ke){const De=$e.get(J);De.__autoAllocateDepthBuffer=J.resolveDepthBuffer===!1,De.__autoAllocateDepthBuffer===!1&&(De.__useRenderToTexture=!1),$e.get(J.texture).__webglTexture=Te,$e.get(J.depthTexture).__webglTexture=De.__autoAllocateDepthBuffer?void 0:ke,De.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(J,Te){const ke=$e.get(J);ke.__webglFramebuffer=Te,ke.__useDefaultFramebuffer=Te===void 0};const ih=Q.createFramebuffer();this.setRenderTarget=function(J,Te=0,ke=0){L=J,D=Te,N=ke;let De=!0,Me=null,_t=!1,Tt=!1;if(J){const jt=$e.get(J);if(jt.__useDefaultFramebuffer!==void 0)fe.bindFramebuffer(Q.FRAMEBUFFER,null),De=!1;else if(jt.__webglFramebuffer===void 0)Se.setupRenderTarget(J);else if(jt.__hasExternalTextures)Se.rebindTextures(J,$e.get(J.texture).__webglTexture,$e.get(J.depthTexture).__webglTexture);else if(J.depthBuffer){const Zt=J.depthTexture;if(jt.__boundDepthTexture!==Zt){if(Zt!==null&&$e.has(Zt)&&(J.width!==Zt.image.width||J.height!==Zt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Se.setupDepthRenderbuffer(J)}}const rn=J.texture;(rn.isData3DTexture||rn.isDataArrayTexture||rn.isCompressedArrayTexture)&&(Tt=!0);const ln=$e.get(J).__webglFramebuffer;J.isWebGLCubeRenderTarget?(Array.isArray(ln[Te])?Me=ln[Te][ke]:Me=ln[Te],_t=!0):J.samples>0&&Se.useMultisampledRTT(J)===!1?Me=$e.get(J).__webglMultisampledFramebuffer:Array.isArray(ln)?Me=ln[ke]:Me=ln,F.copy(J.viewport),z.copy(J.scissor),H=J.scissorTest}else F.copy(oe).multiplyScalar(re).floor(),z.copy(me).multiplyScalar(re).floor(),H=te;if(ke!==0&&(Me=ih),fe.bindFramebuffer(Q.FRAMEBUFFER,Me)&&De&&fe.drawBuffers(J,Me),fe.viewport(F),fe.scissor(z),fe.setScissorTest(H),_t){const jt=$e.get(J.texture);Q.framebufferTexture2D(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_CUBE_MAP_POSITIVE_X+Te,jt.__webglTexture,ke)}else if(Tt){const jt=Te;for(let rn=0;rn<J.textures.length;rn++){const ln=$e.get(J.textures[rn]);Q.framebufferTextureLayer(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0+rn,ln.__webglTexture,ke,jt)}}else if(J!==null&&ke!==0){const jt=$e.get(J.texture);Q.framebufferTexture2D(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_2D,jt.__webglTexture,ke)}k=-1},this.readRenderTargetPixels=function(J,Te,ke,De,Me,_t,Tt,Bt=0){if(!(J&&J.isWebGLRenderTarget)){xt("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let jt=$e.get(J).__webglFramebuffer;if(J.isWebGLCubeRenderTarget&&Tt!==void 0&&(jt=jt[Tt]),jt){fe.bindFramebuffer(Q.FRAMEBUFFER,jt);try{const rn=J.textures[Bt],ln=rn.format,Zt=rn.type;if(!Je.textureFormatReadable(ln)){xt("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Je.textureTypeReadable(Zt)){xt("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Te>=0&&Te<=J.width-De&&ke>=0&&ke<=J.height-Me&&(J.textures.length>1&&Q.readBuffer(Q.COLOR_ATTACHMENT0+Bt),Q.readPixels(Te,ke,De,Me,Ut.convert(ln),Ut.convert(Zt),_t))}finally{const rn=L!==null?$e.get(L).__webglFramebuffer:null;fe.bindFramebuffer(Q.FRAMEBUFFER,rn)}}},this.readRenderTargetPixelsAsync=async function(J,Te,ke,De,Me,_t,Tt,Bt=0){if(!(J&&J.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let jt=$e.get(J).__webglFramebuffer;if(J.isWebGLCubeRenderTarget&&Tt!==void 0&&(jt=jt[Tt]),jt)if(Te>=0&&Te<=J.width-De&&ke>=0&&ke<=J.height-Me){fe.bindFramebuffer(Q.FRAMEBUFFER,jt);const rn=J.textures[Bt],ln=rn.format,Zt=rn.type;if(!Je.textureFormatReadable(ln))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Je.textureTypeReadable(Zt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const En=Q.createBuffer();Q.bindBuffer(Q.PIXEL_PACK_BUFFER,En),Q.bufferData(Q.PIXEL_PACK_BUFFER,_t.byteLength,Q.STREAM_READ),J.textures.length>1&&Q.readBuffer(Q.COLOR_ATTACHMENT0+Bt),Q.readPixels(Te,ke,De,Me,Ut.convert(ln),Ut.convert(Zt),0);const Vn=L!==null?$e.get(L).__webglFramebuffer:null;fe.bindFramebuffer(Q.FRAMEBUFFER,Vn);const qn=Q.fenceSync(Q.SYNC_GPU_COMMANDS_COMPLETE,0);return Q.flush(),await QTe(Q,qn,4),Q.bindBuffer(Q.PIXEL_PACK_BUFFER,En),Q.getBufferSubData(Q.PIXEL_PACK_BUFFER,0,_t),Q.deleteBuffer(En),Q.deleteSync(qn),_t}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(J,Te=null,ke=0){const De=Math.pow(2,-ke),Me=Math.floor(J.image.width*De),_t=Math.floor(J.image.height*De),Tt=Te!==null?Te.x:0,Bt=Te!==null?Te.y:0;Se.setTexture2D(J,0),Q.copyTexSubImage2D(Q.TEXTURE_2D,ke,0,0,Tt,Bt,Me,_t),fe.unbindTexture()};const Bx=Q.createFramebuffer(),Nd=Q.createFramebuffer();this.copyTextureToTexture=function(J,Te,ke=null,De=null,Me=0,_t=null){_t===null&&(Me!==0?(jr("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),_t=Me,Me=0):_t=0);let Tt,Bt,jt,rn,ln,Zt,En,Vn,qn;const Un=J.isCompressedTexture?J.mipmaps[_t]:J.image;if(ke!==null)Tt=ke.max.x-ke.min.x,Bt=ke.max.y-ke.min.y,jt=ke.isBox3?ke.max.z-ke.min.z:1,rn=ke.min.x,ln=ke.min.y,Zt=ke.isBox3?ke.min.z:0;else{const qi=Math.pow(2,-Me);Tt=Math.floor(Un.width*qi),Bt=Math.floor(Un.height*qi),J.isDataArrayTexture?jt=Un.depth:J.isData3DTexture?jt=Math.floor(Un.depth*qi):jt=1,rn=0,ln=0,Zt=0}De!==null?(En=De.x,Vn=De.y,qn=De.z):(En=0,Vn=0,qn=0);const ar=Ut.convert(Te.format),tn=Ut.convert(Te.type);let wr;Te.isData3DTexture?(Se.setTexture3D(Te,0),wr=Q.TEXTURE_3D):Te.isDataArrayTexture||Te.isCompressedArrayTexture?(Se.setTexture2DArray(Te,0),wr=Q.TEXTURE_2D_ARRAY):(Se.setTexture2D(Te,0),wr=Q.TEXTURE_2D),Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,Te.flipY),Q.pixelStorei(Q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Te.premultiplyAlpha),Q.pixelStorei(Q.UNPACK_ALIGNMENT,Te.unpackAlignment);const jn=Q.getParameter(Q.UNPACK_ROW_LENGTH),cs=Q.getParameter(Q.UNPACK_IMAGE_HEIGHT),Od=Q.getParameter(Q.UNPACK_SKIP_PIXELS),Pr=Q.getParameter(Q.UNPACK_SKIP_ROWS),Jc=Q.getParameter(Q.UNPACK_SKIP_IMAGES);Q.pixelStorei(Q.UNPACK_ROW_LENGTH,Un.width),Q.pixelStorei(Q.UNPACK_IMAGE_HEIGHT,Un.height),Q.pixelStorei(Q.UNPACK_SKIP_PIXELS,rn),Q.pixelStorei(Q.UNPACK_SKIP_ROWS,ln),Q.pixelStorei(Q.UNPACK_SKIP_IMAGES,Zt);const Nr=J.isDataArrayTexture||J.isData3DTexture,us=Te.isDataArrayTexture||Te.isData3DTexture;if(J.isDepthTexture){const qi=$e.get(J),ds=$e.get(Te),Es=$e.get(qi.__renderTarget),sc=$e.get(ds.__renderTarget);fe.bindFramebuffer(Q.READ_FRAMEBUFFER,Es.__webglFramebuffer),fe.bindFramebuffer(Q.DRAW_FRAMEBUFFER,sc.__webglFramebuffer);for(let eu=0;eu<jt;eu++)Nr&&(Q.framebufferTextureLayer(Q.READ_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,$e.get(J).__webglTexture,Me,Zt+eu),Q.framebufferTextureLayer(Q.DRAW_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,$e.get(Te).__webglTexture,_t,qn+eu)),Q.blitFramebuffer(rn,ln,Tt,Bt,En,Vn,Tt,Bt,Q.DEPTH_BUFFER_BIT,Q.NEAREST);fe.bindFramebuffer(Q.READ_FRAMEBUFFER,null),fe.bindFramebuffer(Q.DRAW_FRAMEBUFFER,null)}else if(Me!==0||J.isRenderTargetTexture||$e.has(J)){const qi=$e.get(J),ds=$e.get(Te);fe.bindFramebuffer(Q.READ_FRAMEBUFFER,Bx),fe.bindFramebuffer(Q.DRAW_FRAMEBUFFER,Nd);for(let Es=0;Es<jt;Es++)Nr?Q.framebufferTextureLayer(Q.READ_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,qi.__webglTexture,Me,Zt+Es):Q.framebufferTexture2D(Q.READ_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_2D,qi.__webglTexture,Me),us?Q.framebufferTextureLayer(Q.DRAW_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,ds.__webglTexture,_t,qn+Es):Q.framebufferTexture2D(Q.DRAW_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_2D,ds.__webglTexture,_t),Me!==0?Q.blitFramebuffer(rn,ln,Tt,Bt,En,Vn,Tt,Bt,Q.COLOR_BUFFER_BIT,Q.NEAREST):us?Q.copyTexSubImage3D(wr,_t,En,Vn,qn+Es,rn,ln,Tt,Bt):Q.copyTexSubImage2D(wr,_t,En,Vn,rn,ln,Tt,Bt);fe.bindFramebuffer(Q.READ_FRAMEBUFFER,null),fe.bindFramebuffer(Q.DRAW_FRAMEBUFFER,null)}else us?J.isDataTexture||J.isData3DTexture?Q.texSubImage3D(wr,_t,En,Vn,qn,Tt,Bt,jt,ar,tn,Un.data):Te.isCompressedArrayTexture?Q.compressedTexSubImage3D(wr,_t,En,Vn,qn,Tt,Bt,jt,ar,Un.data):Q.texSubImage3D(wr,_t,En,Vn,qn,Tt,Bt,jt,ar,tn,Un):J.isDataTexture?Q.texSubImage2D(Q.TEXTURE_2D,_t,En,Vn,Tt,Bt,ar,tn,Un.data):J.isCompressedTexture?Q.compressedTexSubImage2D(Q.TEXTURE_2D,_t,En,Vn,Un.width,Un.height,ar,Un.data):Q.texSubImage2D(Q.TEXTURE_2D,_t,En,Vn,Tt,Bt,ar,tn,Un);Q.pixelStorei(Q.UNPACK_ROW_LENGTH,jn),Q.pixelStorei(Q.UNPACK_IMAGE_HEIGHT,cs),Q.pixelStorei(Q.UNPACK_SKIP_PIXELS,Od),Q.pixelStorei(Q.UNPACK_SKIP_ROWS,Pr),Q.pixelStorei(Q.UNPACK_SKIP_IMAGES,Jc),_t===0&&Te.generateMipmaps&&Q.generateMipmap(wr),fe.unbindTexture()},this.initRenderTarget=function(J){$e.get(J).__webglFramebuffer===void 0&&Se.setupRenderTarget(J)},this.initTexture=function(J){J.isCubeTexture?Se.setTextureCube(J,0):J.isData3DTexture?Se.setTexture3D(J,0):J.isDataArrayTexture||J.isCompressedArrayTexture?Se.setTexture2DArray(J,0):Se.setTexture2D(J,0),fe.unbindTexture()},this.resetState=function(){D=0,N=0,L=null,fe.reset(),ue.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return va}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=sn._getDrawingBufferColorSpace(e),n.unpackColorSpace=sn._getUnpackColorSpace()}}const $g=new Ll,Fu=new mt,hQ=new ae,iP=new mt,CT=new mt,o2=new ae,BD=new ae,pQ=new In,mQ=new ae,gQ=new ae;let Xs=null,vc=null;const Uu=[],Nf={NONE:-1,PAN:0,ROTATE:1};class h3e extends hC{constructor(e,n,r=null){super(n,r),this.objects=e,this.recursive=!0,this.transformGroup=!1,this.rotateSpeed=1,this.raycaster=new oQ,this.mouseButtons={LEFT:Ls.PAN,MIDDLE:Ls.PAN,RIGHT:Ls.ROTATE},this.touches={ONE:Gu.PAN},this._onPointerMove=p3e.bind(this),this._onPointerDown=m3e.bind(this),this._onPointerCancel=g3e.bind(this),this._onContextMenu=x3e.bind(this),r!==null&&this.connect(r)}connect(e){super.connect(e),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointerup",this._onPointerCancel),this.domElement.addEventListener("pointerleave",this._onPointerCancel),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointerup",this._onPointerCancel),this.domElement.removeEventListener("pointerleave",this._onPointerCancel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="auto",this.domElement.style.cursor=""}dispose(){this.disconnect()}_updatePointer(e){const n=this.domElement.getBoundingClientRect();Fu.x=(e.clientX-n.left)/n.width*2-1,Fu.y=-(e.clientY-n.top)/n.height*2+1}_updateState(e){let n;if(e.pointerType==="touch")n=this.touches.ONE;else switch(e.button){case 0:n=this.mouseButtons.LEFT;break;case 1:n=this.mouseButtons.MIDDLE;break;case 2:n=this.mouseButtons.RIGHT;break;default:n=null}switch(n){case Ls.PAN:case Gu.PAN:this.state=Nf.PAN;break;case Ls.ROTATE:case Gu.ROTATE:this.state=Nf.ROTATE;break;default:this.state=Nf.NONE}}}function p3e(t){const e=this.object,n=this.domElement,r=this.raycaster;if(this.enabled!==!1){if(this._updatePointer(t),r.setFromCamera(Fu,e),Xs)this.state===Nf.PAN?r.ray.intersectPlane($g,o2)&&(Xs.position.copy(o2.sub(hQ).applyMatrix4(pQ)),this.dispatchEvent({type:"drag",object:Xs})):this.state===Nf.ROTATE&&(iP.subVectors(Fu,CT).multiplyScalar(this.rotateSpeed),Xs.rotateOnWorldAxis(mQ,iP.x),Xs.rotateOnWorldAxis(gQ.normalize(),-iP.y),this.dispatchEvent({type:"drag",object:Xs})),CT.copy(Fu);else if(t.pointerType==="mouse"||t.pointerType==="pen")if(Uu.length=0,r.setFromCamera(Fu,e),r.intersectObjects(this.objects,this.recursive,Uu),Uu.length>0){const i=Uu[0].object;$g.setFromNormalAndCoplanarPoint(e.getWorldDirection($g.normal),BD.setFromMatrixPosition(i.matrixWorld)),vc!==i&&vc!==null&&(this.dispatchEvent({type:"hoveroff",object:vc}),n.style.cursor="auto",vc=null),vc!==i&&(this.dispatchEvent({type:"hoveron",object:i}),n.style.cursor="pointer",vc=i)}else vc!==null&&(this.dispatchEvent({type:"hoveroff",object:vc}),n.style.cursor="auto",vc=null);CT.copy(Fu)}}function m3e(t){const e=this.object,n=this.domElement,r=this.raycaster;this.enabled!==!1&&(this._updatePointer(t),this._updateState(t),Uu.length=0,r.setFromCamera(Fu,e),r.intersectObjects(this.objects,this.recursive,Uu),Uu.length>0&&(this.transformGroup===!0?Xs=xQ(Uu[0].object):Xs=Uu[0].object,$g.setFromNormalAndCoplanarPoint(e.getWorldDirection($g.normal),BD.setFromMatrixPosition(Xs.matrixWorld)),r.ray.intersectPlane($g,o2)&&(this.state===Nf.PAN?(pQ.copy(Xs.parent.matrixWorld).invert(),hQ.copy(o2).sub(BD.setFromMatrixPosition(Xs.matrixWorld)),n.style.cursor="move",this.dispatchEvent({type:"dragstart",object:Xs})):this.state===Nf.ROTATE&&(mQ.set(0,1,0).applyQuaternion(e.quaternion).normalize(),gQ.set(1,0,0).applyQuaternion(e.quaternion).normalize(),n.style.cursor="move",this.dispatchEvent({type:"dragstart",object:Xs})))),CT.copy(Fu))}function g3e(){this.enabled!==!1&&(Xs&&(this.dispatchEvent({type:"dragend",object:Xs}),Xs=null),this.domElement.style.cursor=vc?"pointer":"auto",this.state=Nf.NONE)}function x3e(t){this.enabled!==!1&&t.preventDefault()}function xQ(t,e=null){return t.isGroup&&(e=t),t.parent===null?e:xQ(t.parent,e)}function y3e(t,e,n){var r,i=1;t==null&&(t=0),e==null&&(e=0),n==null&&(n=0);function s(){var a,o=r.length,l,c=0,u=0,f=0;for(a=0;a<o;++a)l=r[a],c+=l.x||0,u+=l.y||0,f+=l.z||0;for(c=(c/o-t)*i,u=(u/o-e)*i,f=(f/o-n)*i,a=0;a<o;++a)l=r[a],c&&(l.x-=c),u&&(l.y-=u),f&&(l.z-=f)}return s.initialize=function(a){r=a},s.x=function(a){return arguments.length?(t=+a,s):t},s.y=function(a){return arguments.length?(e=+a,s):e},s.z=function(a){return arguments.length?(n=+a,s):n},s.strength=function(a){return arguments.length?(i=+a,s):i},s}function v3e(t){const e=+this._x.call(null,t);return yQ(this.cover(e),e,t)}function yQ(t,e,n){if(isNaN(e))return t;var r,i=t._root,s={data:n},a=t._x0,o=t._x1,l,c,u,f,p;if(!i)return t._root=s,t;for(;i.length;)if((u=e>=(l=(a+o)/2))?a=l:o=l,r=i,!(i=i[f=+u]))return r[f]=s,t;if(c=+t._x.call(null,i.data),e===c)return s.next=i,r?r[f]=s:t._root=s,t;do r=r?r[f]=new Array(2):t._root=new Array(2),(u=e>=(l=(a+o)/2))?a=l:o=l;while((f=+u)==(p=+(c>=l)));return r[p]=i,r[f]=s,t}function b3e(t){Array.isArray(t)||(t=Array.from(t));const e=t.length,n=new Float64Array(e);let r=1/0,i=-1/0;for(let s=0,a;s<e;++s)isNaN(a=+this._x.call(null,t[s]))||(n[s]=a,a<r&&(r=a),a>i&&(i=a));if(r>i)return this;this.cover(r).cover(i);for(let s=0;s<e;++s)yQ(this,n[s],t[s]);return this}function _3e(t){if(isNaN(t=+t))return this;var e=this._x0,n=this._x1;if(isNaN(e))n=(e=Math.floor(t))+1;else{for(var r=n-e||1,i=this._root,s,a;e>t||t>=n;)switch(a=+(t<e),s=new Array(2),s[a]=i,i=s,r*=2,a){case 0:n=e+r;break;case 1:e=n-r;break}this._root&&this._root.length&&(this._root=i)}return this._x0=e,this._x1=n,this}function S3e(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function w3e(t){return arguments.length?this.cover(+t[0][0]).cover(+t[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function ed(t,e,n){this.node=t,this.x0=e,this.x1=n}function T3e(t,e){var n,r=this._x0,i,s,a=this._x1,o=[],l=this._root,c,u;for(l&&o.push(new ed(l,r,a)),e==null?e=1/0:(r=t-e,a=t+e);c=o.pop();)if(!(!(l=c.node)||(i=c.x0)>a||(s=c.x1)<r))if(l.length){var f=(i+s)/2;o.push(new ed(l[1],f,s),new ed(l[0],i,f)),(u=+(t>=f))&&(c=o[o.length-1],o[o.length-1]=o[o.length-1-u],o[o.length-1-u]=c)}else{var p=Math.abs(t-+this._x.call(null,l.data));p<e&&(e=p,r=t-p,a=t+p,n=l.data)}return n}function E3e(t){if(isNaN(l=+this._x.call(null,t)))return this;var e,n=this._root,r,i,s,a=this._x0,o=this._x1,l,c,u,f,p;if(!n)return this;if(n.length)for(;;){if((u=l>=(c=(a+o)/2))?a=c:o=c,e=n,!(n=n[f=+u]))return this;if(!n.length)break;e[f+1&1]&&(r=e,p=f)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):e?(s?e[f]=s:delete e[f],(n=e[0]||e[1])&&n===(e[1]||e[0])&&!n.length&&(r?r[p]=n:this._root=n),this):(this._root=s,this)}function C3e(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function A3e(){return this._root}function M3e(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function R3e(t){var e=[],n,r=this._root,i,s,a;for(r&&e.push(new ed(r,this._x0,this._x1));n=e.pop();)if(!t(r=n.node,s=n.x0,a=n.x1)&&r.length){var o=(s+a)/2;(i=r[1])&&e.push(new ed(i,o,a)),(i=r[0])&&e.push(new ed(i,s,o))}return this}function P3e(t){var e=[],n=[],r;for(this._root&&e.push(new ed(this._root,this._x0,this._x1));r=e.pop();){var i=r.node;if(i.length){var s,a=r.x0,o=r.x1,l=(a+o)/2;(s=i[0])&&e.push(new ed(s,a,l)),(s=i[1])&&e.push(new ed(s,l,o))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.x1);return this}function N3e(t){return t[0]}function O3e(t){return arguments.length?(this._x=t,this):this._x}function vQ(t,e){var n=new xB(e??N3e,NaN,NaN);return t==null?n:n.addAll(t)}function xB(t,e,n){this._x=t,this._x0=e,this._x1=n,this._root=void 0}function w9(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Qa=vQ.prototype=xB.prototype;Qa.copy=function(){var t=new xB(this._x,this._x0,this._x1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=w9(e),t;for(n=[{source:e,target:t._root=new Array(2)}];e=n.pop();)for(var i=0;i<2;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(2)}):e.target[i]=w9(r));return t};Qa.add=v3e;Qa.addAll=b3e;Qa.cover=_3e;Qa.data=S3e;Qa.extent=w3e;Qa.find=T3e;Qa.remove=E3e;Qa.removeAll=C3e;Qa.root=A3e;Qa.size=M3e;Qa.visit=R3e;Qa.visitAfter=P3e;Qa.x=O3e;function D3e(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return bQ(this.cover(e,n),e,n,t)}function bQ(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,s=t._root,a={data:r},o=t._x0,l=t._y0,c=t._x1,u=t._y1,f,p,m,x,b,v,_,E;if(!s)return t._root=a,t;for(;s.length;)if((b=e>=(f=(o+c)/2))?o=f:c=f,(v=n>=(p=(l+u)/2))?l=p:u=p,i=s,!(s=s[_=v<<1|b]))return i[_]=a,t;if(m=+t._x.call(null,s.data),x=+t._y.call(null,s.data),e===m&&n===x)return a.next=s,i?i[_]=a:t._root=a,t;do i=i?i[_]=new Array(4):t._root=new Array(4),(b=e>=(f=(o+c)/2))?o=f:c=f,(v=n>=(p=(l+u)/2))?l=p:u=p;while((_=v<<1|b)===(E=(x>=p)<<1|m>=f));return i[E]=s,i[_]=a,t}function L3e(t){var e,n,r=t.length,i,s,a=new Array(r),o=new Array(r),l=1/0,c=1/0,u=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(s=+this._y.call(null,e))||(a[n]=i,o[n]=s,i<l&&(l=i),i>u&&(u=i),s<c&&(c=s),s>f&&(f=s));if(l>u||c>f)return this;for(this.cover(l,c).cover(u,f),n=0;n<r;++n)bQ(this,a[n],o[n],t[n]);return this}function I3e(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,s=(r=Math.floor(e))+1;else{for(var a=i-n||1,o=this._root,l,c;n>t||t>=i||r>e||e>=s;)switch(c=(e<r)<<1|t<n,l=new Array(4),l[c]=o,o=l,a*=2,c){case 0:i=n+a,s=r+a;break;case 1:n=i-a,s=r+a;break;case 2:i=n+a,r=s-a;break;case 3:n=i-a,r=s-a;break}this._root&&this._root.length&&(this._root=o)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function k3e(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function B3e(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function xa(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function F3e(t,e,n){var r,i=this._x0,s=this._y0,a,o,l,c,u=this._x1,f=this._y1,p=[],m=this._root,x,b;for(m&&p.push(new xa(m,i,s,u,f)),n==null?n=1/0:(i=t-n,s=e-n,u=t+n,f=e+n,n*=n);x=p.pop();)if(!(!(m=x.node)||(a=x.x0)>u||(o=x.y0)>f||(l=x.x1)<i||(c=x.y1)<s))if(m.length){var v=(a+l)/2,_=(o+c)/2;p.push(new xa(m[3],v,_,l,c),new xa(m[2],a,_,v,c),new xa(m[1],v,o,l,_),new xa(m[0],a,o,v,_)),(b=(e>=_)<<1|t>=v)&&(x=p[p.length-1],p[p.length-1]=p[p.length-1-b],p[p.length-1-b]=x)}else{var E=t-+this._x.call(null,m.data),T=e-+this._y.call(null,m.data),A=E*E+T*T;if(A<n){var C=Math.sqrt(n=A);i=t-C,s=e-C,u=t+C,f=e+C,r=m.data}}return r}function U3e(t){if(isNaN(u=+this._x.call(null,t))||isNaN(f=+this._y.call(null,t)))return this;var e,n=this._root,r,i,s,a=this._x0,o=this._y0,l=this._x1,c=this._y1,u,f,p,m,x,b,v,_;if(!n)return this;if(n.length)for(;;){if((x=u>=(p=(a+l)/2))?a=p:l=p,(b=f>=(m=(o+c)/2))?o=m:c=m,e=n,!(n=n[v=b<<1|x]))return this;if(!n.length)break;(e[v+1&3]||e[v+2&3]||e[v+3&3])&&(r=e,_=v)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):e?(s?e[v]=s:delete e[v],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[_]=n:this._root=n),this):(this._root=s,this)}function j3e(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function z3e(){return this._root}function $3e(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function G3e(t){var e=[],n,r=this._root,i,s,a,o,l;for(r&&e.push(new xa(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,s=n.x0,a=n.y0,o=n.x1,l=n.y1)&&r.length){var c=(s+o)/2,u=(a+l)/2;(i=r[3])&&e.push(new xa(i,c,u,o,l)),(i=r[2])&&e.push(new xa(i,s,u,c,l)),(i=r[1])&&e.push(new xa(i,c,a,o,u)),(i=r[0])&&e.push(new xa(i,s,a,c,u))}return this}function V3e(t){var e=[],n=[],r;for(this._root&&e.push(new xa(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var s,a=r.x0,o=r.y0,l=r.x1,c=r.y1,u=(a+l)/2,f=(o+c)/2;(s=i[0])&&e.push(new xa(s,a,o,u,f)),(s=i[1])&&e.push(new xa(s,u,o,l,f)),(s=i[2])&&e.push(new xa(s,a,f,u,c)),(s=i[3])&&e.push(new xa(s,u,f,l,c))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function H3e(t){return t[0]}function W3e(t){return arguments.length?(this._x=t,this):this._x}function q3e(t){return t[1]}function X3e(t){return arguments.length?(this._y=t,this):this._y}function _Q(t,e,n){var r=new yB(e??H3e,n??q3e,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function yB(t,e,n,r,i,s){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function T9(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Ca=_Q.prototype=yB.prototype;Ca.copy=function(){var t=new yB(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=T9(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=T9(r));return t};Ca.add=D3e;Ca.addAll=L3e;Ca.cover=I3e;Ca.data=k3e;Ca.extent=B3e;Ca.find=F3e;Ca.remove=U3e;Ca.removeAll=j3e;Ca.root=z3e;Ca.size=$3e;Ca.visit=G3e;Ca.visitAfter=V3e;Ca.x=W3e;Ca.y=X3e;function Y3e(t){const e=+this._x.call(null,t),n=+this._y.call(null,t),r=+this._z.call(null,t);return SQ(this.cover(e,n,r),e,n,r,t)}function SQ(t,e,n,r,i){if(isNaN(e)||isNaN(n)||isNaN(r))return t;var s,a=t._root,o={data:i},l=t._x0,c=t._y0,u=t._z0,f=t._x1,p=t._y1,m=t._z1,x,b,v,_,E,T,A,C,M,P,D;if(!a)return t._root=o,t;for(;a.length;)if((A=e>=(x=(l+f)/2))?l=x:f=x,(C=n>=(b=(c+p)/2))?c=b:p=b,(M=r>=(v=(u+m)/2))?u=v:m=v,s=a,!(a=a[P=M<<2|C<<1|A]))return s[P]=o,t;if(_=+t._x.call(null,a.data),E=+t._y.call(null,a.data),T=+t._z.call(null,a.data),e===_&&n===E&&r===T)return o.next=a,s?s[P]=o:t._root=o,t;do s=s?s[P]=new Array(8):t._root=new Array(8),(A=e>=(x=(l+f)/2))?l=x:f=x,(C=n>=(b=(c+p)/2))?c=b:p=b,(M=r>=(v=(u+m)/2))?u=v:m=v;while((P=M<<2|C<<1|A)===(D=(T>=v)<<2|(E>=b)<<1|_>=x));return s[D]=a,s[P]=o,t}function K3e(t){Array.isArray(t)||(t=Array.from(t));const e=t.length,n=new Float64Array(e),r=new Float64Array(e),i=new Float64Array(e);let s=1/0,a=1/0,o=1/0,l=-1/0,c=-1/0,u=-1/0;for(let f=0,p,m,x,b;f<e;++f)isNaN(m=+this._x.call(null,p=t[f]))||isNaN(x=+this._y.call(null,p))||isNaN(b=+this._z.call(null,p))||(n[f]=m,r[f]=x,i[f]=b,m<s&&(s=m),m>l&&(l=m),x<a&&(a=x),x>c&&(c=x),b<o&&(o=b),b>u&&(u=b));if(s>l||a>c||o>u)return this;this.cover(s,a,o).cover(l,c,u);for(let f=0;f<e;++f)SQ(this,n[f],r[f],i[f],t[f]);return this}function Z3e(t,e,n){if(isNaN(t=+t)||isNaN(e=+e)||isNaN(n=+n))return this;var r=this._x0,i=this._y0,s=this._z0,a=this._x1,o=this._y1,l=this._z1;if(isNaN(r))a=(r=Math.floor(t))+1,o=(i=Math.floor(e))+1,l=(s=Math.floor(n))+1;else{for(var c=a-r||1,u=this._root,f,p;r>t||t>=a||i>e||e>=o||s>n||n>=l;)switch(p=(n<s)<<2|(e<i)<<1|t<r,f=new Array(8),f[p]=u,u=f,c*=2,p){case 0:a=r+c,o=i+c,l=s+c;break;case 1:r=a-c,o=i+c,l=s+c;break;case 2:a=r+c,i=o-c,l=s+c;break;case 3:r=a-c,i=o-c,l=s+c;break;case 4:a=r+c,o=i+c,s=l-c;break;case 5:r=a-c,o=i+c,s=l-c;break;case 6:a=r+c,i=o-c,s=l-c;break;case 7:r=a-c,i=o-c,s=l-c;break}this._root&&this._root.length&&(this._root=u)}return this._x0=r,this._y0=i,this._z0=s,this._x1=a,this._y1=o,this._z1=l,this}function Q3e(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function J3e(t){return arguments.length?this.cover(+t[0][0],+t[0][1],+t[0][2]).cover(+t[1][0],+t[1][1],+t[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function Cr(t,e,n,r,i,s,a){this.node=t,this.x0=e,this.y0=n,this.z0=r,this.x1=i,this.y1=s,this.z1=a}function ePe(t,e,n,r){var i,s=this._x0,a=this._y0,o=this._z0,l,c,u,f,p,m,x=this._x1,b=this._y1,v=this._z1,_=[],E=this._root,T,A;for(E&&_.push(new Cr(E,s,a,o,x,b,v)),r==null?r=1/0:(s=t-r,a=e-r,o=n-r,x=t+r,b=e+r,v=n+r,r*=r);T=_.pop();)if(!(!(E=T.node)||(l=T.x0)>x||(c=T.y0)>b||(u=T.z0)>v||(f=T.x1)<s||(p=T.y1)<a||(m=T.z1)<o))if(E.length){var C=(l+f)/2,M=(c+p)/2,P=(u+m)/2;_.push(new Cr(E[7],C,M,P,f,p,m),new Cr(E[6],l,M,P,C,p,m),new Cr(E[5],C,c,P,f,M,m),new Cr(E[4],l,c,P,C,M,m),new Cr(E[3],C,M,u,f,p,P),new Cr(E[2],l,M,u,C,p,P),new Cr(E[1],C,c,u,f,M,P),new Cr(E[0],l,c,u,C,M,P)),(A=(n>=P)<<2|(e>=M)<<1|t>=C)&&(T=_[_.length-1],_[_.length-1]=_[_.length-1-A],_[_.length-1-A]=T)}else{var D=t-+this._x.call(null,E.data),N=e-+this._y.call(null,E.data),L=n-+this._z.call(null,E.data),k=D*D+N*N+L*L;if(k<r){var I=Math.sqrt(r=k);s=t-I,a=e-I,o=n-I,x=t+I,b=e+I,v=n+I,i=E.data}}return i}const tPe=(t,e,n,r,i,s)=>Math.sqrt((t-r)**2+(e-i)**2+(n-s)**2);function nPe(t,e,n,r){const i=[],s=t-r,a=e-r,o=n-r,l=t+r,c=e+r,u=n+r;return this.visit((f,p,m,x,b,v,_)=>{if(!f.length)do{const E=f.data;tPe(t,e,n,this._x(E),this._y(E),this._z(E))<=r&&i.push(E)}while(f=f.next);return p>l||m>c||x>u||b<s||v<a||_<o}),i}function rPe(t){if(isNaN(p=+this._x.call(null,t))||isNaN(m=+this._y.call(null,t))||isNaN(x=+this._z.call(null,t)))return this;var e,n=this._root,r,i,s,a=this._x0,o=this._y0,l=this._z0,c=this._x1,u=this._y1,f=this._z1,p,m,x,b,v,_,E,T,A,C,M;if(!n)return this;if(n.length)for(;;){if((E=p>=(b=(a+c)/2))?a=b:c=b,(T=m>=(v=(o+u)/2))?o=v:u=v,(A=x>=(_=(l+f)/2))?l=_:f=_,e=n,!(n=n[C=A<<2|T<<1|E]))return this;if(!n.length)break;(e[C+1&7]||e[C+2&7]||e[C+3&7]||e[C+4&7]||e[C+5&7]||e[C+6&7]||e[C+7&7])&&(r=e,M=C)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):e?(s?e[C]=s:delete e[C],(n=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&n===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[M]=n:this._root=n),this):(this._root=s,this)}function iPe(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function sPe(){return this._root}function aPe(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function oPe(t){var e=[],n,r=this._root,i,s,a,o,l,c,u;for(r&&e.push(new Cr(r,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));n=e.pop();)if(!t(r=n.node,s=n.x0,a=n.y0,o=n.z0,l=n.x1,c=n.y1,u=n.z1)&&r.length){var f=(s+l)/2,p=(a+c)/2,m=(o+u)/2;(i=r[7])&&e.push(new Cr(i,f,p,m,l,c,u)),(i=r[6])&&e.push(new Cr(i,s,p,m,f,c,u)),(i=r[5])&&e.push(new Cr(i,f,a,m,l,p,u)),(i=r[4])&&e.push(new Cr(i,s,a,m,f,p,u)),(i=r[3])&&e.push(new Cr(i,f,p,o,l,c,m)),(i=r[2])&&e.push(new Cr(i,s,p,o,f,c,m)),(i=r[1])&&e.push(new Cr(i,f,a,o,l,p,m)),(i=r[0])&&e.push(new Cr(i,s,a,o,f,p,m))}return this}function lPe(t){var e=[],n=[],r;for(this._root&&e.push(new Cr(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=e.pop();){var i=r.node;if(i.length){var s,a=r.x0,o=r.y0,l=r.z0,c=r.x1,u=r.y1,f=r.z1,p=(a+c)/2,m=(o+u)/2,x=(l+f)/2;(s=i[0])&&e.push(new Cr(s,a,o,l,p,m,x)),(s=i[1])&&e.push(new Cr(s,p,o,l,c,m,x)),(s=i[2])&&e.push(new Cr(s,a,m,l,p,u,x)),(s=i[3])&&e.push(new Cr(s,p,m,l,c,u,x)),(s=i[4])&&e.push(new Cr(s,a,o,x,p,m,f)),(s=i[5])&&e.push(new Cr(s,p,o,x,c,m,f)),(s=i[6])&&e.push(new Cr(s,a,m,x,p,u,f)),(s=i[7])&&e.push(new Cr(s,p,m,x,c,u,f))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.z0,r.x1,r.y1,r.z1);return this}function cPe(t){return t[0]}function uPe(t){return arguments.length?(this._x=t,this):this._x}function dPe(t){return t[1]}function fPe(t){return arguments.length?(this._y=t,this):this._y}function hPe(t){return t[2]}function pPe(t){return arguments.length?(this._z=t,this):this._z}function wQ(t,e,n,r){var i=new vB(e??cPe,n??dPe,r??hPe,NaN,NaN,NaN,NaN,NaN,NaN);return t==null?i:i.addAll(t)}function vB(t,e,n,r,i,s,a,o,l){this._x=t,this._y=e,this._z=n,this._x0=r,this._y0=i,this._z0=s,this._x1=a,this._y1=o,this._z1=l,this._root=void 0}function E9(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var js=wQ.prototype=vB.prototype;js.copy=function(){var t=new vB(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=E9(e),t;for(n=[{source:e,target:t._root=new Array(8)}];e=n.pop();)for(var i=0;i<8;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(8)}):e.target[i]=E9(r));return t};js.add=Y3e;js.addAll=K3e;js.cover=Z3e;js.data=Q3e;js.extent=J3e;js.find=ePe;js.findAllWithinRadius=nPe;js.remove=rPe;js.removeAll=iPe;js.root=sPe;js.size=aPe;js.visit=oPe;js.visitAfter=lPe;js.x=uPe;js.y=fPe;js.z=pPe;function Hu(t){return function(){return t}}function Du(t){return(t()-.5)*1e-6}function mPe(t){return t.index}function C9(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function gPe(t){var e=mPe,n=p,r,i=Hu(30),s,a,o,l,c,u,f=1;t==null&&(t=[]);function p(_){return 1/Math.min(l[_.source.index],l[_.target.index])}function m(_){for(var E=0,T=t.length;E<f;++E)for(var A=0,C,M,P,D=0,N=0,L=0,k,I;A<T;++A)C=t[A],M=C.source,P=C.target,D=P.x+P.vx-M.x-M.vx||Du(u),o>1&&(N=P.y+P.vy-M.y-M.vy||Du(u)),o>2&&(L=P.z+P.vz-M.z-M.vz||Du(u)),k=Math.sqrt(D*D+N*N+L*L),k=(k-s[A])/k*_*r[A],D*=k,N*=k,L*=k,P.vx-=D*(I=c[A]),o>1&&(P.vy-=N*I),o>2&&(P.vz-=L*I),M.vx+=D*(I=1-I),o>1&&(M.vy+=N*I),o>2&&(M.vz+=L*I)}function x(){if(a){var _,E=a.length,T=t.length,A=new Map(a.map((M,P)=>[e(M,P,a),M])),C;for(_=0,l=new Array(E);_<T;++_)C=t[_],C.index=_,typeof C.source!="object"&&(C.source=C9(A,C.source)),typeof C.target!="object"&&(C.target=C9(A,C.target)),l[C.source.index]=(l[C.source.index]||0)+1,l[C.target.index]=(l[C.target.index]||0)+1;for(_=0,c=new Array(T);_<T;++_)C=t[_],c[_]=l[C.source.index]/(l[C.source.index]+l[C.target.index]);r=new Array(T),b(),s=new Array(T),v()}}function b(){if(a)for(var _=0,E=t.length;_<E;++_)r[_]=+n(t[_],_,t)}function v(){if(a)for(var _=0,E=t.length;_<E;++_)s[_]=+i(t[_],_,t)}return m.initialize=function(_,...E){a=_,u=E.find(T=>typeof T=="function")||Math.random,o=E.find(T=>[1,2,3].includes(T))||2,x()},m.links=function(_){return arguments.length?(t=_,x(),m):t},m.id=function(_){return arguments.length?(e=_,m):e},m.iterations=function(_){return arguments.length?(f=+_,m):f},m.strength=function(_){return arguments.length?(n=typeof _=="function"?_:Hu(+_),b(),m):n},m.distance=function(_){return arguments.length?(i=typeof _=="function"?_:Hu(+_),v(),m):i},m}var xPe={value:()=>{}};function TQ(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new AT(n)}function AT(t){this._=t}function yPe(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}AT.prototype=TQ.prototype={constructor:AT,on:function(t,e){var n=this._,r=yPe(t+"",n),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(t=r[s]).type)&&(i=vPe(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(i=(t=r[s]).type)n[i]=A9(n[i],t.name,e);else if(e==null)for(i in n)n[i]=A9(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new AT(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function vPe(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function A9(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=xPe,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var B0=0,Cv=0,Wy=0,EQ=1e3,l2,Av,c2=0,Op=0,gC=0,kb=typeof performance=="object"&&performance.now?performance:Date,CQ=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function AQ(){return Op||(CQ(bPe),Op=kb.now()+gC)}function bPe(){Op=0}function FD(){this._call=this._time=this._next=null}FD.prototype=MQ.prototype={constructor:FD,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?AQ():+n)+(e==null?0:+e),!this._next&&Av!==this&&(Av?Av._next=this:l2=this,Av=this),this._call=t,this._time=n,UD()},stop:function(){this._call&&(this._call=null,this._time=1/0,UD())}};function MQ(t,e,n){var r=new FD;return r.restart(t,e,n),r}function _Pe(){AQ(),++B0;for(var t=l2,e;t;)(e=Op-t._time)>=0&&t._call.call(void 0,e),t=t._next;--B0}function M9(){Op=(c2=kb.now())+gC,B0=Cv=0;try{_Pe()}finally{B0=0,wPe(),Op=0}}function SPe(){var t=kb.now(),e=t-c2;e>EQ&&(gC-=e,c2=t)}function wPe(){for(var t,e=l2,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:l2=n);Av=t,UD(r)}function UD(t){if(!B0){Cv&&(Cv=clearTimeout(Cv));var e=t-Op;e>24?(t<1/0&&(Cv=setTimeout(M9,t-kb.now()-gC)),Wy&&(Wy=clearInterval(Wy))):(Wy||(c2=kb.now(),Wy=setInterval(SPe,EQ)),B0=1,CQ(M9))}}const TPe=1664525,EPe=1013904223,R9=4294967296;function CPe(){let t=1;return()=>(t=(TPe*t+EPe)%R9)/R9}var P9=3;function sP(t){return t.x}function N9(t){return t.y}function APe(t){return t.z}var MPe=10,RPe=Math.PI*(3-Math.sqrt(5)),PPe=Math.PI*20/(9+Math.sqrt(221));function NPe(t,e){e=e||2;var n=Math.min(P9,Math.max(1,Math.round(e))),r,i=1,s=.001,a=1-Math.pow(s,1/300),o=0,l=.6,c=new Map,u=MQ(m),f=TQ("tick","end"),p=CPe();t==null&&(t=[]);function m(){x(),f.call("tick",r),i<s&&(u.stop(),f.call("end",r))}function x(_){var E,T=t.length,A;_===void 0&&(_=1);for(var C=0;C<_;++C)for(i+=(o-i)*a,c.forEach(function(M){M(i)}),E=0;E<T;++E)A=t[E],A.fx==null?A.x+=A.vx*=l:(A.x=A.fx,A.vx=0),n>1&&(A.fy==null?A.y+=A.vy*=l:(A.y=A.fy,A.vy=0)),n>2&&(A.fz==null?A.z+=A.vz*=l:(A.z=A.fz,A.vz=0));return r}function b(){for(var _=0,E=t.length,T;_<E;++_){if(T=t[_],T.index=_,T.fx!=null&&(T.x=T.fx),T.fy!=null&&(T.y=T.fy),T.fz!=null&&(T.z=T.fz),isNaN(T.x)||n>1&&isNaN(T.y)||n>2&&isNaN(T.z)){var A=MPe*(n>2?Math.cbrt(.5+_):n>1?Math.sqrt(.5+_):_),C=_*RPe,M=_*PPe;n===1?T.x=A:n===2?(T.x=A*Math.cos(C),T.y=A*Math.sin(C)):(T.x=A*Math.sin(C)*Math.cos(M),T.y=A*Math.cos(C),T.z=A*Math.sin(C)*Math.sin(M))}(isNaN(T.vx)||n>1&&isNaN(T.vy)||n>2&&isNaN(T.vz))&&(T.vx=0,n>1&&(T.vy=0),n>2&&(T.vz=0))}}function v(_){return _.initialize&&_.initialize(t,p,n),_}return b(),r={tick:x,restart:function(){return u.restart(m),r},stop:function(){return u.stop(),r},numDimensions:function(_){return arguments.length?(n=Math.min(P9,Math.max(1,Math.round(_))),c.forEach(v),r):n},nodes:function(_){return arguments.length?(t=_,b(),c.forEach(v),r):t},alpha:function(_){return arguments.length?(i=+_,r):i},alphaMin:function(_){return arguments.length?(s=+_,r):s},alphaDecay:function(_){return arguments.length?(a=+_,r):+a},alphaTarget:function(_){return arguments.length?(o=+_,r):o},velocityDecay:function(_){return arguments.length?(l=1-_,r):1-l},randomSource:function(_){return arguments.length?(p=_,c.forEach(v),r):p},force:function(_,E){return arguments.length>1?(E==null?c.delete(_):c.set(_,v(E)),r):c.get(_)},find:function(){var _=Array.prototype.slice.call(arguments),E=_.shift()||0,T=(n>1?_.shift():null)||0,A=(n>2?_.shift():null)||0,C=_.shift()||1/0,M=0,P=t.length,D,N,L,k,I,F;for(C*=C,M=0;M<P;++M)I=t[M],D=E-I.x,N=T-(I.y||0),L=A-(I.z||0),k=D*D+N*N+L*L,k<C&&(F=I,C=k);return F},on:function(_,E){return arguments.length>1?(f.on(_,E),r):f.on(_)}}}function OPe(){var t,e,n,r,i,s=Hu(-30),a,o=1,l=1/0,c=.81;function u(x){var b,v=t.length,_=(e===1?vQ(t,sP):e===2?_Q(t,sP,N9):e===3?wQ(t,sP,N9,APe):null).visitAfter(p);for(i=x,b=0;b<v;++b)n=t[b],_.visit(m)}function f(){if(t){var x,b=t.length,v;for(a=new Array(b),x=0;x<b;++x)v=t[x],a[v.index]=+s(v,x,t)}}function p(x){var b=0,v,_,E=0,T,A,C,M,P=x.length;if(P){for(T=A=C=M=0;M<P;++M)(v=x[M])&&(_=Math.abs(v.value))&&(b+=v.value,E+=_,T+=_*(v.x||0),A+=_*(v.y||0),C+=_*(v.z||0));b*=Math.sqrt(4/P),x.x=T/E,e>1&&(x.y=A/E),e>2&&(x.z=C/E)}else{v=x,v.x=v.data.x,e>1&&(v.y=v.data.y),e>2&&(v.z=v.data.z);do b+=a[v.data.index];while(v=v.next)}x.value=b}function m(x,b,v,_,E){if(!x.value)return!0;var T=[v,_,E][e-1],A=x.x-n.x,C=e>1?x.y-n.y:0,M=e>2?x.z-n.z:0,P=T-b,D=A*A+C*C+M*M;if(P*P/c<D)return D<l&&(A===0&&(A=Du(r),D+=A*A),e>1&&C===0&&(C=Du(r),D+=C*C),e>2&&M===0&&(M=Du(r),D+=M*M),D<o&&(D=Math.sqrt(o*D)),n.vx+=A*x.value*i/D,e>1&&(n.vy+=C*x.value*i/D),e>2&&(n.vz+=M*x.value*i/D)),!0;if(x.length||D>=l)return;(x.data!==n||x.next)&&(A===0&&(A=Du(r),D+=A*A),e>1&&C===0&&(C=Du(r),D+=C*C),e>2&&M===0&&(M=Du(r),D+=M*M),D<o&&(D=Math.sqrt(o*D)));do x.data!==n&&(P=a[x.data.index]*i/D,n.vx+=A*P,e>1&&(n.vy+=C*P),e>2&&(n.vz+=M*P));while(x=x.next)}return u.initialize=function(x,...b){t=x,r=b.find(v=>typeof v=="function")||Math.random,e=b.find(v=>[1,2,3].includes(v))||2,f()},u.strength=function(x){return arguments.length?(s=typeof x=="function"?x:Hu(+x),f(),u):s},u.distanceMin=function(x){return arguments.length?(o=x*x,u):Math.sqrt(o)},u.distanceMax=function(x){return arguments.length?(l=x*x,u):Math.sqrt(l)},u.theta=function(x){return arguments.length?(c=x*x,u):Math.sqrt(c)},u}function DPe(t,e,n,r){var i,s,a=Hu(.1),o,l;typeof t!="function"&&(t=Hu(+t)),e==null&&(e=0),n==null&&(n=0),r==null&&(r=0);function c(f){for(var p=0,m=i.length;p<m;++p){var x=i[p],b=x.x-e||1e-6,v=(x.y||0)-n||1e-6,_=(x.z||0)-r||1e-6,E=Math.sqrt(b*b+v*v+_*_),T=(l[p]-E)*o[p]*f/E;x.vx+=b*T,s>1&&(x.vy+=v*T),s>2&&(x.vz+=_*T)}}function u(){if(i){var f,p=i.length;for(o=new Array(p),l=new Array(p),f=0;f<p;++f)l[f]=+t(i[f],f,i),o[f]=isNaN(l[f])?0:+a(i[f],f,i)}}return c.initialize=function(f,...p){i=f,s=p.find(m=>[1,2,3].includes(m))||2,u()},c.strength=function(f){return arguments.length?(a=typeof f=="function"?f:Hu(+f),u(),c):a},c.radius=function(f){return arguments.length?(t=typeof f=="function"?f:Hu(+f),u(),c):t},c.x=function(f){return arguments.length?(e=+f,c):e},c.y=function(f){return arguments.length?(n=+f,c):n},c.z=function(f){return arguments.length?(r=+f,c):r},c}function LPe(t){kPe(t);const e=IPe(t);return t.on=e.on,t.off=e.off,t.fire=e.fire,t}function IPe(t){let e=Object.create(null);return{on:function(n,r,i){if(typeof r!="function")throw new Error("callback is expected to be a function");let s=e[n];return s||(s=e[n]=[]),s.push({callback:r,ctx:i}),t},off:function(n,r){if(typeof n>"u")return e=Object.create(null),t;if(e[n])if(typeof r!="function")delete e[n];else{const a=e[n];for(let o=0;o<a.length;++o)a[o].callback===r&&a.splice(o,1)}return t},fire:function(n){const r=e[n];if(!r)return t;let i;arguments.length>1&&(i=Array.prototype.slice.call(arguments,1));for(let s=0;s<r.length;++s){const a=r[s];a.callback.apply(a.ctx,i)}return t}}}function kPe(t){if(!t)throw new Error("Eventify cannot use falsy object as events subject");const e=["on","fire","off"];for(let n=0;n<e.length;++n)if(t.hasOwnProperty(e[n]))throw new Error("Subject cannot be eventified, since it already has property '"+e[n]+"'")}function BPe(t){if(t=t||{},"uniqueLinkId"in t&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n",`
`,`Note: there is also change in default behavior: From now on each graph
is considered to be not a multigraph by default (each edge is unique).`),t.multigraph=t.uniqueLinkId),t.multigraph===void 0&&(t.multigraph=!1),typeof Map!="function")throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var e=new Map,n=new Map,r={},i=0,s=t.multigraph?A:T,a=[],o=j,l=j,c=j,u=j,f={version:20,addNode:b,addLink:E,removeLink:D,removeNode:_,getNode:v,getNodeCount:C,getLinkCount:M,getEdgeCount:M,getLinksCount:M,getNodesCount:C,getLinks:P,forEachNode:re,forEachLinkedNode:z,forEachLink:F,beginUpdate:c,endUpdate:u,clear:I,hasLink:L,hasNode:v,getLink:L,getLinkById:k};return LPe(f),p(),f;function p(){var $=f.on;f.on=ee;function ee(){return f.beginUpdate=c=G,f.endUpdate=u=W,o=m,l=x,f.on=$,$.apply(f,arguments)}}function m($,ee){a.push({link:$,changeType:ee})}function x($,ee){a.push({node:$,changeType:ee})}function b($,ee){if($===void 0)throw new Error("Invalid node identifier");c();var oe=v($);return oe?(oe.data=ee,l(oe,"update")):(oe=new FPe($,ee),l(oe,"add")),e.set($,oe),u(),oe}function v($){return e.get($)}function _($){var ee=v($);if(!ee)return!1;c();var oe=ee.links;return oe&&(oe.forEach(N),ee.links=null),e.delete($),l(ee,"remove"),u(),!0}function E($,ee,oe){c();var me=v($)||b($),te=v(ee)||b(ee),K=s($,ee,oe),ne=n.has(K.id);return n.set(K.id,K),O9(me,K),$!==ee&&O9(te,K),o(K,ne?"update":"add"),u(),K}function T($,ee,oe){var me=fw($,ee),te=n.get(me);return te?(te.data=oe,te):new D9($,ee,oe,me)}function A($,ee,oe){var me=fw($,ee),te=r.hasOwnProperty(me);if(te||L($,ee)){te||(r[me]=0);var K="@"+ ++r[me];me=fw($+K,ee+K)}return new D9($,ee,oe,me)}function C(){return e.size}function M(){return n.size}function P($){var ee=v($);return ee?ee.links:null}function D($,ee){return ee!==void 0&&($=L($,ee)),N($)}function N($){if(!$||!n.get($.id))return!1;c(),n.delete($.id);var ee=v($.fromId),oe=v($.toId);return ee&&ee.links.delete($),oe&&oe.links.delete($),o($,"remove"),u(),!0}function L($,ee){if(!($===void 0||ee===void 0))return n.get(fw($,ee))}function k($){if($!==void 0)return n.get($)}function I(){c(),re(function($){_($.id)}),u()}function F($){if(typeof $=="function")for(var ee=n.values(),oe=ee.next();!oe.done;){if($(oe.value))return!0;oe=ee.next()}}function z($,ee,oe){var me=v($);if(me&&me.links&&typeof ee=="function")return oe?B(me.links,$,ee):H(me.links,$,ee)}function H($,ee,oe){for(var me,te=$.values(),K=te.next();!K.done;){var ne=K.value,Ee=ne.fromId===ee?ne.toId:ne.fromId;if(me=oe(e.get(Ee),ne),me)return!0;K=te.next()}}function B($,ee,oe){for(var me,te=$.values(),K=te.next();!K.done;){var ne=K.value;if(ne.fromId===ee&&(me=oe(e.get(ne.toId),ne),me))return!0;K=te.next()}}function j(){}function G(){i+=1}function W(){i-=1,i===0&&a.length>0&&(f.fire("changed",a),a.length=0)}function re($){if(typeof $!="function")throw new Error("Function is expected to iterate over graph nodes. You passed "+$);for(var ee=e.values(),oe=ee.next();!oe.done;){if($(oe.value))return!0;oe=ee.next()}}}function FPe(t,e){this.id=t,this.links=null,this.data=e}function O9(t,e){t.links?t.links.add(e):t.links=new Set([e])}function D9(t,e,n,r){this.fromId=t,this.toId=e,this.data=n,this.id=r}function fw(t,e){return t.toString()+" "+e.toString()}var hw={exports:{}},rg={exports:{}},aP,L9;function RQ(){return L9||(L9=1,aP=function(e){return e===0?"x":e===1?"y":e===2?"z":"c"+(e+1)}),aP}var oP,I9;function _x(){if(I9)return oP;I9=1;const t=RQ();return oP=function(n){return r;function r(i,s){let a=s&&s.indent||0,o=s&&s.join!==void 0?s.join:`
`,l=Array(a+1).join(" "),c=[];for(let u=0;u<n;++u){let f=t(u),p=u===0?"":l;c.push(p+i.replace(/{var}/g,f))}return c.join(o)}},oP}var k9;function UPe(){if(k9)return rg.exports;k9=1;const t=_x();rg.exports=e,rg.exports.generateCreateBodyFunctionBody=n,rg.exports.getVectorCode=i,rg.exports.getBodyCode=r;function e(s,a){let o=n(s,a),{Body:l}=new Function(o)();return l}function n(s,a){return`
${i(s,a)}
${r(s)}
return {Body: Body, Vector: Vector};
`}function r(s){let a=t(s),o=a("{var}",{join:", "});return`
function Body(${o}) {
  this.isPinned = false;
  this.pos = new Vector(${o});
  this.force = new Vector();
  this.velocity = new Vector();
  this.mass = 1;

  this.springCount = 0;
  this.springLength = 0;
}

Body.prototype.reset = function() {
  this.force.reset();
  this.springCount = 0;
  this.springLength = 0;
}

Body.prototype.setPosition = function (${o}) {
  ${a("this.pos.{var} = {var} || 0;",{indent:2})}
};`}function i(s,a){let o=t(s),l="";return a&&(l=`${o(`
	   var v{var};
	Object.defineProperty(this, '{var}', {
	  set: function(v) { 
	    if (!Number.isFinite(v)) throw new Error('Cannot set non-numbers to {var}');
	    v{var} = v; 
	  },
	  get: function() { return v{var}; }
	});`)}`),`function Vector(${o("{var}",{join:", "})}) {
  ${l}
    if (typeof arguments[0] === 'object') {
      // could be another vector
      let v = arguments[0];
      ${o('if (!Number.isFinite(v.{var})) throw new Error("Expected value is not a finite number at Vector constructor ({var})");',{indent:4})}
      ${o("this.{var} = v.{var};",{indent:4})}
    } else {
      ${o('this.{var} = typeof {var} === "number" ? {var} : 0;',{indent:4})}
    }
  }
  
  Vector.prototype.reset = function () {
    ${o("this.{var} = ",{join:""})}0;
  };`}return rg.exports}var Cu={exports:{}},B9;function jPe(){if(B9)return Cu.exports;B9=1;const t=_x(),e=RQ();Cu.exports=n,Cu.exports.generateQuadTreeFunctionBody=r,Cu.exports.getInsertStackCode=l,Cu.exports.getQuadNodeCode=o,Cu.exports.isSamePosition=i,Cu.exports.getChildBodyCode=a,Cu.exports.setChildBodyCode=s;function n(c){let u=r(c);return new Function(u)()}function r(c){let u=t(c),f=Math.pow(2,c);return`
${l()}
${o(c)}
${i(c)}
${a(c)}
${s(c)}

function createQuadTree(options, random) {
  options = options || {};
  options.gravity = typeof options.gravity === 'number' ? options.gravity : -1;
  options.theta = typeof options.theta === 'number' ? options.theta : 0.8;

  var gravity = options.gravity;
  var updateQueue = [];
  var insertStack = new InsertStack();
  var theta = options.theta;

  var nodesCache = [];
  var currentInCache = 0;
  var root = newNode();

  return {
    insertBodies: insertBodies,

    /**
     * Gets root node if it is present
     */
    getRoot: function() {
      return root;
    },

    updateBodyForce: update,

    options: function(newOptions) {
      if (newOptions) {
        if (typeof newOptions.gravity === 'number') {
          gravity = newOptions.gravity;
        }
        if (typeof newOptions.theta === 'number') {
          theta = newOptions.theta;
        }

        return this;
      }

      return {
        gravity: gravity,
        theta: theta
      };
    }
  };

  function newNode() {
    // To avoid pressure on GC we reuse nodes.
    var node = nodesCache[currentInCache];
    if (node) {
${b("      node.")}
      node.body = null;
      node.mass = ${u("node.mass_{var} = ",{join:""})}0;
      ${u("node.min_{var} = node.max_{var} = ",{join:""})}0;
    } else {
      node = new QuadNode();
      nodesCache[currentInCache] = node;
    }

    ++currentInCache;
    return node;
  }

  function update(sourceBody) {
    var queue = updateQueue;
    var v;
    ${u("var d{var};",{indent:4})}
    var r; 
    ${u("var f{var} = 0;",{indent:4})}
    var queueLength = 1;
    var shiftIdx = 0;
    var pushIdx = 1;

    queue[0] = root;

    while (queueLength) {
      var node = queue[shiftIdx];
      var body = node.body;

      queueLength -= 1;
      shiftIdx += 1;
      var differentBody = (body !== sourceBody);
      if (body && differentBody) {
        // If the current node is a leaf node (and it is not source body),
        // calculate the force exerted by the current node on body, and add this
        // amount to body's net force.
        ${u("d{var} = body.pos.{var} - sourceBody.pos.{var};",{indent:8})}
        r = Math.sqrt(${u("d{var} * d{var}",{join:" + "})});

        if (r === 0) {
          // Poor man's protection against zero distance.
          ${u("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}
          r = Math.sqrt(${u("d{var} * d{var}",{join:" + "})});
        }

        // This is standard gravitation force calculation but we divide
        // by r^3 to save two operations when normalizing force vector.
        v = gravity * body.mass * sourceBody.mass / (r * r * r);
        ${u("f{var} += v * d{var};",{indent:8})}
      } else if (differentBody) {
        // Otherwise, calculate the ratio s / r,  where s is the width of the region
        // represented by the internal node, and r is the distance between the body
        // and the node's center-of-mass
        ${u("d{var} = node.mass_{var} / node.mass - sourceBody.pos.{var};",{indent:8})}
        r = Math.sqrt(${u("d{var} * d{var}",{join:" + "})});

        if (r === 0) {
          // Sorry about code duplication. I don't want to create many functions
          // right away. Just want to see performance first.
          ${u("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}
          r = Math.sqrt(${u("d{var} * d{var}",{join:" + "})});
        }
        // If s / r < , treat this internal node as a single body, and calculate the
        // force it exerts on sourceBody, and add this amount to sourceBody's net force.
        if ((node.max_${e(0)} - node.min_${e(0)}) / r < theta) {
          // in the if statement above we consider node's width only
          // because the region was made into square during tree creation.
          // Thus there is no difference between using width or height.
          v = gravity * node.mass * sourceBody.mass / (r * r * r);
          ${u("f{var} += v * d{var};",{indent:10})}
        } else {
          // Otherwise, run the procedure recursively on each of the current node's children.

          // I intentionally unfolded this loop, to save several CPU cycles.
${x()}
        }
      }
    }

    ${u("sourceBody.force.{var} += f{var};",{indent:4})}
  }

  function insertBodies(bodies) {
    ${u("var {var}min = Number.MAX_VALUE;",{indent:4})}
    ${u("var {var}max = Number.MIN_VALUE;",{indent:4})}
    var i = bodies.length;

    // To reduce quad tree depth we are looking for exact bounding box of all particles.
    while (i--) {
      var pos = bodies[i].pos;
      ${u("if (pos.{var} < {var}min) {var}min = pos.{var};",{indent:6})}
      ${u("if (pos.{var} > {var}max) {var}max = pos.{var};",{indent:6})}
    }

    // Makes the bounds square.
    var maxSideLength = -Infinity;
    ${u("if ({var}max - {var}min > maxSideLength) maxSideLength = {var}max - {var}min ;",{indent:4})}

    currentInCache = 0;
    root = newNode();
    ${u("root.min_{var} = {var}min;",{indent:4})}
    ${u("root.max_{var} = {var}min + maxSideLength;",{indent:4})}

    i = bodies.length - 1;
    if (i >= 0) {
      root.body = bodies[i];
    }
    while (i--) {
      insert(bodies[i], root);
    }
  }

  function insert(newBody) {
    insertStack.reset();
    insertStack.push(root, newBody);

    while (!insertStack.isEmpty()) {
      var stackItem = insertStack.pop();
      var node = stackItem.node;
      var body = stackItem.body;

      if (!node.body) {
        // This is internal node. Update the total mass of the node and center-of-mass.
        ${u("var {var} = body.pos.{var};",{indent:8})}
        node.mass += body.mass;
        ${u("node.mass_{var} += body.mass * {var};",{indent:8})}

        // Recursively insert the body in the appropriate quadrant.
        // But first find the appropriate quadrant.
        var quadIdx = 0; // Assume we are in the 0's quad.
        ${u("var min_{var} = node.min_{var};",{indent:8})}
        ${u("var max_{var} = (min_{var} + node.max_{var}) / 2;",{indent:8})}

${m(8)}

        var child = getChild(node, quadIdx);

        if (!child) {
          // The node is internal but this quadrant is not taken. Add
          // subnode to it.
          child = newNode();
          ${u("child.min_{var} = min_{var};",{indent:10})}
          ${u("child.max_{var} = max_{var};",{indent:10})}
          child.body = body;

          setChild(node, quadIdx, child);
        } else {
          // continue searching in this quadrant.
          insertStack.push(child, body);
        }
      } else {
        // We are trying to add to the leaf node.
        // We have to convert current leaf into internal node
        // and continue adding two nodes.
        var oldBody = node.body;
        node.body = null; // internal nodes do not cary bodies

        if (isSamePosition(oldBody.pos, body.pos)) {
          // Prevent infinite subdivision by bumping one node
          // anywhere in this quadrant
          var retriesCount = 3;
          do {
            var offset = random.nextDouble();
            ${u("var d{var} = (node.max_{var} - node.min_{var}) * offset;",{indent:12})}

            ${u("oldBody.pos.{var} = node.min_{var} + d{var};",{indent:12})}
            retriesCount -= 1;
            // Make sure we don't bump it out of the box. If we do, next iteration should fix it
          } while (retriesCount > 0 && isSamePosition(oldBody.pos, body.pos));

          if (retriesCount === 0 && isSamePosition(oldBody.pos, body.pos)) {
            // This is very bad, we ran out of precision.
            // if we do not return from the method we'll get into
            // infinite loop here. So we sacrifice correctness of layout, and keep the app running
            // Next layout iteration should get larger bounding box in the first step and fix this
            return;
          }
        }
        // Next iteration should subdivide node further.
        insertStack.push(node, oldBody);
        insertStack.push(node, body);
      }
    }
  }
}
return createQuadTree;

`;function m(v){let _=[],E=Array(v+1).join(" ");for(let T=0;T<c;++T)_.push(E+`if (${e(T)} > max_${e(T)}) {`),_.push(E+`  quadIdx = quadIdx + ${Math.pow(2,T)};`),_.push(E+`  min_${e(T)} = max_${e(T)};`),_.push(E+`  max_${e(T)} = node.max_${e(T)};`),_.push(E+"}");return _.join(`
`)}function x(){let v=Array(11).join(" "),_=[];for(let E=0;E<f;++E)_.push(v+`if (node.quad${E}) {`),_.push(v+`  queue[pushIdx] = node.quad${E};`),_.push(v+"  queueLength += 1;"),_.push(v+"  pushIdx += 1;"),_.push(v+"}");return _.join(`
`)}function b(v){let _=[];for(let E=0;E<f;++E)_.push(`${v}quad${E} = null;`);return _.join(`
`)}}function i(c){let u=t(c);return`
  function isSamePosition(point1, point2) {
    ${u("var d{var} = Math.abs(point1.{var} - point2.{var});",{indent:2})}
  
    return ${u("d{var} < 1e-8",{join:" && "})};
  }  
`}function s(c){var u=Math.pow(2,c);return`
function setChild(node, idx, child) {
  ${f()}
}`;function f(){let p=[];for(let m=0;m<u;++m){let x=m===0?"  ":"  else ";p.push(`${x}if (idx === ${m}) node.quad${m} = child;`)}return p.join(`
`)}}function a(c){return`function getChild(node, idx) {
${u()}
  return null;
}`;function u(){let f=[],p=Math.pow(2,c);for(let m=0;m<p;++m)f.push(`  if (idx === ${m}) return node.quad${m};`);return f.join(`
`)}}function o(c){let u=t(c),f=Math.pow(2,c);var p=`
function QuadNode() {
  // body stored inside this node. In quad tree only leaf nodes (by construction)
  // contain bodies:
  this.body = null;

  // Child nodes are stored in quads. Each quad is presented by number:
  // 0 | 1
  // -----
  // 2 | 3
${m("  this.")}

  // Total mass of current node
  this.mass = 0;

  // Center of mass coordinates
  ${u("this.mass_{var} = 0;",{indent:2})}

  // bounding box coordinates
  ${u("this.min_{var} = 0;",{indent:2})}
  ${u("this.max_{var} = 0;",{indent:2})}
}
`;return p;function m(x){let b=[];for(let v=0;v<f;++v)b.push(`${x}quad${v} = null;`);return b.join(`
`)}}function l(){return`
/**
 * Our implementation of QuadTree is non-recursive to avoid GC hit
 * This data structure represent stack of elements
 * which we are trying to insert into quad tree.
 */
function InsertStack () {
    this.stack = [];
    this.popIdx = 0;
}

InsertStack.prototype = {
    isEmpty: function() {
        return this.popIdx === 0;
    },
    push: function (node, body) {
        var item = this.stack[this.popIdx];
        if (!item) {
            // we are trying to avoid memory pressure: create new element
            // only when absolutely necessary
            this.stack[this.popIdx] = new InsertStackElement(node, body);
        } else {
            item.node = node;
            item.body = body;
        }
        ++this.popIdx;
    },
    pop: function () {
        if (this.popIdx > 0) {
            return this.stack[--this.popIdx];
        }
    },
    reset: function () {
        this.popIdx = 0;
    }
};

function InsertStackElement(node, body) {
    this.node = node; // QuadTree node
    this.body = body; // physical body which needs to be inserted to node
}
`}return Cu.exports}var pw={exports:{}},F9;function zPe(){if(F9)return pw.exports;F9=1,pw.exports=e,pw.exports.generateFunctionBody=n;const t=_x();function e(r){let i=n(r);return new Function("bodies","settings","random",i)}function n(r){let i=t(r);return`
  var boundingBox = {
    ${i("min_{var}: 0, max_{var}: 0,",{indent:4})}
  };

  return {
    box: boundingBox,

    update: updateBoundingBox,

    reset: resetBoundingBox,

    getBestNewPosition: function (neighbors) {
      var ${i("base_{var} = 0",{join:", "})};

      if (neighbors.length) {
        for (var i = 0; i < neighbors.length; ++i) {
          let neighborPos = neighbors[i].pos;
          ${i("base_{var} += neighborPos.{var};",{indent:10})}
        }

        ${i("base_{var} /= neighbors.length;",{indent:8})}
      } else {
        ${i("base_{var} = (boundingBox.min_{var} + boundingBox.max_{var}) / 2;",{indent:8})}
      }

      var springLength = settings.springLength;
      return {
        ${i("{var}: base_{var} + (random.nextDouble() - 0.5) * springLength,",{indent:8})}
      };
    }
  };

  function updateBoundingBox() {
    var i = bodies.length;
    if (i === 0) return; // No bodies - no borders.

    ${i("var max_{var} = -Infinity;",{indent:4})}
    ${i("var min_{var} = Infinity;",{indent:4})}

    while(i--) {
      // this is O(n), it could be done faster with quadtree, if we check the root node bounds
      var bodyPos = bodies[i].pos;
      ${i("if (bodyPos.{var} < min_{var}) min_{var} = bodyPos.{var};",{indent:6})}
      ${i("if (bodyPos.{var} > max_{var}) max_{var} = bodyPos.{var};",{indent:6})}
    }

    ${i("boundingBox.min_{var} = min_{var};",{indent:4})}
    ${i("boundingBox.max_{var} = max_{var};",{indent:4})}
  }

  function resetBoundingBox() {
    ${i("boundingBox.min_{var} = boundingBox.max_{var} = 0;",{indent:4})}
  }
`}return pw.exports}var mw={exports:{}},U9;function $Pe(){if(U9)return mw.exports;U9=1;const t=_x();mw.exports=e,mw.exports.generateCreateDragForceFunctionBody=n;function e(r){let i=n(r);return new Function("options",i)}function n(r){return`
  if (!Number.isFinite(options.dragCoefficient)) throw new Error('dragCoefficient is not a finite number');

  return {
    update: function(body) {
      ${t(r)("body.force.{var} -= options.dragCoefficient * body.velocity.{var};",{indent:6})}
    }
  };
`}return mw.exports}var gw={exports:{}},j9;function GPe(){if(j9)return gw.exports;j9=1;const t=_x();gw.exports=e,gw.exports.generateCreateSpringForceFunctionBody=n;function e(r){let i=n(r);return new Function("options","random",i)}function n(r){let i=t(r);return`
  if (!Number.isFinite(options.springCoefficient)) throw new Error('Spring coefficient is not a number');
  if (!Number.isFinite(options.springLength)) throw new Error('Spring length is not a number');

  return {
    /**
     * Updates forces acting on a spring
     */
    update: function (spring) {
      var body1 = spring.from;
      var body2 = spring.to;
      var length = spring.length < 0 ? options.springLength : spring.length;
      ${i("var d{var} = body2.pos.{var} - body1.pos.{var};",{indent:6})}
      var r = Math.sqrt(${i("d{var} * d{var}",{join:" + "})});

      if (r === 0) {
        ${i("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:8})}
        r = Math.sqrt(${i("d{var} * d{var}",{join:" + "})});
      }

      var d = r - length;
      var coefficient = ((spring.coefficient > 0) ? spring.coefficient : options.springCoefficient) * d / r;

      ${i("body1.force.{var} += coefficient * d{var}",{indent:6})};
      body1.springCount += 1;
      body1.springLength += r;

      ${i("body2.force.{var} -= coefficient * d{var}",{indent:6})};
      body2.springCount += 1;
      body2.springLength += r;
    }
  };
`}return gw.exports}var xw={exports:{}},z9;function VPe(){if(z9)return xw.exports;z9=1;const t=_x();xw.exports=e,xw.exports.generateIntegratorFunctionBody=n;function e(r){let i=n(r);return new Function("bodies","timeStep","adaptiveTimeStepWeight",i)}function n(r){let i=t(r);return`
  var length = bodies.length;
  if (length === 0) return 0;

  ${i("var d{var} = 0, t{var} = 0;",{indent:2})}

  for (var i = 0; i < length; ++i) {
    var body = bodies[i];
    if (body.isPinned) continue;

    if (adaptiveTimeStepWeight && body.springCount) {
      timeStep = (adaptiveTimeStepWeight * body.springLength/body.springCount);
    }

    var coeff = timeStep / body.mass;

    ${i("body.velocity.{var} += coeff * body.force.{var};",{indent:4})}
    ${i("var v{var} = body.velocity.{var};",{indent:4})}
    var v = Math.sqrt(${i("v{var} * v{var}",{join:" + "})});

    if (v > 1) {
      // We normalize it so that we move within timeStep range. 
      // for the case when v <= 1 - we let velocity to fade out.
      ${i("body.velocity.{var} = v{var} / v;",{indent:6})}
    }

    ${i("d{var} = timeStep * body.velocity.{var};",{indent:4})}

    ${i("body.pos.{var} += d{var};",{indent:4})}

    ${i("t{var} += Math.abs(d{var});",{indent:4})}
  }

  return (${i("t{var} * t{var}",{join:" + "})})/length;
`}return xw.exports}var lP,$9;function HPe(){if($9)return lP;$9=1,lP=t;function t(e,n,r,i){this.from=e,this.to=n,this.length=r,this.coefficient=i}return lP}var cP,G9;function WPe(){if(G9)return cP;G9=1,cP=t;function t(e,n){var r;if(e||(e={}),n){for(r in n)if(n.hasOwnProperty(r)){var i=e.hasOwnProperty(r),s=typeof n[r],a=!i||typeof e[r]!==s;a?e[r]=n[r]:s==="object"&&(e[r]=t(e[r],n[r]))}}return e}return cP}var uP,V9;function PQ(){if(V9)return uP;V9=1;function t(r){n(r);const i=e(r);return r.on=i.on,r.off=i.off,r.fire=i.fire,r}function e(r){let i=Object.create(null);return{on:function(s,a,o){if(typeof a!="function")throw new Error("callback is expected to be a function");let l=i[s];return l||(l=i[s]=[]),l.push({callback:a,ctx:o}),r},off:function(s,a){if(typeof s>"u")return i=Object.create(null),r;if(i[s])if(typeof a!="function")delete i[s];else{const o=i[s];for(let l=0;l<o.length;++l)o[l].callback===a&&o.splice(l,1)}return r},fire:function(s){const a=i[s];if(!a)return r;let o;arguments.length>1&&(o=Array.prototype.slice.call(arguments,1));for(let l=0;l<a.length;++l){const c=a[l];c.callback.apply(c.ctx,o)}return r}}}function n(r){if(!r)throw new Error("Eventify cannot use falsy object as events subject");const i=["on","fire","off"];for(let s=0;s<i.length;++s)if(r.hasOwnProperty(i[s]))throw new Error("Subject cannot be eventified, since it already has property '"+i[s]+"'")}return uP=t,uP}var qy={exports:{}},H9;function qPe(){if(H9)return qy.exports;H9=1,qy.exports=t,qy.exports.random=t,qy.exports.randomIterator=o;function t(l){var c=typeof l=="number"?l:+new Date;return new e(c)}function e(l){this.seed=l}e.prototype.next=a,e.prototype.nextDouble=s,e.prototype.uniform=s,e.prototype.gaussian=n,e.prototype.random=s;function n(){var l,c,u;do c=this.nextDouble()*2-1,u=this.nextDouble()*2-1,l=c*c+u*u;while(l>=1||l===0);return c*Math.sqrt(-2*Math.log(l)/l)}e.prototype.levy=r;function r(){var l=1.5,c=Math.pow(i(1+l)*Math.sin(Math.PI*l/2)/(i((1+l)/2)*l*Math.pow(2,(l-1)/2)),1/l);return this.gaussian()*c/Math.pow(Math.abs(this.gaussian()),1/l)}function i(l){return Math.sqrt(2*Math.PI/l)*Math.pow(1/Math.E*(l+1/(12*l-1/(10*l))),l)}function s(){var l=this.seed;return l=l+2127912214+(l<<12)&4294967295,l=(l^3345072700^l>>>19)&4294967295,l=l+374761393+(l<<5)&4294967295,l=(l+3550635116^l<<9)&4294967295,l=l+4251993797+(l<<3)&4294967295,l=(l^3042594569^l>>>16)&4294967295,this.seed=l,(l&268435455)/268435456}function a(l){return Math.floor(this.nextDouble()*l)}function o(l,c){var u=c||t();if(typeof u.next!="function")throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:p,shuffle:f};function f(){var m,x,b;for(m=l.length-1;m>0;--m)x=u.next(m+1),b=l[x],l[x]=l[m],l[m]=b;return l}function p(m){var x,b,v;for(x=l.length-1;x>0;--x)b=u.next(x+1),v=l[b],l[b]=l[x],l[x]=v,m(v);l.length&&m(l[0])}}return qy.exports}var dP,W9;function q9(){if(W9)return dP;W9=1,dP=o;var t=UPe(),e=jPe(),n=zPe(),r=$Pe(),i=GPe(),s=VPe(),a={};function o(u){var f=HPe(),p=WPe(),m=PQ();if(u){if(u.springCoeff!==void 0)throw new Error("springCoeff was renamed to springCoefficient");if(u.dragCoeff!==void 0)throw new Error("dragCoeff was renamed to dragCoefficient")}u=p(u,{springLength:10,springCoefficient:.8,gravity:-12,theta:.8,dragCoefficient:.9,timeStep:.5,adaptiveTimeStepWeight:0,dimensions:2,debug:!1});var x=a[u.dimensions];if(!x){var b=u.dimensions;x={Body:t(b,u.debug),createQuadTree:e(b),createBounds:n(b),createDragForce:r(b),createSpringForce:i(b),integrate:s(b)},a[b]=x}var v=x.Body,_=x.createQuadTree,E=x.createBounds,T=x.createDragForce,A=x.createSpringForce,C=x.integrate,M=te=>new v(te),P=qPe().random(42),D=[],N=[],L=_(u,P),k=E(D,u,P),I=A(u,P),F=T(u),z=0,H=[],B=new Map,j=0;re("nbody",oe),re("spring",me);var G={bodies:D,quadTree:L,springs:N,settings:u,addForce:re,removeForce:$,getForces:ee,step:function(){for(var te=0;te<H.length;++te)H[te](j);var K=C(D,u.timeStep,u.adaptiveTimeStepWeight);return j+=1,K},addBody:function(te){if(!te)throw new Error("Body is required");return D.push(te),te},addBodyAt:function(te){if(!te)throw new Error("Body position is required");var K=M(te);return D.push(K),K},removeBody:function(te){if(te){var K=D.indexOf(te);if(!(K<0))return D.splice(K,1),D.length===0&&k.reset(),!0}},addSpring:function(te,K,ne,Ee){if(!te||!K)throw new Error("Cannot add null spring to force simulator");typeof ne!="number"&&(ne=-1);var se=new f(te,K,ne,Ee>=0?Ee:-1);return N.push(se),se},getTotalMovement:function(){return z},removeSpring:function(te){if(te){var K=N.indexOf(te);if(K>-1)return N.splice(K,1),!0}},getBestNewBodyPosition:function(te){return k.getBestNewPosition(te)},getBBox:W,getBoundingBox:W,invalidateBBox:function(){console.warn("invalidateBBox() is deprecated, bounds always recomputed on `getBBox()` call")},gravity:function(te){return te!==void 0?(u.gravity=te,L.options({gravity:te}),this):u.gravity},theta:function(te){return te!==void 0?(u.theta=te,L.options({theta:te}),this):u.theta},random:P};return l(u,G),m(G),G;function W(){return k.update(),k.box}function re(te,K){if(B.has(te))throw new Error("Force "+te+" is already added");B.set(te,K),H.push(K)}function $(te){var K=H.indexOf(B.get(te));K<0||(H.splice(K,1),B.delete(te))}function ee(){return B}function oe(){if(D.length!==0){L.insertBodies(D);for(var te=D.length;te--;){var K=D[te];K.isPinned||(K.reset(),L.updateBodyForce(K),F.update(K))}}}function me(){for(var te=N.length;te--;)I.update(N[te])}}function l(u,f){for(var p in u)c(u,f,p)}function c(u,f,p){if(u.hasOwnProperty(p)&&typeof f[p]!="function"){var m=Number.isFinite(u[p]);m?f[p]=function(x){if(x!==void 0){if(!Number.isFinite(x))throw new Error("Value of "+p+" should be a valid number.");return u[p]=x,f}return u[p]}:f[p]=function(x){return x!==void 0?(u[p]=x,f):u[p]}}}return dP}var X9;function XPe(){if(X9)return hw.exports;X9=1,hw.exports=e,hw.exports.simulator=q9();var t=PQ();function e(r,i){if(!r)throw new Error("Graph structure cannot be undefined");var s=i&&i.createSimulator||q9(),a=s(i);if(Array.isArray(i))throw new Error("Physics settings is expected to be an object");var o=r.version>19?B:H;i&&typeof i.nodeMass=="function"&&(o=i.nodeMass);var l=new Map,c={},u=0,f=a.settings.springTransform||n;M(),T();var p=!1,m={step:function(){if(u===0)return x(!0),!0;var j=a.step();m.lastMove=j,m.fire("step");var G=j/u,W=G<=.01;return x(W),W},getNodePosition:function(j){return z(j).pos},setNodePosition:function(j){var G=z(j);G.setPosition.apply(G,Array.prototype.slice.call(arguments,1))},getLinkPosition:function(j){var G=c[j];if(G)return{from:G.from.pos,to:G.to.pos}},getGraphRect:function(){return a.getBBox()},forEachBody:b,pinNode:function(j,G){var W=z(j.id);W.isPinned=!!G},isNodePinned:function(j){return z(j.id).isPinned},dispose:function(){r.off("changed",C),m.fire("disposed")},getBody:E,getSpring:_,getForceVectorLength:v,simulator:a,graph:r,lastMove:0};return t(m),m;function x(j){p!==j&&(p=j,A(j))}function b(j){l.forEach(j)}function v(){var j=0,G=0;return b(function(W){j+=Math.abs(W.force.x),G+=Math.abs(W.force.y)}),Math.sqrt(j*j+G*G)}function _(j,G){var W;if(G===void 0)typeof j!="object"?W=j:W=j.id;else{var re=r.hasLink(j,G);if(!re)return;W=re.id}return c[W]}function E(j){return l.get(j)}function T(){r.on("changed",C)}function A(j){m.fire("stable",j)}function C(j){for(var G=0;G<j.length;++G){var W=j[G];W.changeType==="add"?(W.node&&P(W.node.id),W.link&&N(W.link)):W.changeType==="remove"&&(W.node&&D(W.node),W.link&&L(W.link))}u=r.getNodesCount()}function M(){u=0,r.forEachNode(function(j){P(j.id),u+=1}),r.forEachLink(N)}function P(j){var G=l.get(j);if(!G){var W=r.getNode(j);if(!W)throw new Error("initBody() was called with unknown node id");var re=W.position;if(!re){var $=k(W);re=a.getBestNewBodyPosition($)}G=a.addBodyAt(re),G.id=j,l.set(j,G),I(j),F(W)&&(G.isPinned=!0)}}function D(j){var G=j.id,W=l.get(G);W&&(l.delete(G),a.removeBody(W))}function N(j){I(j.fromId),I(j.toId);var G=l.get(j.fromId),W=l.get(j.toId),re=a.addSpring(G,W,j.length);f(j,re),c[j.id]=re}function L(j){var G=c[j.id];if(G){var W=r.getNode(j.fromId),re=r.getNode(j.toId);W&&I(W.id),re&&I(re.id),delete c[j.id],a.removeSpring(G)}}function k(j){var G=[];if(!j.links)return G;for(var W=Math.min(j.links.length,2),re=0;re<W;++re){var $=j.links[re],ee=$.fromId!==j.id?l.get($.fromId):l.get($.toId);ee&&ee.pos&&G.push(ee)}return G}function I(j){var G=l.get(j);if(G.mass=o(j),Number.isNaN(G.mass))throw new Error("Node mass should be a number")}function F(j){return j&&(j.isPinned||j.data&&j.data.isPinned)}function z(j){var G=l.get(j);return G||(P(j),G=l.get(j)),G}function H(j){var G=r.getLinks(j);return G?1+G.length/3:1}function B(j){var G=r.getLinks(j);return G?1+G.size/3:1}}function n(){}return hw.exports}var YPe=XPe();const KPe=Ea(YPe);function jD(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var ZPe=typeof global=="object"&&global&&global.Object===Object&&global,QPe=typeof self=="object"&&self&&self.Object===Object&&self,NQ=ZPe||QPe||Function("return this")(),fP=function(){return NQ.Date.now()},JPe=/\s/;function eNe(t){for(var e=t.length;e--&&JPe.test(t.charAt(e)););return e}var tNe=/^\s+/;function nNe(t){return t&&t.slice(0,eNe(t)+1).replace(tNe,"")}var u2=NQ.Symbol,OQ=Object.prototype,rNe=OQ.hasOwnProperty,iNe=OQ.toString,Xy=u2?u2.toStringTag:void 0;function sNe(t){var e=rNe.call(t,Xy),n=t[Xy];try{t[Xy]=void 0;var r=!0}catch{}var i=iNe.call(t);return r&&(e?t[Xy]=n:delete t[Xy]),i}var aNe=Object.prototype,oNe=aNe.toString;function lNe(t){return oNe.call(t)}var cNe="[object Null]",uNe="[object Undefined]",Y9=u2?u2.toStringTag:void 0;function dNe(t){return t==null?t===void 0?uNe:cNe:Y9&&Y9 in Object(t)?sNe(t):lNe(t)}function fNe(t){return t!=null&&typeof t=="object"}var hNe="[object Symbol]";function pNe(t){return typeof t=="symbol"||fNe(t)&&dNe(t)==hNe}var K9=NaN,mNe=/^[-+]0x[0-9a-f]+$/i,gNe=/^0b[01]+$/i,xNe=/^0o[0-7]+$/i,yNe=parseInt;function Z9(t){if(typeof t=="number")return t;if(pNe(t))return K9;if(jD(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=jD(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=nNe(t);var n=gNe.test(t);return n||xNe.test(t)?yNe(t.slice(2),n?2:8):mNe.test(t)?K9:+t}var vNe="Expected a function",bNe=Math.max,_Ne=Math.min;function SNe(t,e,n){var r,i,s,a,o,l,c=0,u=!1,f=!1,p=!0;if(typeof t!="function")throw new TypeError(vNe);e=Z9(e)||0,jD(n)&&(u=!!n.leading,f="maxWait"in n,s=f?bNe(Z9(n.maxWait)||0,e):s,p="trailing"in n?!!n.trailing:p);function m(M){var P=r,D=i;return r=i=void 0,c=M,a=t.apply(D,P),a}function x(M){return c=M,o=setTimeout(_,e),u?m(M):a}function b(M){var P=M-l,D=M-c,N=e-P;return f?_Ne(N,s-D):N}function v(M){var P=M-l,D=M-c;return l===void 0||P>=e||P<0||f&&D>=s}function _(){var M=fP();if(v(M))return E(M);o=setTimeout(_,b(M))}function E(M){return o=void 0,p&&r?m(M):(r=i=void 0,a)}function T(){o!==void 0&&clearTimeout(o),c=0,r=l=i=o=void 0}function A(){return o===void 0?a:E(fP())}function C(){var M=fP(),P=v(M);if(r=arguments,i=this,l=M,P){if(o===void 0)return x(l);if(f)return clearTimeout(o),o=setTimeout(_,e),m(l)}return o===void 0&&(o=setTimeout(_,e)),a}return C.cancel=T,C.flush=A,C}function Q9(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function wNe(t){if(Array.isArray(t))return t}function TNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ENe(t,e,n){return Object.defineProperty(t,"prototype",{writable:!1}),t}function CNe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function ANe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MNe(t,e){return wNe(t)||CNe(t,e)||RNe(t,e)||ANe()}function RNe(t,e){if(t){if(typeof t=="string")return Q9(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q9(t,e):void 0}}var PNe=ENe(function t(e,n){var r=n.default,i=r===void 0?null:r,s=n.triggerUpdate,a=s===void 0?!0:s,o=n.onChange,l=o===void 0?function(c,u){}:o;TNe(this,t),this.name=e,this.defaultVal=i,this.triggerUpdate=a,this.onChange=l});function xC(t){var e=t.stateInit,n=e===void 0?function(){return{}}:e,r=t.props,i=r===void 0?{}:r,s=t.methods,a=s===void 0?{}:s,o=t.aliases,l=o===void 0?{}:o,c=t.init,u=c===void 0?function(){}:c,f=t.update,p=f===void 0?function(){}:f,m=Object.keys(i).map(function(x){return new PNe(x,i[x])});return function x(){for(var b=arguments.length,v=new Array(b),_=0;_<b;_++)v[_]=arguments[_];var E=!!(this instanceof x&&this.constructor),T=E?v.shift():void 0,A=v[0],C=A===void 0?{}:A,M=Object.assign({},n instanceof Function?n(C):n,{initialised:!1}),P={};function D(k){return N(k,C),L(),D}var N=function(I,F){u.call(D,I,M,F),M.initialised=!0},L=SNe(function(){M.initialised&&(p.call(D,M,P),P={})},1);return m.forEach(function(k){D[k.name]=I(k);function I(F){var z=F.name,H=F.triggerUpdate,B=H===void 0?!1:H,j=F.onChange,G=j===void 0?function($,ee){}:j,W=F.defaultVal,re=W===void 0?null:W;return function($){var ee=M[z];if(!arguments.length)return ee;var oe=$===void 0?re:$;return M[z]=oe,G.call(D,oe,M,ee),!P.hasOwnProperty(z)&&(P[z]=ee),B&&L(),D}}}),Object.keys(a).forEach(function(k){D[k]=function(){for(var I,F=arguments.length,z=new Array(F),H=0;H<F;H++)z[H]=arguments[H];return(I=a[k]).call.apply(I,[D,M].concat(z))}}),Object.entries(l).forEach(function(k){var I=MNe(k,2),F=I[0],z=I[1];return D[F]=D[z]}),D.resetProps=function(){return m.forEach(function(k){D[k.name](k.defaultVal)}),D},D.resetProps(),M._rerender=L,E&&T&&D(T),D}}var Dn=(function(t){return typeof t=="function"?t:typeof t=="string"?function(e){return e[t]}:function(e){return t}});function Of(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function NNe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function bB(t){let e,n,r;t.length!==2?(e=Of,n=(o,l)=>Of(t(o),l),r=(o,l)=>t(o)-l):(e=t===Of||t===NNe?t:ONe,n=t,r=t);function i(o,l,c=0,u=o.length){if(c<u){if(e(l,l)!==0)return u;do{const f=c+u>>>1;n(o[f],l)<0?c=f+1:u=f}while(c<u)}return c}function s(o,l,c=0,u=o.length){if(c<u){if(e(l,l)!==0)return u;do{const f=c+u>>>1;n(o[f],l)<=0?c=f+1:u=f}while(c<u)}return c}function a(o,l,c=0,u=o.length){const f=i(o,l,c,u-1);return f>c&&r(o[f-1],l)>-r(o[f],l)?f-1:f}return{left:i,center:a,right:s}}function ONe(){return 0}function DQ(t){return t===null?NaN:+t}function*DNe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const LNe=bB(Of),L_=LNe.right;bB(DQ).center;class J9 extends Map{constructor(e,n=BNe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(eG(this,e))}has(e){return super.has(eG(this,e))}set(e,n){return super.set(INe(this,e),n)}delete(e){return super.delete(kNe(this,e))}}function eG({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function INe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function kNe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function BNe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function FNe(t=Of){if(t===Of)return LQ;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function LQ(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const UNe=Math.sqrt(50),jNe=Math.sqrt(10),zNe=Math.sqrt(2);function d2(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=UNe?10:s>=jNe?5:s>=zNe?2:1;let o,l,c;return i<0?(c=Math.pow(10,-i)/a,o=Math.round(t*c),l=Math.round(e*c),o/c<t&&++o,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*a,o=Math.round(t/c),l=Math.round(e/c),o*c<t&&++o,l*c>e&&--l),l<o&&.5<=n&&n<2?d2(t,e,n*2):[o,l,c]}function zD(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,a]=r?d2(e,t,n):d2(t,e,n);if(!(s>=i))return[];const o=s-i+1,l=new Array(o);if(r)if(a<0)for(let c=0;c<o;++c)l[c]=(s-c)/-a;else for(let c=0;c<o;++c)l[c]=(s-c)*a;else if(a<0)for(let c=0;c<o;++c)l[c]=(i+c)/-a;else for(let c=0;c<o;++c)l[c]=(i+c)*a;return l}function $D(t,e,n){return e=+e,t=+t,n=+n,d2(t,e,n)[2]}function GD(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?$D(e,t,n):$D(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function VD(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function HD(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function IQ(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?LQ:FNe(i);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,u=Math.log(l),f=.5*Math.exp(2*u/3),p=.5*Math.sqrt(u*f*(l-f)/l)*(c-l/2<0?-1:1),m=Math.max(n,Math.floor(e-c*f/l+p)),x=Math.min(r,Math.floor(e+(l-c)*f/l+p));IQ(t,e,m,x,i)}const s=t[e];let a=n,o=r;for(Yy(t,n,e),i(t[r],s)>0&&Yy(t,n,r);a<o;){for(Yy(t,a,o),++a,--o;i(t[a],s)<0;)++a;for(;i(t[o],s)>0;)--o}i(t[n],s)===0?Yy(t,n,o):(++o,Yy(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function Yy(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function $Ne(t,e,n){if(t=Float64Array.from(DNe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return HD(t);if(e>=1)return VD(t);var r,i=(r-1)*e,s=Math.floor(i),a=VD(IQ(t,s).subarray(0,s+1)),o=HD(t.subarray(s+1));return a+(o-a)*(i-s)}}function GNe(t,e,n=DQ){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,s=Math.floor(i),a=+n(t[s],s,t),o=+n(t[s+1],s+1,t);return a+(o-a)*(i-s)}}function VNe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function WD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function HNe(t){if(Array.isArray(t))return t}function WNe(t){if(Array.isArray(t))return WD(t)}function kQ(t,e,n){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function qNe(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function XNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vs(t,e){return t.get(kQ(t,e))}function ig(t,e,n){qNe(t,e),e.set(t,n)}function yw(t,e,n){return t.set(kQ(t,e),n),n}function YNe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,iOe(r.key),r)}}function KNe(t,e,n){return e&&YNe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ZNe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function QNe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function JNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tOe(t,e){return HNe(t)||QNe(t,e)||BQ(t,e)||JNe()}function nOe(t){return WNe(t)||ZNe(t)||BQ(t)||eOe()}function rOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function iOe(t){var e=rOe(t,"string");return typeof e=="symbol"?e:e+""}function BQ(t,e){if(t){if(typeof t=="string")return WD(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?WD(t,e):void 0}}var sg=new WeakMap,Ky=new WeakMap,ag=new WeakMap,hP=new WeakMap,pP=new WeakMap,mP=new WeakMap,sOe=(function(){function t(){XNe(this,t),ig(this,sg,new Map),ig(this,Ky,new Map),ig(this,ag,function(e){return e}),ig(this,hP,function(){return{}}),ig(this,pP,function(){}),ig(this,mP,function(){})}return KNe(t,[{key:"getObj",value:function(n){return Vs(sg,this).get(Vs(ag,this).call(this,n))}},{key:"getData",value:function(n){return Vs(Ky,this).get(n)}},{key:"entries",value:function(){return nOe(Vs(Ky,this).entries()).map(function(n){var r=tOe(n,2),i=r[0],s=r[1];return[s,i]})}},{key:"id",value:function(n){return yw(ag,this,Dn(n)),this}},{key:"onCreateObj",value:function(n){return yw(hP,this,n),this}},{key:"onUpdateObj",value:function(n){return yw(pP,this,n),this}},{key:"onRemoveObj",value:function(n){return yw(mP,this,n),this}},{key:"digest",value:function(n){var r=this;n.filter(function(s){return!Vs(sg,r).has(Vs(ag,r).call(r,s))}).forEach(function(s){var a=Vs(hP,r).call(r,s);Vs(sg,r).set(Vs(ag,r).call(r,s),a),Vs(Ky,r).set(a,s)});var i=new Map(n.map(function(s){return[Vs(ag,r).call(r,s),s]}));return Vs(sg,this).forEach(function(s,a){i.has(a)?Vs(pP,r).call(r,s,i.get(a)):(Vs(mP,r).call(r,s,a),Vs(sg,r).delete(a),Vs(Ky,r).delete(s))}),this}},{key:"clear",value:function(){return this.digest([]),this}}])})();function _l(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function wd(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const qD=Symbol("implicit");function yC(){var t=new J9,e=[],n=[],r=qD;function i(s){let a=t.get(s);if(a===void 0){if(r!==qD)return r;t.set(s,a=e.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new J9;for(const a of s)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return yC(e,n).unknown(r)},_l.apply(i,arguments),i}function _B(){var t=yC().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,a,o=!1,l=0,c=0,u=.5;delete t.unknown;function f(){var p=e().length,m=i<r,x=m?i:r,b=m?r:i;s=(b-x)/Math.max(1,p-l+c*2),o&&(s=Math.floor(s)),x+=(b-x-s*(p-l))*u,a=s*(1-l),o&&(x=Math.round(x),a=Math.round(a));var v=VNe(p).map(function(_){return x+s*_});return n(m?v.reverse():v)}return t.domain=function(p){return arguments.length?(e(p),f()):e()},t.range=function(p){return arguments.length?([r,i]=p,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(p){return[r,i]=p,r=+r,i=+i,o=!0,f()},t.bandwidth=function(){return a},t.step=function(){return s},t.round=function(p){return arguments.length?(o=!!p,f()):o},t.padding=function(p){return arguments.length?(l=Math.min(1,c=+p),f()):l},t.paddingInner=function(p){return arguments.length?(l=Math.min(1,p),f()):l},t.paddingOuter=function(p){return arguments.length?(c=+p,f()):c},t.align=function(p){return arguments.length?(u=Math.max(0,Math.min(1,p)),f()):u},t.copy=function(){return _B(e(),[r,i]).round(o).paddingInner(l).paddingOuter(c).align(u)},_l.apply(f(),arguments)}function FQ(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return FQ(e())},t}function aOe(){return FQ(_B.apply(null,arguments).paddingInner(1))}function SB(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function UQ(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function I_(){}var Bb=.7,f2=1/Bb,Gg="\\s*([+-]?\\d+)\\s*",Fb="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ic="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",oOe=/^#([0-9a-f]{3,8})$/,lOe=new RegExp(`^rgb\\(${Gg},${Gg},${Gg}\\)$`),cOe=new RegExp(`^rgb\\(${Ic},${Ic},${Ic}\\)$`),uOe=new RegExp(`^rgba\\(${Gg},${Gg},${Gg},${Fb}\\)$`),dOe=new RegExp(`^rgba\\(${Ic},${Ic},${Ic},${Fb}\\)$`),fOe=new RegExp(`^hsl\\(${Fb},${Ic},${Ic}\\)$`),hOe=new RegExp(`^hsla\\(${Fb},${Ic},${Ic},${Fb}\\)$`),tG={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};SB(I_,Ub,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:nG,formatHex:nG,formatHex8:pOe,formatHsl:mOe,formatRgb:rG,toString:rG});function nG(){return this.rgb().formatHex()}function pOe(){return this.rgb().formatHex8()}function mOe(){return jQ(this).formatHsl()}function rG(){return this.rgb().formatRgb()}function Ub(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=oOe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?iG(e):n===3?new $a(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?vw(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?vw(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=lOe.exec(t))?new $a(e[1],e[2],e[3],1):(e=cOe.exec(t))?new $a(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=uOe.exec(t))?vw(e[1],e[2],e[3],e[4]):(e=dOe.exec(t))?vw(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=fOe.exec(t))?oG(e[1],e[2]/100,e[3]/100,1):(e=hOe.exec(t))?oG(e[1],e[2]/100,e[3]/100,e[4]):tG.hasOwnProperty(t)?iG(tG[t]):t==="transparent"?new $a(NaN,NaN,NaN,0):null}function iG(t){return new $a(t>>16&255,t>>8&255,t&255,1)}function vw(t,e,n,r){return r<=0&&(t=e=n=NaN),new $a(t,e,n,r)}function gOe(t){return t instanceof I_||(t=Ub(t)),t?(t=t.rgb(),new $a(t.r,t.g,t.b,t.opacity)):new $a}function XD(t,e,n,r){return arguments.length===1?gOe(t):new $a(t,e,n,r??1)}function $a(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}SB($a,XD,UQ(I_,{brighter(t){return t=t==null?f2:Math.pow(f2,t),new $a(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Bb:Math.pow(Bb,t),new $a(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new $a(mp(this.r),mp(this.g),mp(this.b),h2(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:sG,formatHex:sG,formatHex8:xOe,formatRgb:aG,toString:aG}));function sG(){return`#${ap(this.r)}${ap(this.g)}${ap(this.b)}`}function xOe(){return`#${ap(this.r)}${ap(this.g)}${ap(this.b)}${ap((isNaN(this.opacity)?1:this.opacity)*255)}`}function aG(){const t=h2(this.opacity);return`${t===1?"rgb(":"rgba("}${mp(this.r)}, ${mp(this.g)}, ${mp(this.b)}${t===1?")":`, ${t})`}`}function h2(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function mp(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ap(t){return t=mp(t),(t<16?"0":"")+t.toString(16)}function oG(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new kl(t,e,n,r)}function jQ(t){if(t instanceof kl)return new kl(t.h,t.s,t.l,t.opacity);if(t instanceof I_||(t=Ub(t)),!t)return new kl;if(t instanceof kl)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),a=NaN,o=s-i,l=(s+i)/2;return o?(e===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-e)/o+2:a=(e-n)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new kl(a,o,l,t.opacity)}function yOe(t,e,n,r){return arguments.length===1?jQ(t):new kl(t,e,n,r??1)}function kl(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}SB(kl,yOe,UQ(I_,{brighter(t){return t=t==null?f2:Math.pow(f2,t),new kl(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Bb:Math.pow(Bb,t),new kl(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new $a(gP(t>=240?t-240:t+120,i,r),gP(t,i,r),gP(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new kl(lG(this.h),bw(this.s),bw(this.l),h2(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=h2(this.opacity);return`${t===1?"hsl(":"hsla("}${lG(this.h)}, ${bw(this.s)*100}%, ${bw(this.l)*100}%${t===1?")":`, ${t})`}`}}));function lG(t){return t=(t||0)%360,t<0?t+360:t}function bw(t){return Math.max(0,Math.min(1,t||0))}function gP(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const wB=t=>()=>t;function vOe(t,e){return function(n){return t+n*e}}function bOe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function _Oe(t){return(t=+t)==1?zQ:function(e,n){return n-e?bOe(e,n,t):wB(isNaN(e)?n:e)}}function zQ(t,e){var n=e-t;return n?vOe(t,n):wB(isNaN(t)?e:t)}const cG=(function t(e){var n=_Oe(e);function r(i,s){var a=n((i=XD(i)).r,(s=XD(s)).r),o=n(i.g,s.g),l=n(i.b,s.b),c=zQ(i.opacity,s.opacity);return function(u){return i.r=a(u),i.g=o(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r})(1);function SOe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function wOe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function TOe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=Sx(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(o){for(a=0;a<r;++a)s[a]=i[a](o);return s}}function EOe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function p2(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function COe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Sx(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var YD=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xP=new RegExp(YD.source,"g");function AOe(t){return function(){return t}}function MOe(t){return function(e){return t(e)+""}}function ROe(t,e){var n=YD.lastIndex=xP.lastIndex=0,r,i,s,a=-1,o=[],l=[];for(t=t+"",e=e+"";(r=YD.exec(t))&&(i=xP.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:p2(r,i)})),n=xP.lastIndex;return n<e.length&&(s=e.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?MOe(l[0].x):AOe(e):(e=l.length,function(c){for(var u=0,f;u<e;++u)o[(f=l[u]).i]=f.x(c);return o.join("")})}function Sx(t,e){var n=typeof e,r;return e==null||n==="boolean"?wB(e):(n==="number"?p2:n==="string"?(r=Ub(e))?(e=r,cG):ROe:e instanceof Ub?cG:e instanceof Date?EOe:wOe(e)?SOe:Array.isArray(e)?TOe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?COe:p2)(t,e)}function TB(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function POe(t,e){e===void 0&&(e=t,t=Sx);for(var n=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(i,i=e[++n]);return function(a){var o=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return s[o](a-o)}}function NOe(t){return function(){return t}}function m2(t){return+t}var uG=[0,1];function ba(t){return t}function KD(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:NOe(isNaN(e)?NaN:.5)}function OOe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function DOe(t,e,n){var r=t[0],i=t[1],s=e[0],a=e[1];return i<r?(r=KD(i,r),s=n(a,s)):(r=KD(r,i),s=n(s,a)),function(o){return s(r(o))}}function LOe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=KD(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(o){var l=L_(t,o,1,r)-1;return s[l](i[l](o))}}function k_(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function vC(){var t=uG,e=uG,n=Sx,r,i,s,a=ba,o,l,c;function u(){var p=Math.min(t.length,e.length);return a!==ba&&(a=OOe(t[0],t[p-1])),o=p>2?LOe:DOe,l=c=null,f}function f(p){return p==null||isNaN(p=+p)?s:(l||(l=o(t.map(r),e,n)))(r(a(p)))}return f.invert=function(p){return a(i((c||(c=o(e,t.map(r),p2)))(p)))},f.domain=function(p){return arguments.length?(t=Array.from(p,m2),u()):t.slice()},f.range=function(p){return arguments.length?(e=Array.from(p),u()):e.slice()},f.rangeRound=function(p){return e=Array.from(p),n=TB,u()},f.clamp=function(p){return arguments.length?(a=p?!0:ba,u()):a!==ba},f.interpolate=function(p){return arguments.length?(n=p,u()):n},f.unknown=function(p){return arguments.length?(s=p,f):s},function(p,m){return r=p,i=m,u()}}function EB(){return vC()(ba,ba)}function IOe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function g2(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function F0(t){return t=g2(Math.abs(t)),t?t[1]:NaN}function kOe(t,e){return function(n,r){for(var i=n.length,s=[],a=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),s.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=t[a=(a+1)%t.length];return s.reverse().join(e)}}function BOe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var FOe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function jb(t){if(!(e=FOe.exec(t)))throw new Error("invalid format: "+t);var e;return new CB({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}jb.prototype=CB.prototype;function CB(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}CB.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function UOe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var $Q;function jOe(t,e){var n=g2(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-($Q=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+g2(t,Math.max(0,e+s-1))[0]}function dG(t,e){var n=g2(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const fG={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:IOe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>dG(t*100,e),r:dG,s:jOe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function hG(t){return t}var pG=Array.prototype.map,mG=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function zOe(t){var e=t.grouping===void 0||t.thousands===void 0?hG:kOe(pG.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?hG:BOe(pG.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(f){f=jb(f);var p=f.fill,m=f.align,x=f.sign,b=f.symbol,v=f.zero,_=f.width,E=f.comma,T=f.precision,A=f.trim,C=f.type;C==="n"?(E=!0,C="g"):fG[C]||(T===void 0&&(T=12),A=!0,C="g"),(v||p==="0"&&m==="=")&&(v=!0,p="0",m="=");var M=b==="$"?n:b==="#"&&/[boxX]/.test(C)?"0"+C.toLowerCase():"",P=b==="$"?r:/[%p]/.test(C)?a:"",D=fG[C],N=/[defgprs%]/.test(C);T=T===void 0?6:/[gprs]/.test(C)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function L(k){var I=M,F=P,z,H,B;if(C==="c")F=D(k)+F,k="";else{k=+k;var j=k<0||1/k<0;if(k=isNaN(k)?l:D(Math.abs(k),T),A&&(k=UOe(k)),j&&+k==0&&x!=="+"&&(j=!1),I=(j?x==="("?x:o:x==="-"||x==="("?"":x)+I,F=(C==="s"?mG[8+$Q/3]:"")+F+(j&&x==="("?")":""),N){for(z=-1,H=k.length;++z<H;)if(B=k.charCodeAt(z),48>B||B>57){F=(B===46?i+k.slice(z+1):k.slice(z))+F,k=k.slice(0,z);break}}}E&&!v&&(k=e(k,1/0));var G=I.length+k.length+F.length,W=G<_?new Array(_-G+1).join(p):"";switch(E&&v&&(k=e(W+k,W.length?_-F.length:1/0),W=""),m){case"<":k=I+k+F+W;break;case"=":k=I+W+k+F;break;case"^":k=W.slice(0,G=W.length>>1)+I+k+F+W.slice(G);break;default:k=W+I+k+F;break}return s(k)}return L.toString=function(){return f+""},L}function u(f,p){var m=c((f=jb(f),f.type="f",f)),x=Math.max(-8,Math.min(8,Math.floor(F0(p)/3)))*3,b=Math.pow(10,-x),v=mG[8+x/3];return function(_){return m(b*_)+v}}return{format:c,formatPrefix:u}}var _w,AB,GQ;$Oe({thousands:",",grouping:[3],currency:["$",""]});function $Oe(t){return _w=zOe(t),AB=_w.format,GQ=_w.formatPrefix,_w}function GOe(t){return Math.max(0,-F0(Math.abs(t)))}function VOe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(F0(e)/3)))*3-F0(Math.abs(t)))}function HOe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,F0(e)-F0(t))+1}function VQ(t,e,n,r){var i=GD(t,e,n),s;switch(r=jb(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=VOe(i,a))&&(r.precision=s),GQ(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=HOe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=GOe(i))&&(r.precision=s-(r.type==="%")*2);break}}return AB(r)}function Kf(t){var e=t.domain;return t.ticks=function(n){var r=e();return zD(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return VQ(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,a=r[i],o=r[s],l,c,u=10;for(o<a&&(c=a,a=o,o=c,c=i,i=s,s=c);u-- >0;){if(c=$D(a,o,n),c===l)return r[i]=a,r[s]=o,e(r);if(c>0)a=Math.floor(a/c)*c,o=Math.ceil(o/c)*c;else if(c<0)a=Math.ceil(a*c)/c,o=Math.floor(o*c)/c;else break;l=c}return t},t}function HQ(){var t=EB();return t.copy=function(){return k_(t,HQ())},_l.apply(t,arguments),Kf(t)}function WQ(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,m2),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return WQ(t).unknown(e)},t=arguments.length?Array.from(t,m2):[0,1],Kf(n)}function qQ(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],a;return s<i&&(a=n,n=r,r=a,a=i,i=s,s=a),t[n]=e.floor(i),t[r]=e.ceil(s),t}function gG(t){return Math.log(t)}function xG(t){return Math.exp(t)}function WOe(t){return-Math.log(-t)}function qOe(t){return-Math.exp(-t)}function XOe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function YOe(t){return t===10?XOe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function KOe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function yG(t){return(e,n)=>-t(-e,n)}function MB(t){const e=t(gG,xG),n=e.domain;let r=10,i,s;function a(){return i=KOe(r),s=YOe(r),n()[0]<0?(i=yG(i),s=yG(s),t(WOe,qOe)):t(gG,xG),e}return e.base=function(o){return arguments.length?(r=+o,a()):r},e.domain=function(o){return arguments.length?(n(o),a()):n()},e.ticks=o=>{const l=n();let c=l[0],u=l[l.length-1];const f=u<c;f&&([c,u]=[u,c]);let p=i(c),m=i(u),x,b;const v=o==null?10:+o;let _=[];if(!(r%1)&&m-p<v){if(p=Math.floor(p),m=Math.ceil(m),c>0){for(;p<=m;++p)for(x=1;x<r;++x)if(b=p<0?x/s(-p):x*s(p),!(b<c)){if(b>u)break;_.push(b)}}else for(;p<=m;++p)for(x=r-1;x>=1;--x)if(b=p>0?x/s(-p):x*s(p),!(b<c)){if(b>u)break;_.push(b)}_.length*2<v&&(_=zD(c,u,v))}else _=zD(p,m,Math.min(m-p,v)).map(s);return f?_.reverse():_},e.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=jb(l)).precision==null&&(l.trim=!0),l=AB(l)),o===1/0)return l;const c=Math.max(1,r*o/e.ticks().length);return u=>{let f=u/s(Math.round(i(u)));return f*r<r-.5&&(f*=r),f<=c?l(u):""}},e.nice=()=>n(qQ(n(),{floor:o=>s(Math.floor(i(o))),ceil:o=>s(Math.ceil(i(o)))})),e}function XQ(){const t=MB(vC()).domain([1,10]);return t.copy=()=>k_(t,XQ()).base(t.base()),_l.apply(t,arguments),t}function vG(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function bG(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function RB(t){var e=1,n=t(vG(e),bG(e));return n.constant=function(r){return arguments.length?t(vG(e=+r),bG(e)):e},Kf(n)}function YQ(){var t=RB(vC());return t.copy=function(){return k_(t,YQ()).constant(t.constant())},_l.apply(t,arguments)}function _G(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function ZOe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function QOe(t){return t<0?-t*t:t*t}function PB(t){var e=t(ba,ba),n=1;function r(){return n===1?t(ba,ba):n===.5?t(ZOe,QOe):t(_G(n),_G(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Kf(e)}function NB(){var t=PB(vC());return t.copy=function(){return k_(t,NB()).exponent(t.exponent())},_l.apply(t,arguments),t}function JOe(){return NB.apply(null,arguments).exponent(.5)}function SG(t){return Math.sign(t)*t*t}function eDe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function KQ(){var t=EB(),e=[0,1],n=!1,r;function i(s){var a=eDe(t(s));return isNaN(a)?r:n?Math.round(a):a}return i.invert=function(s){return t.invert(SG(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,m2)).map(SG)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return KQ(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},_l.apply(i,arguments),Kf(i)}function ZQ(){var t=[],e=[],n=[],r;function i(){var a=0,o=Math.max(1,e.length);for(n=new Array(o-1);++a<o;)n[a-1]=GNe(t,a/o);return s}function s(a){return a==null||isNaN(a=+a)?r:e[L_(n,a)]}return s.invertExtent=function(a){var o=e.indexOf(a);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let o of a)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(Of),i()},s.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return ZQ().domain(t).range(e).unknown(r)},_l.apply(s,arguments)}function QQ(){var t=0,e=1,n=1,r=[.5],i=[0,1],s;function a(l){return l!=null&&l<=l?i[L_(r,l,0,n)]:s}function o(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return a}return a.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,o()):[t,e]},a.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,o()):i.slice()},a.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},a.unknown=function(l){return arguments.length&&(s=l),a},a.thresholds=function(){return r.slice()},a.copy=function(){return QQ().domain([t,e]).range(i).unknown(s)},_l.apply(Kf(a),arguments)}function JQ(){var t=[.5],e=[0,1],n,r=1;function i(s){return s!=null&&s<=s?e[L_(t,s,0,r)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var a=e.indexOf(s);return[t[a-1],t[a]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return JQ().domain(t).range(e).unknown(n)},_l.apply(i,arguments)}const yP=new Date,vP=new Date;function rs(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const a=i(s),o=i.ceil(s);return s-a<o-s?a:o},i.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,o)=>{const l=[];if(s=i.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return l;let c;do l.push(c=new Date(+s)),e(s,o),t(s);while(c<s&&s<a);return l},i.filter=s=>rs(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;e(a,-1),!s(a););else for(;--o>=0;)for(;e(a,1),!s(a););}),n&&(i.count=(s,a)=>(yP.setTime(+s),vP.setTime(+a),t(yP),t(vP),Math.floor(n(yP,vP))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?a=>r(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const x2=rs(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);x2.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?rs(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):x2);x2.range;const Wu=1e3,rl=Wu*60,qu=rl*60,dd=qu*24,OB=dd*7,wG=dd*30,bP=dd*365,op=rs(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Wu)},(t,e)=>(e-t)/Wu,t=>t.getUTCSeconds());op.range;const DB=rs(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Wu)},(t,e)=>{t.setTime(+t+e*rl)},(t,e)=>(e-t)/rl,t=>t.getMinutes());DB.range;const LB=rs(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*rl)},(t,e)=>(e-t)/rl,t=>t.getUTCMinutes());LB.range;const IB=rs(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Wu-t.getMinutes()*rl)},(t,e)=>{t.setTime(+t+e*qu)},(t,e)=>(e-t)/qu,t=>t.getHours());IB.range;const kB=rs(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*qu)},(t,e)=>(e-t)/qu,t=>t.getUTCHours());kB.range;const B_=rs(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*rl)/dd,t=>t.getDate()-1);B_.range;const bC=rs(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/dd,t=>t.getUTCDate()-1);bC.range;const eJ=rs(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/dd,t=>Math.floor(t/dd));eJ.range;function Yp(t){return rs(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*rl)/OB)}const _C=Yp(0),y2=Yp(1),tDe=Yp(2),nDe=Yp(3),U0=Yp(4),rDe=Yp(5),iDe=Yp(6);_C.range;y2.range;tDe.range;nDe.range;U0.range;rDe.range;iDe.range;function Kp(t){return rs(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/OB)}const SC=Kp(0),v2=Kp(1),sDe=Kp(2),aDe=Kp(3),j0=Kp(4),oDe=Kp(5),lDe=Kp(6);SC.range;v2.range;sDe.range;aDe.range;j0.range;oDe.range;lDe.range;const BB=rs(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());BB.range;const FB=rs(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());FB.range;const fd=rs(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());fd.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:rs(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});fd.range;const hd=rs(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());hd.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:rs(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});hd.range;function tJ(t,e,n,r,i,s){const a=[[op,1,Wu],[op,5,5*Wu],[op,15,15*Wu],[op,30,30*Wu],[s,1,rl],[s,5,5*rl],[s,15,15*rl],[s,30,30*rl],[i,1,qu],[i,3,3*qu],[i,6,6*qu],[i,12,12*qu],[r,1,dd],[r,2,2*dd],[n,1,OB],[e,1,wG],[e,3,3*wG],[t,1,bP]];function o(c,u,f){const p=u<c;p&&([c,u]=[u,c]);const m=f&&typeof f.range=="function"?f:l(c,u,f),x=m?m.range(c,+u+1):[];return p?x.reverse():x}function l(c,u,f){const p=Math.abs(u-c)/f,m=bB(([,,v])=>v).right(a,p);if(m===a.length)return t.every(GD(c/bP,u/bP,f));if(m===0)return x2.every(Math.max(GD(c,u,f),1));const[x,b]=a[p/a[m-1][2]<a[m][2]/p?m-1:m];return x.every(b)}return[o,l]}const[cDe,uDe]=tJ(hd,FB,SC,eJ,kB,LB),[dDe,fDe]=tJ(fd,BB,_C,B_,IB,DB);function _P(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function SP(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Zy(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function hDe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,a=t.shortDays,o=t.months,l=t.shortMonths,c=Qy(i),u=Jy(i),f=Qy(s),p=Jy(s),m=Qy(a),x=Jy(a),b=Qy(o),v=Jy(o),_=Qy(l),E=Jy(l),T={a:j,A:G,b:W,B:re,c:null,d:RG,e:RG,f:kDe,g:WDe,G:XDe,H:DDe,I:LDe,j:IDe,L:nJ,m:BDe,M:FDe,p:$,q:ee,Q:OG,s:DG,S:UDe,u:jDe,U:zDe,V:$De,w:GDe,W:VDe,x:null,X:null,y:HDe,Y:qDe,Z:YDe,"%":NG},A={a:oe,A:me,b:te,B:K,c:null,d:PG,e:PG,f:JDe,g:cLe,G:dLe,H:KDe,I:ZDe,j:QDe,L:iJ,m:eLe,M:tLe,p:ne,q:Ee,Q:OG,s:DG,S:nLe,u:rLe,U:iLe,V:sLe,w:aLe,W:oLe,x:null,X:null,y:lLe,Y:uLe,Z:fLe,"%":NG},C={a:L,A:k,b:I,B:F,c:z,d:AG,e:AG,f:RDe,g:CG,G:EG,H:MG,I:MG,j:EDe,L:MDe,m:TDe,M:CDe,p:N,q:wDe,Q:NDe,s:ODe,S:ADe,u:yDe,U:vDe,V:bDe,w:xDe,W:_De,x:H,X:B,y:CG,Y:EG,Z:SDe,"%":PDe};T.x=M(n,T),T.X=M(r,T),T.c=M(e,T),A.x=M(n,A),A.X=M(r,A),A.c=M(e,A);function M(se,ve){return function(Pe){var ge=[],be=-1,_e=0,Q=se.length,et,ze,Je;for(Pe instanceof Date||(Pe=new Date(+Pe));++be<Q;)se.charCodeAt(be)===37&&(ge.push(se.slice(_e,be)),(ze=TG[et=se.charAt(++be)])!=null?et=se.charAt(++be):ze=et==="e"?" ":"0",(Je=ve[et])&&(et=Je(Pe,ze)),ge.push(et),_e=be+1);return ge.push(se.slice(_e,be)),ge.join("")}}function P(se,ve){return function(Pe){var ge=Zy(1900,void 0,1),be=D(ge,se,Pe+="",0),_e,Q;if(be!=Pe.length)return null;if("Q"in ge)return new Date(ge.Q);if("s"in ge)return new Date(ge.s*1e3+("L"in ge?ge.L:0));if(ve&&!("Z"in ge)&&(ge.Z=0),"p"in ge&&(ge.H=ge.H%12+ge.p*12),ge.m===void 0&&(ge.m="q"in ge?ge.q:0),"V"in ge){if(ge.V<1||ge.V>53)return null;"w"in ge||(ge.w=1),"Z"in ge?(_e=SP(Zy(ge.y,0,1)),Q=_e.getUTCDay(),_e=Q>4||Q===0?v2.ceil(_e):v2(_e),_e=bC.offset(_e,(ge.V-1)*7),ge.y=_e.getUTCFullYear(),ge.m=_e.getUTCMonth(),ge.d=_e.getUTCDate()+(ge.w+6)%7):(_e=_P(Zy(ge.y,0,1)),Q=_e.getDay(),_e=Q>4||Q===0?y2.ceil(_e):y2(_e),_e=B_.offset(_e,(ge.V-1)*7),ge.y=_e.getFullYear(),ge.m=_e.getMonth(),ge.d=_e.getDate()+(ge.w+6)%7)}else("W"in ge||"U"in ge)&&("w"in ge||(ge.w="u"in ge?ge.u%7:"W"in ge?1:0),Q="Z"in ge?SP(Zy(ge.y,0,1)).getUTCDay():_P(Zy(ge.y,0,1)).getDay(),ge.m=0,ge.d="W"in ge?(ge.w+6)%7+ge.W*7-(Q+5)%7:ge.w+ge.U*7-(Q+6)%7);return"Z"in ge?(ge.H+=ge.Z/100|0,ge.M+=ge.Z%100,SP(ge)):_P(ge)}}function D(se,ve,Pe,ge){for(var be=0,_e=ve.length,Q=Pe.length,et,ze;be<_e;){if(ge>=Q)return-1;if(et=ve.charCodeAt(be++),et===37){if(et=ve.charAt(be++),ze=C[et in TG?ve.charAt(be++):et],!ze||(ge=ze(se,Pe,ge))<0)return-1}else if(et!=Pe.charCodeAt(ge++))return-1}return ge}function N(se,ve,Pe){var ge=c.exec(ve.slice(Pe));return ge?(se.p=u.get(ge[0].toLowerCase()),Pe+ge[0].length):-1}function L(se,ve,Pe){var ge=m.exec(ve.slice(Pe));return ge?(se.w=x.get(ge[0].toLowerCase()),Pe+ge[0].length):-1}function k(se,ve,Pe){var ge=f.exec(ve.slice(Pe));return ge?(se.w=p.get(ge[0].toLowerCase()),Pe+ge[0].length):-1}function I(se,ve,Pe){var ge=_.exec(ve.slice(Pe));return ge?(se.m=E.get(ge[0].toLowerCase()),Pe+ge[0].length):-1}function F(se,ve,Pe){var ge=b.exec(ve.slice(Pe));return ge?(se.m=v.get(ge[0].toLowerCase()),Pe+ge[0].length):-1}function z(se,ve,Pe){return D(se,e,ve,Pe)}function H(se,ve,Pe){return D(se,n,ve,Pe)}function B(se,ve,Pe){return D(se,r,ve,Pe)}function j(se){return a[se.getDay()]}function G(se){return s[se.getDay()]}function W(se){return l[se.getMonth()]}function re(se){return o[se.getMonth()]}function $(se){return i[+(se.getHours()>=12)]}function ee(se){return 1+~~(se.getMonth()/3)}function oe(se){return a[se.getUTCDay()]}function me(se){return s[se.getUTCDay()]}function te(se){return l[se.getUTCMonth()]}function K(se){return o[se.getUTCMonth()]}function ne(se){return i[+(se.getUTCHours()>=12)]}function Ee(se){return 1+~~(se.getUTCMonth()/3)}return{format:function(se){var ve=M(se+="",T);return ve.toString=function(){return se},ve},parse:function(se){var ve=P(se+="",!1);return ve.toString=function(){return se},ve},utcFormat:function(se){var ve=M(se+="",A);return ve.toString=function(){return se},ve},utcParse:function(se){var ve=P(se+="",!0);return ve.toString=function(){return se},ve}}}var TG={"-":"",_:" ",0:"0"},Ss=/^\s*\d+/,pDe=/^%/,mDe=/[\\^$*+?|[\]().{}]/g;function Kn(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function gDe(t){return t.replace(mDe,"\\$&")}function Qy(t){return new RegExp("^(?:"+t.map(gDe).join("|")+")","i")}function Jy(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function xDe(t,e,n){var r=Ss.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function yDe(t,e,n){var r=Ss.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function vDe(t,e,n){var r=Ss.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function bDe(t,e,n){var r=Ss.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function _De(t,e,n){var r=Ss.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function EG(t,e,n){var r=Ss.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function CG(t,e,n){var r=Ss.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function SDe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function wDe(t,e,n){var r=Ss.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function TDe(t,e,n){var r=Ss.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function AG(t,e,n){var r=Ss.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function EDe(t,e,n){var r=Ss.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function MG(t,e,n){var r=Ss.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function CDe(t,e,n){var r=Ss.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function ADe(t,e,n){var r=Ss.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function MDe(t,e,n){var r=Ss.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function RDe(t,e,n){var r=Ss.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function PDe(t,e,n){var r=pDe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function NDe(t,e,n){var r=Ss.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function ODe(t,e,n){var r=Ss.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function RG(t,e){return Kn(t.getDate(),e,2)}function DDe(t,e){return Kn(t.getHours(),e,2)}function LDe(t,e){return Kn(t.getHours()%12||12,e,2)}function IDe(t,e){return Kn(1+B_.count(fd(t),t),e,3)}function nJ(t,e){return Kn(t.getMilliseconds(),e,3)}function kDe(t,e){return nJ(t,e)+"000"}function BDe(t,e){return Kn(t.getMonth()+1,e,2)}function FDe(t,e){return Kn(t.getMinutes(),e,2)}function UDe(t,e){return Kn(t.getSeconds(),e,2)}function jDe(t){var e=t.getDay();return e===0?7:e}function zDe(t,e){return Kn(_C.count(fd(t)-1,t),e,2)}function rJ(t){var e=t.getDay();return e>=4||e===0?U0(t):U0.ceil(t)}function $De(t,e){return t=rJ(t),Kn(U0.count(fd(t),t)+(fd(t).getDay()===4),e,2)}function GDe(t){return t.getDay()}function VDe(t,e){return Kn(y2.count(fd(t)-1,t),e,2)}function HDe(t,e){return Kn(t.getFullYear()%100,e,2)}function WDe(t,e){return t=rJ(t),Kn(t.getFullYear()%100,e,2)}function qDe(t,e){return Kn(t.getFullYear()%1e4,e,4)}function XDe(t,e){var n=t.getDay();return t=n>=4||n===0?U0(t):U0.ceil(t),Kn(t.getFullYear()%1e4,e,4)}function YDe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Kn(e/60|0,"0",2)+Kn(e%60,"0",2)}function PG(t,e){return Kn(t.getUTCDate(),e,2)}function KDe(t,e){return Kn(t.getUTCHours(),e,2)}function ZDe(t,e){return Kn(t.getUTCHours()%12||12,e,2)}function QDe(t,e){return Kn(1+bC.count(hd(t),t),e,3)}function iJ(t,e){return Kn(t.getUTCMilliseconds(),e,3)}function JDe(t,e){return iJ(t,e)+"000"}function eLe(t,e){return Kn(t.getUTCMonth()+1,e,2)}function tLe(t,e){return Kn(t.getUTCMinutes(),e,2)}function nLe(t,e){return Kn(t.getUTCSeconds(),e,2)}function rLe(t){var e=t.getUTCDay();return e===0?7:e}function iLe(t,e){return Kn(SC.count(hd(t)-1,t),e,2)}function sJ(t){var e=t.getUTCDay();return e>=4||e===0?j0(t):j0.ceil(t)}function sLe(t,e){return t=sJ(t),Kn(j0.count(hd(t),t)+(hd(t).getUTCDay()===4),e,2)}function aLe(t){return t.getUTCDay()}function oLe(t,e){return Kn(v2.count(hd(t)-1,t),e,2)}function lLe(t,e){return Kn(t.getUTCFullYear()%100,e,2)}function cLe(t,e){return t=sJ(t),Kn(t.getUTCFullYear()%100,e,2)}function uLe(t,e){return Kn(t.getUTCFullYear()%1e4,e,4)}function dLe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?j0(t):j0.ceil(t),Kn(t.getUTCFullYear()%1e4,e,4)}function fLe(){return"+0000"}function NG(){return"%"}function OG(t){return+t}function DG(t){return Math.floor(+t/1e3)}var og,aJ,oJ;hLe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function hLe(t){return og=hDe(t),aJ=og.format,og.parse,oJ=og.utcFormat,og.utcParse,og}function pLe(t){return new Date(t)}function mLe(t){return t instanceof Date?+t:+new Date(+t)}function UB(t,e,n,r,i,s,a,o,l,c){var u=EB(),f=u.invert,p=u.domain,m=c(".%L"),x=c(":%S"),b=c("%I:%M"),v=c("%I %p"),_=c("%a %d"),E=c("%b %d"),T=c("%B"),A=c("%Y");function C(M){return(l(M)<M?m:o(M)<M?x:a(M)<M?b:s(M)<M?v:r(M)<M?i(M)<M?_:E:n(M)<M?T:A)(M)}return u.invert=function(M){return new Date(f(M))},u.domain=function(M){return arguments.length?p(Array.from(M,mLe)):p().map(pLe)},u.ticks=function(M){var P=p();return t(P[0],P[P.length-1],M??10)},u.tickFormat=function(M,P){return P==null?C:c(P)},u.nice=function(M){var P=p();return(!M||typeof M.range!="function")&&(M=e(P[0],P[P.length-1],M??10)),M?p(qQ(P,M)):u},u.copy=function(){return k_(u,UB(t,e,n,r,i,s,a,o,l,c))},u}function gLe(){return _l.apply(UB(dDe,fDe,fd,BB,_C,B_,IB,DB,op,aJ).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function xLe(){return _l.apply(UB(cDe,uDe,hd,FB,SC,bC,kB,LB,op,oJ).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function wC(){var t=0,e=1,n,r,i,s,a=ba,o=!1,l;function c(f){return f==null||isNaN(f=+f)?l:a(i===0?.5:(f=(s(f)-n)*i,o?Math.max(0,Math.min(1,f)):f))}c.domain=function(f){return arguments.length?([t,e]=f,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(f){return arguments.length?(o=!!f,c):o},c.interpolator=function(f){return arguments.length?(a=f,c):a};function u(f){return function(p){var m,x;return arguments.length?([m,x]=p,a=f(m,x),c):[a(0),a(1)]}}return c.range=u(Sx),c.rangeRound=u(TB),c.unknown=function(f){return arguments.length?(l=f,c):l},function(f){return s=f,n=f(t),r=f(e),i=n===r?0:1/(r-n),c}}function Zf(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function lJ(){var t=Kf(wC()(ba));return t.copy=function(){return Zf(t,lJ())},wd.apply(t,arguments)}function cJ(){var t=MB(wC()).domain([1,10]);return t.copy=function(){return Zf(t,cJ()).base(t.base())},wd.apply(t,arguments)}function uJ(){var t=RB(wC());return t.copy=function(){return Zf(t,uJ()).constant(t.constant())},wd.apply(t,arguments)}function jB(){var t=PB(wC());return t.copy=function(){return Zf(t,jB()).exponent(t.exponent())},wd.apply(t,arguments)}function yLe(){return jB.apply(null,arguments).exponent(.5)}function dJ(){var t=[],e=ba;function n(r){if(r!=null&&!isNaN(r=+r))return e((L_(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Of),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>$Ne(t,s/r))},n.copy=function(){return dJ(e).domain(t)},wd.apply(n,arguments)}function TC(){var t=0,e=.5,n=1,r=1,i,s,a,o,l,c=ba,u,f=!1,p;function m(b){return isNaN(b=+b)?p:(b=.5+((b=+u(b))-s)*(r*b<r*s?o:l),c(f?Math.max(0,Math.min(1,b)):b))}m.domain=function(b){return arguments.length?([t,e,n]=b,i=u(t=+t),s=u(e=+e),a=u(n=+n),o=i===s?0:.5/(s-i),l=s===a?0:.5/(a-s),r=s<i?-1:1,m):[t,e,n]},m.clamp=function(b){return arguments.length?(f=!!b,m):f},m.interpolator=function(b){return arguments.length?(c=b,m):c};function x(b){return function(v){var _,E,T;return arguments.length?([_,E,T]=v,c=POe(b,[_,E,T]),m):[c(0),c(.5),c(1)]}}return m.range=x(Sx),m.rangeRound=x(TB),m.unknown=function(b){return arguments.length?(p=b,m):p},function(b){return u=b,i=b(t),s=b(e),a=b(n),o=i===s?0:.5/(s-i),l=s===a?0:.5/(a-s),r=s<i?-1:1,m}}function fJ(){var t=Kf(TC()(ba));return t.copy=function(){return Zf(t,fJ())},wd.apply(t,arguments)}function hJ(){var t=MB(TC()).domain([.1,1,10]);return t.copy=function(){return Zf(t,hJ()).base(t.base())},wd.apply(t,arguments)}function pJ(){var t=RB(TC());return t.copy=function(){return Zf(t,pJ()).constant(t.constant())},wd.apply(t,arguments)}function zB(){var t=PB(TC());return t.copy=function(){return Zf(t,zB()).exponent(t.exponent())},wd.apply(t,arguments)}function vLe(){return zB.apply(null,arguments).exponent(.5)}function bLe(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const _Le=bLe("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function b2(t){"@babel/helpers - typeof";return b2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b2(t)}var SLe=/^\s+/,wLe=/\s+$/;function Yt(t,e){if(t=t||"",e=e||{},t instanceof Yt)return t;if(!(this instanceof Yt))return new Yt(t,e);var n=TLe(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}Yt.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),n,r,i,s,a,o;return n=e.r/255,r=e.g/255,i=e.b/255,n<=.03928?s=n/12.92:s=Math.pow((n+.055)/1.055,2.4),r<=.03928?a=r/12.92:a=Math.pow((r+.055)/1.055,2.4),i<=.03928?o=i/12.92:o=Math.pow((i+.055)/1.055,2.4),.2126*s+.7152*a+.0722*o},setAlpha:function(e){return this._a=mJ(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=IG(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=IG(this._r,this._g,this._b),n=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.v*100);return this._a==1?"hsv("+n+", "+r+"%, "+i+"%)":"hsva("+n+", "+r+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=LG(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=LG(this._r,this._g,this._b),n=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.l*100);return this._a==1?"hsl("+n+", "+r+"%, "+i+"%)":"hsla("+n+", "+r+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return kG(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return MLe(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Xr(this._r,255)*100)+"%",g:Math.round(Xr(this._g,255)*100)+"%",b:Math.round(Xr(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Xr(this._r,255)*100)+"%, "+Math.round(Xr(this._g,255)*100)+"%, "+Math.round(Xr(this._b,255)*100)+"%)":"rgba("+Math.round(Xr(this._r,255)*100)+"%, "+Math.round(Xr(this._g,255)*100)+"%, "+Math.round(Xr(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:jLe[kG(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var n="#"+BG(this._r,this._g,this._b,this._a),r=n,i=this._gradientType?"GradientType = 1, ":"";if(e){var s=Yt(e);r="#"+BG(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+n+",endColorstr="+r+")"},toString:function(e){var n=!!e;e=e||this._format;var r=!1,i=this._a<1&&this._a>=0,s=!n&&i&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return s?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return Yt(this.toString())},_applyModification:function(e,n){var r=e.apply(null,[this].concat([].slice.call(n)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(OLe,arguments)},brighten:function(){return this._applyModification(DLe,arguments)},darken:function(){return this._applyModification(LLe,arguments)},desaturate:function(){return this._applyModification(RLe,arguments)},saturate:function(){return this._applyModification(PLe,arguments)},greyscale:function(){return this._applyModification(NLe,arguments)},spin:function(){return this._applyModification(ILe,arguments)},_applyCombination:function(e,n){return e.apply(null,[this].concat([].slice.call(n)))},analogous:function(){return this._applyCombination(FLe,arguments)},complement:function(){return this._applyCombination(kLe,arguments)},monochromatic:function(){return this._applyCombination(ULe,arguments)},splitcomplement:function(){return this._applyCombination(BLe,arguments)},triad:function(){return this._applyCombination(FG,[3])},tetrad:function(){return this._applyCombination(FG,[4])}};Yt.fromRatio=function(t,e){if(b2(t)=="object"){var n={};for(var r in t)t.hasOwnProperty(r)&&(r==="a"?n[r]=t[r]:n[r]=Mv(t[r]));t=n}return Yt(t,e)};function TLe(t){var e={r:0,g:0,b:0},n=1,r=null,i=null,s=null,a=!1,o=!1;return typeof t=="string"&&(t=VLe(t)),b2(t)=="object"&&(Au(t.r)&&Au(t.g)&&Au(t.b)?(e=ELe(t.r,t.g,t.b),a=!0,o=String(t.r).substr(-1)==="%"?"prgb":"rgb"):Au(t.h)&&Au(t.s)&&Au(t.v)?(r=Mv(t.s),i=Mv(t.v),e=ALe(t.h,r,i),a=!0,o="hsv"):Au(t.h)&&Au(t.s)&&Au(t.l)&&(r=Mv(t.s),s=Mv(t.l),e=CLe(t.h,r,s),a=!0,o="hsl"),t.hasOwnProperty("a")&&(n=t.a)),n=mJ(n),{ok:a,format:t.format||o,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n}}function ELe(t,e,n){return{r:Xr(t,255)*255,g:Xr(e,255)*255,b:Xr(n,255)*255}}function LG(t,e,n){t=Xr(t,255),e=Xr(e,255),n=Xr(n,255);var r=Math.max(t,e,n),i=Math.min(t,e,n),s,a,o=(r+i)/2;if(r==i)s=a=0;else{var l=r-i;switch(a=o>.5?l/(2-r-i):l/(r+i),r){case t:s=(e-n)/l+(e<n?6:0);break;case e:s=(n-t)/l+2;break;case n:s=(t-e)/l+4;break}s/=6}return{h:s,s:a,l:o}}function CLe(t,e,n){var r,i,s;t=Xr(t,360),e=Xr(e,100),n=Xr(n,100);function a(c,u,f){return f<0&&(f+=1),f>1&&(f-=1),f<1/6?c+(u-c)*6*f:f<1/2?u:f<2/3?c+(u-c)*(2/3-f)*6:c}if(e===0)r=i=s=n;else{var o=n<.5?n*(1+e):n+e-n*e,l=2*n-o;r=a(l,o,t+1/3),i=a(l,o,t),s=a(l,o,t-1/3)}return{r:r*255,g:i*255,b:s*255}}function IG(t,e,n){t=Xr(t,255),e=Xr(e,255),n=Xr(n,255);var r=Math.max(t,e,n),i=Math.min(t,e,n),s,a,o=r,l=r-i;if(a=r===0?0:l/r,r==i)s=0;else{switch(r){case t:s=(e-n)/l+(e<n?6:0);break;case e:s=(n-t)/l+2;break;case n:s=(t-e)/l+4;break}s/=6}return{h:s,s:a,v:o}}function ALe(t,e,n){t=Xr(t,360)*6,e=Xr(e,100),n=Xr(n,100);var r=Math.floor(t),i=t-r,s=n*(1-e),a=n*(1-i*e),o=n*(1-(1-i)*e),l=r%6,c=[n,a,s,s,o,n][l],u=[o,n,n,a,s,s][l],f=[s,s,o,n,n,a][l];return{r:c*255,g:u*255,b:f*255}}function kG(t,e,n,r){var i=[Gl(Math.round(t).toString(16)),Gl(Math.round(e).toString(16)),Gl(Math.round(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function MLe(t,e,n,r,i){var s=[Gl(Math.round(t).toString(16)),Gl(Math.round(e).toString(16)),Gl(Math.round(n).toString(16)),Gl(gJ(r))];return i&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function BG(t,e,n,r){var i=[Gl(gJ(r)),Gl(Math.round(t).toString(16)),Gl(Math.round(e).toString(16)),Gl(Math.round(n).toString(16))];return i.join("")}Yt.equals=function(t,e){return!t||!e?!1:Yt(t).toRgbString()==Yt(e).toRgbString()};Yt.random=function(){return Yt.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function RLe(t,e){e=e===0?0:e||10;var n=Yt(t).toHsl();return n.s-=e/100,n.s=EC(n.s),Yt(n)}function PLe(t,e){e=e===0?0:e||10;var n=Yt(t).toHsl();return n.s+=e/100,n.s=EC(n.s),Yt(n)}function NLe(t){return Yt(t).desaturate(100)}function OLe(t,e){e=e===0?0:e||10;var n=Yt(t).toHsl();return n.l+=e/100,n.l=EC(n.l),Yt(n)}function DLe(t,e){e=e===0?0:e||10;var n=Yt(t).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(e/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(e/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(e/100)))),Yt(n)}function LLe(t,e){e=e===0?0:e||10;var n=Yt(t).toHsl();return n.l-=e/100,n.l=EC(n.l),Yt(n)}function ILe(t,e){var n=Yt(t).toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,Yt(n)}function kLe(t){var e=Yt(t).toHsl();return e.h=(e.h+180)%360,Yt(e)}function FG(t,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var n=Yt(t).toHsl(),r=[Yt(t)],i=360/e,s=1;s<e;s++)r.push(Yt({h:(n.h+s*i)%360,s:n.s,l:n.l}));return r}function BLe(t){var e=Yt(t).toHsl(),n=e.h;return[Yt(t),Yt({h:(n+72)%360,s:e.s,l:e.l}),Yt({h:(n+216)%360,s:e.s,l:e.l})]}function FLe(t,e,n){e=e||6,n=n||30;var r=Yt(t).toHsl(),i=360/n,s=[Yt(t)];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,s.push(Yt(r));return s}function ULe(t,e){e=e||6;for(var n=Yt(t).toHsv(),r=n.h,i=n.s,s=n.v,a=[],o=1/e;e--;)a.push(Yt({h:r,s:i,v:s})),s=(s+o)%1;return a}Yt.mix=function(t,e,n){n=n===0?0:n||50;var r=Yt(t).toRgb(),i=Yt(e).toRgb(),s=n/100,a={r:(i.r-r.r)*s+r.r,g:(i.g-r.g)*s+r.g,b:(i.b-r.b)*s+r.b,a:(i.a-r.a)*s+r.a};return Yt(a)};Yt.readability=function(t,e){var n=Yt(t),r=Yt(e);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)};Yt.isReadable=function(t,e,n){var r=Yt.readability(t,e),i,s;switch(s=!1,i=HLe(n),i.level+i.size){case"AAsmall":case"AAAlarge":s=r>=4.5;break;case"AAlarge":s=r>=3;break;case"AAAsmall":s=r>=7;break}return s};Yt.mostReadable=function(t,e,n){var r=null,i=0,s,a,o,l;n=n||{},a=n.includeFallbackColors,o=n.level,l=n.size;for(var c=0;c<e.length;c++)s=Yt.readability(t,e[c]),s>i&&(i=s,r=Yt(e[c]));return Yt.isReadable(t,r,{level:o,size:l})||!a?r:(n.includeFallbackColors=!1,Yt.mostReadable(t,["#fff","#000"],n))};var ZD=Yt.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},jLe=Yt.hexNames=zLe(ZD);function zLe(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function mJ(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function Xr(t,e){$Le(t)&&(t="100%");var n=GLe(t);return t=Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function EC(t){return Math.min(1,Math.max(0,t))}function po(t){return parseInt(t,16)}function $Le(t){return typeof t=="string"&&t.indexOf(".")!=-1&&parseFloat(t)===1}function GLe(t){return typeof t=="string"&&t.indexOf("%")!=-1}function Gl(t){return t.length==1?"0"+t:""+t}function Mv(t){return t<=1&&(t=t*100+"%"),t}function gJ(t){return Math.round(parseFloat(t)*255).toString(16)}function UG(t){return po(t)/255}var Nl=(function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",n="(?:"+e+")|(?:"+t+")",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{CSS_UNIT:new RegExp(n),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function Au(t){return!!Nl.CSS_UNIT.exec(t)}function VLe(t){t=t.replace(SLe,"").replace(wLe,"").toLowerCase();var e=!1;if(ZD[t])t=ZD[t],e=!0;else if(t=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=Nl.rgb.exec(t))?{r:n[1],g:n[2],b:n[3]}:(n=Nl.rgba.exec(t))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Nl.hsl.exec(t))?{h:n[1],s:n[2],l:n[3]}:(n=Nl.hsla.exec(t))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=Nl.hsv.exec(t))?{h:n[1],s:n[2],v:n[3]}:(n=Nl.hsva.exec(t))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=Nl.hex8.exec(t))?{r:po(n[1]),g:po(n[2]),b:po(n[3]),a:UG(n[4]),format:e?"name":"hex8"}:(n=Nl.hex6.exec(t))?{r:po(n[1]),g:po(n[2]),b:po(n[3]),format:e?"name":"hex"}:(n=Nl.hex4.exec(t))?{r:po(n[1]+""+n[1]),g:po(n[2]+""+n[2]),b:po(n[3]+""+n[3]),a:UG(n[4]+""+n[4]),format:e?"name":"hex8"}:(n=Nl.hex3.exec(t))?{r:po(n[1]+""+n[1]),g:po(n[2]+""+n[2]),b:po(n[3]+""+n[3]),format:e?"name":"hex"}:!1}function HLe(t){var e,n;return t=t||{level:"AA",size:"small"},e=(t.level||"AA").toUpperCase(),n=(t.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),n!=="small"&&n!=="large"&&(n="small"),{level:e,size:n}}function QD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function WLe(t){if(Array.isArray(t))return t}function qLe(t){if(Array.isArray(t))return QD(t)}function xJ(t,e,n){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function XLe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yJ(t,e,n){return e=z0(e),nIe(t,$B()?Reflect.construct(e,n||[],z0(t).constructor):e.apply(t,n))}function YLe(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function vJ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wP(t,e){return t.get(xJ(t,e))}function jG(t,e,n){YLe(t,e),e.set(t,n)}function zG(t,e,n){return t.set(xJ(t,e),n),n}function bJ(t,e,n){if($B())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var i=new(t.bind.apply(t,r));return i}function KLe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wJ(r.key),r)}}function _J(t,e,n){return e&&KLe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function CC(t,e,n){return(e=wJ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JD(){return JD=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=rIe(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},JD.apply(null,arguments)}function z0(t){return z0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},z0(t)}function SJ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eL(t,e)}function $B(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($B=function(){return!!t})()}function ZLe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function QLe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function JLe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $G(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tIe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$G(Object(n),!0).forEach(function(r){CC(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$G(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nIe(t,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XLe(t)}function eL(t,e){return eL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},eL(t,e)}function Kv(t,e){return WLe(t)||QLe(t,e)||TJ(t,e)||JLe()}function rIe(t,e){for(;!{}.hasOwnProperty.call(t,e)&&(t=z0(t))!==null;);return t}function TP(t,e,n,r){var i=JD(z0(t.prototype),e,n);return typeof i=="function"?function(s){return i.apply(n,s)}:i}function Ol(t){return qLe(t)||ZLe(t)||TJ(t)||eIe()}function iIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wJ(t){var e=iIe(t,"string");return typeof e=="symbol"?e:e+""}function tL(t){"@babel/helpers - typeof";return tL=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tL(t)}function TJ(t,e){if(t){if(typeof t=="string")return QD(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?QD(t,e):void 0}}var EJ=function(e){e instanceof Array?e.forEach(EJ):(e.map&&e.map.dispose(),e.dispose())},CJ=function(e){e.geometry&&e.geometry.dispose(),e.material&&EJ(e.material),e.texture&&e.texture.dispose(),e.children&&e.children.forEach(CJ)},nL=function(e){for(;e.children.length;){var n=e.children[0];e.remove(n),CJ(n)}},EP=new WeakMap,Sw=new WeakMap,ev=(function(t){function e(n){var r,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=i.dataBindAttr,a=s===void 0?"__data":s,o=i.objBindAttr,l=o===void 0?"__threeObj":o;return vJ(this,e),r=yJ(this,e),CC(r,"scene",void 0),jG(r,EP,void 0),jG(r,Sw,void 0),r.scene=n,zG(EP,r,a),zG(Sw,r,l),r.onRemoveObj(function(){}),r}return SJ(e,t),_J(e,[{key:"onCreateObj",value:function(r){var i=this;return TP(e,"onCreateObj",this)([function(s){var a=r(s);return s[wP(Sw,i)]=a,a[wP(EP,i)]=s,i.scene.add(a),a}]),this}},{key:"onRemoveObj",value:function(r){var i=this;return TP(e,"onRemoveObj",this)([function(s,a){var o=TP(e,"getData",i)([s]);r(s,a),i.scene.remove(s),nL(s),delete o[wP(Sw,i)]}]),this}}])})(sOe),tv=function(e){return isNaN(e)?parseInt(Yt(e).toHex(),16):e},CP=function(e){return isNaN(e)?Yt(e).getAlpha():1},sIe=yC(_Le);function GG(t,e,n){!e||typeof n!="string"||t.filter(function(r){return!r[n]}).forEach(function(r){r[n]=sIe(e(r))})}function aIe(t,e){var n=t.nodes,r=t.links,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i.nodeFilter,a=s===void 0?function(){return!0}:s,o=i.onLoopError,l=o===void 0?function(m){throw"Invalid DAG structure! Found cycle in node path: ".concat(m.join(" -> "),".")}:o,c={};n.forEach(function(m){return c[e(m)]={data:m,out:[],depth:-1,skip:!a(m)}}),r.forEach(function(m){var x=m.source,b=m.target,v=A(x),_=A(b);if(!c.hasOwnProperty(v))throw"Missing source node with id: ".concat(v);if(!c.hasOwnProperty(_))throw"Missing target node with id: ".concat(_);var E=c[v],T=c[_];E.out.push(T);function A(C){return tL(C)==="object"?e(C):C}});var u=[];p(Object.values(c));var f=Object.assign.apply(Object,[{}].concat(Ol(Object.entries(c).filter(function(m){var x=Kv(m,2),b=x[1];return!b.skip}).map(function(m){var x=Kv(m,2),b=x[0],v=x[1];return CC({},b,v.depth)}))));return f;function p(m){for(var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,v=function(){var A=m[_];if(x.indexOf(A)!==-1){var C=[].concat(Ol(x.slice(x.indexOf(A))),[A]).map(function(M){return e(M.data)});return u.some(function(M){return M.length===C.length&&M.every(function(P,D){return P===C[D]})})||(u.push(C),l(C)),1}b>A.depth&&(A.depth=b,p(A.out,[].concat(Ol(x),[A]),b+(A.skip?0:1)))},_=0,E=m.length;_<E;_++)v()}}var cn=window.THREE?window.THREE:{Group:Ag,Mesh:Ji,MeshLambertMaterial:nQ,Color:Xt,BufferGeometry:Us,BufferAttribute:Bs,Matrix4:In,Vector3:ae,SphereGeometry:O_,CylinderGeometry:P_,TubeGeometry:hB,ConeGeometry:uB,Line:z2e,LineBasicMaterial:dC,QuadraticBezierCurve3:fB,CubicBezierCurve3:eQ,Box3:Wp},VG={graph:BPe,forcelayout:KPe},oIe=2,AP=new cn.BufferGeometry().setAttribute?"setAttribute":"addAttribute",ww=new cn.BufferGeometry().applyMatrix4?"applyMatrix4":"applyMatrix",lIe=xC({props:{jsonUrl:{onChange:function(e,n){var r=this;e&&!n.fetchingJson&&(n.fetchingJson=!0,n.onLoading(),fetch(e).then(function(i){return i.json()}).then(function(i){n.fetchingJson=!1,n.onFinishLoading(i),r.graphData(i)}))},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,n){n.engineRunning=!1}},numDimensions:{default:3,onChange:function(e,n){var r=n.d3ForceLayout.force("charge");r&&r.strength(e>2?-60:-30),e<3&&i(n.graphData.nodes,"z"),e<2&&i(n.graphData.nodes,"y");function i(s,a){s.forEach(function(o){delete o[a],delete o["v".concat(a)]})}}},dagMode:{onChange:function(e,n){!e&&n.forceEngine==="d3"&&(n.graphData.nodes||[]).forEach(function(r){return r.fx=r.fy=r.fz=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4},nodeId:{default:"id"},nodeVal:{default:"val"},nodeResolution:{default:8},nodeColor:{default:"color"},nodeAutoColorBy:{},nodeOpacity:{default:.75},nodeVisibility:{default:!0},nodeThreeObject:{},nodeThreeObjectExtend:{default:!1},nodePositionUpdate:{triggerUpdate:!1},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0},linkColor:{default:"color"},linkAutoColorBy:{},linkOpacity:{default:.2},linkWidth:{},linkResolution:{default:6},linkCurvature:{default:0,triggerUpdate:!1},linkCurveRotation:{default:0,triggerUpdate:!1},linkMaterial:{},linkThreeObject:{},linkThreeObjectExtend:{default:!1},linkPositionUpdate:{triggerUpdate:!1},linkDirectionalArrowLength:{default:0},linkDirectionalArrowColor:{},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1},linkDirectionalArrowResolution:{default:8},linkDirectionalParticles:{default:0},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleOffset:{default:0,triggerUpdate:!1},linkDirectionalParticleWidth:{default:.5},linkDirectionalParticleColor:{},linkDirectionalParticleResolution:{default:4},linkDirectionalParticleThreeObject:{},forceEngine:{default:"d3"},d3AlphaMin:{default:0},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,n){n.d3ForceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,n){n.d3ForceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,n){n.d3ForceLayout.velocityDecay(e)}},ngraphPhysics:{default:{timeStep:20,gravity:-1.2,theta:.8,springLength:30,springCoefficient:8e-4,dragCoefficient:.02}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onLoading:{default:function(){},triggerUpdate:!1},onFinishLoading:{default:function(){},triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1}},methods:{refresh:function(e){return e._flushObjects=!0,e._rerender(),this},d3Force:function(e,n,r){return r===void 0?e.d3ForceLayout.force(n):(e.d3ForceLayout.force(n,r),this)},d3ReheatSimulation:function(e){return e.d3ForceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},tickFrame:function(e){var n=e.forceEngine!=="ngraph";return e.engineRunning&&r(),i(),s(),this;function r(){++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||n&&e.d3AlphaMin>0&&e.d3ForceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.layout[n?"tick":"step"](),e.onEngineTick());var a=Dn(e.nodeThreeObjectExtend);e.nodeDataMapper.entries().forEach(function(p){var m=Kv(p,2),x=m[0],b=m[1];if(b){var v=n?x:e.layout.getNodePosition(x[e.nodeId]),_=a(x);(!e.nodePositionUpdate||!e.nodePositionUpdate(_?b.children[0]:b,{x:v.x,y:v.y,z:v.z},x)||_)&&(b.position.x=v.x,b.position.y=v.y||0,b.position.z=v.z||0)}});var o=Dn(e.linkWidth),l=Dn(e.linkCurvature),c=Dn(e.linkCurveRotation),u=Dn(e.linkThreeObjectExtend);e.linkDataMapper.entries().forEach(function(p){var m=Kv(p,2),x=m[0],b=m[1];if(b){var v=n?x:e.layout.getLinkPosition(e.layout.graph.getLink(x.source,x.target).id),_=v[n?"source":"from"],E=v[n?"target":"to"];if(!(!_||!E||!_.hasOwnProperty("x")||!E.hasOwnProperty("x"))){f(x);var T=u(x);if(!(e.linkPositionUpdate&&e.linkPositionUpdate(T?b.children[1]:b,{start:{x:_.x,y:_.y,z:_.z},end:{x:E.x,y:E.y,z:E.z}},x)&&!T)){var A=30,C=x.__curve,M=b.children.length?b.children[0]:b;if(M.type==="Line"){if(C){var D=C.getPoints(A);M.geometry.getAttribute("position").array.length!==D.length*3&&M.geometry[AP]("position",new cn.BufferAttribute(new Float32Array(D.length*3),3)),M.geometry.setFromPoints(D)}else{var P=M.geometry.getAttribute("position");(!P||!P.array||P.array.length!==6)&&M.geometry[AP]("position",P=new cn.BufferAttribute(new Float32Array(6),3)),P.array[0]=_.x,P.array[1]=_.y||0,P.array[2]=_.z||0,P.array[3]=E.x,P.array[4]=E.y||0,P.array[5]=E.z||0,P.needsUpdate=!0}M.geometry.computeBoundingSphere()}else if(M.type==="Mesh")if(C){M.geometry.type.match(/^Tube(Buffer)?Geometry$/)||(M.position.set(0,0,0),M.rotation.set(0,0,0),M.scale.set(1,1,1));var H=Math.ceil(o(x)*10)/10,B=H/2,j=new cn.TubeGeometry(C,A,B,e.linkResolution,!1);M.geometry.dispose(),M.geometry=j}else{if(!M.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)){var N=Math.ceil(o(x)*10)/10,L=N/2,k=new cn.CylinderGeometry(L,L,1,e.linkResolution,1,!1);k[ww](new cn.Matrix4().makeTranslation(0,1/2,0)),k[ww](new cn.Matrix4().makeRotationX(Math.PI/2)),M.geometry.dispose(),M.geometry=k}var I=new cn.Vector3(_.x,_.y||0,_.z||0),F=new cn.Vector3(E.x,E.y||0,E.z||0),z=I.distanceTo(F);M.position.x=I.x,M.position.y=I.y,M.position.z=I.z,M.scale.z=z,M.parent.localToWorld(F),M.lookAt(F)}}}}});function f(p){var m=n?p:e.layout.getLinkPosition(e.layout.graph.getLink(p.source,p.target).id),x=m[n?"source":"from"],b=m[n?"target":"to"];if(!(!x||!b||!x.hasOwnProperty("x")||!b.hasOwnProperty("x"))){var v=l(p);if(!v)p.__curve=null;else{var _=new cn.Vector3(x.x,x.y||0,x.z||0),E=new cn.Vector3(b.x,b.y||0,b.z||0),T=_.distanceTo(E),A,C=c(p);if(T>0){var M=b.x-x.x,P=b.y-x.y||0,D=new cn.Vector3().subVectors(E,_),N=D.clone().multiplyScalar(v).cross(M!==0||P!==0?new cn.Vector3(0,0,1):new cn.Vector3(0,1,0)).applyAxisAngle(D.normalize(),C).add(new cn.Vector3().addVectors(_,E).divideScalar(2));A=new cn.QuadraticBezierCurve3(_,N,E)}else{var L=v*70,k=-C,I=k+Math.PI/2;A=new cn.CubicBezierCurve3(_,new cn.Vector3(L*Math.cos(I),L*Math.sin(I),0).add(_),new cn.Vector3(L*Math.cos(k),L*Math.sin(k),0).add(_),E)}p.__curve=A}}}}function i(){var a=Dn(e.linkDirectionalArrowRelPos),o=Dn(e.linkDirectionalArrowLength),l=Dn(e.nodeVal);e.arrowDataMapper.entries().forEach(function(c){var u=Kv(c,2),f=u[0],p=u[1];if(p){var m=n?f:e.layout.getLinkPosition(e.layout.graph.getLink(f.source,f.target).id),x=m[n?"source":"from"],b=m[n?"target":"to"];if(!(!x||!b||!x.hasOwnProperty("x")||!b.hasOwnProperty("x"))){var v=Math.cbrt(Math.max(0,l(x)||1))*e.nodeRelSize,_=Math.cbrt(Math.max(0,l(b)||1))*e.nodeRelSize,E=o(f),T=a(f),A=f.__curve?function(L){return f.__curve.getPoint(L)}:function(L){var k=function(F,z,H,B){return z[F]+(H[F]-z[F])*B||0};return{x:k("x",x,b,L),y:k("y",x,b,L),z:k("z",x,b,L)}},C=f.__curve?f.__curve.getLength():Math.sqrt(["x","y","z"].map(function(L){return Math.pow((b[L]||0)-(x[L]||0),2)}).reduce(function(L,k){return L+k},0)),M=v+E+(C-v-_-E)*T,P=A(M/C),D=A((M-E)/C);["x","y","z"].forEach(function(L){return p.position[L]=D[L]});var N=bJ(cn.Vector3,Ol(["x","y","z"].map(function(L){return P[L]})));p.parent.localToWorld(N),p.lookAt(N)}}})}function s(){var a=Dn(e.linkDirectionalParticleSpeed),o=Dn(e.linkDirectionalParticleOffset);e.graphData.links.forEach(function(l){var c=e.particlesDataMapper.getObj(l),u=c&&c.children,f=l.__singleHopPhotonsObj&&l.__singleHopPhotonsObj.children;if(!((!f||!f.length)&&(!u||!u.length))){var p=n?l:e.layout.getLinkPosition(e.layout.graph.getLink(l.source,l.target).id),m=p[n?"source":"from"],x=p[n?"target":"to"];if(!(!m||!x||!m.hasOwnProperty("x")||!x.hasOwnProperty("x"))){var b=a(l),v=Math.abs(o(l)),_=l.__curve?function(T){return l.__curve.getPoint(T)}:function(T){var A=function(M,P,D,N){return P[M]+(D[M]-P[M])*N||0};return{x:A("x",m,x,T),y:A("y",m,x,T),z:A("z",m,x,T)}},E=[].concat(Ol(u||[]),Ol(f||[]));E.forEach(function(T,A){var C=T.parent.__linkThreeObjType==="singleHopPhotons";if(T.hasOwnProperty("__progressRatio")||(T.__progressRatio=C?0:(A+v)/u.length),T.__progressRatio+=b,T.__progressRatio>=1)if(!C)T.__progressRatio=T.__progressRatio%1;else{T.parent.remove(T),nL(T);return}var M=T.__progressRatio,P=_(M);T.geometry.type!=="SphereGeometry"&&T.lookAt(P.x,P.y,P.z),["x","y","z"].forEach(function(D){return T.position[D]=P[D]})})}}})}},emitParticle:function(e,n){if(n&&e.graphData.links.includes(n)){if(!n.__singleHopPhotonsObj){var r=new cn.Group;r.__linkThreeObjType="singleHopPhotons",n.__singleHopPhotonsObj=r,e.graphScene.add(r)}var i=Dn(e.linkDirectionalParticleThreeObject)(n);if(i&&e.linkDirectionalParticleThreeObject===i&&(i=i.clone()),!i){var s=Dn(e.linkDirectionalParticleWidth),a=Math.ceil(s(n)*10)/10/2,o=e.linkDirectionalParticleResolution,l=new cn.SphereGeometry(a,o,o),c=Dn(e.linkColor),u=Dn(e.linkDirectionalParticleColor),f=u(n)||c(n)||"#f0f0f0",p=new cn.Color(tv(f)),m=e.linkOpacity*3,x=new cn.MeshLambertMaterial({color:p,transparent:!0,opacity:m});i=new cn.Mesh(l,x)}n.__singleHopPhotonsObj.add(i)}return this},getGraphBbox:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0};if(!e.initialised)return null;var r=(function i(s){var a=[];if(s.geometry){s.geometry.computeBoundingBox();var o=new cn.Box3;o.copy(s.geometry.boundingBox).applyMatrix4(s.matrixWorld),a.push(o)}return a.concat.apply(a,Ol((s.children||[]).filter(function(l){return!l.hasOwnProperty("__graphObjType")||l.__graphObjType==="node"&&n(l.__data)}).map(i)))})(e.graphScene);return r.length?Object.assign.apply(Object,Ol(["x","y","z"].map(function(i){return CC({},i,[HD(r,function(s){return s.min[i]}),VD(r,function(s){return s.max[i]})])}))):null}},stateInit:function(){return{d3ForceLayout:NPe().force("link",gPe()).force("charge",OPe()).force("center",y3e()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,n){n.graphScene=e,n.nodeDataMapper=new ev(e,{objBindAttr:"__threeObj"}),n.linkDataMapper=new ev(e,{objBindAttr:"__lineObj"}),n.arrowDataMapper=new ev(e,{objBindAttr:"__arrowObj"}),n.particlesDataMapper=new ev(e,{objBindAttr:"__photonsObj"})},update:function(e,n){var r=function(K){return K.some(function(ne){return n.hasOwnProperty(ne)})};if(e.engineRunning=!1,typeof e.onUpdate=="function"&&e.onUpdate(),e.nodeAutoColorBy!==null&&r(["nodeAutoColorBy","graphData","nodeColor"])&&GG(e.graphData.nodes,Dn(e.nodeAutoColorBy),e.nodeColor),e.linkAutoColorBy!==null&&r(["linkAutoColorBy","graphData","linkColor"])&&GG(e.graphData.links,Dn(e.linkAutoColorBy),e.linkColor),e._flushObjects||r(["graphData","nodeThreeObject","nodeThreeObjectExtend","nodeVal","nodeColor","nodeVisibility","nodeRelSize","nodeResolution","nodeOpacity"])){var i=Dn(e.nodeThreeObject),s=Dn(e.nodeThreeObjectExtend),a=Dn(e.nodeVal),o=Dn(e.nodeColor),l=Dn(e.nodeVisibility),c={},u={};(e._flushObjects||r(["nodeThreeObject","nodeThreeObjectExtend"]))&&e.nodeDataMapper.clear(),e.nodeDataMapper.onCreateObj(function(te){var K=i(te),ne=s(te);K&&e.nodeThreeObject===K&&(K=K.clone());var Ee;return K&&!ne?Ee=K:(Ee=new cn.Mesh,Ee.__graphDefaultObj=!0,K&&ne&&Ee.add(K)),Ee.__graphObjType="node",Ee}).onUpdateObj(function(te,K){if(te.__graphDefaultObj){var ne=a(K)||1,Ee=Math.cbrt(ne)*e.nodeRelSize,se=e.nodeResolution;(!te.geometry.type.match(/^Sphere(Buffer)?Geometry$/)||te.geometry.parameters.radius!==Ee||te.geometry.parameters.widthSegments!==se)&&(c.hasOwnProperty(ne)||(c[ne]=new cn.SphereGeometry(Ee,se,se)),te.geometry.dispose(),te.geometry=c[ne]);var ve=o(K),Pe=new cn.Color(tv(ve||"#ffffaa")),ge=e.nodeOpacity*CP(ve);(te.material.type!=="MeshLambertMaterial"||!te.material.color.equals(Pe)||te.material.opacity!==ge)&&(u.hasOwnProperty(ve)||(u[ve]=new cn.MeshLambertMaterial({color:Pe,transparent:!0,opacity:ge})),te.material.dispose(),te.material=u[ve])}}).digest(e.graphData.nodes.filter(l))}if(e._flushObjects||r(["graphData","linkThreeObject","linkThreeObjectExtend","linkMaterial","linkColor","linkWidth","linkVisibility","linkResolution","linkOpacity","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","linkDirectionalParticleThreeObject"])){var f=Dn(e.linkThreeObject),p=Dn(e.linkThreeObjectExtend),m=Dn(e.linkMaterial),x=Dn(e.linkVisibility),b=Dn(e.linkColor),v=Dn(e.linkWidth),_={},E={},T={},A=e.graphData.links.filter(x);if((e._flushObjects||r(["linkThreeObject","linkThreeObjectExtend","linkWidth"]))&&e.linkDataMapper.clear(),e.linkDataMapper.onRemoveObj(function(te){var K=te.__data&&te.__data.__singleHopPhotonsObj;K&&(K.parent.remove(K),nL(K),delete te.__data.__singleHopPhotonsObj)}).onCreateObj(function(te){var K=f(te),ne=p(te);K&&e.linkThreeObject===K&&(K=K.clone());var Ee;if(!K||ne){var se=!!v(te);if(se)Ee=new cn.Mesh;else{var ve=new cn.BufferGeometry;ve[AP]("position",new cn.BufferAttribute(new Float32Array(6),3)),Ee=new cn.Line(ve)}}var Pe;return K?ne?(Pe=new cn.Group,Pe.__graphDefaultObj=!0,Pe.add(Ee),Pe.add(K)):Pe=K:(Pe=Ee,Pe.__graphDefaultObj=!0),Pe.renderOrder=10,Pe.__graphObjType="link",Pe}).onUpdateObj(function(te,K){if(te.__graphDefaultObj){var ne=te.children.length?te.children[0]:te,Ee=Math.ceil(v(K)*10)/10,se=!!Ee;if(se){var ve=Ee/2,Pe=e.linkResolution;if(!ne.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)||ne.geometry.parameters.radiusTop!==ve||ne.geometry.parameters.radialSegments!==Pe){if(!_.hasOwnProperty(Ee)){var ge=new cn.CylinderGeometry(ve,ve,1,Pe,1,!1);ge[ww](new cn.Matrix4().makeTranslation(0,1/2,0)),ge[ww](new cn.Matrix4().makeRotationX(Math.PI/2)),_[Ee]=ge}ne.geometry.dispose(),ne.geometry=_[Ee]}}var be=m(K);if(be)ne.material=be;else{var _e=b(K),Q=new cn.Color(tv(_e||"#f0f0f0")),et=e.linkOpacity*CP(_e),ze=se?"MeshLambertMaterial":"LineBasicMaterial";if(ne.material.type!==ze||!ne.material.color.equals(Q)||ne.material.opacity!==et){var Je=se?E:T;Je.hasOwnProperty(_e)||(Je[_e]=new cn[ze]({color:Q,transparent:et<1,opacity:et,depthWrite:et>=1})),ne.material.dispose(),ne.material=Je[_e]}}}}).digest(A),e.linkDirectionalArrowLength||n.hasOwnProperty("linkDirectionalArrowLength")){var C=Dn(e.linkDirectionalArrowLength),M=Dn(e.linkDirectionalArrowColor);e.arrowDataMapper.onCreateObj(function(){var te=new cn.Mesh(void 0,new cn.MeshLambertMaterial({transparent:!0}));return te.__linkThreeObjType="arrow",te}).onUpdateObj(function(te,K){var ne=C(K),Ee=e.linkDirectionalArrowResolution;if(!te.geometry.type.match(/^Cone(Buffer)?Geometry$/)||te.geometry.parameters.height!==ne||te.geometry.parameters.radialSegments!==Ee){var se=new cn.ConeGeometry(ne*.25,ne,Ee);se.translate(0,ne/2,0),se.rotateX(Math.PI/2),te.geometry.dispose(),te.geometry=se}var ve=M(K)||b(K)||"#f0f0f0";te.material.color=new cn.Color(tv(ve)),te.material.opacity=e.linkOpacity*3*CP(ve)}).digest(A.filter(C))}if(e.linkDirectionalParticles||n.hasOwnProperty("linkDirectionalParticles")){var P=Dn(e.linkDirectionalParticles),D=Dn(e.linkDirectionalParticleWidth),N=Dn(e.linkDirectionalParticleColor),L=Dn(e.linkDirectionalParticleThreeObject),k={},I={};e.particlesDataMapper.onCreateObj(function(){var te=new cn.Group;return te.__linkThreeObjType="photons",te.__photonDataMapper=new ev(te),te}).onUpdateObj(function(te,K){var ne=!!te.children.length&&te.children[0],Ee=L(K),se,ve;if(Ee)se=Ee.geometry,ve=Ee.material;else{var Pe=Math.ceil(D(K)*10)/10/2,ge=e.linkDirectionalParticleResolution;ne&&ne.geometry.parameters.radius===Pe&&ne.geometry.parameters.widthSegments===ge?se=ne.geometry:(I.hasOwnProperty(Pe)||(I[Pe]=new cn.SphereGeometry(Pe,ge,ge)),se=I[Pe]);var be=N(K)||b(K)||"#f0f0f0",_e=new cn.Color(tv(be)),Q=e.linkOpacity*3;ne&&ne.material.color.equals(_e)&&ne.material.opacity===Q?ve=ne.material:(k.hasOwnProperty(be)||(k[be]=new cn.MeshLambertMaterial({color:_e,transparent:!0,opacity:Q})),ve=k[be])}ne&&(ne.geometry!==se&&ne.geometry.dispose(),ne.material!==ve&&ne.material.dispose());var et=Math.round(Math.abs(P(K)));te.__photonDataMapper.id(function(ze){return ze.idx}).onCreateObj(function(){return new cn.Mesh(se,ve)}).onUpdateObj(function(ze){ze.geometry=se,ze.material=ve}).digest(Ol(new Array(et)).map(function(ze,Je){return{idx:Je}}))}).digest(A.filter(P))}}if(e._flushObjects=!1,r(["graphData","nodeId","linkSource","linkTarget","numDimensions","forceEngine","dagMode","dagNodeFilter","dagLevelDistance"])){e.engineRunning=!1,e.graphData.links.forEach(function(te){te.source=te[e.linkSource],te.target=te[e.linkTarget]});var F=e.forceEngine!=="ngraph",z;if(F){(z=e.d3ForceLayout).stop().alpha(1).numDimensions(e.numDimensions).nodes(e.graphData.nodes);var H=e.d3ForceLayout.force("link");H&&H.id(function(te){return te[e.nodeId]}).links(e.graphData.links);var B=e.dagMode&&aIe(e.graphData,function(te){return te[e.nodeId]},{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),j=Math.max.apply(Math,Ol(Object.values(B||[]))),G=e.dagLevelDistance||e.graphData.nodes.length/(j||1)*oIe*(["radialin","radialout"].indexOf(e.dagMode)!==-1?.7:1);if(["lr","rl","td","bu","zin","zout"].includes(n.dagMode)){var W=["lr","rl"].includes(n.dagMode)?"fx":["td","bu"].includes(n.dagMode)?"fy":"fz";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(te){return delete te[W]})}if(["lr","rl","td","bu","zin","zout"].includes(e.dagMode)){var re=["rl","td","zout"].includes(e.dagMode),$=function(K){return(B[K[e.nodeId]]-j/2)*G*(re?-1:1)},ee=["lr","rl"].includes(e.dagMode)?"fx":["td","bu"].includes(e.dagMode)?"fy":"fz";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(te){return te[ee]=$(te)})}e.d3ForceLayout.force("dagRadial",["radialin","radialout"].indexOf(e.dagMode)!==-1?DPe(function(te){var K=B[te[e.nodeId]]||-1;return(e.dagMode==="radialin"?j-K:K)*G}).strength(function(te){return e.dagNodeFilter(te)?1:0}):null)}else{var oe=VG.graph();e.graphData.nodes.forEach(function(te){oe.addNode(te[e.nodeId])}),e.graphData.links.forEach(function(te){oe.addLink(te.source,te.target)}),z=VG.forcelayout(oe,tIe({dimensions:e.numDimensions},e.ngraphPhysics)),z.graph=oe}for(var me=0;me<e.warmupTicks&&!(F&&e.d3AlphaMin>0&&e.d3ForceLayout.alpha()<e.d3AlphaMin);me++)z[F?"tick":"step"]();e.layout=z,this.resetCountdown()}e.engineRunning=!0,e.onFinishUpdate()}});function cIe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Object,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=(function(i){function s(){var a;vJ(this,s);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return a=yJ(this,s,[].concat(l)),a.__kapsuleInstance=bJ(t,[].concat(Ol(n?[a]:[]),l)),a}return SJ(s,i),_J(s)})(e);return Object.keys(t()).forEach(function(i){return r.prototype[i]=function(){var s,a=(s=this.__kapsuleInstance)[i].apply(s,arguments);return a===this.__kapsuleInstance?this:a}}),r}var uIe=window.THREE?window.THREE:{Group:Ag},AJ=cIe(lIe,uIe.Group,!0);const dIe=["alphaMap","alphaTest","anisotropy","anisotropyMap","anisotropyRotation","aoMap","aoMapIntensity","attenuationColor","attenuationDistance","bumpMap","clearcoat","clearcoatMap","clearcoatNormalMap","clearcoatNormalScale","clearcoatRoughness","color","dispersion","displacementMap","emissive","emissiveIntensity","emissiveMap","envMap","envMapIntensity","gradientMap","ior","iridescence","iridescenceIOR","iridescenceMap","iridescenceThicknessMap","lightMap","lightMapIntensity","map","matcap","metalness","metalnessMap","normalMap","normalScale","opacity","roughness","roughnessMap","sheen","sheenColor","sheenColorMap","sheenRoughnessMap","shininess","specular","specularColor","specularColorMap","specularIntensity","specularIntensityMap","specularMap","thickness","transmission","transmissionMap"],MP=new WeakMap;class fIe{constructor(e){this.renderObjects=new WeakMap,this.hasNode=this.containsNode(e),this.hasAnimation=e.object.isSkinnedMesh===!0,this.refreshUniforms=dIe,this.renderId=0}firstInitialization(e){return this.renderObjects.has(e)===!1?(this.getRenderObjectData(e),!0):!1}needsVelocity(e){const n=e.getMRT();return n!==null&&n.has("velocity")}getRenderObjectData(e){let n=this.renderObjects.get(e);if(n===void 0){const{geometry:r,material:i,object:s}=e;if(n={material:this.getMaterialData(i),geometry:{id:r.id,attributes:this.getAttributesData(r.attributes),indexVersion:r.index?r.index.version:null,drawRange:{start:r.drawRange.start,count:r.drawRange.count}},worldMatrix:s.matrixWorld.clone()},s.center&&(n.center=s.center.clone()),s.morphTargetInfluences&&(n.morphTargetInfluences=s.morphTargetInfluences.slice()),e.bundle!==null&&(n.version=e.bundle.version),n.material.transmission>0){const{width:a,height:o}=e.context;n.bufferWidth=a,n.bufferHeight=o}n.lights=this.getLightsData(e.lightsNode.getLights()),this.renderObjects.set(e,n)}return n}getAttributesData(e){const n={};for(const r in e){const i=e[r];n[r]={version:i.version}}return n}containsNode(e){const n=e.material;for(const r in n)if(n[r]&&n[r].isNode)return!0;return e.renderer.overrideNodes.modelViewMatrix!==null||e.renderer.overrideNodes.modelNormalViewMatrix!==null}getMaterialData(e){const n={};for(const r of this.refreshUniforms){const i=e[r];i!=null&&(typeof i=="object"&&i.clone!==void 0?i.isTexture===!0?n[r]={id:i.id,version:i.version}:n[r]=i.clone():n[r]=i)}return n}equals(e,n){const{object:r,material:i,geometry:s}=e,a=this.getRenderObjectData(e);if(a.worldMatrix.equals(r.matrixWorld)!==!0)return a.worldMatrix.copy(r.matrixWorld),!1;const o=a.material;for(const v in o){const _=o[v],E=i[v];if(_.equals!==void 0){if(_.equals(E)===!1)return _.copy(E),!1}else if(E.isTexture===!0){if(_.id!==E.id||_.version!==E.version)return _.id=E.id,_.version=E.version,!1}else if(_!==E)return o[v]=E,!1}if(o.transmission>0){const{width:v,height:_}=e.context;if(a.bufferWidth!==v||a.bufferHeight!==_)return a.bufferWidth=v,a.bufferHeight=_,!1}const l=a.geometry,c=s.attributes,u=l.attributes,f=Object.keys(u),p=Object.keys(c);if(l.id!==s.id)return l.id=s.id,!1;if(f.length!==p.length)return a.geometry.attributes=this.getAttributesData(c),!1;for(const v of f){const _=u[v],E=c[v];if(E===void 0)return delete u[v],!1;if(_.version!==E.version)return _.version=E.version,!1}const m=s.index,x=l.indexVersion,b=m?m.version:null;if(x!==b)return l.indexVersion=b,!1;if(l.drawRange.start!==s.drawRange.start||l.drawRange.count!==s.drawRange.count)return l.drawRange.start=s.drawRange.start,l.drawRange.count=s.drawRange.count,!1;if(a.morphTargetInfluences){let v=!1;for(let _=0;_<a.morphTargetInfluences.length;_++)a.morphTargetInfluences[_]!==r.morphTargetInfluences[_]&&(a.morphTargetInfluences[_]=r.morphTargetInfluences[_],v=!0);if(v)return!1}if(a.lights){for(let v=0;v<n.length;v++)if(a.lights[v].map!==n[v].map)return!1}return a.center&&a.center.equals(r.center)===!1?(a.center.copy(r.center),!0):(e.bundle!==null&&(a.version=e.bundle.version),!0)}getLightsData(e){const n=[];for(const r of e)r.isSpotLight===!0&&r.map!==null&&n.push({map:r.map.version});return n}getLights(e,n){if(MP.has(e)){const i=MP.get(e);if(i.renderId===n)return i.lightsData}const r=this.getLightsData(e.getLights());return MP.set(e,{renderId:n,lightsData:r}),r}needsRefresh(e,n){if(this.hasNode||this.hasAnimation||this.firstInitialization(e)||this.needsVelocity(n.renderer))return!0;const{renderId:r}=n;if(this.renderId!==r)return this.renderId=r,!0;const i=e.object.static===!0,s=e.bundle!==null&&e.bundle.static===!0&&this.getRenderObjectData(e).version===e.bundle.version;if(i||s)return!1;const a=this.getLights(e.lightsNode,r);return this.equals(e,a)!==!0}}function GB(t,e=0){let n=3735928559^e,r=1103547991^e;if(t instanceof Array)for(let i=0,s;i<t.length;i++)s=t[i],n=Math.imul(n^s,2654435761),r=Math.imul(r^s,1597334677);else for(let i=0,s;i<t.length;i++)s=t.charCodeAt(i),n=Math.imul(n^s,2654435761),r=Math.imul(r^s,1597334677);return n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507),r^=Math.imul(n^n>>>13,3266489909),4294967296*(2097151&r)+(n>>>0)}const AC=t=>GB(t),F_=t=>GB(t),Zv=(...t)=>GB(t),hIe=new Map([[1,"float"],[2,"vec2"],[3,"vec3"],[4,"vec4"],[9,"mat3"],[16,"mat4"]]),HG=new WeakMap;function pIe(t){return hIe.get(t)}function _2(t){if(t==null)return null;const e=typeof t;return t.isNode===!0?"node":e==="number"?"float":e==="boolean"?"bool":e==="string"?"string":e==="function"?"shader":t.isVector2===!0?"vec2":t.isVector3===!0?"vec3":t.isVector4===!0?"vec4":t.isMatrix2===!0?"mat2":t.isMatrix3===!0?"mat3":t.isMatrix4===!0?"mat4":t.isColor===!0?"color":t instanceof ArrayBuffer?"ArrayBuffer":null}function VB(t,...e){const n=t?t.slice(-4):void 0;return e.length===1&&(n==="vec2"?e=[e[0],e[0]]:n==="vec3"?e=[e[0],e[0],e[0]]:n==="vec4"&&(e=[e[0],e[0],e[0],e[0]])),t==="color"?new Xt(...e):n==="vec2"?new mt(...e):n==="vec3"?new ae(...e):n==="vec4"?new an(...e):n==="mat2"?new fC(...e):n==="mat3"?new pn(...e):n==="mat4"?new In(...e):t==="bool"?e[0]||!1:t==="float"||t==="int"||t==="uint"?e[0]||0:t==="string"?e[0]||"":t==="ArrayBuffer"?gIe(e[0]):null}function MJ(t){let e=HG.get(t);return e===void 0&&(e={},HG.set(t,e)),e}function mIe(t){let e="";const n=new Uint8Array(t);for(let r=0;r<n.length;r++)e+=String.fromCharCode(n[r]);return btoa(e)}function gIe(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0)).buffer}const Tw={VERTEX:"vertex"},yn={NONE:"none",FRAME:"frame",RENDER:"render",OBJECT:"object"},Mc={READ_ONLY:"readOnly",WRITE_ONLY:"writeOnly",READ_WRITE:"readWrite"},xIe=["fragment","vertex"],WG=["setup","analyze","generate"],qG=[...xIe,"compute"],wx=["x","y","z","w"],yIe={analyze:"setup",generate:"analyze"};let vIe=0;class Wt extends Yc{static get type(){return"Node"}constructor(e=null){super(),this.nodeType=e,this.updateType=yn.NONE,this.updateBeforeType=yn.NONE,this.updateAfterType=yn.NONE,this.uuid=i2.generateUUID(),this.version=0,this.name="",this.global=!1,this.parents=!1,this.isNode=!0,this._beforeNodes=null,this._cacheKey=null,this._cacheKeyVersion=0,Object.defineProperty(this,"id",{value:vIe++})}set needsUpdate(e){e===!0&&this.version++}get type(){return this.constructor.type}onUpdate(e,n){return this.updateType=n,this.update=e.bind(this),this}onFrameUpdate(e){return this.onUpdate(e,yn.FRAME)}onRenderUpdate(e){return this.onUpdate(e,yn.RENDER)}onObjectUpdate(e){return this.onUpdate(e,yn.OBJECT)}onReference(e){return this.updateReference=e.bind(this),this}updateReference(){return this}isGlobal(){return this.global}*getChildren(){for(const{childNode:e}of this._getChildren())yield e}dispose(){this.dispatchEvent({type:"dispose"})}traverse(e){e(this);for(const n of this.getChildren())n.traverse(e)}_getChildren(e=new Set){const n=[];e.add(this);for(const r of Object.getOwnPropertyNames(this)){const i=this[r];if(!(r.startsWith("_")===!0||e.has(i))){if(Array.isArray(i)===!0)for(let s=0;s<i.length;s++){const a=i[s];a&&a.isNode===!0&&n.push({property:r,index:s,childNode:a})}else if(i&&i.isNode===!0)n.push({property:r,childNode:i});else if(i&&Object.getPrototypeOf(i)===Object.prototype)for(const s in i){if(s.startsWith("_")===!0)continue;const a=i[s];a&&a.isNode===!0&&n.push({property:r,index:s,childNode:a})}}}return n}getCacheKey(e=!1,n=null){if(e=e||this.version!==this._cacheKeyVersion,e===!0||this._cacheKey===null){n===null&&(n=new Set);const r=[];for(const{property:i,childNode:s}of this._getChildren(n))r.push(AC(i.slice(0,-4)),s.getCacheKey(e,n));this._cacheKey=Zv(F_(r),this.customCacheKey()),this._cacheKeyVersion=this.version}return this._cacheKey}customCacheKey(){return this.id}getScope(){return this}getHash(){return this.uuid}getUpdateType(){return this.updateType}getUpdateBeforeType(){return this.updateBeforeType}getUpdateAfterType(){return this.updateAfterType}getElementType(e){const n=this.getNodeType(e);return e.getElementType(n)}getMemberType(){return"void"}getNodeType(e){const n=e.getNodeProperties(this);return n.outputNode?n.outputNode.getNodeType(e):this.nodeType}getShared(e){const n=this.getHash(e);return e.getNodeFromHash(n)||this}getArrayCount(){return null}setup(e){const n=e.getNodeProperties(this);let r=0;for(const i of this.getChildren())n["node"+r++]=i;return n.outputNode||null}analyze(e,n=null){const r=e.increaseUsage(this);if(this.parents===!0){const i=e.getDataFromNode(this,"any");i.stages=i.stages||{},i.stages[e.shaderStage]=i.stages[e.shaderStage]||[],i.stages[e.shaderStage].push(n)}if(r===1){const i=e.getNodeProperties(this);for(const s of Object.values(i))s&&s.isNode===!0&&s.build(e,this)}}generate(e,n){const{outputNode:r}=e.getNodeProperties(this);if(r&&r.isNode===!0)return r.build(e,n)}updateBefore(){ct("Abstract function.")}updateAfter(){ct("Abstract function.")}update(){ct("Abstract function.")}before(e){return this._beforeNodes===null&&(this._beforeNodes=[]),this._beforeNodes.push(e),this}build(e,n=null){const r=this.getShared(e);if(this!==r)return r.build(e,n);if(this._beforeNodes!==null){const l=this._beforeNodes;this._beforeNodes=null;for(const c of l)c.build(e,n);this._beforeNodes=l}const i=e.getDataFromNode(this);i.buildStages=i.buildStages||{},i.buildStages[e.buildStage]=!0;const s=yIe[e.buildStage];if(s&&i.buildStages[s]!==!0){const l=e.getBuildStage();e.setBuildStage(s),this.build(e),e.setBuildStage(l)}e.addNode(this),e.addChain(this);let a=null;const o=e.getBuildStage();if(o==="setup"){this.updateReference(e);const l=e.getNodeProperties(this);if(l.initialized!==!0){l.initialized=!0,l.outputNode=this.setup(e)||l.outputNode||null;for(const c of Object.values(l))if(c&&c.isNode===!0){if(c.parents===!0){const u=e.getNodeProperties(c);u.parents=u.parents||[],u.parents.push(this)}c.build(e)}}a=l.outputNode}else if(o==="analyze")this.analyze(e,n);else if(o==="generate"){if(this.generate.length<2){const c=this.getNodeType(e),u=e.getDataFromNode(this);a=u.snippet,a===void 0?u.generated===void 0?(u.generated=!0,a=this.generate(e)||"",u.snippet=a):(ct("Node: Recursion detected.",this),a="/* Recursion detected. */"):u.flowCodes!==void 0&&e.context.nodeBlock!==void 0&&e.addFlowCodeHierarchy(this,e.context.nodeBlock),a=e.format(a,c,n)}else a=this.generate(e,n)||"";a===""&&n!==null&&n!=="void"&&n!=="OutputType"&&(xt(`TSL: Invalid generated code, expected a "${n}".`),a=e.generateConst(n))}return e.removeChain(this),e.addSequentialNode(this),a}getSerializeChildren(){return this._getChildren()}serialize(e){const n=this.getSerializeChildren(),r={};for(const{property:i,index:s,childNode:a}of n)s!==void 0?(r[i]===void 0&&(r[i]=Number.isInteger(s)?[]:{}),r[i][s]=a.toJSON(e.meta).uuid):r[i]=a.toJSON(e.meta).uuid;Object.keys(r).length>0&&(e.inputNodes=r)}deserialize(e){if(e.inputNodes!==void 0){const n=e.meta.nodes;for(const r in e.inputNodes)if(Array.isArray(e.inputNodes[r])){const i=[];for(const s of e.inputNodes[r])i.push(n[s]);this[r]=i}else if(typeof e.inputNodes[r]=="object"){const i={};for(const s in e.inputNodes[r]){const a=e.inputNodes[r][s];i[s]=n[a]}this[r]=i}else{const i=e.inputNodes[r];this[r]=n[i]}}}toJSON(e){const{uuid:n,type:r}=this,i=e===void 0||typeof e=="string";i&&(e={textures:{},images:{},nodes:{}});let s=e.nodes[n];s===void 0&&(s={uuid:n,type:r,meta:e,metadata:{version:4.7,type:"Node",generator:"Node.toJSON"}},i!==!0&&(e.nodes[s.uuid]=s),this.serialize(s),delete s.meta);function a(o){const l=[];for(const c in o){const u=o[c];delete u.metadata,l.push(u)}return l}if(i){const o=a(e.textures),l=a(e.images),c=a(e.nodes);o.length>0&&(s.textures=o),l.length>0&&(s.images=l),c.length>0&&(s.nodes=c)}return s}}class U_ extends Wt{static get type(){return"ArrayElementNode"}constructor(e,n){super(),this.node=e,this.indexNode=n,this.isArrayElementNode=!0}getNodeType(e){return this.node.getElementType(e)}generate(e){const n=this.indexNode.getNodeType(e),r=this.node.build(e),i=this.indexNode.build(e,!e.isVector(n)&&e.isInteger(n)?n:"uint");return`${r}[ ${i} ]`}}class RJ extends Wt{static get type(){return"ConvertNode"}constructor(e,n){super(),this.node=e,this.convertTo=n}getNodeType(e){const n=this.node.getNodeType(e);let r=null;for(const i of this.convertTo.split("|"))(r===null||e.getTypeLength(n)===e.getTypeLength(i))&&(r=i);return r}serialize(e){super.serialize(e),e.convertTo=this.convertTo}deserialize(e){super.deserialize(e),this.convertTo=e.convertTo}generate(e,n){const r=this.node,i=this.getNodeType(e),s=r.build(e,i);return e.format(s,i,n)}}class is extends Wt{static get type(){return"TempNode"}constructor(e=null){super(e),this.isTempNode=!0}hasDependencies(e){return e.getDataFromNode(this).usageCount>1}build(e,n){if(e.getBuildStage()==="generate"){const i=e.getVectorType(this.getNodeType(e,n)),s=e.getDataFromNode(this);if(s.propertyName!==void 0)return e.format(s.propertyName,i,n);if(i!=="void"&&n!=="void"&&this.hasDependencies(e)){const a=super.build(e,i),o=e.getVarFromNode(this,null,i),l=e.getPropertyName(o);return e.addLineFlowCode(`${l} = ${a}`,this),s.snippet=a,s.propertyName=l,e.format(s.propertyName,i,n)}}return super.build(e,n)}}class bIe extends is{static get type(){return"JoinNode"}constructor(e=[],n=null){super(n),this.nodes=e}getNodeType(e){return this.nodeType!==null?e.getVectorType(this.nodeType):e.getTypeFromLength(this.nodes.reduce((n,r)=>n+e.getTypeLength(r.getNodeType(e)),0))}generate(e,n){const r=this.getNodeType(e),i=e.getTypeLength(r),s=this.nodes,a=e.getComponentType(r),o=[];let l=0;for(const u of s){if(l>=i){xt(`TSL: Length of parameters exceeds maximum length of function '${r}()' type.`);break}let f=u.getNodeType(e),p=e.getTypeLength(f),m;if(l+p>i&&(xt(`TSL: Length of '${r}()' data exceeds maximum length of output type.`),p=i-l,f=e.getTypeFromLength(p)),l+=p,m=u.build(e,f),e.getComponentType(f)!==a){const b=e.getTypeFromLength(p,a);m=e.format(m,f,b)}o.push(m)}const c=`${e.getType(r)}( ${o.join(", ")} )`;return e.format(c,r,n)}}const _Ie=wx.join("");class SIe extends Wt{static get type(){return"SplitNode"}constructor(e,n="x"){super(),this.node=e,this.components=n,this.isSplitNode=!0}getVectorLength(){let e=this.components.length;for(const n of this.components)e=Math.max(wx.indexOf(n)+1,e);return e}getComponentType(e){return e.getComponentType(this.node.getNodeType(e))}getNodeType(e){return e.getTypeFromLength(this.components.length,this.getComponentType(e))}getScope(){return this.node.getScope()}generate(e,n){const r=this.node,i=e.getTypeLength(r.getNodeType(e));let s=null;if(i>1){let a=null;this.getVectorLength()>=i&&(a=e.getTypeFromLength(this.getVectorLength(),this.getComponentType(e)));const l=r.build(e,a);this.components.length===i&&this.components===_Ie.slice(0,this.components.length)?s=e.format(l,a,n):s=e.format(`${l}.${this.components}`,this.getNodeType(e),n)}else s=r.build(e,n);return s}serialize(e){super.serialize(e),e.components=this.components}deserialize(e){super.deserialize(e),this.components=e.components}}class wIe extends is{static get type(){return"SetNode"}constructor(e,n,r){super(),this.sourceNode=e,this.components=n,this.targetNode=r}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{sourceNode:n,components:r,targetNode:i}=this,s=this.getNodeType(e),a=e.getComponentType(i.getNodeType(e)),o=e.getTypeFromLength(r.length,a),l=i.build(e,o),c=n.build(e,s),u=e.getTypeLength(s),f=[];for(let p=0;p<u;p++){const m=wx[p];m===r[0]?(f.push(l),p+=r.length-1):f.push(c+"."+m)}return`${e.getType(s)}( ${f.join(", ")} )`}}class TIe extends is{static get type(){return"FlipNode"}constructor(e,n){super(),this.sourceNode=e,this.components=n}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{components:n,sourceNode:r}=this,i=this.getNodeType(e),s=r.build(e),a=e.getVarFromNode(this),o=e.getPropertyName(a);e.addLineFlowCode(o+" = "+s,this);const l=e.getTypeLength(i),c=[];let u=0;for(let f=0;f<l;f++){const p=wx[f];p===n[u]?(c.push("1.0 - "+(o+"."+p)),u++):c.push(o+"."+p)}return`${e.getType(i)}( ${c.join(", ")} )`}}class HB extends Wt{static get type(){return"InputNode"}constructor(e,n=null){super(n),this.isInputNode=!0,this.value=e,this.precision=null}getNodeType(){return this.nodeType===null?_2(this.value):this.nodeType}getInputType(e){return this.getNodeType(e)}setPrecision(e){return this.precision=e,this}serialize(e){super.serialize(e),e.value=this.value,this.value&&this.value.toArray&&(e.value=this.value.toArray()),e.valueType=_2(this.value),e.nodeType=this.nodeType,e.valueType==="ArrayBuffer"&&(e.value=mIe(e.value)),e.precision=this.precision}deserialize(e){super.deserialize(e),this.nodeType=e.nodeType,this.value=Array.isArray(e.value)?VB(e.valueType,...e.value):e.value,this.precision=e.precision||null,this.value&&this.value.fromArray&&(this.value=this.value.fromArray(e.value))}generate(){ct("Abstract function.")}}const XG=/float|u?int/;class Kc extends HB{static get type(){return"ConstNode"}constructor(e,n=null){super(e,n),this.isConstNode=!0}generateConst(e){return e.generateConst(this.getNodeType(e),this.value)}generate(e,n){const r=this.getNodeType(e);return XG.test(r)&&XG.test(n)?e.generateConst(n,this.value):e.format(this.generateConst(e),r,n)}}class EIe extends Wt{static get type(){return"MemberNode"}constructor(e,n){super(),this.structNode=e,this.property=n,this.isMemberNode=!0}hasMember(e){return this.structNode.isMemberNode&&this.structNode.hasMember(e)===!1?!1:this.structNode.getMemberType(e,this.property)!=="void"}getNodeType(e){return this.hasMember(e)===!1?"float":this.structNode.getMemberType(e,this.property)}getMemberType(e,n){if(this.hasMember(e)===!1)return"float";const r=this.getNodeType(e);return e.getStructTypeNode(r).getMemberType(e,n)}generate(e){if(this.hasMember(e)===!1){ct(`TSL: Member "${this.property}" does not exist in struct.`);const r=this.getNodeType(e);return e.generateConst(r)}return this.structNode.build(e)+"."+this.property}}let Dp=null;const rL=new Map;function Ye(t,e){if(rL.has(t)){ct(`TSL: Redefinition of method chaining '${t}'.`);return}if(typeof e!="function")throw new Error(`THREE.TSL: Node element ${t} is not a function`);rL.set(t,e),t!=="assign"&&(Wt.prototype[t]=function(...n){return this.isStackNode?this.addToStack(e(...n)):e(this,...n)},Wt.prototype[t+"Assign"]=function(...n){return this.isStackNode?this.assign(n[0],e(...n)):this.assign(e(this,...n))})}const CIe=t=>t.replace(/r|s/g,"x").replace(/g|t/g,"y").replace(/b|p/g,"z").replace(/a|q/g,"w"),YG=t=>CIe(t).split("").sort().join("");Wt.prototype.assign=function(...t){if(this.isStackNode!==!0)return Dp!==null?Dp.assign(this,...t):xt("TSL: No stack defined for assign operation. Make sure the assign is inside a Fn()."),this;{const e=rL.get("assign");return this.addToStack(e(...t))}};Wt.prototype.toVarIntent=function(){return this};Wt.prototype.get=function(t){return new EIe(this,t)};const Qv={};function Ew(t,e,n){Qv[t]=Qv[e]=Qv[n]={get(){this._cache=this._cache||{};let a=this._cache[t];return a===void 0&&(a=new SIe(this,t),this._cache[t]=a),a},set(a){this[t].assign(pt(a))}};const r=t.toUpperCase(),i=e.toUpperCase(),s=n.toUpperCase();Wt.prototype["set"+r]=Wt.prototype["set"+i]=Wt.prototype["set"+s]=function(a){const o=YG(t);return new wIe(this,o,pt(a))},Wt.prototype["flip"+r]=Wt.prototype["flip"+i]=Wt.prototype["flip"+s]=function(){const a=YG(t);return new TIe(this,a)}}const mc=["x","y","z","w"],gc=["r","g","b","a"],xc=["s","t","p","q"];for(let t=0;t<4;t++){let e=mc[t],n=gc[t],r=xc[t];Ew(e,n,r);for(let i=0;i<4;i++){e=mc[t]+mc[i],n=gc[t]+gc[i],r=xc[t]+xc[i],Ew(e,n,r);for(let s=0;s<4;s++){e=mc[t]+mc[i]+mc[s],n=gc[t]+gc[i]+gc[s],r=xc[t]+xc[i]+xc[s],Ew(e,n,r);for(let a=0;a<4;a++)e=mc[t]+mc[i]+mc[s]+mc[a],n=gc[t]+gc[i]+gc[s]+gc[a],r=xc[t]+xc[i]+xc[s]+xc[a],Ew(e,n,r)}}}for(let t=0;t<32;t++)Qv[t]={get(){this._cache=this._cache||{};let e=this._cache[t];return e===void 0&&(e=new U_(this,new Kc(t,"uint")),this._cache[t]=e),e},set(e){this[t].assign(pt(e))}};Object.defineProperties(Wt.prototype,Qv);const KG=new WeakMap,AIe=function(t,e=null){const n=_2(t);return n==="node"?t:e===null&&(n==="float"||n==="boolean")||n&&n!=="shader"&&n!=="string"?pt(iL(t,e)):n==="shader"?t.isFn?t:at(t):t},MIe=function(t,e=null){for(const n in t)t[n]=pt(t[n],e);return t},RIe=function(t,e=null){const n=t.length;for(let r=0;r<n;r++)t[r]=pt(t[r],e);return t},PJ=function(t,e=null,n=null,r=null){function i(u){return r!==null?(u=pt(Object.assign(u,r)),r.intent===!0&&(u=u.toVarIntent())):u=pt(u),u}let s,a=e,o,l;function c(u){let f;return a?f=/[a-z]/i.test(a)?a+"()":a:f=t.type,o!==void 0&&u.length<o?(xt(`TSL: "${f}" parameter length is less than minimum required.`),u.concat(new Array(o-u.length).fill(0))):l!==void 0&&u.length>l?(xt(`TSL: "${f}" parameter length exceeds limit.`),u.slice(0,l)):u}return e===null?s=(...u)=>i(new t(...Vg(c(u)))):n!==null?(n=pt(n),s=(...u)=>i(new t(e,...Vg(c(u)),n))):s=(...u)=>i(new t(e,...Vg(c(u)))),s.setParameterLength=(...u)=>(u.length===1?o=l=u[0]:u.length===2&&([o,l]=u),s),s.setName=u=>(a=u,s),s},PIe=function(t,...e){return pt(new t(...Vg(e)))};class NIe extends Wt{constructor(e,n){super(),this.shaderNode=e,this.rawInputs=n,this.isShaderCallNodeInternal=!0}getNodeType(e){return this.shaderNode.nodeType||this.getOutputNode(e).getNodeType(e)}getElementType(e){return this.getOutputNode(e).getElementType(e)}getMemberType(e,n){return this.getOutputNode(e).getMemberType(e,n)}call(e){const{shaderNode:n,rawInputs:r}=this,i=e.getNodeProperties(n),s=e.getClosestSubBuild(n.subBuilds)||"",a=s||"default";if(i[a])return i[a];const o=e.subBuildFn,l=e.fnCall;e.subBuildFn=s,e.fnCall=this;let c=null;if(n.layout){let u=KG.get(e.constructor);u===void 0&&(u=new WeakMap,KG.set(e.constructor,u));let f=u.get(n);f===void 0&&(f=pt(e.buildFunctionNode(n)),u.set(n,f)),e.addInclude(f);const p=r?OIe(r):null;c=pt(f.call(p))}else{const u=new Proxy(e,{get:(b,v,_)=>{let E;return Symbol.iterator===v?E=function*(){yield void 0}:E=Reflect.get(b,v,_),E}}),f=r?DIe(r):null,p=Array.isArray(r)?r.length>0:r!==null,m=n.jsFunc,x=p||m.length>1?m(f,u):m(u);c=pt(x)}return e.subBuildFn=o,e.fnCall=l,n.once&&(i[a]=c),c}setupOutput(e){return e.addStack(),e.stack.outputNode=this.call(e),e.removeStack()}getOutputNode(e){const n=e.getNodeProperties(this),r=e.getSubBuildOutput(this);return n[r]=n[r]||this.setupOutput(e),n[r].subBuild=e.getClosestSubBuild(this),n[r]}build(e,n=null){let r=null;const i=e.getBuildStage(),s=e.getNodeProperties(this),a=e.getSubBuildOutput(this),o=this.getOutputNode(e),l=e.fnCall;if(e.fnCall=this,i==="setup"){const c=e.getSubBuildProperty("initialized",this);if(s[c]!==!0&&(s[c]=!0,s[a]=this.getOutputNode(e),s[a].build(e),this.shaderNode.subBuilds))for(const u of e.chaining){const f=e.getDataFromNode(u,"any");f.subBuilds=f.subBuilds||new Set;for(const p of this.shaderNode.subBuilds)f.subBuilds.add(p)}r=s[a]}else i==="analyze"?o.build(e,n):i==="generate"&&(r=o.build(e,n)||"");return e.fnCall=l,r}}function OIe(t){let e;return YB(t),t[0]&&(t[0].isNode||Object.getPrototypeOf(t[0])!==Object.prototype)?e=[...t]:e=t[0],e}function DIe(t){let e=0;return YB(t),new Proxy(t,{get:(n,r,i)=>{let s;if(r==="length")return s=t.length,s;if(Symbol.iterator===r)s=function*(){for(const a of t)yield pt(a)};else{if(t.length>0)if(Object.getPrototypeOf(t[0])===Object.prototype){const a=t[0];a[r]===void 0?s=a[e++]:s=Reflect.get(a,r,i)}else t[0]instanceof Wt&&(t[r]===void 0?s=t[e++]:s=Reflect.get(t,r,i));else s=Reflect.get(n,r,i);s=pt(s)}return s}})}class LIe extends Wt{constructor(e,n){super(n),this.jsFunc=e,this.layout=null,this.global=!0,this.once=!1}setLayout(e){return this.layout=e,this}getLayout(){return this.layout}call(e=null){return new NIe(this,e)}setup(){return this.call()}}const IIe=[!1,!0],kIe=[0,1,2,3],BIe=[-1,-2],NJ=[.5,1.5,1/3,1e-6,1e6,Math.PI,Math.PI*2,1/Math.PI,2/Math.PI,1/(Math.PI*2),Math.PI/2],WB=new Map;for(const t of IIe)WB.set(t,new Kc(t));const qB=new Map;for(const t of kIe)qB.set(t,new Kc(t,"uint"));const XB=new Map([...qB].map(t=>new Kc(t.value,"int")));for(const t of BIe)XB.set(t,new Kc(t,"int"));const MC=new Map([...XB].map(t=>new Kc(t.value)));for(const t of NJ)MC.set(t,new Kc(t));for(const t of NJ)MC.set(-t,new Kc(-t));const RC={bool:WB,uint:qB,ints:XB,float:MC},ZG=new Map([...WB,...MC]),iL=(t,e)=>ZG.has(t)?ZG.get(t):t.isNode===!0?t:new Kc(t,e),Hi=function(t,e=null){return(...n)=>{for(const i of n)if(i===void 0)return xt(`TSL: Invalid parameter for the type "${t}".`),pt(new Kc(0,t));if((n.length===0||!["bool","float","int","uint"].includes(t)&&n.every(i=>{const s=typeof i;return s!=="object"&&s!=="function"}))&&(n=[VB(t,...n)]),n.length===1&&e!==null&&e.has(n[0]))return Cw(e.get(n[0]));if(n.length===1){const i=iL(n[0],t);return i.nodeType===t?Cw(i):Cw(new RJ(i,t))}const r=n.map(i=>iL(i));return Cw(new bIe(r,t))}},QG=t=>typeof t=="object"&&t!==null?t.value:t,FIe=t=>t!=null?t.nodeType||t.convertTo||(typeof t=="string"?t:null):null;function Rv(t,e){return new LIe(t,e)}const pt=(t,e=null)=>AIe(t,e),Cw=(t,e=null)=>pt(t,e).toVarIntent(),YB=(t,e=null)=>new MIe(t,e),Vg=(t,e=null)=>new RIe(t,e),Wn=(t,e=null,n=null,r=null)=>new PJ(t,e,n,r),St=(t,...e)=>new PIe(t,...e),kt=(t,e=null,n=null,r={})=>new PJ(t,e,n,{...r,intent:!0});let UIe=0;class jIe extends Wt{constructor(e,n=null){super();let r=null;n!==null&&(typeof n=="object"?r=n.return:(typeof n=="string"?r=n:xt("TSL: Invalid layout type."),n=null)),this.shaderNode=new Rv(e,r),n!==null&&this.setLayout(n),this.isFn=!0}setLayout(e){const n=this.shaderNode.nodeType;if(typeof e.inputs!="object"){const r={name:"fn"+UIe++,type:n,inputs:[]};for(const i in e)i!=="return"&&r.inputs.push({name:i,type:e[i]});e=r}return this.shaderNode.setLayout(e),this}getNodeType(e){return this.shaderNode.getNodeType(e)||"float"}call(...e){const n=this.shaderNode.call(e);return this.shaderNode.nodeType==="void"&&n.toStack(),n.toVarIntent()}once(e=null){return this.shaderNode.once=!0,this.shaderNode.subBuilds=e,this}generate(e){const n=this.getNodeType(e);return xt('TSL: "Fn()" was declared but not invoked. Try calling it like "Fn()( ...params )".'),e.generateConst(n)}}function at(t,e=null){const n=new jIe(t,e);return new Proxy(()=>{},{apply(r,i,s){return n.call(...s)},get(r,i,s){return Reflect.get(n,i,s)},set(r,i,s,a){return Reflect.set(n,i,s,a)}})}const S2=t=>{Dp=t},OJ=()=>Dp,Gr=(...t)=>Dp.If(...t);function DJ(t){return Dp&&Dp.addToStack(t),t}Ye("toStack",DJ);const zIe=new Hi("color"),je=new Hi("float",RC.float),Dr=new Hi("int",RC.ints),fi=new Hi("uint",RC.uint),KB=new Hi("bool",RC.bool),bt=new Hi("vec2"),Lu=new Hi("ivec2"),$Ie=new Hi("uvec2"),GIe=new Hi("bvec2"),Qe=new Hi("vec3"),VIe=new Hi("ivec3"),HIe=new Hi("uvec3"),WIe=new Hi("bvec3"),mn=new Hi("vec4"),qIe=new Hi("ivec4"),XIe=new Hi("uvec4"),YIe=new Hi("bvec4"),ZB=new Hi("mat2"),Sa=new Hi("mat3"),Hg=new Hi("mat4");Ye("toColor",zIe);Ye("toFloat",je);Ye("toInt",Dr);Ye("toUint",fi);Ye("toBool",KB);Ye("toVec2",bt);Ye("toIVec2",Lu);Ye("toUVec2",$Ie);Ye("toBVec2",GIe);Ye("toVec3",Qe);Ye("toIVec3",VIe);Ye("toUVec3",HIe);Ye("toBVec3",WIe);Ye("toVec4",mn);Ye("toIVec4",qIe);Ye("toUVec4",XIe);Ye("toBVec4",YIe);Ye("toMat2",ZB);Ye("toMat3",Sa);Ye("toMat4",Hg);const KIe=Wn(U_).setParameterLength(2),ZIe=(t,e)=>pt(new RJ(pt(t),e));Ye("element",KIe);Ye("convert",ZIe);Ye("append",t=>(ct("TSL: .append() has been renamed to .toStack()."),DJ(t)));class cr extends Wt{static get type(){return"PropertyNode"}constructor(e,n=null,r=!1){super(e),this.name=n,this.varying=r,this.isPropertyNode=!0,this.global=!0}customCacheKey(){return AC(this.type+":"+(this.name||"")+":"+(this.varying?"1":"0"))}getHash(e){return this.name||super.getHash(e)}generate(e){let n;return this.varying===!0?(n=e.getVaryingFromNode(this,this.name),n.needsInterpolation=!0):n=e.getVarFromNode(this,this.name),e.getPropertyName(n)}}const Df=(t,e)=>pt(new cr(t,e)),w2=(t,e)=>pt(new cr(t,e,!0)),$n=St(cr,"vec4","DiffuseColor"),JG=St(cr,"vec3","EmissiveColor"),ju=St(cr,"float","Roughness"),T2=St(cr,"float","Metalness"),sL=St(cr,"float","Clearcoat"),E2=St(cr,"float","ClearcoatRoughness"),Mg=St(cr,"vec3","Sheen"),QB=St(cr,"float","SheenRoughness"),JB=St(cr,"float","Iridescence"),LJ=St(cr,"float","IridescenceIOR"),IJ=St(cr,"float","IridescenceThickness"),aL=St(cr,"float","AlphaT"),$h=St(cr,"float","Anisotropy"),MT=St(cr,"vec3","AnisotropyT"),Wg=St(cr,"vec3","AnisotropyB"),Dl=St(cr,"color","SpecularColor"),C2=St(cr,"float","SpecularF90"),oL=St(cr,"float","Shininess"),Jv=St(cr,"vec4","Output"),RP=St(cr,"float","dashSize"),eV=St(cr,"float","gapSize"),RT=St(cr,"float","IOR"),lL=St(cr,"float","Transmission"),kJ=St(cr,"float","Thickness"),BJ=St(cr,"float","AttenuationDistance"),FJ=St(cr,"color","AttenuationColor"),UJ=St(cr,"float","Dispersion");class jJ extends Wt{static get type(){return"UniformGroupNode"}constructor(e,n=!1,r=1){super("string"),this.name=e,this.shared=n,this.order=r,this.isUniformGroup=!0}serialize(e){super.serialize(e),e.name=this.name,e.version=this.version,e.shared=this.shared}deserialize(e){super.deserialize(e),this.name=e.name,this.version=e.version,this.shared=e.shared}}const QIe=t=>new jJ(t),eF=(t,e=0)=>new jJ(t,!0,e),JIe=eF("frame"),en=eF("render"),zJ=QIe("object");class j_ extends HB{static get type(){return"UniformNode"}constructor(e,n=null){super(e,n),this.isUniformNode=!0,this.name="",this.groupNode=zJ}setName(e){return this.name=e,this}label(e){return ct('TSL: "label()" has been deprecated. Use "setName()" instead.'),this.setName(e)}setGroup(e){return this.groupNode=e,this}getGroup(){return this.groupNode}getUniformHash(e){return this.getHash(e)}onUpdate(e,n){return e=e.bind(this),super.onUpdate(r=>{const i=e(r,this);i!==void 0&&(this.value=i)},n)}getInputType(e){let n=super.getInputType(e);return n==="bool"&&(n="uint"),n}generate(e,n){const r=this.getNodeType(e),i=this.getUniformHash(e);let s=e.getNodeFromHash(i);s===void 0&&(e.setHashNode(this,i),s=this);const a=s.getInputType(e),o=e.getUniformFromNode(s,a,e.shaderStage,this.name||e.context.nodeName),l=e.getPropertyName(o);e.context.nodeName!==void 0&&delete e.context.nodeName;let c=l;if(r==="bool"){const u=e.getDataFromNode(this);let f=u.propertyName;if(f===void 0){const p=e.getVarFromNode(this,null,"bool");f=e.getPropertyName(p),u.propertyName=f,c=e.format(l,a,r),e.addLineFlowCode(`${f} = ${c}`,this)}c=f}return e.format(c,r,n)}}const nn=(t,e)=>{const n=FIe(e||t);return n===t&&(t=VB(n)),t=t&&t.isNode===!0?t.node&&t.node.value||t.value:t,pt(new j_(t,n))};class tV extends is{static get type(){return"ArrayNode"}constructor(e,n,r=null){super(e),this.count=n,this.values=r,this.isArrayNode=!0}getArrayCount(){return this.count}getNodeType(e){return this.nodeType===null&&(this.nodeType=this.values[0].getNodeType(e)),this.nodeType}getElementType(e){return this.getNodeType(e)}generate(e){const n=this.getNodeType(e);return e.generateArray(n,this.count,this.values)}}const eke=(...t)=>{let e;if(t.length===1){const n=t[0];e=new tV(null,n.length,n)}else{const n=t[0],r=t[1];e=new tV(n,r)}return pt(e)};Ye("toArray",(t,e)=>eke(Array(e).fill(t)));class tke extends is{static get type(){return"AssignNode"}constructor(e,n){super(),this.targetNode=e,this.sourceNode=n,this.isAssignNode=!0}hasDependencies(){return!1}getNodeType(e,n){return n!=="void"?this.targetNode.getNodeType(e):"void"}needsSplitAssign(e){const{targetNode:n}=this;if(e.isAvailable("swizzleAssign")===!1&&n.isSplitNode&&n.components.length>1){const r=e.getTypeLength(n.node.getNodeType(e));return wx.join("").slice(0,r)!==n.components}return!1}setup(e){const{targetNode:n,sourceNode:r}=this,i=n.getScope(),s=e.getNodeProperties(i);s.assign=!0;const a=e.getNodeProperties(this);a.sourceNode=r,a.targetNode=n.context({assign:!0})}generate(e,n){const{targetNode:r,sourceNode:i}=e.getNodeProperties(this),s=this.needsSplitAssign(e),a=r.build(e),o=r.getNodeType(e),l=i.build(e,o),c=i.getNodeType(e),u=e.getDataFromNode(this);let f;if(u.initialized===!0)n!=="void"&&(f=a);else if(s){const p=e.getVarFromNode(this,null,o),m=e.getPropertyName(p);e.addLineFlowCode(`${m} = ${l}`,this);const x=r.node,v=x.node.context({assign:!0}).build(e);for(let _=0;_<x.components.length;_++){const E=x.components[_];e.addLineFlowCode(`${v}.${E} = ${m}[ ${_} ]`,this)}n!=="void"&&(f=a)}else f=`${a} = ${l}`,(n==="void"||c==="void")&&(e.addLineFlowCode(f,this),n!=="void"&&(f=a));return u.initialized=!0,e.format(f,o,n)}}const nke=Wn(tke).setParameterLength(2);Ye("assign",nke);class rke extends is{static get type(){return"FunctionCallNode"}constructor(e=null,n={}){super(),this.functionNode=e,this.parameters=n}setParameters(e){return this.parameters=e,this}getParameters(){return this.parameters}getNodeType(e){return this.functionNode.getNodeType(e)}getMemberType(e,n){return this.functionNode.getMemberType(e,n)}generate(e){const n=[],r=this.functionNode,i=r.getInputs(e),s=this.parameters,a=(l,c)=>{const u=c.type,f=u==="pointer";let p;return f?p="&"+l.build(e):p=l.build(e,u),p};if(Array.isArray(s)){if(s.length>i.length)xt("TSL: The number of provided parameters exceeds the expected number of inputs in 'Fn()'."),s.length=i.length;else if(s.length<i.length)for(xt("TSL: The number of provided parameters is less than the expected number of inputs in 'Fn()'.");s.length<i.length;)s.push(je(0));for(let l=0;l<s.length;l++)n.push(a(s[l],i[l]))}else for(const l of i){const c=s[l.name];c!==void 0?n.push(a(c,l)):(xt(`TSL: Input '${l.name}' not found in 'Fn()'.`),n.push(a(je(0),l)))}return`${r.build(e,"property")}( ${n.join(", ")} )`}}const ike=(t,...e)=>(e=e.length>1||e[0]&&e[0].isNode===!0?Vg(e):YB(e[0]),new rke(pt(t),e));Ye("call",ike);const ske={"==":"equal","!=":"notEqual","<":"lessThan",">":"greaterThan","<=":"lessThanEqual",">=":"greaterThanEqual","%":"mod"};class ei extends is{static get type(){return"OperatorNode"}constructor(e,n,r,...i){if(super(),i.length>0){let s=new ei(e,n,r);for(let a=0;a<i.length-1;a++)s=new ei(e,s,i[a]);n=s,r=i[i.length-1]}this.op=e,this.aNode=n,this.bNode=r,this.isOperatorNode=!0}getOperatorMethod(e,n){return e.getMethod(ske[this.op],n)}getNodeType(e,n=null){const r=this.op,i=this.aNode,s=this.bNode,a=i.getNodeType(e),o=s?s.getNodeType(e):null;if(a==="void"||o==="void")return n||"void";if(r==="%")return a;if(r==="~"||r==="&"||r==="|"||r==="^"||r===">>"||r==="<<")return e.getIntegerType(a);if(r==="!"||r==="&&"||r==="||"||r==="^^")return"bool";if(r==="=="||r==="!="||r==="<"||r===">"||r==="<="||r===">="){const l=Math.max(e.getTypeLength(a),e.getTypeLength(o));return l>1?`bvec${l}`:"bool"}else{if(e.isMatrix(a)){if(o==="float")return a;if(e.isVector(o))return e.getVectorFromMatrix(a);if(e.isMatrix(o))return a}else if(e.isMatrix(o)){if(a==="float")return o;if(e.isVector(a))return e.getVectorFromMatrix(o)}return e.getTypeLength(o)>e.getTypeLength(a)?o:a}}generate(e,n){const r=this.op,{aNode:i,bNode:s}=this,a=this.getNodeType(e,n);let o=null,l=null;a!=="void"?(o=i.getNodeType(e),l=s?s.getNodeType(e):null,r==="<"||r===">"||r==="<="||r===">="||r==="=="||r==="!="?e.isVector(o)?l=o:e.isVector(l)?o=l:o!==l&&(o=l="float"):r===">>"||r==="<<"?(o=a,l=e.changeComponentType(l,"uint")):r==="%"?(o=a,l=e.isInteger(o)&&e.isInteger(l)?l:o):e.isMatrix(o)?l==="float"?l="float":e.isVector(l)?l=e.getVectorFromMatrix(o):e.isMatrix(l)||(o=l=a):e.isMatrix(l)?o==="float"?o="float":e.isVector(o)?o=e.getVectorFromMatrix(l):o=l=a:o=l=a):o=l=a;const c=i.build(e,o),u=s?s.build(e,l):null,f=e.getFunctionOperator(r);if(n!=="void"){const p=e.renderer.coordinateSystem===va;if(r==="=="||r==="!="||r==="<"||r===">"||r==="<="||r===">=")return p?e.isVector(o)?e.format(`${this.getOperatorMethod(e,n)}( ${c}, ${u} )`,a,n):e.format(`( ${c} ${r} ${u} )`,a,n):e.format(`( ${c} ${r} ${u} )`,a,n);if(r==="%")return e.isInteger(l)?e.format(`( ${c} % ${u} )`,a,n):e.format(`${this.getOperatorMethod(e,a)}( ${c}, ${u} )`,a,n);if(r==="!"||r==="~")return e.format(`(${r}${c})`,o,n);if(f)return e.format(`${f}( ${c}, ${u} )`,a,n);if(e.isMatrix(o)&&l==="float")return e.format(`( ${u} ${r} ${c} )`,a,n);if(o==="float"&&e.isMatrix(l))return e.format(`${c} ${r} ${u}`,a,n);{let m=`( ${c} ${r} ${u} )`;return!p&&a==="bool"&&e.isVector(o)&&e.isVector(l)&&(m=`all${m}`),e.format(m,a,n)}}else if(o!=="void")return f?e.format(`${f}( ${c}, ${u} )`,a,n):e.isMatrix(o)&&l==="float"?e.format(`${u} ${r} ${c}`,a,n):e.format(`${c} ${r} ${u}`,a,n)}serialize(e){super.serialize(e),e.op=this.op}deserialize(e){super.deserialize(e),this.op=e.op}}const Za=kt(ei,"+").setParameterLength(2,1/0).setName("add"),pa=kt(ei,"-").setParameterLength(2,1/0).setName("sub"),vn=kt(ei,"*").setParameterLength(2,1/0).setName("mul"),jc=kt(ei,"/").setParameterLength(2,1/0).setName("div"),tF=kt(ei,"%").setParameterLength(2).setName("mod"),$J=kt(ei,"==").setParameterLength(2).setName("equal"),ake=kt(ei,"!=").setParameterLength(2).setName("notEqual"),oke=kt(ei,"<").setParameterLength(2).setName("lessThan"),lke=kt(ei,">").setParameterLength(2).setName("greaterThan"),cke=kt(ei,"<=").setParameterLength(2).setName("lessThanEqual"),uke=kt(ei,">=").setParameterLength(2).setName("greaterThanEqual"),dke=kt(ei,"&&").setParameterLength(2,1/0).setName("and"),fke=kt(ei,"||").setParameterLength(2,1/0).setName("or"),hke=kt(ei,"!").setParameterLength(1).setName("not"),pke=kt(ei,"^^").setParameterLength(2).setName("xor"),mke=kt(ei,"&").setParameterLength(2).setName("bitAnd"),gke=kt(ei,"~").setParameterLength(1).setName("bitNot"),xke=kt(ei,"|").setParameterLength(2).setName("bitOr"),yke=kt(ei,"^").setParameterLength(2).setName("bitXor"),vke=kt(ei,"<<").setParameterLength(2).setName("shiftLeft"),bke=kt(ei,">>").setParameterLength(2).setName("shiftRight"),_ke=at(([t])=>(t.addAssign(1),t)),Ske=at(([t])=>(t.subAssign(1),t)),wke=at(([t])=>{const e=Dr(t).toConst();return t.addAssign(1),e}),Tke=at(([t])=>{const e=Dr(t).toConst();return t.subAssign(1),e});Ye("add",Za);Ye("sub",pa);Ye("mul",vn);Ye("div",jc);Ye("mod",tF);Ye("equal",$J);Ye("notEqual",ake);Ye("lessThan",oke);Ye("greaterThan",lke);Ye("lessThanEqual",cke);Ye("greaterThanEqual",uke);Ye("and",dke);Ye("or",fke);Ye("not",hke);Ye("xor",pke);Ye("bitAnd",mke);Ye("bitNot",gke);Ye("bitOr",xke);Ye("bitXor",yke);Ye("shiftLeft",vke);Ye("shiftRight",bke);Ye("incrementBefore",_ke);Ye("decrementBefore",Ske);Ye("increment",wke);Ye("decrement",Tke);const Eke=(t,e)=>(ct('TSL: "modInt()" is deprecated. Use "mod( int( ... ) )" instead.'),tF(Dr(t),Dr(e)));Ye("modInt",Eke);class Ae extends is{static get type(){return"MathNode"}constructor(e,n,r=null,i=null){if(super(),(e===Ae.MAX||e===Ae.MIN)&&arguments.length>3){let s=new Ae(e,n,r);for(let a=2;a<arguments.length-1;a++)s=new Ae(e,s,arguments[a]);n=s,r=arguments[arguments.length-1],i=null}this.method=e,this.aNode=n,this.bNode=r,this.cNode=i,this.isMathNode=!0}getInputType(e){const n=this.aNode.getNodeType(e),r=this.bNode?this.bNode.getNodeType(e):null,i=this.cNode?this.cNode.getNodeType(e):null,s=e.isMatrix(n)?0:e.getTypeLength(n),a=e.isMatrix(r)?0:e.getTypeLength(r),o=e.isMatrix(i)?0:e.getTypeLength(i);return s>a&&s>o?n:a>o?r:o>s?i:n}getNodeType(e){const n=this.method;return n===Ae.LENGTH||n===Ae.DISTANCE||n===Ae.DOT?"float":n===Ae.CROSS?"vec3":n===Ae.ALL||n===Ae.ANY?"bool":n===Ae.EQUALS?e.changeComponentType(this.aNode.getNodeType(e),"bool"):this.getInputType(e)}setup(e){const{aNode:n,bNode:r,method:i}=this;let s=null;if(i===Ae.ONE_MINUS)s=pa(1,n);else if(i===Ae.RECIPROCAL)s=jc(1,n);else if(i===Ae.DIFFERENCE)s=xo(pa(n,r));else if(i===Ae.TRANSFORM_DIRECTION){let a=n,o=r;e.isMatrix(a.getNodeType(e))?o=mn(Qe(o),0):a=mn(Qe(a),0);const l=vn(a,o).xyz;s=kc(l)}return s!==null?s:super.setup(e)}generate(e,n){if(e.getNodeProperties(this).outputNode)return super.generate(e,n);let i=this.method;const s=this.getNodeType(e),a=this.getInputType(e),o=this.aNode,l=this.bNode,c=this.cNode,u=e.renderer.coordinateSystem;if(i===Ae.NEGATE)return e.format("( - "+o.build(e,a)+" )",s,n);{const f=[];return i===Ae.CROSS?f.push(o.build(e,s),l.build(e,s)):u===va&&i===Ae.STEP?f.push(o.build(e,e.getTypeLength(o.getNodeType(e))===1?"float":a),l.build(e,a)):u===va&&(i===Ae.MIN||i===Ae.MAX)?f.push(o.build(e,a),l.build(e,e.getTypeLength(l.getNodeType(e))===1?"float":a)):i===Ae.REFRACT?f.push(o.build(e,a),l.build(e,a),c.build(e,"float")):i===Ae.MIX?f.push(o.build(e,a),l.build(e,a),c.build(e,e.getTypeLength(c.getNodeType(e))===1?"float":a)):(u===jf&&i===Ae.ATAN&&l!==null&&(i="atan2"),e.shaderStage!=="fragment"&&(i===Ae.DFDX||i===Ae.DFDY)&&(ct(`TSL: '${i}' is not supported in the ${e.shaderStage} stage.`),i="/*"+i+"*/"),f.push(o.build(e,a)),l!==null&&f.push(l.build(e,a)),c!==null&&f.push(c.build(e,a))),e.format(`${e.getMethod(i,s)}( ${f.join(", ")} )`,s,n)}}serialize(e){super.serialize(e),e.method=this.method}deserialize(e){super.deserialize(e),this.method=e.method}}Ae.ALL="all";Ae.ANY="any";Ae.RADIANS="radians";Ae.DEGREES="degrees";Ae.EXP="exp";Ae.EXP2="exp2";Ae.LOG="log";Ae.LOG2="log2";Ae.SQRT="sqrt";Ae.INVERSE_SQRT="inversesqrt";Ae.FLOOR="floor";Ae.CEIL="ceil";Ae.NORMALIZE="normalize";Ae.FRACT="fract";Ae.SIN="sin";Ae.COS="cos";Ae.TAN="tan";Ae.ASIN="asin";Ae.ACOS="acos";Ae.ATAN="atan";Ae.ABS="abs";Ae.SIGN="sign";Ae.LENGTH="length";Ae.NEGATE="negate";Ae.ONE_MINUS="oneMinus";Ae.DFDX="dFdx";Ae.DFDY="dFdy";Ae.ROUND="round";Ae.RECIPROCAL="reciprocal";Ae.TRUNC="trunc";Ae.FWIDTH="fwidth";Ae.TRANSPOSE="transpose";Ae.DETERMINANT="determinant";Ae.INVERSE="inverse";Ae.EQUALS="equals";Ae.MIN="min";Ae.MAX="max";Ae.STEP="step";Ae.REFLECT="reflect";Ae.DISTANCE="distance";Ae.DIFFERENCE="difference";Ae.DOT="dot";Ae.CROSS="cross";Ae.POW="pow";Ae.TRANSFORM_DIRECTION="transformDirection";Ae.MIX="mix";Ae.CLAMP="clamp";Ae.REFRACT="refract";Ae.SMOOTHSTEP="smoothstep";Ae.FACEFORWARD="faceforward";const GJ=je(1e-6),Cke=je(Math.PI),Ake=kt(Ae,Ae.ALL).setParameterLength(1),Mke=kt(Ae,Ae.ANY).setParameterLength(1),Rke=kt(Ae,Ae.RADIANS).setParameterLength(1),Pke=kt(Ae,Ae.DEGREES).setParameterLength(1),VJ=kt(Ae,Ae.EXP).setParameterLength(1),zb=kt(Ae,Ae.EXP2).setParameterLength(1),HJ=kt(Ae,Ae.LOG).setParameterLength(1),td=kt(Ae,Ae.LOG2).setParameterLength(1),lp=kt(Ae,Ae.SQRT).setParameterLength(1),Nke=kt(Ae,Ae.INVERSE_SQRT).setParameterLength(1),gp=kt(Ae,Ae.FLOOR).setParameterLength(1),nF=kt(Ae,Ae.CEIL).setParameterLength(1),kc=kt(Ae,Ae.NORMALIZE).setParameterLength(1),zc=kt(Ae,Ae.FRACT).setParameterLength(1),el=kt(Ae,Ae.SIN).setParameterLength(1),Iu=kt(Ae,Ae.COS).setParameterLength(1),Oke=kt(Ae,Ae.TAN).setParameterLength(1),Dke=kt(Ae,Ae.ASIN).setParameterLength(1),WJ=kt(Ae,Ae.ACOS).setParameterLength(1),qJ=kt(Ae,Ae.ATAN).setParameterLength(1,2),xo=kt(Ae,Ae.ABS).setParameterLength(1),A2=kt(Ae,Ae.SIGN).setParameterLength(1),nd=kt(Ae,Ae.LENGTH).setParameterLength(1),Lke=kt(Ae,Ae.NEGATE).setParameterLength(1),Ike=kt(Ae,Ae.ONE_MINUS).setParameterLength(1),XJ=kt(Ae,Ae.DFDX).setParameterLength(1),YJ=kt(Ae,Ae.DFDY).setParameterLength(1),kke=kt(Ae,Ae.ROUND).setParameterLength(1),Bke=kt(Ae,Ae.RECIPROCAL).setParameterLength(1),Fke=kt(Ae,Ae.TRUNC).setParameterLength(1),KJ=kt(Ae,Ae.FWIDTH).setParameterLength(1),Uke=kt(Ae,Ae.TRANSPOSE).setParameterLength(1),jke=kt(Ae,Ae.DETERMINANT).setParameterLength(1),zke=kt(Ae,Ae.INVERSE).setParameterLength(1),$ke=(t,e)=>(ct('TSL: "equals" is deprecated. Use "equal" inside a vector instead, like: "bvec*( equal( ... ) )"'),$J(t,e)),$0=kt(Ae,Ae.MIN).setParameterLength(2,1/0),ns=kt(Ae,Ae.MAX).setParameterLength(2,1/0),ZJ=kt(Ae,Ae.STEP).setParameterLength(2),Gke=kt(Ae,Ae.REFLECT).setParameterLength(2),Vke=kt(Ae,Ae.DISTANCE).setParameterLength(2),Hke=kt(Ae,Ae.DIFFERENCE).setParameterLength(2),G0=kt(Ae,Ae.DOT).setParameterLength(2),$b=kt(Ae,Ae.CROSS).setParameterLength(2),PC=kt(Ae,Ae.POW).setParameterLength(2),QJ=t=>vn(t,t),Wke=t=>vn(t,t,t),JJ=t=>vn(t,t,t,t),qke=kt(Ae,Ae.TRANSFORM_DIRECTION).setParameterLength(2),Xke=t=>vn(A2(t),PC(xo(t),1/3)),eee=t=>G0(t,t),zr=kt(Ae,Ae.MIX).setParameterLength(3),pd=(t,e=0,n=1)=>pt(new Ae(Ae.CLAMP,pt(t),pt(e),pt(n))),tee=t=>pd(t),nee=kt(Ae,Ae.REFRACT).setParameterLength(3),md=kt(Ae,Ae.SMOOTHSTEP).setParameterLength(3),Yke=kt(Ae,Ae.FACEFORWARD).setParameterLength(3),Kke=at(([t])=>{const r=43758.5453,i=G0(t.xy,bt(12.9898,78.233)),s=tF(i,Cke);return zc(el(s).mul(r))}),Zke=(t,e,n)=>zr(e,n,t),Qke=(t,e,n)=>md(e,n,t),Jke=(t,e)=>ZJ(e,t),eBe=(t,e)=>(ct('TSL: "atan2" is overloaded. Use "atan" instead.'),qJ(t,e));Ye("all",Ake);Ye("any",Mke);Ye("equals",$ke);Ye("radians",Rke);Ye("degrees",Pke);Ye("exp",VJ);Ye("exp2",zb);Ye("log",HJ);Ye("log2",td);Ye("sqrt",lp);Ye("inverseSqrt",Nke);Ye("floor",gp);Ye("ceil",nF);Ye("normalize",kc);Ye("fract",zc);Ye("sin",el);Ye("cos",Iu);Ye("tan",Oke);Ye("asin",Dke);Ye("acos",WJ);Ye("atan",qJ);Ye("abs",xo);Ye("sign",A2);Ye("length",nd);Ye("lengthSq",eee);Ye("negate",Lke);Ye("oneMinus",Ike);Ye("dFdx",XJ);Ye("dFdy",YJ);Ye("round",kke);Ye("reciprocal",Bke);Ye("trunc",Fke);Ye("fwidth",KJ);Ye("atan2",eBe);Ye("min",$0);Ye("max",ns);Ye("step",Jke);Ye("reflect",Gke);Ye("distance",Vke);Ye("dot",G0);Ye("cross",$b);Ye("pow",PC);Ye("pow2",QJ);Ye("pow3",Wke);Ye("pow4",JJ);Ye("transformDirection",qke);Ye("mix",Zke);Ye("clamp",pd);Ye("refract",nee);Ye("smoothstep",Qke);Ye("faceForward",Yke);Ye("difference",Hke);Ye("saturate",tee);Ye("cbrt",Xke);Ye("transpose",Uke);Ye("determinant",jke);Ye("inverse",zke);Ye("rand",Kke);class tBe extends Wt{static get type(){return"ConditionalNode"}constructor(e,n,r=null){super(),this.condNode=e,this.ifNode=n,this.elseNode=r}getNodeType(e){const{ifNode:n,elseNode:r}=e.getNodeProperties(this);if(n===void 0)return e.flowBuildStage(this,"setup"),this.getNodeType(e);const i=n.getNodeType(e);if(r!==null){const s=r.getNodeType(e);if(e.getTypeLength(s)>e.getTypeLength(i))return s}return i}setup(e){const n=this.condNode,r=this.ifNode.isolate(),i=this.elseNode?this.elseNode.isolate():null,s=e.context.nodeBlock;e.getDataFromNode(r).parentNodeBlock=s,i!==null&&(e.getDataFromNode(i).parentNodeBlock=s);const a=e.context.uniformFlow,o=e.getNodeProperties(this);o.condNode=n,o.ifNode=a?r:r.context({nodeBlock:r}),o.elseNode=i?a?i:i.context({nodeBlock:i}):null}generate(e,n){const r=this.getNodeType(e),i=e.getDataFromNode(this);if(i.nodeProperty!==void 0)return i.nodeProperty;const{condNode:s,ifNode:a,elseNode:o}=e.getNodeProperties(this),l=e.currentFunctionNode,c=n!=="void",u=c?Df(r).build(e):"";i.nodeProperty=u;const f=s.build(e,"bool");if(e.context.uniformFlow&&o!==null){const x=a.build(e,r),b=o.build(e,r),v=e.getTernary(f,x,b);return e.format(v,r,n)}e.addFlowCode(`
${e.tab}if ( ${f} ) {

`).addFlowTab();let m=a.build(e,r);if(m&&(c?m=u+" = "+m+";":(m="return "+m+";",l===null&&(ct("TSL: Return statement used in an inline 'Fn()'. Define a layout struct to allow return values."),m="// "+m))),e.removeFlowTab().addFlowCode(e.tab+"	"+m+`

`+e.tab+"}"),o!==null){e.addFlowCode(` else {

`).addFlowTab();let x=o.build(e,r);x&&(c?x=u+" = "+x+";":(x="return "+x+";",l===null&&(ct("TSL: Return statement used in an inline 'Fn()'. Define a layout struct to allow return values."),x="// "+x))),e.removeFlowTab().addFlowCode(e.tab+"	"+x+`

`+e.tab+`}

`)}else e.addFlowCode(`

`);return e.format(u,r,n)}}const Is=Wn(tBe).setParameterLength(2,3);Ye("select",Is);class ree extends Wt{static get type(){return"ContextNode"}constructor(e,n={}){super(),this.isContextNode=!0,this.node=e,this.value=n}getScope(){return this.node.getScope()}getNodeType(e){return this.node.getNodeType(e)}getMemberType(e,n){return this.node.getMemberType(e,n)}analyze(e){const n=e.addContext(this.value);this.node.build(e),e.setContext(n)}setup(e){const n=e.addContext(this.value);this.node.build(e),e.setContext(n)}generate(e,n){const r=e.addContext(this.value),i=this.node.build(e,n);return e.setContext(r),i}}const NC=Wn(ree).setParameterLength(1,2),nBe=t=>NC(t,{uniformFlow:!0}),iee=(t,e)=>NC(t,{nodeName:e});function rBe(t,e){return ct('TSL: "label()" has been deprecated. Use "setName()" instead.'),iee(t,e)}Ye("context",NC);Ye("label",rBe);Ye("uniformFlow",nBe);Ye("setName",iee);class PT extends Wt{static get type(){return"VarNode"}constructor(e,n=null,r=!1){super(),this.node=e,this.name=n,this.global=!0,this.isVarNode=!0,this.readOnly=r,this.parents=!0,this.intent=!1}setIntent(e){return this.intent=e,this}getIntent(){return this.intent}getMemberType(e,n){return this.node.getMemberType(e,n)}getElementType(e){return this.node.getElementType(e)}getNodeType(e){return this.node.getNodeType(e)}getArrayCount(e){return this.node.getArrayCount(e)}isAssign(e){let r=e.getNodeProperties(this).assign;return r!==!0&&this.node.isShaderCallNodeInternal&&this.node.shaderNode.getLayout()===null&&e.fnCall&&e.fnCall.shaderNode&&e.getDataFromNode(this.node.shaderNode).hasLoop&&(r=!0),r}build(...e){const n=e[0];return this._hasStack(n)===!1&&n.buildStage==="setup"&&(n.context.nodeLoop||n.context.nodeBlock)&&n.getBaseStack().addToStack(this),this.intent===!0&&this.isAssign(n)!==!0?this.node.build(...e):super.build(...e)}generate(e){const{node:n,name:r,readOnly:i}=this,{renderer:s}=e,a=s.backend.isWebGPUBackend===!0;let o=!1,l=!1;i&&(o=e.isDeterministic(n),l=a?i:o);const c=this.getNodeType(e);if(c=="void")return this.intent!==!0&&xt('TSL: ".toVar()" can not be used with void type.'),n.build(e);const u=e.getVectorType(c),f=n.build(e,u),p=e.getVarFromNode(this,r,u,void 0,l),m=e.getPropertyName(p);let x=m;if(l)if(a)x=o?`const ${m}`:`let ${m}`;else{const b=n.getArrayCount(e);x=`const ${e.getVar(p.type,m,b)}`}return e.addLineFlowCode(`${x} = ${f}`,this),m}_hasStack(e){return e.getDataFromNode(this).stack!==void 0}}const rF=Wn(PT),iBe=(t,e=null)=>rF(t,e).toStack(),sBe=(t,e=null)=>rF(t,e,!0).toStack(),aBe=t=>rF(t).setIntent(!0).toStack();Ye("toVar",iBe);Ye("toConst",sBe);Ye("toVarIntent",aBe);class oBe extends Wt{static get type(){return"SubBuild"}constructor(e,n,r=null){super(r),this.node=e,this.name=n,this.isSubBuildNode=!0}getNodeType(e){if(this.nodeType!==null)return this.nodeType;e.addSubBuild(this.name);const n=this.node.getNodeType(e);return e.removeSubBuild(),n}build(e,...n){e.addSubBuild(this.name);const r=this.node.build(e,...n);return e.removeSubBuild(),r}}const eb=(t,e,n=null)=>pt(new oBe(pt(t),e,n));class lBe extends Wt{static get type(){return"VaryingNode"}constructor(e,n=null){super(),this.node=e,this.name=n,this.isVaryingNode=!0,this.interpolationType=null,this.interpolationSampling=null,this.global=!0}setInterpolation(e,n=null){return this.interpolationType=e,this.interpolationSampling=n,this}getHash(e){return this.name||super.getHash(e)}getNodeType(e){return this.node.getNodeType(e)}setupVarying(e){const n=e.getNodeProperties(this);let r=n.varying;if(r===void 0){const i=this.name,s=this.getNodeType(e),a=this.interpolationType,o=this.interpolationSampling;n.varying=r=e.getVaryingFromNode(this,i,s,a,o),n.node=eb(this.node,"VERTEX")}return r.needsInterpolation||(r.needsInterpolation=e.shaderStage==="fragment"),r}setup(e){this.setupVarying(e),e.flowNodeFromShaderStage(Tw.VERTEX,this.node)}analyze(e){this.setupVarying(e),e.flowNodeFromShaderStage(Tw.VERTEX,this.node)}generate(e){const n=e.getSubBuildProperty("property",e.currentStack),r=e.getNodeProperties(this),i=this.setupVarying(e);if(r[n]===void 0){const s=this.getNodeType(e),a=e.getPropertyName(i,Tw.VERTEX);e.flowNodeFromShaderStage(Tw.VERTEX,r.node,s,a),r[n]=a}return e.getPropertyName(i)}}const Qf=Wn(lBe).setParameterLength(1,2),cBe=t=>Qf(t);Ye("toVarying",Qf);Ye("toVertexStage",cBe);Ye("varying",(...t)=>(ct("TSL: .varying() has been renamed to .toVarying()."),Qf(...t)));Ye("vertexStage",(...t)=>(ct("TSL: .vertexStage() has been renamed to .toVertexStage()."),Qf(...t)));const uBe=at(([t])=>{const e=t.mul(.9478672986).add(.0521327014).pow(2.4),n=t.mul(.0773993808),r=t.lessThanEqual(.04045);return zr(e,n,r)}).setLayout({name:"sRGBTransferEOTF",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),dBe=at(([t])=>{const e=t.pow(.41666).mul(1.055).sub(.055),n=t.mul(12.92),r=t.lessThanEqual(.0031308);return zr(e,n,r)}).setLayout({name:"sRGBTransferOETF",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),iF="WorkingColorSpace",fBe="OutputColorSpace";class see extends is{static get type(){return"ColorSpaceNode"}constructor(e,n,r){super("vec4"),this.colorNode=e,this.source=n,this.target=r}resolveColorSpace(e,n){return n===iF?sn.workingColorSpace:n===fBe?e.context.outputColorSpace||e.renderer.outputColorSpace:n}setup(e){const{colorNode:n}=this,r=this.resolveColorSpace(e,this.source),i=this.resolveColorSpace(e,this.target);let s=n;return sn.enabled===!1||r===i||!r||!i||(sn.getTransfer(r)===Ot&&(s=mn(uBe(s.rgb),s.a)),sn.getPrimaries(r)!==sn.getPrimaries(i)&&(s=mn(Sa(sn._getMatrix(new pn,r,i)).mul(s.rgb),s.a)),sn.getTransfer(i)===Ot&&(s=mn(dBe(s.rgb),s.a))),s}}const hBe=(t,e)=>pt(new see(pt(t),iF,e)),sF=(t,e)=>pt(new see(pt(t),e,iF));Ye("workingToColorSpace",hBe);Ye("colorSpaceToWorking",sF);let pBe=class extends U_{static get type(){return"ReferenceElementNode"}constructor(e,n){super(e,n),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){const n=super.generate(e),r=this.referenceNode.getNodeType(),i=this.getNodeType();return e.format(n,r,i)}};class aee extends Wt{static get type(){return"ReferenceBaseNode"}constructor(e,n,r=null,i=null){super(),this.property=e,this.uniformType=n,this.object=r,this.count=i,this.properties=e.split("."),this.reference=r,this.node=null,this.group=null,this.updateType=yn.OBJECT}setGroup(e){return this.group=e,this}element(e){return pt(new pBe(this,pt(e)))}setNodeType(e){const n=nn(null,e);this.group!==null&&n.setGroup(this.group),this.node=n}getNodeType(e){return this.node===null&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}getValueFromReference(e=this.reference){const{properties:n}=this;let r=e[n[0]];for(let i=1;i<n.length;i++)r=r[n[i]];return r}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){this.node===null&&this.setNodeType(this.uniformType);const e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}const mBe=(t,e,n)=>pt(new aee(t,e,n));class gBe extends aee{static get type(){return"RendererReferenceNode"}constructor(e,n,r=null){super(e,n,r),this.renderer=r,this.setGroup(en)}updateReference(e){return this.reference=this.renderer!==null?this.renderer:e.renderer,this.reference}}const xBe=(t,e,n=null)=>pt(new gBe(t,e,n));class yBe extends is{static get type(){return"ToneMappingNode"}constructor(e,n=bBe,r=null){super("vec3"),this._toneMapping=e,this.exposureNode=n,this.colorNode=r}customCacheKey(){return Zv(this._toneMapping)}setToneMapping(e){return this._toneMapping=e,this}getToneMapping(){return this._toneMapping}setup(e){const n=this.colorNode||e.context.color,r=this._toneMapping;if(r===ya)return n;let i=null;const s=e.renderer.library.getToneMappingFunction(r);return s!==null?i=mn(s(n.rgb,this.exposureNode),n.a):(xt("ToneMappingNode: Unsupported Tone Mapping configuration.",r),i=n),i}}const vBe=(t,e,n)=>pt(new yBe(t,pt(e),pt(n))),bBe=xBe("toneMappingExposure","float");Ye("toneMapping",(t,e,n)=>vBe(e,n,t));class _Be extends HB{static get type(){return"BufferAttributeNode"}constructor(e,n=null,r=0,i=0){super(e,n),this.isBufferNode=!0,this.bufferType=n,this.bufferStride=r,this.bufferOffset=i,this.usage=r2,this.instanced=!1,this.attribute=null,this.global=!0,e&&e.isBufferAttribute===!0&&(this.attribute=e,this.usage=e.usage,this.instanced=e.isInstancedBufferAttribute)}getHash(e){if(this.bufferStride===0&&this.bufferOffset===0){let n=e.globalCache.getData(this.value);return n===void 0&&(n={node:this},e.globalCache.setData(this.value,n)),n.node.uuid}return this.uuid}getNodeType(e){return this.bufferType===null&&(this.bufferType=e.getTypeFromAttribute(this.attribute)),this.bufferType}setup(e){if(this.attribute!==null)return;const n=this.getNodeType(e),r=this.value,i=e.getTypeLength(n),s=this.bufferStride||i,a=this.bufferOffset,o=r.isInterleavedBuffer===!0?r:new KZ(r,s),l=new oB(o,i,a);o.setUsage(this.usage),this.attribute=l,this.attribute.isInstancedBufferAttribute=this.instanced}generate(e){const n=this.getNodeType(e),r=e.getBufferAttributeFromNode(this,n),i=e.getPropertyName(r);let s=null;return e.shaderStage==="vertex"||e.shaderStage==="compute"?(this.name=i,s=i):s=Qf(this).build(e,n),s}getInputType(){return"bufferAttribute"}setUsage(e){return this.usage=e,this.attribute&&this.attribute.isBufferAttribute===!0&&(this.attribute.usage=e),this}setInstanced(e){return this.instanced=e,this}}const aF=(t,e=null,n=0,r=0)=>pt(new _Be(t,e,n,r)),SBe=(t,e=null,n=0,r=0)=>aF(t,e,n,r).setUsage(Cg),nV=(t,e=null,n=0,r=0)=>aF(t,e,n,r).setInstanced(!0),rV=(t,e=null,n=0,r=0)=>SBe(t,e,n,r).setInstanced(!0);Ye("toAttribute",t=>aF(t.value));class wBe extends Wt{static get type(){return"ComputeNode"}constructor(e,n){super("void"),this.isComputeNode=!0,this.computeNode=e,this.workgroupSize=n,this.count=null,this.version=1,this.name="",this.updateBeforeType=yn.OBJECT,this.onInitFunction=null}setCount(e){return this.count=e,this}getCount(){return this.count}dispose(){this.dispatchEvent({type:"dispose"})}setName(e){return this.name=e,this}label(e){return ct('TSL: "label()" has been deprecated. Use "setName()" instead.'),this.setName(e)}onInit(e){return this.onInitFunction=e,this}updateBefore({renderer:e}){e.compute(this)}setup(e){const n=this.computeNode.build(e);if(n){const r=e.getNodeProperties(this);r.outputComputeNode=n.outputNode,n.outputNode=null}return n}generate(e,n){const{shaderStage:r}=e;if(r==="compute"){const i=this.computeNode.build(e,"void");i!==""&&e.addLineFlowCode(i,this)}else{const s=e.getNodeProperties(this).outputComputeNode;if(s)return s.build(e,n)}}}const oee=(t,e=[64])=>{(e.length===0||e.length>3)&&xt("TSL: compute() workgroupSize must have 1, 2, or 3 elements");for(let n=0;n<e.length;n++){const r=e[n];(typeof r!="number"||r<=0||!Number.isInteger(r))&&xt(`TSL: compute() workgroupSize element at index [ ${n} ] must be a positive integer`)}for(;e.length<3;)e.push(1);return pt(new wBe(pt(t),e))},TBe=(t,e,n)=>oee(t,n).setCount(e);Ye("compute",TBe);Ye("computeKernel",oee);class EBe extends Wt{static get type(){return"IsolateNode"}constructor(e,n=!0){super(),this.node=e,this.parent=n,this.isIsolateNode=!0}getNodeType(e){const n=e.getCache(),r=e.getCacheFromNode(this,this.parent);e.setCache(r);const i=this.node.getNodeType(e);return e.setCache(n),i}build(e,...n){const r=e.getCache(),i=e.getCacheFromNode(this,this.parent);e.setCache(i);const s=this.node.build(e,...n);return e.setCache(r),s}setParent(e){return this.parent=e,this}getParent(){return this.parent}}const tb=t=>new EBe(pt(t));function CBe(t,e=!0){return ct('TSL: "cache()" has been deprecated. Use "isolate()" instead.'),tb(t).setParent(e)}Ye("cache",CBe);Ye("isolate",tb);class ABe extends Wt{static get type(){return"BypassNode"}constructor(e,n){super(),this.isBypassNode=!0,this.outputNode=e,this.callNode=n}getNodeType(e){return this.outputNode.getNodeType(e)}generate(e){const n=this.callNode.build(e,"void");return n!==""&&e.addLineFlowCode(n,this),this.outputNode.build(e)}}const MBe=Wn(ABe).setParameterLength(2);Ye("bypass",MBe);class lee extends Wt{static get type(){return"RemapNode"}constructor(e,n,r,i=je(0),s=je(1)){super(),this.node=e,this.inLowNode=n,this.inHighNode=r,this.outLowNode=i,this.outHighNode=s,this.doClamp=!0}setup(){const{node:e,inLowNode:n,inHighNode:r,outLowNode:i,outHighNode:s,doClamp:a}=this;let o=e.sub(n).div(r.sub(n));return a===!0&&(o=o.clamp()),o.mul(s.sub(i)).add(i)}}const RBe=Wn(lee,null,null,{doClamp:!1}).setParameterLength(3,5),PBe=Wn(lee).setParameterLength(3,5);Ye("remap",RBe);Ye("remapClamp",PBe);class NT extends Wt{static get type(){return"ExpressionNode"}constructor(e="",n="void"){super(n),this.snippet=e}generate(e,n){const r=this.getNodeType(e),i=this.snippet;if(r==="void")e.addLineFlowCode(i,this);else return e.format(i,r,n)}}const V0=Wn(NT).setParameterLength(1,2),NBe=t=>(t?Is(t,V0("discard")):V0("discard")).toStack();Ye("discard",NBe);class OBe extends is{static get type(){return"RenderOutputNode"}constructor(e,n,r){super("vec4"),this.colorNode=e,this._toneMapping=n,this.outputColorSpace=r,this.isRenderOutputNode=!0}setToneMapping(e){return this._toneMapping=e,this}getToneMapping(){return this._toneMapping}setup({context:e}){let n=this.colorNode||e.color;const r=(this._toneMapping!==null?this._toneMapping:e.toneMapping)||ya,i=(this.outputColorSpace!==null?this.outputColorSpace:e.outputColorSpace)||Fa;return r!==ya&&(n=n.toneMapping(r)),i!==Fa&&i!==sn.workingColorSpace&&(n=n.workingToColorSpace(i)),n}}const DBe=(t,e=null,n=null)=>pt(new OBe(pt(t),e,n));Ye("renderOutput",DBe);class LBe extends is{static get type(){return"DebugNode"}constructor(e,n=null){super(),this.node=e,this.callback=n}getNodeType(e){return this.node.getNodeType(e)}setup(e){return this.node.build(e)}analyze(e){return this.node.build(e)}generate(e){const n=this.callback,r=this.node.build(e),i="--- TSL debug - "+e.shaderStage+" shader ---",s="-".repeat(i.length);let a="";return a+="// #"+i+`#
`,a+=e.flow.code.replace(/^\t/mg,"")+`
`,a+="/* ... */ "+r+` /* ... */
`,a+="// #"+s+`#
`,n!==null?n(e,a):Ib(a),r}}const IBe=(t,e=null)=>pt(new LBe(pt(t),e)).toStack();Ye("debug",IBe);class cee{constructor(){this._renderer=null,this.currentFrame=null}get nodeFrame(){return this._renderer._nodes.nodeFrame}setRenderer(e){return this._renderer=e,this}getRenderer(){return this._renderer}init(){}begin(){}finish(){}inspect(){}computeAsync(){}beginCompute(){}finishCompute(){}beginRender(){}finishRender(){}copyTextureToTexture(){}copyFramebufferToTexture(){}}class kBe extends Wt{static get type(){return"InspectorNode"}constructor(e,n="",r=null){super(),this.node=e,this.name=n,this.callback=r,this.updateType=yn.FRAME,this.isInspectorNode=!0}getName(){return this.name||this.node.name}update(e){e.renderer.inspector.inspect(this)}getNodeType(e){return this.node.getNodeType(e)}setup(e){let n=this.node;return e.context.inspector===!0&&this.callback!==null&&(n=this.callback(n)),e.renderer.backend.isWebGPUBackend!==!0&&e.renderer.inspector.constructor!==cee&&jr('TSL: ".toInspector()" is only available with WebGPU.'),n}}function BBe(t,e="",n=null){return t=pt(t),t.before(new kBe(t,e,n))}Ye("toInspector",BBe);class uee extends Wt{static get type(){return"AttributeNode"}constructor(e,n=null){super(n),this.global=!0,this._attributeName=e}getHash(e){return this.getAttributeName(e)}getNodeType(e){let n=this.nodeType;if(n===null){const r=this.getAttributeName(e);if(e.hasGeometryAttribute(r)){const i=e.geometry.getAttribute(r);n=e.getTypeFromAttribute(i)}else n="float"}return n}setAttributeName(e){return this._attributeName=e,this}getAttributeName(){return this._attributeName}generate(e){const n=this.getAttributeName(e),r=this.getNodeType(e);if(e.hasGeometryAttribute(n)===!0){const s=e.geometry.getAttribute(n),a=e.getTypeFromAttribute(s),o=e.getAttribute(n,a);return e.shaderStage==="vertex"?e.format(o.name,a,r):Qf(this).build(e,r)}else return ct(`AttributeNode: Vertex attribute "${n}" not found on geometry.`),e.generateConst(r)}serialize(e){super.serialize(e),e.global=this.global,e._attributeName=this._attributeName}deserialize(e){super.deserialize(e),this.global=e.global,this._attributeName=e._attributeName}}const $f=(t,e=null)=>pt(new uee(t,e)),Tx=(t=0)=>$f("uv"+(t>0?t:""),"vec2");class FBe extends Wt{static get type(){return"TextureSizeNode"}constructor(e,n=null){super("uvec2"),this.isTextureSizeNode=!0,this.textureNode=e,this.levelNode=n}generate(e,n){const r=this.textureNode.build(e,"property"),i=this.levelNode===null?"0":this.levelNode.build(e,"int");return e.format(`${e.getMethod("textureDimensions")}( ${r}, ${i} )`,this.getNodeType(e),n)}}const xp=Wn(FBe).setParameterLength(1,2);class UBe extends j_{static get type(){return"MaxMipLevelNode"}constructor(e){super(0),this._textureNode=e,this.updateType=yn.FRAME}get textureNode(){return this._textureNode}get texture(){return this._textureNode.value}update(){const e=this.texture,n=e.images,r=n&&n.length>0?n[0]&&n[0].image||n[0]:e.image;if(r&&r.width!==void 0){const{width:i,height:s}=r;this.value=Math.log2(Math.max(i,s))}}}const jBe=Wn(UBe).setParameterLength(1),dee=new $i;class Ex extends j_{static get type(){return"TextureNode"}constructor(e=dee,n=null,r=null,i=null){super(e),this.isTextureNode=!0,this.uvNode=n,this.levelNode=r,this.biasNode=i,this.compareNode=null,this.depthNode=null,this.gradNode=null,this.offsetNode=null,this.sampler=!0,this.updateMatrix=!1,this.updateType=yn.NONE,this.referenceNode=null,this._value=e,this._matrixUniform=null,this._flipYUniform=null,this.setUpdateMatrix(n===null)}set value(e){this.referenceNode?this.referenceNode.value=e:this._value=e}get value(){return this.referenceNode?this.referenceNode.value:this._value}getUniformHash(){return this.value.uuid}getNodeType(){return this.value.isDepthTexture===!0?"float":this.value.type===Ar?"uvec4":this.value.type===xs?"ivec4":"vec4"}getInputType(){return"texture"}getDefaultUV(){return Tx(this.value.channel)}updateReference(){return this.value}getTransformedUV(e){return this._matrixUniform===null&&(this._matrixUniform=nn(this.value.matrix)),this._matrixUniform.mul(Qe(e,1)).xy}setUpdateMatrix(e){return this.updateMatrix=e,this}setupUV(e,n){return e.isFlipY()&&(this._flipYUniform===null&&(this._flipYUniform=nn(!1)),n=n.toVar(),this.sampler?n=this._flipYUniform.select(n.flipY(),n):n=this._flipYUniform.select(n.setY(Dr(xp(this,this.levelNode).y).sub(n.y).sub(1)),n)),n}setup(e){const n=e.getNodeProperties(this);n.referenceNode=this.referenceNode;const r=this.value;if(!r||r.isTexture!==!0)throw new Error("THREE.TSL: `texture( value )` function expects a valid instance of THREE.Texture().");const i=at(()=>{let a=this.uvNode;return(a===null||e.context.forceUVContext===!0)&&e.context.getUV&&(a=e.context.getUV(this,e)),a||(a=this.getDefaultUV()),this.updateMatrix===!0&&(a=this.getTransformedUV(a)),a=this.setupUV(e,a),this.updateType=this._matrixUniform!==null||this._flipYUniform!==null?yn.OBJECT:yn.NONE,a})();let s=this.levelNode;s===null&&e.context.getTextureLevel&&(s=e.context.getTextureLevel(this)),n.uvNode=i,n.levelNode=s,n.biasNode=this.biasNode,n.compareNode=this.compareNode,n.gradNode=this.gradNode,n.depthNode=this.depthNode,n.offsetNode=this.offsetNode}generateUV(e,n){return n.build(e,this.sampler===!0?"vec2":"ivec2")}generateOffset(e,n){return n.build(e,"ivec2")}generateSnippet(e,n,r,i,s,a,o,l,c){const u=this.value;let f;return s?f=e.generateTextureBias(u,n,r,s,a,c):l?f=e.generateTextureGrad(u,n,r,l,a,c):o?f=e.generateTextureCompare(u,n,r,o,a,c):this.sampler===!1?f=e.generateTextureLoad(u,n,r,i,a,c):i?f=e.generateTextureLevel(u,n,r,i,a,c):f=e.generateTexture(u,n,r,a,c),f}generate(e,n){const r=this.value,i=e.getNodeProperties(this),s=super.generate(e,"property");if(/^sampler/.test(n))return s+"_sampler";if(e.isReference(n))return s;{const a=e.getDataFromNode(this);let o=a.propertyName;if(o===void 0){const{uvNode:u,levelNode:f,biasNode:p,compareNode:m,depthNode:x,gradNode:b,offsetNode:v}=i,_=this.generateUV(e,u),E=f?f.build(e,"float"):null,T=p?p.build(e,"float"):null,A=x?x.build(e,"int"):null,C=m?m.build(e,"float"):null,M=b?[b[0].build(e,"vec2"),b[1].build(e,"vec2")]:null,P=v?this.generateOffset(e,v):null,D=e.getVarFromNode(this);o=e.getPropertyName(D);const N=this.generateSnippet(e,s,_,E,T,A,C,M,P);e.addLineFlowCode(`${o} = ${N}`,this),a.snippet=N,a.propertyName=o}let l=o;const c=this.getNodeType(e);return e.needsToWorkingColorSpace(r)&&(l=sF(V0(l,c),r.colorSpace).setup(e).build(e,c)),e.format(l,c,n)}}setSampler(e){return this.sampler=e,this}getSampler(){return this.sampler}uv(e){return ct("TextureNode: .uv() has been renamed. Use .sample() instead."),this.sample(e)}sample(e){const n=this.clone();return n.uvNode=pt(e),n.referenceNode=this.getBase(),pt(n)}load(e){return this.sample(e).setSampler(!1)}blur(e){const n=this.clone();n.biasNode=pt(e).mul(jBe(n)),n.referenceNode=this.getBase();const r=n.value;return n.generateMipmaps===!1&&(r&&r.generateMipmaps===!1||r.minFilter===Lr||r.magFilter===Lr)&&(ct("TSL: texture().blur() requires mipmaps and sampling. Use .generateMipmaps=true and .minFilter/.magFilter=THREE.LinearFilter in the Texture."),n.biasNode=null),pt(n)}level(e){const n=this.clone();return n.levelNode=pt(e),n.referenceNode=this.getBase(),pt(n)}size(e){return xp(this,e)}bias(e){const n=this.clone();return n.biasNode=pt(e),n.referenceNode=this.getBase(),pt(n)}getBase(){return this.referenceNode?this.referenceNode.getBase():this}compare(e){const n=this.clone();return n.compareNode=pt(e),n.referenceNode=this.getBase(),pt(n)}grad(e,n){const r=this.clone();return r.gradNode=[pt(e),pt(n)],r.referenceNode=this.getBase(),pt(r)}depth(e){const n=this.clone();return n.depthNode=pt(e),n.referenceNode=this.getBase(),pt(n)}offset(e){const n=this.clone();return n.offsetNode=pt(e),n.referenceNode=this.getBase(),pt(n)}serialize(e){super.serialize(e),e.value=this.value.toJSON(e.meta).uuid,e.sampler=this.sampler,e.updateMatrix=this.updateMatrix,e.updateType=this.updateType}deserialize(e){super.deserialize(e),this.value=e.meta.textures[e.value],this.sampler=e.sampler,this.updateMatrix=e.updateMatrix,this.updateType=e.updateType}update(){const e=this.value,n=this._matrixUniform;n!==null&&(n.value=e.matrix),e.matrixAutoUpdate===!0&&e.updateMatrix();const r=this._flipYUniform;r!==null&&(r.value=e.image instanceof ImageBitmap&&e.flipY===!0||e.isRenderTargetTexture===!0||e.isFramebufferTexture===!0||e.isDepthTexture===!0)}clone(){const e=new this.constructor(this.value,this.uvNode,this.levelNode,this.biasNode);return e.sampler=this.sampler,e.depthNode=this.depthNode,e.compareNode=this.compareNode,e.gradNode=this.gradNode,e.offsetNode=this.offsetNode,e}}const zBe=Wn(Ex).setParameterLength(1,4).setName("texture"),Ln=(t=dee,e=null,n=null,r=null)=>{let i;return t&&t.isTextureNode===!0?(i=pt(t.clone()),i.referenceNode=t.getBase(),e!==null&&(i.uvNode=pt(e)),n!==null&&(i.levelNode=pt(n)),r!==null&&(i.biasNode=pt(r))):i=zBe(t,e,n,r),i},Ko=(...t)=>Ln(...t).setSampler(!1);class fee extends j_{static get type(){return"BufferNode"}constructor(e,n,r=0){super(e,n),this.isBufferNode=!0,this.bufferType=n,this.bufferCount=r}getElementType(e){return this.getNodeType(e)}getInputType(){return"buffer"}}const hee=(t,e,n)=>pt(new fee(t,e,n));class $Be extends U_{static get type(){return"UniformArrayElementNode"}constructor(e,n){super(e,n),this.isArrayBufferElementNode=!0}generate(e){const n=super.generate(e),r=this.getNodeType(),i=this.node.getPaddedType();return e.format(n,i,r)}}class GBe extends fee{static get type(){return"UniformArrayNode"}constructor(e,n=null){super(null),this.array=e,this.elementType=n===null?_2(e[0]):n,this.paddedType=this.getPaddedType(),this.updateType=yn.RENDER,this.isArrayBufferNode=!0}getNodeType(){return this.paddedType}getElementType(){return this.elementType}getPaddedType(){const e=this.elementType;let n="vec4";return e==="mat2"?n="mat2":/mat/.test(e)===!0?n="mat4":e.charAt(0)==="i"?n="ivec4":e.charAt(0)==="u"&&(n="uvec4"),n}update(){const{array:e,value:n}=this,r=this.elementType;if(r==="float"||r==="int"||r==="uint")for(let i=0;i<e.length;i++){const s=i*4;n[s]=e[i]}else if(r==="color")for(let i=0;i<e.length;i++){const s=i*4,a=e[i];n[s]=a.r,n[s+1]=a.g,n[s+2]=a.b||0}else if(r==="mat2")for(let i=0;i<e.length;i++){const s=i*4,a=e[i];n[s]=a.elements[0],n[s+1]=a.elements[1],n[s+2]=a.elements[2],n[s+3]=a.elements[3]}else if(r==="mat3")for(let i=0;i<e.length;i++){const s=i*16,a=e[i];n[s]=a.elements[0],n[s+1]=a.elements[1],n[s+2]=a.elements[2],n[s+4]=a.elements[3],n[s+5]=a.elements[4],n[s+6]=a.elements[5],n[s+8]=a.elements[6],n[s+9]=a.elements[7],n[s+10]=a.elements[8],n[s+15]=1}else if(r==="mat4")for(let i=0;i<e.length;i++){const s=i*16,a=e[i];for(let o=0;o<a.elements.length;o++)n[s+o]=a.elements[o]}else for(let i=0;i<e.length;i++){const s=i*4,a=e[i];n[s]=a.x,n[s+1]=a.y,n[s+2]=a.z||0,n[s+3]=a.w||0}}setup(e){const n=this.array.length,r=this.elementType;let i=Float32Array;const s=this.paddedType,a=e.getTypeLength(s);return r.charAt(0)==="i"&&(i=Int32Array),r.charAt(0)==="u"&&(i=Uint32Array),this.value=new i(n*a),this.bufferCount=n,this.bufferType=s,super.setup(e)}element(e){return pt(new $Be(this,pt(e)))}}const Bl=(t,e)=>pt(new GBe(t,e));class VBe extends Wt{constructor(e){super("float"),this.name=e,this.isBuiltinNode=!0}generate(){return this.name}}const z_=Wn(VBe).setParameterLength(1);let nv,rv;class Er extends Wt{static get type(){return"ScreenNode"}constructor(e){super(),this.scope=e,this._output=null,this.isViewportNode=!0}getNodeType(){return this.scope===Er.DPR?"float":this.scope===Er.VIEWPORT?"vec4":"vec2"}getUpdateType(){let e=yn.NONE;return(this.scope===Er.SIZE||this.scope===Er.VIEWPORT||this.scope===Er.DPR)&&(e=yn.RENDER),this.updateType=e,e}update({renderer:e}){const n=e.getRenderTarget();this.scope===Er.VIEWPORT?n!==null?rv.copy(n.viewport):(e.getViewport(rv),rv.multiplyScalar(e.getPixelRatio())):this.scope===Er.DPR?this._output.value=e.getPixelRatio():n!==null?(nv.width=n.width,nv.height=n.height):e.getDrawingBufferSize(nv)}setup(){const e=this.scope;let n=null;return e===Er.SIZE?n=nn(nv||(nv=new mt)):e===Er.VIEWPORT?n=nn(rv||(rv=new an)):e===Er.DPR?n=nn(1):n=bt(OC.div(cL)),this._output=n,n}generate(e){if(this.scope===Er.COORDINATE){let n=e.getFragCoord();if(e.isFlipY()){const r=e.getNodeProperties(cL).outputNode.build(e);n=`${e.getType("vec2")}( ${n}.x, ${r}.y - ${n}.y )`}return n}return super.generate(e)}}Er.COORDINATE="coordinate";Er.VIEWPORT="viewport";Er.SIZE="size";Er.UV="uv";Er.DPR="dpr";const HBe=St(Er,Er.DPR),qg=St(Er,Er.UV),cL=St(Er,Er.SIZE),OC=St(Er,Er.COORDINATE),pee=St(Er,Er.VIEWPORT),WBe=pee.zw;pee.xy;const oF=nn(0,"uint").setName("u_cameraIndex").setGroup(eF("cameraIndex")).toVarying("v_cameraIndex"),Kh=nn("float").setName("cameraNear").setGroup(en).onRenderUpdate(({camera:t})=>t.near),Zh=nn("float").setName("cameraFar").setGroup(en).onRenderUpdate(({camera:t})=>t.far),mee=at(({camera:t})=>{let e;if(t.isArrayCamera&&t.cameras.length>0){const n=[];for(const i of t.cameras)n.push(i.projectionMatrix);e=Bl(n).setGroup(en).setName("cameraProjectionMatrices").element(t.isMultiViewCamera?z_("gl_ViewID_OVR"):oF).toConst("cameraProjectionMatrix")}else e=nn("mat4").setName("cameraProjectionMatrix").setGroup(en).onRenderUpdate(({camera:n})=>n.projectionMatrix);return e}).once()(),Td=at(({camera:t})=>{let e;if(t.isArrayCamera&&t.cameras.length>0){const n=[];for(const i of t.cameras)n.push(i.matrixWorldInverse);e=Bl(n).setGroup(en).setName("cameraViewMatrices").element(t.isMultiViewCamera?z_("gl_ViewID_OVR"):oF).toConst("cameraViewMatrix")}else e=nn("mat4").setName("cameraViewMatrix").setGroup(en).onRenderUpdate(({camera:n})=>n.matrixWorldInverse);return e}).once()(),qBe=at(({camera:t})=>{let e;if(t.isArrayCamera&&t.cameras.length>0){const n=[];for(let i=0,s=t.cameras.length;i<s;i++)n.push(new ae);e=Bl(n).setGroup(en).setName("cameraPositions").onRenderUpdate(({camera:i},s)=>{const a=i.cameras,o=s.array;for(let l=0,c=a.length;l<c;l++)o[l].setFromMatrixPosition(a[l].matrixWorld)}).element(t.isMultiViewCamera?z_("gl_ViewID_OVR"):oF).toConst("cameraPosition")}else e=nn(new ae).setName("cameraPosition").setGroup(en).onRenderUpdate(({camera:n},r)=>r.value.setFromMatrixPosition(n.matrixWorld));return e}).once()(),iV=new A_;class vr extends Wt{static get type(){return"Object3DNode"}constructor(e,n=null){super(),this.scope=e,this.object3d=n,this.updateType=yn.OBJECT,this.uniformNode=new j_(null)}getNodeType(){const e=this.scope;if(e===vr.WORLD_MATRIX)return"mat4";if(e===vr.POSITION||e===vr.VIEW_POSITION||e===vr.DIRECTION||e===vr.SCALE)return"vec3";if(e===vr.RADIUS)return"float"}update(e){const n=this.object3d,r=this.uniformNode,i=this.scope;if(i===vr.WORLD_MATRIX)r.value=n.matrixWorld;else if(i===vr.POSITION)r.value=r.value||new ae,r.value.setFromMatrixPosition(n.matrixWorld);else if(i===vr.SCALE)r.value=r.value||new ae,r.value.setFromMatrixScale(n.matrixWorld);else if(i===vr.DIRECTION)r.value=r.value||new ae,n.getWorldDirection(r.value);else if(i===vr.VIEW_POSITION){const s=e.camera;r.value=r.value||new ae,r.value.setFromMatrixPosition(n.matrixWorld),r.value.applyMatrix4(s.matrixWorldInverse)}else if(i===vr.RADIUS){const s=e.object.geometry;s.boundingSphere===null&&s.computeBoundingSphere(),iV.copy(s.boundingSphere).applyMatrix4(n.matrixWorld),r.value=iV.radius}}generate(e){const n=this.scope;return n===vr.WORLD_MATRIX?this.uniformNode.nodeType="mat4":n===vr.POSITION||n===vr.VIEW_POSITION||n===vr.DIRECTION||n===vr.SCALE?this.uniformNode.nodeType="vec3":n===vr.RADIUS&&(this.uniformNode.nodeType="float"),this.uniformNode.build(e)}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}vr.WORLD_MATRIX="worldMatrix";vr.POSITION="position";vr.SCALE="scale";vr.VIEW_POSITION="viewPosition";vr.DIRECTION="direction";vr.RADIUS="radius";const XBe=Wn(vr,vr.POSITION).setParameterLength(1);class hl extends vr{static get type(){return"ModelNode"}constructor(e){super(e)}update(e){this.object3d=e.object,super.update(e)}}hl.DIRECTION;const Lp=St(hl,hl.WORLD_MATRIX);hl.POSITION;hl.SCALE;hl.VIEW_POSITION;hl.RADIUS;const YBe=nn(new pn).onObjectUpdate(({object:t},e)=>e.value.getNormalMatrix(t.matrixWorld)),DC=at(t=>t.renderer.overrideNodes.modelViewMatrix||KBe).once()().toVar("modelViewMatrix"),KBe=Td.mul(Lp),sV=at(t=>(t.context.isHighPrecisionModelViewMatrix=!0,nn("mat4").onObjectUpdate(({object:e,camera:n})=>e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld)))).once()().toVar("highpModelViewMatrix"),aV=at(t=>{const e=t.context.isHighPrecisionModelViewMatrix;return nn("mat3").onObjectUpdate(({object:n,camera:r})=>(e!==!0&&n.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,n.matrixWorld),n.normalMatrix.getNormalMatrix(n.modelViewMatrix)))}).once()().toVar("highpModelNormalViewMatrix"),LC=$f("position","vec3"),Js=LC.toVarying("positionLocal"),oV=LC.toVarying("positionPrevious"),H0=at(t=>Lp.mul(Js).xyz.toVarying(t.getSubBuildProperty("v_positionWorld")),"vec3").once(["POSITION"])(),gee=at(()=>Js.transformDirection(Lp).toVarying("v_positionWorldDirection").normalize().toVar("positionWorldDirection"),"vec3").once(["POSITION"])(),Ei=at(t=>t.context.setupPositionView().toVarying("v_positionView"),"vec3").once(["POSITION"])(),Kr=at(t=>{let e;return t.camera.isOrthographicCamera?e=Qe(0,0,1):e=Ei.negate().toVarying("v_positionViewDirection").normalize(),e.toVar("positionViewDirection")},"vec3").once(["POSITION"])();class ZBe extends Wt{static get type(){return"FrontFacingNode"}constructor(){super("bool"),this.isFrontFacingNode=!0}generate(e){if(e.shaderStage!=="fragment")return"true";const{material:n}=e;return n.side===Sr?"false":e.getFrontFacing()}}const QBe=St(ZBe),xee=je(QBe).mul(2).sub(1),$_=at(([t],{material:e})=>{const n=e.side;return n===Sr?t=t.mul(-1):n===Zs&&(t=t.mul(xee)),t}),yee=$f("normal","vec3"),$c=at(t=>t.geometry.hasAttribute("normal")===!1?(ct('TSL: Vertex attribute "normal" not found on geometry.'),Qe(0,1,0)):yee,"vec3").once()().toVar("normalLocal"),JBe=Ei.dFdx().cross(Ei.dFdy()).normalize().toVar("normalFlat"),Gb=at(t=>{let e;return t.material.flatShading===!0?e=JBe:e=vee($c).toVarying("v_normalViewGeometry").normalize(),e},"vec3").once()().toVar("normalViewGeometry"),eFe=at(t=>{let e=Gb.transformDirection(Td);return t.material.flatShading!==!0&&(e=e.toVarying("v_normalWorldGeometry")),e.normalize().toVar("normalWorldGeometry")},"vec3").once()(),ir=at(({subBuildFn:t,material:e,context:n})=>{let r;return t==="NORMAL"||t==="VERTEX"?(r=Gb,e.flatShading!==!0&&(r=$_(r))):r=n.setupNormal().context({getUV:null}),r},"vec3").once(["NORMAL","VERTEX"])().toVar("normalView"),Cx=ir.transformDirection(Td).toVar("normalWorld"),Rg=at(({subBuildFn:t,context:e})=>{let n;return t==="NORMAL"||t==="VERTEX"?n=ir:n=e.setupClearcoatNormal().context({getUV:null}),n},"vec3").once(["NORMAL","VERTEX"])().toVar("clearcoatNormalView"),tFe=at(([t,e=Lp])=>{const n=Sa(e),r=t.div(Qe(n[0].dot(n[0]),n[1].dot(n[1]),n[2].dot(n[2])));return n.mul(r).xyz}),vee=at(([t],e)=>{const n=e.renderer.overrideNodes.modelNormalViewMatrix;if(n!==null)return n.transformDirection(t);const r=YBe.mul(t);return Td.transformDirection(r)});at(()=>(ct('TSL: "transformedNormalView" is deprecated. Use "normalView" instead.'),ir)).once(["NORMAL","VERTEX"])();at(()=>(ct('TSL: "transformedNormalWorld" is deprecated. Use "normalWorld" instead.'),Cx)).once(["NORMAL","VERTEX"])();at(()=>(ct('TSL: "transformedClearcoatNormalView" is deprecated. Use "clearcoatNormalView" instead.'),Rg)).once(["NORMAL","VERTEX"])();const lV=new Ka,PP=new In,nFe=nn(0).onReference(({material:t})=>t).onObjectUpdate(({material:t})=>t.refractionRatio),NP=nn(1).onReference(({material:t})=>t).onObjectUpdate(function({material:t,scene:e}){return t.envMap?t.envMapIntensity:e.environmentIntensity}),bee=nn(new In).onReference(function(t){return t.material}).onObjectUpdate(function({material:t,scene:e}){const n=e.environment!==null&&t.envMap===null?e.environmentRotation:t.envMapRotation;return n?(lV.copy(n),PP.makeRotationFromEuler(lV)):PP.identity(),PP}),rFe=Kr.negate().reflect(ir),iFe=Kr.negate().refract(ir,nFe),sFe=rFe.transformDirection(Td).toVar("reflectVector"),aFe=iFe.transformDirection(Td).toVar("reflectVector"),oFe=new M_;class lFe extends Ex{static get type(){return"CubeTextureNode"}constructor(e,n=null,r=null,i=null){super(e,n,r,i),this.isCubeTextureNode=!0}getInputType(){return"cubeTexture"}getDefaultUV(){const e=this.value;return e.mapping===Fc?sFe:e.mapping===Uc?aFe:(xt('CubeTextureNode: Mapping "%s" not supported.',e.mapping),Qe(0,0,0))}setUpdateMatrix(){}setupUV(e,n){const r=this.value;return(e.renderer.coordinateSystem===jf||!r.isRenderTargetTexture)&&(n=Qe(n.x.negate(),n.yz)),bee.mul(n)}generateUV(e,n){return n.build(e,this.sampler===!0?"vec3":"ivec3")}}const cFe=Wn(lFe).setParameterLength(1,4).setName("cubeTexture"),Vb=(t=oFe,e=null,n=null,r=null)=>{let i;return t&&t.isCubeTextureNode===!0?(i=pt(t.clone()),i.referenceNode=t,e!==null&&(i.uvNode=pt(e)),n!==null&&(i.levelNode=pt(n)),r!==null&&(i.biasNode=pt(r))):i=cFe(t,e,n,r),i};class uFe extends U_{static get type(){return"ReferenceElementNode"}constructor(e,n){super(e,n),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){const n=super.generate(e),r=this.referenceNode.getNodeType(),i=this.getNodeType();return e.format(n,r,i)}}class lF extends Wt{static get type(){return"ReferenceNode"}constructor(e,n,r=null,i=null){super(),this.property=e,this.uniformType=n,this.object=r,this.count=i,this.properties=e.split("."),this.reference=r,this.node=null,this.group=null,this.name=null,this.updateType=yn.OBJECT}element(e){return pt(new uFe(this,pt(e)))}setGroup(e){return this.group=e,this}setName(e){return this.name=e,this}label(e){return ct('TSL: "label()" has been deprecated. Use "setName()" instead.'),this.setName(e)}setNodeType(e){let n=null;this.count!==null?n=hee(null,e,this.count):Array.isArray(this.getValueFromReference())?n=Bl(null,e):e==="texture"?n=Ln(null):e==="cubeTexture"?n=Vb(null):n=nn(null,e),this.group!==null&&n.setGroup(this.group),this.name!==null&&n.setName(this.name),this.node=n}getNodeType(e){return this.node===null&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}getValueFromReference(e=this.reference){const{properties:n}=this;let r=e[n[0]];for(let i=1;i<n.length;i++)r=r[n[i]];return r}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){this.node===null&&this.setNodeType(this.uniformType);const e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}const br=(t,e,n)=>pt(new lF(t,e,n)),cV=(t,e,n,r)=>pt(new lF(t,e,r,n));class dFe extends lF{static get type(){return"MaterialReferenceNode"}constructor(e,n,r=null){super(e,n,r),this.material=r,this.isMaterialReferenceNode=!0}updateReference(e){return this.reference=this.material!==null?this.material:e.material,this.reference}}const xf=(t,e,n=null)=>pt(new dFe(t,e,n)),_ee=Tx(),fFe=Ei.dFdx(),hFe=Ei.dFdy(),See=_ee.dFdx(),wee=_ee.dFdy(),Tee=ir,Eee=hFe.cross(Tee),Cee=Tee.cross(fFe),uL=Eee.mul(See.x).add(Cee.mul(wee.x)),dL=Eee.mul(See.y).add(Cee.mul(wee.y)),uV=uL.dot(uL).max(dL.dot(dL)),Aee=uV.equal(0).select(0,uV.inverseSqrt()),pFe=uL.mul(Aee).toVar("tangentViewFrame"),mFe=dL.mul(Aee).toVar("bitangentViewFrame"),Mee=at(t=>(t.geometry.hasAttribute("tangent")===!1&&t.geometry.computeTangents(),$f("tangent","vec4")))(),cF=Mee.xyz.toVar("tangentLocal"),Ree=at(({subBuildFn:t,geometry:e,material:n})=>{let r;return t==="VERTEX"||e.hasAttribute("tangent")?r=DC.mul(mn(cF,0)).xyz.toVarying("v_tangentView").normalize():r=pFe,n.flatShading!==!0&&(r=$_(r)),r},"vec3").once(["NORMAL","VERTEX"])().toVar("tangentView"),gFe=at(([t,e],{subBuildFn:n,material:r})=>{let i=t.mul(Mee.w).xyz;return n==="NORMAL"&&r.flatShading!==!0&&(i=i.toVarying(e)),i}).once(["NORMAL"]),xFe=at(({subBuildFn:t,geometry:e,material:n})=>{let r;return t==="VERTEX"||e.hasAttribute("tangent")?r=gFe(ir.cross(Ree),"v_bitangentView").normalize():r=mFe,n.flatShading!==!0&&(r=$_(r)),r},"vec3").once(["NORMAL","VERTEX"])().toVar("bitangentView"),Pv=Sa(Ree,xFe,ir).toVar("TBNViewMatrix"),yFe=at(()=>{let t=Wg.cross(Kr);return t=t.cross(Wg).normalize(),t=zr(t,ir,$h.mul(ju.oneMinus()).oneMinus().pow2().pow2()).normalize(),t}).once()();class vFe extends is{static get type(){return"NormalMapNode"}constructor(e,n=null){super("vec3"),this.node=e,this.scaleNode=n,this.normalMapType=ud}setup({material:e}){const{normalMapType:n,scaleNode:r}=this;let i=this.node.mul(2).sub(1);if(r!==null){let a=r;e.flatShading===!0&&(a=$_(a)),i=Qe(i.xy.mul(a),i.z)}let s=null;return n===$Z?s=vee(i):n===ud?s=Pv.mul(i).normalize():(xt(`NodeMaterial: Unsupported normal map type: ${n}`),s=ir),s}}const dV=Wn(vFe).setParameterLength(1,2),bFe=at(({textureNode:t,bumpScale:e})=>{const n=i=>t.isolate().context({getUV:s=>i(s.uvNode||Tx()),forceUVContext:!0}),r=je(n(i=>i));return bt(je(n(i=>i.add(i.dFdx()))).sub(r),je(n(i=>i.add(i.dFdy()))).sub(r)).mul(e)}),_Fe=at(t=>{const{surf_pos:e,surf_norm:n,dHdxy:r}=t,i=e.dFdx().normalize(),s=e.dFdy().normalize(),a=n,o=s.cross(a),l=a.cross(i),c=i.dot(o).mul(xee),u=c.sign().mul(r.x.mul(o).add(r.y.mul(l)));return c.abs().mul(n).sub(u).normalize()});class SFe extends is{static get type(){return"BumpMapNode"}constructor(e,n=null){super("vec3"),this.textureNode=e,this.scaleNode=n}setup(){const e=this.scaleNode!==null?this.scaleNode:1,n=bFe({textureNode:this.textureNode,bumpScale:e});return _Fe({surf_pos:Ei,surf_norm:ir,dHdxy:n})}}const wFe=Wn(SFe).setParameterLength(1,2),fV=new Map;class Ze extends Wt{static get type(){return"MaterialNode"}constructor(e){super(),this.scope=e}getCache(e,n){let r=fV.get(e);return r===void 0&&(r=xf(e,n),fV.set(e,r)),r}getFloat(e){return this.getCache(e,"float")}getColor(e){return this.getCache(e,"color")}getTexture(e){return this.getCache(e==="map"?"map":e+"Map","texture")}setup(e){const n=e.context.material,r=this.scope;let i=null;if(r===Ze.COLOR){const s=n.color!==void 0?this.getColor(r):Qe();n.map&&n.map.isTexture===!0?i=s.mul(this.getTexture("map")):i=s}else if(r===Ze.OPACITY){const s=this.getFloat(r);n.alphaMap&&n.alphaMap.isTexture===!0?i=s.mul(this.getTexture("alpha")):i=s}else if(r===Ze.SPECULAR_STRENGTH)n.specularMap&&n.specularMap.isTexture===!0?i=this.getTexture("specular").r:i=je(1);else if(r===Ze.SPECULAR_INTENSITY){const s=this.getFloat(r);n.specularIntensityMap&&n.specularIntensityMap.isTexture===!0?i=s.mul(this.getTexture(r).a):i=s}else if(r===Ze.SPECULAR_COLOR){const s=this.getColor(r);n.specularColorMap&&n.specularColorMap.isTexture===!0?i=s.mul(this.getTexture(r).rgb):i=s}else if(r===Ze.ROUGHNESS){const s=this.getFloat(r);n.roughnessMap&&n.roughnessMap.isTexture===!0?i=s.mul(this.getTexture(r).g):i=s}else if(r===Ze.METALNESS){const s=this.getFloat(r);n.metalnessMap&&n.metalnessMap.isTexture===!0?i=s.mul(this.getTexture(r).b):i=s}else if(r===Ze.EMISSIVE){const s=this.getFloat("emissiveIntensity"),a=this.getColor(r).mul(s);n.emissiveMap&&n.emissiveMap.isTexture===!0?i=a.mul(this.getTexture(r)):i=a}else if(r===Ze.NORMAL)n.normalMap?(i=dV(this.getTexture("normal"),this.getCache("normalScale","vec2")),i.normalMapType=n.normalMapType):n.bumpMap?i=wFe(this.getTexture("bump").r,this.getFloat("bumpScale")):i=ir;else if(r===Ze.CLEARCOAT){const s=this.getFloat(r);n.clearcoatMap&&n.clearcoatMap.isTexture===!0?i=s.mul(this.getTexture(r).r):i=s}else if(r===Ze.CLEARCOAT_ROUGHNESS){const s=this.getFloat(r);n.clearcoatRoughnessMap&&n.clearcoatRoughnessMap.isTexture===!0?i=s.mul(this.getTexture(r).r):i=s}else if(r===Ze.CLEARCOAT_NORMAL)n.clearcoatNormalMap?i=dV(this.getTexture(r),this.getCache(r+"Scale","vec2")):i=ir;else if(r===Ze.SHEEN){const s=this.getColor("sheenColor").mul(this.getFloat("sheen"));n.sheenColorMap&&n.sheenColorMap.isTexture===!0?i=s.mul(this.getTexture("sheenColor").rgb):i=s}else if(r===Ze.SHEEN_ROUGHNESS){const s=this.getFloat(r);n.sheenRoughnessMap&&n.sheenRoughnessMap.isTexture===!0?i=s.mul(this.getTexture(r).a):i=s,i=i.clamp(.07,1)}else if(r===Ze.ANISOTROPY)if(n.anisotropyMap&&n.anisotropyMap.isTexture===!0){const s=this.getTexture(r);i=ZB(iv.x,iv.y,iv.y.negate(),iv.x).mul(s.rg.mul(2).sub(bt(1)).normalize().mul(s.b))}else i=iv;else if(r===Ze.IRIDESCENCE_THICKNESS){const s=br("1","float",n.iridescenceThicknessRange);if(n.iridescenceThicknessMap){const a=br("0","float",n.iridescenceThicknessRange);i=s.sub(a).mul(this.getTexture(r).g).add(a)}else i=s}else if(r===Ze.TRANSMISSION){const s=this.getFloat(r);n.transmissionMap?i=s.mul(this.getTexture(r).r):i=s}else if(r===Ze.THICKNESS){const s=this.getFloat(r);n.thicknessMap?i=s.mul(this.getTexture(r).g):i=s}else if(r===Ze.IOR)i=this.getFloat(r);else if(r===Ze.LIGHT_MAP)i=this.getTexture(r).rgb.mul(this.getFloat("lightMapIntensity"));else if(r===Ze.AO)i=this.getTexture(r).r.sub(1).mul(this.getFloat("aoMapIntensity")).add(1);else if(r===Ze.LINE_DASH_OFFSET)i=n.dashOffset?this.getFloat(r):je(0);else{const s=this.getNodeType(e);i=this.getCache(r,s)}return i}}Ze.ALPHA_TEST="alphaTest";Ze.COLOR="color";Ze.OPACITY="opacity";Ze.SHININESS="shininess";Ze.SPECULAR="specular";Ze.SPECULAR_STRENGTH="specularStrength";Ze.SPECULAR_INTENSITY="specularIntensity";Ze.SPECULAR_COLOR="specularColor";Ze.REFLECTIVITY="reflectivity";Ze.ROUGHNESS="roughness";Ze.METALNESS="metalness";Ze.NORMAL="normal";Ze.CLEARCOAT="clearcoat";Ze.CLEARCOAT_ROUGHNESS="clearcoatRoughness";Ze.CLEARCOAT_NORMAL="clearcoatNormal";Ze.EMISSIVE="emissive";Ze.ROTATION="rotation";Ze.SHEEN="sheen";Ze.SHEEN_ROUGHNESS="sheenRoughness";Ze.ANISOTROPY="anisotropy";Ze.IRIDESCENCE="iridescence";Ze.IRIDESCENCE_IOR="iridescenceIOR";Ze.IRIDESCENCE_THICKNESS="iridescenceThickness";Ze.IOR="ior";Ze.TRANSMISSION="transmission";Ze.THICKNESS="thickness";Ze.ATTENUATION_DISTANCE="attenuationDistance";Ze.ATTENUATION_COLOR="attenuationColor";Ze.LINE_SCALE="scale";Ze.LINE_DASH_SIZE="dashSize";Ze.LINE_GAP_SIZE="gapSize";Ze.LINE_WIDTH="linewidth";Ze.LINE_DASH_OFFSET="dashOffset";Ze.POINT_SIZE="size";Ze.DISPERSION="dispersion";Ze.LIGHT_MAP="light";Ze.AO="ao";const TFe=St(Ze,Ze.ALPHA_TEST),EFe=St(Ze,Ze.COLOR),CFe=St(Ze,Ze.SHININESS),AFe=St(Ze,Ze.EMISSIVE),Pee=St(Ze,Ze.OPACITY),MFe=St(Ze,Ze.SPECULAR),hV=St(Ze,Ze.SPECULAR_INTENSITY),RFe=St(Ze,Ze.SPECULAR_COLOR),OT=St(Ze,Ze.SPECULAR_STRENGTH),OP=St(Ze,Ze.REFLECTIVITY),PFe=St(Ze,Ze.ROUGHNESS),NFe=St(Ze,Ze.METALNESS),OFe=St(Ze,Ze.NORMAL),DFe=St(Ze,Ze.CLEARCOAT),LFe=St(Ze,Ze.CLEARCOAT_ROUGHNESS),IFe=St(Ze,Ze.CLEARCOAT_NORMAL),kFe=St(Ze,Ze.ROTATION),BFe=St(Ze,Ze.SHEEN),FFe=St(Ze,Ze.SHEEN_ROUGHNESS),UFe=St(Ze,Ze.ANISOTROPY),jFe=St(Ze,Ze.IRIDESCENCE),zFe=St(Ze,Ze.IRIDESCENCE_IOR),$Fe=St(Ze,Ze.IRIDESCENCE_THICKNESS),GFe=St(Ze,Ze.TRANSMISSION),VFe=St(Ze,Ze.THICKNESS),HFe=St(Ze,Ze.IOR),WFe=St(Ze,Ze.ATTENUATION_DISTANCE),qFe=St(Ze,Ze.ATTENUATION_COLOR),XFe=St(Ze,Ze.LINE_SCALE),YFe=St(Ze,Ze.LINE_DASH_SIZE),KFe=St(Ze,Ze.LINE_GAP_SIZE);Ze.LINE_WIDTH;const ZFe=St(Ze,Ze.LINE_DASH_OFFSET),QFe=St(Ze,Ze.POINT_SIZE),JFe=St(Ze,Ze.DISPERSION),Nee=St(Ze,Ze.LIGHT_MAP),e5e=St(Ze,Ze.AO),iv=nn(new mt).onReference(function(t){return t.material}).onRenderUpdate(function({material:t}){this.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation))}),Oee=at(t=>t.context.setupModelViewProjection(),"vec4").once()().toVarying("v_modelViewProjection");class $r extends Wt{static get type(){return"IndexNode"}constructor(e){super("uint"),this.scope=e,this.isIndexNode=!0}generate(e){const n=this.getNodeType(e),r=this.scope;let i;if(r===$r.VERTEX)i=e.getVertexIndex();else if(r===$r.INSTANCE)i=e.getInstanceIndex();else if(r===$r.DRAW)i=e.getDrawIndex();else if(r===$r.INVOCATION_LOCAL)i=e.getInvocationLocalIndex();else if(r===$r.INVOCATION_SUBGROUP)i=e.getInvocationSubgroupIndex();else if(r===$r.SUBGROUP)i=e.getSubgroupIndex();else throw new Error("THREE.IndexNode: Unknown scope: "+r);let s;return e.shaderStage==="vertex"||e.shaderStage==="compute"?s=i:s=Qf(this).build(e,n),s}}$r.VERTEX="vertex";$r.INSTANCE="instance";$r.SUBGROUP="subgroup";$r.INVOCATION_LOCAL="invocationLocal";$r.INVOCATION_SUBGROUP="invocationSubgroup";$r.DRAW="draw";const t5e=St($r,$r.VERTEX),uF=St($r,$r.INSTANCE);$r.SUBGROUP;$r.INVOCATION_SUBGROUP;$r.INVOCATION_LOCAL;const n5e=St($r,$r.DRAW);class r5e extends Wt{static get type(){return"InstanceNode"}constructor(e,n,r=null){super("void"),this.count=e,this.instanceMatrix=n,this.instanceColor=r,this.instanceMatrixNode=null,this.instanceColorNode=null,this.updateType=yn.FRAME,this.buffer=null,this.bufferColor=null}setup(e){const{instanceMatrix:n,instanceColor:r}=this,{count:i}=n;let{instanceMatrixNode:s,instanceColorNode:a}=this;if(s===null){if(i<=1e3)s=hee(n.array,"mat4",Math.max(i,1)).element(uF);else{const l=new EEe(n.array,16,1);this.buffer=l;const c=n.usage===Cg?rV:nV,u=[c(l,"vec4",16,0),c(l,"vec4",16,4),c(l,"vec4",16,8),c(l,"vec4",16,12)];s=Hg(...u)}this.instanceMatrixNode=s}if(r&&a===null){const l=new B2e(r.array,3),c=r.usage===Cg?rV:nV;this.bufferColor=l,a=Qe(c(l,"vec3",3,0)),this.instanceColorNode=a}const o=s.mul(Js).xyz;if(Js.assign(o),e.hasGeometryAttribute("normal")){const l=tFe($c,s);$c.assign(l)}this.instanceColorNode!==null&&w2("vec3","vInstanceColor").assign(this.instanceColorNode)}update(){this.buffer!==null&&(this.buffer.clearUpdateRanges(),this.buffer.updateRanges.push(...this.instanceMatrix.updateRanges),this.instanceMatrix.usage!==Cg&&this.instanceMatrix.version!==this.buffer.version&&(this.buffer.version=this.instanceMatrix.version)),this.instanceColor&&this.bufferColor!==null&&(this.bufferColor.clearUpdateRanges(),this.bufferColor.updateRanges.push(...this.instanceColor.updateRanges),this.instanceColor.usage!==Cg&&this.instanceColor.version!==this.bufferColor.version&&(this.bufferColor.version=this.instanceColor.version))}}class i5e extends r5e{static get type(){return"InstancedMeshNode"}constructor(e){const{count:n,instanceMatrix:r,instanceColor:i}=e;super(n,r,i),this.instancedMesh=e}}const s5e=Wn(i5e).setParameterLength(1);class a5e extends Wt{static get type(){return"BatchNode"}constructor(e){super("void"),this.batchMesh=e,this.batchingIdNode=null}setup(e){this.batchingIdNode===null&&(e.getDrawIndex()===null?this.batchingIdNode=uF:this.batchingIdNode=n5e);const r=at(([x])=>{const b=Dr(xp(Ko(this.batchMesh._indirectTexture),0).x),v=Dr(x).mod(b),_=Dr(x).div(b);return Ko(this.batchMesh._indirectTexture,Lu(v,_)).x}).setLayout({name:"getIndirectIndex",type:"uint",inputs:[{name:"id",type:"int"}]})(Dr(this.batchingIdNode)),i=this.batchMesh._matricesTexture,s=Dr(xp(Ko(i),0).x),a=je(r).mul(4).toInt().toVar(),o=a.mod(s),l=a.div(s),c=Hg(Ko(i,Lu(o,l)),Ko(i,Lu(o.add(1),l)),Ko(i,Lu(o.add(2),l)),Ko(i,Lu(o.add(3),l))),u=this.batchMesh._colorsTexture;if(u!==null){const b=at(([v])=>{const _=Dr(xp(Ko(u),0).x),E=v,T=E.mod(_),A=E.div(_);return Ko(u,Lu(T,A)).rgb}).setLayout({name:"getBatchingColor",type:"vec3",inputs:[{name:"id",type:"int"}]})(r);w2("vec3","vBatchColor").assign(b)}const f=Sa(c);Js.assign(c.mul(Js));const p=$c.div(Qe(f[0].dot(f[0]),f[1].dot(f[1]),f[2].dot(f[2]))),m=f.mul(p).xyz;$c.assign(m),e.hasGeometryAttribute("tangent")&&cF.mulAssign(f)}}const o5e=Wn(a5e).setParameterLength(1),pV=new WeakMap;class l5e extends Wt{static get type(){return"SkinningNode"}constructor(e){super("void"),this.skinnedMesh=e,this.updateType=yn.OBJECT,this.skinIndexNode=$f("skinIndex","uvec4"),this.skinWeightNode=$f("skinWeight","vec4"),this.bindMatrixNode=br("bindMatrix","mat4"),this.bindMatrixInverseNode=br("bindMatrixInverse","mat4"),this.boneMatricesNode=cV("skeleton.boneMatrices","mat4",e.skeleton.bones.length),this.positionNode=Js,this.toPositionNode=Js,this.previousBoneMatricesNode=null}getSkinnedPosition(e=this.boneMatricesNode,n=this.positionNode){const{skinIndexNode:r,skinWeightNode:i,bindMatrixNode:s,bindMatrixInverseNode:a}=this,o=e.element(r.x),l=e.element(r.y),c=e.element(r.z),u=e.element(r.w),f=s.mul(n),p=Za(o.mul(i.x).mul(f),l.mul(i.y).mul(f),c.mul(i.z).mul(f),u.mul(i.w).mul(f));return a.mul(p).xyz}getSkinnedNormal(e=this.boneMatricesNode,n=$c){const{skinIndexNode:r,skinWeightNode:i,bindMatrixNode:s,bindMatrixInverseNode:a}=this,o=e.element(r.x),l=e.element(r.y),c=e.element(r.z),u=e.element(r.w);let f=Za(i.x.mul(o),i.y.mul(l),i.z.mul(c),i.w.mul(u));return f=a.mul(f).mul(s),f.transformDirection(n).xyz}getPreviousSkinnedPosition(e){const n=e.object;return this.previousBoneMatricesNode===null&&(n.skeleton.previousBoneMatrices=new Float32Array(n.skeleton.boneMatrices),this.previousBoneMatricesNode=cV("skeleton.previousBoneMatrices","mat4",n.skeleton.bones.length)),this.getSkinnedPosition(this.previousBoneMatricesNode,oV)}needsPreviousBoneMatrices(e){const n=e.renderer.getMRT();return n&&n.has("velocity")||MJ(e.object).useVelocity===!0}setup(e){this.needsPreviousBoneMatrices(e)&&oV.assign(this.getPreviousSkinnedPosition(e));const n=this.getSkinnedPosition();if(this.toPositionNode&&this.toPositionNode.assign(n),e.hasGeometryAttribute("normal")){const r=this.getSkinnedNormal();$c.assign(r),e.hasGeometryAttribute("tangent")&&cF.assign(r)}return n}generate(e,n){if(n!=="void")return super.generate(e,n)}update(e){const n=e.object&&e.object.skeleton?e.object.skeleton:this.skinnedMesh.skeleton;pV.get(n)!==e.frameId&&(pV.set(n,e.frameId),this.previousBoneMatricesNode!==null&&n.previousBoneMatrices.set(n.boneMatrices),n.update())}}const c5e=t=>pt(new l5e(t));class u5e extends Wt{static get type(){return"LoopNode"}constructor(e=[]){super("void"),this.params=e}getVarName(e){return String.fromCharCode(105+e)}getProperties(e){const n=e.getNodeProperties(this);if(n.stackNode!==void 0)return n;const r={};for(let o=0,l=this.params.length-1;o<l;o++){const c=this.params[o],u=c.isNode!==!0&&c.name||this.getVarName(o),f=c.isNode!==!0&&c.type||"int";r[u]=V0(u,f)}const i=e.addStack(),s=this.params[this.params.length-1](r);n.returnsNode=s.context({nodeLoop:s}),n.stackNode=i;const a=this.params[0];if(a.isNode!==!0&&typeof a.update=="function"){const o=at(this.params[0].update)(r);n.updateNode=o.context({nodeLoop:o})}return e.removeStack(),n}setup(e){if(this.getProperties(e),e.fnCall){const n=e.getDataFromNode(e.fnCall.shaderNode);n.hasLoop=!0}}generate(e){const n=this.getProperties(e),r=this.params,i=n.stackNode;for(let a=0,o=r.length-1;a<o;a++){const l=r[a];let c=!1,u=null,f=null,p=null,m=null,x=null,b=null;l.isNode?l.getNodeType(e)==="bool"?(c=!0,m="bool",f=l.build(e,m)):(m="int",p=this.getVarName(a),u="0",f=l.build(e,m),x="<"):(m=l.type||"int",p=l.name||this.getVarName(a),u=l.start,f=l.end,x=l.condition,b=l.update,typeof u=="number"?u=e.generateConst(m,u):u&&u.isNode&&(u=u.build(e,m)),typeof f=="number"?f=e.generateConst(m,f):f&&f.isNode&&(f=f.build(e,m)),u!==void 0&&f===void 0?(u=u+" - 1",f="0",x=">="):f!==void 0&&u===void 0&&(u="0",x="<"),x===void 0&&(Number(u)>Number(f)?x=">=":x="<"));let v;if(c)v=`while ( ${f} )`;else{const _={start:u,end:f},E=_.start,T=_.end;let A;const C=()=>x.includes("<")?"+=":"-=";if(b!=null)switch(typeof b){case"function":A=e.flowStagesNode(n.updateNode,"void").code.replace(/\t|;/g,"");break;case"number":A=p+" "+C()+" "+e.generateConst(m,b);break;case"string":A=p+" "+b;break;default:b.isNode?A=p+" "+C()+" "+b.build(e):(xt("TSL: 'Loop( { update: ... } )' is not a function, string or number."),A="break /* invalid update */")}else m==="int"||m==="uint"?b=x.includes("<")?"++":"--":b=C()+" 1.",A=p+" "+b;const M=e.getVar(m,p)+" = "+E,P=p+" "+x+" "+T;v=`for ( ${M}; ${P}; ${A} )`}e.addFlowCode((a===0?`
`:"")+e.tab+v+` {

`).addFlowTab()}const s=i.build(e,"void");n.returnsNode.build(e,"void"),e.removeFlowTab().addFlowCode(`
`+e.tab+s);for(let a=0,o=this.params.length-1;a<o;a++)e.addFlowCode((a===0?"":e.tab)+`}

`).removeFlowTab();e.addFlowTab()}}const tl=(...t)=>new u5e(Vg(t,"int")).toStack(),d5e=()=>V0("break").toStack(),DP=new WeakMap,fo=new an,mV=at(({bufferMap:t,influence:e,stride:n,width:r,depth:i,offset:s})=>{const a=Dr(t5e).mul(n).add(s),o=a.div(r),l=a.sub(o.mul(r));return Ko(t,Lu(l,o)).depth(i).xyz.mul(e)});function f5e(t){const e=t.morphAttributes.position!==void 0,n=t.morphAttributes.normal!==void 0,r=t.morphAttributes.color!==void 0,i=t.morphAttributes.position||t.morphAttributes.normal||t.morphAttributes.color,s=i!==void 0?i.length:0;let a=DP.get(t);if(a===void 0||a.count!==s){let E=function(){v.dispose(),DP.delete(t),t.removeEventListener("dispose",E)};var o=E;a!==void 0&&a.texture.dispose();const l=t.morphAttributes.position||[],c=t.morphAttributes.normal||[],u=t.morphAttributes.color||[];let f=0;e===!0&&(f=1),n===!0&&(f=2),r===!0&&(f=3);let p=t.attributes.position.count*f,m=1;const x=4096;p>x&&(m=Math.ceil(p/x),p=x);const b=new Float32Array(p*m*4*s),v=new nB(b,p,m,s);v.type=Ti,v.needsUpdate=!0;const _=f*4;for(let T=0;T<s;T++){const A=l[T],C=c[T],M=u[T],P=p*m*4*T;for(let D=0;D<A.count;D++){const N=D*_;e===!0&&(fo.fromBufferAttribute(A,D),b[P+N+0]=fo.x,b[P+N+1]=fo.y,b[P+N+2]=fo.z,b[P+N+3]=0),n===!0&&(fo.fromBufferAttribute(C,D),b[P+N+4]=fo.x,b[P+N+5]=fo.y,b[P+N+6]=fo.z,b[P+N+7]=0),r===!0&&(fo.fromBufferAttribute(M,D),b[P+N+8]=fo.x,b[P+N+9]=fo.y,b[P+N+10]=fo.z,b[P+N+11]=M.itemSize===4?fo.w:1)}}a={count:s,texture:v,stride:f,size:new mt(p,m)},DP.set(t,a),t.addEventListener("dispose",E)}return a}class h5e extends Wt{static get type(){return"MorphNode"}constructor(e){super("void"),this.mesh=e,this.morphBaseInfluence=nn(1),this.updateType=yn.OBJECT}setup(e){const{geometry:n}=e,r=n.morphAttributes.position!==void 0,i=n.hasAttribute("normal")&&n.morphAttributes.normal!==void 0,s=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,a=s!==void 0?s.length:0,{texture:o,stride:l,size:c}=f5e(n);r===!0&&Js.mulAssign(this.morphBaseInfluence),i===!0&&$c.mulAssign(this.morphBaseInfluence);const u=Dr(c.width);tl(a,({i:f})=>{const p=je(0).toVar();this.mesh.count>1&&this.mesh.morphTexture!==null&&this.mesh.morphTexture!==void 0?p.assign(Ko(this.mesh.morphTexture,Lu(Dr(f).add(1),Dr(uF))).r):p.assign(br("morphTargetInfluences","float").element(f).toVar()),Gr(p.notEqual(0),()=>{r===!0&&Js.addAssign(mV({bufferMap:o,influence:p,stride:l,width:u,depth:f,offset:Dr(0)})),i===!0&&$c.addAssign(mV({bufferMap:o,influence:p,stride:l,width:u,depth:f,offset:Dr(1)}))})})}update(){const e=this.morphBaseInfluence;this.mesh.geometry.morphTargetsRelative?e.value=1:e.value=1-this.mesh.morphTargetInfluences.reduce((n,r)=>n+r,0)}}const p5e=Wn(h5e).setParameterLength(1);class Ax extends Wt{static get type(){return"LightingNode"}constructor(){super("vec3"),this.isLightingNode=!0}}class m5e extends Ax{static get type(){return"AONode"}constructor(e=null){super(),this.aoNode=e}setup(e){e.context.ambientOcclusion.mulAssign(this.aoNode)}}class g5e extends ree{static get type(){return"LightingContextNode"}constructor(e,n=null,r=null,i=null){super(e),this.lightingModel=n,this.backdropNode=r,this.backdropAlphaNode=i,this._value=null}getContext(){const{backdropNode:e,backdropAlphaNode:n}=this,r=Qe().toVar("directDiffuse"),i=Qe().toVar("directSpecular"),s=Qe().toVar("indirectDiffuse"),a=Qe().toVar("indirectSpecular"),o={directDiffuse:r,directSpecular:i,indirectDiffuse:s,indirectSpecular:a};return{radiance:Qe().toVar("radiance"),irradiance:Qe().toVar("irradiance"),iblIrradiance:Qe().toVar("iblIrradiance"),ambientOcclusion:je(1).toVar("ambientOcclusion"),reflectedLight:o,backdrop:e,backdropAlpha:n}}setup(e){return this.value=this._value||(this._value=this.getContext()),this.value.lightingModel=this.lightingModel||e.context.lightingModel,super.setup(e)}}const x5e=Wn(g5e);class y5e extends Ax{static get type(){return"IrradianceNode"}constructor(e){super(),this.node=e}setup(e){e.context.irradiance.addAssign(this.node)}}const lg=new mt;class Dee extends Ex{static get type(){return"ViewportTextureNode"}constructor(e=qg,n=null,r=null){let i=null;r===null?(i=new ZZ,i.minFilter=za,r=i):i=r,super(r,e,n),this.generateMipmaps=!1,this.defaultFramebuffer=i,this.isOutputTextureNode=!0,this.updateBeforeType=yn.FRAME,this._cacheTextures=new WeakMap}getTextureForReference(e=null){let n,r;if(this.referenceNode?(n=this.referenceNode.defaultFramebuffer,r=this.referenceNode._cacheTextures):(n=this.defaultFramebuffer,r=this._cacheTextures),e===null)return n;if(r.has(e)===!1){const i=n.clone();r.set(e,i)}return r.get(e)}updateReference(e){const n=e.renderer.getRenderTarget();return this.value=this.getTextureForReference(n),this.value}updateBefore(e){const n=e.renderer,r=n.getRenderTarget();r===null?n.getDrawingBufferSize(lg):lg.set(r.width,r.height);const i=this.getTextureForReference(r);(i.image.width!==lg.width||i.image.height!==lg.height)&&(i.image.width=lg.width,i.image.height=lg.height,i.needsUpdate=!0);const s=i.generateMipmaps;i.generateMipmaps=this.generateMipmaps,n.copyFramebufferToTexture(i),i.generateMipmaps=s}clone(){const e=new this.constructor(this.uvNode,this.levelNode,this.value);return e.generateMipmaps=this.generateMipmaps,e}}const Lee=Wn(Dee,null,null,{generateMipmaps:!0}).setParameterLength(0,3);let Aw=null;class v5e extends Dee{static get type(){return"ViewportDepthTextureNode"}constructor(e=qg,n=null){Aw===null&&(Aw=new ol),super(e,n,Aw)}getTextureForReference(){return Aw}}const b5e=Wn(v5e).setParameterLength(0,2);class Ga extends Wt{static get type(){return"ViewportDepthNode"}constructor(e,n=null){super("float"),this.scope=e,this.valueNode=n,this.isViewportDepthNode=!0}generate(e){const{scope:n}=this;return n===Ga.DEPTH_BASE?e.getFragDepth():super.generate(e)}setup({camera:e}){const{scope:n}=this,r=this.valueNode;let i=null;if(n===Ga.DEPTH_BASE)r!==null&&(i=Bee().assign(r));else if(n===Ga.DEPTH)e.isPerspectiveCamera?i=_5e(Ei.z,Kh,Zh):i=nb(Ei.z,Kh,Zh);else if(n===Ga.LINEAR_DEPTH)if(r!==null)if(e.isPerspectiveCamera){const s=Iee(r,Kh,Zh);i=nb(s,Kh,Zh)}else i=r;else i=nb(Ei.z,Kh,Zh);return i}}Ga.DEPTH_BASE="depthBase";Ga.DEPTH="depth";Ga.LINEAR_DEPTH="linearDepth";const nb=(t,e,n)=>t.add(e).div(e.sub(n)),_5e=(t,e,n)=>e.add(t).mul(n).div(n.sub(e).mul(t)),Iee=(t,e,n)=>e.mul(n).div(n.sub(e).mul(t).sub(n)),kee=(t,e,n)=>{e=e.max(1e-6).toVar();const r=td(t.negate().div(e)),i=td(n.div(e));return r.div(i)},Bee=Wn(Ga,Ga.DEPTH_BASE),Fee=St(Ga,Ga.DEPTH),S5e=Wn(Ga,Ga.LINEAR_DEPTH).setParameterLength(0,1);b5e();Fee.assign=t=>Bee(t);class ll extends Wt{static get type(){return"ClippingNode"}constructor(e=ll.DEFAULT){super(),this.scope=e}setup(e){super.setup(e);const n=e.clippingContext,{intersectionPlanes:r,unionPlanes:i}=n;return this.hardwareClipping=e.material.hardwareClipping,this.scope===ll.ALPHA_TO_COVERAGE?this.setupAlphaToCoverage(r,i):this.scope===ll.HARDWARE?this.setupHardwareClipping(i,e):this.setupDefault(r,i)}setupAlphaToCoverage(e,n){return at(()=>{const r=je().toVar("distanceToPlane"),i=je().toVar("distanceToGradient"),s=je(1).toVar("clipOpacity"),a=n.length;if(this.hardwareClipping===!1&&a>0){const l=Bl(n).setGroup(en);tl(a,({i:c})=>{const u=l.element(c);r.assign(Ei.dot(u.xyz).negate().add(u.w)),i.assign(r.fwidth().div(2)),s.mulAssign(md(i.negate(),i,r))})}const o=e.length;if(o>0){const l=Bl(e).setGroup(en),c=je(1).toVar("intersectionClipOpacity");tl(o,({i:u})=>{const f=l.element(u);r.assign(Ei.dot(f.xyz).negate().add(f.w)),i.assign(r.fwidth().div(2)),c.mulAssign(md(i.negate(),i,r).oneMinus())}),s.mulAssign(c.oneMinus())}$n.a.mulAssign(s),$n.a.equal(0).discard()})()}setupDefault(e,n){return at(()=>{const r=n.length;if(this.hardwareClipping===!1&&r>0){const s=Bl(n).setGroup(en);tl(r,({i:a})=>{const o=s.element(a);Ei.dot(o.xyz).greaterThan(o.w).discard()})}const i=e.length;if(i>0){const s=Bl(e).setGroup(en),a=KB(!0).toVar("clipped");tl(i,({i:o})=>{const l=s.element(o);a.assign(Ei.dot(l.xyz).greaterThan(l.w).and(a))}),a.discard()}})()}setupHardwareClipping(e,n){const r=e.length;return n.enableHardwareClipping(r),at(()=>{const i=Bl(e).setGroup(en),s=z_(n.getClipDistance());tl(r,({i:a})=>{const o=i.element(a),l=Ei.dot(o.xyz).sub(o.w).negate();s.element(a).assign(l)})})()}}ll.ALPHA_TO_COVERAGE="alphaToCoverage";ll.DEFAULT="default";ll.HARDWARE="hardware";const w5e=()=>pt(new ll),T5e=()=>pt(new ll(ll.ALPHA_TO_COVERAGE)),E5e=()=>pt(new ll(ll.HARDWARE)),C5e=.05,gV=at(([t])=>zc(vn(1e4,el(vn(17,t.x).add(vn(.1,t.y)))).mul(Za(.1,xo(el(vn(13,t.y).add(t.x))))))),xV=at(([t])=>gV(bt(gV(t.xy),t.z))),A5e=at(([t])=>{const e=ns(nd(XJ(t.xyz)),nd(YJ(t.xyz))),n=je(1).div(je(C5e).mul(e)).toVar("pixScale"),r=bt(zb(gp(td(n))),zb(nF(td(n)))),i=bt(xV(gp(r.x.mul(t.xyz))),xV(gp(r.y.mul(t.xyz)))),s=zc(td(n)),a=Za(vn(s.oneMinus(),i.x),vn(s,i.y)),o=$0(s,s.oneMinus()),l=Qe(a.mul(a).div(vn(2,o).mul(pa(1,o))),a.sub(vn(.5,o)).div(pa(1,o)),pa(1,pa(1,a).mul(pa(1,a)).div(vn(2,o).mul(pa(1,o))))),c=a.lessThan(o.oneMinus()).select(a.lessThan(o).select(l.x,l.y),l.z);return pd(c,1e-6,1)}).setLayout({name:"getAlphaHashThreshold",type:"float",inputs:[{name:"position",type:"vec3"}]});class M5e extends uee{static get type(){return"VertexColorNode"}constructor(e){super(null,"vec4"),this.isVertexColorNode=!0,this.index=e}getAttributeName(){const e=this.index;return"color"+(e>0?e:"")}generate(e){const n=this.getAttributeName(e),r=e.hasGeometryAttribute(n);let i;return r===!0?i=super.generate(e):i=e.generateConst(this.nodeType,new an(1,1,1,1)),i}serialize(e){super.serialize(e),e.index=this.index}deserialize(e){super.deserialize(e),this.index=e.index}}const R5e=(t=0)=>pt(new M5e(t)),P5e=at(([t])=>mn(t.rgb.mul(t.a),t.a),{color:"vec4",return:"vec4"});class Ri extends sa{static get type(){return"NodeMaterial"}get type(){return this.constructor.type}set type(e){}constructor(){super(),this.isNodeMaterial=!0,this.fog=!0,this.lights=!1,this.hardwareClipping=!1,this.lightsNode=null,this.envNode=null,this.aoNode=null,this.colorNode=null,this.normalNode=null,this.opacityNode=null,this.backdropNode=null,this.backdropAlphaNode=null,this.alphaTestNode=null,this.maskNode=null,this.positionNode=null,this.geometryNode=null,this.depthNode=null,this.receivedShadowPositionNode=null,this.castShadowPositionNode=null,this.receivedShadowNode=null,this.castShadowNode=null,this.outputNode=null,this.mrtNode=null,this.fragmentNode=null,this.vertexNode=null,Object.defineProperty(this,"shadowPositionNode",{get:()=>this.receivedShadowPositionNode,set:e=>{ct('NodeMaterial: ".shadowPositionNode" was renamed to ".receivedShadowPositionNode".'),this.receivedShadowPositionNode=e}})}_getNodeChildren(){const e=[];for(const n of Object.getOwnPropertyNames(this)){if(n.startsWith("_")===!0)continue;const r=this[n];r&&r.isNode===!0&&e.push({property:n,childNode:r})}return e}customProgramCacheKey(){const e=[];for(const{property:n,childNode:r}of this._getNodeChildren())e.push(AC(n.slice(0,-4)),r.getCacheKey());return this.type+F_(e)}build(e){this.setup(e)}setupObserver(e){return new fIe(e)}setup(e){e.context.setupNormal=()=>eb(this.setupNormal(e),"NORMAL","vec3"),e.context.setupPositionView=()=>this.setupPositionView(e),e.context.setupModelViewProjection=()=>this.setupModelViewProjection(e);const n=e.renderer,r=n.getRenderTarget();e.addStack();const i=eb(this.setupVertex(e),"VERTEX"),s=this.vertexNode||i;e.stack.outputNode=s,this.setupHardwareClipping(e),this.geometryNode!==null&&(e.stack.outputNode=e.stack.outputNode.bypass(this.geometryNode)),e.addFlow("vertex",e.removeStack()),e.addStack();let a;const o=this.setupClipping(e);if((this.depthWrite===!0||this.depthTest===!0)&&(r!==null?r.depthBuffer===!0&&this.setupDepth(e):n.depth===!0&&this.setupDepth(e)),this.fragmentNode===null){this.setupDiffuseColor(e),this.setupVariants(e);const l=this.setupLighting(e);o!==null&&e.stack.addToStack(o);const c=mn(l,$n.a).max(0);a=this.setupOutput(e,c),Jv.assign(a);const u=this.outputNode!==null;if(u&&(a=this.outputNode),r!==null){const f=n.getMRT(),p=this.mrtNode;f!==null?(u&&Jv.assign(a),a=f,p!==null&&(a=f.merge(p))):p!==null&&(a=p)}}else{let l=this.fragmentNode;l.isOutputStructNode!==!0&&(l=mn(l)),a=this.setupOutput(e,l)}e.stack.outputNode=a,e.addFlow("fragment",e.removeStack()),e.observer=this.setupObserver(e)}setupClipping(e){if(e.clippingContext===null)return null;const{unionPlanes:n,intersectionPlanes:r}=e.clippingContext;let i=null;if(n.length>0||r.length>0){const s=e.renderer.currentSamples;this.alphaToCoverage&&s>1?i=T5e():e.stack.addToStack(w5e())}return i}setupHardwareClipping(e){if(this.hardwareClipping=!1,e.clippingContext===null)return;const n=e.clippingContext.unionPlanes.length;n>0&&n<=8&&e.isAvailable("clipDistance")&&(e.stack.addToStack(E5e()),this.hardwareClipping=!0)}setupDepth(e){const{renderer:n,camera:r}=e;let i=this.depthNode;if(i===null){const s=n.getMRT();s&&s.has("depth")?i=s.get("depth"):n.logarithmicDepthBuffer===!0&&(r.isPerspectiveCamera?i=kee(Ei.z,Kh,Zh):i=nb(Ei.z,Kh,Zh))}i!==null&&Fee.assign(i).toStack()}setupPositionView(){return DC.mul(Js).xyz}setupModelViewProjection(){return mee.mul(Ei)}setupVertex(e){return e.addStack(),this.setupPosition(e),e.context.vertex=e.removeStack(),Oee}setupPosition(e){const{object:n,geometry:r}=e;if((r.morphAttributes.position||r.morphAttributes.normal||r.morphAttributes.color)&&p5e(n).toStack(),n.isSkinnedMesh===!0&&c5e(n).toStack(),this.displacementMap){const i=xf("displacementMap","texture"),s=xf("displacementScale","float"),a=xf("displacementBias","float");Js.addAssign($c.normalize().mul(i.x.mul(s).add(a)))}return n.isBatchedMesh&&o5e(n).toStack(),n.isInstancedMesh&&n.instanceMatrix&&n.instanceMatrix.isInstancedBufferAttribute===!0&&s5e(n).toStack(),this.positionNode!==null&&Js.assign(eb(this.positionNode,"POSITION","vec3")),Js}setupDiffuseColor(e){const{object:n,geometry:r}=e;this.maskNode!==null&&KB(this.maskNode).not().discard();let i=this.colorNode?mn(this.colorNode):EFe;this.vertexColors===!0&&r.hasAttribute("color")&&(i=i.mul(R5e())),n.instanceColor&&(i=w2("vec3","vInstanceColor").mul(i)),n.isBatchedMesh&&n._colorsTexture&&(i=w2("vec3","vBatchColor").mul(i)),$n.assign(i);const s=this.opacityNode?je(this.opacityNode):Pee;$n.a.assign($n.a.mul(s));let a=null;(this.alphaTestNode!==null||this.alphaTest>0)&&(a=this.alphaTestNode!==null?je(this.alphaTestNode):TFe,this.alphaToCoverage===!0?($n.a=md(a,a.add(KJ($n.a)),$n.a),$n.a.lessThanEqual(0).discard()):$n.a.lessThanEqual(a).discard()),this.alphaHash===!0&&$n.a.lessThan(A5e(Js)).discard(),e.isOpaque()&&$n.a.assign(1)}setupVariants(){}setupOutgoingLight(){return this.lights===!0?Qe(0):$n.rgb}setupNormal(){return this.normalNode?Qe(this.normalNode):OFe}setupEnvironment(){let e=null;return this.envNode?e=this.envNode:this.envMap&&(e=this.envMap.isCubeTexture?xf("envMap","cubeTexture"):xf("envMap","texture")),e}setupLightMap(e){let n=null;return e.material.lightMap&&(n=new y5e(Nee)),n}setupLights(e){const n=[],r=this.setupEnvironment(e);r&&r.isLightingNode&&n.push(r);const i=this.setupLightMap(e);if(i&&i.isLightingNode&&n.push(i),this.aoNode!==null||e.material.aoMap){const a=this.aoNode!==null?this.aoNode:e5e;n.push(new m5e(a))}let s=this.lightsNode||e.lightsNode;return n.length>0&&(s=e.renderer.lighting.createNode([...s.getLights(),...n])),s}setupLightingModel(){}setupLighting(e){const{material:n}=e,{backdropNode:r,backdropAlphaNode:i,emissiveNode:s}=this,o=this.lights===!0||this.lightsNode!==null?this.setupLights(e):null;let l=this.setupOutgoingLight(e);if(o&&o.getScope().hasLights){const c=this.setupLightingModel(e)||null;l=x5e(o,c,r,i)}else r!==null&&(l=Qe(i!==null?zr(l,r,i):r));return(s&&s.isNode===!0||n.emissive&&n.emissive.isColor===!0)&&(JG.assign(Qe(s||AFe)),l=l.add(JG)),l}setupFog(e,n){const r=e.fogNode;return r&&(Jv.assign(n),n=mn(r.toVar())),n}setupPremultipliedAlpha(e,n){return P5e(n)}setupOutput(e,n){return this.fog===!0&&(n=this.setupFog(e,n)),this.premultipliedAlpha===!0&&(n=this.setupPremultipliedAlpha(e,n)),n}setDefaultValues(e){for(const r in e){const i=e[r];this[r]===void 0&&(this[r]=i,i&&i.clone&&(this[r]=i.clone()))}const n=Object.getOwnPropertyDescriptors(e.constructor.prototype);for(const r in n)Object.getOwnPropertyDescriptor(this.constructor.prototype,r)===void 0&&n[r].get!==void 0&&Object.defineProperty(this.constructor.prototype,r,n[r])}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{},nodes:{}});const r=sa.prototype.toJSON.call(this,e);r.inputNodes={};for(const{property:s,childNode:a}of this._getNodeChildren())r.inputNodes[s]=a.toJSON(e).uuid;function i(s){const a=[];for(const o in s){const l=s[o];delete l.metadata,a.push(l)}return a}if(n){const s=i(e.textures),a=i(e.images),o=i(e.nodes);s.length>0&&(r.textures=s),a.length>0&&(r.images=a),o.length>0&&(r.nodes=o)}return r}copy(e){return this.lightsNode=e.lightsNode,this.envNode=e.envNode,this.aoNode=e.aoNode,this.colorNode=e.colorNode,this.normalNode=e.normalNode,this.opacityNode=e.opacityNode,this.backdropNode=e.backdropNode,this.backdropAlphaNode=e.backdropAlphaNode,this.alphaTestNode=e.alphaTestNode,this.maskNode=e.maskNode,this.positionNode=e.positionNode,this.geometryNode=e.geometryNode,this.depthNode=e.depthNode,this.receivedShadowPositionNode=e.receivedShadowPositionNode,this.castShadowPositionNode=e.castShadowPositionNode,this.receivedShadowNode=e.receivedShadowNode,this.castShadowNode=e.castShadowNode,this.outputNode=e.outputNode,this.mrtNode=e.mrtNode,this.fragmentNode=e.fragmentNode,this.vertexNode=e.vertexNode,super.copy(e)}}const N5e=new dC;class O5e extends Ri{static get type(){return"LineBasicNodeMaterial"}constructor(e){super(),this.isLineBasicNodeMaterial=!0,this.setDefaultValues(N5e),this.setValues(e)}}const D5e=new fEe;class L5e extends Ri{static get type(){return"LineDashedNodeMaterial"}constructor(e){super(),this.isLineDashedNodeMaterial=!0,this.setDefaultValues(D5e),this.dashOffset=0,this.offsetNode=null,this.dashScaleNode=null,this.dashSizeNode=null,this.gapSizeNode=null,this.setValues(e)}setupVariants(){const e=this.offsetNode?je(this.offsetNode):ZFe,n=this.dashScaleNode?je(this.dashScaleNode):XFe,r=this.dashSizeNode?je(this.dashSizeNode):YFe,i=this.gapSizeNode?je(this.gapSizeNode):KFe;RP.assign(r),eV.assign(i);const s=Qf($f("lineDistance").mul(n));(e?s.add(e):s).mod(RP.add(eV)).greaterThan(RP).discard()}}const I5e=t=>pt(t).mul(.5).add(.5),k5e=new lEe;class B5e extends Ri{static get type(){return"MeshNormalNodeMaterial"}constructor(e){super(),this.isMeshNormalNodeMaterial=!0,this.setDefaultValues(k5e),this.setValues(e)}setupDiffuseColor(){const e=this.opacityNode?je(this.opacityNode):Pee;$n.assign(sF(mn(I5e(ir),e),ha))}}const Uee=at(([t=gee])=>{const e=t.z.atan(t.x).mul(1/(Math.PI*2)).add(.5),n=t.y.clamp(-1,1).asin().mul(1/Math.PI).add(.5);return bt(e,n)});class jee extends YZ{constructor(e=1,n={}){super(e,n),this.isCubeRenderTarget=!0}fromEquirectangularTexture(e,n){const r=n.minFilter,i=n.generateMipmaps;n.generateMipmaps=!0,this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const s=new qp(5,5,5),a=Uee(gee),o=new Ri;o.colorNode=Ln(n,a,0),o.side=Sr,o.blending=_a;const l=new Ji(s,o),c=new uC;c.add(l),n.minFilter===za&&(n.minFilter=ii);const u=new XZ(1,10,this),f=e.getMRT();return e.setMRT(null),u.update(e,c),e.setMRT(f),n.minFilter=r,n.currentGenerateMipmaps=i,l.geometry.dispose(),l.material.dispose(),this}}const rb=new WeakMap;class F5e extends is{static get type(){return"CubeMapNode"}constructor(e){super("vec3"),this.envNode=e,this._cubeTexture=null,this._cubeTextureNode=Vb(null);const n=new M_;n.isRenderTargetTexture=!0,this._defaultTexture=n,this.updateBeforeType=yn.RENDER}updateBefore(e){const{renderer:n,material:r}=e,i=this.envNode;if(i.isTextureNode||i.isMaterialReferenceNode){const s=i.isTextureNode?i.value:r[i.property];if(s&&s.isTexture){const a=s.mapping;if(a===d0||a===f0){if(rb.has(s)){const o=rb.get(s);yV(o,s.mapping),this._cubeTexture=o}else{const o=s.image;if(U5e(o)){const l=new jee(o.height);l.fromEquirectangularTexture(n,s),yV(l.texture,s.mapping),this._cubeTexture=l.texture,rb.set(s,l.texture),s.addEventListener("dispose",zee)}else this._cubeTexture=this._defaultTexture}this._cubeTextureNode.value=this._cubeTexture}else this._cubeTextureNode=this.envNode}}}setup(e){return this.updateBefore(e),this._cubeTextureNode}}function U5e(t){return t==null?!1:t.height>0}function zee(t){const e=t.target;e.removeEventListener("dispose",zee);const n=rb.get(e);n!==void 0&&(rb.delete(e),n.dispose())}function yV(t,e){e===d0?t.mapping=Fc:e===f0&&(t.mapping=Uc)}const $ee=Wn(F5e).setParameterLength(1);class dF extends Ax{static get type(){return"BasicEnvironmentNode"}constructor(e=null){super(),this.envNode=e}setup(e){e.context.environment=$ee(this.envNode)}}class j5e extends Ax{static get type(){return"BasicLightMapNode"}constructor(e=null){super(),this.lightMapNode=e}setup(e){const n=je(1/Math.PI);e.context.irradianceLightMap=this.lightMapNode.mul(n)}}class IC{start(e){e.lightsNode.setupLights(e,e.lightsNode.getLightNodes(e)),this.indirect(e)}finish(){}direct(){}directRectArea(){}indirect(){}ambientOcclusion(){}}class Gee extends IC{constructor(){super()}indirect({context:e}){const n=e.ambientOcclusion,r=e.reflectedLight,i=e.irradianceLightMap;r.indirectDiffuse.assign(mn(0)),i?r.indirectDiffuse.addAssign(i):r.indirectDiffuse.addAssign(mn(1,1,1,0)),r.indirectDiffuse.mulAssign(n),r.indirectDiffuse.mulAssign($n.rgb)}finish(e){const{material:n,context:r}=e,i=r.outgoingLight,s=e.context.environment;if(s)switch(n.combine){case T_:i.rgb.assign(zr(i.rgb,i.rgb.mul(s.rgb),OT.mul(OP)));break;case LZ:i.rgb.assign(zr(i.rgb,s.rgb,OT.mul(OP)));break;case IZ:i.rgb.addAssign(s.rgb.mul(OT.mul(OP)));break;default:ct("BasicLightingModel: Unsupported .combine value:",n.combine);break}}}const z5e=new Cc;class $5e extends Ri{static get type(){return"MeshBasicNodeMaterial"}constructor(e){super(),this.isMeshBasicNodeMaterial=!0,this.lights=!0,this.setDefaultValues(z5e),this.setValues(e)}setupNormal(){return $_(Gb)}setupEnvironment(e){const n=super.setupEnvironment(e);return n?new dF(n):null}setupLightMap(e){let n=null;return e.material.lightMap&&(n=new j5e(Nee)),n}setupOutgoingLight(){return $n.rgb}setupLightingModel(){return new Gee}}const Hb=at(({f0:t,f90:e,dotVH:n})=>{const r=n.mul(-5.55473).sub(6.98316).mul(n).exp2();return t.mul(r.oneMinus()).add(e.mul(r))}),W0=at(t=>t.diffuseColor.mul(1/Math.PI)),G5e=()=>je(.25),V5e=at(({dotNH:t})=>oL.mul(je(.5)).add(1).mul(je(1/Math.PI)).mul(t.pow(oL))),H5e=at(({lightDirection:t})=>{const e=t.add(Kr).normalize(),n=ir.dot(e).clamp(),r=Kr.dot(e).clamp(),i=Hb({f0:Dl,f90:1,dotVH:r}),s=G5e(),a=V5e({dotNH:n});return i.mul(s).mul(a)});class Vee extends Gee{constructor(e=!0){super(),this.specular=e}direct({lightDirection:e,lightColor:n,reflectedLight:r}){const s=ir.dot(e).clamp().mul(n);r.directDiffuse.addAssign(s.mul(W0({diffuseColor:$n.rgb}))),this.specular===!0&&r.directSpecular.addAssign(s.mul(H5e({lightDirection:e})).mul(OT))}indirect(e){const{ambientOcclusion:n,irradiance:r,reflectedLight:i}=e.context;i.indirectDiffuse.addAssign(r.mul(W0({diffuseColor:$n}))),i.indirectDiffuse.mulAssign(n)}}const W5e=new nQ;class q5e extends Ri{static get type(){return"MeshLambertNodeMaterial"}constructor(e){super(),this.isMeshLambertNodeMaterial=!0,this.lights=!0,this.setDefaultValues(W5e),this.setValues(e)}setupEnvironment(e){const n=super.setupEnvironment(e);return n?new dF(n):null}setupLightingModel(){return new Vee(!1)}}const X5e=new aEe;class Y5e extends Ri{static get type(){return"MeshPhongNodeMaterial"}constructor(e){super(),this.isMeshPhongNodeMaterial=!0,this.lights=!0,this.shininessNode=null,this.specularNode=null,this.setDefaultValues(X5e),this.setValues(e)}setupEnvironment(e){const n=super.setupEnvironment(e);return n?new dF(n):null}setupLightingModel(){return new Vee}setupVariants(){const e=(this.shininessNode?je(this.shininessNode):CFe).max(1e-4);oL.assign(e);const n=this.specularNode||MFe;Dl.assign(n)}copy(e){return this.shininessNode=e.shininessNode,this.specularNode=e.specularNode,super.copy(e)}}const K5e=at(t=>{if(t.geometry.hasAttribute("normal")===!1)return je(0);const e=Gb.dFdx().abs().max(Gb.dFdy().abs());return e.x.max(e.y).max(e.z)}),Hee=at(t=>{const{roughness:e}=t,n=K5e();let r=e.max(.0525);return r=r.add(n),r=r.min(1),r}),Z5e=at(({alpha:t,dotNL:e,dotNV:n})=>{const r=t.pow2(),i=e.mul(r.add(r.oneMinus().mul(n.pow2())).sqrt()),s=n.mul(r.add(r.oneMinus().mul(e.pow2())).sqrt());return jc(.5,i.add(s).max(GJ))}).setLayout({name:"V_GGX_SmithCorrelated",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNL",type:"float"},{name:"dotNV",type:"float"}]}),Q5e=at(({alphaT:t,alphaB:e,dotTV:n,dotBV:r,dotTL:i,dotBL:s,dotNV:a,dotNL:o})=>{const l=o.mul(Qe(t.mul(n),e.mul(r),a).length()),c=a.mul(Qe(t.mul(i),e.mul(s),o).length());return jc(.5,l.add(c)).saturate()}).setLayout({name:"V_GGX_SmithCorrelated_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotTV",type:"float",qualifier:"in"},{name:"dotBV",type:"float",qualifier:"in"},{name:"dotTL",type:"float",qualifier:"in"},{name:"dotBL",type:"float",qualifier:"in"},{name:"dotNV",type:"float",qualifier:"in"},{name:"dotNL",type:"float",qualifier:"in"}]}),J5e=at(({alpha:t,dotNH:e})=>{const n=t.pow2(),r=e.pow2().mul(n.oneMinus()).oneMinus();return n.div(r.pow2()).mul(1/Math.PI)}).setLayout({name:"D_GGX",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNH",type:"float"}]}),eUe=je(1/Math.PI),tUe=at(({alphaT:t,alphaB:e,dotNH:n,dotTH:r,dotBH:i})=>{const s=t.mul(e),a=Qe(e.mul(r),t.mul(i),s.mul(n)),o=a.dot(a),l=s.div(o);return eUe.mul(s.mul(l.pow2()))}).setLayout({name:"D_GGX_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotNH",type:"float",qualifier:"in"},{name:"dotTH",type:"float",qualifier:"in"},{name:"dotBH",type:"float",qualifier:"in"}]}),Wee=at(({lightDirection:t,f0:e,f90:n,roughness:r,f:i,normalView:s=ir,USE_IRIDESCENCE:a,USE_ANISOTROPY:o})=>{const l=r.pow2(),c=t.add(Kr).normalize(),u=s.dot(t).clamp(),f=s.dot(Kr).clamp(),p=s.dot(c).clamp(),m=Kr.dot(c).clamp();let x=Hb({f0:e,f90:n,dotVH:m}),b,v;if(QG(a)&&(x=JB.mix(x,i)),QG(o)){const _=MT.dot(t),E=MT.dot(Kr),T=MT.dot(c),A=Wg.dot(t),C=Wg.dot(Kr),M=Wg.dot(c);b=Q5e({alphaT:aL,alphaB:l,dotTV:E,dotBV:C,dotTL:_,dotBL:A,dotNV:f,dotNL:u}),v=tUe({alphaT:aL,alphaB:l,dotNH:p,dotTH:T,dotBH:M})}else b=Z5e({alpha:l,dotNL:u,dotNV:f}),v=J5e({alpha:l,dotNH:p});return x.mul(b).mul(v)}),nUe=new Uint16Array([11481,15204,11534,15171,11808,15015,12385,14843,12894,14716,13396,14600,13693,14483,13976,14366,14237,14171,14405,13961,14511,13770,14605,13598,14687,13444,14760,13305,14822,13066,14876,12857,14923,12675,14963,12517,14997,12379,15025,12230,15049,12023,15070,11843,15086,11687,15100,11551,15111,11433,15120,11330,15127,11217,15132,11060,15135,10922,15138,10801,15139,10695,15139,10600,13012,14923,13020,14917,13064,14886,13176,14800,13349,14666,13513,14526,13724,14398,13960,14230,14200,14020,14383,13827,14488,13651,14583,13491,14667,13348,14740,13132,14803,12908,14856,12713,14901,12542,14938,12394,14968,12241,14992,12017,15010,11822,15024,11654,15034,11507,15041,11380,15044,11269,15044,11081,15042,10913,15037,10764,15031,10635,15023,10520,15014,10419,15003,10330,13657,14676,13658,14673,13670,14660,13698,14622,13750,14547,13834,14442,13956,14317,14112,14093,14291,13889,14407,13704,14499,13538,14586,13389,14664,13201,14733,12966,14792,12758,14842,12577,14882,12418,14915,12272,14940,12033,14959,11826,14972,11646,14980,11490,14983,11355,14983,11212,14979,11008,14971,10830,14961,10675,14950,10540,14936,10420,14923,10315,14909,10204,14894,10041,14089,14460,14090,14459,14096,14452,14112,14431,14141,14388,14186,14305,14252,14130,14341,13941,14399,13756,14467,13585,14539,13430,14610,13272,14677,13026,14737,12808,14790,12617,14833,12449,14869,12303,14896,12065,14916,11845,14929,11655,14937,11490,14939,11347,14936,11184,14930,10970,14921,10783,14912,10621,14900,10480,14885,10356,14867,10247,14848,10062,14827,9894,14805,9745,14400,14208,14400,14206,14402,14198,14406,14174,14415,14122,14427,14035,14444,13913,14469,13767,14504,13613,14548,13463,14598,13324,14651,13082,14704,12858,14752,12658,14795,12483,14831,12330,14860,12106,14881,11875,14895,11675,14903,11501,14905,11351,14903,11178,14900,10953,14892,10757,14880,10589,14865,10442,14847,10313,14827,10162,14805,9965,14782,9792,14757,9642,14731,9507,14562,13883,14562,13883,14563,13877,14566,13862,14570,13830,14576,13773,14584,13689,14595,13582,14613,13461,14637,13336,14668,13120,14704,12897,14741,12695,14776,12516,14808,12358,14835,12150,14856,11910,14870,11701,14878,11519,14882,11361,14884,11187,14880,10951,14871,10748,14858,10572,14842,10418,14823,10286,14801,10099,14777,9897,14751,9722,14725,9567,14696,9430,14666,9309,14702,13604,14702,13604,14702,13600,14703,13591,14705,13570,14707,13533,14709,13477,14712,13400,14718,13305,14727,13106,14743,12907,14762,12716,14784,12539,14807,12380,14827,12190,14844,11943,14855,11727,14863,11539,14870,11376,14871,11204,14868,10960,14858,10748,14845,10565,14829,10406,14809,10269,14786,10058,14761,9852,14734,9671,14705,9512,14674,9374,14641,9253,14608,9076,14821,13366,14821,13365,14821,13364,14821,13358,14821,13344,14821,13320,14819,13252,14817,13145,14815,13011,14814,12858,14817,12698,14823,12539,14832,12389,14841,12214,14850,11968,14856,11750,14861,11558,14866,11390,14867,11226,14862,10972,14853,10754,14840,10565,14823,10401,14803,10259,14780,10032,14754,9820,14725,9635,14694,9473,14661,9333,14627,9203,14593,8988,14557,8798,14923,13014,14922,13014,14922,13012,14922,13004,14920,12987,14919,12957,14915,12907,14909,12834,14902,12738,14894,12623,14888,12498,14883,12370,14880,12203,14878,11970,14875,11759,14873,11569,14874,11401,14872,11243,14865,10986,14855,10762,14842,10568,14825,10401,14804,10255,14781,10017,14754,9799,14725,9611,14692,9445,14658,9301,14623,9139,14587,8920,14548,8729,14509,8562,15008,12672,15008,12672,15008,12671,15007,12667,15005,12656,15001,12637,14997,12605,14989,12556,14978,12490,14966,12407,14953,12313,14940,12136,14927,11934,14914,11742,14903,11563,14896,11401,14889,11247,14879,10992,14866,10767,14851,10570,14833,10400,14812,10252,14789,10007,14761,9784,14731,9592,14698,9424,14663,9279,14627,9088,14588,8868,14548,8676,14508,8508,14467,8360,15080,12386,15080,12386,15079,12385,15078,12383,15076,12378,15072,12367,15066,12347,15057,12315,15045,12253,15030,12138,15012,11998,14993,11845,14972,11685,14951,11530,14935,11383,14920,11228,14904,10981,14887,10762,14870,10567,14850,10397,14827,10248,14803,9997,14774,9771,14743,9578,14710,9407,14674,9259,14637,9048,14596,8826,14555,8632,14514,8464,14471,8317,14427,8182,15139,12008,15139,12008,15138,12008,15137,12007,15135,12003,15130,11990,15124,11969,15115,11929,15102,11872,15086,11794,15064,11693,15041,11581,15013,11459,14987,11336,14966,11170,14944,10944,14921,10738,14898,10552,14875,10387,14850,10239,14824,9983,14794,9758,14762,9563,14728,9392,14692,9244,14653,9014,14611,8791,14569,8597,14526,8427,14481,8281,14436,8110,14391,7885,15188,11617,15188,11617,15187,11617,15186,11618,15183,11617,15179,11612,15173,11601,15163,11581,15150,11546,15133,11495,15110,11427,15083,11346,15051,11246,15024,11057,14996,10868,14967,10687,14938,10517,14911,10362,14882,10206,14853,9956,14821,9737,14787,9543,14752,9375,14715,9228,14675,8980,14632,8760,14589,8565,14544,8395,14498,8248,14451,8049,14404,7824,14357,7630,15228,11298,15228,11298,15227,11299,15226,11301,15223,11303,15219,11302,15213,11299,15204,11290,15191,11271,15174,11217,15150,11129,15119,11015,15087,10886,15057,10744,15024,10599,14990,10455,14957,10318,14924,10143,14891,9911,14856,9701,14820,9516,14782,9352,14744,9200,14703,8946,14659,8725,14615,8533,14568,8366,14521,8220,14472,7992,14423,7770,14374,7578,14315,7408,15260,10819,15260,10819,15259,10822,15258,10826,15256,10832,15251,10836,15246,10841,15237,10838,15225,10821,15207,10788,15183,10734,15151,10660,15120,10571,15087,10469,15049,10359,15012,10249,14974,10041,14937,9837,14900,9647,14860,9475,14820,9320,14779,9147,14736,8902,14691,8688,14646,8499,14598,8335,14549,8189,14499,7940,14448,7720,14397,7529,14347,7363,14256,7218,15285,10410,15285,10411,15285,10413,15284,10418,15282,10425,15278,10434,15272,10442,15264,10449,15252,10445,15235,10433,15210,10403,15179,10358,15149,10301,15113,10218,15073,10059,15033,9894,14991,9726,14951,9565,14909,9413,14865,9273,14822,9073,14777,8845,14730,8641,14682,8459,14633,8300,14583,8129,14531,7883,14479,7670,14426,7482,14373,7321,14305,7176,14201,6939,15305,9939,15305,9940,15305,9945,15304,9955,15302,9967,15298,9989,15293,10010,15286,10033,15274,10044,15258,10045,15233,10022,15205,9975,15174,9903,15136,9808,15095,9697,15053,9578,15009,9451,14965,9327,14918,9198,14871,8973,14825,8766,14775,8579,14725,8408,14675,8259,14622,8058,14569,7821,14515,7615,14460,7435,14405,7276,14350,7108,14256,6866,14149,6653,15321,9444,15321,9445,15321,9448,15320,9458,15317,9470,15314,9490,15310,9515,15302,9540,15292,9562,15276,9579,15251,9577,15226,9559,15195,9519,15156,9463,15116,9389,15071,9304,15025,9208,14978,9023,14927,8838,14878,8661,14827,8496,14774,8344,14722,8206,14667,7973,14612,7749,14556,7555,14499,7382,14443,7229,14385,7025,14322,6791,14210,6588,14100,6409,15333,8920,15333,8921,15332,8927,15332,8943,15329,8965,15326,9002,15322,9048,15316,9106,15307,9162,15291,9204,15267,9221,15244,9221,15212,9196,15175,9134,15133,9043,15088,8930,15040,8801,14990,8665,14938,8526,14886,8391,14830,8261,14775,8087,14719,7866,14661,7664,14603,7482,14544,7322,14485,7178,14426,6936,14367,6713,14281,6517,14166,6348,14054,6198,15341,8360,15341,8361,15341,8366,15341,8379,15339,8399,15336,8431,15332,8473,15326,8527,15318,8585,15302,8632,15281,8670,15258,8690,15227,8690,15191,8664,15149,8612,15104,8543,15055,8456,15001,8360,14948,8259,14892,8122,14834,7923,14776,7734,14716,7558,14656,7397,14595,7250,14534,7070,14472,6835,14410,6628,14350,6443,14243,6283,14125,6135,14010,5889,15348,7715,15348,7717,15348,7725,15347,7745,15345,7780,15343,7836,15339,7905,15334,8e3,15326,8103,15310,8193,15293,8239,15270,8270,15240,8287,15204,8283,15163,8260,15118,8223,15067,8143,15014,8014,14958,7873,14899,7723,14839,7573,14778,7430,14715,7293,14652,7164,14588,6931,14524,6720,14460,6531,14396,6362,14330,6210,14207,6015,14086,5781,13969,5576,15352,7114,15352,7116,15352,7128,15352,7159,15350,7195,15348,7237,15345,7299,15340,7374,15332,7457,15317,7544,15301,7633,15280,7703,15251,7754,15216,7775,15176,7767,15131,7733,15079,7670,15026,7588,14967,7492,14906,7387,14844,7278,14779,7171,14714,6965,14648,6770,14581,6587,14515,6420,14448,6269,14382,6123,14299,5881,14172,5665,14049,5477,13929,5310,15355,6329,15355,6330,15355,6339,15355,6362,15353,6410,15351,6472,15349,6572,15344,6688,15337,6835,15323,6985,15309,7142,15287,7220,15260,7277,15226,7310,15188,7326,15142,7318,15090,7285,15036,7239,14976,7177,14914,7045,14849,6892,14782,6736,14714,6581,14645,6433,14576,6293,14506,6164,14438,5946,14369,5733,14270,5540,14140,5369,14014,5216,13892,5043,15357,5483,15357,5484,15357,5496,15357,5528,15356,5597,15354,5692,15351,5835,15347,6011,15339,6195,15328,6317,15314,6446,15293,6566,15268,6668,15235,6746,15197,6796,15152,6811,15101,6790,15046,6748,14985,6673,14921,6583,14854,6479,14785,6371,14714,6259,14643,6149,14571,5946,14499,5750,14428,5567,14358,5401,14242,5250,14109,5111,13980,4870,13856,4657,15359,4555,15359,4557,15358,4573,15358,4633,15357,4715,15355,4841,15353,5061,15349,5216,15342,5391,15331,5577,15318,5770,15299,5967,15274,6150,15243,6223,15206,6280,15161,6310,15111,6317,15055,6300,14994,6262,14928,6208,14860,6141,14788,5994,14715,5838,14641,5684,14566,5529,14492,5384,14418,5247,14346,5121,14216,4892,14079,4682,13948,4496,13822,4330,15359,3498,15359,3501,15359,3520,15359,3598,15358,3719,15356,3860,15355,4137,15351,4305,15344,4563,15334,4809,15321,5116,15303,5273,15280,5418,15250,5547,15214,5653,15170,5722,15120,5761,15064,5763,15002,5733,14935,5673,14865,5597,14792,5504,14716,5400,14640,5294,14563,5185,14486,5041,14410,4841,14335,4655,14191,4482,14051,4325,13918,4183,13790,4012,15360,2282,15360,2285,15360,2306,15360,2401,15359,2547,15357,2748,15355,3103,15352,3349,15345,3675,15336,4020,15324,4272,15307,4496,15285,4716,15255,4908,15220,5086,15178,5170,15128,5214,15072,5234,15010,5231,14943,5206,14871,5166,14796,5102,14718,4971,14639,4833,14559,4687,14480,4541,14402,4401,14315,4268,14167,4142,14025,3958,13888,3747,13759,3556,15360,923,15360,925,15360,946,15360,1052,15359,1214,15357,1494,15356,1892,15352,2274,15346,2663,15338,3099,15326,3393,15309,3679,15288,3980,15260,4183,15226,4325,15185,4437,15136,4517,15080,4570,15018,4591,14950,4581,14877,4545,14800,4485,14720,4411,14638,4325,14556,4231,14475,4136,14395,3988,14297,3803,14145,3628,13999,3465,13861,3314,13729,3177,15360,263,15360,264,15360,272,15360,325,15359,407,15358,548,15356,780,15352,1144,15347,1580,15339,2099,15328,2425,15312,2795,15292,3133,15264,3329,15232,3517,15191,3689,15143,3819,15088,3923,15025,3978,14956,3999,14882,3979,14804,3931,14722,3855,14639,3756,14554,3645,14470,3529,14388,3409,14279,3289,14124,3173,13975,3055,13834,2848,13701,2658,15360,49,15360,49,15360,52,15360,75,15359,111,15358,201,15356,283,15353,519,15348,726,15340,1045,15329,1415,15314,1795,15295,2173,15269,2410,15237,2649,15197,2866,15150,3054,15095,3140,15032,3196,14963,3228,14888,3236,14808,3224,14725,3191,14639,3146,14553,3088,14466,2976,14382,2836,14262,2692,14103,2549,13952,2409,13808,2278,13674,2154,15360,4,15360,4,15360,4,15360,13,15359,33,15358,59,15357,112,15353,199,15348,302,15341,456,15331,628,15316,827,15297,1082,15272,1332,15241,1601,15202,1851,15156,2069,15101,2172,15039,2256,14970,2314,14894,2348,14813,2358,14728,2344,14640,2311,14551,2263,14463,2203,14376,2133,14247,2059,14084,1915,13930,1761,13784,1609,13648,1464,15360,0,15360,0,15360,0,15360,3,15359,18,15358,26,15357,53,15354,80,15348,97,15341,165,15332,238,15318,326,15299,427,15275,529,15245,654,15207,771,15161,885,15108,994,15046,1089,14976,1170,14900,1229,14817,1266,14731,1284,14641,1282,14550,1260,14460,1223,14370,1174,14232,1116,14066,1050,13909,981,13761,910,13623,839]);let Mu=null;const M2=at(({roughness:t,dotNV:e})=>{Mu===null&&(Mu=new lB(nUe,32,32,$l,Ci),Mu.minFilter=ii,Mu.magFilter=ii,Mu.wrapS=ja,Mu.wrapT=ja,Mu.generateMipmaps=!1,Mu.needsUpdate=!0);const n=bt(t,e);return Ln(Mu,n).rg}),rUe=at(({lightDirection:t,f0:e,f90:n,roughness:r,f:i,USE_IRIDESCENCE:s,USE_ANISOTROPY:a})=>{const o=Wee({lightDirection:t,f0:e,f90:n,roughness:r,f:i,USE_IRIDESCENCE:s,USE_ANISOTROPY:a}),l=ir.dot(t).clamp(),c=ir.dot(Kr).clamp(),u=M2({roughness:r,dotNV:c}),f=M2({roughness:r,dotNV:l}),p=e.mul(u.x).add(n.mul(u.y)),m=e.mul(f.x).add(n.mul(f.y)),x=u.x.add(u.y),b=f.x.add(f.y),v=je(1).sub(x),_=je(1).sub(b),E=e.add(e.oneMinus().mul(.047619)),T=p.mul(m).mul(E).div(je(1).sub(v.mul(_).mul(E).mul(E)).add(GJ)),A=v.mul(_),C=T.mul(A);return o.add(C)}),qee=at(t=>{const{dotNV:e,specularColor:n,specularF90:r,roughness:i}=t,s=M2({dotNV:e,roughness:i});return n.mul(s.x).add(r.mul(s.y))}),iUe=at(({f:t,f90:e,dotVH:n})=>{const r=n.oneMinus().saturate(),i=r.mul(r),s=r.mul(i,i).clamp(0,.9999);return t.sub(Qe(e).mul(s)).div(s.oneMinus())}).setLayout({name:"Schlick_to_F0",type:"vec3",inputs:[{name:"f",type:"vec3"},{name:"f90",type:"float"},{name:"dotVH",type:"float"}]}),sUe=at(({roughness:t,dotNH:e})=>{const n=t.pow2(),r=je(1).div(n),s=e.pow2().oneMinus().max(.0078125);return je(2).add(r).mul(s.pow(r.mul(.5))).div(2*Math.PI)}).setLayout({name:"D_Charlie",type:"float",inputs:[{name:"roughness",type:"float"},{name:"dotNH",type:"float"}]}),aUe=at(({dotNV:t,dotNL:e})=>je(1).div(je(4).mul(e.add(t).sub(e.mul(t))))).setLayout({name:"V_Neubelt",type:"float",inputs:[{name:"dotNV",type:"float"},{name:"dotNL",type:"float"}]}),oUe=at(({lightDirection:t})=>{const e=t.add(Kr).normalize(),n=ir.dot(t).clamp(),r=ir.dot(Kr).clamp(),i=ir.dot(e).clamp(),s=sUe({roughness:QB,dotNH:i}),a=aUe({dotNV:r,dotNL:n});return Mg.mul(s).mul(a)}),lUe=at(({N:t,V:e,roughness:n})=>{const s=.0078125,a=t.dot(e).saturate(),o=bt(n,a.oneMinus().sqrt());return o.assign(o.mul(.984375).add(s)),o}).setLayout({name:"LTC_Uv",type:"vec2",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"roughness",type:"float"}]}),cUe=at(({f:t})=>{const e=t.length();return ns(e.mul(e).add(t.z).div(e.add(1)),0)}).setLayout({name:"LTC_ClippedSphereFormFactor",type:"float",inputs:[{name:"f",type:"vec3"}]}),Mw=at(({v1:t,v2:e})=>{const n=t.dot(e),r=n.abs().toVar(),i=r.mul(.0145206).add(.4965155).mul(r).add(.8543985).toVar(),s=r.add(4.1616724).mul(r).add(3.417594).toVar(),a=i.div(s),o=n.greaterThan(0).select(a,ns(n.mul(n).oneMinus(),1e-7).inverseSqrt().mul(.5).sub(a));return t.cross(e).mul(o)}).setLayout({name:"LTC_EdgeVectorFormFactor",type:"vec3",inputs:[{name:"v1",type:"vec3"},{name:"v2",type:"vec3"}]}),vV=at(({N:t,V:e,P:n,mInv:r,p0:i,p1:s,p2:a,p3:o})=>{const l=s.sub(i).toVar(),c=o.sub(i).toVar(),u=l.cross(c),f=Qe().toVar();return Gr(u.dot(n.sub(i)).greaterThanEqual(0),()=>{const p=e.sub(t.mul(e.dot(t))).normalize(),m=t.cross(p).negate(),x=r.mul(Sa(p,m,t).transpose()).toVar(),b=x.mul(i.sub(n)).normalize().toVar(),v=x.mul(s.sub(n)).normalize().toVar(),_=x.mul(a.sub(n)).normalize().toVar(),E=x.mul(o.sub(n)).normalize().toVar(),T=Qe(0).toVar();T.addAssign(Mw({v1:b,v2:v})),T.addAssign(Mw({v1:v,v2:_})),T.addAssign(Mw({v1:_,v2:E})),T.addAssign(Mw({v1:E,v2:b})),f.assign(Qe(cUe({f:T})))}),f}).setLayout({name:"LTC_Evaluate",type:"vec3",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"P",type:"vec3"},{name:"mInv",type:"mat3"},{name:"p0",type:"vec3"},{name:"p1",type:"vec3"},{name:"p2",type:"vec3"},{name:"p3",type:"vec3"}]}),kC=1/6,Xee=t=>vn(kC,vn(t,vn(t,t.negate().add(3)).sub(3)).add(1)),fL=t=>vn(kC,vn(t,vn(t,vn(3,t).sub(6))).add(4)),Yee=t=>vn(kC,vn(t,vn(t,vn(-3,t).add(3)).add(3)).add(1)),hL=t=>vn(kC,PC(t,3)),bV=t=>Xee(t).add(fL(t)),_V=t=>Yee(t).add(hL(t)),SV=t=>Za(-1,fL(t).div(Xee(t).add(fL(t)))),wV=t=>Za(1,hL(t).div(Yee(t).add(hL(t)))),TV=(t,e,n)=>{const r=t.uvNode,i=vn(r,e.zw).add(.5),s=gp(i),a=zc(i),o=bV(a.x),l=_V(a.x),c=SV(a.x),u=wV(a.x),f=SV(a.y),p=wV(a.y),m=bt(s.x.add(c),s.y.add(f)).sub(.5).mul(e.xy),x=bt(s.x.add(u),s.y.add(f)).sub(.5).mul(e.xy),b=bt(s.x.add(c),s.y.add(p)).sub(.5).mul(e.xy),v=bt(s.x.add(u),s.y.add(p)).sub(.5).mul(e.xy),_=bV(a.y).mul(Za(o.mul(t.sample(m).level(n)),l.mul(t.sample(x).level(n)))),E=_V(a.y).mul(Za(o.mul(t.sample(b).level(n)),l.mul(t.sample(v).level(n))));return _.add(E)},uUe=at(([t,e])=>{const n=bt(t.size(Dr(e))),r=bt(t.size(Dr(e.add(1)))),i=jc(1,n),s=jc(1,r),a=TV(t,mn(i,n),gp(e)),o=TV(t,mn(s,r),nF(e));return zc(e).mix(a,o)}),EV=at(([t,e,n,r,i])=>{const s=Qe(nee(e.negate(),kc(t),jc(1,r))),a=Qe(nd(i[0].xyz),nd(i[1].xyz),nd(i[2].xyz));return kc(s).mul(n.mul(a))}).setLayout({name:"getVolumeTransmissionRay",type:"vec3",inputs:[{name:"n",type:"vec3"},{name:"v",type:"vec3"},{name:"thickness",type:"float"},{name:"ior",type:"float"},{name:"modelMatrix",type:"mat4"}]}),dUe=at(([t,e])=>t.mul(pd(e.mul(2).sub(2),0,1))).setLayout({name:"applyIorToRoughness",type:"float",inputs:[{name:"roughness",type:"float"},{name:"ior",type:"float"}]}),fUe=Lee(),hUe=Lee(),CV=at(([t,e,n],{material:r})=>{const s=(r.side===Sr?fUe:hUe).sample(t),a=td(cL.x).mul(dUe(e,n));return uUe(s,a)}),AV=at(([t,e,n])=>(Gr(n.notEqual(0),()=>{const r=HJ(e).negate().div(n);return VJ(r.negate().mul(t))}),Qe(1))).setLayout({name:"volumeAttenuation",type:"vec3",inputs:[{name:"transmissionDistance",type:"float"},{name:"attenuationColor",type:"vec3"},{name:"attenuationDistance",type:"float"}]}),pUe=at(([t,e,n,r,i,s,a,o,l,c,u,f,p,m,x])=>{let b,v;if(x){b=mn().toVar(),v=Qe().toVar();const C=u.sub(1).mul(x.mul(.025)),M=Qe(u.sub(C),u,u.add(C));tl({start:0,end:3},({i:P})=>{const D=M.element(P),N=EV(t,e,f,D,o),L=a.add(N),k=c.mul(l.mul(mn(L,1))),I=bt(k.xy.div(k.w)).toVar();I.addAssign(1),I.divAssign(2),I.assign(bt(I.x,I.y.oneMinus()));const F=CV(I,n,D);b.element(P).assign(F.element(P)),b.a.addAssign(F.a),v.element(P).assign(r.element(P).mul(AV(nd(N),p,m).element(P)))}),b.a.divAssign(3)}else{const C=EV(t,e,f,u,o),M=a.add(C),P=c.mul(l.mul(mn(M,1))),D=bt(P.xy.div(P.w)).toVar();D.addAssign(1),D.divAssign(2),D.assign(bt(D.x,D.y.oneMinus())),b=CV(D,n,u),v=r.mul(AV(nd(C),p,m))}const _=v.rgb.mul(b.rgb),E=t.dot(e).clamp(),T=Qe(qee({dotNV:E,specularColor:i,specularF90:s,roughness:n})),A=v.r.add(v.g,v.b).div(3);return mn(T.oneMinus().mul(_),b.a.oneMinus().mul(A).oneMinus())}),mUe=Sa(3.2404542,-.969266,.0556434,-1.5371385,1.8760108,-.2040259,-.4985314,.041556,1.0572252),gUe=t=>{const e=t.sqrt();return Qe(1).add(e).div(Qe(1).sub(e))},MV=(t,e)=>t.sub(e).div(t.add(e)).pow2(),xUe=(t,e)=>{const n=t.mul(2*Math.PI*1e-9),r=Qe(54856e-17,44201e-17,52481e-17),i=Qe(1681e3,1795300,2208400),s=Qe(43278e5,93046e5,66121e5),a=je(9747e-17*Math.sqrt(2*Math.PI*45282e5)).mul(n.mul(2239900).add(e.x).cos()).mul(n.pow2().mul(-45282e5).exp());let o=r.mul(s.mul(2*Math.PI).sqrt()).mul(i.mul(n).add(e).cos()).mul(n.pow2().negate().mul(s).exp());return o=Qe(o.x.add(a),o.y,o.z).div(10685e-11),mUe.mul(o)},yUe=at(({outsideIOR:t,eta2:e,cosTheta1:n,thinFilmThickness:r,baseF0:i})=>{const s=zr(t,e,md(0,.03,r)),o=t.div(s).pow2().mul(n.pow2().oneMinus()).oneMinus();Gr(o.lessThan(0),()=>Qe(1));const l=o.sqrt(),c=MV(s,t),u=Hb({f0:c,f90:1,dotVH:n}),f=u.oneMinus(),p=s.lessThan(t).select(Math.PI,0),m=je(Math.PI).sub(p),x=gUe(i.clamp(0,.9999)),b=MV(x,s.toVec3()),v=Hb({f0:b,f90:1,dotVH:l}),_=Qe(x.x.lessThan(s).select(Math.PI,0),x.y.lessThan(s).select(Math.PI,0),x.z.lessThan(s).select(Math.PI,0)),E=s.mul(r,l,2),T=Qe(m).add(_),A=u.mul(v).clamp(1e-5,.9999),C=A.sqrt(),M=f.pow2().mul(v).div(Qe(1).sub(A)),D=u.add(M).toVar(),N=M.sub(f).toVar();return tl({start:1,end:2,condition:"<=",name:"m"},({m:L})=>{N.mulAssign(C);const k=xUe(je(L).mul(E),je(L).mul(T)).mul(2);D.addAssign(N.mul(k))}),D.max(Qe(0))}).setLayout({name:"evalIridescence",type:"vec3",inputs:[{name:"outsideIOR",type:"float"},{name:"eta2",type:"float"},{name:"cosTheta1",type:"float"},{name:"thinFilmThickness",type:"float"},{name:"baseF0",type:"vec3"}]}),vUe=at(({normal:t,viewDir:e,roughness:n})=>{const r=t.dot(e).saturate(),i=n.pow2(),s=Is(n.lessThan(.25),je(-339.2).mul(i).add(je(161.4).mul(n)).sub(25.9),je(-8.48).mul(i).add(je(14.3).mul(n)).sub(9.95)),a=Is(n.lessThan(.25),je(44).mul(i).sub(je(23.7).mul(n)).add(3.26),je(1.97).mul(i).sub(je(3.27).mul(n)).add(.72));return Is(n.lessThan(.25),0,je(.1).mul(n).sub(.025)).add(s.mul(r).add(a).exp()).mul(1/Math.PI).saturate()}),LP=Qe(.04),IP=je(1);class Kee extends IC{constructor(e=!1,n=!1,r=!1,i=!1,s=!1,a=!1){super(),this.clearcoat=e,this.sheen=n,this.iridescence=r,this.anisotropy=i,this.transmission=s,this.dispersion=a,this.clearcoatRadiance=null,this.clearcoatSpecularDirect=null,this.clearcoatSpecularIndirect=null,this.sheenSpecularDirect=null,this.sheenSpecularIndirect=null,this.iridescenceFresnel=null,this.iridescenceF0=null}start(e){if(this.clearcoat===!0&&(this.clearcoatRadiance=Qe().toVar("clearcoatRadiance"),this.clearcoatSpecularDirect=Qe().toVar("clearcoatSpecularDirect"),this.clearcoatSpecularIndirect=Qe().toVar("clearcoatSpecularIndirect")),this.sheen===!0&&(this.sheenSpecularDirect=Qe().toVar("sheenSpecularDirect"),this.sheenSpecularIndirect=Qe().toVar("sheenSpecularIndirect")),this.iridescence===!0){const n=ir.dot(Kr).clamp();this.iridescenceFresnel=yUe({outsideIOR:je(1),eta2:LJ,cosTheta1:n,thinFilmThickness:IJ,baseF0:Dl}),this.iridescenceF0=iUe({f:this.iridescenceFresnel,f90:1,dotVH:n})}if(this.transmission===!0){const n=H0,r=qBe.sub(H0).normalize(),i=Cx,s=e.context;s.backdrop=pUe(i,r,ju,$n,Dl,C2,n,Lp,Td,mee,RT,kJ,FJ,BJ,this.dispersion?UJ:null),s.backdropAlpha=lL,$n.a.mulAssign(zr(1,s.backdrop.a,lL))}super.start(e)}computeMultiscattering(e,n,r){const i=ir.dot(Kr).clamp(),s=M2({roughness:ju,dotNV:i}),a=this.iridescenceF0?JB.mix(Dl,this.iridescenceF0):Dl,o=a.mul(s.x).add(r.mul(s.y)),c=s.x.add(s.y).oneMinus(),u=a.add(a.oneMinus().mul(.047619)),f=o.mul(u).div(c.mul(u).oneMinus());e.addAssign(o),n.addAssign(f.mul(c))}direct({lightDirection:e,lightColor:n,reflectedLight:r}){const s=ir.dot(e).clamp().mul(n);if(this.sheen===!0&&this.sheenSpecularDirect.addAssign(s.mul(oUe({lightDirection:e}))),this.clearcoat===!0){const o=Rg.dot(e).clamp().mul(n);this.clearcoatSpecularDirect.addAssign(o.mul(Wee({lightDirection:e,f0:LP,f90:IP,roughness:E2,normalView:Rg})))}r.directDiffuse.addAssign(s.mul(W0({diffuseColor:$n.rgb}))),r.directSpecular.addAssign(s.mul(rUe({lightDirection:e,f0:Dl,f90:1,roughness:ju,f:this.iridescenceFresnel,USE_IRIDESCENCE:this.iridescence,USE_ANISOTROPY:this.anisotropy})))}directRectArea({lightColor:e,lightPosition:n,halfWidth:r,halfHeight:i,reflectedLight:s,ltc_1:a,ltc_2:o}){const l=n.add(r).sub(i),c=n.sub(r).sub(i),u=n.sub(r).add(i),f=n.add(r).add(i),p=ir,m=Kr,x=Ei.toVar(),b=lUe({N:p,V:m,roughness:ju}),v=a.sample(b).toVar(),_=o.sample(b).toVar(),E=Sa(Qe(v.x,0,v.y),Qe(0,1,0),Qe(v.z,0,v.w)).toVar(),T=Dl.mul(_.x).add(Dl.oneMinus().mul(_.y)).toVar();s.directSpecular.addAssign(e.mul(T).mul(vV({N:p,V:m,P:x,mInv:E,p0:l,p1:c,p2:u,p3:f}))),s.directDiffuse.addAssign(e.mul($n).mul(vV({N:p,V:m,P:x,mInv:Sa(1,0,0,0,1,0,0,0,1),p0:l,p1:c,p2:u,p3:f})))}indirect(e){this.indirectDiffuse(e),this.indirectSpecular(e),this.ambientOcclusion(e)}indirectDiffuse(e){const{irradiance:n,reflectedLight:r}=e.context;r.indirectDiffuse.addAssign(n.mul(W0({diffuseColor:$n})))}indirectSpecular(e){const{radiance:n,iblIrradiance:r,reflectedLight:i}=e.context;if(this.sheen===!0&&this.sheenSpecularIndirect.addAssign(r.mul(Mg,vUe({normal:ir,viewDir:Kr,roughness:QB}))),this.clearcoat===!0){const u=Rg.dot(Kr).clamp(),f=qee({dotNV:u,specularColor:LP,specularF90:IP,roughness:E2});this.clearcoatSpecularIndirect.addAssign(this.clearcoatRadiance.mul(f))}const s=Qe().toVar("singleScattering"),a=Qe().toVar("multiScattering"),o=r.mul(1/Math.PI);this.computeMultiscattering(s,a,C2);const l=s.add(a),c=$n.mul(l.r.max(l.g).max(l.b).oneMinus());i.indirectSpecular.addAssign(n.mul(s)),i.indirectSpecular.addAssign(a.mul(o)),i.indirectDiffuse.addAssign(c.mul(o))}ambientOcclusion(e){const{ambientOcclusion:n,reflectedLight:r}=e.context,s=ir.dot(Kr).clamp().add(n),a=ju.mul(-16).oneMinus().negate().exp2(),o=n.sub(s.pow(a).oneMinus()).clamp();this.clearcoat===!0&&this.clearcoatSpecularIndirect.mulAssign(n),this.sheen===!0&&this.sheenSpecularIndirect.mulAssign(n),r.indirectDiffuse.mulAssign(n),r.indirectSpecular.mulAssign(o)}finish({context:e}){const{outgoingLight:n}=e;if(this.clearcoat===!0){const r=Rg.dot(Kr).clamp(),i=Hb({dotVH:r,f0:LP,f90:IP}),s=n.mul(sL.mul(i).oneMinus()).add(this.clearcoatSpecularDirect.add(this.clearcoatSpecularIndirect).mul(sL));n.assign(s)}if(this.sheen===!0){const r=Mg.r.max(Mg.g).max(Mg.b).mul(.157).oneMinus(),i=n.mul(r).add(this.sheenSpecularDirect,this.sheenSpecularIndirect);n.assign(i)}}}const RV=je(1),pL=je(-2),Rw=je(.8),kP=je(-1),Pw=je(.4),BP=je(2),Nw=je(.305),FP=je(3),PV=je(.21),bUe=je(4),NV=je(4),_Ue=je(16),SUe=at(([t])=>{const e=Qe(xo(t)).toVar(),n=je(-1).toVar();return Gr(e.x.greaterThan(e.z),()=>{Gr(e.x.greaterThan(e.y),()=>{n.assign(Is(t.x.greaterThan(0),0,3))}).Else(()=>{n.assign(Is(t.y.greaterThan(0),1,4))})}).Else(()=>{Gr(e.z.greaterThan(e.y),()=>{n.assign(Is(t.z.greaterThan(0),2,5))}).Else(()=>{n.assign(Is(t.y.greaterThan(0),1,4))})}),n}).setLayout({name:"getFace",type:"float",inputs:[{name:"direction",type:"vec3"}]}),wUe=at(([t,e])=>{const n=bt().toVar();return Gr(e.equal(0),()=>{n.assign(bt(t.z,t.y).div(xo(t.x)))}).ElseIf(e.equal(1),()=>{n.assign(bt(t.x.negate(),t.z.negate()).div(xo(t.y)))}).ElseIf(e.equal(2),()=>{n.assign(bt(t.x.negate(),t.y).div(xo(t.z)))}).ElseIf(e.equal(3),()=>{n.assign(bt(t.z.negate(),t.y).div(xo(t.x)))}).ElseIf(e.equal(4),()=>{n.assign(bt(t.x.negate(),t.z).div(xo(t.y)))}).Else(()=>{n.assign(bt(t.x,t.y).div(xo(t.z)))}),vn(.5,n.add(1))}).setLayout({name:"getUV",type:"vec2",inputs:[{name:"direction",type:"vec3"},{name:"face",type:"float"}]}),TUe=at(([t])=>{const e=je(0).toVar();return Gr(t.greaterThanEqual(Rw),()=>{e.assign(RV.sub(t).mul(kP.sub(pL)).div(RV.sub(Rw)).add(pL))}).ElseIf(t.greaterThanEqual(Pw),()=>{e.assign(Rw.sub(t).mul(BP.sub(kP)).div(Rw.sub(Pw)).add(kP))}).ElseIf(t.greaterThanEqual(Nw),()=>{e.assign(Pw.sub(t).mul(FP.sub(BP)).div(Pw.sub(Nw)).add(BP))}).ElseIf(t.greaterThanEqual(PV),()=>{e.assign(Nw.sub(t).mul(bUe.sub(FP)).div(Nw.sub(PV)).add(FP))}).Else(()=>{e.assign(je(-2).mul(td(vn(1.16,t))))}),e}).setLayout({name:"roughnessToMip",type:"float",inputs:[{name:"roughness",type:"float"}]}),EUe=at(([t,e])=>{const n=t.toVar();n.assign(vn(2,n).sub(1));const r=Qe(n,1).toVar();return Gr(e.equal(0),()=>{r.assign(r.zyx)}).ElseIf(e.equal(1),()=>{r.assign(r.xzy),r.xz.mulAssign(-1)}).ElseIf(e.equal(2),()=>{r.x.mulAssign(-1)}).ElseIf(e.equal(3),()=>{r.assign(r.zyx),r.xz.mulAssign(-1)}).ElseIf(e.equal(4),()=>{r.assign(r.xzy),r.xy.mulAssign(-1)}).ElseIf(e.equal(5),()=>{r.z.mulAssign(-1)}),r}).setLayout({name:"getDirection",type:"vec3",inputs:[{name:"uv",type:"vec2"},{name:"face",type:"float"}]}),CUe=at(([t,e,n,r,i,s])=>{const a=je(n),o=Qe(e),l=pd(TUe(a),pL,s),c=zc(l),u=gp(l),f=Qe(Wb(t,o,u,r,i,s)).toVar();return Gr(c.notEqual(0),()=>{const p=Qe(Wb(t,o,u.add(1),r,i,s)).toVar();f.assign(zr(f,p,c))}),f}),Wb=at(([t,e,n,r,i,s])=>{const a=je(n).toVar(),o=Qe(e),l=je(SUe(o)).toVar(),c=je(ns(NV.sub(a),0)).toVar();a.assign(ns(a,NV));const u=je(zb(a)).toVar(),f=bt(wUe(o,l).mul(u.sub(2)).add(1)).toVar();return Gr(l.greaterThan(2),()=>{f.y.addAssign(u),l.subAssign(3)}),f.x.addAssign(l.mul(u)),f.x.addAssign(c.mul(vn(3,_Ue))),f.y.addAssign(vn(4,zb(s).sub(u))),f.x.mulAssign(r),f.y.mulAssign(i),t.sample(f).grad(bt(),bt())}),UP=at(({envMap:t,mipInt:e,outputDirection:n,theta:r,axis:i,CUBEUV_TEXEL_WIDTH:s,CUBEUV_TEXEL_HEIGHT:a,CUBEUV_MAX_MIP:o})=>{const l=Iu(r),c=n.mul(l).add(i.cross(n).mul(el(r))).add(i.mul(i.dot(n).mul(l.oneMinus())));return Wb(t,c,e,s,a,o)}),AUe=at(({n:t,latitudinal:e,poleAxis:n,outputDirection:r,weights:i,samples:s,dTheta:a,mipInt:o,envMap:l,CUBEUV_TEXEL_WIDTH:c,CUBEUV_TEXEL_HEIGHT:u,CUBEUV_MAX_MIP:f})=>{const p=Qe(Is(e,n,$b(n,r))).toVar();Gr(p.equal(Qe(0)),()=>{p.assign(Qe(r.z,0,r.x.negate()))}),p.assign(kc(p));const m=Qe().toVar();return m.addAssign(i.element(0).mul(UP({theta:0,axis:p,outputDirection:r,mipInt:o,envMap:l,CUBEUV_TEXEL_WIDTH:c,CUBEUV_TEXEL_HEIGHT:u,CUBEUV_MAX_MIP:f}))),tl({start:Dr(1),end:t},({i:x})=>{Gr(x.greaterThanEqual(s),()=>{d5e()});const b=je(a.mul(je(x))).toVar();m.addAssign(i.element(x).mul(UP({theta:b.mul(-1),axis:p,outputDirection:r,mipInt:o,envMap:l,CUBEUV_TEXEL_WIDTH:c,CUBEUV_TEXEL_HEIGHT:u,CUBEUV_MAX_MIP:f}))),m.addAssign(i.element(x).mul(UP({theta:b,axis:p,outputDirection:r,mipInt:o,envMap:l,CUBEUV_TEXEL_WIDTH:c,CUBEUV_TEXEL_HEIGHT:u,CUBEUV_MAX_MIP:f})))}),mn(m,1)}),MUe=at(([t])=>{const e=fi(t).toVar();return e.assign(e.shiftLeft(fi(16)).bitOr(e.shiftRight(fi(16)))),e.assign(e.bitAnd(fi(1431655765)).shiftLeft(fi(1)).bitOr(e.bitAnd(fi(2863311530)).shiftRight(fi(1)))),e.assign(e.bitAnd(fi(858993459)).shiftLeft(fi(2)).bitOr(e.bitAnd(fi(3435973836)).shiftRight(fi(2)))),e.assign(e.bitAnd(fi(252645135)).shiftLeft(fi(4)).bitOr(e.bitAnd(fi(4042322160)).shiftRight(fi(4)))),e.assign(e.bitAnd(fi(16711935)).shiftLeft(fi(8)).bitOr(e.bitAnd(fi(4278255360)).shiftRight(fi(8)))),je(e).mul(23283064365386963e-26)}),RUe=at(([t,e])=>bt(je(t).div(je(e)),MUe(t))),PUe=at(([t,e,n])=>{const r=Qe(e).toVar(),i=je(n),s=i.mul(i).toVar(),a=kc(Qe(s.mul(r.x),s.mul(r.y),r.z)).toVar(),o=a.x.mul(a.x).add(a.y.mul(a.y)),l=Is(o.greaterThan(0),Qe(a.y.negate(),a.x,0).div(lp(o)),Qe(1,0,0)).toVar(),c=$b(a,l).toVar(),u=lp(t.x),f=vn(2,3.14159265359).mul(t.y),p=u.mul(Iu(f)).toVar(),m=u.mul(el(f)).toVar(),x=vn(.5,a.z.add(1));m.assign(x.oneMinus().mul(lp(p.mul(p).oneMinus())).add(x.mul(m)));const b=l.mul(p).add(c.mul(m)).add(a.mul(lp(ns(0,p.mul(p).add(m.mul(m)).oneMinus()))));return kc(Qe(s.mul(b.x),s.mul(b.y),ns(0,b.z)))}),NUe=at(({roughness:t,mipInt:e,envMap:n,N_immutable:r,GGX_SAMPLES:i,CUBEUV_TEXEL_WIDTH:s,CUBEUV_TEXEL_HEIGHT:a,CUBEUV_MAX_MIP:o})=>{const l=Qe(r).toVar(),c=Qe(0).toVar(),u=je(0).toVar();return Gr(t.lessThan(.001),()=>{c.assign(Wb(n,l,e,s,a,o))}).Else(()=>{const f=Is(xo(l.z).lessThan(.999),Qe(0,0,1),Qe(1,0,0)),p=kc($b(f,l)).toVar(),m=$b(l,p).toVar();tl({start:fi(0),end:i},({i:x})=>{const b=RUe(x,i),v=PUe(b,Qe(0,0,1),t),_=kc(p.mul(v.x).add(m.mul(v.y)).add(l.mul(v.z))),E=kc(_.mul(G0(l,_).mul(2)).sub(l)),T=ns(G0(l,E),0);Gr(T.greaterThan(0),()=>{const A=Wb(n,E,e,s,a,o);c.addAssign(A.mul(T)),u.addAssign(T)})}),Gr(u.greaterThan(0),()=>{c.assign(c.div(u))})}),mn(c,1)}),Sf=4,OV=[.125,.215,.35,.446,.526,.582],Qh=20,OUe=512,sv=new D_(-1,1,1,-1,0,1),DUe=new ys(90,1),DV=new Xt;let jP=null,zP=0,$P=0;const LUe=new ae,R2=new WeakMap,IUe=[3,1,5,0,4,2],GP=EUe(Tx(),$f("faceIndex")).normalize(),BC=Qe(GP.x,GP.y,GP.z);class kUe{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._blurMaterial=null,this._ggxMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._backgroundBox=null}get _hasInitialized(){return this._renderer.hasInitialized()}fromScene(e,n=0,r=.1,i=100,s={}){const{size:a=256,position:o=LUe,renderTarget:l=null}=s;if(this._setSize(a),this._hasInitialized===!1){ct('PMREMGenerator: ".fromScene()" called before the backend is initialized. Try using "await renderer.init()" instead.');const u=l||this._allocateTarget();return s.renderTarget=u,this.fromSceneAsync(e,n,r,i,s),u}jP=this._renderer.getRenderTarget(),zP=this._renderer.getActiveCubeFace(),$P=this._renderer.getActiveMipmapLevel();const c=l||this._allocateTarget();return c.depthBuffer=!0,this._init(c),this._sceneToCubeUV(e,r,i,c,o),n>0&&this._blur(c,0,0,n),this._applyPMREM(c),this._cleanup(c),c}async fromSceneAsync(e,n=0,r=.1,i=100,s={}){return jr('PMREMGenerator: ".fromSceneAsync()" is deprecated. Use "await renderer.init()" instead.'),await this._renderer.init(),this.fromScene(e,n,r,i,s)}fromEquirectangular(e,n=null){if(this._hasInitialized===!1){ct('PMREMGenerator: .fromEquirectangular() called before the backend is initialized. Try using "await renderer.init()" instead.'),this._setSizeFromTexture(e);const r=n||this._allocateTarget();return this.fromEquirectangularAsync(e,r),r}return this._fromTexture(e,n)}async fromEquirectangularAsync(e,n=null){return jr('PMREMGenerator: ".fromEquirectangularAsync()" is deprecated. Use "await renderer.init()" instead.'),await this._renderer.init(),this._fromTexture(e,n)}fromCubemap(e,n=null){if(this._hasInitialized===!1){ct("PMREMGenerator: .fromCubemap() called before the backend is initialized. Try using .fromCubemapAsync() instead."),this._setSizeFromTexture(e);const r=n||this._allocateTarget();return this.fromCubemapAsync(e,n),r}return this._fromTexture(e,n)}async fromCubemapAsync(e,n=null){return jr('PMREMGenerator: ".fromCubemapAsync()" is deprecated. Use "await renderer.init()" instead.'),await this._renderer.init(),this._fromTexture(e,n)}async compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=IV(),await this._compileMaterial(this._cubemapMaterial))}async compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=kV(),await this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSizeFromTexture(e){e.mapping===Fc||e.mapping===Uc?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4)}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(jP,zP,$P),e.scissorTest=!1,cg(e,0,0,e.width,e.height)}_fromTexture(e,n){this._setSizeFromTexture(e),jP=this._renderer.getRenderTarget(),zP=this._renderer.getActiveCubeFace(),$P=this._renderer.getActiveMipmapLevel();const r=n||this._allocateTarget();return this._init(r),this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTarget(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize;return LV(e,n)}_init(e){if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e.width||this._pingPongRenderTarget.height!==e.height){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=LV(e.width,e.height);const{_lodMax:n}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=BUe(n)),this._blurMaterial=FUe(n,e.width,e.height),this._ggxMaterial=UUe(n,e.width,e.height)}}async _compileMaterial(e){const n=new Ji(new Us,e);await this._renderer.compile(n,sv)}_sceneToCubeUV(e,n,r,i,s){const a=DUe;a.near=n,a.far=r;const o=[1,1,1,1,-1,1],l=[1,-1,1,-1,1,-1],c=this._renderer,u=c.autoClear;c.getClearColor(DV),c.autoClear=!1,this._backgroundBox===null&&(this._backgroundBox=new Ji(new qp,new Cc({name:"PMREM.Background",side:Sr,depthWrite:!1,depthTest:!1})));const f=this._backgroundBox,p=f.material;let m=!1;const x=e.background;x?x.isColor&&(p.color.copy(x),e.background=null,m=!0):(p.color.copy(DV),m=!0),c.setRenderTarget(i),c.clear(),m&&c.render(f,a);for(let b=0;b<6;b++){const v=b%3;v===0?(a.up.set(0,o[b],0),a.position.set(s.x,s.y,s.z),a.lookAt(s.x+l[b],s.y,s.z)):v===1?(a.up.set(0,0,o[b]),a.position.set(s.x,s.y,s.z),a.lookAt(s.x,s.y+l[b],s.z)):(a.up.set(0,o[b],0),a.position.set(s.x,s.y,s.z),a.lookAt(s.x,s.y,s.z+l[b]));const _=this._cubeSize;cg(i,v*_,b>2?_:0,_,_),c.render(e,a)}c.autoClear=u,e.background=x}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===Fc||e.mapping===Uc;i?this._cubemapMaterial===null&&(this._cubemapMaterial=IV(e)):this._equirectMaterial===null&&(this._equirectMaterial=kV(e));const s=i?this._cubemapMaterial:this._equirectMaterial;s.fragmentNode.value=e;const a=this._lodMeshes[0];a.material=s;const o=this._cubeSize;cg(n,0,0,3*o,2*o),r.setRenderTarget(n),r.render(a,sv)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;const i=this._lodMeshes.length;for(let s=1;s<i;s++)this._applyGGXFilter(e,s-1,s);n.autoClear=r}_applyGGXFilter(e,n,r){const i=this._renderer,s=this._pingPongRenderTarget,a=this._ggxMaterial,o=this._lodMeshes[r];o.material=a;const l=R2.get(a),c=r/(this._lodMeshes.length-1),u=n/(this._lodMeshes.length-1),f=Math.sqrt(c*c-u*u),p=.05+c*.95,m=f*p,{_lodMax:x}=this,b=this._sizeLods[r],v=3*b*(r>x-Sf?r-x+Sf:0),_=4*(this._cubeSize-b);e.texture.frame=(e.texture.frame||0)+1,l.envMap.value=e.texture,l.roughness.value=m,l.mipInt.value=x-n,cg(s,v,_,3*b,2*b),i.setRenderTarget(s),i.render(o,sv),s.texture.frame=(s.texture.frame||0)+1,l.envMap.value=s.texture,l.roughness.value=0,l.mipInt.value=x-r,cg(e,v,_,3*b,2*b),i.setRenderTarget(e),i.render(o,sv)}_blur(e,n,r,i,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,n,r,i,"latitudinal",s),this._halfBlur(a,e,r,r,i,"longitudinal",s)}_halfBlur(e,n,r,i,s,a,o){const l=this._renderer,c=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&xt("blur direction must be either latitudinal or longitudinal!");const u=3,f=this._lodMeshes[i];f.material=c;const p=R2.get(c),m=this._sizeLods[r]-1,x=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*Qh-1),b=s/x,v=isFinite(s)?1+Math.floor(u*b):Qh;v>Qh&&ct(`sigmaRadians, ${s}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${Qh}`);const _=[];let E=0;for(let P=0;P<Qh;++P){const D=P/b,N=Math.exp(-D*D/2);_.push(N),P===0?E+=N:P<v&&(E+=2*N)}for(let P=0;P<_.length;P++)_[P]=_[P]/E;e.texture.frame=(e.texture.frame||0)+1,p.envMap.value=e.texture,p.samples.value=v,p.weights.array=_,p.latitudinal.value=a==="latitudinal"?1:0,o&&(p.poleAxis.value=o);const{_lodMax:T}=this;p.dTheta.value=x,p.mipInt.value=T-r;const A=this._sizeLods[i],C=3*A*(i>T-Sf?i-T+Sf:0),M=4*(this._cubeSize-A);cg(n,C,M,3*A,2*A),l.setRenderTarget(n),l.render(f,sv)}}function BUe(t){const e=[],n=[],r=[];let i=t;const s=t-Sf+1+OV.length;for(let a=0;a<s;a++){const o=Math.pow(2,i);e.push(o);let l=1/o;a>t-Sf?l=OV[a-t+Sf-1]:a===0&&(l=0),n.push(l);const c=1/(o-2),u=-c,f=1+c,p=[u,u,f,u,f,f,u,u,f,f,u,f],m=6,x=6,b=3,v=2,_=1,E=new Float32Array(b*x*m),T=new Float32Array(v*x*m),A=new Float32Array(_*x*m);for(let M=0;M<m;M++){const P=M%3*2/3-1,D=M>2?0:-1,N=[P,D,0,P+2/3,D,0,P+2/3,D+1,0,P,D,0,P+2/3,D+1,0,P,D+1,0],L=IUe[M];E.set(N,b*x*L),T.set(p,v*x*L);const k=[L,L,L,L,L,L];A.set(k,_*x*L)}const C=new Us;C.setAttribute("position",new Bs(E,b)),C.setAttribute("uv",new Bs(T,v)),C.setAttribute("faceIndex",new Bs(A,_)),r.push(new Ji(C,null)),i>Sf&&i--}return{lodMeshes:r,sizeLods:e,sigmas:n}}function LV(t,e){const n={magFilter:ii,minFilter:ii,generateMipmaps:!1,type:Ci,format:gi,colorSpace:Pp},r=new Hp(t,e,n);return r.texture.mapping=Ap,r.texture.name="PMREM.cubeUv",r.texture.isPMREMTexture=!0,r.scissorTest=!0,r}function cg(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function FC(t){const e=new Ri;return e.depthTest=!1,e.depthWrite=!1,e.blending=_a,e.name=`PMREM_${t}`,e}function FUe(t,e,n){const r=Bl(new Array(Qh).fill(0)),i=nn(new ae(0,1,0)),s=nn(0),a=je(Qh),o=nn(0),l=nn(1),c=Ln(),u=nn(0),f=je(1/e),p=je(1/n),m=je(t),x={n:a,latitudinal:o,weights:r,poleAxis:i,outputDirection:BC,dTheta:s,samples:l,envMap:c,mipInt:u,CUBEUV_TEXEL_WIDTH:f,CUBEUV_TEXEL_HEIGHT:p,CUBEUV_MAX_MIP:m},b=FC("blur");return b.fragmentNode=AUe({...x,latitudinal:o.equal(1)}),R2.set(b,x),b}function UUe(t,e,n){const r=Ln(),i=nn(0),s=nn(0),a=je(1/e),o=je(1/n),l=je(t),c={envMap:r,roughness:i,mipInt:s,CUBEUV_TEXEL_WIDTH:a,CUBEUV_TEXEL_HEIGHT:o,CUBEUV_MAX_MIP:l},u=FC("ggx");return u.fragmentNode=NUe({...c,N_immutable:BC,GGX_SAMPLES:fi(OUe)}),R2.set(u,c),u}function IV(t){const e=FC("cubemap");return e.fragmentNode=Vb(t,BC),e}function kV(t){const e=FC("equirect");return e.fragmentNode=Ln(t,Uee(BC),0),e}const BV=new WeakMap;function jUe(t){const e=Math.log2(t)-2,n=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),112)),texelHeight:n,maxMip:e}}function zUe(t,e,n){const r=$Ue(e);let i=r.get(t);if((i!==void 0?i.pmremVersion:-1)!==t.pmremVersion){const a=t.image;if(t.isCubeTexture)if(VUe(a))i=n.fromCubemap(t,i);else return null;else if(HUe(a))i=n.fromEquirectangular(t,i);else return null;i.pmremVersion=t.pmremVersion,r.set(t,i)}return i.texture}function $Ue(t){let e=BV.get(t);return e===void 0&&(e=new WeakMap,BV.set(t,e)),e}class GUe extends is{static get type(){return"PMREMNode"}constructor(e,n=null,r=null){super("vec3"),this._value=e,this._pmrem=null,this.uvNode=n,this.levelNode=r,this._generator=null;const i=new $i;i.isRenderTargetTexture=!0,this._texture=Ln(i),this._width=nn(0),this._height=nn(0),this._maxMip=nn(0),this.updateBeforeType=yn.RENDER}set value(e){this._value=e,this._pmrem=null}get value(){return this._value}updateFromTexture(e){const n=jUe(e.image.height);this._texture.value=e,this._width.value=n.texelWidth,this._height.value=n.texelHeight,this._maxMip.value=n.maxMip}updateBefore(e){let n=this._pmrem;const r=n?n.pmremVersion:-1,i=this._value;r!==i.pmremVersion&&(i.isPMREMTexture===!0?n=i:n=zUe(i,e.renderer,this._generator),n!==null&&(this._pmrem=n,this.updateFromTexture(n)))}setup(e){this._generator===null&&(this._generator=new kUe(e.renderer)),this.updateBefore(e);let n=this.uvNode;n===null&&e.context.getUV&&(n=e.context.getUV(this)),n=bee.mul(Qe(n.x,n.y.negate(),n.z));let r=this.levelNode;return r===null&&e.context.getTextureLevel&&(r=e.context.getTextureLevel(this)),CUe(this._texture,n,r,this._width,this._height,this._maxMip)}dispose(){super.dispose(),this._generator!==null&&this._generator.dispose()}}function VUe(t){if(t==null)return!1;let e=0;const n=6;for(let r=0;r<n;r++)t[r]!==void 0&&e++;return e===n}function HUe(t){return t==null?!1:t.height>0}const Zee=Wn(GUe).setParameterLength(1,3),FV=new WeakMap;class WUe extends Ax{static get type(){return"EnvironmentNode"}constructor(e=null){super(),this.envNode=e}setup(e){const{material:n}=e;let r=this.envNode;if(r.isTextureNode||r.isMaterialReferenceNode){const f=r.isTextureNode?r.value:n[r.property];let p=FV.get(f);p===void 0&&(p=Zee(f),FV.set(f,p)),r=p}const s=n.useAnisotropy===!0||n.anisotropy>0?yFe:ir,a=r.context(UV(ju,s)).mul(NP),o=r.context(qUe(Cx)).mul(Math.PI).mul(NP),l=tb(a),c=tb(o);e.context.radiance.addAssign(l),e.context.iblIrradiance.addAssign(c);const u=e.context.lightingModel.clearcoatRadiance;if(u){const f=r.context(UV(E2,Rg)).mul(NP),p=tb(f);u.addAssign(p)}}}const UV=(t,e)=>{let n=null;return{getUV:()=>(n===null&&(n=Kr.negate().reflect(e),n=JJ(t).mix(n,e).normalize(),n=n.transformDirection(Td)),n),getTextureLevel:()=>t}},qUe=t=>({getUV:()=>t,getTextureLevel:()=>je(1)}),XUe=new tQ;class Qee extends Ri{static get type(){return"MeshStandardNodeMaterial"}constructor(e){super(),this.isMeshStandardNodeMaterial=!0,this.lights=!0,this.emissiveNode=null,this.metalnessNode=null,this.roughnessNode=null,this.setDefaultValues(XUe),this.setValues(e)}setupEnvironment(e){let n=super.setupEnvironment(e);return n===null&&e.environmentNode&&(n=e.environmentNode),n?new WUe(n):null}setupLightingModel(){return new Kee}setupSpecular(){const e=zr(Qe(.04),$n.rgb,T2);Dl.assign(e),C2.assign(1)}setupVariants(){const e=this.metalnessNode?je(this.metalnessNode):NFe;T2.assign(e);let n=this.roughnessNode?je(this.roughnessNode):PFe;n=Hee({roughness:n}),ju.assign(n),this.setupSpecular(),$n.assign(mn($n.rgb.mul(e.oneMinus()),$n.a))}copy(e){return this.emissiveNode=e.emissiveNode,this.metalnessNode=e.metalnessNode,this.roughnessNode=e.roughnessNode,super.copy(e)}}const YUe=new sEe;class KUe extends Qee{static get type(){return"MeshPhysicalNodeMaterial"}constructor(e){super(),this.isMeshPhysicalNodeMaterial=!0,this.clearcoatNode=null,this.clearcoatRoughnessNode=null,this.clearcoatNormalNode=null,this.sheenNode=null,this.sheenRoughnessNode=null,this.iridescenceNode=null,this.iridescenceIORNode=null,this.iridescenceThicknessNode=null,this.specularIntensityNode=null,this.specularColorNode=null,this.iorNode=null,this.transmissionNode=null,this.thicknessNode=null,this.attenuationDistanceNode=null,this.attenuationColorNode=null,this.dispersionNode=null,this.anisotropyNode=null,this.setDefaultValues(YUe),this.setValues(e)}get useClearcoat(){return this.clearcoat>0||this.clearcoatNode!==null}get useIridescence(){return this.iridescence>0||this.iridescenceNode!==null}get useSheen(){return this.sheen>0||this.sheenNode!==null}get useAnisotropy(){return this.anisotropy>0||this.anisotropyNode!==null}get useTransmission(){return this.transmission>0||this.transmissionNode!==null}get useDispersion(){return this.dispersion>0||this.dispersionNode!==null}setupSpecular(){const e=this.iorNode?je(this.iorNode):HFe;RT.assign(e),Dl.assign(zr($0(QJ(RT.sub(1).div(RT.add(1))).mul(RFe),Qe(1)).mul(hV),$n.rgb,T2)),C2.assign(zr(hV,1,T2))}setupLightingModel(){return new Kee(this.useClearcoat,this.useSheen,this.useIridescence,this.useAnisotropy,this.useTransmission,this.useDispersion)}setupVariants(e){if(super.setupVariants(e),this.useClearcoat){const n=this.clearcoatNode?je(this.clearcoatNode):DFe,r=this.clearcoatRoughnessNode?je(this.clearcoatRoughnessNode):LFe;sL.assign(n),E2.assign(Hee({roughness:r}))}if(this.useSheen){const n=this.sheenNode?Qe(this.sheenNode):BFe,r=this.sheenRoughnessNode?je(this.sheenRoughnessNode):FFe;Mg.assign(n),QB.assign(r)}if(this.useIridescence){const n=this.iridescenceNode?je(this.iridescenceNode):jFe,r=this.iridescenceIORNode?je(this.iridescenceIORNode):zFe,i=this.iridescenceThicknessNode?je(this.iridescenceThicknessNode):$Fe;JB.assign(n),LJ.assign(r),IJ.assign(i)}if(this.useAnisotropy){const n=(this.anisotropyNode?bt(this.anisotropyNode):UFe).toVar();$h.assign(n.length()),Gr($h.equal(0),()=>{n.assign(bt(1,0))}).Else(()=>{n.divAssign(bt($h)),$h.assign($h.saturate())}),aL.assign($h.pow2().mix(ju.pow2(),1)),MT.assign(Pv[0].mul(n.x).add(Pv[1].mul(n.y))),Wg.assign(Pv[1].mul(n.x).sub(Pv[0].mul(n.y)))}if(this.useTransmission){const n=this.transmissionNode?je(this.transmissionNode):GFe,r=this.thicknessNode?je(this.thicknessNode):VFe,i=this.attenuationDistanceNode?je(this.attenuationDistanceNode):WFe,s=this.attenuationColorNode?Qe(this.attenuationColorNode):qFe;if(lL.assign(n),kJ.assign(r),BJ.assign(i),FJ.assign(s),this.useDispersion){const a=this.dispersionNode?je(this.dispersionNode):JFe;UJ.assign(a)}}}setupClearcoatNormal(){return this.clearcoatNormalNode?Qe(this.clearcoatNormalNode):IFe}setup(e){e.context.setupClearcoatNormal=()=>eb(this.setupClearcoatNormal(e),"NORMAL","vec3"),super.setup(e)}copy(e){return this.clearcoatNode=e.clearcoatNode,this.clearcoatRoughnessNode=e.clearcoatRoughnessNode,this.clearcoatNormalNode=e.clearcoatNormalNode,this.sheenNode=e.sheenNode,this.sheenRoughnessNode=e.sheenRoughnessNode,this.iridescenceNode=e.iridescenceNode,this.iridescenceIORNode=e.iridescenceIORNode,this.iridescenceThicknessNode=e.iridescenceThicknessNode,this.specularIntensityNode=e.specularIntensityNode,this.specularColorNode=e.specularColorNode,this.transmissionNode=e.transmissionNode,this.thicknessNode=e.thicknessNode,this.attenuationDistanceNode=e.attenuationDistanceNode,this.attenuationColorNode=e.attenuationColorNode,this.dispersionNode=e.dispersionNode,this.anisotropyNode=e.anisotropyNode,super.copy(e)}}const ZUe=at(({normal:t,lightDirection:e,builder:n})=>{const r=t.dot(e),i=bt(r.mul(.5).add(.5),0);if(n.material.gradientMap){const s=xf("gradientMap","texture").context({getUV:()=>i});return Qe(s.r)}else{const s=i.fwidth().mul(.5);return zr(Qe(.7),Qe(1),md(je(.7).sub(s.x),je(.7).add(s.x),i.x))}});class QUe extends IC{direct({lightDirection:e,lightColor:n,reflectedLight:r},i){const s=ZUe({normal:yee,lightDirection:e,builder:i}).mul(n);r.directDiffuse.addAssign(s.mul(W0({diffuseColor:$n.rgb})))}indirect(e){const{ambientOcclusion:n,irradiance:r,reflectedLight:i}=e.context;i.indirectDiffuse.addAssign(r.mul(W0({diffuseColor:$n}))),i.indirectDiffuse.mulAssign(n)}}const JUe=new oEe;class eje extends Ri{static get type(){return"MeshToonNodeMaterial"}constructor(e){super(),this.isMeshToonNodeMaterial=!0,this.lights=!0,this.setDefaultValues(JUe),this.setValues(e)}setupLightingModel(){return new QUe}}const tje=at(()=>{const t=Qe(Kr.z,0,Kr.x.negate()).normalize(),e=Kr.cross(t);return bt(t.dot(ir),e.dot(ir)).mul(.495).add(.5)}).once(["NORMAL","VERTEX"])().toVar("matcapUV"),nje=new dEe;class rje extends Ri{static get type(){return"MeshMatcapNodeMaterial"}constructor(e){super(),this.isMeshMatcapNodeMaterial=!0,this.setDefaultValues(nje),this.setValues(e)}setupVariants(e){const n=tje;let r;e.material.matcap?r=xf("matcap","texture").context({getUV:()=>n}):r=Qe(zr(.2,.8,n.y)),$n.rgb.mulAssign(r.rgb)}}class ije extends is{static get type(){return"RotateNode"}constructor(e,n){super(),this.positionNode=e,this.rotationNode=n}getNodeType(e){return this.positionNode.getNodeType(e)}setup(e){const{rotationNode:n,positionNode:r}=this;if(this.getNodeType(e)==="vec2"){const s=n.cos(),a=n.sin();return ZB(s,a,a.negate(),s).mul(r)}else{const s=n,a=Hg(mn(1,0,0,0),mn(0,Iu(s.x),el(s.x).negate(),0),mn(0,el(s.x),Iu(s.x),0),mn(0,0,0,1)),o=Hg(mn(Iu(s.y),0,el(s.y),0),mn(0,1,0,0),mn(el(s.y).negate(),0,Iu(s.y),0),mn(0,0,0,1)),l=Hg(mn(Iu(s.z),el(s.z).negate(),0,0),mn(el(s.z),Iu(s.z),0,0),mn(0,0,1,0),mn(0,0,0,1));return a.mul(o).mul(l).mul(mn(r,1)).xyz}}}const Jee=Wn(ije).setParameterLength(2),sje=new k2e;class ete extends Ri{static get type(){return"SpriteNodeMaterial"}constructor(e){super(),this.isSpriteNodeMaterial=!0,this._useSizeAttenuation=!0,this.positionNode=null,this.rotationNode=null,this.scaleNode=null,this.transparent=!0,this.setDefaultValues(sje),this.setValues(e)}setupPositionView(e){const{object:n,camera:r}=e,{positionNode:i,rotationNode:s,scaleNode:a,sizeAttenuation:o}=this,l=DC.mul(Qe(i||0));let c=bt(Lp[0].xyz.length(),Lp[1].xyz.length());a!==null&&(c=c.mul(bt(a))),r.isPerspectiveCamera&&o===!1&&(c=c.mul(l.z.negate()));let u=LC.xy;if(n.center&&n.center.isVector2===!0){const m=mBe("center","vec2",n);u=u.sub(m.sub(.5))}u=u.mul(c);const f=je(s||kFe),p=Jee(u,f);return mn(l.xy.add(p),l.zw)}copy(e){return this.positionNode=e.positionNode,this.rotationNode=e.rotationNode,this.scaleNode=e.scaleNode,super.copy(e)}get sizeAttenuation(){return this._useSizeAttenuation}set sizeAttenuation(e){this._useSizeAttenuation!==e&&(this._useSizeAttenuation=e,this.needsUpdate=!0)}}const aje=new $2e,oje=new mt;class lje extends ete{static get type(){return"PointsNodeMaterial"}constructor(e){super(),this.sizeNode=null,this.isPointsNodeMaterial=!0,this.setDefaultValues(aje),this.setValues(e)}setupPositionView(){const{positionNode:e}=this;return DC.mul(Qe(e||Js)).xyz}setupVertexSprite(e){const{material:n,camera:r}=e,{rotationNode:i,scaleNode:s,sizeNode:a,sizeAttenuation:o}=this;let l=super.setupVertex(e);if(n.isNodeMaterial!==!0)return l;let c=a!==null?bt(a):QFe;c=c.mul(HBe),r.isPerspectiveCamera&&o===!0&&(c=c.mul(cje.div(Ei.z.negate()))),s&&s.isNode&&(c=c.mul(bt(s)));let u=LC.xy;if(i&&i.isNode){const f=je(i);u=Jee(u,f)}return u=u.mul(c),u=u.div(WBe.div(2)),u=u.mul(l.w),l=l.add(mn(u,0,0)),l}setupVertex(e){return e.object.isPoints?super.setupVertex(e):this.setupVertexSprite(e)}get alphaToCoverage(){return this._useAlphaToCoverage}set alphaToCoverage(e){this._useAlphaToCoverage!==e&&(this._useAlphaToCoverage=e,this.needsUpdate=!0)}}const cje=nn(1).onFrameUpdate(function({renderer:t}){const e=t.getSize(oje);this.value=.5*e.y});class uje extends IC{constructor(){super(),this.shadowNode=je(1).toVar("shadowMask")}direct({lightNode:e}){e.shadowNode!==null&&this.shadowNode.mulAssign(e.shadowNode)}finish({context:e}){$n.a.mulAssign(this.shadowNode.oneMinus()),e.outgoingLight.rgb.assign($n.rgb)}}const dje=new iEe;class fje extends Ri{static get type(){return"ShadowNodeMaterial"}constructor(e){super(),this.isShadowNodeMaterial=!0,this.lights=!0,this.transparent=!0,this.setDefaultValues(dje),this.setValues(e)}setupLightingModel(){return new uje}}Df("vec3");Df("vec3");Df("vec3");class hje{constructor(e,n,r){this.renderer=e,this.nodes=n,this.info=r,this._context=typeof self<"u"?self:null,this._animationLoop=null,this._requestId=null}start(){const e=(n,r)=>{this._requestId=this._context.requestAnimationFrame(e),this.info.autoReset===!0&&this.info.reset(),this.nodes.nodeFrame.update(),this.info.frame=this.nodes.nodeFrame.frameId,this.renderer._inspector.begin(),this._animationLoop!==null&&this._animationLoop(n,r),this.renderer._inspector.finish()};e()}stop(){this._context.cancelAnimationFrame(this._requestId),this._requestId=null}getAnimationLoop(){return this._animationLoop}setAnimationLoop(e){this._animationLoop=e}getContext(){return this._context}setContext(e){this._context=e}dispose(){this.stop()}}class Kl{constructor(){this.weakMap=new WeakMap}get(e){let n=this.weakMap;for(let r=0;r<e.length-1;r++)if(n=n.get(e[r]),n===void 0)return;return n.get(e[e.length-1])}set(e,n){let r=this.weakMap;for(let i=0;i<e.length-1;i++){const s=e[i];r.has(s)===!1&&r.set(s,new WeakMap),r=r.get(s)}return r.set(e[e.length-1],n),this}delete(e){let n=this.weakMap;for(let r=0;r<e.length-1;r++)if(n=n.get(e[r]),n===void 0)return!1;return n.delete(e[e.length-1])}}let pje=0;function mje(t){const e=Object.keys(t);let n=Object.getPrototypeOf(t);for(;n;){const r=Object.getOwnPropertyDescriptors(n);for(const i in r)if(r[i]!==void 0){const s=r[i];s&&typeof s.get=="function"&&e.push(i)}n=Object.getPrototypeOf(n)}return e}class gje{constructor(e,n,r,i,s,a,o,l,c,u){this.id=pje++,this._nodes=e,this._geometries=n,this.renderer=r,this.object=i,this.material=s,this.scene=a,this.camera=o,this.lightsNode=l,this.context=c,this.geometry=i.geometry,this.version=s.version,this.drawRange=null,this.attributes=null,this.attributesId=null,this.pipeline=null,this.group=null,this.vertexBuffers=null,this.drawParams=null,this.bundle=null,this.clippingContext=u,this.clippingContextCacheKey=u!==null?u.cacheKey:"",this.initialNodesCacheKey=this.getDynamicCacheKey(),this.initialCacheKey=this.getCacheKey(),this._nodeBuilderState=null,this._bindings=null,this._monitor=null,this.onDispose=null,this.isRenderObject=!0,this.onMaterialDispose=()=>{this.dispose()},this.onGeometryDispose=()=>{this.attributes=null,this.attributesId=null},this.material.addEventListener("dispose",this.onMaterialDispose),this.geometry.addEventListener("dispose",this.onGeometryDispose)}updateClipping(e){this.clippingContext=e}get clippingNeedsUpdate(){return this.clippingContext===null||this.clippingContext.cacheKey===this.clippingContextCacheKey?!1:(this.clippingContextCacheKey=this.clippingContext.cacheKey,!0)}get hardwareClippingPlanes(){return this.material.hardwareClipping===!0?this.clippingContext.unionClippingCount:0}getNodeBuilderState(){return this._nodeBuilderState||(this._nodeBuilderState=this._nodes.getForRender(this))}getMonitor(){return this._monitor||(this._monitor=this.getNodeBuilderState().observer)}getBindings(){return this._bindings||(this._bindings=this.getNodeBuilderState().createBindings())}getBindingGroup(e){for(const n of this.getBindings())if(n.name===e)return n}getIndex(){return this._geometries.getIndex(this)}getIndirect(){return this._geometries.getIndirect(this)}getChainArray(){return[this.object,this.material,this.context,this.lightsNode]}setGeometry(e){this.geometry=e,this.attributes=null,this.attributesId=null}getAttributes(){if(this.attributes!==null)return this.attributes;const e=this.getNodeBuilderState().nodeAttributes,n=this.geometry,r=[],i=new Set,s={};for(const a of e){let o;if(a.node&&a.node.attribute?o=a.node.attribute:(o=n.getAttribute(a.name),s[a.name]=o.version),o===void 0)continue;r.push(o);const l=o.isInterleavedBufferAttribute?o.data:o;i.add(l)}return this.attributes=r,this.attributesId=s,this.vertexBuffers=Array.from(i.values()),r}getVertexBuffers(){return this.vertexBuffers===null&&this.getAttributes(),this.vertexBuffers}getDrawParameters(){const{object:e,material:n,geometry:r,group:i,drawRange:s}=this,a=this.drawParams||(this.drawParams={vertexCount:0,firstVertex:0,instanceCount:0,firstInstance:0}),o=this.getIndex(),l=o!==null;let c=1;if(r.isInstancedBufferGeometry===!0?c=r.instanceCount:e.count!==void 0&&(c=Math.max(0,e.count)),c===0)return null;if(a.instanceCount=c,e.isBatchedMesh===!0)return a;let u=1;n.wireframe===!0&&!e.isPoints&&!e.isLineSegments&&!e.isLine&&!e.isLineLoop&&(u=2);let f=s.start*u,p=(s.start+s.count)*u;i!==null&&(f=Math.max(f,i.start*u),p=Math.min(p,(i.start+i.count)*u));const m=r.attributes.position;let x=1/0;l?x=o.count:m!=null&&(x=m.count),f=Math.max(f,0),p=Math.min(p,x);const b=p-f;return b<0||b===1/0?null:(a.vertexCount=b,a.firstVertex=f,a)}getGeometryCacheKey(){const{geometry:e}=this;let n="";for(const r of Object.keys(e.attributes).sort()){const i=e.attributes[r];n+=r+",",i.data&&(n+=i.data.stride+","),i.offset&&(n+=i.offset+","),i.itemSize&&(n+=i.itemSize+","),i.normalized&&(n+="n,")}for(const r of Object.keys(e.morphAttributes).sort()){const i=e.morphAttributes[r];n+="morph-"+r+",";for(let s=0,a=i.length;s<a;s++){const o=i[s];n+=o.id+","}}return e.index&&(n+="index,"),n}getMaterialCacheKey(){const{object:e,material:n,renderer:r}=this;let i=n.customProgramCacheKey();for(const s of mje(n)){if(/^(is[A-Z]|_)|^(visible|version|uuid|name|opacity|userData)$/.test(s))continue;const a=n[s];let o;if(a!==null){const l=typeof a;l==="number"?o=a!==0?"1":"0":l==="object"?(o="{",a.isTexture&&(o+=a.mapping,r.backend.isWebGPUBackend===!0&&(o+=a.magFilter,o+=a.minFilter,o+=a.wrapS,o+=a.wrapT,o+=a.wrapR)),o+="}"):o=String(a)}else o=String(a);i+=o+","}return i+=this.clippingContextCacheKey+",",e.geometry&&(i+=this.getGeometryCacheKey()),e.skeleton&&(i+=e.skeleton.bones.length+","),e.isBatchedMesh&&(i+=e._matricesTexture.uuid+",",e._colorsTexture!==null&&(i+=e._colorsTexture.uuid+",")),(e.isInstancedMesh||e.count>1||Array.isArray(e.morphTargetInfluences))&&(i+=e.uuid+","),i+=e.receiveShadow+",",AC(i)}get needsGeometryUpdate(){if(this.geometry.id!==this.object.geometry.id)return!0;if(this.attributes!==null){const e=this.attributesId;for(const n in e){const r=this.geometry.getAttribute(n);if(r===void 0||e[n]!==r.id)return!0}}return!1}get needsUpdate(){return this.initialNodesCacheKey!==this.getDynamicCacheKey()||this.clippingNeedsUpdate}getDynamicCacheKey(){let e=0;return this.material.isShadowPassMaterial!==!0&&(e=this._nodes.getCacheKey(this.scene,this.lightsNode)),this.camera.isArrayCamera&&(e=Zv(e,this.camera.cameras.length)),this.object.receiveShadow&&(e=Zv(e,1)),e=Zv(e,this.camera.id),e}getCacheKey(){return this.getMaterialCacheKey()+this.getDynamicCacheKey()}dispose(){this.material.removeEventListener("dispose",this.onMaterialDispose),this.geometry.removeEventListener("dispose",this.onGeometryDispose),this.onDispose()}}const Oh=[];class xje{constructor(e,n,r,i,s,a){this.renderer=e,this.nodes=n,this.geometries=r,this.pipelines=i,this.bindings=s,this.info=a,this.chainMaps={}}get(e,n,r,i,s,a,o,l){const c=this.getChainMap(l);Oh[0]=e,Oh[1]=n,Oh[2]=a,Oh[3]=s;let u=c.get(Oh);return u===void 0?(u=this.createRenderObject(this.nodes,this.geometries,this.renderer,e,n,r,i,s,a,o,l),c.set(Oh,u)):(u.updateClipping(o),u.needsGeometryUpdate&&u.setGeometry(e.geometry),(u.version!==n.version||u.needsUpdate)&&(u.initialCacheKey!==u.getCacheKey()?(u.dispose(),u=this.get(e,n,r,i,s,a,o,l)):u.version=n.version)),Oh.length=0,u}getChainMap(e="default"){return this.chainMaps[e]||(this.chainMaps[e]=new Kl)}dispose(){this.chainMaps={}}createRenderObject(e,n,r,i,s,a,o,l,c,u,f){const p=this.getChainMap(f),m=new gje(e,n,r,i,s,a,o,l,c,u);return m.onDispose=()=>{this.pipelines.delete(m),this.bindings.deleteForRender(m),this.nodes.delete(m),p.delete(m.getChainArray())},m}}class Jf{constructor(){this.data=new WeakMap}get(e){let n=this.data.get(e);return n===void 0&&(n={},this.data.set(e,n)),n}delete(e){let n=null;return this.data.has(e)&&(n=this.data.get(e),this.data.delete(e)),n}has(e){return this.data.has(e)}dispose(){this.data=new WeakMap}}const il={VERTEX:1,INDEX:2,STORAGE:3,INDIRECT:4},yf=16,yje=211,vje=212;class bje extends Jf{constructor(e){super(),this.backend=e}delete(e){const n=super.delete(e);return n!==null&&this.backend.destroyAttribute(e),n}update(e,n){const r=this.get(e);if(r.version===void 0)n===il.VERTEX?this.backend.createAttribute(e):n===il.INDEX?this.backend.createIndexAttribute(e):n===il.STORAGE?this.backend.createStorageAttribute(e):n===il.INDIRECT&&this.backend.createIndirectStorageAttribute(e),r.version=this._getBufferAttribute(e).version;else{const i=this._getBufferAttribute(e);(r.version<i.version||i.usage===Cg)&&(this.backend.updateAttribute(e),r.version=i.version)}}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}function tte(t){return t.index!==null?t.index.version:t.attributes.position.version}function jV(t){const e=[],n=t.index,r=t.attributes.position;if(n!==null){const s=n.array;for(let a=0,o=s.length;a<o;a+=3){const l=s[a+0],c=s[a+1],u=s[a+2];e.push(l,c,c,u,u,l)}}else{const s=r.array;for(let a=0,o=s.length/3-1;a<o;a+=3){const l=a+0,c=a+1,u=a+2;e.push(l,c,c,u,u,l)}}const i=new(Jk(e)?sB:iB)(e,1);return i.version=tte(t),i}class _je extends Jf{constructor(e,n){super(),this.attributes=e,this.info=n,this.wireframes=new WeakMap,this.attributeCall=new WeakMap,this._geometryDisposeListeners=new Map}has(e){const n=e.geometry;return super.has(n)&&this.get(n).initialized===!0}updateForRender(e){this.has(e)===!1&&this.initGeometry(e),this.updateAttributes(e)}initGeometry(e){const n=e.geometry,r=this.get(n);r.initialized=!0,this.info.memory.geometries++;const i=()=>{this.info.memory.geometries--;const s=n.index,a=e.getAttributes();s!==null&&this.attributes.delete(s);for(const l of a)this.attributes.delete(l);const o=this.wireframes.get(n);o!==void 0&&this.attributes.delete(o),n.removeEventListener("dispose",i),this._geometryDisposeListeners.delete(n)};n.addEventListener("dispose",i),this._geometryDisposeListeners.set(n,i)}updateAttributes(e){const n=e.getAttributes();for(const s of n)s.isStorageBufferAttribute||s.isStorageInstancedBufferAttribute?this.updateAttribute(s,il.STORAGE):this.updateAttribute(s,il.VERTEX);const r=this.getIndex(e);r!==null&&this.updateAttribute(r,il.INDEX);const i=e.geometry.indirect;i!==null&&this.updateAttribute(i,il.INDIRECT)}updateAttribute(e,n){const r=this.info.render.calls;e.isInterleavedBufferAttribute?this.attributeCall.get(e)===void 0?(this.attributes.update(e,n),this.attributeCall.set(e,r)):this.attributeCall.get(e.data)!==r&&(this.attributes.update(e,n),this.attributeCall.set(e.data,r),this.attributeCall.set(e,r)):this.attributeCall.get(e)!==r&&(this.attributes.update(e,n),this.attributeCall.set(e,r))}getIndirect(e){return e.geometry.indirect}getIndex(e){const{geometry:n,material:r}=e;let i=n.index;if(r.wireframe===!0){const s=this.wireframes;let a=s.get(n);a===void 0?(a=jV(n),s.set(n,a)):a.version!==tte(n)&&(this.attributes.delete(a),a=jV(n),s.set(n,a)),i=a}return i}dispose(){for(const[e,n]of this._geometryDisposeListeners.entries())e.removeEventListener("dispose",n);this._geometryDisposeListeners.clear()}}class Sje{constructor(){this.autoReset=!0,this.frame=0,this.calls=0,this.render={calls:0,frameCalls:0,drawCalls:0,triangles:0,points:0,lines:0,timestamp:0},this.compute={calls:0,frameCalls:0,timestamp:0},this.memory={geometries:0,textures:0}}update(e,n,r){this.render.drawCalls++,e.isMesh||e.isSprite?this.render.triangles+=r*(n/3):e.isPoints?this.render.points+=r*n:e.isLineSegments?this.render.lines+=r*(n/2):e.isLine?this.render.lines+=r*(n-1):xt("WebGPUInfo: Unknown object type.")}reset(){this.render.drawCalls=0,this.render.frameCalls=0,this.compute.frameCalls=0,this.render.triangles=0,this.render.points=0,this.render.lines=0}dispose(){this.reset(),this.calls=0,this.render.calls=0,this.compute.calls=0,this.render.timestamp=0,this.compute.timestamp=0,this.memory.geometries=0,this.memory.textures=0}}class nte{constructor(e){this.cacheKey=e,this.usedTimes=0}}class wje extends nte{constructor(e,n,r){super(e),this.vertexProgram=n,this.fragmentProgram=r}}class Tje extends nte{constructor(e,n){super(e),this.computeProgram=n,this.isComputePipeline=!0}}let Eje=0;class VP{constructor(e,n,r,i=null,s=null){this.id=Eje++,this.code=e,this.stage=n,this.name=r,this.transforms=i,this.attributes=s,this.usedTimes=0}}class Cje extends Jf{constructor(e,n){super(),this.backend=e,this.nodes=n,this.bindings=null,this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}getForCompute(e,n){const{backend:r}=this,i=this.get(e);if(this._needsComputeUpdate(e)){const s=i.pipeline;s&&(s.usedTimes--,s.computeProgram.usedTimes--);const a=this.nodes.getForCompute(e);let o=this.programs.compute.get(a.computeShader);o===void 0&&(s&&s.computeProgram.usedTimes===0&&this._releaseProgram(s.computeProgram),o=new VP(a.computeShader,"compute",e.name,a.transforms,a.nodeAttributes),this.programs.compute.set(a.computeShader,o),r.createProgram(o));const l=this._getComputeCacheKey(e,o);let c=this.caches.get(l);c===void 0&&(s&&s.usedTimes===0&&this._releasePipeline(s),c=this._getComputePipeline(e,o,l,n)),c.usedTimes++,o.usedTimes++,i.version=e.version,i.pipeline=c}return i.pipeline}getForRender(e,n=null){const{backend:r}=this,i=this.get(e);if(this._needsRenderUpdate(e)){const s=i.pipeline;s&&(s.usedTimes--,s.vertexProgram.usedTimes--,s.fragmentProgram.usedTimes--);const a=e.getNodeBuilderState(),o=e.material?e.material.name:"";let l=this.programs.vertex.get(a.vertexShader);l===void 0&&(s&&s.vertexProgram.usedTimes===0&&this._releaseProgram(s.vertexProgram),l=new VP(a.vertexShader,"vertex",o),this.programs.vertex.set(a.vertexShader,l),r.createProgram(l));let c=this.programs.fragment.get(a.fragmentShader);c===void 0&&(s&&s.fragmentProgram.usedTimes===0&&this._releaseProgram(s.fragmentProgram),c=new VP(a.fragmentShader,"fragment",o),this.programs.fragment.set(a.fragmentShader,c),r.createProgram(c));const u=this._getRenderCacheKey(e,l,c);let f=this.caches.get(u);f===void 0?(s&&s.usedTimes===0&&this._releasePipeline(s),f=this._getRenderPipeline(e,l,c,u,n)):e.pipeline=f,f.usedTimes++,l.usedTimes++,c.usedTimes++,i.pipeline=f}return i.pipeline}delete(e){const n=this.get(e).pipeline;return n&&(n.usedTimes--,n.usedTimes===0&&this._releasePipeline(n),n.isComputePipeline?(n.computeProgram.usedTimes--,n.computeProgram.usedTimes===0&&this._releaseProgram(n.computeProgram)):(n.fragmentProgram.usedTimes--,n.vertexProgram.usedTimes--,n.vertexProgram.usedTimes===0&&this._releaseProgram(n.vertexProgram),n.fragmentProgram.usedTimes===0&&this._releaseProgram(n.fragmentProgram))),super.delete(e)}dispose(){super.dispose(),this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}updateForRender(e){this.getForRender(e)}_getComputePipeline(e,n,r,i){r=r||this._getComputeCacheKey(e,n);let s=this.caches.get(r);return s===void 0&&(s=new Tje(r,n),this.caches.set(r,s),this.backend.createComputePipeline(s,i)),s}_getRenderPipeline(e,n,r,i,s){i=i||this._getRenderCacheKey(e,n,r);let a=this.caches.get(i);return a===void 0&&(a=new wje(i,n,r),this.caches.set(i,a),e.pipeline=a,this.backend.createRenderPipeline(e,s)),a}_getComputeCacheKey(e,n){return e.id+","+n.id}_getRenderCacheKey(e,n,r){return n.id+","+r.id+","+this.backend.getRenderCacheKey(e)}_releasePipeline(e){this.caches.delete(e.cacheKey)}_releaseProgram(e){const n=e.code,r=e.stage;this.programs[r].delete(n)}_needsComputeUpdate(e){const n=this.get(e);return n.pipeline===void 0||n.version!==e.version}_needsRenderUpdate(e){return this.get(e).pipeline===void 0||this.backend.needsRenderUpdate(e)}}class Aje extends Jf{constructor(e,n,r,i,s,a){super(),this.backend=e,this.textures=r,this.pipelines=s,this.attributes=i,this.nodes=n,this.info=a,this.pipelines.bindings=this}getForRender(e){const n=e.getBindings();for(const r of n){const i=this.get(r);i.bindGroup===void 0&&(this._init(r),this.backend.createBindings(r,n,0),i.bindGroup=r)}return n}getForCompute(e){const n=this.nodes.getForCompute(e).bindings;for(const r of n){const i=this.get(r);i.bindGroup===void 0&&(this._init(r),this.backend.createBindings(r,n,0),i.bindGroup=r)}return n}updateForCompute(e){this._updateBindings(this.getForCompute(e))}updateForRender(e){this._updateBindings(this.getForRender(e))}deleteForCompute(e){const n=this.nodes.getForCompute(e).bindings;for(const r of n)this.delete(r)}deleteForRender(e){const n=e.getBindings();for(const r of n)this.delete(r)}_updateBindings(e){for(const n of e)this._update(n,e)}_init(e){for(const n of e.bindings)if(n.isSampledTexture)this.textures.updateTexture(n.texture);else if(n.isSampler)this.textures.updateSampler(n.texture);else if(n.isStorageBuffer){const r=n.attribute,i=r.isIndirectStorageBufferAttribute?il.INDIRECT:il.STORAGE;this.attributes.update(r,i)}}_update(e,n){const{backend:r}=this;let i=!1,s=!0,a=0,o=0;for(const l of e.bindings)if(!(l.isNodeUniformsGroup&&this.nodes.updateGroup(l)===!1)){if(l.isStorageBuffer){const c=l.attribute,u=c.isIndirectStorageBufferAttribute?il.INDIRECT:il.STORAGE;this.attributes.update(c,u)}if(l.isUniformBuffer)l.update()&&r.updateBinding(l);else if(l.isSampledTexture){const c=l.update(),u=l.texture,f=this.textures.get(u);if(c&&(this.textures.updateTexture(u),l.generation!==f.generation&&(l.generation=f.generation,i=!0,s=!1)),r.get(u).externalTexture!==void 0||f.isDefaultTexture?s=!1:(a=a*10+u.id,o+=u.version),u.isStorageTexture===!0&&u.mipmapsAutoUpdate===!0){const m=this.get(u);l.store===!0?m.needsMipmap=!0:this.textures.needsMipmaps(u)&&m.needsMipmap===!0&&(this.backend.generateMipmaps(u),m.needsMipmap=!1)}}else if(l.isSampler&&l.update()){const u=this.textures.updateSampler(l.texture);l.samplerKey!==u&&(l.samplerKey=u,i=!0,s=!1)}}i===!0&&this.backend.updateBindings(e,n,s?a:0,o)}}function Mje(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?t.z-e.z:t.id-e.id}function zV(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function $V(t){return(t.transmission>0||t.transmissionNode&&t.transmissionNode.isNode)&&t.side===Zs&&t.forceSinglePass===!1}class Rje{constructor(e,n,r){this.renderItems=[],this.renderItemsIndex=0,this.opaque=[],this.transparentDoublePass=[],this.transparent=[],this.bundles=[],this.lightsNode=e.getNode(n,r),this.lightsArray=[],this.scene=n,this.camera=r,this.occlusionQueryCount=0}begin(){return this.renderItemsIndex=0,this.opaque.length=0,this.transparentDoublePass.length=0,this.transparent.length=0,this.bundles.length=0,this.lightsArray.length=0,this.occlusionQueryCount=0,this}getNextRenderItem(e,n,r,i,s,a,o){let l=this.renderItems[this.renderItemsIndex];return l===void 0?(l={id:e.id,object:e,geometry:n,material:r,groupOrder:i,renderOrder:e.renderOrder,z:s,group:a,clippingContext:o},this.renderItems[this.renderItemsIndex]=l):(l.id=e.id,l.object=e,l.geometry=n,l.material=r,l.groupOrder=i,l.renderOrder=e.renderOrder,l.z=s,l.group=a,l.clippingContext=o),this.renderItemsIndex++,l}push(e,n,r,i,s,a,o){const l=this.getNextRenderItem(e,n,r,i,s,a,o);e.occlusionTest===!0&&this.occlusionQueryCount++,r.transparent===!0||r.transmission>0||r.transmissionNode&&r.transmissionNode.isNode||r.backdropNode&&r.backdropNode.isNode?($V(r)&&this.transparentDoublePass.push(l),this.transparent.push(l)):this.opaque.push(l)}unshift(e,n,r,i,s,a,o){const l=this.getNextRenderItem(e,n,r,i,s,a,o);r.transparent===!0||r.transmission>0||r.transmissionNode&&r.transmissionNode.isNode||r.backdropNode&&r.backdropNode.isNode?($V(r)&&this.transparentDoublePass.unshift(l),this.transparent.unshift(l)):this.opaque.unshift(l)}pushBundle(e){this.bundles.push(e)}pushLight(e){this.lightsArray.push(e)}sort(e,n){this.opaque.length>1&&this.opaque.sort(e||Mje),this.transparentDoublePass.length>1&&this.transparentDoublePass.sort(n||zV),this.transparent.length>1&&this.transparent.sort(n||zV)}finish(){this.lightsNode.setLights(this.lightsArray);for(let e=this.renderItemsIndex,n=this.renderItems.length;e<n;e++){const r=this.renderItems[e];if(r.id===null)break;r.id=null,r.object=null,r.geometry=null,r.material=null,r.groupOrder=null,r.renderOrder=null,r.z=null,r.group=null,r.clippingContext=null}}}const av=[];class Pje{constructor(e){this.lighting=e,this.lists=new Kl}get(e,n){const r=this.lists;av[0]=e,av[1]=n;let i=r.get(av);return i===void 0&&(i=new Rje(this.lighting,e,n),r.set(av,i)),av.length=0,i}dispose(){this.lists=new Kl}}let Nje=0;class Oje{constructor(){this.id=Nje++,this.color=!0,this.clearColor=!0,this.clearColorValue={r:0,g:0,b:0,a:1},this.depth=!0,this.clearDepth=!0,this.clearDepthValue=1,this.stencil=!1,this.clearStencil=!0,this.clearStencilValue=1,this.viewport=!1,this.viewportValue=new an,this.scissor=!1,this.scissorValue=new an,this.renderTarget=null,this.textures=null,this.depthTexture=null,this.activeCubeFace=0,this.activeMipmapLevel=0,this.sampleCount=1,this.width=0,this.height=0,this.occlusionQueryCount=0,this.clippingContext=null,this.isRenderContext=!0}getCacheKey(){return rte(this)}}function rte(t){const{textures:e,activeCubeFace:n,activeMipmapLevel:r}=t,i=[n,r];for(const s of e)i.push(s.id);return F_(i)}const ov=[],Dje=new uC,Lje=new aB;class Ije{constructor(){this.chainMaps={}}get(e,n,r=null){ov[0]=e,ov[1]=n;let i;if(r===null)i="default";else{const o=r.texture.format;i=`${r.textures.length}:${o}:${r.samples}:${r.depthBuffer}:${r.stencilBuffer}`}const s=this._getChainMap(i);let a=s.get(ov);return a===void 0&&(a=new Oje,s.set(ov,a)),ov.length=0,r!==null&&(a.sampleCount=r.samples===0?1:r.samples),a}getForClear(e=null){return this.get(Dje,Lje,e)}_getChainMap(e){return this.chainMaps[e]||(this.chainMaps[e]=new Kl)}dispose(){this.chainMaps={}}}const kje=new ae;class Bje extends Jf{constructor(e,n,r){super(),this.renderer=e,this.backend=n,this.info=r}updateRenderTarget(e,n=0){const r=this.get(e),i=e.samples===0?1:e.samples,s=r.depthTextureMips||(r.depthTextureMips={}),a=e.textures,o=this.getSize(a[0]),l=o.width>>n,c=o.height>>n;let u=e.depthTexture||s[n];const f=e.depthBuffer===!0||e.stencilBuffer===!0;let p=!1;u===void 0&&f&&(u=new ol,u.format=e.stencilBuffer?Ao:Co,u.type=e.stencilBuffer?Eo:Ar,u.image.width=l,u.image.height=c,u.image.depth=o.depth,u.renderTarget=e,u.isArrayTexture=e.multiview===!0&&o.depth>1,s[n]=u),(r.width!==o.width||o.height!==r.height)&&(p=!0,u&&(u.needsUpdate=!0,u.image.width=l,u.image.height=c,u.image.depth=u.isArrayTexture?u.image.depth:1)),r.width=o.width,r.height=o.height,r.textures=a,r.depthTexture=u||null,r.depth=e.depthBuffer,r.stencil=e.stencilBuffer,r.renderTarget=e,r.sampleCount!==i&&(p=!0,u&&(u.needsUpdate=!0),r.sampleCount=i);const m={sampleCount:i};if(e.isXRRenderTarget!==!0){for(let x=0;x<a.length;x++){const b=a[x];p&&(b.needsUpdate=!0),this.updateTexture(b,m)}u&&this.updateTexture(u,m)}r.initialized!==!0&&(r.initialized=!0,r.onDispose=()=>{this._destroyRenderTarget(e)},e.addEventListener("dispose",r.onDispose))}updateTexture(e,n={}){const r=this.get(e);if(r.initialized===!0&&r.version===e.version)return;const i=e.isRenderTargetTexture||e.isDepthTexture||e.isFramebufferTexture,s=this.backend;if(i&&r.initialized===!0&&s.destroyTexture(e),e.isFramebufferTexture){const c=this.renderer.getRenderTarget();c?e.type=c.texture.type:e.type=si}const{width:a,height:o,depth:l}=this.getSize(e);if(n.width=a,n.height=o,n.depth=l,n.needsMipmaps=this.needsMipmaps(e),n.levels=n.needsMipmaps?this.getMipLevels(e,a,o):1,e.isCubeTexture&&e.mipmaps.length>0&&n.levels++,i||e.isStorageTexture===!0||e.isExternalTexture===!0)s.createTexture(e,n),r.generation=e.version;else if(e.version>0){const c=e.image;if(c===void 0)ct("Renderer: Texture marked for update but image is undefined.");else if(c.complete===!1)ct("Renderer: Texture marked for update but image is incomplete.");else{if(e.images){const f=[];for(const p of e.images)f.push(p);n.images=f}else n.image=c;(r.isDefaultTexture===void 0||r.isDefaultTexture===!0)&&(s.createTexture(e,n),r.isDefaultTexture=!1,r.generation=e.version),e.source.dataReady===!0&&s.updateTexture(e,n);const u=e.isStorageTexture===!0&&e.mipmapsAutoUpdate===!1;n.needsMipmaps&&e.mipmaps.length===0&&!u&&s.generateMipmaps(e),e.onUpdate&&e.onUpdate(e)}}else s.createDefaultTexture(e),r.isDefaultTexture=!0,r.generation=e.version;r.initialized!==!0&&(r.initialized=!0,r.generation=e.version,this.info.memory.textures++,e.isVideoTexture&&sn.getTransfer(e.colorSpace)!==Ot&&ct("WebGPURenderer: Video textures must use a color space with a sRGB transfer function, e.g. SRGBColorSpace."),r.onDispose=()=>{this._destroyTexture(e)},e.addEventListener("dispose",r.onDispose)),r.version=e.version}updateSampler(e){return this.backend.updateSampler(e)}getSize(e,n=kje){let r=e.images?e.images[0]:e.image;return r?(r.image!==void 0&&(r=r.image),typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement?(n.width=r.videoWidth||1,n.height=r.videoHeight||1,n.depth=1):typeof VideoFrame<"u"&&r instanceof VideoFrame?(n.width=r.displayWidth||1,n.height=r.displayHeight||1,n.depth=1):(n.width=r.width||1,n.height=r.height||1,n.depth=e.isCubeTexture?6:r.depth||1)):n.width=n.height=n.depth=1,n}getMipLevels(e,n,r){let i;return e.mipmaps.length>0?i=e.mipmaps.length:e.isCompressedTexture===!0?i=1:i=Math.floor(Math.log2(Math.max(n,r)))+1,i}needsMipmaps(e){return e.generateMipmaps===!0||e.mipmaps.length>0}_destroyRenderTarget(e){if(this.has(e)===!0){const n=this.get(e),r=n.textures,i=n.depthTexture;e.removeEventListener("dispose",n.onDispose);for(let s=0;s<r.length;s++)this._destroyTexture(r[s]);i&&this._destroyTexture(i),this.delete(e),this.backend.delete(e)}}_destroyTexture(e){if(this.has(e)===!0){const n=this.get(e);e.removeEventListener("dispose",n.onDispose);const r=n.isDefaultTexture;this.backend.destroyTexture(e,r),this.delete(e),this.info.memory.textures--}}}class fF extends Xt{constructor(e,n,r,i=1){super(e,n,r),this.a=i}set(e,n,r,i=1){return this.a=i,super.set(e,n,r)}copy(e){return e.a!==void 0&&(this.a=e.a),super.copy(e)}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}}class Fje extends cr{static get type(){return"ParameterNode"}constructor(e,n=null){super(e,n),this.isParameterNode=!0}getMemberType(e,n){const r=this.getNodeType(e),i=e.getStructTypeNode(r);let s;return i!==null?s=i.getMemberType(e,n):(xt(`TSL: Member "${n}" not found in struct "${r}".`),s="float"),s}getHash(){return this.uuid}generate(){return this.name}}class Uje extends Wt{static get type(){return"StackNode"}constructor(e=null){super(),this.nodes=[],this.outputNode=null,this.parent=e,this._currentCond=null,this._expressionNode=null,this.isStackNode=!0}getElementType(e){return this.hasOutput?this.outputNode.getElementType(e):"void"}getNodeType(e){return this.hasOutput?this.outputNode.getNodeType(e):"void"}getMemberType(e,n){return this.hasOutput?this.outputNode.getMemberType(e,n):"void"}addToStack(e){return e.isNode!==!0?(xt("TSL: Invalid node added to stack."),this):(this.nodes.push(e),this)}If(e,n){const r=new Rv(n);return this._currentCond=Is(e,r),this.addToStack(this._currentCond)}ElseIf(e,n){const r=new Rv(n),i=Is(e,r);return this._currentCond.elseNode=i,this._currentCond=i,this}Else(e){return this._currentCond.elseNode=new Rv(e),this}Switch(e){return this._expressionNode=pt(e),this}Case(...e){const n=[];if(e.length>=2)for(let o=0;o<e.length-1;o++)n.push(this._expressionNode.equal(pt(e[o])));else xt("TSL: Invalid parameter length. Case() requires at least two parameters.");const r=e[e.length-1],i=new Rv(r);let s=n[0];for(let o=1;o<n.length;o++)s=s.or(n[o]);const a=Is(s,i);return this._currentCond===null?(this._currentCond=a,this.addToStack(this._currentCond)):(this._currentCond.elseNode=a,this._currentCond=a,this)}Default(e){return this.Else(e),this}setup(e){const n=e.getNodeProperties(this);let r=0;for(const i of this.getChildren())i.isVarNode&&i.intent===!0&&i.isAssign(e)!==!0||(n["node"+r++]=i);return n.outputNode||null}get hasOutput(){return this.outputNode&&this.outputNode.isNode}build(e,...n){const r=OJ();S2(this),e.setActiveStack(this);const i=e.buildStage;for(const a of this.nodes)if(!(a.isVarNode&&a.intent===!0&&a.isAssign(e)!==!0)){if(i==="setup")a.build(e);else if(i==="analyze")a.build(e,this);else if(i==="generate"){const o=e.getDataFromNode(a,"any").stages,l=o&&o[e.shaderStage];if(a.isVarNode&&l&&l.length===1&&l[0]&&l[0].isStackNode)continue;a.build(e,"void")}}let s;return this.hasOutput?s=this.outputNode.build(e,...n):s=super.build(e,...n),S2(r),e.removeActiveStack(this),s}}const HP=Wn(Uje).setParameterLength(0,1);new Ll;new ae;new ae;new ae;new In;new ae(0,0,-1);new an;new ae;new ae;new an;new mt;const jje=new Hp;qg.flipX();jje.depthTexture=new ol(1,1);const WP=new D_(-1,1,1,-1,0,1);class zje extends Us{constructor(e=!1){super();const n=e===!1?[0,-1,0,1,2,1]:[0,2,0,0,2,0];this.setAttribute("position",new Mi([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Mi(n,2))}}const $je=new zje;class hF extends Ji{constructor(e=null){super($je,e),this.camera=WP,this.isQuadMesh=!0}async renderAsync(e){jr('QuadMesh: "renderAsync()" has been deprecated. Use "render()" and "await renderer.init();" when creating the renderer.'),await e.init(),e.render(this,WP)}render(e){e.render(this,WP)}}at(([t])=>zc(je(52.9829189).mul(zc(G0(t,bt(.06711056,.00583715)))))).setLayout({name:"interleavedGradientNoise",type:"float",inputs:[{name:"position",type:"vec2"}]});class Xu extends Wt{static get type(){return"EventNode"}constructor(e,n){super("void"),this.eventType=e,this.callback=n,e===Xu.OBJECT?this.updateType=yn.OBJECT:e===Xu.MATERIAL?this.updateType=yn.RENDER:e===Xu.BEFORE_OBJECT?this.updateBeforeType=yn.OBJECT:e===Xu.BEFORE_MATERIAL&&(this.updateBeforeType=yn.RENDER)}update(e){this.callback(e)}updateBefore(e){this.callback(e)}}Xu.OBJECT="object";Xu.MATERIAL="material";Xu.BEFORE_OBJECT="beforeObject";Xu.BEFORE_MATERIAL="beforeMaterial";const lv=new Ka,qP=new In;class Va extends Wt{static get type(){return"SceneNode"}constructor(e=Va.BACKGROUND_BLURRINESS,n=null){super(),this.scope=e,this.scene=n}setup(e){const n=this.scope,r=this.scene!==null?this.scene:e.scene;let i;return n===Va.BACKGROUND_BLURRINESS?i=br("backgroundBlurriness","float",r):n===Va.BACKGROUND_INTENSITY?i=br("backgroundIntensity","float",r):n===Va.BACKGROUND_ROTATION?i=nn("mat4").setName("backgroundRotation").setGroup(en).onRenderUpdate(()=>{const s=r.background;return s!==null&&s.isTexture&&s.mapping!==Vk?(lv.copy(r.backgroundRotation),lv.x*=-1,lv.y*=-1,lv.z*=-1,qP.makeRotationFromEuler(lv)):qP.identity(),qP}):xt("SceneNode: Unknown scope:",n),i}}Va.BACKGROUND_BLURRINESS="backgroundBlurriness";Va.BACKGROUND_INTENSITY="backgroundIntensity";Va.BACKGROUND_ROTATION="backgroundRotation";const Gje=St(Va,Va.BACKGROUND_BLURRINESS),GV=St(Va,Va.BACKGROUND_INTENSITY),Vje=St(Va,Va.BACKGROUND_ROTATION),Hje=at(({texture:t,uv:e})=>{const r=Qe().toVar();return Gr(e.x.lessThan(1e-4),()=>{r.assign(Qe(1,0,0))}).ElseIf(e.y.lessThan(1e-4),()=>{r.assign(Qe(0,1,0))}).ElseIf(e.z.lessThan(1e-4),()=>{r.assign(Qe(0,0,1))}).ElseIf(e.x.greaterThan(1-1e-4),()=>{r.assign(Qe(-1,0,0))}).ElseIf(e.y.greaterThan(1-1e-4),()=>{r.assign(Qe(0,-1,0))}).ElseIf(e.z.greaterThan(1-1e-4),()=>{r.assign(Qe(0,0,-1))}).Else(()=>{const s=t.sample(e.add(Qe(-.01,0,0))).r.sub(t.sample(e.add(Qe(.01,0,0))).r),a=t.sample(e.add(Qe(0,-.01,0))).r.sub(t.sample(e.add(Qe(0,.01,0))).r),o=t.sample(e.add(Qe(0,0,-.01))).r.sub(t.sample(e.add(Qe(0,0,.01))).r);r.assign(Qe(s,a,o))}),r.normalize()});class Wje extends Ex{static get type(){return"Texture3DNode"}constructor(e,n=null,r=null){super(e,n,r),this.isTexture3DNode=!0}getInputType(){return"texture3D"}getDefaultUV(){return Qe(.5,.5,.5)}setUpdateMatrix(){}setupUV(e,n){const r=this.value;return e.isFlipY()&&(r.isRenderTargetTexture===!0||r.isFramebufferTexture===!0)&&(this.sampler?n=n.flipY():n=n.setY(Dr(xp(this,this.levelNode).y).sub(n.y).sub(1))),n}generateUV(e,n){return n.build(e,this.sampler===!0?"vec3":"ivec3")}generateOffset(e,n){return n.build(e,"ivec3")}normal(e){return Hje({texture:this,uv:e})}}const qje=Wn(Wje).setParameterLength(1,3),Ow=new mt;class Xje extends Ex{static get type(){return"PassTextureNode"}constructor(e,n){super(n),this.passNode=e,this.setUpdateMatrix(!1)}setup(e){return this.passNode.build(e),super.setup(e)}clone(){return new this.constructor(this.passNode,this.value)}}class VV extends Xje{static get type(){return"PassMultipleTextureNode"}constructor(e,n,r=!1){super(e,null),this.textureName=n,this.previousTexture=r}updateTexture(){this.value=this.previousTexture?this.passNode.getPreviousTexture(this.textureName):this.passNode.getTexture(this.textureName)}setup(e){return this.updateTexture(),super.setup(e)}clone(){const e=new this.constructor(this.passNode,this.textureName,this.previousTexture);return e.uvNode=this.uvNode,e.levelNode=this.levelNode,e.biasNode=this.biasNode,e.sampler=this.sampler,e.depthNode=this.depthNode,e.compareNode=this.compareNode,e.gradNode=this.gradNode,e.offsetNode=this.offsetNode,e}}class UC extends is{static get type(){return"PassNode"}constructor(e,n,r,i={}){super("vec4"),this.scope=e,this.scene=n,this.camera=r,this.options=i,this._pixelRatio=1,this._width=1,this._height=1;const s=new ol;s.isRenderTargetTexture=!0,s.name="depth";const a=new Hp(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Ci,...i});a.texture.name="output",a.depthTexture=s,this.renderTarget=a,this._textures={output:a.texture,depth:s},this._textureNodes={},this._linearDepthNodes={},this._viewZNodes={},this._previousTextures={},this._previousTextureNodes={},this._cameraNear=nn(0),this._cameraFar=nn(0),this._mrt=null,this._layers=null,this._resolutionScale=1,this._viewport=null,this._scissor=null,this.isPassNode=!0,this.updateBeforeType=yn.FRAME,this.global=!0}setResolutionScale(e){return this._resolutionScale=e,this}getResolutionScale(){return this._resolutionScale}setResolution(e){return ct("PassNode: .setResolution() is deprecated. Use .setResolutionScale() instead."),this.setResolutionScale(e)}getResolution(){return ct("PassNode: .getResolution() is deprecated. Use .getResolutionScale() instead."),this.getResolutionScale()}setLayers(e){return this._layers=e,this}getLayers(){return this._layers}setMRT(e){return this._mrt=e,this}getMRT(){return this._mrt}getTexture(e){let n=this._textures[e];return n===void 0&&(n=this.renderTarget.texture.clone(),n.name=e,this._textures[e]=n,this.renderTarget.textures.push(n)),n}getPreviousTexture(e){let n=this._previousTextures[e];return n===void 0&&(n=this.getTexture(e).clone(),this._previousTextures[e]=n),n}toggleTexture(e){const n=this._previousTextures[e];if(n!==void 0){const r=this._textures[e],i=this.renderTarget.textures.indexOf(r);this.renderTarget.textures[i]=n,this._textures[e]=n,this._previousTextures[e]=r,this._textureNodes[e].updateTexture(),this._previousTextureNodes[e].updateTexture()}}getTextureNode(e="output"){let n=this._textureNodes[e];return n===void 0&&(n=pt(new VV(this,e)),n.updateTexture(),this._textureNodes[e]=n),n}getPreviousTextureNode(e="output"){let n=this._previousTextureNodes[e];return n===void 0&&(this._textureNodes[e]===void 0&&this.getTextureNode(e),n=pt(new VV(this,e,!0)),n.updateTexture(),this._previousTextureNodes[e]=n),n}getViewZNode(e="depth"){let n=this._viewZNodes[e];if(n===void 0){const r=this._cameraNear,i=this._cameraFar;this._viewZNodes[e]=n=Iee(this.getTextureNode(e),r,i)}return n}getLinearDepthNode(e="depth"){let n=this._linearDepthNodes[e];if(n===void 0){const r=this._cameraNear,i=this._cameraFar,s=this.getViewZNode(e);this._linearDepthNodes[e]=n=nb(s,r,i)}return n}async compileAsync(e){const n=e.getRenderTarget(),r=e.getMRT();e.setRenderTarget(this.renderTarget),e.setMRT(this._mrt),await e.compileAsync(this.scene,this.camera),e.setRenderTarget(n),e.setMRT(r)}setup({renderer:e}){return this.renderTarget.samples=this.options.samples===void 0?e.samples:this.options.samples,this.renderTarget.texture.type=e.getColorBufferType(),this.scope===UC.COLOR?this.getTextureNode():this.getLinearDepthNode()}updateBefore(e){const{renderer:n}=e,{scene:r}=this;let i,s;const a=n.getOutputRenderTarget();a&&a.isXRRenderTarget===!0?(s=1,i=n.xr.getCamera(),n.xr.updateCamera(i),Ow.set(a.width,a.height)):(i=this.camera,s=n.getPixelRatio(),n.getSize(Ow)),this._pixelRatio=s,this.setSize(Ow.width,Ow.height);const o=n.getRenderTarget(),l=n.getMRT(),c=n.autoClear,u=i.layers.mask;this._cameraNear.value=i.near,this._cameraFar.value=i.far,this._layers!==null&&(i.layers.mask=this._layers.mask);for(const p in this._previousTextures)this.toggleTexture(p);n.setRenderTarget(this.renderTarget),n.setMRT(this._mrt),n.autoClear=!0;const f=r.name;r.name=this.name?this.name:r.name,n.render(r,i),r.name=f,n.setRenderTarget(o),n.setMRT(l),n.autoClear=c,i.layers.mask=u}setSize(e,n){this._width=e,this._height=n;const r=Math.floor(this._width*this._pixelRatio*this._resolutionScale),i=Math.floor(this._height*this._pixelRatio*this._resolutionScale);this.renderTarget.setSize(r,i),this._scissor!==null&&this.renderTarget.scissor.copy(this._scissor),this._viewport!==null&&this.renderTarget.viewport.copy(this._viewport)}setScissor(e,n,r,i){e===null?this._scissor=null:(this._scissor===null&&(this._scissor=new an),e.isVector4?this._scissor.copy(e):this._scissor.set(e,n,r,i),this._scissor.multiplyScalar(this._pixelRatio*this._resolutionScale).floor())}setViewport(e,n,r,i){e===null?this._viewport=null:(this._viewport===null&&(this._viewport=new an),e.isVector4?this._viewport.copy(e):this._viewport.set(e,n,r,i),this._viewport.multiplyScalar(this._pixelRatio*this._resolutionScale).floor())}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget.dispose()}}UC.COLOR="color";UC.DEPTH="depth";const Yje=at(([t,e])=>t.mul(e).clamp()).setLayout({name:"linearToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),Kje=at(([t,e])=>(t=t.mul(e),t.div(t.add(1)).clamp())).setLayout({name:"reinhardToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),Zje=at(([t,e])=>{t=t.mul(e),t=t.sub(.004).max(0);const n=t.mul(t.mul(6.2).add(.5)),r=t.mul(t.mul(6.2).add(1.7)).add(.06);return n.div(r).pow(2.2)}).setLayout({name:"cineonToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),Qje=at(([t])=>{const e=t.mul(t.add(.0245786)).sub(90537e-9),n=t.mul(t.add(.432951).mul(.983729)).add(.238081);return e.div(n)}),Jje=at(([t,e])=>{const n=Sa(.59719,.35458,.04823,.076,.90834,.01566,.0284,.13383,.83777),r=Sa(1.60475,-.53108,-.07367,-.10208,1.10813,-.00605,-.00327,-.07276,1.07602);return t=t.mul(e).div(.6),t=n.mul(t),t=Qje(t),t=r.mul(t),t.clamp()}).setLayout({name:"acesFilmicToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),e4e=Sa(Qe(1.6605,-.1246,-.0182),Qe(-.5876,1.1329,-.1006),Qe(-.0728,-.0083,1.1187)),t4e=Sa(Qe(.6274,.0691,.0164),Qe(.3293,.9195,.088),Qe(.0433,.0113,.8956)),n4e=at(([t])=>{const e=Qe(t).toVar(),n=Qe(e.mul(e)).toVar(),r=Qe(n.mul(n)).toVar();return je(15.5).mul(r.mul(n)).sub(vn(40.14,r.mul(e))).add(vn(31.96,r).sub(vn(6.868,n.mul(e))).add(vn(.4298,n).add(vn(.1191,e).sub(.00232))))}),r4e=at(([t,e])=>{const n=Qe(t).toVar(),r=Sa(Qe(.856627153315983,.137318972929847,.11189821299995),Qe(.0951212405381588,.761241990602591,.0767994186031903),Qe(.0482516061458583,.101439036467562,.811302368396859)),i=Sa(Qe(1.1271005818144368,-.1413297634984383,-.14132976349843826),Qe(-.11060664309660323,1.157823702216272,-.11060664309660294),Qe(-.016493938717834573,-.016493938717834257,1.2519364065950405)),s=je(-12.47393),a=je(4.026069);return n.mulAssign(e),n.assign(t4e.mul(n)),n.assign(r.mul(n)),n.assign(ns(n,1e-10)),n.assign(td(n)),n.assign(n.sub(s).div(a.sub(s))),n.assign(pd(n,0,1)),n.assign(n4e(n)),n.assign(i.mul(n)),n.assign(PC(ns(Qe(0),n),Qe(2.2))),n.assign(e4e.mul(n)),n.assign(pd(n,0,1)),n}).setLayout({name:"agxToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),i4e=at(([t,e])=>{const n=je(.76),r=je(.15);t=t.mul(e);const i=$0(t.r,$0(t.g,t.b)),s=Is(i.lessThan(.08),i.sub(vn(6.25,i.mul(i))),.04);t.subAssign(s);const a=ns(t.r,ns(t.g,t.b));Gr(a.lessThan(n),()=>t);const o=pa(1,n),l=pa(1,o.mul(o).div(a.add(o.sub(n))));t.mulAssign(l.div(a));const c=pa(1,jc(1,r.mul(a.sub(l)).add(1)));return zr(t,Qe(l),c)}).setLayout({name:"neutralToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]});class Ns extends Wt{static get type(){return"CodeNode"}constructor(e="",n=[],r=""){super("code"),this.isCodeNode=!0,this.global=!0,this.code=e,this.includes=n,this.language=r}setIncludes(e){return this.includes=e,this}getIncludes(){return this.includes}generate(e){const n=this.getIncludes(e);for(const i of n)i.build(e);const r=e.getCodeFromNode(this,this.getNodeType(e));return r.code=this.code,r.code}serialize(e){super.serialize(e),e.code=this.code,e.language=this.language}deserialize(e){super.deserialize(e),this.code=e.code,this.language=e.language}}class s4e extends Ns{static get type(){return"FunctionNode"}constructor(e="",n=[],r=""){super(e,n,r)}getNodeType(e){return this.getNodeFunction(e).type}getMemberType(e,n){const r=this.getNodeType(e);return e.getStructTypeNode(r).getMemberType(e,n)}getInputs(e){return this.getNodeFunction(e).inputs}getNodeFunction(e){const n=e.getDataFromNode(this);let r=n.nodeFunction;return r===void 0&&(r=e.parser.parseFunction(this.code),n.nodeFunction=r),r}generate(e,n){super.generate(e);const r=this.getNodeFunction(e),i=r.name,s=r.type,a=e.getCodeFromNode(this,s);i!==""&&(a.name=i);const o=e.getPropertyName(a),l=this.getNodeFunction(e).getCode(o);return a.code=l+`
`,n==="property"?o:e.format(`${o}()`,s,n)}}function ite(t){let e;const n=t.context.getViewZ;return n!==void 0&&(e=n(this)),(e||Ei.z).negate()}const a4e=at(([t,e],n)=>{const r=ite(n);return md(t,e,r)}),o4e=at(([t],e)=>{const n=ite(e);return t.mul(t,n,n).negate().exp().oneMinus()}),HV=at(([t,e])=>mn(e.toFloat().mix(Jv.rgb,t.toVec3()),Jv.a));class l4e extends Wt{constructor(e){super(),this.scope=e}generate(e){const{scope:n}=this,{renderer:r}=e;r.backend.isWebGLBackend===!0?e.addFlowCode(`	// ${n}Barrier 
`):e.addLineFlowCode(`${n}Barrier()`,this)}}Wn(l4e);class Zc extends Wt{static get type(){return"AtomicFunctionNode"}constructor(e,n,r){super("uint"),this.method=e,this.pointerNode=n,this.valueNode=r,this.parents=!0}getInputType(e){return this.pointerNode.getNodeType(e)}getNodeType(e){return this.getInputType(e)}generate(e){const n=e.getNodeProperties(this),r=n.parents,i=this.method,s=this.getNodeType(e),a=this.getInputType(e),o=this.pointerNode,l=this.valueNode,c=[];c.push(`&${o.build(e,a)}`),l!==null&&c.push(l.build(e,a));const u=`${e.getMethod(i,s)}( ${c.join(", ")} )`;if(r?r.length===1&&r[0].isStackNode===!0:!1)e.addLineFlowCode(u,this);else return n.constNode===void 0&&(n.constNode=V0(u,s).toConst()),n.constNode.build(e)}}Zc.ATOMIC_LOAD="atomicLoad";Zc.ATOMIC_STORE="atomicStore";Zc.ATOMIC_ADD="atomicAdd";Zc.ATOMIC_SUB="atomicSub";Zc.ATOMIC_MAX="atomicMax";Zc.ATOMIC_MIN="atomicMin";Zc.ATOMIC_AND="atomicAnd";Zc.ATOMIC_OR="atomicOr";Zc.ATOMIC_XOR="atomicXor";Wn(Zc);class Gn extends is{static get type(){return"SubgroupFunctionNode"}constructor(e,n=null,r=null){super(),this.method=e,this.aNode=n,this.bNode=r}getInputType(e){const n=this.aNode?this.aNode.getNodeType(e):null,r=this.bNode?this.bNode.getNodeType(e):null,i=e.isMatrix(n)?0:e.getTypeLength(n),s=e.isMatrix(r)?0:e.getTypeLength(r);return i>s?n:r}getNodeType(e){const n=this.method;return n===Gn.SUBGROUP_ELECT?"bool":n===Gn.SUBGROUP_BALLOT?"uvec4":this.getInputType(e)}generate(e,n){const r=this.method,i=this.getNodeType(e),s=this.getInputType(e),a=this.aNode,o=this.bNode,l=[];if(r===Gn.SUBGROUP_BROADCAST||r===Gn.SUBGROUP_SHUFFLE||r===Gn.QUAD_BROADCAST){const u=o.getNodeType(e);l.push(a.build(e,i),o.build(e,u==="float"?"int":i))}else r===Gn.SUBGROUP_SHUFFLE_XOR||r===Gn.SUBGROUP_SHUFFLE_DOWN||r===Gn.SUBGROUP_SHUFFLE_UP?l.push(a.build(e,i),o.build(e,"uint")):(a!==null&&l.push(a.build(e,s)),o!==null&&l.push(o.build(e,s)));const c=l.length===0?"()":`( ${l.join(", ")} )`;return e.format(`${e.getMethod(r,i)}${c}`,i,n)}serialize(e){super.serialize(e),e.method=this.method}deserialize(e){super.deserialize(e),this.method=e.method}}Gn.SUBGROUP_ELECT="subgroupElect";Gn.SUBGROUP_BALLOT="subgroupBallot";Gn.SUBGROUP_ADD="subgroupAdd";Gn.SUBGROUP_INCLUSIVE_ADD="subgroupInclusiveAdd";Gn.SUBGROUP_EXCLUSIVE_AND="subgroupExclusiveAdd";Gn.SUBGROUP_MUL="subgroupMul";Gn.SUBGROUP_INCLUSIVE_MUL="subgroupInclusiveMul";Gn.SUBGROUP_EXCLUSIVE_MUL="subgroupExclusiveMul";Gn.SUBGROUP_AND="subgroupAnd";Gn.SUBGROUP_OR="subgroupOr";Gn.SUBGROUP_XOR="subgroupXor";Gn.SUBGROUP_MIN="subgroupMin";Gn.SUBGROUP_MAX="subgroupMax";Gn.SUBGROUP_ALL="subgroupAll";Gn.SUBGROUP_ANY="subgroupAny";Gn.SUBGROUP_BROADCAST_FIRST="subgroupBroadcastFirst";Gn.QUAD_SWAP_X="quadSwapX";Gn.QUAD_SWAP_Y="quadSwapY";Gn.QUAD_SWAP_DIAGONAL="quadSwapDiagonal";Gn.SUBGROUP_BROADCAST="subgroupBroadcast";Gn.SUBGROUP_SHUFFLE="subgroupShuffle";Gn.SUBGROUP_SHUFFLE_XOR="subgroupShuffleXor";Gn.SUBGROUP_SHUFFLE_UP="subgroupShuffleUp";Gn.SUBGROUP_SHUFFLE_DOWN="subgroupShuffleDown";Gn.QUAD_BROADCAST="quadBroadcast";let Dw;function jC(t){Dw=Dw||new WeakMap;let e=Dw.get(t);return e===void 0&&Dw.set(t,e={}),e}function pF(t){const e=jC(t);return e.shadowMatrix||(e.shadowMatrix=nn("mat4").setGroup(en).onRenderUpdate(n=>((t.castShadow!==!0||n.renderer.shadowMap.enabled===!1)&&(t.shadow.camera.coordinateSystem!==n.camera.coordinateSystem&&(t.shadow.camera.coordinateSystem=n.camera.coordinateSystem,t.shadow.camera.updateProjectionMatrix()),t.shadow.updateMatrices(t)),t.shadow.matrix)))}function c4e(t,e=H0){const n=pF(t).mul(e);return n.xyz.div(n.w)}function ste(t){const e=jC(t);return e.position||(e.position=nn(new ae).setGroup(en).onRenderUpdate((n,r)=>r.value.setFromMatrixPosition(t.matrixWorld)))}function u4e(t){const e=jC(t);return e.targetPosition||(e.targetPosition=nn(new ae).setGroup(en).onRenderUpdate((n,r)=>r.value.setFromMatrixPosition(t.target.matrixWorld)))}function ate(t){const e=jC(t);return e.viewPosition||(e.viewPosition=nn(new ae).setGroup(en).onRenderUpdate(({camera:n},r)=>{r.value=r.value||new ae,r.value.setFromMatrixPosition(t.matrixWorld),r.value.applyMatrix4(n.matrixWorldInverse)}))}const ote=t=>Td.transformDirection(ste(t).sub(u4e(t))),d4e=t=>t.sort((e,n)=>e.id-n.id),f4e=(t,e)=>{for(const n of e)if(n.isAnalyticLightNode&&n.light.id===t)return n;return null},XP=new WeakMap,cv=[];class lte extends Wt{static get type(){return"LightsNode"}constructor(){super("vec3"),this.totalDiffuseNode=Df("vec3","totalDiffuse"),this.totalSpecularNode=Df("vec3","totalSpecular"),this.outgoingLightNode=Df("vec3","outgoingLight"),this._lights=[],this._lightNodes=null,this._lightNodesHash=null,this.global=!0}customCacheKey(){const e=this._lights;for(let r=0;r<e.length;r++){const i=e[r];if(cv.push(i.id),cv.push(i.castShadow?1:0),i.isSpotLight===!0){const s=i.map!==null?i.map.id:-1,a=i.colorNode?i.colorNode.getCacheKey():-1;cv.push(s,a)}}const n=F_(cv);return cv.length=0,n}getHash(e){if(this._lightNodesHash===null){this._lightNodes===null&&this.setupLightsNode(e);const n=[];for(const r of this._lightNodes)n.push(r.getHash());this._lightNodesHash="lights-"+n.join(",")}return this._lightNodesHash}analyze(e){const n=e.getNodeProperties(this);for(const r of n.nodes)r.build(e);n.outputNode.build(e)}setupLightsNode(e){const n=[],r=this._lightNodes,i=d4e(this._lights),s=e.renderer.library;for(const a of i)if(a.isNode)n.push(pt(a));else{let o=null;if(r!==null&&(o=f4e(a.id,r)),o===null){const l=s.getLightNodeClass(a.constructor);if(l===null){ct(`LightsNode.setupNodeLights: Light node not found for ${a.constructor.name}`);continue}let c=null;XP.has(a)?c=XP.get(a):(c=pt(new l(a)),XP.set(a,c)),n.push(c)}}this._lightNodes=n}setupDirectLight(e,n,r){const{lightingModel:i,reflectedLight:s}=e.context;i.direct({...r,lightNode:n,reflectedLight:s},e)}setupDirectRectAreaLight(e,n,r){const{lightingModel:i,reflectedLight:s}=e.context;i.directRectArea({...r,lightNode:n,reflectedLight:s},e)}setupLights(e,n){for(const r of n)r.build(e)}getLightNodes(e){return this._lightNodes===null&&this.setupLightsNode(e),this._lightNodes}setup(e){const n=e.lightsNode;e.lightsNode=this;let r=this.outgoingLightNode;const i=e.context,s=i.lightingModel,a=e.getNodeProperties(this);if(s){const{totalDiffuseNode:o,totalSpecularNode:l}=this;i.outgoingLight=r;const c=e.addStack();a.nodes=c.nodes,s.start(e);const{backdrop:u,backdropAlpha:f}=i,{directDiffuse:p,directSpecular:m,indirectDiffuse:x,indirectSpecular:b}=i.reflectedLight;let v=p.add(x);u!==null&&(f!==null?v=Qe(f.mix(v,u)):v=Qe(u)),o.assign(v),l.assign(m.add(b)),r.assign(o.add(l)),s.finish(e),r=r.bypass(e.removeStack())}else a.nodes=[];return e.lightsNode=n,r}setLights(e){return this._lights=e,this._lightNodes=null,this._lightNodesHash=null,this}getLights(){return this._lights}get hasLights(){return this._lights.length>0}}class h4e extends Wt{static get type(){return"ShadowBaseNode"}constructor(e){super(),this.light=e,this.updateBeforeType=yn.RENDER,this.isShadowBaseNode=!0}setupShadowPosition({context:e,material:n}){cte.assign(n.receivedShadowPositionNode||e.shadowPositionWorld||H0)}}const cte=Df("vec3","shadowPositionWorld");function p4e(t,e={}){return e.toneMapping=t.toneMapping,e.toneMappingExposure=t.toneMappingExposure,e.outputColorSpace=t.outputColorSpace,e.renderTarget=t.getRenderTarget(),e.activeCubeFace=t.getActiveCubeFace(),e.activeMipmapLevel=t.getActiveMipmapLevel(),e.renderObjectFunction=t.getRenderObjectFunction(),e.pixelRatio=t.getPixelRatio(),e.mrt=t.getMRT(),e.clearColor=t.getClearColor(e.clearColor||new Xt),e.clearAlpha=t.getClearAlpha(),e.autoClear=t.autoClear,e.scissorTest=t.getScissorTest(),e}function m4e(t,e){return e=p4e(t,e),t.setMRT(null),t.setRenderObjectFunction(null),t.setClearColor(0,1),t.autoClear=!0,e}function g4e(t,e){t.toneMapping=e.toneMapping,t.toneMappingExposure=e.toneMappingExposure,t.outputColorSpace=e.outputColorSpace,t.setRenderTarget(e.renderTarget,e.activeCubeFace,e.activeMipmapLevel),t.setRenderObjectFunction(e.renderObjectFunction),t.setPixelRatio(e.pixelRatio),t.setMRT(e.mrt),t.setClearColor(e.clearColor,e.clearAlpha),t.autoClear=e.autoClear,t.setScissorTest(e.scissorTest)}function x4e(t,e={}){return e.background=t.background,e.backgroundNode=t.backgroundNode,e.overrideMaterial=t.overrideMaterial,e}function y4e(t,e){return e=x4e(t,e),t.background=null,t.backgroundNode=null,t.overrideMaterial=null,e}function v4e(t,e){t.background=e.background,t.backgroundNode=e.backgroundNode,t.overrideMaterial=e.overrideMaterial}function b4e(t,e,n){return n=m4e(t,n),n=y4e(e,n),n}function _4e(t,e,n){g4e(t,n),v4e(e,n)}const WV=new WeakMap,S4e=at(({depthTexture:t,shadowCoord:e,depthLayer:n})=>{let r=Ln(t,e.xy).setName("t_basic");return t.isArrayTexture&&(r=r.depth(n)),r.compare(e.z)}),w4e=at(({depthTexture:t,shadowCoord:e,shadow:n,depthLayer:r})=>{const i=(v,_)=>{let E=Ln(t,v);return t.isArrayTexture&&(E=E.depth(r)),E.compare(_)},s=br("mapSize","vec2",n).setGroup(en),a=br("radius","float",n).setGroup(en),o=bt(1).div(s),l=o.x.negate().mul(a),c=o.y.negate().mul(a),u=o.x.mul(a),f=o.y.mul(a),p=l.div(2),m=c.div(2),x=u.div(2),b=f.div(2);return Za(i(e.xy.add(bt(l,c)),e.z),i(e.xy.add(bt(0,c)),e.z),i(e.xy.add(bt(u,c)),e.z),i(e.xy.add(bt(p,m)),e.z),i(e.xy.add(bt(0,m)),e.z),i(e.xy.add(bt(x,m)),e.z),i(e.xy.add(bt(l,0)),e.z),i(e.xy.add(bt(p,0)),e.z),i(e.xy,e.z),i(e.xy.add(bt(x,0)),e.z),i(e.xy.add(bt(u,0)),e.z),i(e.xy.add(bt(p,b)),e.z),i(e.xy.add(bt(0,b)),e.z),i(e.xy.add(bt(x,b)),e.z),i(e.xy.add(bt(l,f)),e.z),i(e.xy.add(bt(0,f)),e.z),i(e.xy.add(bt(u,f)),e.z)).mul(1/17)}),T4e=at(({depthTexture:t,shadowCoord:e,shadow:n,depthLayer:r})=>{const i=(f,p)=>{let m=Ln(t,f);return t.isArrayTexture&&(m=m.depth(r)),m.compare(p)},s=br("mapSize","vec2",n).setGroup(en),a=bt(1).div(s),o=a.x,l=a.y,c=e.xy,u=zc(c.mul(s).add(.5));return c.subAssign(u.mul(a)),Za(i(c,e.z),i(c.add(bt(o,0)),e.z),i(c.add(bt(0,l)),e.z),i(c.add(a),e.z),zr(i(c.add(bt(o.negate(),0)),e.z),i(c.add(bt(o.mul(2),0)),e.z),u.x),zr(i(c.add(bt(o.negate(),l)),e.z),i(c.add(bt(o.mul(2),l)),e.z),u.x),zr(i(c.add(bt(0,l.negate())),e.z),i(c.add(bt(0,l.mul(2))),e.z),u.y),zr(i(c.add(bt(o,l.negate())),e.z),i(c.add(bt(o,l.mul(2))),e.z),u.y),zr(zr(i(c.add(bt(o.negate(),l.negate())),e.z),i(c.add(bt(o.mul(2),l.negate())),e.z),u.x),zr(i(c.add(bt(o.negate(),l.mul(2))),e.z),i(c.add(bt(o.mul(2),l.mul(2))),e.z),u.x),u.y)).mul(1/9)}),E4e=at(({depthTexture:t,shadowCoord:e,depthLayer:n})=>{const r=je(1).toVar();let i=Ln(t).sample(e.xy);t.isArrayTexture&&(i=i.depth(n)),i=i.rg;const s=ZJ(e.z,i.x);return Gr(s.notEqual(je(1)),()=>{const a=e.z.sub(i.x),o=ns(0,i.y.mul(i.y));let l=o.div(o.add(a.mul(a)));l=pd(pa(l,.3).div(.95-.3)),r.assign(pd(ns(s,l)))}),r}),C4e=at(([t,e,n])=>{let r=H0.sub(t).length();return r=r.sub(e).div(n.sub(e)),r=r.saturate(),r}),A4e=t=>{const e=t.shadow.camera,n=br("near","float",e).setGroup(en),r=br("far","float",e).setGroup(en),i=XBe(t);return C4e(i,n,r)},M4e=t=>{let e=WV.get(t);if(e===void 0){const n=t.isPointLight?A4e(t):null;e=new Ri,e.colorNode=mn(0,0,0,1),e.depthNode=n,e.isShadowPassMaterial=!0,e.name="ShadowMaterial",e.fog=!1,WV.set(t,e)}return e},qV=new Kl,ug=[],R4e=(t,e,n,r)=>{ug[0]=t,ug[1]=e;let i=qV.get(ug);return(i===void 0||i.shadowType!==n||i.useVelocity!==r)&&(i=(s,a,o,l,c,u,...f)=>{(s.castShadow===!0||s.receiveShadow&&n===mo)&&(r&&(MJ(s).useVelocity=!0),s.onBeforeShadow(t,s,o,e.camera,l,a.overrideMaterial,u),t.renderObject(s,a,o,l,c,u,...f),s.onAfterShadow(t,s,o,e.camera,l,a.overrideMaterial,u))},i.shadowType=n,i.useVelocity=r,qV.set(ug,i)),ug[0]=null,ug[1]=null,i},P4e=at(({samples:t,radius:e,size:n,shadowPass:r,depthLayer:i})=>{const s=je(0).toVar("meanVertical"),a=je(0).toVar("squareMeanVertical"),o=t.lessThanEqual(je(1)).select(je(0),je(2).div(t.sub(1))),l=t.lessThanEqual(je(1)).select(je(0),je(-1));tl({start:Dr(0),end:Dr(t),type:"int",condition:"<"},({i:u})=>{const f=l.add(je(u).mul(o));let p=r.sample(Za(OC.xy,bt(0,f).mul(e)).div(n));r.value.isArrayTexture&&(p=p.depth(i)),p=p.x,s.addAssign(p),a.addAssign(p.mul(p))}),s.divAssign(t),a.divAssign(t);const c=lp(a.sub(s.mul(s)));return bt(s,c)}),N4e=at(({samples:t,radius:e,size:n,shadowPass:r,depthLayer:i})=>{const s=je(0).toVar("meanHorizontal"),a=je(0).toVar("squareMeanHorizontal"),o=t.lessThanEqual(je(1)).select(je(0),je(2).div(t.sub(1))),l=t.lessThanEqual(je(1)).select(je(0),je(-1));tl({start:Dr(0),end:Dr(t),type:"int",condition:"<"},({i:u})=>{const f=l.add(je(u).mul(o));let p=r.sample(Za(OC.xy,bt(f,0).mul(e)).div(n));r.value.isArrayTexture&&(p=p.depth(i)),s.addAssign(p.x),a.addAssign(Za(p.y.mul(p.y),p.x.mul(p.x)))}),s.divAssign(t),a.divAssign(t);const c=lp(a.sub(s.mul(s)));return bt(s,c)}),O4e=[S4e,w4e,T4e,E4e];let YP;const Lw=new hF;class ute extends h4e{static get type(){return"ShadowNode"}constructor(e,n=null){super(e),this.shadow=n||e.shadow,this.shadowMap=null,this.vsmShadowMapVertical=null,this.vsmShadowMapHorizontal=null,this.vsmMaterialVertical=null,this.vsmMaterialHorizontal=null,this._node=null,this._currentShadowType=null,this._cameraFrameId=new WeakMap,this.isShadowNode=!0,this.depthLayer=0}setupShadowFilter(e,{filterFn:n,depthTexture:r,shadowCoord:i,shadow:s,depthLayer:a}){const o=i.x.greaterThanEqual(0).and(i.x.lessThanEqual(1)).and(i.y.greaterThanEqual(0)).and(i.y.lessThanEqual(1)).and(i.z.lessThanEqual(1)),l=n({depthTexture:r,shadowCoord:i,shadow:s,depthLayer:a});return o.select(l,je(1))}setupShadowCoord(e,n){const{shadow:r}=this,{renderer:i}=e,s=br("bias","float",r).setGroup(en);let a=n,o;if(r.camera.isOrthographicCamera||i.logarithmicDepthBuffer!==!0)a=a.xyz.div(a.w),o=a.z,i.coordinateSystem===jf&&(o=o.mul(2).sub(1));else{const l=a.w;a=a.xy.div(l);const c=br("near","float",r.camera).setGroup(en),u=br("far","float",r.camera).setGroup(en);o=kee(l.negate(),c,u)}return a=Qe(a.x,a.y.oneMinus(),o.add(s)),a}getShadowFilterFn(e){return O4e[e]}setupRenderTarget(e,n){const r=new ol(e.mapSize.width,e.mapSize.height);r.name="ShadowDepthTexture",r.compareFunction=oC;const i=n.createRenderTarget(e.mapSize.width,e.mapSize.height);return i.texture.name="ShadowMap",i.texture.type=e.mapType,i.depthTexture=r,{shadowMap:i,depthTexture:r}}setupShadow(e){const{renderer:n,camera:r}=e,{light:i,shadow:s}=this,a=n.shadowMap.type,{depthTexture:o,shadowMap:l}=this.setupRenderTarget(s,e);if(s.camera.coordinateSystem=r.coordinateSystem,s.camera.updateProjectionMatrix(),a===mo&&s.isPointLightShadow!==!0){o.compareFunction=null,l.depth>1?(l._vsmShadowMapVertical||(l._vsmShadowMapVertical=e.createRenderTarget(s.mapSize.width,s.mapSize.height,{format:$l,type:Ci,depth:l.depth,depthBuffer:!1}),l._vsmShadowMapVertical.texture.name="VSMVertical"),this.vsmShadowMapVertical=l._vsmShadowMapVertical,l._vsmShadowMapHorizontal||(l._vsmShadowMapHorizontal=e.createRenderTarget(s.mapSize.width,s.mapSize.height,{format:$l,type:Ci,depth:l.depth,depthBuffer:!1}),l._vsmShadowMapHorizontal.texture.name="VSMHorizontal"),this.vsmShadowMapHorizontal=l._vsmShadowMapHorizontal):(this.vsmShadowMapVertical=e.createRenderTarget(s.mapSize.width,s.mapSize.height,{format:$l,type:Ci,depthBuffer:!1}),this.vsmShadowMapHorizontal=e.createRenderTarget(s.mapSize.width,s.mapSize.height,{format:$l,type:Ci,depthBuffer:!1}));let T=Ln(o);o.isArrayTexture&&(T=T.depth(this.depthLayer));let A=Ln(this.vsmShadowMapVertical.texture);o.isArrayTexture&&(A=A.depth(this.depthLayer));const C=br("blurSamples","float",s).setGroup(en),M=br("radius","float",s).setGroup(en),P=br("mapSize","vec2",s).setGroup(en);let D=this.vsmMaterialVertical||(this.vsmMaterialVertical=new Ri);D.fragmentNode=P4e({samples:C,radius:M,size:P,shadowPass:T,depthLayer:this.depthLayer}).context(e.getSharedContext()),D.name="VSMVertical",D=this.vsmMaterialHorizontal||(this.vsmMaterialHorizontal=new Ri),D.fragmentNode=N4e({samples:C,radius:M,size:P,shadowPass:A,depthLayer:this.depthLayer}).context(e.getSharedContext()),D.name="VSMHorizontal"}const c=br("intensity","float",s).setGroup(en),u=br("normalBias","float",s).setGroup(en),f=pF(i).mul(cte.add(Cx.mul(u))),p=this.setupShadowCoord(e,f),m=s.filterNode||this.getShadowFilterFn(n.shadowMap.type)||null;if(m===null)throw new Error("THREE.WebGPURenderer: Shadow map type not supported yet.");const x=a===mo&&s.isPointLightShadow!==!0?this.vsmShadowMapHorizontal.texture:o,b=this.setupShadowFilter(e,{filterFn:m,shadowTexture:l.texture,depthTexture:x,shadowCoord:p,shadow:s,depthLayer:this.depthLayer});let v=Ln(l.texture,p);o.isArrayTexture&&(v=v.depth(this.depthLayer));const _=zr(1,b.rgb.mix(v,1),c.mul(v.a)).toVar();this.shadowMap=l,this.shadow.map=l;const E=`${this.light.type} Shadow [ ${this.light.name||"ID: "+this.light.id} ]`;return _.toInspector(`${E} / Color`,()=>Ln(this.shadowMap.texture)).toInspector(`${E} / Depth`,()=>Ko(this.shadowMap.depthTexture,Tx().mul(xp(Ln(this.shadowMap.depthTexture)))).x.oneMinus())}setup(e){if(e.renderer.shadowMap.enabled!==!1)return at(()=>{const n=e.renderer.shadowMap.type;this._currentShadowType!==n&&(this._reset(),this._node=null);let r=this._node;return this.setupShadowPosition(e),r===null&&(this._node=r=this.setupShadow(e),this._currentShadowType=n),e.material.shadowNode&&ct('NodeMaterial: ".shadowNode" is deprecated. Use ".castShadowNode" instead.'),e.material.receivedShadowNode&&(r=e.material.receivedShadowNode(r)),r})()}renderShadow(e){const{shadow:n,shadowMap:r,light:i}=this,{renderer:s,scene:a}=e;n.updateMatrices(i),r.setSize(n.mapSize.width,n.mapSize.height,r.depth);const o=a.name;a.name=`Shadow Map [ ${i.name||"ID: "+i.id} ]`,s.render(a,n.camera),a.name=o}updateShadow(e){const{shadowMap:n,light:r,shadow:i}=this,{renderer:s,scene:a,camera:o}=e,l=s.shadowMap.type,c=n.depthTexture.version;this._depthVersionCached=c;const u=i.camera.layers.mask;(i.camera.layers.mask&4294967294)===0&&(i.camera.layers.mask=o.layers.mask);const f=s.getRenderObjectFunction(),p=s.getMRT(),m=p?p.has("velocity"):!1;YP=b4e(s,a,YP),a.overrideMaterial=M4e(r),s.setRenderObjectFunction(R4e(s,i,l,m)),s.setClearColor(0,0),s.setRenderTarget(n),this.renderShadow(e),s.setRenderObjectFunction(f),l===mo&&i.isPointLightShadow!==!0&&this.vsmPass(s),i.camera.layers.mask=u,_4e(s,a,YP)}vsmPass(e){const{shadow:n}=this,r=this.shadowMap.depth;this.vsmShadowMapVertical.setSize(n.mapSize.width,n.mapSize.height,r),this.vsmShadowMapHorizontal.setSize(n.mapSize.width,n.mapSize.height,r),e.setRenderTarget(this.vsmShadowMapVertical),Lw.material=this.vsmMaterialVertical,Lw.render(e),e.setRenderTarget(this.vsmShadowMapHorizontal),Lw.material=this.vsmMaterialHorizontal,Lw.render(e)}dispose(){this._reset(),super.dispose()}_reset(){this._currentShadowType=null,this.shadowMap&&(this.shadowMap.dispose(),this.shadowMap=null),this.vsmShadowMapVertical!==null&&(this.vsmShadowMapVertical.dispose(),this.vsmShadowMapVertical=null,this.vsmMaterialVertical.dispose(),this.vsmMaterialVertical=null),this.vsmShadowMapHorizontal!==null&&(this.vsmShadowMapHorizontal.dispose(),this.vsmShadowMapHorizontal=null,this.vsmMaterialHorizontal.dispose(),this.vsmMaterialHorizontal=null)}updateBefore(e){const{shadow:n}=this;let r=n.needsUpdate||n.autoUpdate;r&&(this._cameraFrameId[e.camera]===e.frameId&&(r=!1),this._cameraFrameId[e.camera]=e.frameId),r&&(this.updateShadow(e),this.shadowMap.depthTexture.version===this._depthVersionCached&&(n.needsUpdate=!1))}}const D4e=(t,e)=>pt(new ute(t,e)),L4e=new Xt,bc=at(([t,e])=>{const n=t.toVar(),r=xo(n),i=jc(1,ns(r.x,ns(r.y,r.z)));r.mulAssign(i),n.mulAssign(i.mul(e.mul(2).oneMinus()));const s=bt(n.xy).toVar(),o=e.mul(1.5).oneMinus();return Gr(r.z.greaterThanEqual(o),()=>{Gr(n.z.greaterThan(0),()=>{s.x.assign(pa(4,n.x))})}).ElseIf(r.x.greaterThanEqual(o),()=>{const l=A2(n.x);s.x.assign(n.z.mul(l).add(l.mul(2)))}).ElseIf(r.y.greaterThanEqual(o),()=>{const l=A2(n.y);s.x.assign(n.x.add(l.mul(2)).add(2)),s.y.assign(n.z.mul(l).sub(2))}),bt(.125,.25).mul(s).add(bt(.375,.75)).flipY()}).setLayout({name:"cubeToUV",type:"vec2",inputs:[{name:"pos",type:"vec3"},{name:"texelSizeY",type:"float"}]}),I4e=at(({depthTexture:t,bd3D:e,dp:n,texelSize:r})=>Ln(t,bc(e,r.y)).compare(n)),k4e=at(({depthTexture:t,bd3D:e,dp:n,texelSize:r,shadow:i})=>{const s=br("radius","float",i).setGroup(en),a=bt(-1,1).mul(s).mul(r.y);return Ln(t,bc(e.add(a.xyy),r.y)).compare(n).add(Ln(t,bc(e.add(a.yyy),r.y)).compare(n)).add(Ln(t,bc(e.add(a.xyx),r.y)).compare(n)).add(Ln(t,bc(e.add(a.yyx),r.y)).compare(n)).add(Ln(t,bc(e,r.y)).compare(n)).add(Ln(t,bc(e.add(a.xxy),r.y)).compare(n)).add(Ln(t,bc(e.add(a.yxy),r.y)).compare(n)).add(Ln(t,bc(e.add(a.xxx),r.y)).compare(n)).add(Ln(t,bc(e.add(a.yxx),r.y)).compare(n)).mul(1/9)}),B4e=at(({filterFn:t,depthTexture:e,shadowCoord:n,shadow:r})=>{const i=n.xyz.toVar(),s=i.length(),a=nn("float").setGroup(en).onRenderUpdate(()=>r.camera.near),o=nn("float").setGroup(en).onRenderUpdate(()=>r.camera.far),l=br("bias","float",r).setGroup(en),c=nn(r.mapSize).setGroup(en),u=je(1).toVar();return Gr(s.sub(o).lessThanEqual(0).and(s.sub(a).greaterThanEqual(0)),()=>{const f=s.sub(a).div(o.sub(a)).toVar();f.addAssign(l);const p=i.normalize(),m=bt(1).div(c.mul(bt(4,2)));u.assign(t({depthTexture:e,bd3D:p,dp:f,texelSize:m,shadow:r}))}),u}),XV=new an,dg=new mt,uv=new mt;class F4e extends ute{static get type(){return"PointShadowNode"}constructor(e,n=null){super(e,n)}getShadowFilterFn(e){return e===MTe?I4e:k4e}setupShadowCoord(e,n){return n}setupShadowFilter(e,{filterFn:n,shadowTexture:r,depthTexture:i,shadowCoord:s,shadow:a}){return B4e({filterFn:n,shadowTexture:r,depthTexture:i,shadowCoord:s,shadow:a})}renderShadow(e){const{shadow:n,shadowMap:r,light:i}=this,{renderer:s,scene:a}=e,o=n.getFrameExtents();uv.copy(n.mapSize),uv.multiply(o),r.setSize(uv.width,uv.height),dg.copy(n.mapSize);const l=s.autoClear,c=s.getClearColor(L4e),u=s.getClearAlpha();s.autoClear=!1,s.setClearColor(n.clearColor,n.clearAlpha),s.clear();const f=n.getViewportCount();for(let p=0;p<f;p++){const m=n.getViewport(p),x=dg.x*m.x,b=uv.y-dg.y-dg.y*m.y;XV.set(x,b,dg.x*m.z,dg.y*m.w),r.viewport.copy(XV),n.updateMatrices(i,p);const v=a.name;a.name=`Point Light Shadow [ ${i.name||"ID: "+i.id} ] - Face ${p+1}`,s.render(a,n.camera),a.name=v}s.autoClear=l,s.setClearColor(c,u)}}const U4e=(t,e)=>pt(new F4e(t,e));class Zp extends Ax{static get type(){return"AnalyticLightNode"}constructor(e=null){super(),this.light=e,this.color=new Xt,this.colorNode=e&&e.colorNode||nn(this.color).setGroup(en),this.baseColorNode=null,this.shadowNode=null,this.shadowColorNode=null,this.isAnalyticLightNode=!0,this.updateType=yn.FRAME}getHash(){return this.light.uuid}getLightVector(e){return ate(this.light).sub(e.context.positionView||Ei)}setupDirect(){}setupDirectRectArea(){}setupShadowNode(){return D4e(this.light)}setupShadow(e){const{renderer:n}=e;if(n.shadowMap.enabled===!1)return;let r=this.shadowColorNode;if(r===null){const i=this.light.shadow.shadowNode;let s;i!==void 0?s=pt(i):s=this.setupShadowNode(),this.shadowNode=s,this.shadowColorNode=r=this.colorNode.mul(s),this.baseColorNode=this.colorNode}this.colorNode=r}setup(e){this.colorNode=this.baseColorNode||this.colorNode,this.light.castShadow?e.object.receiveShadow&&this.setupShadow(e):this.shadowNode!==null&&(this.shadowNode.dispose(),this.shadowNode=null,this.shadowColorNode=null);const n=this.setupDirect(e),r=this.setupDirectRectArea(e);n&&e.lightsNode.setupDirectLight(e,this,n),r&&e.lightsNode.setupDirectRectAreaLight(e,this,r)}update(){const{light:e}=this;this.color.copy(e.color).multiplyScalar(e.intensity)}}const dte=at(({lightDistance:t,cutoffDistance:e,decayExponent:n})=>{const r=t.pow(n).max(.01).reciprocal();return e.greaterThan(0).select(r.mul(t.div(e).pow4().oneMinus().clamp().pow2()),r)}),j4e=({color:t,lightVector:e,cutoffDistance:n,decayExponent:r})=>{const i=e.normalize(),s=e.length(),a=dte({lightDistance:s,cutoffDistance:n,decayExponent:r}),o=t.mul(a);return{lightDirection:i,lightColor:o}};class z4e extends Zp{static get type(){return"PointLightNode"}constructor(e=null){super(e),this.cutoffDistanceNode=nn(0).setGroup(en),this.decayExponentNode=nn(2).setGroup(en)}update(e){const{light:n}=this;super.update(e),this.cutoffDistanceNode.value=n.distance,this.decayExponentNode.value=n.decay}setupShadowNode(){return U4e(this.light)}setupDirect(e){return j4e({color:this.colorNode,lightVector:this.getLightVector(e),cutoffDistance:this.cutoffDistanceNode,decayExponent:this.decayExponentNode})}}at(([t=Tx()],{renderer:e,material:n})=>{const r=eee(t.mul(2).sub(1));let i;if(n.alphaToCoverage&&e.currentSamples>0){const s=je(r.fwidth()).toVar();i=md(s.oneMinus(),s.add(1),r).oneMinus()}else i=Is(r.greaterThan(1),0,1);return i});const $4e=at(([t,e])=>{const n=t.x,r=t.y,i=t.z;let s=e.element(0).mul(.886227);return s=s.add(e.element(1).mul(2*.511664).mul(r)),s=s.add(e.element(2).mul(2*.511664).mul(i)),s=s.add(e.element(3).mul(2*.511664).mul(n)),s=s.add(e.element(4).mul(2*.429043).mul(n).mul(r)),s=s.add(e.element(5).mul(2*.429043).mul(r).mul(i)),s=s.add(e.element(6).mul(i.mul(i).mul(.743125).sub(.247708))),s=s.add(e.element(7).mul(2*.429043).mul(n).mul(i)),s=s.add(e.element(8).mul(.429043).mul(vn(n,n).sub(vn(r,r)))),s}),Rl=new fF;let G4e=class extends Jf{constructor(e,n){super(),this.renderer=e,this.nodes=n}update(e,n,r){const i=this.renderer,s=this.nodes.getBackgroundNode(e)||e.background;let a=!1;if(s===null)i._clearColor.getRGB(Rl),Rl.a=i._clearColor.a;else if(s.isColor===!0)s.getRGB(Rl),Rl.a=1,a=!0;else if(s.isNode===!0){const c=this.get(e),u=s;Rl.copy(i._clearColor);let f=c.backgroundMesh;if(f===void 0){let v=function(){s.removeEventListener("dispose",v),f.material.dispose(),f.geometry.dispose()};var l=v;const m=NC(mn(u).mul(GV),{getUV:()=>Vje.mul(eFe),getTextureLevel:()=>Gje});let x=Oee;x=x.setZ(x.w);const b=new Ri;b.name="Background.material",b.side=Sr,b.depthTest=!1,b.depthWrite=!1,b.allowOverride=!1,b.fog=!1,b.lights=!1,b.vertexNode=x,b.colorNode=m,c.backgroundMeshNode=m,c.backgroundMesh=f=new Ji(new O_(1,32,32),b),f.frustumCulled=!1,f.name="Background.mesh",f.onBeforeRender=function(_,E,T){this.matrixWorld.copyPosition(T.matrixWorld)},s.addEventListener("dispose",v)}const p=u.getCacheKey();c.backgroundCacheKey!==p&&(c.backgroundMeshNode.node=mn(u).mul(GV),c.backgroundMeshNode.needsUpdate=!0,f.material.needsUpdate=!0,c.backgroundCacheKey=p),n.unshift(f,f.geometry,f.material,0,0,null,null)}else xt("Renderer: Unsupported background configuration.",s);const o=i.xr.getEnvironmentBlendMode();if(o==="additive"?Rl.set(0,0,0,1):o==="alpha-blend"&&Rl.set(0,0,0,0),i.autoClear===!0||a===!0){const c=r.clearColorValue;c.r=Rl.r,c.g=Rl.g,c.b=Rl.b,c.a=Rl.a,(i.backend.isWebGLBackend===!0||i.alpha===!0)&&(c.r*=c.a,c.g*=c.a,c.b*=c.a),r.depthClearValue=i._clearDepth,r.stencilClearValue=i._clearStencil,r.clearColor=i.autoClearColor===!0,r.clearDepth=i.autoClearDepth===!0,r.clearStencil=i.autoClearStencil===!0}else r.clearColor=!1,r.clearDepth=!1,r.clearStencil=!1}},V4e=0;class mL{constructor(e="",n=[],r=0,i=[]){this.name=e,this.bindings=n,this.index=r,this.bindingsReference=i,this.id=V4e++}}class H4e{constructor(e,n,r,i,s,a,o,l,c,u=[]){this.vertexShader=e,this.fragmentShader=n,this.computeShader=r,this.transforms=u,this.nodeAttributes=i,this.bindings=s,this.updateNodes=a,this.updateBeforeNodes=o,this.updateAfterNodes=l,this.observer=c,this.usedTimes=0}createBindings(){const e=[];for(const n of this.bindings)if(n.bindings[0].groupNode.shared!==!0){const i=new mL(n.name,[],n.index,n.bindingsReference);e.push(i);for(const s of n.bindings)i.bindings.push(s.clone())}else e.push(n);return e}}class YV{constructor(e,n,r=null){this.isNodeAttribute=!0,this.name=e,this.type=n,this.node=r}}class W4e{constructor(e,n,r){this.isNodeUniform=!0,this.name=e,this.type=n,this.node=r}get value(){return this.node.value}set value(e){this.node.value=e}get id(){return this.node.id}get groupNode(){return this.node.groupNode}}class fte{constructor(e,n,r=!1,i=null){this.isNodeVar=!0,this.name=e,this.type=n,this.readOnly=r,this.count=i}}class q4e extends fte{constructor(e,n,r=null,i=null){super(e,n),this.needsInterpolation=!1,this.isNodeVarying=!0,this.interpolationType=r,this.interpolationSampling=i}}class X4e{constructor(e,n,r=""){this.name=e,this.type=n,this.code=r,Object.defineProperty(this,"isNodeCode",{value:!0})}}let Y4e=0;class KP{constructor(e=null){this.id=Y4e++,this.nodesData=new WeakMap,this.parent=e}getData(e){let n=this.nodesData.get(e);return n===void 0&&this.parent!==null&&(n=this.parent.getData(e)),n}setData(e,n){this.nodesData.set(e,n)}}class K4e{constructor(e,n){this.name=e,this.members=n,this.output=!1}}class eh{constructor(e,n){this.name=e,this.value=n,this.boundary=0,this.itemSize=0,this.offset=0}setValue(e){this.value=e}getValue(){return this.value}}class Z4e extends eh{constructor(e,n=0){super(e,n),this.isNumberUniform=!0,this.boundary=4,this.itemSize=1}}class Q4e extends eh{constructor(e,n=new mt){super(e,n),this.isVector2Uniform=!0,this.boundary=8,this.itemSize=2}}class J4e extends eh{constructor(e,n=new ae){super(e,n),this.isVector3Uniform=!0,this.boundary=16,this.itemSize=3}}class eze extends eh{constructor(e,n=new an){super(e,n),this.isVector4Uniform=!0,this.boundary=16,this.itemSize=4}}class tze extends eh{constructor(e,n=new Xt){super(e,n),this.isColorUniform=!0,this.boundary=16,this.itemSize=3}}class nze extends eh{constructor(e,n=new fC){super(e,n),this.isMatrix2Uniform=!0,this.boundary=8,this.itemSize=4}}class rze extends eh{constructor(e,n=new pn){super(e,n),this.isMatrix3Uniform=!0,this.boundary=48,this.itemSize=12}}class ize extends eh{constructor(e,n=new In){super(e,n),this.isMatrix4Uniform=!0,this.boundary=64,this.itemSize=16}}class sze extends Z4e{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class aze extends Q4e{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class oze extends J4e{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class lze extends eze{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class cze extends tze{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class uze extends nze{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class dze extends rze{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class fze extends ize{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}let hze=0;const KV=new WeakMap,pze=new Map([[Int8Array,"int"],[Int16Array,"int"],[Int32Array,"int"],[Uint8Array,"uint"],[Uint16Array,"uint"],[Uint32Array,"uint"],[Float32Array,"float"]]),Iw=t=>/e/g.test(t)?String(t).replace(/\+/g,""):(t=Number(t),t+(t%1?"":".0"));class hte{constructor(e,n,r){this.object=e,this.material=e&&e.material||null,this.geometry=e&&e.geometry||null,this.renderer=n,this.parser=r,this.scene=null,this.camera=null,this.nodes=[],this.sequentialNodes=[],this.updateNodes=[],this.updateBeforeNodes=[],this.updateAfterNodes=[],this.hashNodes={},this.observer=null,this.lightsNode=null,this.environmentNode=null,this.fogNode=null,this.clippingContext=null,this.vertexShader=null,this.fragmentShader=null,this.computeShader=null,this.flowNodes={vertex:[],fragment:[],compute:[]},this.flowCode={vertex:"",fragment:"",compute:""},this.uniforms={vertex:[],fragment:[],compute:[],index:0},this.structs={vertex:[],fragment:[],compute:[],index:0},this.types={vertex:[],fragment:[],compute:[],index:0},this.bindings={vertex:{},fragment:{},compute:{}},this.bindingsIndexes={},this.bindGroups=null,this.attributes=[],this.bufferAttributes=[],this.varyings=[],this.codes={},this.vars={},this.declarations={},this.flow={code:""},this.chaining=[],this.stack=HP(),this.stacks=[],this.tab="	",this.currentFunctionNode=null,this.context={material:this.material},this.cache=new KP,this.globalCache=this.cache,this.flowsData=new WeakMap,this.shaderStage=null,this.buildStage=null,this.subBuildLayers=[],this.activeStacks=[],this.subBuildFn=null,this.fnCall=null,Object.defineProperty(this,"id",{value:hze++})}isOpaque(){const e=this.material;return e.transparent===!1&&e.blending===To&&e.alphaToCoverage===!1}getBindGroupsCache(){let e=KV.get(this.renderer);return e===void 0&&(e=new Kl,KV.set(this.renderer,e)),e}createRenderTarget(e,n,r){return new Hp(e,n,r)}createCubeRenderTarget(e,n){return new jee(e,n)}includes(e){return this.nodes.includes(e)}getOutputStructName(){}_getBindGroup(e,n){const r=this.getBindGroupsCache(),i=[];let s=!0;for(const o of n)i.push(o),s=s&&o.groupNode.shared!==!0;let a;return s?(a=r.get(i),a===void 0&&(a=new mL(e,i,this.bindingsIndexes[e].group,i),r.set(i,a))):a=new mL(e,i,this.bindingsIndexes[e].group,i),a}getBindGroupArray(e,n){const r=this.bindings[n];let i=r[e];return i===void 0&&(this.bindingsIndexes[e]===void 0&&(this.bindingsIndexes[e]={binding:0,group:Object.keys(this.bindingsIndexes).length}),r[e]=i=[]),i}getBindings(){let e=this.bindGroups;if(e===null){const n={},r=this.bindings;for(const i of qG)for(const s in r[i]){const a=r[i][s];(n[s]||(n[s]=[])).push(...a)}e=[];for(const i in n){const s=n[i],a=this._getBindGroup(i,s);e.push(a)}this.bindGroups=e}return e}sortBindingGroups(){const e=this.getBindings();e.sort((n,r)=>n.bindings[0].groupNode.order-r.bindings[0].groupNode.order);for(let n=0;n<e.length;n++){const r=e[n];this.bindingsIndexes[r.name].group=n,r.index=n}}setHashNode(e,n){this.hashNodes[n]=e}addNode(e){this.nodes.includes(e)===!1&&(this.nodes.push(e),this.setHashNode(e,e.getHash(this)))}addSequentialNode(e){this.sequentialNodes.includes(e)===!1&&this.sequentialNodes.push(e)}buildUpdateNodes(){for(const e of this.nodes)e.getUpdateType()!==yn.NONE&&this.updateNodes.push(e);for(const e of this.sequentialNodes){const n=e.getUpdateBeforeType(),r=e.getUpdateAfterType();n!==yn.NONE&&this.updateBeforeNodes.push(e),r!==yn.NONE&&this.updateAfterNodes.push(e)}}get currentNode(){return this.chaining[this.chaining.length-1]}isFilteredTexture(e){return e.magFilter===ii||e.magFilter===jg||e.magFilter===Vu||e.magFilter===za||e.minFilter===ii||e.minFilter===jg||e.minFilter===Vu||e.minFilter===za}addChain(e){this.chaining.push(e)}removeChain(e){if(this.chaining.pop()!==e)throw new Error("NodeBuilder: Invalid node chaining!")}getMethod(e){return e}getTernary(){return null}getNodeFromHash(e){return this.hashNodes[e]}addFlow(e,n){return this.flowNodes[e].push(n),n}setContext(e){this.context=e}getContext(){return this.context}addContext(e){const n=this.getContext();return this.setContext({...this.context,...e}),n}getSharedContext(){return{...this.context},this.context}setCache(e){this.cache=e}getCache(){return this.cache}getCacheFromNode(e,n=!0){const r=this.getDataFromNode(e);return r.cache===void 0&&(r.cache=new KP(n?this.getCache():null)),r.cache}isAvailable(){return!1}getVertexIndex(){ct("Abstract function.")}getInstanceIndex(){ct("Abstract function.")}getDrawIndex(){ct("Abstract function.")}getFrontFacing(){ct("Abstract function.")}getFragCoord(){ct("Abstract function.")}isFlipY(){return!1}increaseUsage(e){const n=this.getDataFromNode(e);return n.usageCount=n.usageCount===void 0?1:n.usageCount+1,n.usageCount}generateTexture(){ct("Abstract function.")}generateTextureLod(){ct("Abstract function.")}generateArrayDeclaration(e,n){return this.getType(e)+"[ "+n+" ]"}generateArray(e,n,r=null){let i=this.generateArrayDeclaration(e,n)+"( ";for(let s=0;s<n;s++){const a=r?r[s]:null;a!==null?i+=a.build(this,e):i+=this.generateConst(e),s<n-1&&(i+=", ")}return i+=" )",i}generateStruct(e,n,r=null){const i=[];for(const s of n){const{name:a,type:o}=s;r&&r[a]&&r[a].isNode?i.push(r[a].build(this,o)):i.push(this.generateConst(o))}return e+"( "+i.join(", ")+" )"}generateConst(e,n=null){if(n===null&&(e==="float"||e==="int"||e==="uint"?n=0:e==="bool"?n=!1:e==="color"?n=new Xt:e==="vec2"?n=new mt:e==="vec3"?n=new ae:e==="vec4"&&(n=new an)),e==="float")return Iw(n);if(e==="int")return`${Math.round(n)}`;if(e==="uint")return n>=0?`${Math.round(n)}u`:"0u";if(e==="bool")return n?"true":"false";if(e==="color")return`${this.getType("vec3")}( ${Iw(n.r)}, ${Iw(n.g)}, ${Iw(n.b)} )`;const r=this.getTypeLength(e),i=this.getComponentType(e),s=a=>this.generateConst(i,a);if(r===2)return`${this.getType(e)}( ${s(n.x)}, ${s(n.y)} )`;if(r===3)return`${this.getType(e)}( ${s(n.x)}, ${s(n.y)}, ${s(n.z)} )`;if(r===4&&e!=="mat2")return`${this.getType(e)}( ${s(n.x)}, ${s(n.y)}, ${s(n.z)}, ${s(n.w)} )`;if(r>=4&&n&&(n.isMatrix2||n.isMatrix3||n.isMatrix4))return`${this.getType(e)}( ${n.elements.map(s).join(", ")} )`;if(r>4)return`${this.getType(e)}()`;throw new Error(`NodeBuilder: Type '${e}' not found in generate constant attempt.`)}getType(e){return e==="color"?"vec3":e}hasGeometryAttribute(e){return this.geometry&&this.geometry.getAttribute(e)!==void 0}getAttribute(e,n){const r=this.attributes;for(const s of r)if(s.name===e)return s;const i=new YV(e,n);return this.registerDeclaration(i),r.push(i),i}getPropertyName(e){return e.name}isVector(e){return/vec\d/.test(e)}isMatrix(e){return/mat\d/.test(e)}isReference(e){return e==="void"||e==="property"||e==="sampler"||e==="samplerComparison"||e==="texture"||e==="cubeTexture"||e==="storageTexture"||e==="depthTexture"||e==="texture3D"}needsToWorkingColorSpace(){return!1}getComponentTypeFromTexture(e){const n=e.type;if(e.isDataTexture){if(n===xs)return"int";if(n===Ar)return"uint"}return"float"}getElementType(e){return e==="mat2"?"vec2":e==="mat3"?"vec3":e==="mat4"?"vec4":this.getComponentType(e)}getComponentType(e){if(e=this.getVectorType(e),e==="float"||e==="bool"||e==="int"||e==="uint")return e;const n=/(b|i|u|)(vec|mat)([2-4])/.exec(e);return n===null?null:n[1]==="b"?"bool":n[1]==="i"?"int":n[1]==="u"?"uint":"float"}getVectorType(e){return e==="color"?"vec3":e==="texture"||e==="cubeTexture"||e==="storageTexture"||e==="texture3D"?"vec4":e}getTypeFromLength(e,n="float"){if(e===1)return n;let r=pIe(e);const i=n==="float"?"":n[0];return/mat2/.test(n)===!0&&(r=r.replace("vec","mat")),i+r}getTypeFromArray(e){return pze.get(e.constructor)}isInteger(e){return/int|uint|(i|u)vec/.test(e)}getTypeFromAttribute(e){let n=e;e.isInterleavedBufferAttribute&&(n=e.data);const r=n.array,i=e.itemSize,s=e.normalized;let a;return!(e instanceof HZ)&&s!==!0&&(a=this.getTypeFromArray(r)),this.getTypeFromLength(i,a)}getTypeLength(e){const n=this.getVectorType(e),r=/vec([2-4])/.exec(n);return r!==null?Number(r[1]):n==="float"||n==="bool"||n==="int"||n==="uint"?1:/mat2/.test(e)===!0?4:/mat3/.test(e)===!0?9:/mat4/.test(e)===!0?16:0}getVectorFromMatrix(e){return e.replace("mat","vec")}changeComponentType(e,n){return this.getTypeFromLength(this.getTypeLength(e),n)}getIntegerType(e){const n=this.getComponentType(e);return n==="int"||n==="uint"?e:this.changeComponentType(e,"int")}setActiveStack(e){this.activeStacks.push(e)}removeActiveStack(e){if(this.activeStacks[this.activeStacks.length-1]===e)this.activeStacks.pop();else throw new Error("NodeBuilder: Invalid active stack removal.")}getActiveStack(){return this.activeStacks[this.activeStacks.length-1]}getBaseStack(){return this.activeStacks[0]}addStack(){this.stack=HP(this.stack);const e=OJ();return this.stacks.push(e),S2(this.stack),this.stack}removeStack(){const e=this.stack;for(const n of e.nodes){const r=this.getDataFromNode(n);r.stack=e}return this.stack=e.parent,S2(this.stacks.pop()),e}getDataFromNode(e,n=this.shaderStage,r=null){r=r===null?e.isGlobal(this)?this.globalCache:this.cache:r;let i=r.getData(e);i===void 0&&(i={},r.setData(e,i)),i[n]===void 0&&(i[n]={});let s=i[n];const a=i.any?i.any.subBuilds:null,o=this.getClosestSubBuild(a);return o&&(s.subBuildsCache===void 0&&(s.subBuildsCache={}),s=s.subBuildsCache[o]||(s.subBuildsCache[o]={}),s.subBuilds=a),s}getNodeProperties(e,n="any"){const r=this.getDataFromNode(e,n);return r.properties||(r.properties={outputNode:null})}getBufferAttributeFromNode(e,n){const r=this.getDataFromNode(e);let i=r.bufferAttribute;if(i===void 0){const s=this.uniforms.index++;i=new YV("nodeAttribute"+s,n,e),this.bufferAttributes.push(i),r.bufferAttribute=i}return i}getStructTypeNode(e,n=this.shaderStage){return this.types[n][e]||null}getStructTypeFromNode(e,n,r=null,i=this.shaderStage){const s=this.getDataFromNode(e,i,this.globalCache);let a=s.structType;if(a===void 0){const o=this.structs.index++;r===null&&(r="StructType"+o),a=new K4e(r,n),this.structs[i].push(a),this.types[i][r]=e,s.structType=a}return a}getOutputStructTypeFromNode(e,n){const r=this.getStructTypeFromNode(e,n,"OutputType","fragment");return r.output=!0,r}getUniformFromNode(e,n,r=this.shaderStage,i=null){const s=this.getDataFromNode(e,r,this.globalCache);let a=s.uniform;if(a===void 0){const o=this.uniforms.index++;a=new W4e(i||"nodeUniform"+o,n,e),this.uniforms[r].push(a),this.registerDeclaration(a),s.uniform=a}return a}getVarFromNode(e,n=null,r=e.getNodeType(this),i=this.shaderStage,s=!1){const a=this.getDataFromNode(e,i),o=this.getSubBuildProperty("variable",a.subBuilds);let l=a[o];if(l===void 0){const c=s?"_const":"_var",u=this.vars[i]||(this.vars[i]=[]),f=this.vars[c]||(this.vars[c]=0);n===null&&(n=(s?"nodeConst":"nodeVar")+f,this.vars[c]++),o!=="variable"&&(n=this.getSubBuildProperty(n,a.subBuilds));const p=e.getArrayCount(this);l=new fte(n,r,s,p),s||u.push(l),this.registerDeclaration(l),a[o]=l}return l}isDeterministic(e){if(e.isMathNode)return this.isDeterministic(e.aNode)&&(e.bNode?this.isDeterministic(e.bNode):!0)&&(e.cNode?this.isDeterministic(e.cNode):!0);if(e.isOperatorNode)return this.isDeterministic(e.aNode)&&(e.bNode?this.isDeterministic(e.bNode):!0);if(e.isArrayNode){if(e.values!==null){for(const n of e.values)if(!this.isDeterministic(n))return!1}return!0}else if(e.isConstNode)return!0;return!1}getVaryingFromNode(e,n=null,r=e.getNodeType(this),i=null,s=null){const a=this.getDataFromNode(e,"any"),o=this.getSubBuildProperty("varying",a.subBuilds);let l=a[o];if(l===void 0){const c=this.varyings,u=c.length;n===null&&(n="nodeVarying"+u),o!=="varying"&&(n=this.getSubBuildProperty(n,a.subBuilds)),l=new q4e(n,r,i,s),c.push(l),this.registerDeclaration(l),a[o]=l}return l}registerDeclaration(e){const n=this.shaderStage,r=this.declarations[n]||(this.declarations[n]={}),i=this.getPropertyName(e);let s=1,a=i;for(;r[a]!==void 0;)a=i+"_"+s++;s>1&&(e.name=a,ct(`TSL: Declaration name '${i}' of '${e.type}' already in use. Renamed to '${a}'.`)),r[a]=e}getCodeFromNode(e,n,r=this.shaderStage){const i=this.getDataFromNode(e);let s=i.code;if(s===void 0){const a=this.codes[r]||(this.codes[r]=[]),o=a.length;s=new X4e("nodeCode"+o,n),a.push(s),i.code=s}return s}addFlowCodeHierarchy(e,n){const{flowCodes:r,flowCodeBlock:i}=this.getDataFromNode(e);let s=!0,a=n;for(;a;){if(i.get(a)===!0){s=!1;break}a=this.getDataFromNode(a).parentNodeBlock}if(s)for(const o of r)this.addLineFlowCode(o)}addLineFlowCodeBlock(e,n,r){const i=this.getDataFromNode(e),s=i.flowCodes||(i.flowCodes=[]),a=i.flowCodeBlock||(i.flowCodeBlock=new WeakMap);s.push(n),a.set(r,!0)}addLineFlowCode(e,n=null){return e===""?this:(n!==null&&this.context.nodeBlock&&this.addLineFlowCodeBlock(n,e,this.context.nodeBlock),e=this.tab+e,/;\s*$/.test(e)||(e=e+`;
`),this.flow.code+=e,this)}addFlowCode(e){return this.flow.code+=e,this}addFlowTab(){return this.tab+="	",this}removeFlowTab(){return this.tab=this.tab.slice(0,-1),this}getFlowData(e){return this.flowsData.get(e)}flowNode(e){const n=e.getNodeType(this),r=this.flowChildNode(e,n);return this.flowsData.set(e,r),r}addInclude(e){this.currentFunctionNode!==null&&this.currentFunctionNode.includes.push(e)}buildFunctionNode(e){const n=new s4e,r=this.currentFunctionNode;return this.currentFunctionNode=n,n.code=this.buildFunctionCode(e),this.currentFunctionNode=r,n}flowShaderNode(e){const n=e.layout,r={[Symbol.iterator](){let a=0;const o=Object.values(this);return{next:()=>({value:o[a],done:a++>=o.length})}}};for(const a of n.inputs)r[a.name]=new Fje(a.type,a.name);e.layout=null;const i=e.call(r),s=this.flowStagesNode(i,n.type);return e.layout=n,s}flowBuildStage(e,n,r=null){const i=this.getBuildStage();this.setBuildStage(n);const s=e.build(this,r);return this.setBuildStage(i),s}flowStagesNode(e,n=null){const r=this.flow,i=this.vars,s=this.declarations,a=this.cache,o=this.buildStage,l=this.stack,c={code:""};this.flow=c,this.vars={},this.declarations={},this.cache=new KP,this.stack=HP();for(const u of WG)this.setBuildStage(u),c.result=e.build(this,n);return c.vars=this.getVars(this.shaderStage),this.flow=r,this.vars=i,this.declarations=s,this.cache=a,this.stack=l,this.setBuildStage(o),c}getFunctionOperator(){return null}buildFunctionCode(){ct("Abstract function.")}flowChildNode(e,n=null){const r=this.flow,i={code:""};return this.flow=i,i.result=e.build(this,n),this.flow=r,i}flowNodeFromShaderStage(e,n,r=null,i=null){const s=this.tab,a=this.cache,o=this.shaderStage,l=this.context;this.setShaderStage(e);const c={...this.context};delete c.nodeBlock,this.cache=this.globalCache,this.tab="	",this.context=c;let u=null;if(this.buildStage==="generate"){const f=this.flowChildNode(n,r);i!==null&&(f.code+=`${this.tab+i} = ${f.result};
`),this.flowCode[e]=this.flowCode[e]+f.code,u=f}else u=n.build(this);return this.setShaderStage(o),this.cache=a,this.tab=s,this.context=l,u}getAttributesArray(){return this.attributes.concat(this.bufferAttributes)}getAttributes(){ct("Abstract function.")}getVaryings(){ct("Abstract function.")}getVar(e,n,r=null){return`${r!==null?this.generateArrayDeclaration(e,r):this.getType(e)} ${n}`}getVars(e){let n="";const r=this.vars[e];if(r!==void 0)for(const i of r)n+=`${this.getVar(i.type,i.name)}; `;return n}getUniforms(){ct("Abstract function.")}getCodes(e){const n=this.codes[e];let r="";if(n!==void 0)for(const i of n)r+=i.code+`
`;return r}getHash(){return this.vertexShader+this.fragmentShader+this.computeShader}setShaderStage(e){this.shaderStage=e}getShaderStage(){return this.shaderStage}setBuildStage(e){this.buildStage=e}getBuildStage(){return this.buildStage}buildCode(){ct("Abstract function.")}get subBuild(){return this.subBuildLayers[this.subBuildLayers.length-1]||null}addSubBuild(e){this.subBuildLayers.push(e)}removeSubBuild(){return this.subBuildLayers.pop()}getClosestSubBuild(e){let n;if(e&&e.isNode?e.isShaderCallNodeInternal?n=e.shaderNode.subBuilds:e.isStackNode?n=[e.subBuild]:n=this.getDataFromNode(e,"any").subBuilds:e instanceof Set?n=[...e]:n=e,!n)return null;const r=this.subBuildLayers;for(let i=n.length-1;i>=0;i--){const s=n[i];if(r.includes(s))return s}return null}getSubBuildOutput(e){return this.getSubBuildProperty("outputNode",e)}getSubBuildProperty(e="",n=null){let r;n!==null?r=this.getClosestSubBuild(n):r=this.subBuildFn;let i;return r?i=e?r+"_"+e:r:i=e,i}build(){const{object:e,material:n,renderer:r}=this;if(n!==null){let i=r.library.fromMaterial(n);i===null&&(xt(`NodeMaterial: Material "${n.type}" is not compatible.`),i=new Ri),i.build(this)}else this.addFlow("compute",e);for(const i of WG){this.setBuildStage(i),this.context.vertex&&this.context.vertex.isNode&&this.flowNodeFromShaderStage("vertex",this.context.vertex);for(const s of qG){this.setShaderStage(s);const a=this.flowNodes[s];for(const o of a)i==="generate"?this.flowNode(o):o.build(this)}}return this.setBuildStage(null),this.setShaderStage(null),this.buildCode(),this.buildUpdateNodes(),this}getNodeUniform(e,n){if(n==="float"||n==="int"||n==="uint")return new sze(e);if(n==="vec2"||n==="ivec2"||n==="uvec2")return new aze(e);if(n==="vec3"||n==="ivec3"||n==="uvec3")return new oze(e);if(n==="vec4"||n==="ivec4"||n==="uvec4")return new lze(e);if(n==="color")return new cze(e);if(n==="mat2")return new uze(e);if(n==="mat3")return new dze(e);if(n==="mat4")return new fze(e);throw new Error(`Uniform "${n}" not declared.`)}format(e,n,r){if(n=this.getVectorType(n),r=this.getVectorType(r),n===r||r===null||this.isReference(r))return e;const i=this.getTypeLength(n),s=this.getTypeLength(r);return i===16&&s===9?`${this.getType(r)}( ${e}[ 0 ].xyz, ${e}[ 1 ].xyz, ${e}[ 2 ].xyz )`:i===9&&s===4?`${this.getType(r)}( ${e}[ 0 ].xy, ${e}[ 1 ].xy )`:i>4||s>4||s===0?e:i===s?`${this.getType(r)}( ${e} )`:i>s?(e=r==="bool"?`all( ${e} )`:`${e}.${"xyz".slice(0,s)}`,this.format(e,this.getTypeFromLength(s,this.getComponentType(n)),r)):s===4&&i>1?`${this.getType(r)}( ${this.format(e,n,"vec3")}, 1.0 )`:i===2?`${this.getType(r)}( ${this.format(e,n,"vec2")}, 0.0 )`:(i===1&&s>1&&n!==this.getComponentType(r)&&(e=`${this.getType(this.getComponentType(r))}( ${e} )`),`${this.getType(r)}( ${e} )`)}getSignature(){return`// Three.js r${Vp} - Node System
`}}class ZV{constructor(){this.time=0,this.deltaTime=0,this.frameId=0,this.renderId=0,this.updateMap=new WeakMap,this.updateBeforeMap=new WeakMap,this.updateAfterMap=new WeakMap,this.renderer=null,this.material=null,this.camera=null,this.object=null,this.scene=null}_getMaps(e,n){let r=e.get(n);return r===void 0&&(r={renderId:0,frameId:0},e.set(n,r)),r}updateBeforeNode(e){const n=e.getUpdateBeforeType(),r=e.updateReference(this);if(n===yn.FRAME){const i=this._getMaps(this.updateBeforeMap,r);i.frameId!==this.frameId&&e.updateBefore(this)!==!1&&(i.frameId=this.frameId)}else if(n===yn.RENDER){const i=this._getMaps(this.updateBeforeMap,r);i.renderId!==this.renderId&&e.updateBefore(this)!==!1&&(i.renderId=this.renderId)}else n===yn.OBJECT&&e.updateBefore(this)}updateAfterNode(e){const n=e.getUpdateAfterType(),r=e.updateReference(this);if(n===yn.FRAME){const i=this._getMaps(this.updateAfterMap,r);i.frameId!==this.frameId&&e.updateAfter(this)!==!1&&(i.frameId=this.frameId)}else if(n===yn.RENDER){const i=this._getMaps(this.updateAfterMap,r);i.renderId!==this.renderId&&e.updateAfter(this)!==!1&&(i.renderId=this.renderId)}else n===yn.OBJECT&&e.updateAfter(this)}updateNode(e){const n=e.getUpdateType(),r=e.updateReference(this);if(n===yn.FRAME){const i=this._getMaps(this.updateMap,r);i.frameId!==this.frameId&&e.update(this)!==!1&&(i.frameId=this.frameId)}else if(n===yn.RENDER){const i=this._getMaps(this.updateMap,r);i.renderId!==this.renderId&&e.update(this)!==!1&&(i.renderId=this.renderId)}else n===yn.OBJECT&&e.update(this)}update(){this.frameId++,this.lastTime===void 0&&(this.lastTime=performance.now()),this.deltaTime=(performance.now()-this.lastTime)/1e3,this.lastTime=performance.now(),this.time+=this.deltaTime}}class mF{constructor(e,n,r=null,i="",s=!1){this.type=e,this.name=n,this.count=r,this.qualifier=i,this.isConst=s}}mF.isNodeFunctionInput=!0;class mze extends Zp{static get type(){return"DirectionalLightNode"}constructor(e=null){super(e)}setupDirect(){const e=this.colorNode;return{lightDirection:ote(this.light),lightColor:e}}}const ZP=new In,kw=new In;let dv=null;class gze extends Zp{static get type(){return"RectAreaLightNode"}constructor(e=null){super(e),this.halfHeight=nn(new ae).setGroup(en),this.halfWidth=nn(new ae).setGroup(en),this.updateType=yn.RENDER}update(e){super.update(e);const{light:n}=this,r=e.camera.matrixWorldInverse;kw.identity(),ZP.copy(n.matrixWorld),ZP.premultiply(r),kw.extractRotation(ZP),this.halfWidth.value.set(n.width*.5,0,0),this.halfHeight.value.set(0,n.height*.5,0),this.halfWidth.value.applyMatrix4(kw),this.halfHeight.value.applyMatrix4(kw)}setupDirectRectArea(e){let n,r;e.isAvailable("float32Filterable")?(n=Ln(dv.LTC_FLOAT_1),r=Ln(dv.LTC_FLOAT_2)):(n=Ln(dv.LTC_HALF_1),r=Ln(dv.LTC_HALF_2));const{colorNode:i,light:s}=this,a=ate(s);return{lightColor:i,lightPosition:a,halfWidth:this.halfWidth,halfHeight:this.halfHeight,ltc_1:n,ltc_2:r}}static setLTC(e){dv=e}}class gF extends Zp{static get type(){return"SpotLightNode"}constructor(e=null){super(e),this.coneCosNode=nn(0).setGroup(en),this.penumbraCosNode=nn(0).setGroup(en),this.cutoffDistanceNode=nn(0).setGroup(en),this.decayExponentNode=nn(0).setGroup(en),this.colorNode=nn(this.color).setGroup(en)}update(e){super.update(e);const{light:n}=this;this.coneCosNode.value=Math.cos(n.angle),this.penumbraCosNode.value=Math.cos(n.angle*(1-n.penumbra)),this.cutoffDistanceNode.value=n.distance,this.decayExponentNode.value=n.decay}getSpotAttenuation(e,n){const{coneCosNode:r,penumbraCosNode:i}=this;return md(r,i,n)}getLightCoord(e){const n=e.getNodeProperties(this);let r=n.projectionUV;return r===void 0&&(r=c4e(this.light,e.context.positionWorld),n.projectionUV=r),r}setupDirect(e){const{colorNode:n,cutoffDistanceNode:r,decayExponentNode:i,light:s}=this,a=this.getLightVector(e),o=a.normalize(),l=o.dot(ote(s)),c=this.getSpotAttenuation(e,l),u=a.length(),f=dte({lightDistance:u,cutoffDistance:r,decayExponent:i});let p=n.mul(c).mul(f),m,x;return s.colorNode?(x=this.getLightCoord(e),m=s.colorNode(x)):s.map&&(x=this.getLightCoord(e),m=Ln(s.map,x.xy).onRenderUpdate(()=>s.map)),m&&(p=x.mul(2).sub(1).abs().lessThan(1).all().select(p.mul(m),p)),{lightColor:p,lightDirection:o}}}class xze extends gF{static get type(){return"IESSpotLightNode"}getSpotAttenuation(e,n){const r=this.light.iesMap;let i=null;if(r&&r.isTexture===!0){const s=n.acos().mul(1/Math.PI);i=Ln(r,bt(s,0),0).r}else i=super.getSpotAttenuation(n);return i}}const yze=at(([t,e])=>{const n=t.abs().sub(e);return nd(ns(n,0)).add($0(ns(n.x,n.y),0))});class vze extends gF{static get type(){return"ProjectorLightNode"}update(e){super.update(e);const n=this.light;if(this.penumbraCosNode.value=Math.min(Math.cos(n.angle*(1-n.penumbra)),.99999),n.aspect===null){let r=1;n.map!==null&&(r=n.map.width/n.map.height),n.shadow.aspect=r}else n.shadow.aspect=n.aspect}getSpotAttenuation(e){const n=je(0),r=this.penumbraCosNode,i=pF(this.light).mul(e.context.positionWorld||H0);return Gr(i.w.greaterThan(0),()=>{const s=i.xyz.div(i.w),a=yze(s.xy.sub(bt(.5)),bt(.5)),o=jc(-1,pa(1,WJ(r)).sub(1));n.assign(tee(a.mul(-2).mul(o)))}),n}}class bze extends Zp{static get type(){return"AmbientLightNode"}constructor(e=null){super(e)}setup({context:e}){e.irradiance.addAssign(this.colorNode)}}class _ze extends Zp{static get type(){return"HemisphereLightNode"}constructor(e=null){super(e),this.lightPositionNode=ste(e),this.lightDirectionNode=this.lightPositionNode.normalize(),this.groundColorNode=nn(new Xt).setGroup(en)}update(e){const{light:n}=this;super.update(e),this.lightPositionNode.object3d=n,this.groundColorNode.value.copy(n.groundColor).multiplyScalar(n.intensity)}setup(e){const{colorNode:n,groundColorNode:r,lightDirectionNode:i}=this,a=Cx.dot(i).mul(.5).add(.5),o=zr(r,n,a);e.context.irradiance.addAssign(o)}}class Sze extends Zp{static get type(){return"LightProbeNode"}constructor(e=null){super(e);const n=[];for(let r=0;r<9;r++)n.push(new ae);this.lightProbe=Bl(n)}update(e){const{light:n}=this;super.update(e);for(let r=0;r<9;r++)this.lightProbe.array[r].copy(n.sh.coefficients[r]).multiplyScalar(n.intensity)}setup(e){const n=$4e(Cx,this.lightProbe);e.context.irradiance.addAssign(n)}}class pte{parseFunction(){ct("Abstract function.")}}class xF{constructor(e,n,r="",i=""){this.type=e,this.inputs=n,this.name=r,this.precision=i}getCode(){ct("Abstract function.")}}xF.isNodeFunction=!0;const wze=/^\s*(highp|mediump|lowp)?\s*([a-z_0-9]+)\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)/i,Tze=/[a-z_0-9]+/ig,QV="#pragma main",Eze=t=>{t=t.trim();const e=t.indexOf(QV),n=e!==-1?t.slice(e+QV.length):t,r=n.match(wze);if(r!==null&&r.length===5){const i=r[4],s=[];let a=null;for(;(a=Tze.exec(i))!==null;)s.push(a);const o=[];let l=0;for(;l<s.length;){const x=s[l][0]==="const";x===!0&&l++;let b=s[l][0];b==="in"||b==="out"||b==="inout"?l++:b="";const v=s[l++][0];let _=Number.parseInt(s[l][0]);Number.isNaN(_)===!1?l++:_=null;const E=s[l++][0];o.push(new mF(v,E,_,b,x))}const c=n.substring(r[0].length),u=r[3]!==void 0?r[3]:"",f=r[2],p=r[1]!==void 0?r[1]:"",m=e!==-1?t.slice(0,e):"";return{type:f,inputs:o,name:u,precision:p,inputsCode:i,blockCode:c,headerCode:m}}else throw new Error("FunctionNode: Function is not a GLSL code.")};class Cze extends xF{constructor(e){const{type:n,inputs:r,name:i,precision:s,inputsCode:a,blockCode:o,headerCode:l}=Eze(e);super(n,r,i,s),this.inputsCode=a,this.blockCode=o,this.headerCode=l}getCode(e=this.name){let n;const r=this.blockCode;if(r!==""){const{type:i,inputsCode:s,headerCode:a,precision:o}=this;let l=`${i} ${e} ( ${s.trim()} )`;o!==""&&(l=`${o} ${l}`),n=a+l+r}else n="";return n}}class Aze extends pte{parseFunction(e){return new Cze(e)}}const JV=new WeakMap,yc=[],uf=[];class Mze extends Jf{constructor(e,n){super(),this.renderer=e,this.backend=n,this.nodeFrame=new ZV,this.nodeBuilderCache=new Map,this.callHashCache=new Kl,this.groupsData=new Kl,this.cacheLib={}}updateGroup(e){const n=e.groupNode,r=n.name;if(r===zJ.name)return!0;if(r===en.name){const s=this.get(e),a=this.nodeFrame.renderId;return s.renderId!==a?(s.renderId=a,!0):!1}if(r===JIe.name){const s=this.get(e),a=this.nodeFrame.frameId;return s.frameId!==a?(s.frameId=a,!0):!1}yc[0]=n,yc[1]=e;let i=this.groupsData.get(yc);return i===void 0&&this.groupsData.set(yc,i={}),yc.length=0,i.version!==n.version?(i.version=n.version,!0):!1}getForRenderCacheKey(e){return e.initialCacheKey}getForRender(e){const n=this.get(e);let r=n.nodeBuilderState;if(r===void 0){const{nodeBuilderCache:i}=this,s=this.getForRenderCacheKey(e);if(r=i.get(s),r===void 0){const a=l=>{const c=this.backend.createNodeBuilder(e.object,this.renderer);return c.scene=e.scene,c.material=l,c.camera=e.camera,c.context.material=l,c.lightsNode=e.lightsNode,c.environmentNode=this.getEnvironmentNode(e.scene),c.fogNode=this.getFogNode(e.scene),c.clippingContext=e.clippingContext,this.renderer.getOutputRenderTarget()&&this.renderer.getOutputRenderTarget().multiview&&c.enableMultiview(),c};let o=a(e.material);try{o.build()}catch(l){o=a(new Ri),o.build(),xt("TSL: "+l)}r=this._createNodeBuilderState(o),i.set(s,r)}r.usedTimes++,n.nodeBuilderState=r}return r}delete(e){if(e.isRenderObject){const n=this.get(e).nodeBuilderState;n.usedTimes--,n.usedTimes===0&&this.nodeBuilderCache.delete(this.getForRenderCacheKey(e))}return super.delete(e)}getForCompute(e){const n=this.get(e);let r=n.nodeBuilderState;if(r===void 0){const i=this.backend.createNodeBuilder(e,this.renderer);i.build(),r=this._createNodeBuilderState(i),n.nodeBuilderState=r}return r}_createNodeBuilderState(e){return new H4e(e.vertexShader,e.fragmentShader,e.computeShader,e.getAttributesArray(),e.getBindings(),e.updateNodes,e.updateBeforeNodes,e.updateAfterNodes,e.observer,e.transforms)}getEnvironmentNode(e){this.updateEnvironment(e);let n=null;if(e.environmentNode&&e.environmentNode.isNode)n=e.environmentNode;else{const r=this.get(e);r.environmentNode&&(n=r.environmentNode)}return n}getBackgroundNode(e){this.updateBackground(e);let n=null;if(e.backgroundNode&&e.backgroundNode.isNode)n=e.backgroundNode;else{const r=this.get(e);r.backgroundNode&&(n=r.backgroundNode)}return n}getFogNode(e){return this.updateFog(e),e.fogNode||this.get(e).fogNode||null}getCacheKey(e,n){yc[0]=e,yc[1]=n;const r=this.renderer.info.calls,i=this.callHashCache.get(yc)||{};if(i.callId!==r){const s=this.getEnvironmentNode(e),a=this.getFogNode(e);n&&uf.push(n.getCacheKey(!0)),s&&uf.push(s.getCacheKey()),a&&uf.push(a.getCacheKey()),uf.push(this.renderer.getOutputRenderTarget()&&this.renderer.getOutputRenderTarget().multiview?1:0),uf.push(this.renderer.shadowMap.enabled?1:0),uf.push(this.renderer.shadowMap.type),i.callId=r,i.cacheKey=F_(uf),this.callHashCache.set(yc,i),uf.length=0}return yc.length=0,i.cacheKey}get isToneMappingState(){return!this.renderer.getRenderTarget()}updateBackground(e){const n=this.get(e),r=e.background;if(r){const i=e.backgroundBlurriness===0&&n.backgroundBlurriness>0||e.backgroundBlurriness>0&&n.backgroundBlurriness===0;if(n.background!==r||i){const s=this.getCacheNode("background",r,()=>{if(r.isCubeTexture===!0||r.mapping===d0||r.mapping===f0||r.mapping===Ap){if(e.backgroundBlurriness>0||r.mapping===Ap)return Zee(r);{let a;return r.isCubeTexture===!0?a=Vb(r):a=Ln(r),$ee(a)}}else{if(r.isTexture===!0)return Ln(r,qg.flipY()).setUpdateMatrix(!0);r.isColor!==!0&&xt("WebGPUNodes: Unsupported background configuration.",r)}},i);n.backgroundNode=s,n.background=r,n.backgroundBlurriness=e.backgroundBlurriness}}else n.backgroundNode&&(delete n.backgroundNode,delete n.background)}getCacheNode(e,n,r,i=!1){const s=this.cacheLib[e]||(this.cacheLib[e]=new WeakMap);let a=s.get(n);return(a===void 0||i)&&(a=r(),s.set(n,a)),a}updateFog(e){const n=this.get(e),r=e.fog;if(r){if(n.fog!==r){const i=this.getCacheNode("fog",r,()=>{if(r.isFogExp2){const s=br("color","color",r).setGroup(en),a=br("density","float",r).setGroup(en);return HV(s,o4e(a))}else if(r.isFog){const s=br("color","color",r).setGroup(en),a=br("near","float",r).setGroup(en),o=br("far","float",r).setGroup(en);return HV(s,a4e(a,o))}else xt("Renderer: Unsupported fog configuration.",r)});n.fogNode=i,n.fog=r}}else delete n.fogNode,delete n.fog}updateEnvironment(e){const n=this.get(e),r=e.environment;if(r){if(n.environment!==r){const i=this.getCacheNode("environment",r,()=>{if(r.isCubeTexture===!0)return Vb(r);if(r.isTexture===!0)return Ln(r);xt("Nodes: Unsupported environment configuration.",r)});n.environmentNode=i,n.environment=r}}else n.environmentNode&&(delete n.environmentNode,delete n.environment)}getNodeFrame(e=this.renderer,n=null,r=null,i=null,s=null){const a=this.nodeFrame;return a.renderer=e,a.scene=n,a.object=r,a.camera=i,a.material=s,a}getNodeFrameForRender(e){return this.getNodeFrame(e.renderer,e.scene,e.object,e.camera,e.material)}getOutputCacheKey(){const e=this.renderer;return e.toneMapping+","+e.currentColorSpace+","+e.xr.isPresenting}hasOutputChange(e){return JV.get(e)!==this.getOutputCacheKey()}getOutputNode(e){const n=this.renderer,r=this.getOutputCacheKey(),i=e.isArrayTexture?qje(e,Qe(qg,z_("gl_ViewID_OVR"))).renderOutput(n.toneMapping,n.currentColorSpace):Ln(e,qg).renderOutput(n.toneMapping,n.currentColorSpace);return JV.set(e,r),i}updateBefore(e){const n=e.getNodeBuilderState();for(const r of n.updateBeforeNodes)this.getNodeFrameForRender(e).updateBeforeNode(r)}updateAfter(e){const n=e.getNodeBuilderState();for(const r of n.updateAfterNodes)this.getNodeFrameForRender(e).updateAfterNode(r)}updateForCompute(e){const n=this.getNodeFrame(),r=this.getForCompute(e);for(const i of r.updateNodes)n.updateNode(i)}updateForRender(e){const n=this.getNodeFrameForRender(e),r=e.getNodeBuilderState();for(const i of r.updateNodes)n.updateNode(i)}needsRefresh(e){const n=this.getNodeFrameForRender(e);return e.getMonitor().needsRefresh(e,n)}dispose(){super.dispose(),this.nodeFrame=new ZV,this.nodeBuilderCache=new Map,this.cacheLib={}}}const QP=new Ll;class P2{constructor(e=null){this.version=0,this.clipIntersection=null,this.cacheKey="",this.shadowPass=!1,this.viewNormalMatrix=new pn,this.clippingGroupContexts=new WeakMap,this.intersectionPlanes=[],this.unionPlanes=[],this.parentVersion=null,e!==null&&(this.viewNormalMatrix=e.viewNormalMatrix,this.clippingGroupContexts=e.clippingGroupContexts,this.shadowPass=e.shadowPass,this.viewMatrix=e.viewMatrix)}projectPlanes(e,n,r){const i=e.length;for(let s=0;s<i;s++){QP.copy(e[s]).applyMatrix4(this.viewMatrix,this.viewNormalMatrix);const a=n[r+s],o=QP.normal;a.x=-o.x,a.y=-o.y,a.z=-o.z,a.w=QP.constant}}updateGlobal(e,n){this.shadowPass=e.overrideMaterial!==null&&e.overrideMaterial.isShadowPassMaterial,this.viewMatrix=n.matrixWorldInverse,this.viewNormalMatrix.getNormalMatrix(this.viewMatrix)}update(e,n){let r=!1;e.version!==this.parentVersion&&(this.intersectionPlanes=Array.from(e.intersectionPlanes),this.unionPlanes=Array.from(e.unionPlanes),this.parentVersion=e.version),this.clipIntersection!==n.clipIntersection&&(this.clipIntersection=n.clipIntersection,this.clipIntersection?this.unionPlanes.length=e.unionPlanes.length:this.intersectionPlanes.length=e.intersectionPlanes.length);const i=n.clippingPlanes,s=i.length;let a,o;if(this.clipIntersection?(a=this.intersectionPlanes,o=e.intersectionPlanes.length):(a=this.unionPlanes,o=e.unionPlanes.length),a.length!==o+s){a.length=o+s;for(let l=0;l<s;l++)a[o+l]=new an;r=!0}this.projectPlanes(i,a,o),r&&(this.version++,this.cacheKey=`${this.intersectionPlanes.length}:${this.unionPlanes.length}`)}getGroupContext(e){if(this.shadowPass&&!e.clipShadows)return this;let n=this.clippingGroupContexts.get(e);return n===void 0&&(n=new P2(this),this.clippingGroupContexts.set(e,n)),n.update(this,e),n}get unionClippingCount(){return this.unionPlanes.length}}class Rze{constructor(e,n){this.bundleGroup=e,this.camera=n}}const fv=[];class Pze{constructor(){this.bundles=new Kl}get(e,n){const r=this.bundles;fv[0]=e,fv[1]=n;let i=r.get(fv);return i===void 0&&(i=new Rze(e,n),r.set(fv,i)),fv.length=0,i}dispose(){this.bundles=new Kl}}class mte{constructor(){this.lightNodes=new WeakMap,this.materialNodes=new Map,this.toneMappingNodes=new Map}fromMaterial(e){if(e.isNodeMaterial)return e;let n=null;const r=this.getMaterialNodeClass(e.type);if(r!==null){n=new r;for(const i in e)n[i]=e[i]}return n}addToneMapping(e,n){this.addType(e,n,this.toneMappingNodes)}getToneMappingFunction(e){return this.toneMappingNodes.get(e)||null}getMaterialNodeClass(e){return this.materialNodes.get(e)||null}addMaterial(e,n){this.addType(e,n,this.materialNodes)}getLightNodeClass(e){return this.lightNodes.get(e)||null}addLight(e,n){this.addClass(e,n,this.lightNodes)}addType(e,n,r){if(r.has(n)){ct(`Redefinition of node ${n}`);return}if(typeof e!="function")throw new Error(`Node class ${e.name} is not a class.`);if(typeof n=="function"||typeof n=="object")throw new Error(`Base class ${n} is not a class.`);r.set(n,e)}addClass(e,n,r){if(r.has(n)){ct(`Redefinition of node ${n.name}`);return}if(typeof e!="function")throw new Error(`Node class ${e.name} is not a class.`);if(typeof n!="function")throw new Error(`Base class ${n.name} is not a class.`);r.set(n,e)}}const Nze=new lte,hv=[];class Oze extends Kl{constructor(){super()}createNode(e=[]){return new lte().setLights(e)}getNode(e,n){if(e.isQuadMesh)return Nze;hv[0]=e,hv[1]=n;let r=this.get(hv);return r===void 0&&(r=this.createNode(),this.set(hv,r)),hv.length=0,r}}class Nv extends Hp{constructor(e=1,n=1,r={}){super(e,n,r),this.isXRRenderTarget=!0,this._hasExternalTextures=!1,this._autoAllocateDepthBuffer=!0,this._isOpaqueFramebuffer=!1}copy(e){return super.copy(e),this._hasExternalTextures=e._hasExternalTextures,this._autoAllocateDepthBuffer=e._autoAllocateDepthBuffer,this._isOpaqueFramebuffer=e._isOpaqueFramebuffer,this}}const eH=new ae,tH=new ae;class Dze extends Yc{constructor(e,n=!1){super(),this.enabled=!1,this.isPresenting=!1,this.cameraAutoUpdate=!0,this._renderer=e,this._cameraL=new ys,this._cameraL.viewport=new an,this._cameraR=new ys,this._cameraR.viewport=new an,this._cameras=[this._cameraL,this._cameraR],this._cameraXR=new sQ,this._currentDepthNear=null,this._currentDepthFar=null,this._controllers=[],this._controllerInputSources=[],this._xrRenderTarget=null,this._layers=[],this._sessionUsesLayers=!1,this._supportsGlBinding=typeof XRWebGLBinding<"u",this._frameBufferTargets=null,this._createXRLayer=Uze.bind(this),this._gl=null,this._currentAnimationContext=null,this._currentAnimationLoop=null,this._currentPixelRatio=null,this._currentSize=new mt,this._onSessionEvent=kze.bind(this),this._onSessionEnd=Bze.bind(this),this._onInputSourcesChange=Fze.bind(this),this._onAnimationFrame=jze.bind(this),this._referenceSpace=null,this._referenceSpaceType="local-floor",this._customReferenceSpace=null,this._framebufferScaleFactor=1,this._foveation=1,this._session=null,this._glBaseLayer=null,this._glBinding=null,this._glProjLayer=null,this._xrFrame=null,this._supportsLayers=this._supportsGlBinding&&"createProjectionLayer"in XRWebGLBinding.prototype,this._useMultiviewIfPossible=n,this._useMultiview=!1}getController(e){return this._getController(e).getTargetRaySpace()}getControllerGrip(e){return this._getController(e).getGripSpace()}getHand(e){return this._getController(e).getHandSpace()}getFoveation(){if(!(this._glProjLayer===null&&this._glBaseLayer===null))return this._foveation}setFoveation(e){this._foveation=e,this._glProjLayer!==null&&(this._glProjLayer.fixedFoveation=e),this._glBaseLayer!==null&&this._glBaseLayer.fixedFoveation!==void 0&&(this._glBaseLayer.fixedFoveation=e)}getFramebufferScaleFactor(){return this._framebufferScaleFactor}setFramebufferScaleFactor(e){this._framebufferScaleFactor=e,this.isPresenting===!0&&ct("XRManager: Cannot change framebuffer scale while presenting.")}getReferenceSpaceType(){return this._referenceSpaceType}setReferenceSpaceType(e){this._referenceSpaceType=e,this.isPresenting===!0&&ct("XRManager: Cannot change reference space type while presenting.")}getReferenceSpace(){return this._customReferenceSpace||this._referenceSpace}setReferenceSpace(e){this._customReferenceSpace=e}getCamera(){return this._cameraXR}getEnvironmentBlendMode(){if(this._session!==null)return this._session.environmentBlendMode}getBinding(){return this._glBinding===null&&this._supportsGlBinding&&(this._glBinding=new XRWebGLBinding(this._session,this._gl)),this._glBinding}getFrame(){return this._xrFrame}useMultiview(){return this._useMultiview}createQuadLayer(e,n,r,i,s,a,o,l={}){const c=new N_(e,n),u=new Nv(s,a,{format:gi,type:si,depthTexture:new ol(s,a,l.stencil?Eo:Ar,void 0,void 0,void 0,void 0,void 0,void 0,l.stencil?Ao:Co),stencilBuffer:l.stencil,resolveDepthBuffer:!1,resolveStencilBuffer:!1});u._autoAllocateDepthBuffer=!0;const f=new Cc({color:16777215,side:wo});f.map=u.texture,f.map.offset.y=1,f.map.repeat.y=-1;const p=new Ji(c,f);p.position.copy(r),p.quaternion.copy(i);const m={type:"quad",width:e,height:n,translation:r,quaternion:i,pixelwidth:s,pixelheight:a,plane:p,material:f,rendercall:o,renderTarget:u};if(this._layers.push(m),this._session!==null){m.plane.material=new Cc({color:16777215,side:wo}),m.plane.material.blending=Ug,m.plane.material.blendEquation=Qs,m.plane.material.blendSrc=Ou,m.plane.material.blendDst=Ou,m.xrlayer=this._createXRLayer(m);const x=this._session.renderState.layers;x.unshift(m.xrlayer),this._session.updateRenderState({layers:x})}else u.isXRRenderTarget=!1;return p}createCylinderLayer(e,n,r,i,s,a,o,l,c={}){const u=new P_(e,e,e*n/r,64,64,!0,Math.PI-n/2,n),f=new Nv(a,o,{format:gi,type:si,depthTexture:new ol(a,o,c.stencil?Eo:Ar,void 0,void 0,void 0,void 0,void 0,void 0,c.stencil?Ao:Co),stencilBuffer:c.stencil,resolveDepthBuffer:!1,resolveStencilBuffer:!1});f._autoAllocateDepthBuffer=!0;const p=new Cc({color:16777215,side:Sr});p.map=f.texture,p.map.offset.y=1,p.map.repeat.y=-1;const m=new Ji(u,p);m.position.copy(i),m.quaternion.copy(s);const x={type:"cylinder",radius:e,centralAngle:n,aspectratio:r,translation:i,quaternion:s,pixelwidth:a,pixelheight:o,plane:m,material:p,rendercall:l,renderTarget:f};if(this._layers.push(x),this._session!==null){x.plane.material=new Cc({color:16777215,side:Sr}),x.plane.material.blending=Ug,x.plane.material.blendEquation=Qs,x.plane.material.blendSrc=Ou,x.plane.material.blendDst=Ou,x.xrlayer=this._createXRLayer(x);const b=this._session.renderState.layers;b.unshift(x.xrlayer),this._session.updateRenderState({layers:b})}else f.isXRRenderTarget=!1;return m}renderLayers(){const e=new ae,n=new Xl,r=this._renderer,i=this.isPresenting,s=r.getOutputRenderTarget(),a=r._frameBufferTarget;this.isPresenting=!1;const o=new mt;r.getSize(o);const l=r._quad;for(const c of this._layers)if(c.renderTarget.isXRRenderTarget=this._session!==null,c.renderTarget._hasExternalTextures=c.renderTarget.isXRRenderTarget,c.renderTarget.isXRRenderTarget&&this._sessionUsesLayers){c.xrlayer.transform=new XRRigidTransform(c.plane.getWorldPosition(e),c.plane.getWorldQuaternion(n));const u=this._glBinding.getSubImage(c.xrlayer,this._xrFrame);r.backend.setXRRenderTargetTextures(c.renderTarget,u.colorTexture,void 0),r._setXRLayerSize(c.renderTarget.width,c.renderTarget.height),r.setOutputRenderTarget(c.renderTarget),r.setRenderTarget(null),r._frameBufferTarget=null,this._frameBufferTargets||(this._frameBufferTargets=new WeakMap);const{frameBufferTarget:f,quad:p}=this._frameBufferTargets.get(c.renderTarget)||{frameBufferTarget:null,quad:null};f?(r._frameBufferTarget=f,r._quad=p):(r._quad=new hF(new Ri),this._frameBufferTargets.set(c.renderTarget,{frameBufferTarget:r._getFrameBufferTarget(),quad:r._quad})),c.rendercall(),r._frameBufferTarget=null}else r.setRenderTarget(c.renderTarget),c.rendercall();r.setRenderTarget(null),r.setOutputRenderTarget(s),r._frameBufferTarget=a,r._setXRLayerSize(o.x,o.y),r._quad=l,this.isPresenting=i}getSession(){return this._session}async setSession(e){const n=this._renderer,r=n.backend;this._gl=n.getContext();const i=this._gl,s=i.getContextAttributes();if(this._session=e,e!==null){if(r.isWebGPUBackend===!0)throw new Error('THREE.XRManager: XR is currently not supported with a WebGPU backend. Use WebGL by passing "{ forceWebGL: true }" to the constructor of the renderer.');if(e.addEventListener("select",this._onSessionEvent),e.addEventListener("selectstart",this._onSessionEvent),e.addEventListener("selectend",this._onSessionEvent),e.addEventListener("squeeze",this._onSessionEvent),e.addEventListener("squeezestart",this._onSessionEvent),e.addEventListener("squeezeend",this._onSessionEvent),e.addEventListener("end",this._onSessionEnd),e.addEventListener("inputsourceschange",this._onInputSourcesChange),await r.makeXRCompatible(),this._currentPixelRatio=n.getPixelRatio(),n.getSize(this._currentSize),this._currentAnimationContext=n._animation.getContext(),this._currentAnimationLoop=n._animation.getAnimationLoop(),n._animation.stop(),this._supportsLayers===!0){let a=null,o=null,l=null;n.depth&&(l=n.stencil?i.DEPTH24_STENCIL8:i.DEPTH_COMPONENT24,a=n.stencil?Ao:Co,o=n.stencil?Eo:Ar);const c={colorFormat:i.RGBA8,depthFormat:l,scaleFactor:this._framebufferScaleFactor,clearOnAccess:!1};this._useMultiviewIfPossible&&n.hasFeature("OVR_multiview2")&&(c.textureType="texture-array",this._useMultiview=!0),this._glBinding=this.getBinding();const u=this._glBinding.createProjectionLayer(c),f=[u];this._glProjLayer=u,n.setPixelRatio(1),n._setXRLayerSize(u.textureWidth,u.textureHeight);const p=this._useMultiview?2:1,m=new ol(u.textureWidth,u.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,a,p);if(this._xrRenderTarget=new Nv(u.textureWidth,u.textureHeight,{format:gi,type:si,colorSpace:n.outputColorSpace,depthTexture:m,stencilBuffer:n.stencil,samples:s.antialias?4:0,resolveDepthBuffer:u.ignoreDepthValues===!1,resolveStencilBuffer:u.ignoreDepthValues===!1,depth:this._useMultiview?2:1,multiview:this._useMultiview}),this._xrRenderTarget._hasExternalTextures=!0,this._xrRenderTarget.depth=this._useMultiview?2:1,this._sessionUsesLayers=e.enabledFeatures.includes("layers"),this._referenceSpace=await e.requestReferenceSpace(this.getReferenceSpaceType()),this._sessionUsesLayers)for(const x of this._layers)x.plane.material=new Cc({color:16777215,side:x.type==="cylinder"?Sr:wo}),x.plane.material.blending=Ug,x.plane.material.blendEquation=Qs,x.plane.material.blendSrc=Ou,x.plane.material.blendDst=Ou,x.xrlayer=this._createXRLayer(x),f.unshift(x.xrlayer);e.updateRenderState({layers:f})}else{const a={antialias:n.currentSamples>0,alpha:!0,depth:n.depth,stencil:n.stencil,framebufferScaleFactor:this.getFramebufferScaleFactor()},o=new XRWebGLLayer(e,i,a);this._glBaseLayer=o,e.updateRenderState({baseLayer:o}),n.setPixelRatio(1),n._setXRLayerSize(o.framebufferWidth,o.framebufferHeight),this._xrRenderTarget=new Nv(o.framebufferWidth,o.framebufferHeight,{format:gi,type:si,colorSpace:n.outputColorSpace,stencilBuffer:n.stencil,resolveDepthBuffer:o.ignoreDepthValues===!1,resolveStencilBuffer:o.ignoreDepthValues===!1}),this._xrRenderTarget._isOpaqueFramebuffer=!0,this._referenceSpace=await e.requestReferenceSpace(this.getReferenceSpaceType())}this.setFoveation(this.getFoveation()),n._animation.setAnimationLoop(this._onAnimationFrame),n._animation.setContext(e),n._animation.start(),this.isPresenting=!0,this.dispatchEvent({type:"sessionstart"})}}updateCamera(e){const n=this._session;if(n===null)return;const r=e.near,i=e.far,s=this._cameraXR,a=this._cameraL,o=this._cameraR;s.near=o.near=a.near=r,s.far=o.far=a.far=i,s.isMultiViewCamera=this._useMultiview,(this._currentDepthNear!==s.near||this._currentDepthFar!==s.far)&&(n.updateRenderState({depthNear:s.near,depthFar:s.far}),this._currentDepthNear=s.near,this._currentDepthFar=s.far),s.layers.mask=e.layers.mask|6,a.layers.mask=s.layers.mask&3,o.layers.mask=s.layers.mask&5;const l=e.parent,c=s.cameras;nH(s,l);for(let u=0;u<c.length;u++)nH(c[u],l);c.length===2?Lze(s,a,o):s.projectionMatrix.copy(a.projectionMatrix),Ize(e,s,l)}_getController(e){let n=this._controllers[e];return n===void 0&&(n=new TT,this._controllers[e]=n),n}}function Lze(t,e,n){eH.setFromMatrixPosition(e.matrixWorld),tH.setFromMatrixPosition(n.matrixWorld);const r=eH.distanceTo(tH),i=e.projectionMatrix.elements,s=n.projectionMatrix.elements,a=i[14]/(i[10]-1),o=i[14]/(i[10]+1),l=(i[9]+1)/i[5],c=(i[9]-1)/i[5],u=(i[8]-1)/i[0],f=(s[8]+1)/s[0],p=a*u,m=a*f,x=r/(-u+f),b=x*-u;if(e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(b),t.translateZ(x),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert(),i[10]===-1)t.projectionMatrix.copy(e.projectionMatrix),t.projectionMatrixInverse.copy(e.projectionMatrixInverse);else{const v=a+x,_=o+x,E=p-b,T=m+(r-b),A=l*o/_*v,C=c*o/_*v;t.projectionMatrix.makePerspective(E,T,A,C,v,_),t.projectionMatrixInverse.copy(t.projectionMatrix).invert()}}function nH(t,e){e===null?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}function Ize(t,e,n){n===null?t.matrix.copy(e.matrixWorld):(t.matrix.copy(n.matrixWorld),t.matrix.invert(),t.matrix.multiply(e.matrixWorld)),t.matrix.decompose(t.position,t.quaternion,t.scale),t.updateMatrixWorld(!0),t.projectionMatrix.copy(e.projectionMatrix),t.projectionMatrixInverse.copy(e.projectionMatrixInverse),t.isPerspectiveCamera&&(t.fov=Np*2*Math.atan(1/t.projectionMatrix.elements[5]),t.zoom=1)}function kze(t){const e=this._controllerInputSources.indexOf(t.inputSource);if(e===-1)return;const n=this._controllers[e];if(n!==void 0){const r=this.getReferenceSpace();n.update(t.inputSource,t.frame,r),n.dispatchEvent({type:t.type,data:t.inputSource})}}function Bze(){const t=this._session,e=this._renderer;t.removeEventListener("select",this._onSessionEvent),t.removeEventListener("selectstart",this._onSessionEvent),t.removeEventListener("selectend",this._onSessionEvent),t.removeEventListener("squeeze",this._onSessionEvent),t.removeEventListener("squeezestart",this._onSessionEvent),t.removeEventListener("squeezeend",this._onSessionEvent),t.removeEventListener("end",this._onSessionEnd),t.removeEventListener("inputsourceschange",this._onInputSourcesChange);for(let n=0;n<this._controllers.length;n++){const r=this._controllerInputSources[n];r!==null&&(this._controllerInputSources[n]=null,this._controllers[n].disconnect(r))}if(this._currentDepthNear=null,this._currentDepthFar=null,e._resetXRState(),this._session=null,this._xrRenderTarget=null,this._glBinding=null,this._glBaseLayer=null,this._glProjLayer=null,this._sessionUsesLayers===!0)for(const n of this._layers)n.renderTarget=new Nv(n.pixelwidth,n.pixelheight,{format:gi,type:si,depthTexture:new ol(n.pixelwidth,n.pixelheight,n.stencilBuffer?Eo:Ar,void 0,void 0,void 0,void 0,void 0,void 0,n.stencilBuffer?Ao:Co),stencilBuffer:n.stencilBuffer,resolveDepthBuffer:!1,resolveStencilBuffer:!1}),n.renderTarget.isXRRenderTarget=!1,n.plane.material=n.material,n.material.map=n.renderTarget.texture,n.material.map.offset.y=1,n.material.map.repeat.y=-1,delete n.xrlayer;this.isPresenting=!1,this._useMultiview=!1,e._animation.stop(),e._animation.setAnimationLoop(this._currentAnimationLoop),e._animation.setContext(this._currentAnimationContext),e._animation.start(),e.setPixelRatio(this._currentPixelRatio),e.setSize(this._currentSize.width,this._currentSize.height,!1),this.dispatchEvent({type:"sessionend"})}function Fze(t){const e=this._controllers,n=this._controllerInputSources;for(let r=0;r<t.removed.length;r++){const i=t.removed[r],s=n.indexOf(i);s>=0&&(n[s]=null,e[s].disconnect(i))}for(let r=0;r<t.added.length;r++){const i=t.added[r];let s=n.indexOf(i);if(s===-1){for(let o=0;o<e.length;o++)if(o>=n.length){n.push(i),s=o;break}else if(n[o]===null){n[o]=i,s=o;break}if(s===-1)break}const a=e[s];a&&a.connect(i)}}function Uze(t){return t.type==="quad"?this._glBinding.createQuadLayer({transform:new XRRigidTransform(t.translation,t.quaternion),width:t.width/2,height:t.height/2,space:this._referenceSpace,viewPixelWidth:t.pixelwidth,viewPixelHeight:t.pixelheight,clearOnAccess:!1}):this._glBinding.createCylinderLayer({transform:new XRRigidTransform(t.translation,t.quaternion),radius:t.radius,centralAngle:t.centralAngle,aspectRatio:t.aspectRatio,space:this._referenceSpace,viewPixelWidth:t.pixelwidth,viewPixelHeight:t.pixelheight,clearOnAccess:!1})}function jze(t,e){if(e===void 0)return;const n=this._cameraXR,r=this._renderer,i=r.backend,s=this._glBaseLayer,a=this.getReferenceSpace(),o=e.getViewerPose(a);if(this._xrFrame=e,o!==null){const l=o.views;this._glBaseLayer!==null&&i.setXRTarget(s.framebuffer);let c=!1;l.length!==n.cameras.length&&(n.cameras.length=0,c=!0);for(let u=0;u<l.length;u++){const f=l[u];let p;if(this._supportsLayers===!0){const x=this._glBinding.getViewSubImage(this._glProjLayer,f);p=x.viewport,u===0&&i.setXRRenderTargetTextures(this._xrRenderTarget,x.colorTexture,this._glProjLayer.ignoreDepthValues&&!this._useMultiview?void 0:x.depthStencilTexture)}else p=s.getViewport(f);let m=this._cameras[u];m===void 0&&(m=new ys,m.layers.enable(u),m.viewport=new an,this._cameras[u]=m),m.matrix.fromArray(f.transform.matrix),m.matrix.decompose(m.position,m.quaternion,m.scale),m.projectionMatrix.fromArray(f.projectionMatrix),m.projectionMatrixInverse.copy(m.projectionMatrix).invert(),m.viewport.set(p.x,p.y,p.width,p.height),u===0&&(n.matrix.copy(m.matrix),n.matrix.decompose(n.position,n.quaternion,n.scale)),c===!0&&n.cameras.push(m)}r.setOutputRenderTarget(this._xrRenderTarget)}for(let l=0;l<this._controllers.length;l++){const c=this._controllerInputSources[l],u=this._controllers[l];c!==null&&u!==void 0&&u.update(c,e,a)}this._currentAnimationLoop&&this._currentAnimationLoop(t,e),e.detectedPlanes&&this.dispatchEvent({type:"planesdetected",data:e}),this._xrFrame=null}class zze extends Yc{constructor(e){super(),this.domElement=e,this._pixelRatio=1,this._width=this.domElement.width,this._height=this.domElement.height,this._viewport=new an(0,0,this._width,this._height),this._scissor=new an(0,0,this._width,this._height),this._scissorTest=!1,this.colorTexture=new ZZ,this.depthTexture=new ol}getPixelRatio(){return this._pixelRatio}getDrawingBufferSize(e){return e.set(this._width*this._pixelRatio,this._height*this._pixelRatio).floor()}getSize(e){return e.set(this._width,this._height)}setPixelRatio(e=1){this._pixelRatio!==e&&(this._pixelRatio=e,this.setSize(this._width,this._height,!1))}setDrawingBufferSize(e,n,r){this.xr&&this.xr.isPresenting||(this._width=e,this._height=n,this._pixelRatio=r,this.domElement.width=Math.floor(e*r),this.domElement.height=Math.floor(n*r),this.setViewport(0,0,e,n),this._dispatchResize())}setSize(e,n,r=!0){this.xr&&this.xr.isPresenting||(this._width=e,this._height=n,this.domElement.width=Math.floor(e*this._pixelRatio),this.domElement.height=Math.floor(n*this._pixelRatio),r===!0&&(this.domElement.style.width=e+"px",this.domElement.style.height=n+"px"),this.setViewport(0,0,e,n),this._dispatchResize())}getScissor(e){const n=this._scissor;return e.x=n.x,e.y=n.y,e.width=n.width,e.height=n.height,e}setScissor(e,n,r,i){const s=this._scissor;e.isVector4?s.copy(e):s.set(e,n,r,i)}getScissorTest(){return this._scissorTest}setScissorTest(e){this._scissorTest=e}getViewport(e){return e.copy(this._viewport)}setViewport(e,n,r,i,s=0,a=1){const o=this._viewport;e.isVector4?o.copy(e):o.set(e,n,r,i),o.minDepth=s,o.maxDepth=a}_dispatchResize(){this.dispatchEvent({type:"resize"})}dispose(){this.dispatchEvent({type:"dispose"})}}const rH=new uC,fg=new mt,JP=new an,eN=new R_,tN=new cB,Bw=new In,Ru=new an;class $ze{constructor(e,n={}){this.isRenderer=!0;const{logarithmicDepthBuffer:r=!1,alpha:i=!0,depth:s=!0,stencil:a=!1,antialias:o=!1,samples:l=0,getFallback:c=null,colorBufferType:u=Ci,multiview:f=!1}=n;this.backend=e,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.alpha=i,this.logarithmicDepthBuffer=r,this.outputColorSpace=ha,this.toneMapping=ya,this.toneMappingExposure=1,this.sortObjects=!0,this.depth=s,this.stencil=a,this.info=new Sje,this.overrideNodes={modelViewMatrix:null,modelNormalViewMatrix:null},this.library=new mte,this.lighting=new Oze,this._samples=l||o===!0?4:0,this._onCanvasTargetResize=this._onCanvasTargetResize.bind(this),this._canvasTarget=new zze(e.getDomElement()),this._canvasTarget.addEventListener("resize",this._onCanvasTargetResize),this._canvasTarget.isDefaultCanvasTarget=!0,this._inspector=new cee,this._inspector.setRenderer(this),this._getFallback=c,this._attributes=null,this._geometries=null,this._nodes=null,this._animation=null,this._bindings=null,this._objects=null,this._pipelines=null,this._bundles=null,this._renderLists=null,this._renderContexts=null,this._textures=null,this._background=null,this._quad=new hF(new Ri),this._quad.name="Output Color Transform",this._quad.material.name="outputColorTransform",this._currentRenderContext=null,this._opaqueSort=null,this._transparentSort=null,this._frameBufferTarget=null;const p=this.alpha===!0?0:1;this._clearColor=new fF(0,0,0,p),this._clearDepth=1,this._clearStencil=0,this._renderTarget=null,this._activeCubeFace=0,this._activeMipmapLevel=0,this._outputRenderTarget=null,this._mrt=null,this._renderObjectFunction=null,this._currentRenderObjectFunction=null,this._currentRenderBundle=null,this._handleObjectFunction=this._renderObjectDirect,this._isDeviceLost=!1,this.onDeviceLost=this._onDeviceLost,this._colorBufferType=u,this._cacheShadowNodes=new WeakMap,this._initialized=!1,this._initPromise=null,this._compilationPromises=null,this.transparent=!0,this.opaque=!0,this.shadowMap={enabled:!1,type:Dk},this.xr=new Dze(this,f),this.debug={checkShaderErrors:!0,onShaderError:null,getShaderAsync:async(m,x,b)=>{await this.compileAsync(m,x);const v=this._renderLists.get(m,x),_=this._renderContexts.get(m,x,this._renderTarget),E=m.overrideMaterial||b.material,T=this._objects.get(b,E,m,x,v.lightsNode,_,_.clippingContext),{fragmentShader:A,vertexShader:C}=T.getNodeBuilderState();return{fragmentShader:A,vertexShader:C}}}}async init(){return this._initPromise!==null?this._initPromise:(this._initPromise=new Promise(async(e,n)=>{let r=this.backend;try{await r.init(this)}catch(i){if(this._getFallback!==null)try{this.backend=r=this._getFallback(i),await r.init(this)}catch(s){n(s);return}else{n(i);return}}this._nodes=new Mze(this,r),this._animation=new hje(this,this._nodes,this.info),this._attributes=new bje(r),this._background=new G4e(this,this._nodes),this._geometries=new _je(this._attributes,this.info),this._textures=new Bje(this,r,this.info),this._pipelines=new Cje(r,this._nodes),this._bindings=new Aje(r,this._nodes,this._textures,this._attributes,this._pipelines,this.info),this._objects=new xje(this,this._nodes,this._geometries,this._pipelines,this._bindings,this.info),this._renderLists=new Pje(this.lighting),this._bundles=new Pze,this._renderContexts=new Ije,this._animation.start(),this._initialized=!0,this._inspector.init(),e(this)}),this._initPromise)}get domElement(){return this._canvasTarget.domElement}get coordinateSystem(){return this.backend.coordinateSystem}async compileAsync(e,n,r=null){if(this._isDeviceLost===!0)return;this._initialized===!1&&await this.init();const i=this._nodes.nodeFrame,s=i.renderId,a=this._currentRenderContext,o=this._currentRenderObjectFunction,l=this._compilationPromises,c=e.isScene===!0?e:rH;r===null&&(r=e);const u=this._renderTarget,f=this._renderContexts.get(r,n,u),p=this._activeMipmapLevel,m=[];this._currentRenderContext=f,this._currentRenderObjectFunction=this.renderObject,this._handleObjectFunction=this._createObjectPipeline,this._compilationPromises=m,i.renderId++,i.update(),f.depth=this.depth,f.stencil=this.stencil,f.clippingContext||(f.clippingContext=new P2),f.clippingContext.updateGlobal(c,n),c.onBeforeRender(this,e,n,u);const x=this._renderLists.get(e,n);if(x.begin(),this._projectObject(e,n,0,x,f.clippingContext),r!==e&&r.traverseVisible(function(T){T.isLight&&T.layers.test(n.layers)&&x.pushLight(T)}),x.finish(),u!==null){this._textures.updateRenderTarget(u,p);const T=this._textures.get(u);f.textures=T.textures,f.depthTexture=T.depthTexture}else f.textures=null,f.depthTexture=null;this._background.update(c,x,f);const b=x.opaque,v=x.transparent,_=x.transparentDoublePass,E=x.lightsNode;this.opaque===!0&&b.length>0&&this._renderObjects(b,n,c,E),this.transparent===!0&&v.length>0&&this._renderTransparents(v,_,n,c,E),i.renderId=s,this._currentRenderContext=a,this._currentRenderObjectFunction=o,this._compilationPromises=l,this._handleObjectFunction=this._renderObjectDirect,await Promise.all(m)}async renderAsync(e,n){jr('Renderer: "renderAsync()" has been deprecated. Use "render()" and "await renderer.init();" when creating the renderer.'),await this.init(),this.render(e,n)}async waitForGPU(){xt("Renderer: waitForGPU() has been removed. Read https://github.com/mrdoob/three.js/issues/32012 for more information.")}set inspector(e){this._inspector!==null&&this._inspector.setRenderer(null),this._inspector=e,this._inspector.setRenderer(this)}get inspector(){return this._inspector}set highPrecision(e){e===!0?(this.overrideNodes.modelViewMatrix=sV,this.overrideNodes.modelNormalViewMatrix=aV):this.highPrecision&&(this.overrideNodes.modelViewMatrix=null,this.overrideNodes.modelNormalViewMatrix=null)}get highPrecision(){return this.overrideNodes.modelViewMatrix===sV&&this.overrideNodes.modelNormalViewMatrix===aV}setMRT(e){return this._mrt=e,this}getMRT(){return this._mrt}getColorBufferType(){return this._colorBufferType}_onDeviceLost(e){let n=`THREE.WebGPURenderer: ${e.api} Device Lost:

Message: ${e.message}`;e.reason&&(n+=`
Reason: ${e.reason}`),xt(n),this._isDeviceLost=!0}_renderBundle(e,n,r){const{bundleGroup:i,camera:s,renderList:a}=e,o=this._currentRenderContext,l=this._bundles.get(i,s),c=this.backend.get(l);c.renderContexts===void 0&&(c.renderContexts=new Set);const u=i.version!==c.version,f=c.renderContexts.has(o)===!1||u;if(c.renderContexts.add(o),f){this.backend.beginBundle(o),(c.renderObjects===void 0||u)&&(c.renderObjects=[]),this._currentRenderBundle=l;const{transparentDoublePass:p,transparent:m,opaque:x}=a;this.opaque===!0&&x.length>0&&this._renderObjects(x,s,n,r),this.transparent===!0&&m.length>0&&this._renderTransparents(m,p,s,n,r),this._currentRenderBundle=null,this.backend.finishBundle(o,l),c.version=i.version}else{const{renderObjects:p}=c;for(let m=0,x=p.length;m<x;m++){const b=p[m];this._nodes.needsRefresh(b)&&(this._nodes.updateBefore(b),this._nodes.updateForRender(b),this._bindings.updateForRender(b),this._nodes.updateAfter(b))}}this.backend.addBundle(o,l)}render(e,n){if(this._initialized===!1)throw new Error('Renderer: .render() called before the backend is initialized. Use "await renderer.init();" before rendering.');this._renderScene(e,n)}get initialized(){return this._initialized}_getFrameBufferTarget(){const{currentToneMapping:e,currentColorSpace:n}=this,r=e!==ya,i=n!==sn.workingColorSpace;if(r===!1&&i===!1)return null;const{width:s,height:a}=this.getDrawingBufferSize(fg),{depth:o,stencil:l}=this;let c=this._frameBufferTarget;c===null&&(c=new Hp(s,a,{depthBuffer:o,stencilBuffer:l,type:this._colorBufferType,format:gi,colorSpace:sn.workingColorSpace,generateMipmaps:!1,minFilter:ii,magFilter:ii,samples:this.samples}),c.isPostProcessingRenderTarget=!0,this._frameBufferTarget=c);const u=this.getOutputRenderTarget();c.depthBuffer=o,c.stencilBuffer=l,u!==null?c.setSize(u.width,u.height,u.depth):c.setSize(s,a,1);const f=this._canvasTarget;return c.viewport.copy(f._viewport),c.scissor.copy(f._scissor),c.viewport.multiplyScalar(f._pixelRatio),c.scissor.multiplyScalar(f._pixelRatio),c.scissorTest=f._scissorTest,c.multiview=u!==null?u.multiview:!1,c.resolveDepthBuffer=u!==null?u.resolveDepthBuffer:!0,c._autoAllocateDepthBuffer=u!==null?u._autoAllocateDepthBuffer:!1,c}_renderScene(e,n,r=!0){if(this._isDeviceLost===!0)return;const i=r?this._getFrameBufferTarget():null,s=this._nodes.nodeFrame,a=s.renderId,o=this._currentRenderContext,l=this._currentRenderObjectFunction,c=e.isScene===!0?e:rH,u=this._renderTarget||this._outputRenderTarget,f=this._activeCubeFace,p=this._activeMipmapLevel;let m;i!==null?(m=i,this.setRenderTarget(m)):m=u;const x=this._renderContexts.get(e,n,m);this._currentRenderContext=x,this._currentRenderObjectFunction=this._renderObjectFunction||this.renderObject,this.info.calls++,this.info.render.calls++,this.info.render.frameCalls++,s.renderId=this.info.calls,this.backend.updateTimeStampUID(x),this.inspector.beginRender(this.backend.getTimestampUID(x),e,n,m);const b=this.coordinateSystem,v=this.xr;if(n.coordinateSystem!==b&&v.isPresenting===!1&&(n.coordinateSystem=b,n.updateProjectionMatrix(),n.isArrayCamera))for(const z of n.cameras)z.coordinateSystem=b,z.updateProjectionMatrix();e.matrixWorldAutoUpdate===!0&&e.updateMatrixWorld(),n.parent===null&&n.matrixWorldAutoUpdate===!0&&n.updateMatrixWorld(),v.enabled===!0&&v.isPresenting===!0&&(v.cameraAutoUpdate===!0&&v.updateCamera(n),n=v.getCamera());const _=this._canvasTarget;let E=_._viewport,T=_._scissor,A=_._pixelRatio;m!==null&&(E=m.viewport,T=m.scissor,A=1),this.getDrawingBufferSize(fg),JP.set(0,0,fg.width,fg.height);const C=E.minDepth===void 0?0:E.minDepth,M=E.maxDepth===void 0?1:E.maxDepth;x.viewportValue.copy(E).multiplyScalar(A).floor(),x.viewportValue.width>>=p,x.viewportValue.height>>=p,x.viewportValue.minDepth=C,x.viewportValue.maxDepth=M,x.viewport=x.viewportValue.equals(JP)===!1,x.scissorValue.copy(T).multiplyScalar(A).floor(),x.scissor=_._scissorTest&&x.scissorValue.equals(JP)===!1,x.scissorValue.width>>=p,x.scissorValue.height>>=p,x.clippingContext||(x.clippingContext=new P2),x.clippingContext.updateGlobal(c,n),c.onBeforeRender(this,e,n,m);const P=n.isArrayCamera?tN:eN;n.isArrayCamera||(Bw.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),P.setFromProjectionMatrix(Bw,n.coordinateSystem,n.reversedDepth));const D=this._renderLists.get(e,n);if(D.begin(),this._projectObject(e,n,0,D,x.clippingContext),D.finish(),this.sortObjects===!0&&D.sort(this._opaqueSort,this._transparentSort),m!==null){this._textures.updateRenderTarget(m,p);const z=this._textures.get(m);x.textures=z.textures,x.depthTexture=z.depthTexture,x.width=z.width,x.height=z.height,x.renderTarget=m,x.depth=m.depthBuffer,x.stencil=m.stencilBuffer}else x.textures=null,x.depthTexture=null,x.width=fg.width,x.height=fg.height,x.depth=this.depth,x.stencil=this.stencil;x.width>>=p,x.height>>=p,x.activeCubeFace=f,x.activeMipmapLevel=p,x.occlusionQueryCount=D.occlusionQueryCount,x.scissorValue.max(Ru.set(0,0,0,0)),x.scissorValue.x+x.scissorValue.width>x.width&&(x.scissorValue.width=Math.max(x.width-x.scissorValue.x,0)),x.scissorValue.y+x.scissorValue.height>x.height&&(x.scissorValue.height=Math.max(x.height-x.scissorValue.y,0)),this._background.update(c,D,x),x.camera=n,this.backend.beginRender(x);const{bundles:N,lightsNode:L,transparentDoublePass:k,transparent:I,opaque:F}=D;return N.length>0&&this._renderBundles(N,c,L),this.opaque===!0&&F.length>0&&this._renderObjects(F,n,c,L),this.transparent===!0&&I.length>0&&this._renderTransparents(I,k,n,c,L),this.backend.finishRender(x),s.renderId=a,this._currentRenderContext=o,this._currentRenderObjectFunction=l,i!==null&&(this.setRenderTarget(u,f,p),this._renderOutput(m)),c.onAfterRender(this,e,n,m),this.inspector.finishRender(this.backend.getTimestampUID(x)),x}_setXRLayerSize(e,n){this._canvasTarget._width=e,this._canvasTarget._height=n,this.setViewport(0,0,e,n)}_renderOutput(e){const n=this._quad;this._nodes.hasOutputChange(e.texture)&&(n.material.fragmentNode=this._nodes.getOutputNode(e.texture),n.material.needsUpdate=!0);const r=this.autoClear,i=this.xr.enabled;this.autoClear=!1,this.xr.enabled=!1,this._renderScene(n,n.camera,!1),this.autoClear=r,this.xr.enabled=i}getMaxAnisotropy(){return this.backend.getMaxAnisotropy()}getActiveCubeFace(){return this._activeCubeFace}getActiveMipmapLevel(){return this._activeMipmapLevel}async setAnimationLoop(e){this._initialized===!1&&await this.init(),this._animation.setAnimationLoop(e)}getAnimationLoop(){return this._animation.getAnimationLoop()}async getArrayBufferAsync(e){return await this.backend.getArrayBufferAsync(e)}getContext(){return this.backend.getContext()}getPixelRatio(){return this._canvasTarget.getPixelRatio()}getDrawingBufferSize(e){return this._canvasTarget.getDrawingBufferSize(e)}getSize(e){return this._canvasTarget.getSize(e)}setPixelRatio(e=1){this._canvasTarget.setPixelRatio(e)}setDrawingBufferSize(e,n,r){this.xr&&this.xr.isPresenting||this._canvasTarget.setDrawingBufferSize(e,n,r)}setSize(e,n,r=!0){this.xr&&this.xr.isPresenting||this._canvasTarget.setSize(e,n,r)}setOpaqueSort(e){this._opaqueSort=e}setTransparentSort(e){this._transparentSort=e}getScissor(e){return this._canvasTarget.getScissor(e)}setScissor(e,n,r,i){this._canvasTarget.setScissor(e,n,r,i)}getScissorTest(){return this._canvasTarget.getScissorTest()}setScissorTest(e){this._canvasTarget.setScissorTest(e),this.backend.setScissorTest(e)}getViewport(e){return this._canvasTarget.getViewport(e)}setViewport(e,n,r,i,s=0,a=1){this._canvasTarget.setViewport(e,n,r,i,s,a)}getClearColor(e){return e.copy(this._clearColor)}setClearColor(e,n=1){this._clearColor.set(e),this._clearColor.a=n}getClearAlpha(){return this._clearColor.a}setClearAlpha(e){this._clearColor.a=e}getClearDepth(){return this._clearDepth}setClearDepth(e){this._clearDepth=e}getClearStencil(){return this._clearStencil}setClearStencil(e){this._clearStencil=e}isOccluded(e){const n=this._currentRenderContext;return n&&this.backend.isOccluded(n,e)}clear(e=!0,n=!0,r=!0){if(this._initialized===!1)throw new Error('Renderer: .clear() called before the backend is initialized. Use "await renderer.init();" before before using this method.');const i=this._renderTarget||this._getFrameBufferTarget();let s=null;if(i!==null){this._textures.updateRenderTarget(i);const a=this._textures.get(i);s=this._renderContexts.getForClear(i),s.textures=a.textures,s.depthTexture=a.depthTexture,s.width=a.width,s.height=a.height,s.renderTarget=i,s.depth=i.depthBuffer,s.stencil=i.stencilBuffer,s.clearColorValue=this.backend.getClearColor(),s.activeCubeFace=this.getActiveCubeFace(),s.activeMipmapLevel=this.getActiveMipmapLevel()}this.backend.clear(e,n,r,s),i!==null&&this._renderTarget===null&&this._renderOutput(i)}clearColor(){this.clear(!0,!1,!1)}clearDepth(){this.clear(!1,!0,!1)}clearStencil(){this.clear(!1,!1,!0)}async clearAsync(e=!0,n=!0,r=!0){jr('Renderer: "clearAsync()" has been deprecated. Use "clear()" and "await renderer.init();" when creating the renderer.'),await this.init(),this.clear(e,n,r)}async clearColorAsync(){jr('Renderer: "clearColorAsync()" has been deprecated. Use "clearColor()" and "await renderer.init();" when creating the renderer.'),this.clear(!0,!1,!1)}async clearDepthAsync(){jr('Renderer: "clearDepthAsync()" has been deprecated. Use "clearDepth()" and "await renderer.init();" when creating the renderer.'),this.clear(!1,!0,!1)}async clearStencilAsync(){jr('Renderer: "clearStencilAsync()" has been deprecated. Use "clearStencil()" and "await renderer.init();" when creating the renderer.'),this.clear(!1,!1,!0)}get needsFrameBufferTarget(){const e=this.currentToneMapping!==ya,n=this.currentColorSpace!==sn.workingColorSpace;return e||n}get samples(){return this._samples}get currentSamples(){let e=this._samples;return this._renderTarget!==null?e=this._renderTarget.samples:this.needsFrameBufferTarget&&(e=0),e}get currentToneMapping(){return this.isOutputTarget?this.toneMapping:ya}get currentColorSpace(){return this.isOutputTarget?this.outputColorSpace:sn.workingColorSpace}get isOutputTarget(){return this._renderTarget===this._outputRenderTarget||this._renderTarget===null}dispose(){this._initialized===!0&&(this.info.dispose(),this.backend.dispose(),this._animation.dispose(),this._objects.dispose(),this._geometries.dispose(),this._pipelines.dispose(),this._nodes.dispose(),this._bindings.dispose(),this._renderLists.dispose(),this._renderContexts.dispose(),this._textures.dispose(),this._frameBufferTarget!==null&&this._frameBufferTarget.dispose(),Object.values(this.backend.timestampQueryPool).forEach(e=>{e!==null&&e.dispose()})),this.setRenderTarget(null),this.setAnimationLoop(null)}setRenderTarget(e,n=0,r=0){this._renderTarget=e,this._activeCubeFace=n,this._activeMipmapLevel=r}getRenderTarget(){return this._renderTarget}setOutputRenderTarget(e){this._outputRenderTarget=e}getOutputRenderTarget(){return this._outputRenderTarget}setCanvasTarget(e){this._canvasTarget.removeEventListener("resize",this._onCanvasTargetResize),this._canvasTarget=e,this._canvasTarget.addEventListener("resize",this._onCanvasTargetResize)}getCanvasTarget(){return this._canvasTarget}_resetXRState(){this.backend.setXRTarget(null),this.setOutputRenderTarget(null),this.setRenderTarget(null),this._frameBufferTarget.dispose(),this._frameBufferTarget=null}setRenderObjectFunction(e){this._renderObjectFunction=e}getRenderObjectFunction(){return this._renderObjectFunction}compute(e,n=null){if(this._isDeviceLost===!0)return;if(this._initialized===!1)return ct("Renderer: .compute() called before the backend is initialized. Try using .computeAsync() instead."),this.computeAsync(e,n);const r=this._nodes.nodeFrame,i=r.renderId;this.info.calls++,this.info.compute.calls++,this.info.compute.frameCalls++,r.renderId=this.info.calls,this.backend.updateTimeStampUID(e),this.inspector.beginCompute(this.backend.getTimestampUID(e),e);const s=this.backend,a=this._pipelines,o=this._bindings,l=this._nodes,c=Array.isArray(e)?e:[e];if(c[0]===void 0||c[0].isComputeNode!==!0)throw new Error("THREE.Renderer: .compute() expects a ComputeNode.");s.beginCompute(e);for(const u of c){if(a.has(u)===!1){const m=()=>{u.removeEventListener("dispose",m),a.delete(u),o.deleteForCompute(u),l.delete(u)};u.addEventListener("dispose",m);const x=u.onInitFunction;x!==null&&x.call(u,{renderer:this})}l.updateForCompute(u),o.updateForCompute(u);const f=o.getForCompute(u),p=a.getForCompute(u,f);s.compute(e,u,f,p,n)}s.finishCompute(e),r.renderId=i,this.inspector.finishCompute(this.backend.getTimestampUID(e))}async computeAsync(e,n=null){this._initialized===!1&&await this.init(),this.compute(e,n)}async hasFeatureAsync(e){return jr('Renderer: "hasFeatureAsync()" has been deprecated. Use "hasFeature()" and "await renderer.init();" when creating the renderer.'),await this.init(),this.hasFeature(e)}async resolveTimestampsAsync(e="render"){return this._initialized===!1&&await this.init(),this.backend.resolveTimestampsAsync(e)}hasFeature(e){if(this._initialized===!1)throw new Error('Renderer: .hasFeature() called before the backend is initialized. Use "await renderer.init();" before before using this method.');return this.backend.hasFeature(e)}hasInitialized(){return this._initialized}async initTextureAsync(e){jr('Renderer: "initTextureAsync()" has been deprecated. Use "initTexture()" and "await renderer.init();" when creating the renderer.'),await this.init(),this.initTexture(e)}initTexture(e){if(this._initialized===!1)throw new Error('Renderer: .initTexture() called before the backend is initialized. Use "await renderer.init();" before before using this method.');this._textures.updateTexture(e)}copyFramebufferToTexture(e,n=null){if(n!==null)if(n.isVector2)n=Ru.set(n.x,n.y,e.image.width,e.image.height).floor();else if(n.isVector4)n=Ru.copy(n).floor();else{xt("Renderer.copyFramebufferToTexture: Invalid rectangle.");return}else n=Ru.set(0,0,e.image.width,e.image.height);let r=this._currentRenderContext,i;r!==null?i=r.renderTarget:(i=this._renderTarget||this._getFrameBufferTarget(),i!==null&&(this._textures.updateRenderTarget(i),r=this._textures.get(i))),this._textures.updateTexture(e,{renderTarget:i}),this.backend.copyFramebufferToTexture(e,r,n),this._inspector.copyFramebufferToTexture(e)}copyTextureToTexture(e,n,r=null,i=null,s=0,a=0){this._textures.updateTexture(e),this._textures.updateTexture(n),this.backend.copyTextureToTexture(e,n,r,i,s,a),this._inspector.copyTextureToTexture(e,n)}async readRenderTargetPixelsAsync(e,n,r,i,s,a=0,o=0){return this.backend.copyTextureToBuffer(e.textures[a],n,r,i,s,o)}_projectObject(e,n,r,i,s){if(e.visible===!1)return;if(e.layers.test(n.layers)){if(e.isGroup)r=e.renderOrder,e.isClippingGroup&&e.enabled&&(s=s.getGroupContext(e));else if(e.isLOD)e.autoUpdate===!0&&e.update(n);else if(e.isLight)i.pushLight(e);else if(e.isSprite){const l=n.isArrayCamera?tN:eN;if(!e.frustumCulled||l.intersectsSprite(e,n)){this.sortObjects===!0&&Ru.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Bw);const{geometry:c,material:u}=e;u.visible&&i.push(e,c,u,r,Ru.z,null,s)}}else if(e.isLineLoop)xt("Renderer: Objects of type THREE.LineLoop are not supported. Please use THREE.Line or THREE.LineSegments.");else if(e.isMesh||e.isLine||e.isPoints){const l=n.isArrayCamera?tN:eN;if(!e.frustumCulled||l.intersectsObject(e,n)){const{geometry:c,material:u}=e;if(this.sortObjects===!0&&(c.boundingSphere===null&&c.computeBoundingSphere(),Ru.copy(c.boundingSphere.center).applyMatrix4(e.matrixWorld).applyMatrix4(Bw)),Array.isArray(u)){const f=c.groups;for(let p=0,m=f.length;p<m;p++){const x=f[p],b=u[x.materialIndex];b&&b.visible&&i.push(e,c,b,r,Ru.z,x,s)}}else u.visible&&i.push(e,c,u,r,Ru.z,null,s)}}}if(e.isBundleGroup===!0&&this.backend.beginBundle!==void 0){const l=i;i=this._renderLists.get(e,n),i.begin(),l.pushBundle({bundleGroup:e,camera:n,renderList:i}),i.finish()}const o=e.children;for(let l=0,c=o.length;l<c;l++)this._projectObject(o[l],n,r,i,s)}_renderBundles(e,n,r){for(const i of e)this._renderBundle(i,n,r)}_renderTransparents(e,n,r,i,s){if(n.length>0){for(const{material:a}of n)a.side=Sr;this._renderObjects(n,r,i,s,"backSide");for(const{material:a}of n)a.side=wo;this._renderObjects(e,r,i,s);for(const{material:a}of n)a.side=Zs}else this._renderObjects(e,r,i,s)}_renderObjects(e,n,r,i,s=null){for(let a=0,o=e.length;a<o;a++){const{object:l,geometry:c,material:u,group:f,clippingContext:p}=e[a];this._currentRenderObjectFunction(l,r,n,c,u,f,i,p,s)}}_getShadowNodes(e){const n=e.version;let r=this._cacheShadowNodes.get(e);if(r===void 0||r.version!==n){const i=e.map!==null,s=e.colorNode&&e.colorNode.isNode,a=e.castShadowNode&&e.castShadowNode.isNode;let o=null,l=null,c=null;if(i||s||a){let u,f;a?(u=e.castShadowNode.rgb,f=e.castShadowNode.a):(u=Qe(0),f=je(1)),i&&(f=f.mul(br("map","texture",e).a)),s&&(f=f.mul(e.colorNode.a)),l=mn(u,f)}e.depthNode&&e.depthNode.isNode&&(c=e.depthNode),e.castShadowPositionNode&&e.castShadowPositionNode.isNode?o=e.castShadowPositionNode:e.positionNode&&e.positionNode.isNode&&(o=e.positionNode),r={version:n,colorNode:l,depthNode:c,positionNode:o},this._cacheShadowNodes.set(e,r)}return r}renderObject(e,n,r,i,s,a,o,l=null,c=null){let u=!1,f,p,m,x;if(e.onBeforeRender(this,n,r,i,s,a),s.allowOverride===!0&&n.overrideMaterial!==null){const b=n.overrideMaterial;if(u=!0,f=n.overrideMaterial.colorNode,p=n.overrideMaterial.depthNode,m=n.overrideMaterial.positionNode,x=n.overrideMaterial.side,s.positionNode&&s.positionNode.isNode&&(b.positionNode=s.positionNode),b.alphaTest=s.alphaTest,b.alphaMap=s.alphaMap,b.transparent=s.transparent||s.transmission>0||s.transmissionNode&&s.transmissionNode.isNode||s.backdropNode&&s.backdropNode.isNode,b.isShadowPassMaterial){const{colorNode:v,depthNode:_,positionNode:E}=this._getShadowNodes(s);b.side=s.shadowSide===null?s.side:s.shadowSide,v!==null&&(b.colorNode=v),_!==null&&(b.depthNode=_),E!==null&&(b.positionNode=E)}s=b}s.transparent===!0&&s.side===Zs&&s.forceSinglePass===!1?(s.side=Sr,this._handleObjectFunction(e,s,n,r,o,a,l,"backSide"),s.side=wo,this._handleObjectFunction(e,s,n,r,o,a,l,c),s.side=Zs):this._handleObjectFunction(e,s,n,r,o,a,l,c),u&&(n.overrideMaterial.colorNode=f,n.overrideMaterial.depthNode=p,n.overrideMaterial.positionNode=m,n.overrideMaterial.side=x),e.onAfterRender(this,n,r,i,s,a)}_renderObjectDirect(e,n,r,i,s,a,o,l){const c=this._objects.get(e,n,r,i,s,this._currentRenderContext,o,l);c.drawRange=e.geometry.drawRange,c.group=a;const u=this._nodes.needsRefresh(c);u&&(this._nodes.updateBefore(c),this._geometries.updateForRender(c),this._nodes.updateForRender(c),this._bindings.updateForRender(c)),this._pipelines.updateForRender(c),this._currentRenderBundle!==null&&(this.backend.get(this._currentRenderBundle).renderObjects.push(c),c.bundle=this._currentRenderBundle.bundleGroup),this.backend.draw(c,this.info),u&&this._nodes.updateAfter(c)}_createObjectPipeline(e,n,r,i,s,a,o,l){const c=this._objects.get(e,n,r,i,s,this._currentRenderContext,o,l);c.drawRange=e.geometry.drawRange,c.group=a,this._nodes.updateBefore(c),this._geometries.updateForRender(c),this._nodes.updateForRender(c),this._bindings.updateForRender(c),this._pipelines.getForRender(c,this._compilationPromises),this._nodes.updateAfter(c)}_onCanvasTargetResize(){this._initialized&&this.backend.updateSize()}get compile(){return this.compileAsync}}class gte{constructor(e=""){this.name=e,this.visibility=0}setVisibility(e){this.visibility|=e}clone(){return Object.assign(new this.constructor,this)}}function Gze(t){return t+(yf-t%yf)%yf}let xte=class extends gte{constructor(e,n=null){super(e),this.isBuffer=!0,this.bytesPerElement=Float32Array.BYTES_PER_ELEMENT,this._buffer=n}get byteLength(){return Gze(this._buffer.byteLength)}get buffer(){return this._buffer}update(){return!0}};class yte extends xte{constructor(e,n=null){super(e,n),this.isUniformBuffer=!0}}let Vze=0;class vte extends yte{constructor(e,n){super("UniformBuffer_"+Vze++,e?e.value:null),this.nodeUniform=e,this.groupNode=n}get buffer(){return this.nodeUniform.value}}class Hze extends yte{constructor(e){super(e),this.isUniformsGroup=!0,this._values=null,this.uniforms=[]}addUniform(e){return this.uniforms.push(e),this}removeUniform(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}get values(){return this._values===null&&(this._values=Array.from(this.buffer)),this._values}get buffer(){let e=this._buffer;if(e===null){const n=this.byteLength;e=new Float32Array(new ArrayBuffer(n)),this._buffer=e}return e}get byteLength(){const e=this.bytesPerElement;let n=0;for(let r=0,i=this.uniforms.length;r<i;r++){const s=this.uniforms[r],a=s.boundary,o=s.itemSize*e,l=n%yf,c=l%a,u=l+c;n+=c,u!==0&&yf-u<o&&(n+=yf-u),s.offset=n/e,n+=o}return Math.ceil(n/yf)*yf}update(){let e=!1;for(const n of this.uniforms)this.updateByType(n)===!0&&(e=!0);return e}updateByType(e){if(e.isNumberUniform)return this.updateNumber(e);if(e.isVector2Uniform)return this.updateVector2(e);if(e.isVector3Uniform)return this.updateVector3(e);if(e.isVector4Uniform)return this.updateVector4(e);if(e.isColorUniform)return this.updateColor(e);if(e.isMatrix3Uniform)return this.updateMatrix3(e);if(e.isMatrix4Uniform)return this.updateMatrix4(e);xt("WebGPUUniformsGroup: Unsupported uniform type.",e)}updateNumber(e){let n=!1;const r=this.values,i=e.getValue(),s=e.offset,a=e.getType();if(r[s]!==i){const o=this._getBufferForType(a);o[s]=r[s]=i,n=!0}return n}updateVector2(e){let n=!1;const r=this.values,i=e.getValue(),s=e.offset,a=e.getType();if(r[s+0]!==i.x||r[s+1]!==i.y){const o=this._getBufferForType(a);o[s+0]=r[s+0]=i.x,o[s+1]=r[s+1]=i.y,n=!0}return n}updateVector3(e){let n=!1;const r=this.values,i=e.getValue(),s=e.offset,a=e.getType();if(r[s+0]!==i.x||r[s+1]!==i.y||r[s+2]!==i.z){const o=this._getBufferForType(a);o[s+0]=r[s+0]=i.x,o[s+1]=r[s+1]=i.y,o[s+2]=r[s+2]=i.z,n=!0}return n}updateVector4(e){let n=!1;const r=this.values,i=e.getValue(),s=e.offset,a=e.getType();if(r[s+0]!==i.x||r[s+1]!==i.y||r[s+2]!==i.z||r[s+4]!==i.w){const o=this._getBufferForType(a);o[s+0]=r[s+0]=i.x,o[s+1]=r[s+1]=i.y,o[s+2]=r[s+2]=i.z,o[s+3]=r[s+3]=i.w,n=!0}return n}updateColor(e){let n=!1;const r=this.values,i=e.getValue(),s=e.offset;if(r[s+0]!==i.r||r[s+1]!==i.g||r[s+2]!==i.b){const a=this.buffer;a[s+0]=r[s+0]=i.r,a[s+1]=r[s+1]=i.g,a[s+2]=r[s+2]=i.b,n=!0}return n}updateMatrix3(e){let n=!1;const r=this.values,i=e.getValue().elements,s=e.offset;if(r[s+0]!==i[0]||r[s+1]!==i[1]||r[s+2]!==i[2]||r[s+4]!==i[3]||r[s+5]!==i[4]||r[s+6]!==i[5]||r[s+8]!==i[6]||r[s+9]!==i[7]||r[s+10]!==i[8]){const a=this.buffer;a[s+0]=r[s+0]=i[0],a[s+1]=r[s+1]=i[1],a[s+2]=r[s+2]=i[2],a[s+4]=r[s+4]=i[3],a[s+5]=r[s+5]=i[4],a[s+6]=r[s+6]=i[5],a[s+8]=r[s+8]=i[6],a[s+9]=r[s+9]=i[7],a[s+10]=r[s+10]=i[8],n=!0}return n}updateMatrix4(e){let n=!1;const r=this.values,i=e.getValue().elements,s=e.offset;return qze(r,i,s)===!1&&(this.buffer.set(i,s),Wze(r,i,s),n=!0),n}_getBufferForType(e){return e==="int"||e==="ivec2"||e==="ivec3"||e==="ivec4"?new Int32Array(this.buffer.buffer):e==="uint"||e==="uvec2"||e==="uvec3"||e==="uvec4"?new Uint32Array(this.buffer.buffer):this.buffer}}function Wze(t,e,n){for(let r=0,i=e.length;r<i;r++)t[n+r]=e[r]}function qze(t,e,n){for(let r=0,i=e.length;r<i;r++)if(t[n+r]!==e[r])return!1;return!0}let Xze=0;class bte extends Hze{constructor(e,n){super(e),this.id=Xze++,this.groupNode=n,this.isNodeUniformsGroup=!0}}class _te extends gte{constructor(e,n){super(e),this._texture=null,this._onTextureDispose=()=>{this.generation=null,this.version=0},this.texture=n,this.version=n?n.version:0,this.generation=null,this.samplerKey="",this.isSampler=!0}set texture(e){this._texture!==e&&(this._texture&&this._texture.removeEventListener("dispose",this._onTextureDispose),this._texture=e,this.generation=null,this.version=0,this._texture&&this._texture.addEventListener("dispose",this._onTextureDispose))}get texture(){return this._texture}update(){const{texture:e,version:n}=this;return n!==e.version?(this.version=e.version,!0):!1}clone(){const e=super.clone();return e._texture=null,e._onTextureDispose=()=>{e.generation=null,e.version=0},e.texture=this.texture,e}}let Yze=0;class Kze extends _te{constructor(e,n){super(e,n),this.id=Yze++,this.store=!1,this.mipLevel=0,this.isSampledTexture=!0}}class zC extends Kze{constructor(e,n,r,i=null){super(e,n?n.value:null),this.textureNode=n,this.groupNode=r,this.access=i}update(){const{textureNode:e}=this;return this.texture!==e.value?(this.texture=e.value,!0):super.update()}}class Ste extends zC{constructor(e,n,r,i=null){super(e,n,r,i),this.isSampledCubeTexture=!0}}class gL extends zC{constructor(e,n,r,i=null){super(e,n,r,i),this.isSampledTexture3D=!0}}const iH={bitcast_int_uint:new Ns("uint tsl_bitcast_uint_to_int ( int x ) { return floatBitsToInt( uintBitsToFloat( x ) ); }"),bitcast_uint_int:new Ns("uint tsl_bitcast_int_to_uint ( int x ) { return floatBitsToUint( intBitsToFloat ( x ) ); }")},Zze={textureDimensions:"textureSize",equals:"equal",bitcast_float_int:"floatBitsToInt",bitcast_int_float:"intBitsToFloat",bitcast_uint_float:"uintBitsToFloat",bitcast_float_uint:"floatBitsToUint",bitcast_uint_int:"tsl_bitcast_uint_to_int",bitcast_int_uint:"tsl_bitcast_int_to_uint"},Qze={low:"lowp",medium:"mediump",high:"highp"},sH={swizzleAssign:!0,storageBuffer:!1},aH={perspective:"smooth",linear:"noperspective"},oH={centroid:"centroid"},lH=`
precision highp float;
precision highp int;
precision highp sampler2D;
precision highp sampler3D;
precision highp samplerCube;
precision highp sampler2DArray;

precision highp usampler2D;
precision highp usampler3D;
precision highp usamplerCube;
precision highp usampler2DArray;

precision highp isampler2D;
precision highp isampler3D;
precision highp isamplerCube;
precision highp isampler2DArray;

precision lowp sampler2DShadow;
precision lowp sampler2DArrayShadow;
precision lowp samplerCubeShadow;
`;class Jze extends hte{constructor(e,n){super(e,n,new Aze),this.uniformGroups={},this.transforms=[],this.extensions={},this.builtins={vertex:[],fragment:[],compute:[]}}needsToWorkingColorSpace(e){return e.isVideoTexture===!0&&e.colorSpace!==Fa}_include(e){const n=iH[e];return n.build(this),this.addInclude(n),n}getMethod(e){return iH[e]!==void 0&&this._include(e),Zze[e]||e}getBitcastMethod(e,n){return this.getMethod(`bitcast_${n}_${e}`)}getTernary(e,n,r){return`${e} ? ${n} : ${r}`}getOutputStructName(){return""}buildFunctionCode(e){const n=e.layout,r=this.flowShaderNode(e),i=[];for(const a of n.inputs)i.push(this.getType(a.type)+" "+a.name);return`${this.getType(n.type)} ${n.name}( ${i.join(", ")} ) {

	${r.vars}

${r.code}
	return ${r.result};

}`}setupPBO(e){const n=e.value;if(n.pbo===void 0){const r=n.array,i=n.count*n.itemSize,{itemSize:s}=n,a=n.array.constructor.name.toLowerCase().includes("int");let o=a?xx:C_;s===2?o=a?yx:$l:s===3?o=a?ITe:E_:s===4&&(o=a?vx:gi);const l={Float32Array:Ti,Uint8Array:si,Uint16Array:zl,Uint32Array:Ar,Int8Array:hp,Int16Array:pp,Int32Array:xs,Uint8ClampedArray:si},c=Math.pow(2,Math.ceil(Math.log2(Math.sqrt(i/s))));let u=Math.ceil(i/s/c);c*u*s<i&&u++;const f=c*u*s,p=new r.constructor(f);p.set(r,0),n.array=p;const m=new lB(n.array,c,u,o,l[n.array.constructor.name]||Ti);m.needsUpdate=!0,m.isPBOTexture=!0;const x=new Ex(m,null,null);x.setPrecision("high"),n.pboNode=x,n.pbo=x.value,this.getUniformFromNode(n.pboNode,"texture",this.shaderStage,this.context.nodeName)}}getPropertyName(e,n=this.shaderStage){return e.isNodeUniform&&e.node.isTextureNode!==!0&&e.node.isBufferNode!==!0?n.charAt(0)+"_"+e.name:super.getPropertyName(e,n)}generatePBO(e){const{node:n,indexNode:r}=e,i=n.value;if(this.renderer.backend.has(i)){const u=this.renderer.backend.get(i);u.pbo=i.pbo}const s=this.getUniformFromNode(i.pboNode,"texture",this.shaderStage,this.context.nodeName),a=this.getPropertyName(s);this.increaseUsage(r);const o=r.build(this,"uint"),l=this.getDataFromNode(e);let c=l.propertyName;if(c===void 0){const u=this.getVarFromNode(e);c=this.getPropertyName(u);const f=this.getDataFromNode(n);let p=f.propertySizeName;p===void 0&&(p=c+"Size",this.getVarFromNode(n,p,"uint"),this.addLineFlowCode(`${p} = uint( textureSize( ${a}, 0 ).x )`,e),f.propertySizeName=p);const{itemSize:m}=i,x="."+wx.join("").slice(0,m),b=`ivec2(${o} % ${p}, ${o} / ${p})`,v=this.generateTextureLoad(null,a,b,"0",null,null);let _="vec4";i.pbo.type===Ar?_="uvec4":i.pbo.type===xs&&(_="ivec4"),this.addLineFlowCode(`${c} = ${_}(${v})${x}`,e),l.propertyName=c}return c}generateTextureLoad(e,n,r,i,s,a){i===null&&(i="0");let o;return s?a?o=`texelFetchOffset( ${n}, ivec3( ${r}, ${s} ), ${i}, ${a} )`:o=`texelFetch( ${n}, ivec3( ${r}, ${s} ), ${i} )`:a?o=`texelFetchOffset( ${n}, ${r}, ${i}, ${a} )`:o=`texelFetch( ${n}, ${r}, ${i} )`,e!==null&&e.isDepthTexture&&(o+=".x"),o}generateTexture(e,n,r,i,s){return i&&(r=`vec3( ${r}, ${i} )`),e.isDepthTexture?s?`textureOffset( ${n}, ${r}, ${s} ).x`:`texture( ${n}, ${r} ).x`:s?`textureOffset( ${n}, ${r}, ${s} )`:`texture( ${n}, ${r} )`}generateTextureLevel(e,n,r,i,s){return s?`textureLodOffset( ${n}, ${r}, ${i}, ${s} )`:`textureLod( ${n}, ${r}, ${i} )`}generateTextureBias(e,n,r,i,s){return s?`textureOffset( ${n}, ${r}, ${s}, ${i} )`:`texture( ${n}, ${r}, ${i} )`}generateTextureGrad(e,n,r,i,s){return s?`textureGradOffset( ${n}, ${r}, ${i[0]}, ${i[1]}, ${s} )`:`textureGrad( ${n}, ${r}, ${i[0]}, ${i[1]} )`}generateTextureCompare(e,n,r,i,s,a,o=this.shaderStage){if(o==="fragment")return s?a?`textureOffset( ${n}, vec4( ${r}, ${s}, ${i} ), ${a} )`:`texture( ${n}, vec4( ${r}, ${s}, ${i} ) )`:a?`textureOffset( ${n}, vec3( ${r}, ${i} ), ${a} )`:`texture( ${n}, vec3( ${r}, ${i} ) )`;xt(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${o} shader.`)}getVars(e){const n=[],r=this.vars[e];if(r!==void 0)for(const i of r)n.push(`${this.getVar(i.type,i.name,i.count)};`);return n.join(`
	`)}getUniforms(e){const n=this.uniforms[e],r=[],i={};for(const a of n){let o=null,l=!1;if(a.type==="texture"||a.type==="texture3D"){const u=a.node.value;let f="";(u.isDataTexture===!0||u.isData3DTexture===!0)&&(u.type===Ar?f="u":u.type===xs&&(f="i")),a.type==="texture3D"&&u.isArrayTexture===!1?o=`${f}sampler3D ${a.name};`:u.compareFunction?u.isArrayTexture===!0?o=`sampler2DArrayShadow ${a.name};`:o=`sampler2DShadow ${a.name};`:u.isArrayTexture===!0||u.isDataArrayTexture===!0||u.isCompressedArrayTexture===!0?o=`${f}sampler2DArray ${a.name};`:o=`${f}sampler2D ${a.name};`}else if(a.type==="cubeTexture")o=`samplerCube ${a.name};`;else if(a.type==="buffer"){const u=a.node,f=this.getType(u.bufferType),p=u.bufferCount,m=p>0?p:"";o=`${u.name} {
	${f} ${a.name}[${m}];
};
`}else o=`${this.getVectorType(a.type)} ${this.getPropertyName(a,e)};`,l=!0;const c=a.node.precision;if(c!==null&&(o=Qze[c]+" "+o),l){o="	"+o;const u=a.groupNode.name;(i[u]||(i[u]=[])).push(o)}else o="uniform "+o,r.push(o)}let s="";for(const a in i){const o=i[a];s+=this._getGLSLUniformStruct(e+"_"+a,o.join(`
`))+`
`}return s+=r.join(`
`),s}getTypeFromAttribute(e){let n=super.getTypeFromAttribute(e);if(/^[iu]/.test(n)&&e.gpuType!==xs){let r=e;e.isInterleavedBufferAttribute&&(r=e.data);const i=r.array;i instanceof Uint32Array||i instanceof Int32Array||(n=n.slice(1))}return n}getAttributes(e){let n="";if(e==="vertex"||e==="compute"){const r=this.getAttributesArray();let i=0;for(const s of r)n+=`layout( location = ${i++} ) in ${s.type} ${s.name};
`}return n}getStructMembers(e){const n=[];for(const r of e.members)n.push(`	${r.type} ${r.name};`);return n.join(`
`)}getStructs(e){const n=[],r=this.structs[e],i=[];for(const s of r)if(s.output)for(const a of s.members)i.push(`layout( location = ${a.index} ) out ${a.type} ${a.name};`);else{let a="struct "+s.name+` {
`;a+=this.getStructMembers(s),a+=`
};
`,n.push(a)}return i.length===0&&i.push("layout( location = 0 ) out vec4 fragColor;"),`
`+i.join(`
`)+`

`+n.join(`
`)}getVaryings(e){let n="";const r=this.varyings;if(e==="vertex"||e==="compute")for(const i of r){e==="compute"&&(i.needsInterpolation=!0);const s=this.getType(i.type);if(i.needsInterpolation)if(i.interpolationType){const a=aH[i.interpolationType]||i.interpolationType,o=oH[i.interpolationSampling]||"";n+=`${a} ${o} out ${s} ${i.name};
`}else{const a=s.includes("int")||s.includes("uv")||s.includes("iv")?"flat ":"";n+=`${a}out ${s} ${i.name};
`}else n+=`${s} ${i.name};
`}else if(e==="fragment"){for(const i of r)if(i.needsInterpolation){const s=this.getType(i.type);if(i.interpolationType){const a=aH[i.interpolationType]||i.interpolationType,o=oH[i.interpolationSampling]||"";n+=`${a} ${o} in ${s} ${i.name};
`}else{const a=s.includes("int")||s.includes("uv")||s.includes("iv")?"flat ":"";n+=`${a}in ${s} ${i.name};
`}}}for(const i of this.builtins[e])n+=`${i};
`;return n}getVertexIndex(){return"uint( gl_VertexID )"}getInstanceIndex(){return"uint( gl_InstanceID )"}getInvocationLocalIndex(){return`uint( gl_InstanceID ) % ${this.object.workgroupSize.reduce((r,i)=>r*i,1)}u`}getSubgroupSize(){xt("GLSLNodeBuilder: WebGLBackend does not support the subgroupSize node")}getInvocationSubgroupIndex(){xt("GLSLNodeBuilder: WebGLBackend does not support the invocationSubgroupIndex node")}getSubgroupIndex(){xt("GLSLNodeBuilder: WebGLBackend does not support the subgroupIndex node")}getDrawIndex(){return this.renderer.backend.extensions.has("WEBGL_multi_draw")?"uint( gl_DrawID )":null}getFrontFacing(){return"gl_FrontFacing"}getFragCoord(){return"gl_FragCoord.xy"}getFragDepth(){return"gl_FragDepth"}enableExtension(e,n,r=this.shaderStage){const i=this.extensions[r]||(this.extensions[r]=new Map);i.has(e)===!1&&i.set(e,{name:e,behavior:n})}getExtensions(e){const n=[];if(e==="vertex"){const i=this.renderer.backend.extensions;this.object.isBatchedMesh&&i.has("WEBGL_multi_draw")&&this.enableExtension("GL_ANGLE_multi_draw","require",e)}const r=this.extensions[e];if(r!==void 0)for(const{name:i,behavior:s}of r.values())n.push(`#extension ${i} : ${s}`);return n.join(`
`)}getClipDistance(){return"gl_ClipDistance"}isAvailable(e){let n=sH[e];if(n===void 0){let r;switch(n=!1,e){case"float32Filterable":r="OES_texture_float_linear";break;case"clipDistance":r="WEBGL_clip_cull_distance";break}if(r!==void 0){const i=this.renderer.backend.extensions;i.has(r)&&(i.get(r),n=!0)}sH[e]=n}return n}isFlipY(){return!0}enableHardwareClipping(e){this.enableExtension("GL_ANGLE_clip_cull_distance","require"),this.builtins.vertex.push(`out float gl_ClipDistance[ ${e} ]`)}enableMultiview(){this.enableExtension("GL_OVR_multiview2","require","fragment"),this.enableExtension("GL_OVR_multiview2","require","vertex"),this.builtins.vertex.push("layout(num_views = 2) in")}registerTransform(e,n){this.transforms.push({varyingName:e,attributeNode:n})}getTransforms(){const e=this.transforms;let n="";for(let r=0;r<e.length;r++){const i=e[r],s=this.getPropertyName(i.attributeNode);s&&(n+=`${i.varyingName} = ${s};
	`)}return n}_getGLSLUniformStruct(e,n){return`
layout( std140 ) uniform ${e} {
${n}
};`}_getGLSLVertexCode(e){return`#version 300 es

${this.getSignature()}

// extensions
${e.extensions}

// precision
${lH}

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// attributes
${e.attributes}

// codes
${e.codes}

void main() {

	// vars
	${e.vars}

	// transforms
	${e.transforms}

	// flow
	${e.flow}

	gl_PointSize = 1.0;

}
`}_getGLSLFragmentCode(e){return`#version 300 es

${this.getSignature()}

// extensions
${e.extensions}

// precision
${lH}

// structs
${e.structs}

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// codes
${e.codes}

void main() {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}buildCode(){const e=this.material!==null?{fragment:{},vertex:{}}:{compute:{}};this.sortBindingGroups();for(const n in e){let r=`// code

`;r+=this.flowCode[n];const i=this.flowNodes[n],s=i[i.length-1];for(const o of i){const l=this.getFlowData(o),c=o.name;c&&(r.length>0&&(r+=`
`),r+=`	// flow -> ${c}
	`),r+=`${l.code}
	`,o===s&&n!=="compute"&&(r+=`// result
	`,n==="vertex"?(r+="gl_Position = ",r+=`${l.result};`):n==="fragment"&&(o.outputNode.isOutputStructNode||(r+="fragColor = ",r+=`${l.result};`)))}const a=e[n];a.extensions=this.getExtensions(n),a.uniforms=this.getUniforms(n),a.attributes=this.getAttributes(n),a.varyings=this.getVaryings(n),a.vars=this.getVars(n),a.structs=this.getStructs(n),a.codes=this.getCodes(n),a.transforms=this.getTransforms(n),a.flow=r}this.material!==null?(this.vertexShader=this._getGLSLVertexCode(e.vertex),this.fragmentShader=this._getGLSLFragmentCode(e.fragment)):this.computeShader=this._getGLSLVertexCode(e.compute)}getUniformFromNode(e,n,r,i=null){const s=super.getUniformFromNode(e,n,r,i),a=this.getDataFromNode(e,r,this.globalCache);let o=a.uniformGPU;if(o===void 0){const l=e.groupNode,c=l.name,u=this.getBindGroupArray(c,r);if(n==="texture")o=new zC(s.name,s.node,l),u.push(o);else if(n==="cubeTexture")o=new Ste(s.name,s.node,l),u.push(o);else if(n==="texture3D")o=new gL(s.name,s.node,l),u.push(o);else if(n==="buffer"){e.name=`NodeBuffer_${e.id}`,s.name=`buffer${e.id}`;const f=new vte(e,l);f.name=e.name,u.push(f),o=f}else{const f=this.uniformGroups[r]||(this.uniformGroups[r]={});let p=f[c];p===void 0&&(p=new bte(r+"_"+c,l),f[c]=p,u.push(p)),o=this.getNodeUniform(s,n),p.addUniform(o)}a.uniformGPU=o}return s}}let nN=null,hg=null;class wte{constructor(e={}){this.parameters=Object.assign({},e),this.data=new WeakMap,this.renderer=null,this.domElement=null,this.timestampQueryPool={[Ac.RENDER]:null,[Ac.COMPUTE]:null},this.trackTimestamp=e.trackTimestamp===!0}async init(e){this.renderer=e}get coordinateSystem(){}beginRender(){}finishRender(){}beginCompute(){}finishCompute(){}draw(){}compute(){}createProgram(){}destroyProgram(){}createBindings(){}updateBindings(){}updateBinding(){}createRenderPipeline(){}createComputePipeline(){}needsRenderUpdate(){}getRenderCacheKey(){}createNodeBuilder(){}updateSampler(){}createDefaultTexture(){}createTexture(){}updateTexture(){}generateMipmaps(){}destroyTexture(){}async copyTextureToBuffer(){}copyTextureToTexture(){}copyFramebufferToTexture(){}createAttribute(){}createIndexAttribute(){}createStorageAttribute(){}updateAttribute(){}destroyAttribute(){}getContext(){}updateSize(){}updateViewport(){}updateTimeStampUID(e){const n=this.get(e),r=this.renderer.info.frame;let i;e.isComputeNode===!0?i="c:"+this.renderer.info.compute.frameCalls:i="r:"+this.renderer.info.render.frameCalls,n.timestampUID=i+":"+e.id+":f"+r}getTimestampUID(e){return this.get(e).timestampUID}getTimestampFrames(e){const n=this.timestampQueryPool[e];return n?n.getTimestampFrames():[]}_getQueryPool(e){const n=e.startsWith("c:")?Ac.COMPUTE:Ac.RENDER;return this.timestampQueryPool[n]}getTimestamp(e){return this._getQueryPool(e).getTimestamp(e)}hasTimestamp(e){return this._getQueryPool(e).hasTimestamp(e)}isOccluded(){}async resolveTimestampsAsync(e="render"){if(!this.trackTimestamp){jr("WebGPURenderer: Timestamp tracking is disabled.");return}const n=this.timestampQueryPool[e];if(!n)return;const r=await n.resolveQueriesAsync();return this.renderer.info[e].timestamp=r,r}async getArrayBufferAsync(){}async hasFeatureAsync(){}hasFeature(){}getMaxAnisotropy(){}getDrawingBufferSize(){return nN=nN||new mt,this.renderer.getDrawingBufferSize(nN)}setScissorTest(){}getClearColor(){const e=this.renderer;return hg=hg||new fF,e.getClearColor(hg),hg.getRGB(hg),hg}getDomElement(){let e=this.domElement;return e===null&&(e=this.parameters.canvas!==void 0?this.parameters.canvas:GZ(),"setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Vp} webgpu`),this.domElement=e),e}set(e,n){this.data.set(e,n)}get(e){let n=this.data.get(e);return n===void 0&&(n={},this.data.set(e,n)),n}has(e){return this.data.has(e)}delete(e){this.data.delete(e)}dispose(){}}let e6e=0;class t6e{constructor(e,n){this.buffers=[e.bufferGPU,n],this.type=e.type,this.bufferType=e.bufferType,this.pbo=e.pbo,this.byteLength=e.byteLength,this.bytesPerElement=e.BYTES_PER_ELEMENT,this.version=e.version,this.isInteger=e.isInteger,this.activeBufferIndex=0,this.baseId=e.id}get id(){return`${this.baseId}|${this.activeBufferIndex}`}get bufferGPU(){return this.buffers[this.activeBufferIndex]}get transformBuffer(){return this.buffers[this.activeBufferIndex^1]}switchBuffers(){this.activeBufferIndex^=1}}class n6e{constructor(e){this.backend=e}createAttribute(e,n){const r=this.backend,{gl:i}=r,s=e.array,a=e.usage||i.STATIC_DRAW,o=e.isInterleavedBufferAttribute?e.data:e,l=r.get(o);let c=l.bufferGPU;c===void 0&&(c=this._createBuffer(i,n,s,a),l.bufferGPU=c,l.bufferType=n,l.version=o.version);let u;if(s instanceof Float32Array)u=i.FLOAT;else if(typeof Float16Array<"u"&&s instanceof Float16Array)u=i.HALF_FLOAT;else if(s instanceof Uint16Array)e.isFloat16BufferAttribute?u=i.HALF_FLOAT:u=i.UNSIGNED_SHORT;else if(s instanceof Int16Array)u=i.SHORT;else if(s instanceof Uint32Array)u=i.UNSIGNED_INT;else if(s instanceof Int32Array)u=i.INT;else if(s instanceof Int8Array)u=i.BYTE;else if(s instanceof Uint8Array)u=i.UNSIGNED_BYTE;else if(s instanceof Uint8ClampedArray)u=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLBackend: Unsupported buffer data format: "+s);let f={bufferGPU:c,bufferType:n,type:u,byteLength:s.byteLength,bytesPerElement:s.BYTES_PER_ELEMENT,version:e.version,pbo:e.pbo,isInteger:u===i.INT||u===i.UNSIGNED_INT||e.gpuType===xs,id:e6e++};if(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute){const p=this._createBuffer(i,n,s,a);f=new t6e(f,p)}r.set(e,f)}updateAttribute(e){const n=this.backend,{gl:r}=n,i=e.array,s=e.isInterleavedBufferAttribute?e.data:e,a=n.get(s),o=a.bufferType,l=e.isInterleavedBufferAttribute?e.data.updateRanges:e.updateRanges;if(r.bindBuffer(o,a.bufferGPU),l.length===0)r.bufferSubData(o,0,i);else{for(let c=0,u=l.length;c<u;c++){const f=l[c];r.bufferSubData(o,f.start*i.BYTES_PER_ELEMENT,i,f.start,f.count)}s.clearUpdateRanges()}r.bindBuffer(o,null),a.version=s.version}destroyAttribute(e){const n=this.backend,{gl:r}=n;e.isInterleavedBufferAttribute&&n.delete(e.data);const i=n.get(e);r.deleteBuffer(i.bufferGPU),n.delete(e)}async getArrayBufferAsync(e){const n=this.backend,{gl:r}=n,i=e.isInterleavedBufferAttribute?e.data:e,{bufferGPU:s}=n.get(i),a=e.array,o=a.byteLength;r.bindBuffer(r.COPY_READ_BUFFER,s);const l=r.createBuffer();r.bindBuffer(r.COPY_WRITE_BUFFER,l),r.bufferData(r.COPY_WRITE_BUFFER,o,r.STREAM_READ),r.copyBufferSubData(r.COPY_READ_BUFFER,r.COPY_WRITE_BUFFER,0,0,o),await n.utils._clientWaitAsync();const c=new e.array.constructor(a.length);return r.bindBuffer(r.COPY_WRITE_BUFFER,l),r.getBufferSubData(r.COPY_WRITE_BUFFER,0,c),r.deleteBuffer(l),r.bindBuffer(r.COPY_READ_BUFFER,null),r.bindBuffer(r.COPY_WRITE_BUFFER,null),c.buffer}_createBuffer(e,n,r,i){const s=e.createBuffer();return e.bindBuffer(n,s),e.bufferData(n,r,i),e.bindBuffer(n,null),s}}let rN,pv;class r6e{constructor(e){this.backend=e,this.gl=this.backend.gl,this.enabled={},this.currentFlipSided=null,this.currentCullFace=null,this.currentProgram=null,this.currentBlendingEnabled=!1,this.currentBlending=null,this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentPremultipledAlpha=null,this.currentPolygonOffsetFactor=null,this.currentPolygonOffsetUnits=null,this.currentColorMask=null,this.currentDepthFunc=null,this.currentDepthMask=null,this.currentStencilFunc=null,this.currentStencilRef=null,this.currentStencilFuncMask=null,this.currentStencilFail=null,this.currentStencilZFail=null,this.currentStencilZPass=null,this.currentStencilMask=null,this.currentLineWidth=null,this.currentClippingPlanes=0,this.currentVAO=null,this.currentIndex=null,this.currentBoundFramebuffers={},this.currentDrawbuffers=new WeakMap,this.maxTextures=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS),this.currentTextureSlot=null,this.currentBoundTextures={},this.currentBoundBufferBases={},this._init()}_init(){const e=this.gl;rN={[Qs]:e.FUNC_ADD,[Lk]:e.FUNC_SUBTRACT,[Ik]:e.FUNC_REVERSE_SUBTRACT},pv={[Ou]:e.ZERO,[kk]:e.ONE,[Bk]:e.SRC_COLOR,[_b]:e.SRC_ALPHA,[Gk]:e.SRC_ALPHA_SATURATE,[zk]:e.DST_COLOR,[Uk]:e.DST_ALPHA,[Fk]:e.ONE_MINUS_SRC_COLOR,[Sb]:e.ONE_MINUS_SRC_ALPHA,[$k]:e.ONE_MINUS_DST_COLOR,[jk]:e.ONE_MINUS_DST_ALPHA};const n=e.getParameter(e.SCISSOR_BOX),r=e.getParameter(e.VIEWPORT);this.currentScissor=new an().fromArray(n),this.currentViewport=new an().fromArray(r),this._tempVec4=new an}enable(e){const{enabled:n}=this;n[e]!==!0&&(this.gl.enable(e),n[e]=!0)}disable(e){const{enabled:n}=this;n[e]!==!1&&(this.gl.disable(e),n[e]=!1)}setFlipSided(e){if(this.currentFlipSided!==e){const{gl:n}=this;e?n.frontFace(n.CW):n.frontFace(n.CCW),this.currentFlipSided=e}}setCullFace(e){const{gl:n}=this;e!==PZ?(this.enable(n.CULL_FACE),e!==this.currentCullFace&&(e===PD?n.cullFace(n.BACK):e===NZ?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):this.disable(n.CULL_FACE),this.currentCullFace=e}setLineWidth(e){const{currentLineWidth:n,gl:r}=this;e!==n&&(r.lineWidth(e),this.currentLineWidth=e)}setBlending(e,n,r,i,s,a,o,l){const{gl:c}=this;if(e===_a){this.currentBlendingEnabled===!0&&(this.disable(c.BLEND),this.currentBlendingEnabled=!1);return}if(this.currentBlendingEnabled===!1&&(this.enable(c.BLEND),this.currentBlendingEnabled=!0),e!==Ug){if(e!==this.currentBlending||l!==this.currentPremultipledAlpha){if((this.currentBlendEquation!==Qs||this.currentBlendEquationAlpha!==Qs)&&(c.blendEquation(c.FUNC_ADD),this.currentBlendEquation=Qs,this.currentBlendEquationAlpha=Qs),l)switch(e){case To:c.blendFuncSeparate(c.ONE,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA);break;case l0:c.blendFunc(c.ONE,c.ONE);break;case c0:c.blendFuncSeparate(c.ZERO,c.ONE_MINUS_SRC_COLOR,c.ZERO,c.ONE);break;case u0:c.blendFuncSeparate(c.DST_COLOR,c.ONE_MINUS_SRC_ALPHA,c.ZERO,c.ONE);break;default:xt("WebGLState: Invalid blending: ",e);break}else switch(e){case To:c.blendFuncSeparate(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA);break;case l0:c.blendFuncSeparate(c.SRC_ALPHA,c.ONE,c.ONE,c.ONE);break;case c0:xt("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case u0:xt("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:xt("WebGLState: Invalid blending: ",e);break}this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentBlending=e,this.currentPremultipledAlpha=l}return}s=s||n,a=a||r,o=o||i,(n!==this.currentBlendEquation||s!==this.currentBlendEquationAlpha)&&(c.blendEquationSeparate(rN[n],rN[s]),this.currentBlendEquation=n,this.currentBlendEquationAlpha=s),(r!==this.currentBlendSrc||i!==this.currentBlendDst||a!==this.currentBlendSrcAlpha||o!==this.currentBlendDstAlpha)&&(c.blendFuncSeparate(pv[r],pv[i],pv[a],pv[o]),this.currentBlendSrc=r,this.currentBlendDst=i,this.currentBlendSrcAlpha=a,this.currentBlendDstAlpha=o),this.currentBlending=e,this.currentPremultipledAlpha=!1}setColorMask(e){this.currentColorMask!==e&&(this.gl.colorMask(e,e,e,e),this.currentColorMask=e)}setDepthTest(e){const{gl:n}=this;e?this.enable(n.DEPTH_TEST):this.disable(n.DEPTH_TEST)}setDepthMask(e){this.currentDepthMask!==e&&(this.gl.depthMask(e),this.currentDepthMask=e)}setDepthFunc(e){if(this.currentDepthFunc!==e){const{gl:n}=this;switch(e){case wb:n.depthFunc(n.NEVER);break;case Tb:n.depthFunc(n.ALWAYS);break;case Eb:n.depthFunc(n.LESS);break;case Uf:n.depthFunc(n.LEQUAL);break;case Cb:n.depthFunc(n.EQUAL);break;case Ab:n.depthFunc(n.GEQUAL);break;case Mb:n.depthFunc(n.GREATER);break;case Rb:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}this.currentDepthFunc=e}}scissor(e,n,r,i){const s=this._tempVec4.set(e,n,r,i);if(this.currentScissor.equals(s)===!1){const{gl:a}=this;a.scissor(s.x,s.y,s.z,s.w),this.currentScissor.copy(s)}}viewport(e,n,r,i){const s=this._tempVec4.set(e,n,r,i);if(this.currentViewport.equals(s)===!1){const{gl:a}=this;a.viewport(s.x,s.y,s.z,s.w),this.currentViewport.copy(s)}}setScissorTest(e){const n=this.gl;e?n.enable(n.SCISSOR_TEST):n.disable(n.SCISSOR_TEST)}setStencilTest(e){const{gl:n}=this;e?this.enable(n.STENCIL_TEST):this.disable(n.STENCIL_TEST)}setStencilMask(e){this.currentStencilMask!==e&&(this.gl.stencilMask(e),this.currentStencilMask=e)}setStencilFunc(e,n,r){(this.currentStencilFunc!==e||this.currentStencilRef!==n||this.currentStencilFuncMask!==r)&&(this.gl.stencilFunc(e,n,r),this.currentStencilFunc=e,this.currentStencilRef=n,this.currentStencilFuncMask=r)}setStencilOp(e,n,r){(this.currentStencilFail!==e||this.currentStencilZFail!==n||this.currentStencilZPass!==r)&&(this.gl.stencilOp(e,n,r),this.currentStencilFail=e,this.currentStencilZFail=n,this.currentStencilZPass=r)}setMaterial(e,n,r){const{gl:i}=this;e.side===Zs?this.disable(i.CULL_FACE):this.enable(i.CULL_FACE);let s=e.side===Sr;n&&(s=!s),this.setFlipSided(s),e.blending===To&&e.transparent===!1?this.setBlending(_a):this.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),this.setDepthFunc(e.depthFunc),this.setDepthTest(e.depthTest),this.setDepthMask(e.depthWrite),this.setColorMask(e.colorWrite);const a=e.stencilWrite;if(this.setStencilTest(a),a&&(this.setStencilMask(e.stencilWriteMask),this.setStencilFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),this.setStencilOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),this.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),e.alphaToCoverage===!0&&this.backend.renderer.currentSamples>0?this.enable(i.SAMPLE_ALPHA_TO_COVERAGE):this.disable(i.SAMPLE_ALPHA_TO_COVERAGE),r>0&&this.currentClippingPlanes!==r)for(let l=0;l<8;l++)l<r?this.enable(12288+l):this.disable(12288+l)}setPolygonOffset(e,n,r){const{gl:i}=this;e?(this.enable(i.POLYGON_OFFSET_FILL),(this.currentPolygonOffsetFactor!==n||this.currentPolygonOffsetUnits!==r)&&(i.polygonOffset(n,r),this.currentPolygonOffsetFactor=n,this.currentPolygonOffsetUnits=r)):this.disable(i.POLYGON_OFFSET_FILL)}useProgram(e){return this.currentProgram!==e?(this.gl.useProgram(e),this.currentProgram=e,!0):!1}setVertexState(e,n=null){const r=this.gl;return this.currentVAO!==e||this.currentIndex!==n?(r.bindVertexArray(e),n!==null&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,n),this.currentVAO=e,this.currentIndex=n,!0):!1}resetVertexState(){const e=this.gl;e.bindVertexArray(null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),this.currentVAO=null,this.currentIndex=null}bindFramebuffer(e,n){const{gl:r,currentBoundFramebuffers:i}=this;return i[e]!==n?(r.bindFramebuffer(e,n),i[e]=n,e===r.DRAW_FRAMEBUFFER&&(i[r.FRAMEBUFFER]=n),e===r.FRAMEBUFFER&&(i[r.DRAW_FRAMEBUFFER]=n),!0):!1}drawBuffers(e,n){const{gl:r}=this;let i=[],s=!1;if(e.textures!==null){i=this.currentDrawbuffers.get(n),i===void 0&&(i=[],this.currentDrawbuffers.set(n,i));const a=e.textures;if(i.length!==a.length||i[0]!==r.COLOR_ATTACHMENT0){for(let o=0,l=a.length;o<l;o++)i[o]=r.COLOR_ATTACHMENT0+o;i.length=a.length,s=!0}}else i[0]!==r.BACK&&(i[0]=r.BACK,s=!0);s&&r.drawBuffers(i)}activeTexture(e){const{gl:n,currentTextureSlot:r,maxTextures:i}=this;e===void 0&&(e=n.TEXTURE0+i-1),r!==e&&(n.activeTexture(e),this.currentTextureSlot=e)}bindTexture(e,n,r){const{gl:i,currentTextureSlot:s,currentBoundTextures:a,maxTextures:o}=this;r===void 0&&(s===null?r=i.TEXTURE0+o-1:r=s);let l=a[r];l===void 0&&(l={type:void 0,texture:void 0},a[r]=l),(l.type!==e||l.texture!==n)&&(s!==r&&(i.activeTexture(r),this.currentTextureSlot=r),i.bindTexture(e,n),l.type=e,l.texture=n)}bindBufferBase(e,n,r){const{gl:i}=this,s=`${e}-${n}`;return this.currentBoundBufferBases[s]!==r?(i.bindBufferBase(e,n,r),this.currentBoundBufferBases[s]=r,!0):!1}unbindTexture(){const{gl:e,currentTextureSlot:n,currentBoundTextures:r}=this,i=r[n];i!==void 0&&i.type!==void 0&&(e.bindTexture(i.type,null),i.type=void 0,i.texture=void 0)}}class i6e{constructor(e){this.backend=e,this.gl=this.backend.gl,this.extensions=e.extensions}convert(e,n=Fa){const{gl:r,extensions:i}=this;let s;const a=sn.getTransfer(n);if(e===si)return r.UNSIGNED_BYTE;if(e===rC)return r.UNSIGNED_SHORT_4_4_4_4;if(e===iC)return r.UNSIGNED_SHORT_5_5_5_1;if(e===sC)return r.UNSIGNED_INT_5_9_9_9_REV;if(e===aC)return r.UNSIGNED_INT_10F_11F_11F_REV;if(e===hp)return r.BYTE;if(e===pp)return r.SHORT;if(e===zl)return r.UNSIGNED_SHORT;if(e===xs)return r.INT;if(e===Ar)return r.UNSIGNED_INT;if(e===Ti)return r.FLOAT;if(e===Ci)return r.HALF_FLOAT;if(e===Wk)return r.ALPHA;if(e===E_)return r.RGB;if(e===gi)return r.RGBA;if(e===Co)return r.DEPTH_COMPONENT;if(e===Ao)return r.DEPTH_STENCIL;if(e===C_)return r.RED;if(e===xx)return r.RED_INTEGER;if(e===$l)return r.RG;if(e===yx)return r.RG_INTEGER;if(e===vx)return r.RGBA_INTEGER;if(e===Af||e===Mf||e===Rf||e===Pf)if(a===Ot)if(s=i.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(e===Af)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(e===Mf)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(e===Rf)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(e===Pf)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=i.get("WEBGL_compressed_texture_s3tc"),s!==null){if(e===Af)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===Mf)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===Rf)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===Pf)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(e===Pb||e===Nb||e===Ob||e===Db)if(s=i.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(e===Pb)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===Nb)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===Ob)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===Db)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(e===h0||e===p0||e===m0)if(s=i.get("WEBGL_compressed_texture_etc"),s!==null){if(e===h0||e===p0)return a===Ot?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(e===m0)return a===Ot?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(e===g0||e===x0||e===y0||e===v0||e===b0||e===_0||e===S0||e===w0||e===T0||e===E0||e===C0||e===A0||e===M0||e===R0)if(s=i.get("WEBGL_compressed_texture_astc"),s!==null){if(e===g0)return a===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(e===x0)return a===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(e===y0)return a===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(e===v0)return a===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(e===b0)return a===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(e===_0)return a===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(e===S0)return a===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(e===w0)return a===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(e===T0)return a===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(e===E0)return a===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(e===C0)return a===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(e===A0)return a===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(e===M0)return a===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(e===R0)return a===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(e===P0)if(s=i.get("EXT_texture_compression_bptc"),s!==null){if(e===P0)return a===Ot?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(e===N0||e===O0||e===D0||e===L0)if(s=i.get("EXT_texture_compression_rgtc"),s!==null){if(e===N0)return s.COMPRESSED_RED_RGTC1_EXT;if(e===O0)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(e===D0)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(e===L0)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return e===Eo?r.UNSIGNED_INT_24_8:r[e]!==void 0?r[e]:null}_clientWaitAsync(){const{gl:e}=this,n=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0);return e.flush(),new Promise((r,i)=>{function s(){const a=e.clientWaitSync(n,e.SYNC_FLUSH_COMMANDS_BIT,0);if(a===e.WAIT_FAILED){e.deleteSync(n),i();return}if(a===e.TIMEOUT_EXPIRED){requestAnimationFrame(s);return}e.deleteSync(n),r()}s()})}}let cH=!1,Fw,iN,uH;class s6e{constructor(e){this.backend=e,this.gl=e.gl,this.extensions=e.extensions,this.defaultTextures={},this._srcFramebuffer=null,this._dstFramebuffer=null,cH===!1&&(this._init(),cH=!0)}_init(){const e=this.gl;Fw={[Mp]:e.REPEAT,[ja]:e.CLAMP_TO_EDGE,[Rp]:e.MIRRORED_REPEAT},iN={[Lr]:e.NEAREST,[Hk]:e.NEAREST_MIPMAP_NEAREST,[Vu]:e.NEAREST_MIPMAP_LINEAR,[ii]:e.LINEAR,[jg]:e.LINEAR_MIPMAP_NEAREST,[za]:e.LINEAR_MIPMAP_LINEAR},uH={[qk]:e.NEVER,[Qk]:e.ALWAYS,[oC]:e.LESS,[lC]:e.LEQUAL,[Xk]:e.EQUAL,[Zk]:e.GEQUAL,[Yk]:e.GREATER,[Kk]:e.NOTEQUAL}}getGLTextureType(e){const{gl:n}=this;let r;return e.isCubeTexture===!0?r=n.TEXTURE_CUBE_MAP:e.isArrayTexture===!0||e.isDataArrayTexture===!0||e.isCompressedArrayTexture===!0?r=n.TEXTURE_2D_ARRAY:e.isData3DTexture===!0?r=n.TEXTURE_3D:r=n.TEXTURE_2D,r}getInternalFormat(e,n,r,i,s=!1){const{gl:a,extensions:o}=this;if(e!==null){if(a[e]!==void 0)return a[e];ct("WebGLBackend: Attempt to use non-existing WebGL internal format '"+e+"'")}let l=n;if(n===a.RED&&(r===a.FLOAT&&(l=a.R32F),r===a.HALF_FLOAT&&(l=a.R16F),r===a.UNSIGNED_BYTE&&(l=a.R8),r===a.UNSIGNED_SHORT&&(l=a.R16),r===a.UNSIGNED_INT&&(l=a.R32UI),r===a.BYTE&&(l=a.R8I),r===a.SHORT&&(l=a.R16I),r===a.INT&&(l=a.R32I)),n===a.RED_INTEGER&&(r===a.UNSIGNED_BYTE&&(l=a.R8UI),r===a.UNSIGNED_SHORT&&(l=a.R16UI),r===a.UNSIGNED_INT&&(l=a.R32UI),r===a.BYTE&&(l=a.R8I),r===a.SHORT&&(l=a.R16I),r===a.INT&&(l=a.R32I)),n===a.RG&&(r===a.FLOAT&&(l=a.RG32F),r===a.HALF_FLOAT&&(l=a.RG16F),r===a.UNSIGNED_BYTE&&(l=a.RG8),r===a.UNSIGNED_SHORT&&(l=a.RG16),r===a.UNSIGNED_INT&&(l=a.RG32UI),r===a.BYTE&&(l=a.RG8I),r===a.SHORT&&(l=a.RG16I),r===a.INT&&(l=a.RG32I)),n===a.RG_INTEGER&&(r===a.UNSIGNED_BYTE&&(l=a.RG8UI),r===a.UNSIGNED_SHORT&&(l=a.RG16UI),r===a.UNSIGNED_INT&&(l=a.RG32UI),r===a.BYTE&&(l=a.RG8I),r===a.SHORT&&(l=a.RG16I),r===a.INT&&(l=a.RG32I)),n===a.RGB){const c=s?I0:sn.getTransfer(i);r===a.FLOAT&&(l=a.RGB32F),r===a.HALF_FLOAT&&(l=a.RGB16F),r===a.UNSIGNED_BYTE&&(l=a.RGB8),r===a.UNSIGNED_SHORT&&(l=a.RGB16),r===a.UNSIGNED_INT&&(l=a.RGB32UI),r===a.BYTE&&(l=a.RGB8I),r===a.SHORT&&(l=a.RGB16I),r===a.INT&&(l=a.RGB32I),r===a.UNSIGNED_BYTE&&(l=c===Ot?a.SRGB8:a.RGB8),r===a.UNSIGNED_SHORT_5_6_5&&(l=a.RGB565),r===a.UNSIGNED_SHORT_5_5_5_1&&(l=a.RGB5_A1),r===a.UNSIGNED_SHORT_4_4_4_4&&(l=a.RGB4),r===a.UNSIGNED_INT_5_9_9_9_REV&&(l=a.RGB9_E5),r===a.UNSIGNED_INT_10F_11F_11F_REV&&(l=a.R11F_G11F_B10F)}if(n===a.RGB_INTEGER&&(r===a.UNSIGNED_BYTE&&(l=a.RGB8UI),r===a.UNSIGNED_SHORT&&(l=a.RGB16UI),r===a.UNSIGNED_INT&&(l=a.RGB32UI),r===a.BYTE&&(l=a.RGB8I),r===a.SHORT&&(l=a.RGB16I),r===a.INT&&(l=a.RGB32I)),n===a.RGBA){const c=s?I0:sn.getTransfer(i);r===a.FLOAT&&(l=a.RGBA32F),r===a.HALF_FLOAT&&(l=a.RGBA16F),r===a.UNSIGNED_BYTE&&(l=a.RGBA8),r===a.UNSIGNED_SHORT&&(l=a.RGBA16),r===a.UNSIGNED_INT&&(l=a.RGBA32UI),r===a.BYTE&&(l=a.RGBA8I),r===a.SHORT&&(l=a.RGBA16I),r===a.INT&&(l=a.RGBA32I),r===a.UNSIGNED_BYTE&&(l=c===Ot?a.SRGB8_ALPHA8:a.RGBA8),r===a.UNSIGNED_SHORT_4_4_4_4&&(l=a.RGBA4),r===a.UNSIGNED_SHORT_5_5_5_1&&(l=a.RGB5_A1)}return n===a.RGBA_INTEGER&&(r===a.UNSIGNED_BYTE&&(l=a.RGBA8UI),r===a.UNSIGNED_SHORT&&(l=a.RGBA16UI),r===a.UNSIGNED_INT&&(l=a.RGBA32UI),r===a.BYTE&&(l=a.RGBA8I),r===a.SHORT&&(l=a.RGBA16I),r===a.INT&&(l=a.RGBA32I)),n===a.DEPTH_COMPONENT&&(r===a.UNSIGNED_SHORT&&(l=a.DEPTH_COMPONENT16),r===a.UNSIGNED_INT&&(l=a.DEPTH_COMPONENT24),r===a.FLOAT&&(l=a.DEPTH_COMPONENT32F)),n===a.DEPTH_STENCIL&&r===a.UNSIGNED_INT_24_8&&(l=a.DEPTH24_STENCIL8),(l===a.R16F||l===a.R32F||l===a.RG16F||l===a.RG32F||l===a.RGBA16F||l===a.RGBA32F)&&o.get("EXT_color_buffer_float"),l}setTextureParameters(e,n){const{gl:r,extensions:i,backend:s}=this,a=sn.getPrimaries(sn.workingColorSpace),o=n.colorSpace===Fa?null:sn.getPrimaries(n.colorSpace),l=n.colorSpace===Fa||a===o?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,n.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,n.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,l),r.texParameteri(e,r.TEXTURE_WRAP_S,Fw[n.wrapS]),r.texParameteri(e,r.TEXTURE_WRAP_T,Fw[n.wrapT]),(e===r.TEXTURE_3D||e===r.TEXTURE_2D_ARRAY)&&(n.isArrayTexture||r.texParameteri(e,r.TEXTURE_WRAP_R,Fw[n.wrapR])),r.texParameteri(e,r.TEXTURE_MAG_FILTER,iN[n.magFilter]);const c=n.mipmaps!==void 0&&n.mipmaps.length>0,u=n.minFilter===ii&&c?za:n.minFilter;if(r.texParameteri(e,r.TEXTURE_MIN_FILTER,iN[u]),n.compareFunction&&(r.texParameteri(e,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE),r.texParameteri(e,r.TEXTURE_COMPARE_FUNC,uH[n.compareFunction])),i.has("EXT_texture_filter_anisotropic")===!0){if(n.magFilter===Lr||n.minFilter!==Vu&&n.minFilter!==za||n.type===Ti&&i.has("OES_texture_float_linear")===!1)return;if(n.anisotropy>1){const f=i.get("EXT_texture_filter_anisotropic");r.texParameterf(e,f.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(n.anisotropy,s.getMaxAnisotropy()))}}}createDefaultTexture(e){const{gl:n,backend:r,defaultTextures:i}=this,s=this.getGLTextureType(e);let a=i[s];a===void 0&&(a=n.createTexture(),r.state.bindTexture(s,a),n.texParameteri(s,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(s,n.TEXTURE_MAG_FILTER,n.NEAREST),i[s]=a),r.set(e,{textureGPU:a,glTextureType:s})}createTexture(e,n){const{gl:r,backend:i}=this,{levels:s,width:a,height:o,depth:l}=n,c=i.utils.convert(e.format,e.colorSpace),u=i.utils.convert(e.type),f=this.getInternalFormat(e.internalFormat,c,u,e.colorSpace,e.isVideoTexture),p=r.createTexture(),m=this.getGLTextureType(e);i.state.bindTexture(m,p),this.setTextureParameters(m,e),e.isArrayTexture||e.isDataArrayTexture||e.isCompressedArrayTexture?r.texStorage3D(r.TEXTURE_2D_ARRAY,s,f,a,o,l):e.isData3DTexture?r.texStorage3D(r.TEXTURE_3D,s,f,a,o,l):e.isVideoTexture||r.texStorage2D(m,s,f,a,o),i.set(e,{textureGPU:p,glTextureType:m,glFormat:c,glType:u,glInternalFormat:f})}copyBufferToTexture(e,n){const{gl:r,backend:i}=this,{textureGPU:s,glTextureType:a,glFormat:o,glType:l}=i.get(n),{width:c,height:u}=n.source.data;r.bindBuffer(r.PIXEL_UNPACK_BUFFER,e),i.state.bindTexture(a,s),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),r.texSubImage2D(a,0,0,0,c,u,o,l,0),r.bindBuffer(r.PIXEL_UNPACK_BUFFER,null),i.state.unbindTexture()}updateTexture(e,n){const{gl:r}=this,{width:i,height:s}=n,{textureGPU:a,glTextureType:o,glFormat:l,glType:c,glInternalFormat:u}=this.backend.get(e);if(!(e.isRenderTargetTexture||a===void 0))if(this.backend.state.bindTexture(o,a),this.setTextureParameters(o,e),e.isCompressedTexture){const f=e.mipmaps,p=n.image;for(let m=0;m<f.length;m++){const x=f[m];e.isCompressedArrayTexture?e.format!==r.RGBA?l!==null?r.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,m,0,0,0,x.width,x.height,p.depth,l,x.data):ct("WebGLBackend: Attempt to load unsupported compressed texture format in .uploadTexture()"):r.texSubImage3D(r.TEXTURE_2D_ARRAY,m,0,0,0,x.width,x.height,p.depth,l,c,x.data):l!==null?r.compressedTexSubImage2D(r.TEXTURE_2D,m,0,0,x.width,x.height,l,x.data):ct("WebGLBackend: Unsupported compressed texture format")}}else if(e.isCubeTexture){const f=n.images,p=e.mipmaps;for(let m=0;m<6;m++){const x=Uw(f[m]);r.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+m,0,0,0,i,s,l,c,x);for(let b=0;b<p.length;b++){const v=p[b],_=Uw(v.images[m]);r.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+m,b+1,0,0,_.width,_.height,l,c,_)}}}else if(e.isDataArrayTexture||e.isArrayTexture){const f=n.image;if(e.layerUpdates.size>0){const p=ID(f.width,f.height,e.format,e.type);for(const m of e.layerUpdates){const x=f.data.subarray(m*p/f.data.BYTES_PER_ELEMENT,(m+1)*p/f.data.BYTES_PER_ELEMENT);r.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,m,f.width,f.height,1,l,c,x)}e.clearLayerUpdates()}else r.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,0,f.width,f.height,f.depth,l,c,f.data)}else if(e.isData3DTexture){const f=n.image;r.texSubImage3D(r.TEXTURE_3D,0,0,0,0,f.width,f.height,f.depth,l,c,f.data)}else if(e.isVideoTexture)e.update(),r.texImage2D(o,0,u,l,c,n.image);else{const f=e.mipmaps;if(f.length>0)for(let p=0,m=f.length;p<m;p++){const x=f[p],b=Uw(x);r.texSubImage2D(o,p,0,0,x.width,x.height,l,c,b)}else{const p=Uw(n.image);r.texSubImage2D(o,0,0,0,i,s,l,c,p)}}}generateMipmaps(e){const{gl:n,backend:r}=this,{textureGPU:i,glTextureType:s}=r.get(e);r.state.bindTexture(s,i),n.generateMipmap(s)}deallocateRenderBuffers(e){const{gl:n,backend:r}=this;if(e){const i=r.get(e);if(i.renderBufferStorageSetup=void 0,i.framebuffers){for(const s in i.framebuffers)n.deleteFramebuffer(i.framebuffers[s]);delete i.framebuffers}if(i.depthRenderbuffer&&(n.deleteRenderbuffer(i.depthRenderbuffer),delete i.depthRenderbuffer),i.stencilRenderbuffer&&(n.deleteRenderbuffer(i.stencilRenderbuffer),delete i.stencilRenderbuffer),i.msaaFrameBuffer&&(n.deleteFramebuffer(i.msaaFrameBuffer),delete i.msaaFrameBuffer),i.msaaRenderbuffers){for(let s=0;s<i.msaaRenderbuffers.length;s++)n.deleteRenderbuffer(i.msaaRenderbuffers[s]);delete i.msaaRenderbuffers}}}destroyTexture(e,n=!1){const{gl:r,backend:i}=this,{textureGPU:s,renderTarget:a}=i.get(e);this.deallocateRenderBuffers(a),n===!1&&r.deleteTexture(s),i.delete(e)}copyTextureToTexture(e,n,r=null,i=null,s=0,a=0){const{gl:o,backend:l}=this,{state:c}=this.backend,{textureGPU:u,glTextureType:f,glType:p,glFormat:m}=l.get(n);c.bindTexture(f,u);let x,b,v,_,E,T,A,C,M;const P=e.isCompressedTexture?e.mipmaps[a]:e.image;if(r!==null)x=r.max.x-r.min.x,b=r.max.y-r.min.y,v=r.isBox3?r.max.z-r.min.z:1,_=r.min.x,E=r.min.y,T=r.isBox3?r.min.z:0;else{const H=Math.pow(2,-s);x=Math.floor(P.width*H),b=Math.floor(P.height*H),e.isDataArrayTexture||e.isArrayTexture?v=P.depth:e.isData3DTexture?v=Math.floor(P.depth*H):v=1,_=0,E=0,T=0}i!==null?(A=i.x,C=i.y,M=i.z):(A=0,C=0,M=0),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,n.flipY),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),o.pixelStorei(o.UNPACK_ALIGNMENT,n.unpackAlignment);const D=o.getParameter(o.UNPACK_ROW_LENGTH),N=o.getParameter(o.UNPACK_IMAGE_HEIGHT),L=o.getParameter(o.UNPACK_SKIP_PIXELS),k=o.getParameter(o.UNPACK_SKIP_ROWS),I=o.getParameter(o.UNPACK_SKIP_IMAGES);o.pixelStorei(o.UNPACK_ROW_LENGTH,P.width),o.pixelStorei(o.UNPACK_IMAGE_HEIGHT,P.height),o.pixelStorei(o.UNPACK_SKIP_PIXELS,_),o.pixelStorei(o.UNPACK_SKIP_ROWS,E),o.pixelStorei(o.UNPACK_SKIP_IMAGES,T);const F=e.isDataArrayTexture||e.isData3DTexture||n.isArrayTexture,z=n.isDataArrayTexture||n.isData3DTexture||n.isArrayTexture;if(e.isDepthTexture){const H=l.get(e),B=l.get(n),j=l.get(H.renderTarget),G=l.get(B.renderTarget),W=j.framebuffers[H.cacheKey],re=G.framebuffers[B.cacheKey];c.bindFramebuffer(o.READ_FRAMEBUFFER,W),c.bindFramebuffer(o.DRAW_FRAMEBUFFER,re);for(let $=0;$<v;$++)F&&(o.framebufferTextureLayer(o.READ_FRAMEBUFFER,o.COLOR_ATTACHMENT0,H.textureGPU,s,T+$),o.framebufferTextureLayer(o.DRAW_FRAMEBUFFER,o.COLOR_ATTACHMENT0,u,a,M+$)),o.blitFramebuffer(_,E,x,b,A,C,x,b,o.DEPTH_BUFFER_BIT,o.NEAREST);c.bindFramebuffer(o.READ_FRAMEBUFFER,null),c.bindFramebuffer(o.DRAW_FRAMEBUFFER,null)}else if(s!==0||e.isRenderTargetTexture||l.has(e)){const H=l.get(e);this._srcFramebuffer===null&&(this._srcFramebuffer=o.createFramebuffer()),this._dstFramebuffer===null&&(this._dstFramebuffer=o.createFramebuffer()),c.bindFramebuffer(o.READ_FRAMEBUFFER,this._srcFramebuffer),c.bindFramebuffer(o.DRAW_FRAMEBUFFER,this._dstFramebuffer);for(let B=0;B<v;B++)F?o.framebufferTextureLayer(o.READ_FRAMEBUFFER,o.COLOR_ATTACHMENT0,H.textureGPU,s,T+B):o.framebufferTexture2D(o.READ_FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,H.textureGPU,s),z?o.framebufferTextureLayer(o.DRAW_FRAMEBUFFER,o.COLOR_ATTACHMENT0,u,a,M+B):o.framebufferTexture2D(o.DRAW_FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,u,a),s!==0?o.blitFramebuffer(_,E,x,b,A,C,x,b,o.COLOR_BUFFER_BIT,o.NEAREST):z?o.copyTexSubImage3D(f,a,A,C,M+B,_,E,x,b):o.copyTexSubImage2D(f,a,A,C,_,E,x,b);c.bindFramebuffer(o.READ_FRAMEBUFFER,null),c.bindFramebuffer(o.DRAW_FRAMEBUFFER,null)}else z?e.isDataTexture||e.isData3DTexture?o.texSubImage3D(f,a,A,C,M,x,b,v,m,p,P.data):n.isCompressedArrayTexture?o.compressedTexSubImage3D(f,a,A,C,M,x,b,v,m,P.data):o.texSubImage3D(f,a,A,C,M,x,b,v,m,p,P):e.isDataTexture?o.texSubImage2D(o.TEXTURE_2D,a,A,C,x,b,m,p,P.data):e.isCompressedTexture?o.compressedTexSubImage2D(o.TEXTURE_2D,a,A,C,P.width,P.height,m,P.data):o.texSubImage2D(o.TEXTURE_2D,a,A,C,x,b,m,p,P);o.pixelStorei(o.UNPACK_ROW_LENGTH,D),o.pixelStorei(o.UNPACK_IMAGE_HEIGHT,N),o.pixelStorei(o.UNPACK_SKIP_PIXELS,L),o.pixelStorei(o.UNPACK_SKIP_ROWS,k),o.pixelStorei(o.UNPACK_SKIP_IMAGES,I),a===0&&n.generateMipmaps&&o.generateMipmap(f),c.unbindTexture()}copyFramebufferToTexture(e,n,r){const{gl:i}=this,{state:s}=this.backend,{textureGPU:a}=this.backend.get(e),{x:o,y:l,z:c,w:u}=r,f=e.isDepthTexture===!0||n.renderTarget&&n.renderTarget.samples>0,p=n.renderTarget?n.renderTarget.height:this.backend.getDrawingBufferSize().y;if(f){const m=o!==0||l!==0;let x,b;if(e.isDepthTexture===!0?(x=i.DEPTH_BUFFER_BIT,b=i.DEPTH_ATTACHMENT,n.stencil&&(x|=i.STENCIL_BUFFER_BIT)):(x=i.COLOR_BUFFER_BIT,b=i.COLOR_ATTACHMENT0),m){const v=this.backend.get(n.renderTarget),_=v.framebuffers[n.getCacheKey()],E=v.msaaFrameBuffer;s.bindFramebuffer(i.DRAW_FRAMEBUFFER,_),s.bindFramebuffer(i.READ_FRAMEBUFFER,E);const T=p-l-u;i.blitFramebuffer(o,T,o+c,T+u,o,T,o+c,T+u,x,i.NEAREST),s.bindFramebuffer(i.READ_FRAMEBUFFER,_),s.bindTexture(i.TEXTURE_2D,a),i.copyTexSubImage2D(i.TEXTURE_2D,0,0,0,o,T,c,u),s.unbindTexture()}else{const v=i.createFramebuffer();s.bindFramebuffer(i.DRAW_FRAMEBUFFER,v),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,b,i.TEXTURE_2D,a,0),i.blitFramebuffer(0,0,c,u,0,0,c,u,x,i.NEAREST),i.deleteFramebuffer(v)}}else s.bindTexture(i.TEXTURE_2D,a),i.copyTexSubImage2D(i.TEXTURE_2D,0,0,0,o,p-u-l,c,u),s.unbindTexture();e.generateMipmaps&&this.generateMipmaps(e),this.backend._setFramebuffer(n)}setupRenderBufferStorage(e,n,r,i=!1){const{gl:s}=this,a=n.renderTarget,{depthTexture:o,depthBuffer:l,stencilBuffer:c,width:u,height:f}=a;if(s.bindRenderbuffer(s.RENDERBUFFER,e),l&&!c){let p=s.DEPTH_COMPONENT24;i===!0?this.extensions.get("WEBGL_multisampled_render_to_texture").renderbufferStorageMultisampleEXT(s.RENDERBUFFER,a.samples,p,u,f):r>0?(o&&o.isDepthTexture&&o.type===s.FLOAT&&(p=s.DEPTH_COMPONENT32F),s.renderbufferStorageMultisample(s.RENDERBUFFER,r,p,u,f)):s.renderbufferStorage(s.RENDERBUFFER,p,u,f),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.RENDERBUFFER,e)}else l&&c&&(r>0?s.renderbufferStorageMultisample(s.RENDERBUFFER,r,s.DEPTH24_STENCIL8,u,f):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,u,f),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,e));s.bindRenderbuffer(s.RENDERBUFFER,null)}async copyTextureToBuffer(e,n,r,i,s,a){const{backend:o,gl:l}=this,{textureGPU:c,glFormat:u,glType:f}=this.backend.get(e),p=l.createFramebuffer();l.bindFramebuffer(l.READ_FRAMEBUFFER,p);const m=e.isCubeTexture?l.TEXTURE_CUBE_MAP_POSITIVE_X+a:l.TEXTURE_2D;l.framebufferTexture2D(l.READ_FRAMEBUFFER,l.COLOR_ATTACHMENT0,m,c,0);const x=this._getTypedArrayType(f),b=this._getBytesPerTexel(f,u),_=i*s*b,E=l.createBuffer();l.bindBuffer(l.PIXEL_PACK_BUFFER,E),l.bufferData(l.PIXEL_PACK_BUFFER,_,l.STREAM_READ),l.readPixels(n,r,i,s,u,f,0),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),await o.utils._clientWaitAsync();const T=new x(_/x.BYTES_PER_ELEMENT);return l.bindBuffer(l.PIXEL_PACK_BUFFER,E),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,T),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),l.deleteFramebuffer(p),T}_getTypedArrayType(e){const{gl:n}=this;if(e===n.UNSIGNED_BYTE)return Uint8Array;if(e===n.UNSIGNED_SHORT_4_4_4_4||e===n.UNSIGNED_SHORT_5_5_5_1||e===n.UNSIGNED_SHORT_5_6_5||e===n.UNSIGNED_SHORT)return Uint16Array;if(e===n.UNSIGNED_INT)return Uint32Array;if(e===n.HALF_FLOAT)return Uint16Array;if(e===n.FLOAT)return Float32Array;throw new Error(`Unsupported WebGL type: ${e}`)}_getBytesPerTexel(e,n){const{gl:r}=this;let i=0;if(e===r.UNSIGNED_BYTE&&(i=1),(e===r.UNSIGNED_SHORT_4_4_4_4||e===r.UNSIGNED_SHORT_5_5_5_1||e===r.UNSIGNED_SHORT_5_6_5||e===r.UNSIGNED_SHORT||e===r.HALF_FLOAT)&&(i=2),(e===r.UNSIGNED_INT||e===r.FLOAT)&&(i=4),n===r.RGBA)return i*4;if(n===r.RGB)return i*3;if(n===r.ALPHA)return i}dispose(){const{gl:e}=this;this._srcFramebuffer!==null&&e.deleteFramebuffer(this._srcFramebuffer),this._dstFramebuffer!==null&&e.deleteFramebuffer(this._dstFramebuffer)}}function Uw(t){return t.isDataTexture?t.image.data:typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?t:t.data}class a6e{constructor(e){this.backend=e,this.gl=this.backend.gl,this.availableExtensions=this.gl.getSupportedExtensions(),this.extensions={}}get(e){let n=this.extensions[e];return n===void 0&&(n=this.gl.getExtension(e),this.extensions[e]=n),n}has(e){return this.availableExtensions.includes(e)}}class o6e{constructor(e){this.backend=e,this.maxAnisotropy=null}getMaxAnisotropy(){if(this.maxAnisotropy!==null)return this.maxAnisotropy;const e=this.backend.gl,n=this.backend.extensions;if(n.has("EXT_texture_filter_anisotropic")===!0){const r=n.get("EXT_texture_filter_anisotropic");this.maxAnisotropy=e.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else this.maxAnisotropy=0;return this.maxAnisotropy}}const dH={WEBGL_multi_draw:"WEBGL_multi_draw",WEBGL_compressed_texture_astc:"texture-compression-astc",WEBGL_compressed_texture_etc:"texture-compression-etc2",WEBGL_compressed_texture_etc1:"texture-compression-etc1",WEBGL_compressed_texture_pvrtc:"texture-compression-pvrtc",WEBGL_compressed_texture_s3tc:"texture-compression-s3tc",EXT_texture_compression_bptc:"texture-compression-bc",EXT_disjoint_timer_query_webgl2:"timestamp-query",OVR_multiview2:"OVR_multiview2"};class l6e{constructor(e){this.gl=e.gl,this.extensions=e.extensions,this.info=e.renderer.info,this.mode=null,this.index=0,this.type=null,this.object=null}render(e,n){const{gl:r,mode:i,object:s,type:a,info:o,index:l}=this;l!==0?r.drawElements(i,n,a,e):r.drawArrays(i,e,n),o.update(s,n,1)}renderInstances(e,n,r){const{gl:i,mode:s,type:a,index:o,object:l,info:c}=this;r!==0&&(o!==0?i.drawElementsInstanced(s,n,a,e,r):i.drawArraysInstanced(s,e,n,r),c.update(l,n,r))}renderMultiDraw(e,n,r){const{extensions:i,mode:s,object:a,info:o}=this;if(r===0)return;const l=i.get("WEBGL_multi_draw");if(l===null)for(let c=0;c<r;c++)this.render(e[c],n[c]);else{this.index!==0?l.multiDrawElementsWEBGL(s,n,0,this.type,e,0,r):l.multiDrawArraysWEBGL(s,e,0,n,0,r);let c=0;for(let u=0;u<r;u++)c+=n[u];o.update(a,c,1)}}renderMultiDrawInstances(e,n,r,i){const{extensions:s,mode:a,object:o,info:l}=this;if(r===0)return;const c=s.get("WEBGL_multi_draw");if(c===null)for(let u=0;u<r;u++)this.renderInstances(e[u],n[u],i[u]);else{this.index!==0?c.multiDrawElementsInstancedWEBGL(a,n,0,this.type,e,0,i,0,r):c.multiDrawArraysInstancedWEBGL(a,e,0,n,0,i,0,r);let u=0;for(let f=0;f<r;f++)u+=n[f]*i[f];l.update(o,u,1)}}}class Tte{constructor(e=256){this.trackTimestamp=!0,this.maxQueries=e,this.currentQueryIndex=0,this.queryOffsets=new Map,this.isDisposed=!1,this.lastValue=0,this.frames=[],this.pendingResolve=!1,this.timestamps=new Map}getTimestampFrames(){return this.frames}getTimestamp(e){let n=this.timestamps.get(e);return n===void 0&&(ct(`TimestampQueryPool: No timestamp available for uid ${e}.`),n=0),n}hasTimestamp(e){return this.timestamps.has(e)}allocateQueriesForContext(){}async resolveQueriesAsync(){}dispose(){}}class c6e extends Tte{constructor(e,n,r=2048){if(super(r),this.gl=e,this.type=n,this.ext=e.getExtension("EXT_disjoint_timer_query_webgl2")||e.getExtension("EXT_disjoint_timer_query"),!this.ext){ct("EXT_disjoint_timer_query not supported; timestamps will be disabled."),this.trackTimestamp=!1;return}this.queries=[];for(let i=0;i<this.maxQueries;i++)this.queries.push(e.createQuery());this.activeQuery=null,this.queryStates=new Map}allocateQueriesForContext(e){if(!this.trackTimestamp)return null;if(this.currentQueryIndex+2>this.maxQueries)return jr(`WebGPUTimestampQueryPool [${this.type}]: Maximum number of queries exceeded, when using trackTimestamp it is necessary to resolves the queries via renderer.resolveTimestampsAsync( THREE.TimestampQuery.${this.type.toUpperCase()} ).`),null;const n=this.currentQueryIndex;return this.currentQueryIndex+=2,this.queryStates.set(n,"inactive"),this.queryOffsets.set(e,n),n}beginQuery(e){if(!this.trackTimestamp||this.isDisposed)return;const n=this.queryOffsets.get(e);if(n==null||this.activeQuery!==null)return;const r=this.queries[n];if(r)try{this.queryStates.get(n)==="inactive"&&(this.gl.beginQuery(this.ext.TIME_ELAPSED_EXT,r),this.activeQuery=n,this.queryStates.set(n,"started"))}catch(i){i("Error in beginQuery:",i),this.activeQuery=null,this.queryStates.set(n,"inactive")}}endQuery(e){if(!this.trackTimestamp||this.isDisposed)return;const n=this.queryOffsets.get(e);if(n!=null&&this.activeQuery===n)try{this.gl.endQuery(this.ext.TIME_ELAPSED_EXT),this.queryStates.set(n,"ended"),this.activeQuery=null}catch(r){r("Error in endQuery:",r),this.queryStates.set(n,"inactive"),this.activeQuery=null}}async resolveQueriesAsync(){if(!this.trackTimestamp||this.pendingResolve)return this.lastValue;this.pendingResolve=!0;try{const e=new Map;for(const[s,a]of this.queryOffsets)if(this.queryStates.get(a)==="ended"){const l=this.queries[a];e.set(s,this.resolveQuery(l))}if(e.size===0)return this.lastValue;const n={},r=[];for(const[s,a]of e){const o=s.match(/^(.*):f(\d+)$/),l=parseInt(o[2]);r.includes(l)===!1&&r.push(l),n[l]===void 0&&(n[l]=0);const c=await a;this.timestamps.set(s,c),n[l]+=c}const i=n[r[r.length-1]];return this.lastValue=i,this.frames=r,this.currentQueryIndex=0,this.queryOffsets.clear(),this.queryStates.clear(),this.activeQuery=null,i}catch(e){return e("Error resolving queries:",e),this.lastValue}finally{this.pendingResolve=!1}}async resolveQuery(e){return new Promise(n=>{if(this.isDisposed){n(this.lastValue);return}let r,i=!1;const s=()=>{r&&(clearTimeout(r),r=null)},a=l=>{i||(i=!0,s(),n(l))},o=()=>{if(this.isDisposed){a(this.lastValue);return}try{if(this.gl.getParameter(this.ext.GPU_DISJOINT_EXT)){a(this.lastValue);return}if(!this.gl.getQueryParameter(e,this.gl.QUERY_RESULT_AVAILABLE)){r=setTimeout(o,1);return}const u=this.gl.getQueryParameter(e,this.gl.QUERY_RESULT);n(Number(u)/1e6)}catch(l){l("Error checking query:",l),n(this.lastValue)}};o()})}dispose(){if(!this.isDisposed&&(this.isDisposed=!0,!!this.trackTimestamp)){for(const e of this.queries)this.gl.deleteQuery(e);this.queries=[],this.queryStates.clear(),this.queryOffsets.clear(),this.lastValue=0,this.activeQuery=null}}}class fH extends wte{constructor(e={}){super(e),this.isWebGLBackend=!0,this.attributeUtils=null,this.extensions=null,this.capabilities=null,this.textureUtils=null,this.bufferRenderer=null,this.gl=null,this.state=null,this.utils=null,this.vaoCache={},this.transformFeedbackCache={},this.discard=!1,this.disjoint=null,this.parallel=null,this._currentContext=null,this._knownBindings=new WeakSet,this._supportsInvalidateFramebuffer=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),this._xrFramebuffer=null}init(e){super.init(e);const n=this.parameters,r={antialias:e.currentSamples>0,alpha:!0,depth:e.depth,stencil:e.stencil},i=n.context!==void 0?n.context:e.domElement.getContext("webgl2",r);function s(a){a.preventDefault();const o={api:"WebGL",message:a.statusMessage||"Unknown reason",reason:null,originalEvent:a};e.onDeviceLost(o)}this._onContextLost=s,e.domElement.addEventListener("webglcontextlost",s,!1),this.gl=i,this.extensions=new a6e(this),this.capabilities=new o6e(this),this.attributeUtils=new n6e(this),this.textureUtils=new s6e(this),this.bufferRenderer=new l6e(this),this.state=new r6e(this),this.utils=new i6e(this),this.extensions.get("EXT_color_buffer_float"),this.extensions.get("WEBGL_clip_cull_distance"),this.extensions.get("OES_texture_float_linear"),this.extensions.get("EXT_color_buffer_half_float"),this.extensions.get("WEBGL_multisampled_render_to_texture"),this.extensions.get("WEBGL_render_shared_exponent"),this.extensions.get("WEBGL_multi_draw"),this.extensions.get("OVR_multiview2"),this.disjoint=this.extensions.get("EXT_disjoint_timer_query_webgl2"),this.parallel=this.extensions.get("KHR_parallel_shader_compile")}get coordinateSystem(){return va}async getArrayBufferAsync(e){return await this.attributeUtils.getArrayBufferAsync(e)}async makeXRCompatible(){this.gl.getContextAttributes().xrCompatible!==!0&&await this.gl.makeXRCompatible()}setXRTarget(e){this._xrFramebuffer=e}setXRRenderTargetTextures(e,n,r=null){const i=this.gl;if(this.set(e.texture,{textureGPU:n,glInternalFormat:i.RGBA8}),r!==null){const s=e.stencilBuffer?i.DEPTH24_STENCIL8:i.DEPTH_COMPONENT24;this.set(e.depthTexture,{textureGPU:r,glInternalFormat:s}),this.extensions.has("WEBGL_multisampled_render_to_texture")===!0&&e._autoAllocateDepthBuffer===!0&&e.multiview===!1&&ct("WebGLBackend: Render-to-texture extension was disabled because an external texture was provided"),e._autoAllocateDepthBuffer=!1}}initTimestampQuery(e,n){if(!this.disjoint||!this.trackTimestamp)return;this.timestampQueryPool[e]||(this.timestampQueryPool[e]=new c6e(this.gl,e,2048));const r=this.timestampQueryPool[e];r.allocateQueriesForContext(n)!==null&&r.beginQuery(n)}prepareTimestampBuffer(e,n){if(!this.disjoint||!this.trackTimestamp)return;this.timestampQueryPool[e].endQuery(n)}getContext(){return this.gl}beginRender(e){const{state:n}=this,r=this.get(e);if(e.viewport)this.updateViewport(e);else{const{width:s,height:a}=this.getDrawingBufferSize();n.viewport(0,0,s,a)}if(e.scissor){const{x:s,y:a,width:o,height:l}=e.scissorValue;n.scissor(s,e.height-l-a,o,l)}this.initTimestampQuery(Ac.RENDER,this.getTimestampUID(e)),r.previousContext=this._currentContext,this._currentContext=e,this._setFramebuffer(e),this.clear(e.clearColor,e.clearDepth,e.clearStencil,e,!1);const i=e.occlusionQueryCount;i>0&&(r.currentOcclusionQueries=r.occlusionQueries,r.currentOcclusionQueryObjects=r.occlusionQueryObjects,r.lastOcclusionObject=null,r.occlusionQueries=new Array(i),r.occlusionQueryObjects=new Array(i),r.occlusionQueryIndex=0)}finishRender(e){const{gl:n,state:r}=this,i=this.get(e),s=i.previousContext;r.resetVertexState();const a=e.occlusionQueryCount;a>0&&(a>i.occlusionQueryIndex&&n.endQuery(n.ANY_SAMPLES_PASSED),this.resolveOccludedAsync(e));const o=e.textures;if(o!==null)for(let l=0;l<o.length;l++){const c=o[l];c.generateMipmaps&&this.generateMipmaps(c)}if(this._currentContext=s,this._resolveRenderTarget(e),s!==null)if(this._setFramebuffer(s),s.viewport)this.updateViewport(s);else{const{width:l,height:c}=this.getDrawingBufferSize();r.viewport(0,0,l,c)}this.prepareTimestampBuffer(Ac.RENDER,this.getTimestampUID(e))}resolveOccludedAsync(e){const n=this.get(e),{currentOcclusionQueries:r,currentOcclusionQueryObjects:i}=n;if(r&&i){const s=new WeakSet,{gl:a}=this;n.currentOcclusionQueryObjects=null,n.currentOcclusionQueries=null;const o=()=>{let l=0;for(let c=0;c<r.length;c++){const u=r[c];u!==null&&a.getQueryParameter(u,a.QUERY_RESULT_AVAILABLE)&&(a.getQueryParameter(u,a.QUERY_RESULT)===0&&s.add(i[c]),r[c]=null,a.deleteQuery(u),l++)}l<r.length?requestAnimationFrame(o):n.occluded=s};o()}}isOccluded(e,n){const r=this.get(e);return r.occluded&&r.occluded.has(n)}updateViewport(e){const{state:n}=this,{x:r,y:i,width:s,height:a}=e.viewportValue;n.viewport(r,e.height-a-i,s,a)}setScissorTest(e){this.state.setScissorTest(e)}getClearColor(){const e=super.getClearColor();return e.r*=e.a,e.g*=e.a,e.b*=e.a,e}clear(e,n,r,i=null,s=!0,a=!0){const{gl:o,renderer:l}=this;i===null&&(i={textures:null,clearColorValue:this.getClearColor()});let c=0;if(e&&(c|=o.COLOR_BUFFER_BIT),n&&(c|=o.DEPTH_BUFFER_BIT),r&&(c|=o.STENCIL_BUFFER_BIT),c!==0){let u;i.clearColorValue?u=i.clearColorValue:u=this.getClearColor();const f=l.getClearDepth(),p=l.getClearStencil();if(n&&this.state.setDepthMask(!0),i.textures===null)o.clearColor(u.r,u.g,u.b,u.a),o.clear(c);else{if(s&&this._setFramebuffer(i),e)for(let m=0;m<i.textures.length;m++)m===0?o.clearBufferfv(o.COLOR,m,[u.r,u.g,u.b,u.a]):o.clearBufferfv(o.COLOR,m,[0,0,0,1]);n&&r?o.clearBufferfi(o.DEPTH_STENCIL,0,f,p):n?o.clearBufferfv(o.DEPTH,0,[f]):r&&o.clearBufferiv(o.STENCIL,0,[p]),s&&a&&this._resolveRenderTarget(i)}}}beginCompute(e){const{state:n,gl:r}=this;n.bindFramebuffer(r.FRAMEBUFFER,null),this.initTimestampQuery(Ac.COMPUTE,this.getTimestampUID(e))}compute(e,n,r,i,s=null){const{state:a,gl:o}=this;this.discard===!1&&(o.enable(o.RASTERIZER_DISCARD),this.discard=!0);const{programGPU:l,transformBuffers:c,attributes:u}=this.get(i),f=this._getVaoKey(u),p=this.vaoCache[f];p===void 0?this.vaoCache[f]=this._createVao(u):a.setVertexState(p),a.useProgram(l),this._bindUniforms(r);const m=this._getTransformFeedback(c);o.bindTransformFeedback(o.TRANSFORM_FEEDBACK,m),o.beginTransformFeedback(o.POINTS),s=s!==null?s:n.count,Array.isArray(s)?(jr("WebGLBackend.compute(): The count parameter must be a single number, not an array."),s=s[0]):s&&typeof s=="object"&&s.isIndirectStorageBufferAttribute&&(jr("WebGLBackend.compute(): The count parameter must be a single number, not IndirectStorageBufferAttribute"),s=n.count),u[0].isStorageInstancedBufferAttribute?o.drawArraysInstanced(o.POINTS,0,1,s):o.drawArrays(o.POINTS,0,s),o.endTransformFeedback(),o.bindTransformFeedback(o.TRANSFORM_FEEDBACK,null);for(let x=0;x<c.length;x++){const b=c[x];b.pbo&&this.has(b.pbo)&&this.textureUtils.copyBufferToTexture(b.transformBuffer,b.pbo),b.switchBuffers()}}finishCompute(e){const n=this.gl;this.discard=!1,n.disable(n.RASTERIZER_DISCARD),this.prepareTimestampBuffer(Ac.COMPUTE,this.getTimestampUID(e)),this._currentContext&&this._setFramebuffer(this._currentContext)}_isRenderCameraDepthArray(e){return e.depthTexture&&e.depthTexture.isArrayTexture&&e.camera.isArrayCamera}draw(e){const{object:n,pipeline:r,material:i,context:s,hardwareClippingPlanes:a}=e,{programGPU:o}=this.get(r),{gl:l,state:c}=this,u=this.get(s),f=e.getDrawParameters();if(f===null)return;this._bindUniforms(e.getBindings());const p=n.isMesh&&n.matrixWorld.determinant()<0;c.setMaterial(i,p,a),c.useProgram(o);const m=e.getAttributes(),x=this.get(m);let b=x.vaoGPU;if(b===void 0){const D=this._getVaoKey(m);b=this.vaoCache[D],b===void 0&&(b=this._createVao(m),this.vaoCache[D]=b,x.vaoGPU=b)}const v=e.getIndex(),_=v!==null?this.get(v).bufferGPU:null;c.setVertexState(b,_);const E=u.lastOcclusionObject;if(E!==n&&E!==void 0){if(E!==null&&E.occlusionTest===!0&&(l.endQuery(l.ANY_SAMPLES_PASSED),u.occlusionQueryIndex++),n.occlusionTest===!0){const D=l.createQuery();l.beginQuery(l.ANY_SAMPLES_PASSED,D),u.occlusionQueries[u.occlusionQueryIndex]=D,u.occlusionQueryObjects[u.occlusionQueryIndex]=n}u.lastOcclusionObject=n}const T=this.bufferRenderer;n.isPoints?T.mode=l.POINTS:n.isLineSegments?T.mode=l.LINES:n.isLine?T.mode=l.LINE_STRIP:n.isLineLoop?T.mode=l.LINE_LOOP:i.wireframe===!0?(c.setLineWidth(i.wireframeLinewidth*this.renderer.getPixelRatio()),T.mode=l.LINES):T.mode=l.TRIANGLES;const{vertexCount:A,instanceCount:C}=f;let{firstVertex:M}=f;if(T.object=n,v!==null){M*=v.array.BYTES_PER_ELEMENT;const D=this.get(v);T.index=v.count,T.type=D.type}else T.index=0;const P=()=>{n.isBatchedMesh?n._multiDrawInstances!==null?(jr("WebGLBackend: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),T.renderMultiDrawInstances(n._multiDrawStarts,n._multiDrawCounts,n._multiDrawCount,n._multiDrawInstances)):this.hasFeature("WEBGL_multi_draw")?T.renderMultiDraw(n._multiDrawStarts,n._multiDrawCounts,n._multiDrawCount):jr("WebGLBackend: WEBGL_multi_draw not supported."):C>1?T.renderInstances(M,A,C):T.render(M,A)};if(e.camera.isArrayCamera===!0&&e.camera.cameras.length>0&&e.camera.isMultiViewCamera===!1){const D=this.get(e.camera),N=e.camera.cameras,L=e.getBindingGroup("cameraIndex").bindings[0];if(D.indexesGPU===void 0||D.indexesGPU.length!==N.length){const B=new Uint32Array([0,0,0,0]),j=[];for(let G=0,W=N.length;G<W;G++){const re=l.createBuffer();B[0]=G,l.bindBuffer(l.UNIFORM_BUFFER,re),l.bufferData(l.UNIFORM_BUFFER,B,l.STATIC_DRAW),j.push(re)}D.indexesGPU=j}const k=this.get(L),I=this.renderer.getPixelRatio(),F=this._currentContext.renderTarget,z=this._isRenderCameraDepthArray(this._currentContext),H=this._currentContext.activeCubeFace;if(z){const B=this.get(F.depthTexture);if(B.clearedRenderId!==this.renderer._nodes.nodeFrame.renderId){B.clearedRenderId=this.renderer._nodes.nodeFrame.renderId;const{stencilBuffer:j}=F;for(let G=0,W=N.length;G<W;G++)this.renderer._activeCubeFace=G,this._currentContext.activeCubeFace=G,this._setFramebuffer(this._currentContext),this.clear(!1,!0,j,this._currentContext,!1,!1);this.renderer._activeCubeFace=H,this._currentContext.activeCubeFace=H}}for(let B=0,j=N.length;B<j;B++){const G=N[B];if(n.layers.test(G.layers)){z&&(this.renderer._activeCubeFace=B,this._currentContext.activeCubeFace=B,this._setFramebuffer(this._currentContext));const W=G.viewport;if(W!==void 0){const re=W.x*I,$=W.y*I,ee=W.width*I,oe=W.height*I;c.viewport(Math.floor(re),Math.floor(e.context.height-oe-$),Math.floor(ee),Math.floor(oe))}c.bindBufferBase(l.UNIFORM_BUFFER,k.index,D.indexesGPU[B]),P()}this._currentContext.activeCubeFace=H,this.renderer._activeCubeFace=H}}else P()}needsRenderUpdate(){return!1}getRenderCacheKey(){return""}createDefaultTexture(e){this.textureUtils.createDefaultTexture(e)}createTexture(e,n){this.textureUtils.createTexture(e,n)}updateTexture(e,n){this.textureUtils.updateTexture(e,n)}generateMipmaps(e){this.textureUtils.generateMipmaps(e)}destroyTexture(e,n=!1){this.textureUtils.destroyTexture(e,n)}async copyTextureToBuffer(e,n,r,i,s,a){return this.textureUtils.copyTextureToBuffer(e,n,r,i,s,a)}updateSampler(){return""}createNodeBuilder(e,n){return new Jze(e,n)}createProgram(e){const n=this.gl,{stage:r,code:i}=e,s=r==="fragment"?n.createShader(n.FRAGMENT_SHADER):n.createShader(n.VERTEX_SHADER);n.shaderSource(s,i),n.compileShader(s),this.set(e,{shaderGPU:s})}destroyProgram(e){this.delete(e)}createRenderPipeline(e,n){const r=this.gl,i=e.pipeline,{fragmentProgram:s,vertexProgram:a}=i,o=r.createProgram(),l=this.get(s).shaderGPU,c=this.get(a).shaderGPU;if(r.attachShader(o,l),r.attachShader(o,c),r.linkProgram(o),this.set(i,{programGPU:o,fragmentShader:l,vertexShader:c}),n!==null&&this.parallel){const u=new Promise(f=>{const p=this.parallel,m=()=>{r.getProgramParameter(o,p.COMPLETION_STATUS_KHR)?(this._completeCompile(e,i),f()):requestAnimationFrame(m)};m()});n.push(u);return}this._completeCompile(e,i)}_handleSource(e,n){const r=e.split(`
`),i=[],s=Math.max(n-6,0),a=Math.min(n+6,r.length);for(let o=s;o<a;o++){const l=o+1;i.push(`${l===n?">":" "} ${l}: ${r[o]}`)}return i.join(`
`)}_getShaderErrors(e,n,r){const i=e.getShaderParameter(n,e.COMPILE_STATUS),a=(e.getShaderInfoLog(n)||"").trim();if(i&&a==="")return"";const o=/ERROR: 0:(\d+)/.exec(a);if(o){const l=parseInt(o[1]);return r.toUpperCase()+`

`+a+`

`+this._handleSource(e.getShaderSource(n),l)}else return a}_logProgramError(e,n,r){if(this.renderer.debug.checkShaderErrors){const i=this.gl,a=(i.getProgramInfoLog(e)||"").trim();if(i.getProgramParameter(e,i.LINK_STATUS)===!1)if(typeof this.renderer.debug.onShaderError=="function")this.renderer.debug.onShaderError(i,e,r,n);else{const o=this._getShaderErrors(i,r,"vertex"),l=this._getShaderErrors(i,n,"fragment");xt("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(e,i.VALIDATE_STATUS)+`

Program Info Log: `+a+`
`+o+`
`+l)}else a!==""&&ct("WebGLProgram: Program Info Log:",a)}}_completeCompile(e,n){const{state:r,gl:i}=this,s=this.get(n),{programGPU:a,fragmentShader:o,vertexShader:l}=s;i.getProgramParameter(a,i.LINK_STATUS)===!1&&this._logProgramError(a,o,l),r.useProgram(a);const c=e.getBindings();this._setupBindings(c,a),this.set(n,{programGPU:a})}createComputePipeline(e,n){const{state:r,gl:i}=this,s={stage:"fragment",code:`#version 300 es
precision highp float;
void main() {}`};this.createProgram(s);const{computeProgram:a}=e,o=i.createProgram(),l=this.get(s).shaderGPU,c=this.get(a).shaderGPU,u=a.transforms,f=[],p=[];for(let v=0;v<u.length;v++){const _=u[v];f.push(_.varyingName),p.push(_.attributeNode)}i.attachShader(o,l),i.attachShader(o,c),i.transformFeedbackVaryings(o,f,i.SEPARATE_ATTRIBS),i.linkProgram(o),i.getProgramParameter(o,i.LINK_STATUS)===!1&&this._logProgramError(o,l,c),r.useProgram(o),this._setupBindings(n,o);const m=a.attributes,x=[],b=[];for(let v=0;v<m.length;v++){const _=m[v].node.attribute;x.push(_),this.has(_)||this.attributeUtils.createAttribute(_,i.ARRAY_BUFFER)}for(let v=0;v<p.length;v++){const _=p[v].attribute;this.has(_)||this.attributeUtils.createAttribute(_,i.ARRAY_BUFFER);const E=this.get(_);b.push(E)}this.set(e,{programGPU:o,transformBuffers:b,attributes:x})}createBindings(e,n){if(this._knownBindings.has(n)===!1){this._knownBindings.add(n);let r=0,i=0;for(const s of n){this.set(s,{textures:i,uniformBuffers:r});for(const a of s.bindings)a.isUniformBuffer&&r++,a.isSampledTexture&&i++}}this.updateBindings(e,n)}updateBindings(e){const{gl:n}=this,r=this.get(e);let i=r.uniformBuffers,s=r.textures;for(const a of e.bindings){const o=this.get(a);if(a.isUniformsGroup||a.isUniformBuffer){const l=a.buffer;let{bufferGPU:c}=this.get(l);c===void 0?(c=n.createBuffer(),n.bindBuffer(n.UNIFORM_BUFFER,c),n.bufferData(n.UNIFORM_BUFFER,l,n.DYNAMIC_DRAW),this.set(l,{bufferGPU:c})):(n.bindBuffer(n.UNIFORM_BUFFER,c),n.bufferSubData(n.UNIFORM_BUFFER,0,l)),o.index=i++,o.bufferGPU=c,this.set(a,o)}else if(a.isSampledTexture){const{textureGPU:l,glTextureType:c}=this.get(a.texture);o.index=s++,o.textureGPU=l,o.glTextureType=c,this.set(a,o)}}}updateBinding(e){const n=this.gl;if(e.isUniformsGroup||e.isUniformBuffer){const i=this.get(e).bufferGPU,s=e.buffer;n.bindBuffer(n.UNIFORM_BUFFER,i),n.bufferData(n.UNIFORM_BUFFER,s,n.DYNAMIC_DRAW)}}createIndexAttribute(e){const n=this.gl;this.attributeUtils.createAttribute(e,n.ELEMENT_ARRAY_BUFFER)}createAttribute(e){if(this.has(e))return;const n=this.gl;this.attributeUtils.createAttribute(e,n.ARRAY_BUFFER)}createStorageAttribute(e){if(this.has(e))return;const n=this.gl;this.attributeUtils.createAttribute(e,n.ARRAY_BUFFER)}updateAttribute(e){this.attributeUtils.updateAttribute(e)}destroyAttribute(e){this.attributeUtils.destroyAttribute(e)}hasFeature(e){const n=Object.keys(dH).filter(i=>dH[i]===e),r=this.extensions;for(let i=0;i<n.length;i++)if(r.has(n[i]))return!0;return!1}getMaxAnisotropy(){return this.capabilities.getMaxAnisotropy()}copyTextureToTexture(e,n,r=null,i=null,s=0,a=0){this.textureUtils.copyTextureToTexture(e,n,r,i,s,a)}copyFramebufferToTexture(e,n,r){this.textureUtils.copyFramebufferToTexture(e,n,r)}_setFramebuffer(e){const{gl:n,state:r}=this;let i=null;if(e.textures!==null){const s=e.renderTarget,a=this.get(s),{samples:o,depthBuffer:l,stencilBuffer:c}=s,u=s.isWebGLCubeRenderTarget===!0,f=s.isRenderTarget3D===!0,p=s.depth>1,m=s.isXRRenderTarget===!0,x=m===!0&&s._hasExternalTextures===!0;let b=a.msaaFrameBuffer,v=a.depthRenderbuffer;const _=this.extensions.get("WEBGL_multisampled_render_to_texture"),E=this.extensions.get("OVR_multiview2"),T=this._useMultisampledExtension(s),A=rte(e);let C;if(u?(a.cubeFramebuffers||(a.cubeFramebuffers={}),C=a.cubeFramebuffers[A]):m&&x===!1?C=this._xrFramebuffer:(a.framebuffers||(a.framebuffers={}),C=a.framebuffers[A]),C===void 0){C=n.createFramebuffer(),r.bindFramebuffer(n.FRAMEBUFFER,C);const M=e.textures,P=[];if(u){a.cubeFramebuffers[A]=C;const{textureGPU:N}=this.get(M[0]),L=this.renderer._activeCubeFace,k=this.renderer._activeMipmapLevel;n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+L,N,k)}else{a.framebuffers[A]=C;for(let N=0;N<M.length;N++){const L=M[N],k=this.get(L);k.renderTarget=e.renderTarget,k.cacheKey=A;const I=n.COLOR_ATTACHMENT0+N;if(s.multiview)E.framebufferTextureMultisampleMultiviewOVR(n.FRAMEBUFFER,I,k.textureGPU,0,o,0,2);else if(f||p){const F=this.renderer._activeCubeFace,z=this.renderer._activeMipmapLevel;n.framebufferTextureLayer(n.FRAMEBUFFER,I,k.textureGPU,z,F)}else if(T)_.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,I,n.TEXTURE_2D,k.textureGPU,0,o);else{const F=this.renderer._activeMipmapLevel;n.framebufferTexture2D(n.FRAMEBUFFER,I,n.TEXTURE_2D,k.textureGPU,F)}}}const D=c?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;if(s._autoAllocateDepthBuffer===!0){const N=n.createRenderbuffer();this.textureUtils.setupRenderBufferStorage(N,e,0,T),a.xrDepthRenderbuffer=N,P.push(c?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT),n.bindRenderbuffer(n.RENDERBUFFER,N),n.framebufferRenderbuffer(n.FRAMEBUFFER,D,n.RENDERBUFFER,N)}else if(e.depthTexture!==null){P.push(c?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT);const N=this.get(e.depthTexture);if(N.renderTarget=e.renderTarget,N.cacheKey=A,s.multiview)E.framebufferTextureMultisampleMultiviewOVR(n.FRAMEBUFFER,D,N.textureGPU,0,o,0,2);else if(x&&T)_.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,D,n.TEXTURE_2D,N.textureGPU,0,o);else if(e.depthTexture.isArrayTexture){const L=this.renderer._activeCubeFace;n.framebufferTextureLayer(n.FRAMEBUFFER,D,N.textureGPU,0,L)}else n.framebufferTexture2D(n.FRAMEBUFFER,D,n.TEXTURE_2D,N.textureGPU,0)}a.depthInvalidationArray=P}else{if(this._isRenderCameraDepthArray(e)){r.bindFramebuffer(n.FRAMEBUFFER,C);const P=this.renderer._activeCubeFace,D=this.get(e.depthTexture),N=c?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.framebufferTextureLayer(n.FRAMEBUFFER,N,D.textureGPU,0,P)}if((m||T||s.multiview)&&s._isOpaqueFramebuffer!==!0){r.bindFramebuffer(n.FRAMEBUFFER,C);const P=this.get(e.textures[0]);s.multiview?E.framebufferTextureMultisampleMultiviewOVR(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,P.textureGPU,0,o,0,2):T?_.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,P.textureGPU,0,o):n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,P.textureGPU,0);const D=c?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;if(s._autoAllocateDepthBuffer===!0){const N=a.xrDepthRenderbuffer;n.bindRenderbuffer(n.RENDERBUFFER,N),n.framebufferRenderbuffer(n.FRAMEBUFFER,D,n.RENDERBUFFER,N)}else{const N=this.get(e.depthTexture);s.multiview?E.framebufferTextureMultisampleMultiviewOVR(n.FRAMEBUFFER,D,N.textureGPU,0,o,0,2):T?_.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,D,n.TEXTURE_2D,N.textureGPU,0,o):n.framebufferTexture2D(n.FRAMEBUFFER,D,n.TEXTURE_2D,N.textureGPU,0)}}}if(o>0&&T===!1&&!s.multiview){if(b===void 0){const M=[];b=n.createFramebuffer(),r.bindFramebuffer(n.FRAMEBUFFER,b);const P=[],D=e.textures;for(let N=0;N<D.length;N++){P[N]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,P[N]),M.push(n.COLOR_ATTACHMENT0+N);const L=e.textures[N],k=this.get(L);n.renderbufferStorageMultisample(n.RENDERBUFFER,o,k.glInternalFormat,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+N,n.RENDERBUFFER,P[N])}if(n.bindRenderbuffer(n.RENDERBUFFER,null),a.msaaFrameBuffer=b,a.msaaRenderbuffers=P,l&&v===void 0){v=n.createRenderbuffer(),this.textureUtils.setupRenderBufferStorage(v,e,o),a.depthRenderbuffer=v;const N=c?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;M.push(N)}a.invalidationArray=M}i=a.msaaFrameBuffer}else i=C;r.drawBuffers(e,C)}r.bindFramebuffer(n.FRAMEBUFFER,i)}_getVaoKey(e){let n="";for(let r=0;r<e.length;r++){const i=this.get(e[r]);n+=":"+i.id}return n}_createVao(e){const{gl:n}=this,r=n.createVertexArray();n.bindVertexArray(r);for(let i=0;i<e.length;i++){const s=e[i],a=this.get(s);n.bindBuffer(n.ARRAY_BUFFER,a.bufferGPU),n.enableVertexAttribArray(i);let o,l;s.isInterleavedBufferAttribute===!0?(o=s.data.stride*a.bytesPerElement,l=s.offset*a.bytesPerElement):(o=0,l=0),a.isInteger?n.vertexAttribIPointer(i,s.itemSize,a.type,o,l):n.vertexAttribPointer(i,s.itemSize,a.type,s.normalized,o,l),s.isInstancedBufferAttribute&&!s.isInterleavedBufferAttribute?n.vertexAttribDivisor(i,s.meshPerAttribute):s.isInterleavedBufferAttribute&&s.data.isInstancedInterleavedBuffer&&n.vertexAttribDivisor(i,s.data.meshPerAttribute)}return n.bindBuffer(n.ARRAY_BUFFER,null),r}_getTransformFeedback(e){let n="";for(let s=0;s<e.length;s++)n+=":"+e[s].id;let r=this.transformFeedbackCache[n];if(r!==void 0)return r;const{gl:i}=this;r=i.createTransformFeedback(),i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,r);for(let s=0;s<e.length;s++){const a=e[s];i.bindBufferBase(i.TRANSFORM_FEEDBACK_BUFFER,s,a.transformBuffer)}return i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,null),this.transformFeedbackCache[n]=r,r}_setupBindings(e,n){const r=this.gl;for(const i of e)for(const s of i.bindings){const o=this.get(s).index;if(s.isUniformsGroup||s.isUniformBuffer){const l=r.getUniformBlockIndex(n,s.name);r.uniformBlockBinding(n,l,o)}else if(s.isSampledTexture){const l=r.getUniformLocation(n,s.name);r.uniform1i(l,o)}}}_bindUniforms(e){const{gl:n,state:r}=this;for(const i of e)for(const s of i.bindings){const a=this.get(s),o=a.index;s.isUniformsGroup||s.isUniformBuffer?r.bindBufferBase(n.UNIFORM_BUFFER,o,a.bufferGPU):s.isSampledTexture&&r.bindTexture(a.glTextureType,a.textureGPU,n.TEXTURE0+o)}}_resolveRenderTarget(e){const{gl:n,state:r}=this,i=e.renderTarget;if(e.textures!==null&&i){const s=this.get(i);if(i.samples>0&&this._useMultisampledExtension(i)===!1){const a=s.framebuffers[e.getCacheKey()];let o=n.COLOR_BUFFER_BIT;i.resolveDepthBuffer&&(i.depthBuffer&&(o|=n.DEPTH_BUFFER_BIT),i.stencilBuffer&&i.resolveStencilBuffer&&(o|=n.STENCIL_BUFFER_BIT));const l=s.msaaFrameBuffer,c=s.msaaRenderbuffers,u=e.textures,f=u.length>1;if(r.bindFramebuffer(n.READ_FRAMEBUFFER,l),r.bindFramebuffer(n.DRAW_FRAMEBUFFER,a),f)for(let p=0;p<u.length;p++)n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0+p,n.RENDERBUFFER,null),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+p,n.TEXTURE_2D,null,0);for(let p=0;p<u.length;p++){if(f){const{textureGPU:m}=this.get(u[p]);n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,c[p]),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,m,0)}if(e.scissor){const{x:m,y:x,width:b,height:v}=e.scissorValue,_=e.height-v-x;n.blitFramebuffer(m,_,m+b,_+v,m,_,m+b,_+v,o,n.NEAREST)}else n.blitFramebuffer(0,0,e.width,e.height,0,0,e.width,e.height,o,n.NEAREST)}if(f)for(let p=0;p<u.length;p++){const{textureGPU:m}=this.get(u[p]);n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0+p,n.RENDERBUFFER,c[p]),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+p,n.TEXTURE_2D,m,0)}this._supportsInvalidateFramebuffer===!0&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,s.invalidationArray)}else if(i.resolveDepthBuffer===!1&&s.framebuffers){const a=s.framebuffers[e.getCacheKey()];r.bindFramebuffer(n.DRAW_FRAMEBUFFER,a),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,s.depthInvalidationArray)}}}_useMultisampledExtension(e){return e.multiview===!0?!0:e.samples>0&&this.extensions.has("WEBGL_multisampled_render_to_texture")===!0&&e._autoAllocateDepthBuffer!==!1}dispose(){this.textureUtils!==null&&this.textureUtils.dispose();const e=this.extensions.get("WEBGL_lose_context");e&&e.loseContext(),this.renderer.domElement.removeEventListener("webglcontextlost",this._onContextLost)}}const Pg={PointList:"point-list",LineList:"line-list",LineStrip:"line-strip",TriangleList:"triangle-list",TriangleStrip:"triangle-strip"},Ps={Never:"never",Less:"less",Equal:"equal",LessEqual:"less-equal",Greater:"greater",NotEqual:"not-equal",GreaterEqual:"greater-equal",Always:"always"},da={Store:"store"},er={Load:"load",Clear:"clear"},hH={CCW:"ccw",CW:"cw"},pH={None:"none",Back:"back"},q0={Uint16:"uint16",Uint32:"uint32"},de={R8Unorm:"r8unorm",R8Snorm:"r8snorm",R8Uint:"r8uint",R8Sint:"r8sint",R16Uint:"r16uint",R16Sint:"r16sint",R16Float:"r16float",RG8Unorm:"rg8unorm",RG8Snorm:"rg8snorm",RG8Uint:"rg8uint",RG8Sint:"rg8sint",R32Uint:"r32uint",R32Sint:"r32sint",R32Float:"r32float",RG16Uint:"rg16uint",RG16Sint:"rg16sint",RG16Float:"rg16float",RGBA8Unorm:"rgba8unorm",RGBA8UnormSRGB:"rgba8unorm-srgb",RGBA8Snorm:"rgba8snorm",RGBA8Uint:"rgba8uint",RGBA8Sint:"rgba8sint",BGRA8Unorm:"bgra8unorm",BGRA8UnormSRGB:"bgra8unorm-srgb",RGB9E5UFloat:"rgb9e5ufloat",RGB10A2Unorm:"rgb10a2unorm",RG11B10UFloat:"rg11b10ufloat",RG32Uint:"rg32uint",RG32Sint:"rg32sint",RG32Float:"rg32float",RGBA16Uint:"rgba16uint",RGBA16Sint:"rgba16sint",RGBA16Float:"rgba16float",RGBA32Uint:"rgba32uint",RGBA32Sint:"rgba32sint",RGBA32Float:"rgba32float",Depth16Unorm:"depth16unorm",Depth24Plus:"depth24plus",Depth24PlusStencil8:"depth24plus-stencil8",Depth32Float:"depth32float",Depth32FloatStencil8:"depth32float-stencil8",BC1RGBAUnorm:"bc1-rgba-unorm",BC1RGBAUnormSRGB:"bc1-rgba-unorm-srgb",BC2RGBAUnorm:"bc2-rgba-unorm",BC2RGBAUnormSRGB:"bc2-rgba-unorm-srgb",BC3RGBAUnorm:"bc3-rgba-unorm",BC3RGBAUnormSRGB:"bc3-rgba-unorm-srgb",BC4RUnorm:"bc4-r-unorm",BC4RSnorm:"bc4-r-snorm",BC5RGUnorm:"bc5-rg-unorm",BC5RGSnorm:"bc5-rg-snorm",BC6HRGBUFloat:"bc6h-rgb-ufloat",BC6HRGBFloat:"bc6h-rgb-float",BC7RGBAUnorm:"bc7-rgba-unorm",BC7RGBAUnormSRGB:"bc7-rgba-unorm-srgb",ETC2RGB8Unorm:"etc2-rgb8unorm",ETC2RGB8UnormSRGB:"etc2-rgb8unorm-srgb",ETC2RGB8A1Unorm:"etc2-rgb8a1unorm",ETC2RGB8A1UnormSRGB:"etc2-rgb8a1unorm-srgb",ETC2RGBA8Unorm:"etc2-rgba8unorm",ETC2RGBA8UnormSRGB:"etc2-rgba8unorm-srgb",EACR11Unorm:"eac-r11unorm",EACR11Snorm:"eac-r11snorm",EACRG11Unorm:"eac-rg11unorm",EACRG11Snorm:"eac-rg11snorm",ASTC4x4Unorm:"astc-4x4-unorm",ASTC4x4UnormSRGB:"astc-4x4-unorm-srgb",ASTC5x4Unorm:"astc-5x4-unorm",ASTC5x4UnormSRGB:"astc-5x4-unorm-srgb",ASTC5x5Unorm:"astc-5x5-unorm",ASTC5x5UnormSRGB:"astc-5x5-unorm-srgb",ASTC6x5Unorm:"astc-6x5-unorm",ASTC6x5UnormSRGB:"astc-6x5-unorm-srgb",ASTC6x6Unorm:"astc-6x6-unorm",ASTC6x6UnormSRGB:"astc-6x6-unorm-srgb",ASTC8x5Unorm:"astc-8x5-unorm",ASTC8x5UnormSRGB:"astc-8x5-unorm-srgb",ASTC8x6Unorm:"astc-8x6-unorm",ASTC8x6UnormSRGB:"astc-8x6-unorm-srgb",ASTC8x8Unorm:"astc-8x8-unorm",ASTC8x8UnormSRGB:"astc-8x8-unorm-srgb",ASTC10x5Unorm:"astc-10x5-unorm",ASTC10x5UnormSRGB:"astc-10x5-unorm-srgb",ASTC10x6Unorm:"astc-10x6-unorm",ASTC10x6UnormSRGB:"astc-10x6-unorm-srgb",ASTC10x8Unorm:"astc-10x8-unorm",ASTC10x8UnormSRGB:"astc-10x8-unorm-srgb",ASTC10x10Unorm:"astc-10x10-unorm",ASTC10x10UnormSRGB:"astc-10x10-unorm-srgb",ASTC12x10Unorm:"astc-12x10-unorm",ASTC12x10UnormSRGB:"astc-12x10-unorm-srgb",ASTC12x12Unorm:"astc-12x12-unorm",ASTC12x12UnormSRGB:"astc-12x12-unorm-srgb"},sN={ClampToEdge:"clamp-to-edge",Repeat:"repeat",MirrorRepeat:"mirror-repeat"},Jh={Linear:"linear",Nearest:"nearest"},On={Zero:"zero",One:"one",Src:"src",OneMinusSrc:"one-minus-src",SrcAlpha:"src-alpha",OneMinusSrcAlpha:"one-minus-src-alpha",Dst:"dst",OneMinusDst:"one-minus-dst",DstAlpha:"dst-alpha",OneMinusDstAlpha:"one-minus-dst-alpha",SrcAlphaSaturated:"src-alpha-saturated",Constant:"constant",OneMinusConstant:"one-minus-constant"},Dh={Add:"add",Subtract:"subtract",ReverseSubtract:"reverse-subtract",Min:"min",Max:"max"},mH={None:0,All:15},df={Keep:"keep",Zero:"zero",Replace:"replace",Invert:"invert",IncrementClamp:"increment-clamp",DecrementClamp:"decrement-clamp",IncrementWrap:"increment-wrap",DecrementWrap:"decrement-wrap"},aN={Storage:"storage",ReadOnlyStorage:"read-only-storage"},oN={WriteOnly:"write-only",ReadOnly:"read-only",ReadWrite:"read-write"},gH={NonFiltering:"non-filtering",Comparison:"comparison"},Lh={Float:"float",UnfilterableFloat:"unfilterable-float",Depth:"depth",SInt:"sint",UInt:"uint"},xH={TwoD:"2d",ThreeD:"3d"},Fi={TwoD:"2d",TwoDArray:"2d-array",Cube:"cube",ThreeD:"3d"},u6e={All:"all"},jw={Vertex:"vertex",Instance:"instance"},xL={CoreFeaturesAndLimits:"core-features-and-limits",DepthClipControl:"depth-clip-control",Depth32FloatStencil8:"depth32float-stencil8",TextureCompressionBC:"texture-compression-bc",TextureCompressionBCSliced3D:"texture-compression-bc-sliced-3d",TextureCompressionETC2:"texture-compression-etc2",TextureCompressionASTC:"texture-compression-astc",TextureCompressionASTCSliced3D:"texture-compression-astc-sliced-3d",TimestampQuery:"timestamp-query",IndirectFirstInstance:"indirect-first-instance",ShaderF16:"shader-f16",RG11B10UFloat:"rg11b10ufloat-renderable",BGRA8UNormStorage:"bgra8unorm-storage",Float32Filterable:"float32-filterable",Float32Blendable:"float32-blendable",ClipDistances:"clip-distances",DualSourceBlending:"dual-source-blending",Subgroups:"subgroups",TextureFormatsTier1:"texture-formats-tier1",TextureFormatsTier2:"texture-formats-tier2"},yH={"texture-compression-s3tc":"texture-compression-bc","texture-compression-etc1":"texture-compression-etc2"};class d6e extends _te{constructor(e,n,r){super(e,n?n.value:null),this.textureNode=n,this.groupNode=r}update(){const{textureNode:e}=this;return this.texture!==e.value?(this.texture=e.value,!0):super.update()}}class f6e extends xte{constructor(e,n){super(e,n?n.array:null),this.attribute=n,this.isStorageBuffer=!0}}let h6e=0;class p6e extends f6e{constructor(e,n){super("StorageBuffer_"+h6e++,e?e.value:null),this.nodeUniform=e,this.access=e?e.access:Mc.READ_WRITE,this.groupNode=n}get buffer(){return this.nodeUniform.value}}class m6e extends Jf{constructor(e){super(),this.device=e;const n=`
struct VarysStruct {
	@builtin( position ) Position: vec4<f32>,
	@location( 0 ) vTex : vec2<f32>
};

@vertex
fn main( @builtin( vertex_index ) vertexIndex : u32 ) -> VarysStruct {

	var Varys : VarysStruct;

	var pos = array< vec2<f32>, 4 >(
		vec2<f32>( -1.0,  1.0 ),
		vec2<f32>(  1.0,  1.0 ),
		vec2<f32>( -1.0, -1.0 ),
		vec2<f32>(  1.0, -1.0 )
	);

	var tex = array< vec2<f32>, 4 >(
		vec2<f32>( 0.0, 0.0 ),
		vec2<f32>( 1.0, 0.0 ),
		vec2<f32>( 0.0, 1.0 ),
		vec2<f32>( 1.0, 1.0 )
	);

	Varys.vTex = tex[ vertexIndex ];
	Varys.Position = vec4<f32>( pos[ vertexIndex ], 0.0, 1.0 );

	return Varys;

}
`,r=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vTex );

}
`,i=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vec2( vTex.x, 1.0 - vTex.y ) );

}
`;this.mipmapSampler=e.createSampler({minFilter:Jh.Linear}),this.flipYSampler=e.createSampler({minFilter:Jh.Nearest}),this.transferPipelines={},this.flipYPipelines={},this.mipmapVertexShaderModule=e.createShaderModule({label:"mipmapVertex",code:n}),this.mipmapFragmentShaderModule=e.createShaderModule({label:"mipmapFragment",code:r}),this.flipYFragmentShaderModule=e.createShaderModule({label:"flipYFragment",code:i})}getTransferPipeline(e){let n=this.transferPipelines[e];return n===void 0&&(n=this.device.createRenderPipeline({label:`mipmap-${e}`,vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.mipmapFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:Pg.TriangleStrip,stripIndexFormat:q0.Uint32},layout:"auto"}),this.transferPipelines[e]=n),n}getFlipYPipeline(e){let n=this.flipYPipelines[e];return n===void 0&&(n=this.device.createRenderPipeline({label:`flipY-${e}`,vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.flipYFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:Pg.TriangleStrip,stripIndexFormat:q0.Uint32},layout:"auto"}),this.flipYPipelines[e]=n),n}flipY(e,n,r=0){const i=n.format,{width:s,height:a}=n.size,o=this.getTransferPipeline(i),l=this.getFlipYPipeline(i),c=this.device.createTexture({size:{width:s,height:a,depthOrArrayLayers:1},format:i,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING}),u=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:Fi.TwoD,baseArrayLayer:r}),f=c.createView({baseMipLevel:0,mipLevelCount:1,dimension:Fi.TwoD,baseArrayLayer:0}),p=this.device.createCommandEncoder({}),m=(x,b,v)=>{const _=x.getBindGroupLayout(0),E=this.device.createBindGroup({layout:_,entries:[{binding:0,resource:this.flipYSampler},{binding:1,resource:b}]}),T=p.beginRenderPass({colorAttachments:[{view:v,loadOp:er.Clear,storeOp:da.Store,clearValue:[0,0,0,0]}]});T.setPipeline(x),T.setBindGroup(0,E),T.draw(4,1,0,0),T.end()};m(o,u,f),m(l,f,u),this.device.queue.submit([p.finish()]),c.destroy()}generateMipmaps(e,n,r=0,i=null){const s=this.get(e);s.layers===void 0&&(s.layers=[]);const a=s.layers[r]||this._mipmapCreateBundles(e,n,r),o=i||this.device.createCommandEncoder({label:"mipmapEncoder"});this._mipmapRunBundles(o,a),i===null&&this.device.queue.submit([o.finish()]),s.layers[r]=a}_mipmapCreateBundles(e,n,r){const i=this.getTransferPipeline(n.format),s=i.getBindGroupLayout(0);let a=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:Fi.TwoD,baseArrayLayer:r});const o=[];for(let l=1;l<n.mipLevelCount;l++){const c=this.device.createBindGroup({layout:s,entries:[{binding:0,resource:this.mipmapSampler},{binding:1,resource:a}]}),u=e.createView({baseMipLevel:l,mipLevelCount:1,dimension:Fi.TwoD,baseArrayLayer:r}),f={colorAttachments:[{view:u,loadOp:er.Clear,storeOp:da.Store,clearValue:[0,0,0,0]}]},p=this.device.createRenderBundleEncoder({colorFormats:[n.format]});p.setPipeline(i),p.setBindGroup(0,c),p.draw(4,1,0,0),o.push({renderBundles:[p.finish()],passDescriptor:f}),a=u}return o}_mipmapRunBundles(e,n){const r=n.length;for(let i=0;i<r;i++){const s=n[i],a=e.beginRenderPass(s.passDescriptor);a.executeBundles(s.renderBundles),a.end()}}}const g6e={[qk]:"never",[oC]:"less",[Xk]:"equal",[lC]:"less-equal",[Yk]:"greater",[Zk]:"greater-equal",[Qk]:"always",[Kk]:"not-equal"},x6e=[0,1,3,2,4,5];class y6e{constructor(e){this.backend=e,this._passUtils=null,this.defaultTexture={},this.defaultCubeTexture={},this.defaultVideoFrame=null,this._samplerCache=new Map}updateSampler(e){const n=this.backend,r=e.minFilter+"-"+e.magFilter+"-"+e.wrapS+"-"+e.wrapT+"-"+(e.wrapR||"0")+"-"+e.anisotropy+"-"+(e.compareFunction||0);let i=this._samplerCache.get(r);if(i===void 0){const a={addressModeU:this._convertAddressMode(e.wrapS),addressModeV:this._convertAddressMode(e.wrapT),addressModeW:this._convertAddressMode(e.wrapR),magFilter:this._convertFilterMode(e.magFilter),minFilter:this._convertFilterMode(e.minFilter),mipmapFilter:this._convertFilterMode(e.minFilter),maxAnisotropy:1};a.magFilter===Jh.Linear&&a.minFilter===Jh.Linear&&a.mipmapFilter===Jh.Linear&&(a.maxAnisotropy=e.anisotropy),e.isDepthTexture&&e.compareFunction!==null&&(a.compare=g6e[e.compareFunction]),i={sampler:n.device.createSampler(a),usedTimes:0},this._samplerCache.set(r,i)}const s=n.get(e);if(s.sampler!==i.sampler){if(s.sampler!==void 0){const a=this._samplerCache.get(s.samplerKey);a.usedTimes--,a.usedTimes===0&&this._samplerCache.delete(s.samplerKey)}s.samplerKey=r,s.sampler=i.sampler,i.usedTimes++}return r}createDefaultTexture(e){let n;const r=yL(e);e.isCubeTexture?n=this._getDefaultCubeTextureGPU(r):n=this._getDefaultTextureGPU(r),this.backend.get(e).texture=n}createTexture(e,n={}){const r=this.backend,i=r.get(e);if(i.initialized)throw new Error("WebGPUTextureUtils: Texture already initialized.");if(e.isExternalTexture){i.texture=e.sourceTexture,i.initialized=!0;return}n.needsMipmaps===void 0&&(n.needsMipmaps=!1),n.levels===void 0&&(n.levels=1),n.depth===void 0&&(n.depth=1);const{width:s,height:a,depth:o,levels:l}=n;e.isFramebufferTexture&&(n.renderTarget?n.format=this.backend.utils.getCurrentColorFormat(n.renderTarget):n.format=this.backend.utils.getPreferredCanvasFormat());const c=this._getDimension(e),u=e.internalFormat||n.format||yL(e,r.device);i.format=u;const{samples:f,primarySamples:p,isMSAA:m}=r.utils.getTextureSampleData(e);let x=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC;e.isStorageTexture===!0&&(x|=GPUTextureUsage.STORAGE_BINDING),e.isCompressedTexture!==!0&&e.isCompressedArrayTexture!==!0&&u!==de.RGB9E5UFloat&&(x|=GPUTextureUsage.RENDER_ATTACHMENT);const b={label:e.name,size:{width:s,height:a,depthOrArrayLayers:o},mipLevelCount:l,sampleCount:p,dimension:c,format:u,usage:x};if(u===void 0){ct("WebGPURenderer: Texture format not supported."),this.createDefaultTexture(e);return}if(e.isCubeTexture&&(b.textureBindingViewDimension=Fi.Cube),i.texture=r.device.createTexture(b),m){const v=Object.assign({},b);v.label=v.label+"-msaa",v.sampleCount=f,v.mipLevelCount=1,i.msaaTexture=r.device.createTexture(v)}i.initialized=!0,i.textureDescriptorGPU=b}destroyTexture(e,n=!1){const r=this.backend,i=r.get(e);i.texture!==void 0&&n===!1&&i.texture.destroy(),i.msaaTexture!==void 0&&i.msaaTexture.destroy(),r.delete(e)}generateMipmaps(e,n=null){const r=this.backend.get(e);if(e.isCubeTexture)for(let i=0;i<6;i++)this._generateMipmaps(r.texture,r.textureDescriptorGPU,i,n);else{const i=e.image.depth||1;for(let s=0;s<i;s++)this._generateMipmaps(r.texture,r.textureDescriptorGPU,s,n)}}getColorBuffer(){const e=this.backend,n=e.renderer.getCanvasTarget(),{width:r,height:i}=e.getDrawingBufferSize(),s=e.renderer.currentSamples,a=n.colorTexture,o=e.get(a);if(a.width===r&&a.height===i&&a.samples===s)return o.texture;let l=o.texture;return l&&l.destroy(),l=e.device.createTexture({label:"colorBuffer",size:{width:r,height:i,depthOrArrayLayers:1},sampleCount:e.utils.getSampleCount(e.renderer.currentSamples),format:e.utils.getPreferredCanvasFormat(),usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC}),a.source.width=r,a.source.height=i,a.samples=s,o.texture=l,l}getDepthBuffer(e=!0,n=!1){const r=this.backend,i=r.renderer.getCanvasTarget(),{width:s,height:a}=r.getDrawingBufferSize(),o=r.renderer.currentSamples,l=i.depthTexture;if(l.width===s&&l.height===a&&l.samples===o&&l.depth===e&&l.stencil===n)return r.get(l).texture;const c=r.get(l).texture;let u,f;if(n?(u=Ao,f=Eo):e&&(u=Co,f=Ar),c!==void 0){if(l.image.width===s&&l.image.height===a&&l.format===u&&l.type===f&&l.samples===o)return c;this.destroyTexture(l)}return l.name="depthBuffer",l.format=u,l.type=f,l.image.width=s,l.image.height=a,l.samples=o,this.createTexture(l,{width:s,height:a}),r.get(l).texture}updateTexture(e,n){const r=this.backend.get(e),i=e.mipmaps,{textureDescriptorGPU:s}=r;if(!(e.isRenderTargetTexture||s===void 0)){if(e.isDataTexture)if(i.length>0)for(let a=0,o=i.length;a<o;a++){const l=i[a];this._copyBufferToTexture(l,r.texture,s,0,e.flipY,0,a)}else this._copyBufferToTexture(n.image,r.texture,s,0,e.flipY);else if(e.isArrayTexture||e.isDataArrayTexture||e.isData3DTexture)for(let a=0;a<n.image.depth;a++)this._copyBufferToTexture(n.image,r.texture,s,a,e.flipY,a);else if(e.isCompressedTexture||e.isCompressedArrayTexture)this._copyCompressedBufferToTexture(e.mipmaps,r.texture,s);else if(e.isCubeTexture)this._copyCubeMapToTexture(e,r.texture,s);else if(i.length>0)for(let a=0,o=i.length;a<o;a++){const l=i[a];this._copyImageToTexture(l,r.texture,s,0,e.flipY,e.premultiplyAlpha,a)}else this._copyImageToTexture(n.image,r.texture,s,0,e.flipY,e.premultiplyAlpha);r.version=e.version}}async copyTextureToBuffer(e,n,r,i,s,a){const o=this.backend.device,l=this.backend.get(e),c=l.texture,u=l.textureDescriptorGPU.format,f=this._getBytesPerTexel(u);let p=i*f;p=Math.ceil(p/256)*256;const m=o.createBuffer({size:(s-1)*p+i*f,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),x=o.createCommandEncoder();x.copyTextureToBuffer({texture:c,origin:{x:n,y:r,z:a}},{buffer:m,bytesPerRow:p},{width:i,height:s});const b=this._getTypedArrayType(u);o.queue.submit([x.finish()]),await m.mapAsync(GPUMapMode.READ);const v=m.getMappedRange();return new b(v)}dispose(){this._samplerCache.clear()}_getDefaultTextureGPU(e){let n=this.defaultTexture[e];if(n===void 0){const r=new $i;r.minFilter=Lr,r.magFilter=Lr,this.createTexture(r,{width:1,height:1,format:e}),this.defaultTexture[e]=n=r}return this.backend.get(n).texture}_getDefaultCubeTextureGPU(e){let n=this.defaultTexture[e];if(n===void 0){const r=new M_;r.minFilter=Lr,r.magFilter=Lr,this.createTexture(r,{width:1,height:1,depth:6}),this.defaultCubeTexture[e]=n=r}return this.backend.get(n).texture}_copyCubeMapToTexture(e,n,r){const i=e.images,s=e.mipmaps;for(let a=0;a<6;a++){const o=i[a],l=e.flipY===!0?x6e[a]:a;o.isDataTexture?this._copyBufferToTexture(o.image,n,r,l,e.flipY):this._copyImageToTexture(o,n,r,l,e.flipY,e.premultiplyAlpha);for(let c=0;c<s.length;c++){const f=s[c].images[a];f.isDataTexture?this._copyBufferToTexture(f.image,n,r,l,e.flipY,0,c+1):this._copyImageToTexture(f,n,r,l,e.flipY,e.premultiplyAlpha,c+1)}}}_copyImageToTexture(e,n,r,i,s,a,o=0){const l=this.backend.device,c=o>0?e.width:r.size.width,u=o>0?e.height:r.size.height;l.queue.copyExternalImageToTexture({source:e,flipY:s},{texture:n,mipLevel:o,origin:{x:0,y:0,z:i},premultipliedAlpha:a},{width:c,height:u,depthOrArrayLayers:1})}_getPassUtils(){let e=this._passUtils;return e===null&&(this._passUtils=e=new m6e(this.backend.device)),e}_generateMipmaps(e,n,r=0,i=null){this._getPassUtils().generateMipmaps(e,n,r,i)}_flipY(e,n,r=0){this._getPassUtils().flipY(e,n,r)}_copyBufferToTexture(e,n,r,i,s,a=0,o=0){const l=this.backend.device,c=e.data,u=this._getBytesPerTexel(r.format),f=e.width*u;l.queue.writeTexture({texture:n,mipLevel:o,origin:{x:0,y:0,z:i}},c,{offset:e.width*e.height*u*a,bytesPerRow:f},{width:e.width,height:e.height,depthOrArrayLayers:1}),s===!0&&this._flipY(n,r,i)}_copyCompressedBufferToTexture(e,n,r){const i=this.backend.device,s=this._getBlockData(r.format),a=r.size.depthOrArrayLayers>1;for(let o=0;o<e.length;o++){const l=e[o],c=l.width,u=l.height,f=a?r.size.depthOrArrayLayers:1,p=Math.ceil(c/s.width)*s.byteLength,m=p*Math.ceil(u/s.height);for(let x=0;x<f;x++)i.queue.writeTexture({texture:n,mipLevel:o,origin:{x:0,y:0,z:x}},l.data,{offset:x*m,bytesPerRow:p,rowsPerImage:Math.ceil(u/s.height)},{width:Math.ceil(c/s.width)*s.width,height:Math.ceil(u/s.height)*s.height,depthOrArrayLayers:1})}}_getBlockData(e){if(e===de.BC1RGBAUnorm||e===de.BC1RGBAUnormSRGB)return{byteLength:8,width:4,height:4};if(e===de.BC2RGBAUnorm||e===de.BC2RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===de.BC3RGBAUnorm||e===de.BC3RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===de.BC4RUnorm||e===de.BC4RSnorm)return{byteLength:8,width:4,height:4};if(e===de.BC5RGUnorm||e===de.BC5RGSnorm)return{byteLength:16,width:4,height:4};if(e===de.BC6HRGBUFloat||e===de.BC6HRGBFloat)return{byteLength:16,width:4,height:4};if(e===de.BC7RGBAUnorm||e===de.BC7RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===de.ETC2RGB8Unorm||e===de.ETC2RGB8UnormSRGB)return{byteLength:8,width:4,height:4};if(e===de.ETC2RGB8A1Unorm||e===de.ETC2RGB8A1UnormSRGB)return{byteLength:8,width:4,height:4};if(e===de.ETC2RGBA8Unorm||e===de.ETC2RGBA8UnormSRGB)return{byteLength:16,width:4,height:4};if(e===de.EACR11Unorm)return{byteLength:8,width:4,height:4};if(e===de.EACR11Snorm)return{byteLength:8,width:4,height:4};if(e===de.EACRG11Unorm)return{byteLength:16,width:4,height:4};if(e===de.EACRG11Snorm)return{byteLength:16,width:4,height:4};if(e===de.ASTC4x4Unorm||e===de.ASTC4x4UnormSRGB)return{byteLength:16,width:4,height:4};if(e===de.ASTC5x4Unorm||e===de.ASTC5x4UnormSRGB)return{byteLength:16,width:5,height:4};if(e===de.ASTC5x5Unorm||e===de.ASTC5x5UnormSRGB)return{byteLength:16,width:5,height:5};if(e===de.ASTC6x5Unorm||e===de.ASTC6x5UnormSRGB)return{byteLength:16,width:6,height:5};if(e===de.ASTC6x6Unorm||e===de.ASTC6x6UnormSRGB)return{byteLength:16,width:6,height:6};if(e===de.ASTC8x5Unorm||e===de.ASTC8x5UnormSRGB)return{byteLength:16,width:8,height:5};if(e===de.ASTC8x6Unorm||e===de.ASTC8x6UnormSRGB)return{byteLength:16,width:8,height:6};if(e===de.ASTC8x8Unorm||e===de.ASTC8x8UnormSRGB)return{byteLength:16,width:8,height:8};if(e===de.ASTC10x5Unorm||e===de.ASTC10x5UnormSRGB)return{byteLength:16,width:10,height:5};if(e===de.ASTC10x6Unorm||e===de.ASTC10x6UnormSRGB)return{byteLength:16,width:10,height:6};if(e===de.ASTC10x8Unorm||e===de.ASTC10x8UnormSRGB)return{byteLength:16,width:10,height:8};if(e===de.ASTC10x10Unorm||e===de.ASTC10x10UnormSRGB)return{byteLength:16,width:10,height:10};if(e===de.ASTC12x10Unorm||e===de.ASTC12x10UnormSRGB)return{byteLength:16,width:12,height:10};if(e===de.ASTC12x12Unorm||e===de.ASTC12x12UnormSRGB)return{byteLength:16,width:12,height:12}}_convertAddressMode(e){let n=sN.ClampToEdge;return e===Mp?n=sN.Repeat:e===Rp&&(n=sN.MirrorRepeat),n}_convertFilterMode(e){let n=Jh.Linear;return(e===Lr||e===Hk||e===Vu)&&(n=Jh.Nearest),n}_getBytesPerTexel(e){if(e===de.R8Unorm||e===de.R8Snorm||e===de.R8Uint||e===de.R8Sint)return 1;if(e===de.R16Uint||e===de.R16Sint||e===de.R16Float||e===de.RG8Unorm||e===de.RG8Snorm||e===de.RG8Uint||e===de.RG8Sint)return 2;if(e===de.R32Uint||e===de.R32Sint||e===de.R32Float||e===de.RG16Uint||e===de.RG16Sint||e===de.RG16Float||e===de.RGBA8Unorm||e===de.RGBA8UnormSRGB||e===de.RGBA8Snorm||e===de.RGBA8Uint||e===de.RGBA8Sint||e===de.BGRA8Unorm||e===de.BGRA8UnormSRGB||e===de.RGB9E5UFloat||e===de.RGB10A2Unorm||e===de.RG11B10UFloat||e===de.Depth32Float||e===de.Depth24Plus||e===de.Depth24PlusStencil8||e===de.Depth32FloatStencil8)return 4;if(e===de.RG32Uint||e===de.RG32Sint||e===de.RG32Float||e===de.RGBA16Uint||e===de.RGBA16Sint||e===de.RGBA16Float)return 8;if(e===de.RGBA32Uint||e===de.RGBA32Sint||e===de.RGBA32Float)return 16}_getTypedArrayType(e){if(e===de.R8Uint)return Uint8Array;if(e===de.R8Sint)return Int8Array;if(e===de.R8Unorm)return Uint8Array;if(e===de.R8Snorm)return Int8Array;if(e===de.RG8Uint)return Uint8Array;if(e===de.RG8Sint)return Int8Array;if(e===de.RG8Unorm)return Uint8Array;if(e===de.RG8Snorm)return Int8Array;if(e===de.RGBA8Uint)return Uint8Array;if(e===de.RGBA8Sint)return Int8Array;if(e===de.RGBA8Unorm||e===de.RGBA8UnormSRGB)return Uint8Array;if(e===de.RGBA8Snorm)return Int8Array;if(e===de.R16Uint)return Uint16Array;if(e===de.R16Sint)return Int16Array;if(e===de.RG16Uint)return Uint16Array;if(e===de.RG16Sint)return Int16Array;if(e===de.RGBA16Uint)return Uint16Array;if(e===de.RGBA16Sint)return Int16Array;if(e===de.R16Float||e===de.RG16Float||e===de.RGBA16Float)return Uint16Array;if(e===de.R32Uint)return Uint32Array;if(e===de.R32Sint)return Int32Array;if(e===de.R32Float)return Float32Array;if(e===de.RG32Uint)return Uint32Array;if(e===de.RG32Sint)return Int32Array;if(e===de.RG32Float)return Float32Array;if(e===de.RGBA32Uint)return Uint32Array;if(e===de.RGBA32Sint)return Int32Array;if(e===de.RGBA32Float)return Float32Array;if(e===de.BGRA8Unorm||e===de.BGRA8UnormSRGB)return Uint8Array;if(e===de.RGB10A2Unorm||e===de.RGB9E5UFloat||e===de.RG11B10UFloat)return Uint32Array;if(e===de.Depth32Float)return Float32Array;if(e===de.Depth24Plus||e===de.Depth24PlusStencil8)return Uint32Array;if(e===de.Depth32FloatStencil8)return Float32Array}_getDimension(e){let n;return e.is3DTexture||e.isData3DTexture?n=xH.ThreeD:n=xH.TwoD,n}}function yL(t,e=null){const n=t.format,r=t.type,i=t.colorSpace,s=sn.getTransfer(i);let a;if(t.isCompressedTexture===!0||t.isCompressedArrayTexture===!0)switch(n){case Af:case Mf:a=s===Ot?de.BC1RGBAUnormSRGB:de.BC1RGBAUnorm;break;case Rf:a=s===Ot?de.BC2RGBAUnormSRGB:de.BC2RGBAUnorm;break;case Pf:a=s===Ot?de.BC3RGBAUnormSRGB:de.BC3RGBAUnorm;break;case N0:a=de.BC4RUnorm;break;case O0:a=de.BC4RSnorm;break;case D0:a=de.BC5RGUnorm;break;case L0:a=de.BC5RGSnorm;break;case P0:a=s===Ot?de.BC7RGBAUnormSRGB:de.BC7RGBAUnorm;break;case p0:case h0:a=s===Ot?de.ETC2RGB8UnormSRGB:de.ETC2RGB8Unorm;break;case m0:a=s===Ot?de.ETC2RGBA8UnormSRGB:de.ETC2RGBA8Unorm;break;case g0:a=s===Ot?de.ASTC4x4UnormSRGB:de.ASTC4x4Unorm;break;case x0:a=s===Ot?de.ASTC5x4UnormSRGB:de.ASTC5x4Unorm;break;case y0:a=s===Ot?de.ASTC5x5UnormSRGB:de.ASTC5x5Unorm;break;case v0:a=s===Ot?de.ASTC6x5UnormSRGB:de.ASTC6x5Unorm;break;case b0:a=s===Ot?de.ASTC6x6UnormSRGB:de.ASTC6x6Unorm;break;case _0:a=s===Ot?de.ASTC8x5UnormSRGB:de.ASTC8x5Unorm;break;case S0:a=s===Ot?de.ASTC8x6UnormSRGB:de.ASTC8x6Unorm;break;case w0:a=s===Ot?de.ASTC8x8UnormSRGB:de.ASTC8x8Unorm;break;case T0:a=s===Ot?de.ASTC10x5UnormSRGB:de.ASTC10x5Unorm;break;case E0:a=s===Ot?de.ASTC10x6UnormSRGB:de.ASTC10x6Unorm;break;case C0:a=s===Ot?de.ASTC10x8UnormSRGB:de.ASTC10x8Unorm;break;case A0:a=s===Ot?de.ASTC10x10UnormSRGB:de.ASTC10x10Unorm;break;case M0:a=s===Ot?de.ASTC12x10UnormSRGB:de.ASTC12x10Unorm;break;case R0:a=s===Ot?de.ASTC12x12UnormSRGB:de.ASTC12x12Unorm;break;case gi:a=s===Ot?de.RGBA8UnormSRGB:de.RGBA8Unorm;break;default:xt("WebGPURenderer: Unsupported texture format.",n)}else switch(n){case gi:switch(r){case hp:a=de.RGBA8Snorm;break;case pp:a=de.RGBA16Sint;break;case zl:a=de.RGBA16Uint;break;case Ar:a=de.RGBA32Uint;break;case xs:a=de.RGBA32Sint;break;case si:a=s===Ot?de.RGBA8UnormSRGB:de.RGBA8Unorm;break;case Ci:a=de.RGBA16Float;break;case Ti:a=de.RGBA32Float;break;default:xt("WebGPURenderer: Unsupported texture type with RGBAFormat.",r)}break;case E_:switch(r){case sC:a=de.RGB9E5UFloat;break;case aC:a=de.RG11B10UFloat;break;default:xt("WebGPURenderer: Unsupported texture type with RGBFormat.",r)}break;case C_:switch(r){case hp:a=de.R8Snorm;break;case pp:a=de.R16Sint;break;case zl:a=de.R16Uint;break;case Ar:a=de.R32Uint;break;case xs:a=de.R32Sint;break;case si:a=de.R8Unorm;break;case Ci:a=de.R16Float;break;case Ti:a=de.R32Float;break;default:xt("WebGPURenderer: Unsupported texture type with RedFormat.",r)}break;case $l:switch(r){case hp:a=de.RG8Snorm;break;case pp:a=de.RG16Sint;break;case zl:a=de.RG16Uint;break;case Ar:a=de.RG32Uint;break;case xs:a=de.RG32Sint;break;case si:a=de.RG8Unorm;break;case Ci:a=de.RG16Float;break;case Ti:a=de.RG32Float;break;default:xt("WebGPURenderer: Unsupported texture type with RGFormat.",r)}break;case Co:switch(r){case zl:a=de.Depth16Unorm;break;case Ar:a=de.Depth24Plus;break;case Ti:a=de.Depth32Float;break;default:xt("WebGPURenderer: Unsupported texture type with DepthFormat.",r)}break;case Ao:switch(r){case Eo:a=de.Depth24PlusStencil8;break;case Ti:e&&e.features.has(xL.Depth32FloatStencil8)===!1&&xt('WebGPURenderer: Depth textures with DepthStencilFormat + FloatType can only be used with the "depth32float-stencil8" GPU feature.'),a=de.Depth32FloatStencil8;break;default:xt("WebGPURenderer: Unsupported texture type with DepthStencilFormat.",r)}break;case xx:switch(r){case xs:a=de.R32Sint;break;case Ar:a=de.R32Uint;break;default:xt("WebGPURenderer: Unsupported texture type with RedIntegerFormat.",r)}break;case yx:switch(r){case xs:a=de.RG32Sint;break;case Ar:a=de.RG32Uint;break;default:xt("WebGPURenderer: Unsupported texture type with RGIntegerFormat.",r)}break;case vx:switch(r){case xs:a=de.RGBA32Sint;break;case Ar:a=de.RGBA32Uint;break;default:xt("WebGPURenderer: Unsupported texture type with RGBAIntegerFormat.",r)}break;default:xt("WebGPURenderer: Unsupported texture format.",n)}return a}const v6e=/^[fn]*\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)\s*[\-\>]*\s*([a-z_0-9]+(?:<[\s\S]+?>)?)/i,b6e=/([a-z_0-9]+)\s*:\s*([a-z_0-9]+(?:<[\s\S]+?>)?)/ig,vH={f32:"float",i32:"int",u32:"uint",bool:"bool","vec2<f32>":"vec2","vec2<i32>":"ivec2","vec2<u32>":"uvec2","vec2<bool>":"bvec2",vec2f:"vec2",vec2i:"ivec2",vec2u:"uvec2",vec2b:"bvec2","vec3<f32>":"vec3","vec3<i32>":"ivec3","vec3<u32>":"uvec3","vec3<bool>":"bvec3",vec3f:"vec3",vec3i:"ivec3",vec3u:"uvec3",vec3b:"bvec3","vec4<f32>":"vec4","vec4<i32>":"ivec4","vec4<u32>":"uvec4","vec4<bool>":"bvec4",vec4f:"vec4",vec4i:"ivec4",vec4u:"uvec4",vec4b:"bvec4","mat2x2<f32>":"mat2",mat2x2f:"mat2","mat3x3<f32>":"mat3",mat3x3f:"mat3","mat4x4<f32>":"mat4",mat4x4f:"mat4",sampler:"sampler",texture_1d:"texture",texture_2d:"texture",texture_2d_array:"texture",texture_multisampled_2d:"cubeTexture",texture_depth_2d:"depthTexture",texture_depth_2d_array:"depthTexture",texture_depth_multisampled_2d:"depthTexture",texture_depth_cube:"depthTexture",texture_depth_cube_array:"depthTexture",texture_3d:"texture3D",texture_cube:"cubeTexture",texture_cube_array:"cubeTexture",texture_storage_1d:"storageTexture",texture_storage_2d:"storageTexture",texture_storage_2d_array:"storageTexture",texture_storage_3d:"storageTexture"},_6e=t=>{t=t.trim();const e=t.match(v6e);if(e!==null&&e.length===4){const n=e[2],r=[];let i=null;for(;(i=b6e.exec(n))!==null;)r.push({name:i[1],type:i[2]});const s=[];for(let u=0;u<r.length;u++){const{name:f,type:p}=r[u];let m=p;m.startsWith("ptr")?m="pointer":(m.startsWith("texture")&&(m=p.split("<")[0]),m=vH[m]),s.push(new mF(m,f))}const a=t.substring(e[0].length),o=e[3]||"void",l=e[1]!==void 0?e[1]:"";return{type:vH[o]||o,inputs:s,name:l,inputsCode:n,blockCode:a,outputType:o}}else throw new Error("FunctionNode: Function is not a WGSL code.")};class S6e extends xF{constructor(e){const{type:n,inputs:r,name:i,inputsCode:s,blockCode:a,outputType:o}=_6e(e);super(n,r,i),this.inputsCode=s,this.blockCode=a,this.outputType=o}getCode(e=this.name){const n=this.outputType!=="void"?"-> "+this.outputType:"";return`fn ${e} ( ${this.inputsCode.trim()} ) ${n}`+this.blockCode}}class w6e extends pte{parseFunction(e){return new S6e(e)}}const pg=typeof self<"u"?self.GPUShaderStage:{VERTEX:1,FRAGMENT:2,COMPUTE:4},T6e={[Mc.READ_ONLY]:"read",[Mc.WRITE_ONLY]:"write",[Mc.READ_WRITE]:"read_write"},bH={[Mp]:"repeat",[ja]:"clamp",[Rp]:"mirror"},zw={vertex:pg?pg.VERTEX:1,fragment:pg?pg.FRAGMENT:2,compute:pg?pg.COMPUTE:4},_H={instance:!0,swizzleAssign:!1,storageBuffer:!0},E6e={"^^":"tsl_xor"},C6e={float:"f32",int:"i32",uint:"u32",bool:"bool",color:"vec3<f32>",vec2:"vec2<f32>",ivec2:"vec2<i32>",uvec2:"vec2<u32>",bvec2:"vec2<bool>",vec3:"vec3<f32>",ivec3:"vec3<i32>",uvec3:"vec3<u32>",bvec3:"vec3<bool>",vec4:"vec4<f32>",ivec4:"vec4<i32>",uvec4:"vec4<u32>",bvec4:"vec4<bool>",mat2:"mat2x2<f32>",mat3:"mat3x3<f32>",mat4:"mat4x4<f32>"},SH={},mv={tsl_xor:new Ns("fn tsl_xor( a : bool, b : bool ) -> bool { return ( a || b ) && !( a && b ); }"),mod_float:new Ns("fn tsl_mod_float( x : f32, y : f32 ) -> f32 { return x - y * floor( x / y ); }"),mod_vec2:new Ns("fn tsl_mod_vec2( x : vec2f, y : vec2f ) -> vec2f { return x - y * floor( x / y ); }"),mod_vec3:new Ns("fn tsl_mod_vec3( x : vec3f, y : vec3f ) -> vec3f { return x - y * floor( x / y ); }"),mod_vec4:new Ns("fn tsl_mod_vec4( x : vec4f, y : vec4f ) -> vec4f { return x - y * floor( x / y ); }"),equals_bool:new Ns("fn tsl_equals_bool( a : bool, b : bool ) -> bool { return a == b; }"),equals_bvec2:new Ns("fn tsl_equals_bvec2( a : vec2f, b : vec2f ) -> vec2<bool> { return vec2<bool>( a.x == b.x, a.y == b.y ); }"),equals_bvec3:new Ns("fn tsl_equals_bvec3( a : vec3f, b : vec3f ) -> vec3<bool> { return vec3<bool>( a.x == b.x, a.y == b.y, a.z == b.z ); }"),equals_bvec4:new Ns("fn tsl_equals_bvec4( a : vec4f, b : vec4f ) -> vec4<bool> { return vec4<bool>( a.x == b.x, a.y == b.y, a.z == b.z, a.w == b.w ); }"),repeatWrapping_float:new Ns("fn tsl_repeatWrapping_float( coord: f32 ) -> f32 { return fract( coord ); }"),mirrorWrapping_float:new Ns("fn tsl_mirrorWrapping_float( coord: f32 ) -> f32 { let mirrored = fract( coord * 0.5 ) * 2.0; return 1.0 - abs( 1.0 - mirrored ); }"),clampWrapping_float:new Ns("fn tsl_clampWrapping_float( coord: f32 ) -> f32 { return clamp( coord, 0.0, 1.0 ); }"),biquadraticTexture:new Ns(`
fn tsl_biquadraticTexture( map : texture_2d<f32>, coord : vec2f, iRes : vec2u, level : u32 ) -> vec4f {

	let res = vec2f( iRes );

	let uvScaled = coord * res;
	let uvWrapping = ( ( uvScaled % res ) + res ) % res;

	// https://www.shadertoy.com/view/WtyXRy

	let uv = uvWrapping - 0.5;
	let iuv = floor( uv );
	let f = fract( uv );

	let rg1 = textureLoad( map, vec2u( iuv + vec2( 0.5, 0.5 ) ) % iRes, level );
	let rg2 = textureLoad( map, vec2u( iuv + vec2( 1.5, 0.5 ) ) % iRes, level );
	let rg3 = textureLoad( map, vec2u( iuv + vec2( 0.5, 1.5 ) ) % iRes, level );
	let rg4 = textureLoad( map, vec2u( iuv + vec2( 1.5, 1.5 ) ) % iRes, level );

	return mix( mix( rg1, rg2, f.x ), mix( rg3, rg4, f.x ), f.y );

}
`)},A6e={dFdx:"dpdx",dFdy:"- dpdy",mod_float:"tsl_mod_float",mod_vec2:"tsl_mod_vec2",mod_vec3:"tsl_mod_vec3",mod_vec4:"tsl_mod_vec4",equals_bool:"tsl_equals_bool",equals_bvec2:"tsl_equals_bvec2",equals_bvec3:"tsl_equals_bvec3",equals_bvec4:"tsl_equals_bvec4",inversesqrt:"inverseSqrt",bitcast:"bitcast<f32>"};let Ete="";(typeof navigator<"u"&&/Firefox|Deno/g.test(navigator.userAgent))!==!0&&(Ete+=`diagnostic( off, derivative_uniformity );
`);class M6e extends hte{constructor(e,n){super(e,n,new w6e),this.uniformGroups={},this.builtins={},this.directives={},this.scopedArrays=new Map}_generateTextureSample(e,n,r,i,s,a=this.shaderStage){return a==="fragment"?i?s?`textureSample( ${n}, ${n}_sampler, ${r}, ${i}, ${s} )`:`textureSample( ${n}, ${n}_sampler, ${r}, ${i} )`:s?`textureSample( ${n}, ${n}_sampler, ${r}, ${s} )`:`textureSample( ${n}, ${n}_sampler, ${r} )`:this.generateTextureSampleLevel(e,n,r,"0",i)}generateTextureSampleLevel(e,n,r,i,s,a){return this.isUnfilterable(e)===!1?a?`textureSampleLevel( ${n}, ${n}_sampler, ${r}, ${i}, ${a} )`:`textureSampleLevel( ${n}, ${n}_sampler, ${r}, ${i} )`:this.isFilteredTexture(e)?this.generateFilteredTexture(e,n,r,a,i):this.generateTextureLod(e,n,r,s,a,i)}generateWrapFunction(e){const n=`tsl_coord_${bH[e.wrapS]}S_${bH[e.wrapT]}_${e.isData3DTexture?"3d":"2d"}T`;let r=SH[n];if(r===void 0){const i=[],s=e.isData3DTexture?"vec3f":"vec2f";let a=`fn ${n}( coord : ${s} ) -> ${s} {

	return ${s}(
`;const o=(l,c)=>{l===Mp?(i.push(mv.repeatWrapping_float),a+=`		tsl_repeatWrapping_float( coord.${c} )`):l===ja?(i.push(mv.clampWrapping_float),a+=`		tsl_clampWrapping_float( coord.${c} )`):l===Rp?(i.push(mv.mirrorWrapping_float),a+=`		tsl_mirrorWrapping_float( coord.${c} )`):(a+=`		coord.${c}`,ct(`WebGPURenderer: Unsupported texture wrap type "${l}" for vertex shader.`))};o(e.wrapS,"x"),a+=`,
`,o(e.wrapT,"y"),e.isData3DTexture&&(a+=`,
`,o(e.wrapR,"z")),a+=`
	);

}
`,SH[n]=r=new Ns(a,i)}return r.build(this),n}generateArrayDeclaration(e,n){return`array< ${this.getType(e)}, ${n} >`}generateTextureDimension(e,n,r){const i=this.getDataFromNode(e,this.shaderStage,this.globalCache);i.dimensionsSnippet===void 0&&(i.dimensionsSnippet={});let s=i.dimensionsSnippet[r];if(i.dimensionsSnippet[r]===void 0){let a,o;const{primarySamples:l}=this.renderer.backend.utils.getTextureSampleData(e),c=l>1;e.isData3DTexture?o="vec3<u32>":o="vec2<u32>",c||e.isStorageTexture?a=n:a=`${n}${r?`, u32( ${r} )`:""}`,s=new PT(new NT(`textureDimensions( ${a} )`,o)),i.dimensionsSnippet[r]=s,(e.isArrayTexture||e.isDataArrayTexture||e.isData3DTexture)&&(i.arrayLayerCount=new PT(new NT(`textureNumLayers(${n})`,"u32"))),e.isTextureCube&&(i.cubeFaceCount=new PT(new NT("6u","u32")))}return s.build(this)}generateFilteredTexture(e,n,r,i,s="0u"){this._include("biquadraticTexture");const a=this.generateWrapFunction(e),o=this.generateTextureDimension(e,n,s);return i&&(r=`${r} + vec2<f32>(${i}) / ${o}`),`tsl_biquadraticTexture( ${n}, ${a}( ${r} ), ${o}, u32( ${s} ) )`}generateTextureLod(e,n,r,i,s,a="0u"){const o=this.generateWrapFunction(e),l=this.generateTextureDimension(e,n,a),c=e.isData3DTexture?"vec3":"vec2";s&&(r=`${r} + ${c}<f32>(${s}) / ${c}<f32>( ${l} )`);const u=`${c}<u32>( ${o}( ${r} ) * ${c}<f32>( ${l} ) )`;return this.generateTextureLoad(e,n,u,a,i,null)}generateTextureLoad(e,n,r,i,s,a){i===null&&(i="0u"),a&&(r=`${r} + ${a}`);let o;return s?o=`textureLoad( ${n}, ${r}, ${s}, u32( ${i} ) )`:(o=`textureLoad( ${n}, ${r}, u32( ${i} ) )`,this.renderer.backend.compatibilityMode&&e.isDepthTexture&&(o+=".x")),o}generateTextureStore(e,n,r,i,s){let a;return i?a=`textureStore( ${n}, ${r}, ${i}, ${s} )`:a=`textureStore( ${n}, ${r}, ${s} )`,a}isSampleCompare(e){return e.isDepthTexture===!0&&e.compareFunction!==null}isUnfilterable(e){return this.getComponentTypeFromTexture(e)!=="float"||!this.isAvailable("float32Filterable")&&e.isDataTexture===!0&&e.type===Ti||this.isSampleCompare(e)===!1&&e.minFilter===Lr&&e.magFilter===Lr||this.renderer.backend.utils.getTextureSampleData(e).primarySamples>1}generateTexture(e,n,r,i,s,a=this.shaderStage){let o=null;return this.isUnfilterable(e)?o=this.generateTextureLod(e,n,r,i,s,"0",a):o=this._generateTextureSample(e,n,r,i,s,a),o}generateTextureGrad(e,n,r,i,s,a,o=this.shaderStage){if(o==="fragment")return a?`textureSampleGrad( ${n}, ${n}_sampler, ${r},  ${i[0]}, ${i[1]}, ${a} )`:`textureSampleGrad( ${n}, ${n}_sampler, ${r},  ${i[0]}, ${i[1]} )`;xt(`WebGPURenderer: THREE.TextureNode.gradient() does not support ${o} shader.`)}generateTextureCompare(e,n,r,i,s,a,o=this.shaderStage){if(o==="fragment")return e.isDepthTexture===!0&&e.isArrayTexture===!0?a?`textureSampleCompare( ${n}, ${n}_sampler, ${r}, ${s}, ${i}, ${a} )`:`textureSampleCompare( ${n}, ${n}_sampler, ${r}, ${s}, ${i} )`:a?`textureSampleCompare( ${n}, ${n}_sampler, ${r}, ${i}, ${a} )`:`textureSampleCompare( ${n}, ${n}_sampler, ${r}, ${i} )`;xt(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${o} shader.`)}generateTextureLevel(e,n,r,i,s,a){return this.isUnfilterable(e)===!1?a?`textureSampleLevel( ${n}, ${n}_sampler, ${r}, ${i}, ${a} )`:`textureSampleLevel( ${n}, ${n}_sampler, ${r}, ${i} )`:this.isFilteredTexture(e)?this.generateFilteredTexture(e,n,r,a,i):this.generateTextureLod(e,n,r,s,a,i)}generateTextureBias(e,n,r,i,s,a,o=this.shaderStage){if(o==="fragment")return a?`textureSampleBias( ${n}, ${n}_sampler, ${r}, ${i}, ${a} )`:`textureSampleBias( ${n}, ${n}_sampler, ${r}, ${i} )`;xt(`WebGPURenderer: THREE.TextureNode.biasNode does not support ${o} shader.`)}getPropertyName(e,n=this.shaderStage){if(e.isNodeVarying===!0&&e.needsInterpolation===!0){if(n==="vertex")return`varyings.${e.name}`}else if(e.isNodeUniform===!0){const r=e.name,i=e.type;return i==="texture"||i==="cubeTexture"||i==="storageTexture"||i==="texture3D"?r:i==="buffer"||i==="storageBuffer"||i==="indirectStorageBuffer"?this.isCustomStruct(e)?r:r+".value":e.groupNode.name+"."+r}return super.getPropertyName(e)}getOutputStructName(){return"output"}getFunctionOperator(e){const n=E6e[e];return n!==void 0?(this._include(n),n):null}getNodeAccess(e,n){return n!=="compute"?e.isAtomic===!0?(ct("WebGPURenderer: Atomic operations are only supported in compute shaders."),Mc.READ_WRITE):Mc.READ_ONLY:e.access}getStorageAccess(e,n){return T6e[this.getNodeAccess(e,n)]}getUniformFromNode(e,n,r,i=null){const s=super.getUniformFromNode(e,n,r,i),a=this.getDataFromNode(e,r,this.globalCache);if(a.uniformGPU===void 0){let o;const l=e.groupNode,c=l.name,u=this.getBindGroupArray(c,r);if(n==="texture"||n==="cubeTexture"||n==="storageTexture"||n==="texture3D"){let f=null;const p=this.getNodeAccess(e,r);if(n==="texture"||n==="storageTexture"?e.value.is3DTexture===!0?f=new gL(s.name,s.node,l,p):f=new zC(s.name,s.node,l,p):n==="cubeTexture"?f=new Ste(s.name,s.node,l,p):n==="texture3D"&&(f=new gL(s.name,s.node,l,p)),f.store=e.isStorageTextureNode===!0,f.mipLevel=f.store?e.mipLevel:0,f.setVisibility(zw[r]),this.isUnfilterable(e.value)===!1&&f.store===!1){const m=new d6e(`${s.name}_sampler`,s.node,l);m.setVisibility(zw[r]),u.push(m,f),o=[m,f]}else u.push(f),o=[f]}else if(n==="buffer"||n==="storageBuffer"||n==="indirectStorageBuffer"){const f=n==="buffer"?vte:p6e,p=new f(e,l);p.setVisibility(zw[r]),u.push(p),o=p,s.name=i||"NodeBuffer_"+s.id}else{const f=this.uniformGroups[r]||(this.uniformGroups[r]={});let p=f[c];p===void 0&&(p=new bte(c,l),p.setVisibility(zw[r]),f[c]=p,u.push(p)),o=this.getNodeUniform(s,n),p.addUniform(o)}a.uniformGPU=o}return s}getBuiltin(e,n,r,i=this.shaderStage){const s=this.builtins[i]||(this.builtins[i]=new Map);return s.has(e)===!1&&s.set(e,{name:e,property:n,type:r}),n}hasBuiltin(e,n=this.shaderStage){return this.builtins[n]!==void 0&&this.builtins[n].has(e)}getVertexIndex(){return this.shaderStage==="vertex"?this.getBuiltin("vertex_index","vertexIndex","u32","attribute"):"vertexIndex"}buildFunctionCode(e){const n=e.layout,r=this.flowShaderNode(e),i=[];for(const a of n.inputs)i.push(a.name+" : "+this.getType(a.type));let s=`fn ${n.name}( ${i.join(", ")} ) -> ${this.getType(n.type)} {
${r.vars}
${r.code}
`;return r.result&&(s+=`	return ${r.result};
`),s+=`
}
`,s}getInstanceIndex(){return this.shaderStage==="vertex"?this.getBuiltin("instance_index","instanceIndex","u32","attribute"):"instanceIndex"}getInvocationLocalIndex(){return this.getBuiltin("local_invocation_index","invocationLocalIndex","u32","attribute")}getSubgroupSize(){return this.enableSubGroups(),this.getBuiltin("subgroup_size","subgroupSize","u32","attribute")}getInvocationSubgroupIndex(){return this.enableSubGroups(),this.getBuiltin("subgroup_invocation_id","invocationSubgroupIndex","u32","attribute")}getSubgroupIndex(){return this.enableSubGroups(),this.getBuiltin("subgroup_id","subgroupIndex","u32","attribute")}getDrawIndex(){return null}getFrontFacing(){return this.getBuiltin("front_facing","isFront","bool")}getFragCoord(){return this.getBuiltin("position","fragCoord","vec4<f32>")+".xy"}getFragDepth(){return"output."+this.getBuiltin("frag_depth","depth","f32","output")}getClipDistance(){return"varyings.hw_clip_distances"}isFlipY(){return!1}enableDirective(e,n=this.shaderStage){(this.directives[n]||(this.directives[n]=new Set)).add(e)}getDirectives(e){const n=[],r=this.directives[e];if(r!==void 0)for(const i of r)n.push(`enable ${i};`);return n.join(`
`)}enableSubGroups(){this.enableDirective("subgroups")}enableSubgroupsF16(){this.enableDirective("subgroups-f16")}enableClipDistances(){this.enableDirective("clip_distances")}enableShaderF16(){this.enableDirective("f16")}enableDualSourceBlending(){this.enableDirective("dual_source_blending")}enableHardwareClipping(e){this.enableClipDistances(),this.getBuiltin("clip_distances","hw_clip_distances",`array<f32, ${e} >`,"vertex")}getBuiltins(e){const n=[],r=this.builtins[e];if(r!==void 0)for(const{name:i,property:s,type:a}of r.values())n.push(`@builtin( ${i} ) ${s} : ${a}`);return n.join(`,
	`)}getScopedArray(e,n,r,i){return this.scopedArrays.has(e)===!1&&this.scopedArrays.set(e,{name:e,scope:n,bufferType:r,bufferCount:i}),e}getScopedArrays(e){if(e!=="compute")return;const n=[];for(const{name:r,scope:i,bufferType:s,bufferCount:a}of this.scopedArrays.values()){const o=this.getType(s);n.push(`var<${i}> ${r}: array< ${o}, ${a} >;`)}return n.join(`
`)}getAttributes(e){const n=[];if(e==="compute"&&(this.getBuiltin("global_invocation_id","globalId","vec3<u32>","attribute"),this.getBuiltin("workgroup_id","workgroupId","vec3<u32>","attribute"),this.getBuiltin("local_invocation_id","localId","vec3<u32>","attribute"),this.getBuiltin("num_workgroups","numWorkgroups","vec3<u32>","attribute"),this.renderer.hasFeature("subgroups")&&(this.enableDirective("subgroups",e),this.getBuiltin("subgroup_size","subgroupSize","u32","attribute"))),e==="vertex"||e==="compute"){const r=this.getBuiltins("attribute");r&&n.push(r);const i=this.getAttributesArray();for(let s=0,a=i.length;s<a;s++){const o=i[s],l=o.name,c=this.getType(o.type);n.push(`@location( ${s} ) ${l} : ${c}`)}}return n.join(`,
	`)}getStructMembers(e){const n=[];for(const r of e.members){const i=e.output?"@location( "+r.index+" ) ":"";let s=this.getType(r.type);r.atomic&&(s="atomic< "+s+" >"),n.push(`	${i+r.name} : ${s}`)}return e.output&&n.push(`	${this.getBuiltins("output")}`),n.join(`,
`)}getStructs(e){let n="";const r=this.structs[e];if(r.length>0){const i=[];for(const s of r){let a=`struct ${s.name} {
`;a+=this.getStructMembers(s),a+=`
};`,i.push(a)}n=`
`+i.join(`

`)+`
`}return n}getVar(e,n,r=null){let i=`var ${n} : `;return r!==null?i+=this.generateArrayDeclaration(e,r):i+=this.getType(e),i}getVars(e){const n=[],r=this.vars[e];if(r!==void 0)for(const i of r)n.push(`	${this.getVar(i.type,i.name,i.count)};`);return`
${n.join(`
`)}
`}getVaryings(e){const n=[];if(e==="vertex"&&this.getBuiltin("position","Vertex","vec4<f32>","vertex"),e==="vertex"||e==="fragment"){const s=this.varyings,a=this.vars[e];for(let o=0;o<s.length;o++){const l=s[o];if(l.needsInterpolation){let c=`@location( ${o} )`;if(l.interpolationType){const u=l.interpolationSampling!==null?`, ${l.interpolationSampling} )`:" )";c+=` @interpolate( ${l.interpolationType}${u}`}else/^(int|uint|ivec|uvec)/.test(l.type)&&(c+=` @interpolate( ${this.renderer.backend.compatibilityMode?"flat, either":"flat"} )`);n.push(`${c} ${l.name} : ${this.getType(l.type)}`)}else e==="vertex"&&a.includes(l)===!1&&a.push(l)}}const r=this.getBuiltins(e);r&&n.push(r);const i=n.join(`,
	`);return e==="vertex"?this._getWGSLStruct("VaryingsStruct","	"+i):i}isCustomStruct(e){const n=e.value,r=e.node,i=(n.isBufferAttribute||n.isInstancedBufferAttribute)&&r.structTypeNode!==null,s=r.value&&r.value.array&&typeof r.value.itemSize=="number"&&r.value.array.length>r.value.itemSize;return i&&!s}getUniforms(e){const n=this.uniforms[e],r=[],i=[],s=[],a={};for(const l of n){const c=l.groupNode.name,u=this.bindingsIndexes[c];if(l.type==="texture"||l.type==="cubeTexture"||l.type==="storageTexture"||l.type==="texture3D"){const f=l.node.value;this.isUnfilterable(f)===!1&&l.node.isStorageTextureNode!==!0&&(this.isSampleCompare(f)?r.push(`@binding( ${u.binding++} ) @group( ${u.group} ) var ${l.name}_sampler : sampler_comparison;`):r.push(`@binding( ${u.binding++} ) @group( ${u.group} ) var ${l.name}_sampler : sampler;`));let p,m="";const{primarySamples:x}=this.renderer.backend.utils.getTextureSampleData(f);if(x>1&&(m="_multisampled"),f.isCubeTexture===!0)p="texture_cube<f32>";else if(f.isDepthTexture===!0)this.renderer.backend.compatibilityMode&&f.compareFunction===null?p=`texture${m}_2d<f32>`:p=`texture_depth${m}_2d${f.isArrayTexture===!0?"_array":""}`;else if(l.node.isStorageTextureNode===!0){const b=yL(f),v=this.getStorageAccess(l.node,e),_=l.node.value.is3DTexture,E=l.node.value.isArrayTexture;p=`texture_storage_${_?"3d":`2d${E?"_array":""}`}<${b}, ${v}>`}else if(f.isArrayTexture===!0||f.isDataArrayTexture===!0||f.isCompressedArrayTexture===!0)p="texture_2d_array<f32>";else if(f.is3DTexture===!0||f.isData3DTexture===!0)p="texture_3d<f32>";else{const b=this.getComponentTypeFromTexture(f).charAt(0);p=`texture${m}_2d<${b}32>`}r.push(`@binding( ${u.binding++} ) @group( ${u.group} ) var ${l.name} : ${p};`)}else if(l.type==="buffer"||l.type==="storageBuffer"||l.type==="indirectStorageBuffer"){const f=l.node,p=this.getType(f.getNodeType(this)),m=f.bufferCount,x=m>0&&l.type==="buffer"?", "+m:"",b=f.isStorageBufferNode?`storage, ${this.getStorageAccess(f,e)}`:"uniform";if(this.isCustomStruct(l))i.push(`@binding( ${u.binding++} ) @group( ${u.group} ) var<${b}> ${l.name} : ${p};`);else{const _=`	value : array< ${f.isAtomic?`atomic<${p}>`:`${p}`}${x} >`;i.push(this._getWGSLStructBinding(l.name,_,b,u.binding++,u.group))}}else{const f=this.getType(this.getVectorType(l.type)),p=l.groupNode.name;(a[p]||(a[p]={index:u.binding++,id:u.group,snippets:[]})).snippets.push(`	${l.name} : ${f}`)}}for(const l in a){const c=a[l];s.push(this._getWGSLStructBinding(l,c.snippets.join(`,
`),"uniform",c.index,c.id))}let o=r.join(`
`);return o+=i.join(`
`),o+=s.join(`
`),o}buildCode(){const e=this.material!==null?{fragment:{},vertex:{}}:{compute:{}};this.sortBindingGroups();for(const n in e){this.shaderStage=n;const r=e[n];r.uniforms=this.getUniforms(n),r.attributes=this.getAttributes(n),r.varyings=this.getVaryings(n),r.structs=this.getStructs(n),r.vars=this.getVars(n),r.codes=this.getCodes(n),r.directives=this.getDirectives(n),r.scopedArrays=this.getScopedArrays(n);let i=`// code

`;i+=this.flowCode[n];const s=this.flowNodes[n],a=s[s.length-1],o=a.outputNode,l=o!==void 0&&o.isOutputStructNode===!0;for(const c of s){const u=this.getFlowData(c),f=c.name;if(f&&(i.length>0&&(i+=`
`),i+=`	// flow -> ${f}
`),i+=`${u.code}
	`,c===a&&n!=="compute"){if(i+=`// result

	`,n==="vertex")i+=`varyings.Vertex = ${u.result};`;else if(n==="fragment")if(l)r.returnType=o.getNodeType(this),r.structs+="var<private> output : "+r.returnType+";",i+=`return ${u.result};`;else{let p="	@location(0) color: vec4<f32>";const m=this.getBuiltins("output");m&&(p+=`,
	`+m),r.returnType="OutputStruct",r.structs+=this._getWGSLStruct("OutputStruct",p),r.structs+=`
var<private> output : OutputStruct;`,i+=`output.color = ${u.result};

	return output;`}}}r.flow=i}if(this.shaderStage=null,this.material!==null)this.vertexShader=this._getWGSLVertexCode(e.vertex),this.fragmentShader=this._getWGSLFragmentCode(e.fragment);else{const n=this.object.workgroupSize;this.computeShader=this._getWGSLComputeCode(e.compute,n)}}getMethod(e,n=null){let r;return n!==null&&(r=this._getWGSLMethod(e+"_"+n)),r===void 0&&(r=this._getWGSLMethod(e)),r||e}getBitcastMethod(e){return`bitcast<${this.getType(e)}>`}getTernary(e,n,r){return`select( ${r}, ${n}, ${e} )`}getType(e){return C6e[e]||e}isAvailable(e){let n=_H[e];return n===void 0&&(e==="float32Filterable"?n=this.renderer.hasFeature("float32-filterable"):e==="clipDistance"&&(n=this.renderer.hasFeature("clip-distances")),_H[e]=n),n}_getWGSLMethod(e){return mv[e]!==void 0&&this._include(e),A6e[e]}_include(e){const n=mv[e];return n.build(this),this.addInclude(n),n}_getWGSLVertexCode(e){return`${this.getSignature()}
// directives
${e.directives}

// structs
${e.structs}

// uniforms
${e.uniforms}

// varyings
${e.varyings}
var<private> varyings : VaryingsStruct;

// codes
${e.codes}

@vertex
fn main( ${e.attributes} ) -> VaryingsStruct {

	// vars
	${e.vars}

	// flow
	${e.flow}

	return varyings;

}
`}_getWGSLFragmentCode(e){return`${this.getSignature()}
// global
${Ete}

// structs
${e.structs}

// uniforms
${e.uniforms}

// codes
${e.codes}

@fragment
fn main( ${e.varyings} ) -> ${e.returnType} {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLComputeCode(e,n){const[r,i,s]=n;return`${this.getSignature()}
// directives
${e.directives}

// system
var<private> instanceIndex : u32;

// locals
${e.scopedArrays}

// structs
${e.structs}

// uniforms
${e.uniforms}

// codes
${e.codes}

@compute @workgroup_size( ${r}, ${i}, ${s} )
fn main( ${e.attributes} ) {

	// system
	instanceIndex = globalId.x
		+ globalId.y * ( ${r} * numWorkgroups.x )
		+ globalId.z * ( ${r} * numWorkgroups.x ) * ( ${i} * numWorkgroups.y );

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLStruct(e,n){return`
struct ${e} {
${n}
};`}_getWGSLStructBinding(e,n,r,i=0,s=0){const a=e+"Struct";return`${this._getWGSLStruct(a,n)}
@binding( ${i} ) @group( ${s} )
var<${r}> ${e} : ${a};`}}class R6e{constructor(e){this.backend=e}getCurrentDepthStencilFormat(e){let n;return e.depthTexture!==null?n=this.getTextureFormatGPU(e.depthTexture):e.depth&&e.stencil?n=de.Depth24PlusStencil8:e.depth&&(n=de.Depth24Plus),n}getTextureFormatGPU(e){return this.backend.get(e).format}getTextureSampleData(e){let n;if(e.isFramebufferTexture)n=1;else if(e.isDepthTexture&&!e.renderTarget){const s=this.backend.renderer,a=s.getRenderTarget();n=a?a.samples:s.currentSamples}else e.renderTarget&&(n=e.renderTarget.samples);n=n||1;const r=n>1&&e.renderTarget!==null&&e.isDepthTexture!==!0&&e.isFramebufferTexture!==!0;return{samples:n,primarySamples:r?1:n,isMSAA:r}}getCurrentColorFormat(e){let n;return e.textures!==null?n=this.getTextureFormatGPU(e.textures[0]):n=this.getPreferredCanvasFormat(),n}getCurrentColorFormats(e){return e.textures!==null?e.textures.map(n=>this.getTextureFormatGPU(n)):[this.getPreferredCanvasFormat()]}getCurrentColorSpace(e){return e.textures!==null?e.textures[0].colorSpace:this.backend.renderer.outputColorSpace}getPrimitiveTopology(e,n){if(e.isPoints)return Pg.PointList;if(e.isLineSegments||e.isMesh&&n.wireframe===!0)return Pg.LineList;if(e.isLine)return Pg.LineStrip;if(e.isMesh)return Pg.TriangleList}getSampleCount(e){return e>=4?4:1}getSampleCountRenderContext(e){return e.textures!==null?this.getSampleCount(e.sampleCount):this.getSampleCount(this.backend.renderer.currentSamples)}getPreferredCanvasFormat(){const e=this.backend.parameters.outputType;if(e===void 0)return navigator.gpu.getPreferredCanvasFormat();if(e===si)return de.BGRA8Unorm;if(e===Ci)return de.RGBA16Float;throw new Error("Unsupported outputType")}}const Cte=new Map([[Int8Array,["sint8","snorm8"]],[Uint8Array,["uint8","unorm8"]],[Int16Array,["sint16","snorm16"]],[Uint16Array,["uint16","unorm16"]],[Int32Array,["sint32","snorm32"]],[Uint32Array,["uint32","unorm32"]],[Float32Array,["float32"]]]);typeof Float16Array<"u"&&Cte.set(Float16Array,["float16"]);const P6e=new Map([[HZ,["float16"]]]),N6e=new Map([[Int32Array,"sint32"],[Int16Array,"sint32"],[Uint32Array,"uint32"],[Uint16Array,"uint32"],[Float32Array,"float32"]]);class O6e{constructor(e){this.backend=e}createAttribute(e,n){const r=this._getBufferAttribute(e),i=this.backend,s=i.get(r);let a=s.buffer;if(a===void 0){const o=i.device;let l=r.array;if(e.normalized===!1){if(l.constructor===Int16Array||l.constructor===Int8Array)l=new Int32Array(l);else if((l.constructor===Uint16Array||l.constructor===Uint8Array)&&(l=new Uint32Array(l),n&GPUBufferUsage.INDEX))for(let f=0;f<l.length;f++)l[f]===65535&&(l[f]=4294967295)}if(r.array=l,(r.isStorageBufferAttribute||r.isStorageInstancedBufferAttribute)&&r.itemSize===3){l=new l.constructor(r.count*4);for(let f=0;f<r.count;f++)l.set(r.array.subarray(f*3,f*3+3),f*4);r.itemSize=4,r.array=l,s._force3to4BytesAlignment=!0}const c=l.byteLength,u=c+(4-c%4)%4;a=o.createBuffer({label:r.name,size:u,usage:n,mappedAtCreation:!0}),new l.constructor(a.getMappedRange()).set(l),a.unmap(),s.buffer=a}}updateAttribute(e){const n=this._getBufferAttribute(e),r=this.backend,i=r.device,s=r.get(n),a=r.get(n).buffer;let o=n.array;if(s._force3to4BytesAlignment===!0){o=new o.constructor(n.count*4);for(let u=0;u<n.count;u++)o.set(n.array.subarray(u*3,u*3+3),u*4);n.array=o}const l=this._isTypedArray(o),c=n.updateRanges;if(c.length===0)i.queue.writeBuffer(a,0,o,0);else{const u=l?1:o.BYTES_PER_ELEMENT;for(let f=0,p=c.length;f<p;f++){const m=c[f];let x,b;if(s._force3to4BytesAlignment===!0){const _=Math.floor(m.start/3),E=Math.ceil(m.count/3);x=_*4*u,b=E*4*u}else x=m.start*u,b=m.count*u;const v=x*(l?o.BYTES_PER_ELEMENT:1);i.queue.writeBuffer(a,v,o,x,b)}n.clearUpdateRanges()}}createShaderVertexBuffers(e){const n=e.getAttributes(),r=new Map;for(let i=0;i<n.length;i++){const s=n[i],a=s.array.BYTES_PER_ELEMENT,o=this._getBufferAttribute(s);let l=r.get(o);if(l===void 0){let f,p;s.isInterleavedBufferAttribute===!0?(f=s.data.stride*a,p=s.data.isInstancedInterleavedBuffer?jw.Instance:jw.Vertex):(f=s.itemSize*a,p=s.isInstancedBufferAttribute?jw.Instance:jw.Vertex),s.normalized===!1&&(s.array.constructor===Int16Array||s.array.constructor===Uint16Array)&&(f=4),l={arrayStride:f,attributes:[],stepMode:p},r.set(o,l)}const c=this._getVertexFormat(s),u=s.isInterleavedBufferAttribute===!0?s.offset*a:0;l.attributes.push({shaderLocation:i,offset:u,format:c})}return Array.from(r.values())}destroyAttribute(e){const n=this.backend;n.get(this._getBufferAttribute(e)).buffer.destroy(),n.delete(e)}async getArrayBufferAsync(e){const n=this.backend,r=n.device,s=n.get(this._getBufferAttribute(e)).buffer,a=s.size,o=r.createBuffer({label:`${e.name}_readback`,size:a,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),l=r.createCommandEncoder({label:`readback_encoder_${e.name}`});l.copyBufferToBuffer(s,0,o,0,a);const c=l.finish();r.queue.submit([c]),await o.mapAsync(GPUMapMode.READ);const u=o.getMappedRange(),f=new e.array.constructor(u.slice(0));return o.unmap(),f.buffer}_getVertexFormat(e){const{itemSize:n,normalized:r}=e,i=e.array.constructor,s=e.constructor;let a;if(n===1)a=N6e.get(i);else{const l=(P6e.get(s)||Cte.get(i))[r?1:0];if(l){const c=i.BYTES_PER_ELEMENT*n,f=Math.floor((c+3)/4)*4/i.BYTES_PER_ELEMENT;if(f%1)throw new Error("THREE.WebGPUAttributeUtils: Bad vertex format item size.");a=`${l}x${f}`}}return a||xt("WebGPUAttributeUtils: Vertex format not supported yet."),a}_isTypedArray(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}class D6e{constructor(e){this.backend=e,this.bindGroupLayoutCache=new WeakMap}createBindingsLayout(e){const n=this.backend,r=n.device,i=[];let s=0;for(const a of e.bindings){const o={binding:s++,visibility:a.visibility};if(a.isUniformBuffer||a.isStorageBuffer){const l={};a.isStorageBuffer&&(a.visibility&4&&(a.access===Mc.READ_WRITE||a.access===Mc.WRITE_ONLY)?l.type=aN.Storage:l.type=aN.ReadOnlyStorage),o.buffer=l}else if(a.isSampledTexture&&a.store){const l={};l.format=this.backend.get(a.texture).texture.format;const c=a.access;c===Mc.READ_WRITE?l.access=oN.ReadWrite:c===Mc.WRITE_ONLY?l.access=oN.WriteOnly:l.access=oN.ReadOnly,a.texture.isArrayTexture?l.viewDimension=Fi.TwoDArray:a.texture.is3DTexture&&(l.viewDimension=Fi.ThreeD),o.storageTexture=l}else if(a.isSampledTexture){const l={},{primarySamples:c}=n.utils.getTextureSampleData(a.texture);if(c>1&&(l.multisampled=!0,a.texture.isDepthTexture||(l.sampleType=Lh.UnfilterableFloat)),a.texture.isDepthTexture)n.compatibilityMode&&a.texture.compareFunction===null?l.sampleType=Lh.UnfilterableFloat:l.sampleType=Lh.Depth;else if(a.texture.isDataTexture||a.texture.isDataArrayTexture||a.texture.isData3DTexture){const u=a.texture.type;u===xs?l.sampleType=Lh.SInt:u===Ar?l.sampleType=Lh.UInt:u===Ti&&(this.backend.hasFeature("float32-filterable")?l.sampleType=Lh.Float:l.sampleType=Lh.UnfilterableFloat)}a.isSampledCubeTexture?l.viewDimension=Fi.Cube:a.texture.isArrayTexture||a.texture.isDataArrayTexture||a.texture.isCompressedArrayTexture?l.viewDimension=Fi.TwoDArray:a.isSampledTexture3D&&(l.viewDimension=Fi.ThreeD),o.texture=l}else if(a.isSampler){const l={};a.texture.isDepthTexture&&(a.texture.compareFunction!==null?l.type=gH.Comparison:n.compatibilityMode&&(l.type=gH.NonFiltering)),o.sampler=l}else xt(`WebGPUBindingUtils: Unsupported binding "${a}".`);i.push(o)}return r.createBindGroupLayout({entries:i})}createBindings(e,n,r,i=0){const{backend:s,bindGroupLayoutCache:a}=this,o=s.get(e);let l=a.get(e.bindingsReference);l===void 0&&(l=this.createBindingsLayout(e),a.set(e.bindingsReference,l));let c;r>0&&(o.groups===void 0&&(o.groups=[],o.versions=[]),o.versions[r]===i&&(c=o.groups[r])),c===void 0&&(c=this.createBindGroup(e,l),r>0&&(o.groups[r]=c,o.versions[r]=i)),o.group=c,o.layout=l}updateBinding(e){const n=this.backend,r=n.device,i=e.buffer,s=n.get(e).buffer;r.queue.writeBuffer(s,0,i,0)}createBindGroupIndex(e,n){const i=this.backend.device,s=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,a=e[0],o=i.createBuffer({label:"bindingCameraIndex_"+a,size:16,usage:s});i.queue.writeBuffer(o,0,e,0);const l=[{binding:0,resource:{buffer:o}}];return i.createBindGroup({label:"bindGroupCameraIndex_"+a,layout:n,entries:l})}createBindGroup(e,n){const r=this.backend,i=r.device;let s=0;const a=[];for(const o of e.bindings){if(o.isUniformBuffer){const l=r.get(o);if(l.buffer===void 0){const c=o.byteLength,u=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,f=i.createBuffer({label:"bindingBuffer_"+o.name,size:c,usage:u});l.buffer=f}a.push({binding:s,resource:{buffer:l.buffer}})}else if(o.isStorageBuffer){const l=r.get(o);if(l.buffer===void 0){const c=o.attribute;l.buffer=r.get(c).buffer}a.push({binding:s,resource:{buffer:l.buffer}})}else if(o.isSampledTexture){const l=r.get(o.texture);let c;if(l.externalTexture!==void 0)c=i.importExternalTexture({source:l.externalTexture});else{const u=o.store?1:l.texture.mipLevelCount,f=o.store?o.mipLevel:0;let p=`view-${l.texture.width}-${l.texture.height}`;if(l.texture.depthOrArrayLayers>1&&(p+=`-${l.texture.depthOrArrayLayers}`),p+=`-${u}-${f}`,c=l[p],c===void 0){const m=u6e.All;let x;o.isSampledCubeTexture?x=Fi.Cube:o.isSampledTexture3D?x=Fi.ThreeD:o.texture.isArrayTexture||o.texture.isDataArrayTexture||o.texture.isCompressedArrayTexture?x=Fi.TwoDArray:x=Fi.TwoD,c=l[p]=l.texture.createView({aspect:m,dimension:x,mipLevelCount:u,baseMipLevel:f})}}a.push({binding:s,resource:c})}else if(o.isSampler){const l=r.get(o.texture);a.push({binding:s,resource:l.sampler})}s++}return i.createBindGroup({label:"bindGroup_"+e.name,layout:n,entries:a})}}class L6e{constructor(e){this.backend=e,this._activePipelines=new WeakMap}setPipeline(e,n){this._activePipelines.get(e)!==n&&(e.setPipeline(n),this._activePipelines.set(e,n))}_getSampleCount(e){return this.backend.utils.getSampleCountRenderContext(e)}createRenderPipeline(e,n){const{object:r,material:i,geometry:s,pipeline:a}=e,{vertexProgram:o,fragmentProgram:l}=a,c=this.backend,u=c.device,f=c.utils,p=c.get(a),m=[];for(const F of e.getBindings()){const z=c.get(F);m.push(z.layout)}const x=c.attributeUtils.createShaderVertexBuffers(e);let b;i.blending!==_a&&(i.blending!==To||i.transparent!==!1)&&(b=this._getBlending(i));let v={};i.stencilWrite===!0&&(v={compare:this._getStencilCompare(i),failOp:this._getStencilOperation(i.stencilFail),depthFailOp:this._getStencilOperation(i.stencilZFail),passOp:this._getStencilOperation(i.stencilZPass)});const _=this._getColorWriteMask(i),E=[];if(e.context.textures!==null){const F=e.context.textures;for(let z=0;z<F.length;z++){const H=f.getTextureFormatGPU(F[z]);E.push({format:H,blend:b,writeMask:_})}}else{const F=f.getCurrentColorFormat(e.context);E.push({format:F,blend:b,writeMask:_})}const T=c.get(o).module,A=c.get(l).module,C=this._getPrimitiveState(r,s,i),M=this._getDepthCompare(i),P=f.getCurrentDepthStencilFormat(e.context),D=this._getSampleCount(e.context),N={label:`renderPipeline_${i.name||i.type}_${i.id}`,vertex:Object.assign({},T,{buffers:x}),fragment:Object.assign({},A,{targets:E}),primitive:C,multisample:{count:D,alphaToCoverageEnabled:i.alphaToCoverage&&D>1},layout:u.createPipelineLayout({bindGroupLayouts:m})},L={},k=e.context.depth,I=e.context.stencil;if((k===!0||I===!0)&&(k===!0&&(L.format=P,L.depthWriteEnabled=i.depthWrite,L.depthCompare=M),I===!0&&(L.stencilFront=v,L.stencilBack={},L.stencilReadMask=i.stencilFuncMask,L.stencilWriteMask=i.stencilWriteMask),i.polygonOffset===!0&&(L.depthBias=i.polygonOffsetUnits,L.depthBiasSlopeScale=i.polygonOffsetFactor,L.depthBiasClamp=0),N.depthStencil=L),u.pushErrorScope("validation"),n===null)p.pipeline=u.createRenderPipeline(N),u.popErrorScope().then(F=>{F!==null&&(p.error=!0,xt(F.message))});else{const F=new Promise(async z=>{try{p.pipeline=await u.createRenderPipelineAsync(N)}catch{}const H=await u.popErrorScope();H!==null&&(p.error=!0,xt(H.message)),z()});n.push(F)}}createBundleEncoder(e,n="renderBundleEncoder"){const r=this.backend,{utils:i,device:s}=r,a=i.getCurrentDepthStencilFormat(e),o=i.getCurrentColorFormats(e),l=this._getSampleCount(e),c={label:n,colorFormats:o,depthStencilFormat:a,sampleCount:l};return s.createRenderBundleEncoder(c)}createComputePipeline(e,n){const r=this.backend,i=r.device,s=r.get(e.computeProgram).module,a=r.get(e),o=[];for(const l of n){const c=r.get(l);o.push(c.layout)}a.pipeline=i.createComputePipeline({compute:s,layout:i.createPipelineLayout({bindGroupLayouts:o})})}_getBlending(e){let n,r;const i=e.blending,s=e.blendSrc,a=e.blendDst,o=e.blendEquation;if(i===Ug){const l=e.blendSrcAlpha!==null?e.blendSrcAlpha:s,c=e.blendDstAlpha!==null?e.blendDstAlpha:a,u=e.blendEquationAlpha!==null?e.blendEquationAlpha:o;n={srcFactor:this._getBlendFactor(s),dstFactor:this._getBlendFactor(a),operation:this._getBlendOperation(o)},r={srcFactor:this._getBlendFactor(l),dstFactor:this._getBlendFactor(c),operation:this._getBlendOperation(u)}}else{const l=e.premultipliedAlpha,c=(u,f,p,m)=>{n={srcFactor:u,dstFactor:f,operation:Dh.Add},r={srcFactor:p,dstFactor:m,operation:Dh.Add}};if(l)switch(i){case To:c(On.One,On.OneMinusSrcAlpha,On.One,On.OneMinusSrcAlpha);break;case l0:c(On.One,On.One,On.One,On.One);break;case c0:c(On.Zero,On.OneMinusSrc,On.Zero,On.One);break;case u0:c(On.Dst,On.OneMinusSrcAlpha,On.Zero,On.One);break}else switch(i){case To:c(On.SrcAlpha,On.OneMinusSrcAlpha,On.One,On.OneMinusSrcAlpha);break;case l0:c(On.SrcAlpha,On.One,On.One,On.One);break;case c0:xt("WebGPURenderer: SubtractiveBlending requires material.premultipliedAlpha = true");break;case u0:xt("WebGPURenderer: MultiplyBlending requires material.premultipliedAlpha = true");break}}if(n!==void 0&&r!==void 0)return{color:n,alpha:r};xt("WebGPURenderer: Invalid blending: ",i)}_getBlendFactor(e){let n;switch(e){case Ou:n=On.Zero;break;case kk:n=On.One;break;case Bk:n=On.Src;break;case Fk:n=On.OneMinusSrc;break;case _b:n=On.SrcAlpha;break;case Sb:n=On.OneMinusSrcAlpha;break;case zk:n=On.Dst;break;case $k:n=On.OneMinusDst;break;case Uk:n=On.DstAlpha;break;case jk:n=On.OneMinusDstAlpha;break;case Gk:n=On.SrcAlphaSaturated;break;case yje:n=On.Constant;break;case vje:n=On.OneMinusConstant;break;default:xt("WebGPURenderer: Blend factor not supported.",e)}return n}_getStencilCompare(e){let n;const r=e.stencilFunc;switch(r){case HTe:n=Ps.Never;break;case DD:n=Ps.Always;break;case WTe:n=Ps.Less;break;case XTe:n=Ps.LessEqual;break;case qTe:n=Ps.Equal;break;case ZTe:n=Ps.GreaterEqual;break;case YTe:n=Ps.Greater;break;case KTe:n=Ps.NotEqual;break;default:xt("WebGPURenderer: Invalid stencil function.",r)}return n}_getStencilOperation(e){let n;switch(e){case zh:n=df.Keep;break;case FTe:n=df.Zero;break;case UTe:n=df.Replace;break;case VTe:n=df.Invert;break;case jTe:n=df.IncrementClamp;break;case zTe:n=df.DecrementClamp;break;case $Te:n=df.IncrementWrap;break;case GTe:n=df.DecrementWrap;break;default:xt("WebGPURenderer: Invalid stencil operation.",n)}return n}_getBlendOperation(e){let n;switch(e){case Qs:n=Dh.Add;break;case Lk:n=Dh.Subtract;break;case Ik:n=Dh.ReverseSubtract;break;case OZ:n=Dh.Min;break;case DZ:n=Dh.Max;break;default:xt("WebGPUPipelineUtils: Blend equation not supported.",e)}return n}_getPrimitiveState(e,n,r){const i={},s=this.backend.utils;i.topology=s.getPrimitiveTopology(e,r),n.index!==null&&e.isLine===!0&&e.isLineSegments!==!0&&(i.stripIndexFormat=n.index.array instanceof Uint16Array?q0.Uint16:q0.Uint32);let a=r.side===Sr;return e.isMesh&&e.matrixWorld.determinant()<0&&(a=!a),i.frontFace=a===!0?hH.CW:hH.CCW,i.cullMode=r.side===Zs?pH.None:pH.Back,i}_getColorWriteMask(e){return e.colorWrite===!0?mH.All:mH.None}_getDepthCompare(e){let n;if(e.depthTest===!1)n=Ps.Always;else{const r=e.depthFunc;switch(r){case wb:n=Ps.Never;break;case Tb:n=Ps.Always;break;case Eb:n=Ps.Less;break;case Uf:n=Ps.LessEqual;break;case Cb:n=Ps.Equal;break;case Ab:n=Ps.GreaterEqual;break;case Mb:n=Ps.Greater;break;case Rb:n=Ps.NotEqual;break;default:xt("WebGPUPipelineUtils: Invalid depth function.",r)}}return n}}class I6e extends Tte{constructor(e,n,r=2048){super(r),this.device=e,this.type=n,this.querySet=this.device.createQuerySet({type:"timestamp",count:this.maxQueries,label:`queryset_global_timestamp_${n}`});const i=this.maxQueries*8;this.resolveBuffer=this.device.createBuffer({label:`buffer_timestamp_resolve_${n}`,size:i,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),this.resultBuffer=this.device.createBuffer({label:`buffer_timestamp_result_${n}`,size:i,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ})}allocateQueriesForContext(e){if(!this.trackTimestamp||this.isDisposed)return null;if(this.currentQueryIndex+2>this.maxQueries)return jr(`WebGPUTimestampQueryPool [${this.type}]: Maximum number of queries exceeded, when using trackTimestamp it is necessary to resolves the queries via renderer.resolveTimestampsAsync( THREE.TimestampQuery.${this.type.toUpperCase()} ).`),null;const n=this.currentQueryIndex;return this.currentQueryIndex+=2,this.queryOffsets.set(e,n),n}async resolveQueriesAsync(){if(!this.trackTimestamp||this.currentQueryIndex===0||this.isDisposed)return this.lastValue;if(this.pendingResolve)return this.pendingResolve;this.pendingResolve=this._resolveQueries();try{return await this.pendingResolve}finally{this.pendingResolve=null}}async _resolveQueries(){if(this.isDisposed)return this.lastValue;try{if(this.resultBuffer.mapState!=="unmapped")return this.lastValue;const e=new Map(this.queryOffsets),n=this.currentQueryIndex,r=n*8;this.currentQueryIndex=0,this.queryOffsets.clear();const i=this.device.createCommandEncoder();i.resolveQuerySet(this.querySet,0,n,this.resolveBuffer,0),i.copyBufferToBuffer(this.resolveBuffer,0,this.resultBuffer,0,r);const s=i.finish();if(this.device.queue.submit([s]),this.resultBuffer.mapState!=="unmapped")return this.lastValue;if(await this.resultBuffer.mapAsync(GPUMapMode.READ,0,r),this.isDisposed)return this.resultBuffer.mapState==="mapped"&&this.resultBuffer.unmap(),this.lastValue;const a=new BigUint64Array(this.resultBuffer.getMappedRange(0,r)),o={},l=[];for(const[u,f]of e){const p=u.match(/^(.*):f(\d+)$/),m=parseInt(p[2]);l.includes(m)===!1&&l.push(m),o[m]===void 0&&(o[m]=0);const x=a[f],b=a[f+1],v=Number(b-x)/1e6;this.timestamps.set(u,v),o[m]+=v}const c=o[l[l.length-1]];return this.resultBuffer.unmap(),this.lastValue=c,this.frames=l,c}catch(e){return e("Error resolving queries:",e),this.resultBuffer.mapState==="mapped"&&this.resultBuffer.unmap(),this.lastValue}}async dispose(){if(!this.isDisposed){if(this.isDisposed=!0,this.pendingResolve)try{await this.pendingResolve}catch(e){e("Error waiting for pending resolve:",e)}if(this.resultBuffer&&this.resultBuffer.mapState==="mapped")try{this.resultBuffer.unmap()}catch(e){e("Error unmapping buffer:",e)}this.querySet&&(this.querySet.destroy(),this.querySet=null),this.resolveBuffer&&(this.resolveBuffer.destroy(),this.resolveBuffer=null),this.resultBuffer&&(this.resultBuffer.destroy(),this.resultBuffer=null),this.queryOffsets.clear(),this.pendingResolve=null}}}class k6e extends wte{constructor(e={}){super(e),this.isWebGPUBackend=!0,this.parameters.alpha=e.alpha===void 0?!0:e.alpha,this.parameters.compatibilityMode=e.compatibilityMode===void 0?!1:e.compatibilityMode,this.parameters.requiredLimits=e.requiredLimits===void 0?{}:e.requiredLimits,this.compatibilityMode=this.parameters.compatibilityMode,this.device=null,this.defaultRenderPassdescriptor=null,this.utils=new R6e(this),this.attributeUtils=new O6e(this),this.bindingUtils=new D6e(this),this.pipelineUtils=new L6e(this),this.textureUtils=new y6e(this),this.occludedResolveCache=new Map}async init(e){await super.init(e);const n=this.parameters;let r;if(n.device===void 0){const i={powerPreference:n.powerPreference,featureLevel:n.compatibilityMode?"compatibility":void 0},s=typeof navigator<"u"?await navigator.gpu.requestAdapter(i):null;if(s===null)throw new Error("WebGPUBackend: Unable to create WebGPU adapter.");const a=Object.values(xL),o=[];for(const c of a)s.features.has(c)&&o.push(c);const l={requiredFeatures:o,requiredLimits:n.requiredLimits};r=await s.requestDevice(l)}else r=n.device;r.lost.then(i=>{const s={api:"WebGPU",message:i.message||"Unknown reason",reason:i.reason||null,originalEvent:i};e.onDeviceLost(s)}),this.device=r,this.trackTimestamp=this.trackTimestamp&&this.hasFeature(xL.TimestampQuery),this.updateSize()}get context(){const e=this.renderer.getCanvasTarget(),n=this.get(e);let r=n.context;if(r===void 0){const i=this.parameters;e.isDefaultCanvasTarget===!0&&i.context!==void 0?r=i.context:r=e.domElement.getContext("webgpu"),"setAttribute"in e.domElement&&e.domElement.setAttribute("data-engine",`three.js r${Vp} webgpu`);const s=i.alpha?"premultiplied":"opaque",a=i.outputType===Ci?"extended":"standard";r.configure({device:this.device,format:this.utils.getPreferredCanvasFormat(),usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,alphaMode:s,toneMapping:{mode:a}}),n.context=r}return r}get coordinateSystem(){return jf}async getArrayBufferAsync(e){return await this.attributeUtils.getArrayBufferAsync(e)}getContext(){return this.context}_getDefaultRenderPassDescriptor(){const e=this.renderer,n=e.getCanvasTarget(),r=this.get(n),i=e.currentSamples;let s=r.descriptor;if(s===void 0||r.samples!==i){s={colorAttachments:[{view:null}]},(e.depth===!0||e.stencil===!0)&&(s.depthStencilAttachment={view:this.textureUtils.getDepthBuffer(e.depth,e.stencil).createView()});const o=s.colorAttachments[0];i>0?o.view=this.textureUtils.getColorBuffer().createView():o.resolveTarget=void 0,r.descriptor=s,r.samples=i}const a=s.colorAttachments[0];return i>0?a.resolveTarget=this.context.getCurrentTexture().createView():a.view=this.context.getCurrentTexture().createView(),s}_isRenderCameraDepthArray(e){return e.depthTexture&&e.depthTexture.image.depth>1&&e.camera.isArrayCamera}_getRenderPassDescriptor(e,n={}){const r=e.renderTarget,i=this.get(r);let s=i.descriptors;(s===void 0||i.width!==r.width||i.height!==r.height||i.samples!==r.samples)&&(s={},i.descriptors=s);const a=e.getCacheKey();let o=s[a];if(o===void 0){const c=e.textures,u=[];let f;const p=this._isRenderCameraDepthArray(e);for(let m=0;m<c.length;m++){const x=this.get(c[m]),b={label:`colorAttachment_${m}`,baseMipLevel:e.activeMipmapLevel,mipLevelCount:1,baseArrayLayer:e.activeCubeFace,arrayLayerCount:1,dimension:Fi.TwoD};if(r.isRenderTarget3D)f=e.activeCubeFace,b.baseArrayLayer=0,b.dimension=Fi.ThreeD,b.depthOrArrayLayers=c[m].image.depth;else if(r.isRenderTarget&&c[m].image.depth>1)if(p===!0){const v=e.camera.cameras;for(let _=0;_<v.length;_++){const E={...b,baseArrayLayer:_,arrayLayerCount:1,dimension:Fi.TwoD},T=x.texture.createView(E);u.push({view:T,resolveTarget:void 0,depthSlice:void 0})}}else b.dimension=Fi.TwoDArray,b.depthOrArrayLayers=c[m].image.depth;if(p!==!0){const v=x.texture.createView(b);let _,E;x.msaaTexture!==void 0?(_=x.msaaTexture.createView(),E=v):(_=v,E=void 0),u.push({view:_,resolveTarget:E,depthSlice:f})}}if(o={textureViews:u},e.depth){const m=this.get(e.depthTexture),x={};e.depthTexture.isArrayTexture&&(x.dimension=Fi.TwoD,x.arrayLayerCount=1,x.baseArrayLayer=e.activeCubeFace),o.depthStencilView=m.texture.createView(x)}s[a]=o,i.width=r.width,i.height=r.height,i.samples=r.samples,i.activeMipmapLevel=e.activeMipmapLevel,i.activeCubeFace=e.activeCubeFace}const l={colorAttachments:[]};for(let c=0;c<o.textureViews.length;c++){const u=o.textureViews[c];let f={r:0,g:0,b:0,a:1};c===0&&n.clearValue&&(f=n.clearValue),l.colorAttachments.push({view:u.view,depthSlice:u.depthSlice,resolveTarget:u.resolveTarget,loadOp:n.loadOp||er.Load,storeOp:n.storeOp||da.Store,clearValue:f})}return o.depthStencilView&&(l.depthStencilAttachment={view:o.depthStencilView}),l}beginRender(e){const n=this.get(e),r=this.device,i=e.occlusionQueryCount;let s;i>0&&(n.currentOcclusionQuerySet&&n.currentOcclusionQuerySet.destroy(),n.currentOcclusionQueryBuffer&&n.currentOcclusionQueryBuffer.destroy(),n.currentOcclusionQuerySet=n.occlusionQuerySet,n.currentOcclusionQueryBuffer=n.occlusionQueryBuffer,n.currentOcclusionQueryObjects=n.occlusionQueryObjects,s=r.createQuerySet({type:"occlusion",count:i,label:`occlusionQuerySet_${e.id}`}),n.occlusionQuerySet=s,n.occlusionQueryIndex=0,n.occlusionQueryObjects=new Array(i),n.lastOcclusionObject=null);let a;e.textures===null?a=this._getDefaultRenderPassDescriptor():a=this._getRenderPassDescriptor(e,{loadOp:er.Load}),this.initTimestampQuery(Ac.RENDER,this.getTimestampUID(e),a),a.occlusionQuerySet=s;const o=a.depthStencilAttachment;if(e.textures!==null){const c=a.colorAttachments;for(let u=0;u<c.length;u++){const f=c[u];e.clearColor?(f.clearValue=u===0?e.clearColorValue:{r:0,g:0,b:0,a:1},f.loadOp=er.Clear):f.loadOp=er.Load,f.storeOp=da.Store}}else{const c=a.colorAttachments[0];e.clearColor?(c.clearValue=e.clearColorValue,c.loadOp=er.Clear):c.loadOp=er.Load,c.storeOp=da.Store}e.depth&&(e.clearDepth?(o.depthClearValue=e.clearDepthValue,o.depthLoadOp=er.Clear):o.depthLoadOp=er.Load,o.depthStoreOp=da.Store),e.stencil&&(e.clearStencil?(o.stencilClearValue=e.clearStencilValue,o.stencilLoadOp=er.Clear):o.stencilLoadOp=er.Load,o.stencilStoreOp=da.Store);const l=r.createCommandEncoder({label:"renderContext_"+e.id});if(this._isRenderCameraDepthArray(e)===!0){const c=e.camera.cameras;!n.layerDescriptors||n.layerDescriptors.length!==c.length?this._createDepthLayerDescriptors(e,n,a,c):this._updateDepthLayerDescriptors(e,n,c),n.bundleEncoders=[],n.bundleSets=[];for(let u=0;u<c.length;u++){const f=this.pipelineUtils.createBundleEncoder(e,"renderBundleArrayCamera_"+u),p={attributes:{},bindingGroups:[],pipeline:null,index:null};n.bundleEncoders.push(f),n.bundleSets.push(p)}n.currentPass=null}else{const c=l.beginRenderPass(a);n.currentPass=c,e.viewport&&this.updateViewport(e),e.scissor&&this.updateScissor(e)}n.descriptor=a,n.encoder=l,n.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},n.renderBundles=[]}_createDepthLayerDescriptors(e,n,r,i){const s=r.depthStencilAttachment;n.layerDescriptors=[];const a=this.get(e.depthTexture);a.viewCache||(a.viewCache=[]);for(let o=0;o<i.length;o++){const l={...r,colorAttachments:[{...r.colorAttachments[0],view:r.colorAttachments[o].view}]};if(r.depthStencilAttachment){const c=o;a.viewCache[c]||(a.viewCache[c]=a.texture.createView({dimension:Fi.TwoD,baseArrayLayer:o,arrayLayerCount:1})),l.depthStencilAttachment={view:a.viewCache[c],depthLoadOp:s.depthLoadOp||er.Clear,depthStoreOp:s.depthStoreOp||da.Store,depthClearValue:s.depthClearValue||1},e.stencil&&(l.depthStencilAttachment.stencilLoadOp=s.stencilLoadOp,l.depthStencilAttachment.stencilStoreOp=s.stencilStoreOp,l.depthStencilAttachment.stencilClearValue=s.stencilClearValue)}else l.depthStencilAttachment={...s};n.layerDescriptors.push(l)}}_updateDepthLayerDescriptors(e,n,r){for(let i=0;i<r.length;i++){const s=n.layerDescriptors[i];if(s.depthStencilAttachment){const a=s.depthStencilAttachment;e.depth&&(e.clearDepth?(a.depthClearValue=e.clearDepthValue,a.depthLoadOp=er.Clear):a.depthLoadOp=er.Load),e.stencil&&(e.clearStencil?(a.stencilClearValue=e.clearStencilValue,a.stencilLoadOp=er.Clear):a.stencilLoadOp=er.Load)}}}finishRender(e){const n=this.get(e),r=e.occlusionQueryCount;n.renderBundles.length>0&&n.currentPass.executeBundles(n.renderBundles),r>n.occlusionQueryIndex&&n.currentPass.endOcclusionQuery();const i=n.encoder;if(this._isRenderCameraDepthArray(e)===!0){const s=[];for(let a=0;a<n.bundleEncoders.length;a++){const o=n.bundleEncoders[a];s.push(o.finish())}for(let a=0;a<n.layerDescriptors.length;a++)if(a<s.length){const o=n.layerDescriptors[a],l=i.beginRenderPass(o);if(e.viewport){const{x:c,y:u,width:f,height:p,minDepth:m,maxDepth:x}=e.viewportValue;l.setViewport(c,u,f,p,m,x)}if(e.scissor){const{x:c,y:u,width:f,height:p}=e.scissorValue;l.setScissorRect(c,u,f,p)}l.executeBundles([s[a]]),l.end()}}else n.currentPass&&n.currentPass.end();if(r>0){const s=r*8;let a=this.occludedResolveCache.get(s);a===void 0&&(a=this.device.createBuffer({size:s,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),this.occludedResolveCache.set(s,a));const o=this.device.createBuffer({size:s,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});n.encoder.resolveQuerySet(n.occlusionQuerySet,0,r,a,0),n.encoder.copyBufferToBuffer(a,0,o,0,s),n.occlusionQueryBuffer=o,this.resolveOccludedAsync(e)}if(this.device.queue.submit([n.encoder.finish()]),e.textures!==null){const s=e.textures;for(let a=0;a<s.length;a++){const o=s[a];o.generateMipmaps===!0&&this.textureUtils.generateMipmaps(o)}}}isOccluded(e,n){const r=this.get(e);return r.occluded&&r.occluded.has(n)}async resolveOccludedAsync(e){const n=this.get(e),{currentOcclusionQueryBuffer:r,currentOcclusionQueryObjects:i}=n;if(r&&i){const s=new WeakSet;n.currentOcclusionQueryObjects=null,n.currentOcclusionQueryBuffer=null,await r.mapAsync(GPUMapMode.READ);const a=r.getMappedRange(),o=new BigUint64Array(a);for(let l=0;l<i.length;l++)o[l]===BigInt(0)&&s.add(i[l]);r.destroy(),n.occluded=s}}updateViewport(e){const{currentPass:n}=this.get(e),{x:r,y:i,width:s,height:a,minDepth:o,maxDepth:l}=e.viewportValue;n.setViewport(r,i,s,a,o,l)}updateScissor(e){const{currentPass:n}=this.get(e),{x:r,y:i,width:s,height:a}=e.scissorValue;n.setScissorRect(r,i,s,a)}getClearColor(){const e=super.getClearColor();return this.renderer.alpha===!0&&(e.r*=e.a,e.g*=e.a,e.b*=e.a),e}clear(e,n,r,i=null){const s=this.device,a=this.renderer;let o=[],l,c,u,f;if(e){const x=this.getClearColor();c={r:x.r,g:x.g,b:x.b,a:x.a}}if(i===null){u=a.depth,f=a.stencil;const x=this._getDefaultRenderPassDescriptor();if(e){o=x.colorAttachments;const b=o[0];b.clearValue=c,b.loadOp=er.Clear,b.storeOp=da.Store}(u||f)&&(l=x.depthStencilAttachment)}else{u=i.depth,f=i.stencil;const x={loadOp:e?er.Clear:er.Load,clearValue:e?c:void 0};u&&(x.depthLoadOp=n?er.Clear:er.Load,x.depthClearValue=n?a.getClearDepth():void 0,x.depthStoreOp=da.Store),f&&(x.stencilLoadOp=r?er.Clear:er.Load,x.stencilClearValue=r?a.getClearStencil():void 0,x.stencilStoreOp=da.Store);const b=this._getRenderPassDescriptor(i,x);o=b.colorAttachments,l=b.depthStencilAttachment}u&&l&&(n?(l.depthLoadOp=er.Clear,l.depthClearValue=a.getClearDepth(),l.depthStoreOp=da.Store):(l.depthLoadOp=er.Load,l.depthStoreOp=da.Store)),f&&l&&(r?(l.stencilLoadOp=er.Clear,l.stencilClearValue=a.getClearStencil(),l.stencilStoreOp=da.Store):(l.stencilLoadOp=er.Load,l.stencilStoreOp=da.Store));const p=s.createCommandEncoder({label:"clear"});p.beginRenderPass({colorAttachments:o,depthStencilAttachment:l}).end(),s.queue.submit([p.finish()])}beginCompute(e){const n=this.get(e),r={label:"computeGroup_"+e.id};this.initTimestampQuery(Ac.COMPUTE,this.getTimestampUID(e),r),n.cmdEncoderGPU=this.device.createCommandEncoder({label:"computeGroup_"+e.id}),n.passEncoderGPU=n.cmdEncoderGPU.beginComputePass(r)}compute(e,n,r,i,s=null){const a=this.get(n),{passEncoderGPU:o}=this.get(e),l=this.get(i).pipeline;this.pipelineUtils.setPipeline(o,l);for(let c=0,u=r.length;c<u;c++){const f=r[c],p=this.get(f);o.setBindGroup(c,p.group)}if(s===null&&(s=n.count),s&&typeof s=="object"&&s.isIndirectStorageBufferAttribute){const c=this.get(s).buffer;o.dispatchWorkgroupsIndirect(c,0);return}if(typeof s=="number"){const c=s;if(a.dispatchSize===void 0||a.count!==c){a.dispatchSize=[0,1,1],a.count=c;const u=n.workgroupSize;let f=u[0];for(let x=1;x<u.length;x++)f*=u[x];const p=Math.ceil(c/f),m=this.device.limits.maxComputeWorkgroupsPerDimension;s=[p,1,1],p>m&&(s[0]=Math.min(p,m),s[1]=Math.ceil(p/m)),a.dispatchSize=s}s=a.dispatchSize}o.dispatchWorkgroups(s[0],s[1]||1,s[2]||1)}finishCompute(e){const n=this.get(e);n.passEncoderGPU.end(),this.device.queue.submit([n.cmdEncoderGPU.finish()])}draw(e,n){const{object:r,material:i,context:s,pipeline:a}=e,o=e.getBindings(),l=this.get(s),c=this.get(a),u=c.pipeline;if(c.error===!0)return;const f=e.getIndex(),p=f!==null,m=e.getDrawParameters();if(m===null)return;const x=(v,_)=>{this.pipelineUtils.setPipeline(v,u),_.pipeline=u;const E=_.bindingGroups;for(let A=0,C=o.length;A<C;A++){const M=o[A],P=this.get(M);E[M.index]!==M.id&&(v.setBindGroup(M.index,P.group),E[M.index]=M.id)}if(p===!0&&_.index!==f){const A=this.get(f).buffer,C=f.array instanceof Uint16Array?q0.Uint16:q0.Uint32;v.setIndexBuffer(A,C),_.index=f}const T=e.getVertexBuffers();for(let A=0,C=T.length;A<C;A++){const M=T[A];if(_.attributes[A]!==M){const P=this.get(M).buffer;v.setVertexBuffer(A,P),_.attributes[A]=M}}s.stencil===!0&&i.stencilWrite===!0&&l.currentStencilRef!==i.stencilRef&&(v.setStencilReference(i.stencilRef),l.currentStencilRef=i.stencilRef)},b=(v,_)=>{if(x(v,_),r.isBatchedMesh===!0){const E=r._multiDrawStarts,T=r._multiDrawCounts,A=r._multiDrawCount,C=r._multiDrawInstances;C!==null&&jr("WebGPUBackend: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection.");for(let M=0;M<A;M++){const P=C?C[M]:1,D=P>1?0:M;p===!0?v.drawIndexed(T[M],P,E[M]/f.array.BYTES_PER_ELEMENT,0,D):v.draw(T[M],P,E[M],D),n.update(r,T[M],P)}}else if(p===!0){const{vertexCount:E,instanceCount:T,firstVertex:A}=m,C=e.getIndirect();if(C!==null){const M=this.get(C).buffer;v.drawIndexedIndirect(M,0)}else v.drawIndexed(E,T,A,0,0);n.update(r,E,T)}else{const{vertexCount:E,instanceCount:T,firstVertex:A}=m,C=e.getIndirect();if(C!==null){const M=this.get(C).buffer;v.drawIndirect(M,0)}else v.draw(E,T,A,0);n.update(r,E,T)}};if(e.camera.isArrayCamera&&e.camera.cameras.length>0){const v=this.get(e.camera),_=e.camera.cameras,E=e.getBindingGroup("cameraIndex");if(v.indexesGPU===void 0||v.indexesGPU.length!==_.length){const A=this.get(E),C=[],M=new Uint32Array([0,0,0,0]);for(let P=0,D=_.length;P<D;P++){M[0]=P;const N=this.bindingUtils.createBindGroupIndex(M,A.layout);C.push(N)}v.indexesGPU=C}const T=this.renderer.getPixelRatio();for(let A=0,C=_.length;A<C;A++){const M=_[A];if(r.layers.test(M.layers)){const P=M.viewport;let D=l.currentPass,N=l.currentSets;if(l.bundleEncoders){const L=l.bundleEncoders[A],k=l.bundleSets[A];D=L,N=k}P&&D.setViewport(Math.floor(P.x*T),Math.floor(P.y*T),Math.floor(P.width*T),Math.floor(P.height*T),s.viewportValue.minDepth,s.viewportValue.maxDepth),E&&v.indexesGPU&&(D.setBindGroup(E.index,v.indexesGPU[A]),N.bindingGroups[E.index]=E.id),b(D,N)}}}else if(l.currentPass){if(l.occlusionQuerySet!==void 0){const v=l.lastOcclusionObject;v!==r&&(v!==null&&v.occlusionTest===!0&&(l.currentPass.endOcclusionQuery(),l.occlusionQueryIndex++),r.occlusionTest===!0&&(l.currentPass.beginOcclusionQuery(l.occlusionQueryIndex),l.occlusionQueryObjects[l.occlusionQueryIndex]=r),l.lastOcclusionObject=r)}b(l.currentPass,l.currentSets)}}needsRenderUpdate(e){const n=this.get(e),{object:r,material:i}=e,s=this.utils,a=s.getSampleCountRenderContext(e.context),o=s.getCurrentColorSpace(e.context),l=s.getCurrentColorFormat(e.context),c=s.getCurrentDepthStencilFormat(e.context),u=s.getPrimitiveTopology(r,i);let f=!1;return(n.material!==i||n.materialVersion!==i.version||n.transparent!==i.transparent||n.blending!==i.blending||n.premultipliedAlpha!==i.premultipliedAlpha||n.blendSrc!==i.blendSrc||n.blendDst!==i.blendDst||n.blendEquation!==i.blendEquation||n.blendSrcAlpha!==i.blendSrcAlpha||n.blendDstAlpha!==i.blendDstAlpha||n.blendEquationAlpha!==i.blendEquationAlpha||n.colorWrite!==i.colorWrite||n.depthWrite!==i.depthWrite||n.depthTest!==i.depthTest||n.depthFunc!==i.depthFunc||n.stencilWrite!==i.stencilWrite||n.stencilFunc!==i.stencilFunc||n.stencilFail!==i.stencilFail||n.stencilZFail!==i.stencilZFail||n.stencilZPass!==i.stencilZPass||n.stencilFuncMask!==i.stencilFuncMask||n.stencilWriteMask!==i.stencilWriteMask||n.side!==i.side||n.alphaToCoverage!==i.alphaToCoverage||n.sampleCount!==a||n.colorSpace!==o||n.colorFormat!==l||n.depthStencilFormat!==c||n.primitiveTopology!==u||n.clippingContextCacheKey!==e.clippingContextCacheKey)&&(n.material=i,n.materialVersion=i.version,n.transparent=i.transparent,n.blending=i.blending,n.premultipliedAlpha=i.premultipliedAlpha,n.blendSrc=i.blendSrc,n.blendDst=i.blendDst,n.blendEquation=i.blendEquation,n.blendSrcAlpha=i.blendSrcAlpha,n.blendDstAlpha=i.blendDstAlpha,n.blendEquationAlpha=i.blendEquationAlpha,n.colorWrite=i.colorWrite,n.depthWrite=i.depthWrite,n.depthTest=i.depthTest,n.depthFunc=i.depthFunc,n.stencilWrite=i.stencilWrite,n.stencilFunc=i.stencilFunc,n.stencilFail=i.stencilFail,n.stencilZFail=i.stencilZFail,n.stencilZPass=i.stencilZPass,n.stencilFuncMask=i.stencilFuncMask,n.stencilWriteMask=i.stencilWriteMask,n.side=i.side,n.alphaToCoverage=i.alphaToCoverage,n.sampleCount=a,n.colorSpace=o,n.colorFormat=l,n.depthStencilFormat=c,n.primitiveTopology=u,n.clippingContextCacheKey=e.clippingContextCacheKey,f=!0),f}getRenderCacheKey(e){const{object:n,material:r}=e,i=this.utils,s=e.context,a=n.isMesh&&n.matrixWorld.determinant()<0;return[r.transparent,r.blending,r.premultipliedAlpha,r.blendSrc,r.blendDst,r.blendEquation,r.blendSrcAlpha,r.blendDstAlpha,r.blendEquationAlpha,r.colorWrite,r.depthWrite,r.depthTest,r.depthFunc,r.stencilWrite,r.stencilFunc,r.stencilFail,r.stencilZFail,r.stencilZPass,r.stencilFuncMask,r.stencilWriteMask,r.side,a,i.getSampleCountRenderContext(s),i.getCurrentColorSpace(s),i.getCurrentColorFormat(s),i.getCurrentDepthStencilFormat(s),i.getPrimitiveTopology(n,r),e.getGeometryCacheKey(),e.clippingContextCacheKey].join()}updateSampler(e){return this.textureUtils.updateSampler(e)}createDefaultTexture(e){return this.textureUtils.createDefaultTexture(e)}createTexture(e,n){this.textureUtils.createTexture(e,n)}updateTexture(e,n){this.textureUtils.updateTexture(e,n)}generateMipmaps(e){this.textureUtils.generateMipmaps(e)}destroyTexture(e,n=!1){this.textureUtils.destroyTexture(e,n)}async copyTextureToBuffer(e,n,r,i,s,a){return this.textureUtils.copyTextureToBuffer(e,n,r,i,s,a)}initTimestampQuery(e,n,r){if(!this.trackTimestamp)return;this.timestampQueryPool[e]||(this.timestampQueryPool[e]=new I6e(this.device,e,2048));const i=this.timestampQueryPool[e],s=i.allocateQueriesForContext(n);r.timestampWrites={querySet:i.querySet,beginningOfPassWriteIndex:s,endOfPassWriteIndex:s+1}}createNodeBuilder(e,n){return new M6e(e,n)}createProgram(e){const n=this.get(e);n.module={module:this.device.createShaderModule({code:e.code,label:e.stage+(e.name!==""?`_${e.name}`:"")}),entryPoint:"main"}}destroyProgram(e){this.delete(e)}createRenderPipeline(e,n){this.pipelineUtils.createRenderPipeline(e,n)}createComputePipeline(e,n){this.pipelineUtils.createComputePipeline(e,n)}beginBundle(e){const n=this.get(e);n._currentPass=n.currentPass,n._currentSets=n.currentSets,n.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},n.currentPass=this.pipelineUtils.createBundleEncoder(e)}finishBundle(e,n){const r=this.get(e),s=r.currentPass.finish();this.get(n).bundleGPU=s,r.currentSets=r._currentSets,r.currentPass=r._currentPass}addBundle(e,n){this.get(e).renderBundles.push(this.get(n).bundleGPU)}createBindings(e,n,r,i){this.bindingUtils.createBindings(e,n,r,i)}updateBindings(e,n,r,i){this.bindingUtils.createBindings(e,n,r,i)}updateBinding(e){this.bindingUtils.updateBinding(e)}createIndexAttribute(e){let n=GPUBufferUsage.INDEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST;(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute)&&(n|=GPUBufferUsage.STORAGE),this.attributeUtils.createAttribute(e,n)}createAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createStorageAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.STORAGE|GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createIndirectStorageAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.STORAGE|GPUBufferUsage.INDIRECT|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}updateAttribute(e){this.attributeUtils.updateAttribute(e)}destroyAttribute(e){this.attributeUtils.destroyAttribute(e)}updateSize(){this.delete(this.renderer.getCanvasTarget())}getMaxAnisotropy(){return 16}hasFeature(e){return yH[e]!==void 0&&(e=yH[e]),this.device.features.has(e)}copyTextureToTexture(e,n,r=null,i=null,s=0,a=0){let o=0,l=0,c=0,u=0,f=0,p=0,m=e.image.width,x=e.image.height,b=1;r!==null&&(r.isBox3===!0?(u=r.min.x,f=r.min.y,p=r.min.z,m=r.max.x-r.min.x,x=r.max.y-r.min.y,b=r.max.z-r.min.z):(u=r.min.x,f=r.min.y,m=r.max.x-r.min.x,x=r.max.y-r.min.y,b=1)),i!==null&&(o=i.x,l=i.y,c=i.z||0);const v=this.device.createCommandEncoder({label:"copyTextureToTexture_"+e.id+"_"+n.id}),_=this.get(e).texture,E=this.get(n).texture;v.copyTextureToTexture({texture:_,mipLevel:s,origin:{x:u,y:f,z:p}},{texture:E,mipLevel:a,origin:{x:o,y:l,z:c}},[m,x,b]),this.device.queue.submit([v.finish()]),a===0&&n.generateMipmaps&&this.textureUtils.generateMipmaps(n)}copyFramebufferToTexture(e,n,r){const i=this.get(n);let s=null;n.renderTarget?e.isDepthTexture?s=this.get(n.depthTexture).texture:s=this.get(n.textures[0]).texture:e.isDepthTexture?s=this.textureUtils.getDepthBuffer(n.depth,n.stencil):s=this.context.getCurrentTexture();const a=this.get(e).texture;if(s.format!==a.format){xt("WebGPUBackend: copyFramebufferToTexture: Source and destination formats do not match.",s.format,a.format);return}let o;if(i.currentPass?(i.currentPass.end(),o=i.encoder):o=this.device.createCommandEncoder({label:"copyFramebufferToTexture_"+e.id}),o.copyTextureToTexture({texture:s,origin:[r.x,r.y,0]},{texture:a},[r.z,r.w]),e.generateMipmaps&&this.textureUtils.generateMipmaps(e,o),i.currentPass){const{descriptor:l}=i;for(let c=0;c<l.colorAttachments.length;c++)l.colorAttachments[c].loadOp=er.Load;n.depth&&(l.depthStencilAttachment.depthLoadOp=er.Load),n.stencil&&(l.depthStencilAttachment.stencilLoadOp=er.Load),i.currentPass=o.beginRenderPass(l),i.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},n.viewport&&this.updateViewport(n),n.scissor&&this.updateScissor(n)}else this.device.queue.submit([o.finish()])}dispose(){this.textureUtils.dispose()}}class B6e extends gB{constructor(e,n,r,i,s,a){super(e,n,r,i,s,a),this.iesMap=null}copy(e,n){return super.copy(e,n),this.iesMap=e.iesMap,this}}class F6e extends gB{constructor(e,n,r,i,s,a){super(e,n,r,i,s,a),this.aspect=null}copy(e,n){return super.copy(e,n),this.aspect=e.aspect,this}}class U6e extends mte{constructor(){super(),this.addMaterial(Y5e,"MeshPhongMaterial"),this.addMaterial(Qee,"MeshStandardMaterial"),this.addMaterial(KUe,"MeshPhysicalMaterial"),this.addMaterial(eje,"MeshToonMaterial"),this.addMaterial($5e,"MeshBasicMaterial"),this.addMaterial(q5e,"MeshLambertMaterial"),this.addMaterial(B5e,"MeshNormalMaterial"),this.addMaterial(rje,"MeshMatcapMaterial"),this.addMaterial(O5e,"LineBasicMaterial"),this.addMaterial(L5e,"LineDashedMaterial"),this.addMaterial(lje,"PointsMaterial"),this.addMaterial(ete,"SpriteMaterial"),this.addMaterial(fje,"ShadowMaterial"),this.addLight(z4e,bEe),this.addLight(mze,rQ),this.addLight(gze,SEe),this.addLight(gF,gB),this.addLight(bze,iQ),this.addLight(_ze,xEe),this.addLight(Sze,TEe),this.addLight(xze,B6e),this.addLight(vze,F6e),this.addToneMapping(Yje,kZ),this.addToneMapping(Kje,BZ),this.addToneMapping(Zje,FZ),this.addToneMapping(Jje,UZ),this.addToneMapping(r4e,jZ),this.addToneMapping(i4e,zZ)}}class j6e extends $ze{constructor(e={}){let n;e.forceWebGL?n=fH:(n=k6e,e.getFallback=()=>(ct("WebGPURenderer: WebGPU is not available, running under WebGL2 backend."),new fH(e)));const r=new n(e);super(r,e),this.library=new U6e,this.isWebGPURenderer=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}}const lN={type:"change"},yF={type:"start"},vF={type:"end"},wH=1e-6,rr={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4},$w=new mt,ff=new mt,z6e=new ae,Gw=new ae,cN=new ae,mg=new Xl,TH=new ae,Vw=new ae,uN=new ae,Hw=new ae;class $6e extends hC{constructor(e,n=null){super(e,n),this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:Ls.ROTATE,MIDDLE:Ls.DOLLY,RIGHT:Ls.PAN},this.target=new ae,this.state=rr.NONE,this.keyState=rr.NONE,this._lastPosition=new ae,this._lastZoom=1,this._touchZoomDistanceStart=0,this._touchZoomDistanceEnd=0,this._lastAngle=0,this._eye=new ae,this._movePrev=new mt,this._moveCurr=new mt,this._lastAxis=new ae,this._zoomStart=new mt,this._zoomEnd=new mt,this._panStart=new mt,this._panEnd=new mt,this._pointers=[],this._pointerPositions={},this._onPointerMove=V6e.bind(this),this._onPointerDown=G6e.bind(this),this._onPointerUp=H6e.bind(this),this._onPointerCancel=W6e.bind(this),this._onContextMenu=J6e.bind(this),this._onMouseWheel=Q6e.bind(this),this._onKeyDown=X6e.bind(this),this._onKeyUp=q6e.bind(this),this._onTouchStart=e8e.bind(this),this._onTouchMove=t8e.bind(this),this._onTouchEnd=n8e.bind(this),this._onMouseDown=Y6e.bind(this),this._onMouseMove=K6e.bind(this),this._onMouseUp=Z6e.bind(this),this._target0=this.target.clone(),this._position0=this.object.position.clone(),this._up0=this.object.up.clone(),this._zoom0=this.object.zoom,n!==null&&(this.connect(n),this.handleResize()),this.update()}connect(e){super.connect(e),window.addEventListener("keydown",this._onKeyDown),window.addEventListener("keyup",this._onKeyUp),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerCancel),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="none"}disconnect(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}handleResize(){const e=this.domElement.getBoundingClientRect(),n=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-n.clientLeft,this.screen.top=e.top+window.pageYOffset-n.clientTop,this.screen.width=e.width,this.screen.height=e.height}update(){this._eye.subVectors(this.object.position,this.target),this.noRotate||this._rotateCamera(),this.noZoom||this._zoomCamera(),this.noPan||this._panCamera(),this.object.position.addVectors(this.target,this._eye),this.object.isPerspectiveCamera?(this._checkDistances(),this.object.lookAt(this.target),this._lastPosition.distanceToSquared(this.object.position)>wH&&(this.dispatchEvent(lN),this._lastPosition.copy(this.object.position))):this.object.isOrthographicCamera?(this.object.lookAt(this.target),(this._lastPosition.distanceToSquared(this.object.position)>wH||this._lastZoom!==this.object.zoom)&&(this.dispatchEvent(lN),this._lastPosition.copy(this.object.position),this._lastZoom=this.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type.")}reset(){this.state=rr.NONE,this.keyState=rr.NONE,this.target.copy(this._target0),this.object.position.copy(this._position0),this.object.up.copy(this._up0),this.object.zoom=this._zoom0,this.object.updateProjectionMatrix(),this._eye.subVectors(this.object.position,this.target),this.object.lookAt(this.target),this.dispatchEvent(lN),this._lastPosition.copy(this.object.position),this._lastZoom=this.object.zoom}_panCamera(){if(ff.copy(this._panEnd).sub(this._panStart),ff.lengthSq()){if(this.object.isOrthographicCamera){const e=(this.object.right-this.object.left)/this.object.zoom/this.domElement.clientWidth,n=(this.object.top-this.object.bottom)/this.object.zoom/this.domElement.clientWidth;ff.x*=e,ff.y*=n}ff.multiplyScalar(this._eye.length()*this.panSpeed),Gw.copy(this._eye).cross(this.object.up).setLength(ff.x),Gw.add(z6e.copy(this.object.up).setLength(ff.y)),this.object.position.add(Gw),this.target.add(Gw),this.staticMoving?this._panStart.copy(this._panEnd):this._panStart.add(ff.subVectors(this._panEnd,this._panStart).multiplyScalar(this.dynamicDampingFactor))}}_rotateCamera(){Hw.set(this._moveCurr.x-this._movePrev.x,this._moveCurr.y-this._movePrev.y,0);let e=Hw.length();e?(this._eye.copy(this.object.position).sub(this.target),TH.copy(this._eye).normalize(),Vw.copy(this.object.up).normalize(),uN.crossVectors(Vw,TH).normalize(),Vw.setLength(this._moveCurr.y-this._movePrev.y),uN.setLength(this._moveCurr.x-this._movePrev.x),Hw.copy(Vw.add(uN)),cN.crossVectors(Hw,this._eye).normalize(),e*=this.rotateSpeed,mg.setFromAxisAngle(cN,e),this._eye.applyQuaternion(mg),this.object.up.applyQuaternion(mg),this._lastAxis.copy(cN),this._lastAngle=e):!this.staticMoving&&this._lastAngle&&(this._lastAngle*=Math.sqrt(1-this.dynamicDampingFactor),this._eye.copy(this.object.position).sub(this.target),mg.setFromAxisAngle(this._lastAxis,this._lastAngle),this._eye.applyQuaternion(mg),this.object.up.applyQuaternion(mg)),this._movePrev.copy(this._moveCurr)}_zoomCamera(){let e;this.state===rr.TOUCH_ZOOM_PAN?(e=this._touchZoomDistanceStart/this._touchZoomDistanceEnd,this._touchZoomDistanceStart=this._touchZoomDistanceEnd,this.object.isPerspectiveCamera?this._eye.multiplyScalar(e):this.object.isOrthographicCamera?(this.object.zoom=i2.clamp(this.object.zoom/e,this.minZoom,this.maxZoom),this._lastZoom!==this.object.zoom&&this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(e=1+(this._zoomEnd.y-this._zoomStart.y)*this.zoomSpeed,e!==1&&e>0&&(this.object.isPerspectiveCamera?this._eye.multiplyScalar(e):this.object.isOrthographicCamera?(this.object.zoom=i2.clamp(this.object.zoom/e,this.minZoom,this.maxZoom),this._lastZoom!==this.object.zoom&&this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),this.staticMoving?this._zoomStart.copy(this._zoomEnd):this._zoomStart.y+=(this._zoomEnd.y-this._zoomStart.y)*this.dynamicDampingFactor)}_getMouseOnScreen(e,n){return $w.set((e-this.screen.left)/this.screen.width,(n-this.screen.top)/this.screen.height),$w}_getMouseOnCircle(e,n){return $w.set((e-this.screen.width*.5-this.screen.left)/(this.screen.width*.5),(this.screen.height+2*(this.screen.top-n))/this.screen.width),$w}_addPointer(e){this._pointers.push(e)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let n=0;n<this._pointers.length;n++)if(this._pointers[n].pointerId==e.pointerId){this._pointers.splice(n,1);return}}_trackPointer(e){let n=this._pointerPositions[e.pointerId];n===void 0&&(n=new mt,this._pointerPositions[e.pointerId]=n),n.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const n=e.pointerId===this._pointers[0].pointerId?this._pointers[1]:this._pointers[0];return this._pointerPositions[n.pointerId]}_checkDistances(){(!this.noZoom||!this.noPan)&&(this._eye.lengthSq()>this.maxDistance*this.maxDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.maxDistance)),this._zoomStart.copy(this._zoomEnd)),this._eye.lengthSq()<this.minDistance*this.minDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.minDistance)),this._zoomStart.copy(this._zoomEnd)))}}function G6e(t){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(t.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),this._addPointer(t),t.pointerType==="touch"?this._onTouchStart(t):this._onMouseDown(t))}function V6e(t){this.enabled!==!1&&(t.pointerType==="touch"?this._onTouchMove(t):this._onMouseMove(t))}function H6e(t){this.enabled!==!1&&(t.pointerType==="touch"?this._onTouchEnd(t):this._onMouseUp(),this._removePointer(t),this._pointers.length===0&&(this.domElement.releasePointerCapture(t.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp)))}function W6e(t){this._removePointer(t)}function q6e(){this.enabled!==!1&&(this.keyState=rr.NONE,window.addEventListener("keydown",this._onKeyDown))}function X6e(t){this.enabled!==!1&&(window.removeEventListener("keydown",this._onKeyDown),this.keyState===rr.NONE&&(t.code===this.keys[rr.ROTATE]&&!this.noRotate?this.keyState=rr.ROTATE:t.code===this.keys[rr.ZOOM]&&!this.noZoom?this.keyState=rr.ZOOM:t.code===this.keys[rr.PAN]&&!this.noPan&&(this.keyState=rr.PAN)))}function Y6e(t){let e;switch(t.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Ls.DOLLY:this.state=rr.ZOOM;break;case Ls.ROTATE:this.state=rr.ROTATE;break;case Ls.PAN:this.state=rr.PAN;break;default:this.state=rr.NONE}const n=this.keyState!==rr.NONE?this.keyState:this.state;n===rr.ROTATE&&!this.noRotate?(this._moveCurr.copy(this._getMouseOnCircle(t.pageX,t.pageY)),this._movePrev.copy(this._moveCurr)):n===rr.ZOOM&&!this.noZoom?(this._zoomStart.copy(this._getMouseOnScreen(t.pageX,t.pageY)),this._zoomEnd.copy(this._zoomStart)):n===rr.PAN&&!this.noPan&&(this._panStart.copy(this._getMouseOnScreen(t.pageX,t.pageY)),this._panEnd.copy(this._panStart)),this.dispatchEvent(yF)}function K6e(t){const e=this.keyState!==rr.NONE?this.keyState:this.state;e===rr.ROTATE&&!this.noRotate?(this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this._getMouseOnCircle(t.pageX,t.pageY))):e===rr.ZOOM&&!this.noZoom?this._zoomEnd.copy(this._getMouseOnScreen(t.pageX,t.pageY)):e===rr.PAN&&!this.noPan&&this._panEnd.copy(this._getMouseOnScreen(t.pageX,t.pageY))}function Z6e(){this.state=rr.NONE,this.dispatchEvent(vF)}function Q6e(t){if(this.enabled!==!1&&this.noZoom!==!0){switch(t.preventDefault(),t.deltaMode){case 2:this._zoomStart.y-=t.deltaY*.025;break;case 1:this._zoomStart.y-=t.deltaY*.01;break;default:this._zoomStart.y-=t.deltaY*25e-5;break}this.dispatchEvent(yF),this.dispatchEvent(vF)}}function J6e(t){this.enabled!==!1&&t.preventDefault()}function e8e(t){switch(this._trackPointer(t),this._pointers.length){case 1:this.state=rr.TOUCH_ROTATE,this._moveCurr.copy(this._getMouseOnCircle(this._pointers[0].pageX,this._pointers[0].pageY)),this._movePrev.copy(this._moveCurr);break;default:this.state=rr.TOUCH_ZOOM_PAN;const e=this._pointers[0].pageX-this._pointers[1].pageX,n=this._pointers[0].pageY-this._pointers[1].pageY;this._touchZoomDistanceEnd=this._touchZoomDistanceStart=Math.sqrt(e*e+n*n);const r=(this._pointers[0].pageX+this._pointers[1].pageX)/2,i=(this._pointers[0].pageY+this._pointers[1].pageY)/2;this._panStart.copy(this._getMouseOnScreen(r,i)),this._panEnd.copy(this._panStart);break}this.dispatchEvent(yF)}function t8e(t){switch(this._trackPointer(t),this._pointers.length){case 1:this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this._getMouseOnCircle(t.pageX,t.pageY));break;default:const e=this._getSecondPointerPosition(t),n=t.pageX-e.x,r=t.pageY-e.y;this._touchZoomDistanceEnd=Math.sqrt(n*n+r*r);const i=(t.pageX+e.x)/2,s=(t.pageY+e.y)/2;this._panEnd.copy(this._getMouseOnScreen(i,s));break}}function n8e(t){switch(this._pointers.length){case 0:this.state=rr.NONE;break;case 1:this.state=rr.TOUCH_ROTATE,this._moveCurr.copy(this._getMouseOnCircle(t.pageX,t.pageY)),this._movePrev.copy(this._moveCurr);break;case 2:this.state=rr.TOUCH_ZOOM_PAN;for(let e=0;e<this._pointers.length;e++)if(this._pointers[e].pointerId!==t.pointerId){const n=this._pointerPositions[this._pointers[e].pointerId];this._moveCurr.copy(this._getMouseOnCircle(n.x,n.y)),this._movePrev.copy(this._moveCurr);break}break}this.dispatchEvent(vF)}const EH={type:"change"},bF={type:"start"},Ate={type:"end"},Ww=new cC,CH=new Ll,r8e=Math.cos(70*i2.DEG2RAD),Yi=new ae,Da=2*Math.PI,_r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},dN=1e-6;class i8e extends hC{constructor(e,n=null){super(e,n),this.state=_r.NONE,this.target=new ae,this.cursor=new ae,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Ls.ROTATE,MIDDLE:Ls.DOLLY,RIGHT:Ls.PAN},this.touches={ONE:Gu.ROTATE,TWO:Gu.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new ae,this._lastQuaternion=new Xl,this._lastTargetPosition=new ae,this._quat=new Xl().setFromUnitVectors(e.up,new ae(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new J$,this._sphericalDelta=new J$,this._scale=1,this._panOffset=new ae,this._rotateStart=new mt,this._rotateEnd=new mt,this._rotateDelta=new mt,this._panStart=new mt,this._panEnd=new mt,this._panDelta=new mt,this._dollyStart=new mt,this._dollyEnd=new mt,this._dollyDelta=new mt,this._dollyDirection=new ae,this._mouse=new mt,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=a8e.bind(this),this._onPointerDown=s8e.bind(this),this._onPointerUp=o8e.bind(this),this._onContextMenu=p8e.bind(this),this._onMouseWheel=u8e.bind(this),this._onKeyDown=d8e.bind(this),this._onTouchStart=f8e.bind(this),this._onTouchMove=h8e.bind(this),this._onMouseDown=l8e.bind(this),this._onMouseMove=c8e.bind(this),this._interceptControlDown=m8e.bind(this),this._interceptControlUp=g8e.bind(this),this.domElement!==null&&this.connect(this.domElement),this.update()}connect(e){super.connect(e),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(EH),this.update(),this.state=_r.NONE}update(e=null){const n=this.object.position;Yi.copy(n).sub(this.target),Yi.applyQuaternion(this._quat),this._spherical.setFromVector3(Yi),this.autoRotate&&this.state===_r.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let r=this.minAzimuthAngle,i=this.maxAzimuthAngle;isFinite(r)&&isFinite(i)&&(r<-Math.PI?r+=Da:r>Math.PI&&(r-=Da),i<-Math.PI?i+=Da:i>Math.PI&&(i-=Da),r<=i?this._spherical.theta=Math.max(r,Math.min(i,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(r+i)/2?Math.max(r,this._spherical.theta):Math.min(i,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let s=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const a=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),s=a!=this._spherical.radius}if(Yi.setFromSpherical(this._spherical),Yi.applyQuaternion(this._quatInverse),n.copy(this.target).add(Yi),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let a=null;if(this.object.isPerspectiveCamera){const o=Yi.length();a=this._clampDistance(o*this._scale);const l=o-a;this.object.position.addScaledVector(this._dollyDirection,l),this.object.updateMatrixWorld(),s=!!l}else if(this.object.isOrthographicCamera){const o=new ae(this._mouse.x,this._mouse.y,0);o.unproject(this.object);const l=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),s=l!==this.object.zoom;const c=new ae(this._mouse.x,this._mouse.y,0);c.unproject(this.object),this.object.position.sub(c).add(o),this.object.updateMatrixWorld(),a=Yi.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;a!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(a).add(this.object.position):(Ww.origin.copy(this.object.position),Ww.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(Ww.direction))<r8e?this.object.lookAt(this.target):(CH.setFromNormalAndCoplanarPoint(this.object.up,this.target),Ww.intersectPlane(CH,this.target))))}else if(this.object.isOrthographicCamera){const a=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),a!==this.object.zoom&&(this.object.updateProjectionMatrix(),s=!0)}return this._scale=1,this._performCursorZoom=!1,s||this._lastPosition.distanceToSquared(this.object.position)>dN||8*(1-this._lastQuaternion.dot(this.object.quaternion))>dN||this._lastTargetPosition.distanceToSquared(this.target)>dN?(this.dispatchEvent(EH),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?Da/60*this.autoRotateSpeed*e:Da/60/60*this.autoRotateSpeed}_getZoomScale(e){const n=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*n)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,n){Yi.setFromMatrixColumn(n,0),Yi.multiplyScalar(-e),this._panOffset.add(Yi)}_panUp(e,n){this.screenSpacePanning===!0?Yi.setFromMatrixColumn(n,1):(Yi.setFromMatrixColumn(n,0),Yi.crossVectors(this.object.up,Yi)),Yi.multiplyScalar(e),this._panOffset.add(Yi)}_pan(e,n){const r=this.domElement;if(this.object.isPerspectiveCamera){const i=this.object.position;Yi.copy(i).sub(this.target);let s=Yi.length();s*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*s/r.clientHeight,this.object.matrix),this._panUp(2*n*s/r.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/r.clientWidth,this.object.matrix),this._panUp(n*(this.object.top-this.object.bottom)/this.object.zoom/r.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,n){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const r=this.domElement.getBoundingClientRect(),i=e-r.left,s=n-r.top,a=r.width,o=r.height;this._mouse.x=i/a*2-1,this._mouse.y=-(s/o)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const n=this.domElement;this._rotateLeft(Da*this._rotateDelta.x/n.clientHeight),this._rotateUp(Da*this._rotateDelta.y/n.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let n=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(Da*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),n=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-Da*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),n=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(Da*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),n=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-Da*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),n=!0;break}n&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const n=this._getSecondPointerPosition(e),r=.5*(e.pageX+n.x),i=.5*(e.pageY+n.y);this._rotateStart.set(r,i)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const n=this._getSecondPointerPosition(e),r=.5*(e.pageX+n.x),i=.5*(e.pageY+n.y);this._panStart.set(r,i)}}_handleTouchStartDolly(e){const n=this._getSecondPointerPosition(e),r=e.pageX-n.x,i=e.pageY-n.y,s=Math.sqrt(r*r+i*i);this._dollyStart.set(0,s)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),i=.5*(e.pageX+r.x),s=.5*(e.pageY+r.y);this._rotateEnd.set(i,s)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const n=this.domElement;this._rotateLeft(Da*this._rotateDelta.x/n.clientHeight),this._rotateUp(Da*this._rotateDelta.y/n.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const n=this._getSecondPointerPosition(e),r=.5*(e.pageX+n.x),i=.5*(e.pageY+n.y);this._panEnd.set(r,i)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const n=this._getSecondPointerPosition(e),r=e.pageX-n.x,i=e.pageY-n.y,s=Math.sqrt(r*r+i*i);this._dollyEnd.set(0,s),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const a=(e.pageX+n.x)*.5,o=(e.pageY+n.y)*.5;this._updateZoomParameters(a,o)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let n=0;n<this._pointers.length;n++)if(this._pointers[n]==e.pointerId){this._pointers.splice(n,1);return}}_isTrackingPointer(e){for(let n=0;n<this._pointers.length;n++)if(this._pointers[n]==e.pointerId)return!0;return!1}_trackPointer(e){let n=this._pointerPositions[e.pointerId];n===void 0&&(n=new mt,this._pointerPositions[e.pointerId]=n),n.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const n=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[n]}_customWheelEvent(e){const n=e.deltaMode,r={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(n){case 1:r.deltaY*=16;break;case 2:r.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(r.deltaY*=10),r}}function s8e(t){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(t.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(t)&&(this._addPointer(t),t.pointerType==="touch"?this._onTouchStart(t):this._onMouseDown(t)))}function a8e(t){this.enabled!==!1&&(t.pointerType==="touch"?this._onTouchMove(t):this._onMouseMove(t))}function o8e(t){switch(this._removePointer(t),this._pointers.length){case 0:this.domElement.releasePointerCapture(t.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(Ate),this.state=_r.NONE;break;case 1:const e=this._pointers[0],n=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:n.x,pageY:n.y});break}}function l8e(t){let e;switch(t.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Ls.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(t),this.state=_r.DOLLY;break;case Ls.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(t),this.state=_r.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(t),this.state=_r.ROTATE}break;case Ls.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(t),this.state=_r.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(t),this.state=_r.PAN}break;default:this.state=_r.NONE}this.state!==_r.NONE&&this.dispatchEvent(bF)}function c8e(t){switch(this.state){case _r.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(t);break;case _r.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(t);break;case _r.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(t);break}}function u8e(t){this.enabled===!1||this.enableZoom===!1||this.state!==_r.NONE||(t.preventDefault(),this.dispatchEvent(bF),this._handleMouseWheel(this._customWheelEvent(t)),this.dispatchEvent(Ate))}function d8e(t){this.enabled!==!1&&this._handleKeyDown(t)}function f8e(t){switch(this._trackPointer(t),this._pointers.length){case 1:switch(this.touches.ONE){case Gu.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(t),this.state=_r.TOUCH_ROTATE;break;case Gu.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(t),this.state=_r.TOUCH_PAN;break;default:this.state=_r.NONE}break;case 2:switch(this.touches.TWO){case Gu.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(t),this.state=_r.TOUCH_DOLLY_PAN;break;case Gu.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(t),this.state=_r.TOUCH_DOLLY_ROTATE;break;default:this.state=_r.NONE}break;default:this.state=_r.NONE}this.state!==_r.NONE&&this.dispatchEvent(bF)}function h8e(t){switch(this._trackPointer(t),this.state){case _r.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(t),this.update();break;case _r.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(t),this.update();break;case _r.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(t),this.update();break;case _r.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(t),this.update();break;default:this.state=_r.NONE}}function p8e(t){this.enabled!==!1&&t.preventDefault()}function m8e(t){t.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function g8e(t){t.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}const x8e={type:"change"},AH=1e-6,MH=new Xl;class y8e extends hC{constructor(e,n=null){super(e,n),this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1,this._moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this._moveVector=new ae(0,0,0),this._rotationVector=new ae(0,0,0),this._lastQuaternion=new Xl,this._lastPosition=new ae,this._status=0,this._onKeyDown=v8e.bind(this),this._onKeyUp=b8e.bind(this),this._onPointerMove=S8e.bind(this),this._onPointerDown=_8e.bind(this),this._onPointerUp=w8e.bind(this),this._onPointerCancel=T8e.bind(this),this._onContextMenu=E8e.bind(this),n!==null&&this.connect(n)}connect(e){super.connect(e),window.addEventListener("keydown",this._onKeyDown),window.addEventListener("keyup",this._onKeyUp),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointerup",this._onPointerUp),this.domElement.addEventListener("pointercancel",this._onPointerCancel),this.domElement.addEventListener("contextmenu",this._onContextMenu)}disconnect(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("contextmenu",this._onContextMenu)}dispose(){this.disconnect()}update(e){if(this.enabled===!1)return;const n=this.object,r=e*this.movementSpeed,i=e*this.rollSpeed;n.translateX(this._moveVector.x*r),n.translateY(this._moveVector.y*r),n.translateZ(this._moveVector.z*r),MH.set(this._rotationVector.x*i,this._rotationVector.y*i,this._rotationVector.z*i,1).normalize(),n.quaternion.multiply(MH),(this._lastPosition.distanceToSquared(n.position)>AH||8*(1-this._lastQuaternion.dot(n.quaternion))>AH)&&(this.dispatchEvent(x8e),this._lastQuaternion.copy(n.quaternion),this._lastPosition.copy(n.position))}_updateMovementVector(){const e=this._moveState.forward||this.autoForward&&!this._moveState.back?1:0;this._moveVector.x=-this._moveState.left+this._moveState.right,this._moveVector.y=-this._moveState.down+this._moveState.up,this._moveVector.z=-e+this._moveState.back}_updateRotationVector(){this._rotationVector.x=-this._moveState.pitchDown+this._moveState.pitchUp,this._rotationVector.y=-this._moveState.yawRight+this._moveState.yawLeft,this._rotationVector.z=-this._moveState.rollRight+this._moveState.rollLeft}_getContainerDimensions(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}}}function v8e(t){if(!(t.altKey||this.enabled===!1)){switch(t.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this._moveState.forward=1;break;case"KeyS":this._moveState.back=1;break;case"KeyA":this._moveState.left=1;break;case"KeyD":this._moveState.right=1;break;case"KeyR":this._moveState.up=1;break;case"KeyF":this._moveState.down=1;break;case"ArrowUp":this._moveState.pitchUp=1;break;case"ArrowDown":this._moveState.pitchDown=1;break;case"ArrowLeft":this._moveState.yawLeft=1;break;case"ArrowRight":this._moveState.yawRight=1;break;case"KeyQ":this._moveState.rollLeft=1;break;case"KeyE":this._moveState.rollRight=1;break}this._updateMovementVector(),this._updateRotationVector()}}function b8e(t){if(this.enabled!==!1){switch(t.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this._moveState.forward=0;break;case"KeyS":this._moveState.back=0;break;case"KeyA":this._moveState.left=0;break;case"KeyD":this._moveState.right=0;break;case"KeyR":this._moveState.up=0;break;case"KeyF":this._moveState.down=0;break;case"ArrowUp":this._moveState.pitchUp=0;break;case"ArrowDown":this._moveState.pitchDown=0;break;case"ArrowLeft":this._moveState.yawLeft=0;break;case"ArrowRight":this._moveState.yawRight=0;break;case"KeyQ":this._moveState.rollLeft=0;break;case"KeyE":this._moveState.rollRight=0;break}this._updateMovementVector(),this._updateRotationVector()}}function _8e(t){if(this.enabled!==!1)if(this.dragToLook)this._status++;else{switch(t.button){case 0:this._moveState.forward=1;break;case 2:this._moveState.back=1;break}this._updateMovementVector()}}function S8e(t){if(this.enabled!==!1&&(!this.dragToLook||this._status>0)){const e=this._getContainerDimensions(),n=e.size[0]/2,r=e.size[1]/2;this._moveState.yawLeft=-(t.pageX-e.offset[0]-n)/n,this._moveState.pitchDown=(t.pageY-e.offset[1]-r)/r,this._updateRotationVector()}}function w8e(t){if(this.enabled!==!1){if(this.dragToLook)this._status--,this._moveState.yawLeft=this._moveState.pitchDown=0;else{switch(t.button){case 0:this._moveState.forward=0;break;case 2:this._moveState.back=0;break}this._updateMovementVector()}this._updateRotationVector()}}function T8e(){this.enabled!==!1&&(this.dragToLook?(this._status=0,this._moveState.yawLeft=this._moveState.pitchDown=0):(this._moveState.forward=0,this._moveState.back=0,this._updateMovementVector()),this._updateRotationVector())}function E8e(t){this.enabled!==!1&&t.preventDefault()}const C8e={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class $C{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const A8e=new D_(-1,1,1,-1,0,1);class M8e extends Us{constructor(){super(),this.setAttribute("position",new Mi([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Mi([0,2,0,0,2,0],2))}}const R8e=new M8e;class P8e{constructor(e){this._mesh=new Ji(R8e,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,A8e)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class N8e extends $C{constructor(e,n="tDiffuse"){super(),this.textureID=n,this.uniforms=null,this.material=null,e instanceof Yl?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=qZ.clone(e.uniforms),this.material=new Yl({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this._fsQuad=new P8e(this.material)}render(e,n,r){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=r.texture),this._fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this._fsQuad.render(e)):(e.setRenderTarget(n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this._fsQuad.render(e))}dispose(){this.material.dispose(),this._fsQuad.dispose()}}class RH extends $C{constructor(e,n){super(),this.scene=e,this.camera=n,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,n,r){const i=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let a,o;this.inverse?(a=0,o=1):(a=1,o=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),s.buffers.stencil.setFunc(i.ALWAYS,a,4294967295),s.buffers.stencil.setClear(o),s.buffers.stencil.setLocked(!0),e.setRenderTarget(r),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.color.setMask(!0),s.buffers.depth.setMask(!0),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(i.EQUAL,1,4294967295),s.buffers.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),s.buffers.stencil.setLocked(!0)}}class O8e extends $C{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class D8e{constructor(e,n){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),n===void 0){const r=e.getSize(new mt);this._width=r.width,this._height=r.height,n=new zf(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Ci}),n.texture.name="EffectComposer.rt1"}else this._width=n.width,this._height=n.height;this.renderTarget1=n,this.renderTarget2=n.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new N8e(C8e),this.copyPass.material.blending=_a,this.clock=new aQ}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,n){this.passes.splice(n,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const n=this.passes.indexOf(e);n!==-1&&this.passes.splice(n,1)}isLastEnabledPass(e){for(let n=e+1;n<this.passes.length;n++)if(this.passes[n].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const n=this.renderer.getRenderTarget();let r=!1;for(let i=0,s=this.passes.length;i<s;i++){const a=this.passes[i];if(a.enabled!==!1){if(a.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(i),a.render(this.renderer,this.writeBuffer,this.readBuffer,e,r),a.needsSwap){if(r){const o=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(o.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(o.EQUAL,1,4294967295)}this.swapBuffers()}RH!==void 0&&(a instanceof RH?r=!0:a instanceof O8e&&(r=!1))}}this.renderer.setRenderTarget(n)}reset(e){if(e===void 0){const n=this.renderer.getSize(new mt);this._pixelRatio=this.renderer.getPixelRatio(),this._width=n.width,this._height=n.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,n){this._width=e,this._height=n;const r=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(r,i),this.renderTarget2.setSize(r,i);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(r,i)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class L8e extends $C{constructor(e,n,r=null,i=null,s=null){super(),this.scene=e,this.camera=n,this.overrideMaterial=r,this.clearColor=i,this.clearAlpha=s,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new Xt}render(e,n,r){const i=e.autoClear;e.autoClear=!1;let s,a;this.overrideMaterial!==null&&(a=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(s=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:r),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(s),this.overrideMaterial!==null&&(this.scene.overrideMaterial=a),e.autoClear=i}}function vL(t){return vL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vL(t)}function I8e(t){try{return Function.toString.call(t).indexOf("[native code]")!==-1}catch{return typeof t=="function"}}function Mte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Mte=function(){return!!t})()}function k8e(t,e,n){if(Mte())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var i=new(t.bind.apply(t,r));return n&&fb(i,n.prototype),i}function bL(t){var e=typeof Map=="function"?new Map:void 0;return bL=function(r){if(r===null||!I8e(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return k8e(r,arguments,vL(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),fb(i,r)},bL(t)}var Rc=(function(t){QI(e,t);function e(n){var r;return r=t.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+n+" for more information.")||this,VY(r)}return e})(bL(Error));function fN(t){return Math.round(t*255)}function B8e(t,e,n){return fN(t)+","+fN(e)+","+fN(n)}function N2(t,e,n,r){if(r===void 0&&(r=B8e),e===0)return r(n,n,n);var i=(t%360+360)%360/60,s=(1-Math.abs(2*n-1))*e,a=s*(1-Math.abs(i%2-1)),o=0,l=0,c=0;i>=0&&i<1?(o=s,l=a):i>=1&&i<2?(o=a,l=s):i>=2&&i<3?(l=s,c=a):i>=3&&i<4?(l=a,c=s):i>=4&&i<5?(o=a,c=s):i>=5&&i<6&&(o=s,c=a);var u=n-s/2,f=o+u,p=l+u,m=c+u;return r(f,p,m)}var PH={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};function F8e(t){if(typeof t!="string")return t;var e=t.toLowerCase();return PH[e]?"#"+PH[e]:t}var U8e=/^#[a-fA-F0-9]{6}$/,j8e=/^#[a-fA-F0-9]{8}$/,z8e=/^#[a-fA-F0-9]{3}$/,$8e=/^#[a-fA-F0-9]{4}$/,hN=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,G8e=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,V8e=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,H8e=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i;function X0(t){if(typeof t!="string")throw new Rc(3);var e=F8e(t);if(e.match(U8e))return{red:parseInt(""+e[1]+e[2],16),green:parseInt(""+e[3]+e[4],16),blue:parseInt(""+e[5]+e[6],16)};if(e.match(j8e)){var n=parseFloat((parseInt(""+e[7]+e[8],16)/255).toFixed(2));return{red:parseInt(""+e[1]+e[2],16),green:parseInt(""+e[3]+e[4],16),blue:parseInt(""+e[5]+e[6],16),alpha:n}}if(e.match(z8e))return{red:parseInt(""+e[1]+e[1],16),green:parseInt(""+e[2]+e[2],16),blue:parseInt(""+e[3]+e[3],16)};if(e.match($8e)){var r=parseFloat((parseInt(""+e[4]+e[4],16)/255).toFixed(2));return{red:parseInt(""+e[1]+e[1],16),green:parseInt(""+e[2]+e[2],16),blue:parseInt(""+e[3]+e[3],16),alpha:r}}var i=hN.exec(e);if(i)return{red:parseInt(""+i[1],10),green:parseInt(""+i[2],10),blue:parseInt(""+i[3],10)};var s=G8e.exec(e.substring(0,50));if(s)return{red:parseInt(""+s[1],10),green:parseInt(""+s[2],10),blue:parseInt(""+s[3],10),alpha:parseFloat(""+s[4])>1?parseFloat(""+s[4])/100:parseFloat(""+s[4])};var a=V8e.exec(e);if(a){var o=parseInt(""+a[1],10),l=parseInt(""+a[2],10)/100,c=parseInt(""+a[3],10)/100,u="rgb("+N2(o,l,c)+")",f=hN.exec(u);if(!f)throw new Rc(4,e,u);return{red:parseInt(""+f[1],10),green:parseInt(""+f[2],10),blue:parseInt(""+f[3],10)}}var p=H8e.exec(e.substring(0,50));if(p){var m=parseInt(""+p[1],10),x=parseInt(""+p[2],10)/100,b=parseInt(""+p[3],10)/100,v="rgb("+N2(m,x,b)+")",_=hN.exec(v);if(!_)throw new Rc(4,e,v);return{red:parseInt(""+_[1],10),green:parseInt(""+_[2],10),blue:parseInt(""+_[3],10),alpha:parseFloat(""+p[4])>1?parseFloat(""+p[4])/100:parseFloat(""+p[4])}}throw new Rc(5)}function W8e(t){var e=t.red/255,n=t.green/255,r=t.blue/255,i=Math.max(e,n,r),s=Math.min(e,n,r),a=(i+s)/2;if(i===s)return t.alpha!==void 0?{hue:0,saturation:0,lightness:a,alpha:t.alpha}:{hue:0,saturation:0,lightness:a};var o,l=i-s,c=a>.5?l/(2-i-s):l/(i+s);switch(i){case e:o=(n-r)/l+(n<r?6:0);break;case n:o=(r-e)/l+2;break;default:o=(e-n)/l+4;break}return o*=60,t.alpha!==void 0?{hue:o,saturation:c,lightness:a,alpha:t.alpha}:{hue:o,saturation:c,lightness:a}}function th(t){return W8e(X0(t))}var q8e=function(e){return e.length===7&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e},_L=q8e;function Gh(t){var e=t.toString(16);return e.length===1?"0"+e:e}function pN(t){return Gh(Math.round(t*255))}function X8e(t,e,n){return _L("#"+pN(t)+pN(e)+pN(n))}function Rte(t,e,n){return N2(t,e,n,X8e)}function Y8e(t,e,n){if(typeof t=="object"&&e===void 0&&n===void 0)return Rte(t.hue,t.saturation,t.lightness);throw new Rc(1)}function K8e(t,e,n,r){if(typeof t=="object"&&e===void 0&&n===void 0&&r===void 0)return t.alpha>=1?Rte(t.hue,t.saturation,t.lightness):"rgba("+N2(t.hue,t.saturation,t.lightness)+","+t.alpha+")";throw new Rc(2)}function Pte(t,e,n){if(typeof t=="number"&&typeof e=="number"&&typeof n=="number")return _L("#"+Gh(t)+Gh(e)+Gh(n));if(typeof t=="object"&&e===void 0&&n===void 0)return _L("#"+Gh(t.red)+Gh(t.green)+Gh(t.blue));throw new Rc(6)}function GC(t,e,n,r){if(typeof t=="object"&&e===void 0&&n===void 0&&r===void 0)return t.alpha>=1?Pte(t.red,t.green,t.blue):"rgba("+t.red+","+t.green+","+t.blue+","+t.alpha+")";throw new Rc(7)}var Z8e=function(e){return typeof e.red=="number"&&typeof e.green=="number"&&typeof e.blue=="number"&&(typeof e.alpha!="number"||typeof e.alpha>"u")},Q8e=function(e){return typeof e.red=="number"&&typeof e.green=="number"&&typeof e.blue=="number"&&typeof e.alpha=="number"},J8e=function(e){return typeof e.hue=="number"&&typeof e.saturation=="number"&&typeof e.lightness=="number"&&(typeof e.alpha!="number"||typeof e.alpha>"u")},e$e=function(e){return typeof e.hue=="number"&&typeof e.saturation=="number"&&typeof e.lightness=="number"&&typeof e.alpha=="number"};function nh(t){if(typeof t!="object")throw new Rc(8);if(Q8e(t))return GC(t);if(Z8e(t))return Pte(t);if(e$e(t))return K8e(t);if(J8e(t))return Y8e(t);throw new Rc(8)}function Nte(t,e,n){return function(){var i=n.concat(Array.prototype.slice.call(arguments));return i.length>=e?t.apply(this,i):Nte(t,e,i)}}function Oo(t){return Nte(t,t.length,[])}function t$e(t,e){if(e==="transparent")return e;var n=th(e);return nh(ra({},n,{hue:n.hue+parseFloat(t)}))}Oo(t$e);function Mx(t,e,n){return Math.max(t,Math.min(e,n))}function n$e(t,e){if(e==="transparent")return e;var n=th(e);return nh(ra({},n,{lightness:Mx(0,1,n.lightness-parseFloat(t))}))}Oo(n$e);function r$e(t,e){if(e==="transparent")return e;var n=th(e);return nh(ra({},n,{saturation:Mx(0,1,n.saturation-parseFloat(t))}))}Oo(r$e);function i$e(t,e){if(e==="transparent")return e;var n=th(e);return nh(ra({},n,{lightness:Mx(0,1,n.lightness+parseFloat(t))}))}Oo(i$e);function s$e(t,e,n){if(e==="transparent")return n;if(n==="transparent")return e;if(t===0)return n;var r=X0(e),i=ra({},r,{alpha:typeof r.alpha=="number"?r.alpha:1}),s=X0(n),a=ra({},s,{alpha:typeof s.alpha=="number"?s.alpha:1}),o=i.alpha-a.alpha,l=parseFloat(t)*2-1,c=l*o===-1?l:l+o,u=1+l*o,f=(c/u+1)/2,p=1-f,m={red:Math.floor(i.red*f+a.red*p),green:Math.floor(i.green*f+a.green*p),blue:Math.floor(i.blue*f+a.blue*p),alpha:i.alpha*parseFloat(t)+a.alpha*(1-parseFloat(t))};return GC(m)}var a$e=Oo(s$e),Ote=a$e;function o$e(t,e){if(e==="transparent")return e;var n=X0(e),r=typeof n.alpha=="number"?n.alpha:1,i=ra({},n,{alpha:Mx(0,1,(r*100+parseFloat(t)*100)/100)});return GC(i)}var l$e=Oo(o$e),c$e=l$e;function u$e(t,e){if(e==="transparent")return e;var n=th(e);return nh(ra({},n,{saturation:Mx(0,1,n.saturation+parseFloat(t))}))}Oo(u$e);function d$e(t,e){return e==="transparent"?e:nh(ra({},th(e),{hue:parseFloat(t)}))}Oo(d$e);function f$e(t,e){return e==="transparent"?e:nh(ra({},th(e),{lightness:parseFloat(t)}))}Oo(f$e);function h$e(t,e){return e==="transparent"?e:nh(ra({},th(e),{saturation:parseFloat(t)}))}Oo(h$e);function p$e(t,e){return e==="transparent"?e:Ote(parseFloat(t),"rgb(0, 0, 0)",e)}Oo(p$e);function m$e(t,e){return e==="transparent"?e:Ote(parseFloat(t),"rgb(255, 255, 255)",e)}Oo(m$e);function g$e(t,e){if(e==="transparent")return e;var n=X0(e),r=typeof n.alpha=="number"?n.alpha:1,i=ra({},n,{alpha:Mx(0,1,+(r*100-parseFloat(t)*100).toFixed(2)/100)});return GC(i)}Oo(g$e);var yp=Object.freeze({Linear:Object.freeze({None:function(t){return t},In:function(t){return t},Out:function(t){return t},InOut:function(t){return t}}),Quadratic:Object.freeze({In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}}),Cubic:Object.freeze({In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}}),Quartic:Object.freeze({In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}}),Quintic:Object.freeze({In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}}),Sinusoidal:Object.freeze({In:function(t){return 1-Math.sin((1-t)*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return .5*(1-Math.sin(Math.PI*(.5-t)))}}),Exponential:Object.freeze({In:function(t){return t===0?0:Math.pow(1024,t-1)},Out:function(t){return t===1?1:1-Math.pow(2,-10*t)},InOut:function(t){return t===0?0:t===1?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}}),Circular:Object.freeze({In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}}),Elastic:Object.freeze({In:function(t){return t===0?0:t===1?1:-Math.pow(2,10*(t-1))*Math.sin((t-1.1)*5*Math.PI)},Out:function(t){return t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t-.1)*5*Math.PI)+1},InOut:function(t){return t===0?0:t===1?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin((t-1.1)*5*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin((t-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(t){var e=1.70158;return t===1?1:t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return t===0?0:--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)}}),Bounce:Object.freeze({In:function(t){return 1-yp.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?yp.Bounce.In(t*2)*.5:yp.Bounce.Out(t*2-1)*.5+.5}}),generatePow:function(t){return t===void 0&&(t=4),t=t<Number.EPSILON?Number.EPSILON:t,t=t>1e4?1e4:t,{In:function(e){return Math.pow(e,t)},Out:function(e){return 1-Math.pow(1-e,t)},InOut:function(e){return e<.5?Math.pow(e*2,t)/2:(1-Math.pow(2-e*2,t))/2+.5}}}}),Ov=function(){return performance.now()},Dte=(function(){function t(){this._tweens={},this._tweensAddedDuringUpdate={}}return t.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(n){return e._tweens[n]})},t.prototype.removeAll=function(){this._tweens={}},t.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},t.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},t.prototype.update=function(e,n){e===void 0&&(e=Ov()),n===void 0&&(n=!1);var r=Object.keys(this._tweens);if(r.length===0)return!1;for(;r.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<r.length;i++){var s=this._tweens[r[i]],a=!n;s&&s.update(e,a)===!1&&!n&&delete this._tweens[r[i]]}r=Object.keys(this._tweensAddedDuringUpdate)}return!0},t})(),SL={Linear:function(t,e){var n=t.length-1,r=n*e,i=Math.floor(r),s=SL.Utils.Linear;return e<0?s(t[0],t[1],r):e>1?s(t[n],t[n-1],n-r):s(t[i],t[i+1>n?n:i+1],r-i)},Utils:{Linear:function(t,e,n){return(e-t)*n+t}}},Lte=(function(){function t(){}return t.nextId=function(){return t._nextId++},t._nextId=0,t})(),wL=new Dte,NH=(function(){function t(e,n){n===void 0&&(n=wL),this._object=e,this._group=n,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=yp.Linear.None,this._interpolationFunction=SL.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=Lte.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return t.prototype.getId=function(){return this._id},t.prototype.isPlaying=function(){return this._isPlaying},t.prototype.isPaused=function(){return this._isPaused},t.prototype.getDuration=function(){return this._duration},t.prototype.to=function(e,n){if(n===void 0&&(n=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=n<0?0:n,this},t.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},t.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},t.prototype.start=function(e,n){if(e===void 0&&(e=Ov()),n===void 0&&(n=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var r in this._valuesStartRepeat)this._swapEndStartRepeatValues(r),this._valuesStart[r]=this._valuesStartRepeat[r]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||n){if(this._propertiesAreSetUp=!0,!this._isDynamic){var i={};for(var s in this._valuesEnd)i[s]=this._valuesEnd[s];this._valuesEnd=i}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,n)}return this},t.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},t.prototype._setupProperties=function(e,n,r,i,s){for(var a in r){var o=e[a],l=Array.isArray(o),c=l?"array":typeof o,u=!l&&Array.isArray(r[a]);if(!(c==="undefined"||c==="function")){if(u){var f=r[a];if(f.length===0)continue;for(var p=[o],m=0,x=f.length;m<x;m+=1){var b=this._handleRelativeValue(o,f[m]);if(isNaN(b)){u=!1,console.warn("Found invalid interpolation list. Skipping.");break}p.push(b)}u&&(r[a]=p)}if((c==="object"||l)&&o&&!u){n[a]=l?[]:{};var v=o;for(var _ in v)n[a][_]=v[_];i[a]=l?[]:{};var f=r[a];if(!this._isDynamic){var E={};for(var _ in f)E[_]=f[_];r[a]=f=E}this._setupProperties(v,n[a],f,i[a],s)}else(typeof n[a]>"u"||s)&&(n[a]=o),l||(n[a]*=1),u?i[a]=r[a].slice().reverse():i[a]=n[a]||0}}},t.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},t.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},t.prototype.pause=function(e){return e===void 0&&(e=Ov()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this),this)},t.prototype.resume=function(e){return e===void 0&&(e=Ov()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},t.prototype.stopChainedTweens=function(){for(var e=0,n=this._chainedTweens.length;e<n;e++)this._chainedTweens[e].stop();return this},t.prototype.group=function(e){return e===void 0&&(e=wL),this._group=e,this},t.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},t.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},t.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},t.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},t.prototype.easing=function(e){return e===void 0&&(e=yp.Linear.None),this._easingFunction=e,this},t.prototype.interpolation=function(e){return e===void 0&&(e=SL.Linear),this._interpolationFunction=e,this},t.prototype.chain=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._chainedTweens=e,this},t.prototype.onStart=function(e){return this._onStartCallback=e,this},t.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},t.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},t.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},t.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},t.prototype.onStop=function(e){return this._onStopCallback=e,this},t.prototype.update=function(e,n){var r=this,i;if(e===void 0&&(e=Ov()),n===void 0&&(n=!0),this._isPaused)return!0;var s,a=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>a)return!1;n&&this.start(e,!0)}if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var o=e-this._startTime,l=this._duration+((i=this._repeatDelayTime)!==null&&i!==void 0?i:this._delayTime),c=this._duration+this._repeat*l,u=function(){if(r._duration===0||o>c)return 1;var v=Math.trunc(o/l),_=o-v*l,E=Math.min(_/r._duration,1);return E===0&&o===r._duration?1:E},f=u(),p=this._easingFunction(f);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,p),this._onUpdateCallback&&this._onUpdateCallback(this._object,f),this._duration===0||o>=this._duration)if(this._repeat>0){var m=Math.min(Math.trunc((o-this._duration)/l)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=m);for(s in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[s]=="string"&&(this._valuesStartRepeat[s]=this._valuesStartRepeat[s]+parseFloat(this._valuesEnd[s])),this._yoyo&&this._swapEndStartRepeatValues(s),this._valuesStart[s]=this._valuesStartRepeat[s];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=l*m,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var x=0,b=this._chainedTweens.length;x<b;x++)this._chainedTweens[x].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},t.prototype._updateProperties=function(e,n,r,i){for(var s in r)if(n[s]!==void 0){var a=n[s]||0,o=r[s],l=Array.isArray(e[s]),c=Array.isArray(o),u=!l&&c;u?e[s]=this._interpolationFunction(o,i):typeof o=="object"&&o?this._updateProperties(e[s],a,o,i):(o=this._handleRelativeValue(a,o),typeof o=="number"&&(e[s]=a+(o-a)*i))}},t.prototype._handleRelativeValue=function(e,n){return typeof n!="string"?n:n.charAt(0)==="+"||n.charAt(0)==="-"?e+parseFloat(n):parseFloat(n)},t.prototype._swapEndStartRepeatValues=function(e){var n=this._valuesStartRepeat[e],r=this._valuesEnd[e];typeof r=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(r):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=n},t})();Lte.nextId;var Gc=wL;Gc.getAll.bind(Gc);Gc.removeAll.bind(Gc);Gc.add.bind(Gc);Gc.remove.bind(Gc);Gc.update.bind(Gc);var TL="http://www.w3.org/1999/xhtml";const OH={svg:"http://www.w3.org/2000/svg",xhtml:TL,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ite(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),OH.hasOwnProperty(e)?{space:OH[e],local:t}:t}function x$e(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===TL&&e.documentElement.namespaceURI===TL?e.createElement(t):e.createElementNS(n,t)}}function y$e(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function kte(t){var e=Ite(t);return(e.local?y$e:x$e)(e)}function v$e(){}function Bte(t){return t==null?v$e:function(){return this.querySelector(t)}}function b$e(t){typeof t!="function"&&(t=Bte(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=new Array(a),l,c,u=0;u<a;++u)(l=s[u])&&(c=t.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),o[u]=c);return new pl(r,this._parents)}function _$e(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function S$e(){return[]}function w$e(t){return t==null?S$e:function(){return this.querySelectorAll(t)}}function T$e(t){return function(){return _$e(t.apply(this,arguments))}}function E$e(t){typeof t=="function"?t=T$e(t):t=w$e(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var a=e[s],o=a.length,l,c=0;c<o;++c)(l=a[c])&&(r.push(t.call(l,l.__data__,c,a)),i.push(l));return new pl(r,i)}function C$e(t){return function(){return this.matches(t)}}function Fte(t){return function(e){return e.matches(t)}}var A$e=Array.prototype.find;function M$e(t){return function(){return A$e.call(this.children,t)}}function R$e(){return this.firstElementChild}function P$e(t){return this.select(t==null?R$e:M$e(typeof t=="function"?t:Fte(t)))}var N$e=Array.prototype.filter;function O$e(){return Array.from(this.children)}function D$e(t){return function(){return N$e.call(this.children,t)}}function L$e(t){return this.selectAll(t==null?O$e:D$e(typeof t=="function"?t:Fte(t)))}function I$e(t){typeof t!="function"&&(t=C$e(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=[],l,c=0;c<a;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&o.push(l);return new pl(r,this._parents)}function Ute(t){return new Array(t.length)}function k$e(){return new pl(this._enter||this._groups.map(Ute),this._parents)}function O2(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}O2.prototype={constructor:O2,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function B$e(t){return function(){return t}}function F$e(t,e,n,r,i,s){for(var a=0,o,l=e.length,c=s.length;a<c;++a)(o=e[a])?(o.__data__=s[a],r[a]=o):n[a]=new O2(t,s[a]);for(;a<l;++a)(o=e[a])&&(i[a]=o)}function U$e(t,e,n,r,i,s,a){var o,l,c=new Map,u=e.length,f=s.length,p=new Array(u),m;for(o=0;o<u;++o)(l=e[o])&&(p[o]=m=a.call(l,l.__data__,o,e)+"",c.has(m)?i[o]=l:c.set(m,l));for(o=0;o<f;++o)m=a.call(t,s[o],o,s)+"",(l=c.get(m))?(r[o]=l,l.__data__=s[o],c.delete(m)):n[o]=new O2(t,s[o]);for(o=0;o<u;++o)(l=e[o])&&c.get(p[o])===l&&(i[o]=l)}function j$e(t){return t.__data__}function z$e(t,e){if(!arguments.length)return Array.from(this,j$e);var n=e?U$e:F$e,r=this._parents,i=this._groups;typeof t!="function"&&(t=B$e(t));for(var s=i.length,a=new Array(s),o=new Array(s),l=new Array(s),c=0;c<s;++c){var u=r[c],f=i[c],p=f.length,m=$$e(t.call(u,u&&u.__data__,c,r)),x=m.length,b=o[c]=new Array(x),v=a[c]=new Array(x),_=l[c]=new Array(p);n(u,f,b,v,_,m,e);for(var E=0,T=0,A,C;E<x;++E)if(A=b[E]){for(E>=T&&(T=E+1);!(C=v[T])&&++T<x;);A._next=C||null}}return a=new pl(a,r),a._enter=o,a._exit=l,a}function $$e(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function G$e(){return new pl(this._exit||this._groups.map(Ute),this._parents)}function V$e(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function H$e(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,a=Math.min(i,s),o=new Array(i),l=0;l<a;++l)for(var c=n[l],u=r[l],f=c.length,p=o[l]=new Array(f),m,x=0;x<f;++x)(m=c[x]||u[x])&&(p[x]=m);for(;l<i;++l)o[l]=n[l];return new pl(o,this._parents)}function W$e(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],a;--i>=0;)(a=r[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function q$e(t){t||(t=X$e);function e(f,p){return f&&p?t(f.__data__,p.__data__):!f-!p}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var a=n[s],o=a.length,l=i[s]=new Array(o),c,u=0;u<o;++u)(c=a[u])&&(l[u]=c);l.sort(e)}return new pl(i,this._parents).order()}function X$e(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Y$e(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function K$e(){return Array.from(this)}function Z$e(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var a=r[i];if(a)return a}return null}function Q$e(){let t=0;for(const e of this)++t;return t}function J$e(){return!this.node()}function e9e(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,a=i.length,o;s<a;++s)(o=i[s])&&t.call(o,o.__data__,s,i);return this}function t9e(t){return function(){this.removeAttribute(t)}}function n9e(t){return function(){this.removeAttributeNS(t.space,t.local)}}function r9e(t,e){return function(){this.setAttribute(t,e)}}function i9e(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function s9e(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function a9e(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function o9e(t,e){var n=Ite(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?n9e:t9e:typeof e=="function"?n.local?a9e:s9e:n.local?i9e:r9e)(n,e))}function jte(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function l9e(t){return function(){this.style.removeProperty(t)}}function c9e(t,e,n){return function(){this.style.setProperty(t,e,n)}}function u9e(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function d9e(t,e,n){return arguments.length>1?this.each((e==null?l9e:typeof e=="function"?u9e:c9e)(t,e,n??"")):f9e(this.node(),t)}function f9e(t,e){return t.style.getPropertyValue(e)||jte(t).getComputedStyle(t,null).getPropertyValue(e)}function h9e(t){return function(){delete this[t]}}function p9e(t,e){return function(){this[t]=e}}function m9e(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function g9e(t,e){return arguments.length>1?this.each((e==null?h9e:typeof e=="function"?m9e:p9e)(t,e)):this.node()[t]}function zte(t){return t.trim().split(/^|\s+/)}function _F(t){return t.classList||new $te(t)}function $te(t){this._node=t,this._names=zte(t.getAttribute("class")||"")}$te.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Gte(t,e){for(var n=_F(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Vte(t,e){for(var n=_F(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function x9e(t){return function(){Gte(this,t)}}function y9e(t){return function(){Vte(this,t)}}function v9e(t,e){return function(){(e.apply(this,arguments)?Gte:Vte)(this,t)}}function b9e(t,e){var n=zte(t+"");if(arguments.length<2){for(var r=_F(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?v9e:e?x9e:y9e)(n,e))}function _9e(){this.textContent=""}function S9e(t){return function(){this.textContent=t}}function w9e(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function T9e(t){return arguments.length?this.each(t==null?_9e:(typeof t=="function"?w9e:S9e)(t)):this.node().textContent}function E9e(){this.innerHTML=""}function C9e(t){return function(){this.innerHTML=t}}function A9e(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function M9e(t){return arguments.length?this.each(t==null?E9e:(typeof t=="function"?A9e:C9e)(t)):this.node().innerHTML}function R9e(){this.nextSibling&&this.parentNode.appendChild(this)}function P9e(){return this.each(R9e)}function N9e(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function O9e(){return this.each(N9e)}function D9e(t){var e=typeof t=="function"?t:kte(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function L9e(){return null}function I9e(t,e){var n=typeof t=="function"?t:kte(t),r=e==null?L9e:typeof e=="function"?e:Bte(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function k9e(){var t=this.parentNode;t&&t.removeChild(this)}function B9e(){return this.each(k9e)}function F9e(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function U9e(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function j9e(t){return this.select(t?U9e:F9e)}function z9e(t){return arguments.length?this.property("__data__",t):this.node().__data__}function $9e(t){return function(e){t.call(this,e,this.__data__)}}function G9e(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function V9e(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function H9e(t,e,n){return function(){var r=this.__on,i,s=$9e(e);if(r){for(var a=0,o=r.length;a<o;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function W9e(t,e,n){var r=G9e(t+""),i,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,c=o.length,u;l<c;++l)for(i=0,u=o[l];i<s;++i)if((a=r[i]).type===u.type&&a.name===u.name)return u.value}return}for(o=e?H9e:V9e,i=0;i<s;++i)this.each(o(r[i],e,n));return this}function Hte(t,e,n){var r=jte(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function q9e(t,e){return function(){return Hte(this,t,e)}}function X9e(t,e){return function(){return Hte(this,t,e.apply(this,arguments))}}function Y9e(t,e){return this.each((typeof e=="function"?X9e:q9e)(t,e))}function*K9e(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,a;i<s;++i)(a=r[i])&&(yield a)}var Z9e=[null];function pl(t,e){this._groups=t,this._parents=e}function Q9e(){return this}pl.prototype={constructor:pl,select:b$e,selectAll:E$e,selectChild:P$e,selectChildren:L$e,filter:I$e,data:z$e,enter:k$e,exit:G$e,join:V$e,merge:H$e,selection:Q9e,order:W$e,sort:q$e,call:Y$e,nodes:K$e,node:Z$e,size:Q$e,empty:J$e,each:e9e,attr:o9e,style:d9e,property:g9e,classed:b9e,text:T9e,html:M9e,raise:P9e,lower:O9e,append:D9e,insert:I9e,remove:B9e,clone:j9e,datum:z9e,on:W9e,dispatch:Y9e,[Symbol.iterator]:K9e};function J9e(t){return typeof t=="string"?new pl([[document.querySelector(t)]],[document.documentElement]):new pl([[t]],Z9e)}function eGe(t){let e;for(;e=t.sourceEvent;)t=e;return t}function tGe(t,e){if(t=eGe(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}var G_,Zr,Wte,qte,ep,DH,Xte,Yte,Kte,SF,EL,CL,qb={},Zte=[],nGe=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,VC=Array.isArray;function Pc(t,e){for(var n in e)t[n]=e[n];return t}function wF(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function rGe(t,e,n){var r,i,s,a={};for(s in e)s=="key"?r=e[s]:s=="ref"?i=e[s]:a[s]=e[s];if(arguments.length>2&&(a.children=arguments.length>3?G_.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(s in t.defaultProps)a[s]===void 0&&(a[s]=t.defaultProps[s]);return ib(t,a,r,i,null)}function ib(t,e,n,r,i){var s={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++Wte,__i:-1,__u:0};return i==null&&Zr.vnode!=null&&Zr.vnode(s),s}function HC(t){return t.children}function DT(t,e){this.props=t,this.context=e}function Y0(t,e){if(e==null)return t.__?Y0(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?Y0(t):null}function Qte(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return Qte(t)}}function LH(t){(!t.__d&&(t.__d=!0)&&ep.push(t)&&!D2.__r++||DH!=Zr.debounceRendering)&&((DH=Zr.debounceRendering)||Xte)(D2)}function D2(){for(var t,e,n,r,i,s,a,o=1;ep.length;)ep.length>o&&ep.sort(Yte),t=ep.shift(),o=ep.length,t.__d&&(n=void 0,r=void 0,i=(r=(e=t).__v).__e,s=[],a=[],e.__P&&((n=Pc({},r)).__v=r.__v+1,Zr.vnode&&Zr.vnode(n),TF(e.__P,n,r,e.__n,e.__P.namespaceURI,32&r.__u?[i]:null,s,i??Y0(r),!!(32&r.__u),a),n.__v=r.__v,n.__.__k[n.__i]=n,tne(s,n,a),r.__e=r.__=null,n.__e!=i&&Qte(n)));D2.__r=0}function Jte(t,e,n,r,i,s,a,o,l,c,u){var f,p,m,x,b,v,_,E=r&&r.__k||Zte,T=e.length;for(l=iGe(n,e,E,l,T),f=0;f<T;f++)(m=n.__k[f])!=null&&(p=m.__i==-1?qb:E[m.__i]||qb,m.__i=f,v=TF(t,m,p,i,s,a,o,l,c,u),x=m.__e,m.ref&&p.ref!=m.ref&&(p.ref&&EF(p.ref,null,m),u.push(m.ref,m.__c||x,m)),b==null&&x!=null&&(b=x),(_=!!(4&m.__u))||p.__k===m.__k?l=ene(m,l,t,_):typeof m.type=="function"&&v!==void 0?l=v:x&&(l=x.nextSibling),m.__u&=-7);return n.__e=b,l}function iGe(t,e,n,r,i){var s,a,o,l,c,u=n.length,f=u,p=0;for(t.__k=new Array(i),s=0;s<i;s++)(a=e[s])!=null&&typeof a!="boolean"&&typeof a!="function"?(l=s+p,(a=t.__k[s]=typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?ib(null,a,null,null,null):VC(a)?ib(HC,{children:a},null,null,null):a.constructor==null&&a.__b>0?ib(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=t,a.__b=t.__b+1,o=null,(c=a.__i=sGe(a,n,l,f))!=-1&&(f--,(o=n[c])&&(o.__u|=2)),o==null||o.__v==null?(c==-1&&(i>u?p--:i<u&&p++),typeof a.type!="function"&&(a.__u|=4)):c!=l&&(c==l-1?p--:c==l+1?p++:(c>l?p--:p++,a.__u|=4))):t.__k[s]=null;if(f)for(s=0;s<u;s++)(o=n[s])!=null&&(2&o.__u)==0&&(o.__e==r&&(r=Y0(o)),rne(o,o));return r}function ene(t,e,n,r){var i,s;if(typeof t.type=="function"){for(i=t.__k,s=0;i&&s<i.length;s++)i[s]&&(i[s].__=t,e=ene(i[s],e,n,r));return e}t.__e!=e&&(r&&(e&&t.type&&!e.parentNode&&(e=Y0(t)),n.insertBefore(t.__e,e||null)),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function sGe(t,e,n,r){var i,s,a,o=t.key,l=t.type,c=e[n],u=c!=null&&(2&c.__u)==0;if(c===null&&t.key==null||u&&o==c.key&&l==c.type)return n;if(r>(u?1:0)){for(i=n-1,s=n+1;i>=0||s<e.length;)if((c=e[a=i>=0?i--:s++])!=null&&(2&c.__u)==0&&o==c.key&&l==c.type)return a}return-1}function IH(t,e,n){e[0]=="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||nGe.test(e)?n:n+"px"}function qw(t,e,n,r,i){var s,a;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||IH(t.style,e,"");if(n)for(e in n)r&&n[e]==r[e]||IH(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")s=e!=(e=e.replace(Kte,"$1")),a=e.toLowerCase(),e=a in t||e=="onFocusOut"||e=="onFocusIn"?a.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=n,n?r?n.u=r.u:(n.u=SF,t.addEventListener(e,s?CL:EL,s)):t.removeEventListener(e,s?CL:EL,s);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function kH(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=SF++;else if(e.t<n.u)return;return n(Zr.event?Zr.event(e):e)}}}function TF(t,e,n,r,i,s,a,o,l,c){var u,f,p,m,x,b,v,_,E,T,A,C,M,P,D,N,L,k=e.type;if(e.constructor!=null)return null;128&n.__u&&(l=!!(32&n.__u),s=[o=e.__e=n.__e]),(u=Zr.__b)&&u(e);e:if(typeof k=="function")try{if(_=e.props,E="prototype"in k&&k.prototype.render,T=(u=k.contextType)&&r[u.__c],A=u?T?T.props.value:u.__:r,n.__c?v=(f=e.__c=n.__c).__=f.__E:(E?e.__c=f=new k(_,A):(e.__c=f=new DT(_,A),f.constructor=k,f.render=oGe),T&&T.sub(f),f.props=_,f.state||(f.state={}),f.context=A,f.__n=r,p=f.__d=!0,f.__h=[],f._sb=[]),E&&f.__s==null&&(f.__s=f.state),E&&k.getDerivedStateFromProps!=null&&(f.__s==f.state&&(f.__s=Pc({},f.__s)),Pc(f.__s,k.getDerivedStateFromProps(_,f.__s))),m=f.props,x=f.state,f.__v=e,p)E&&k.getDerivedStateFromProps==null&&f.componentWillMount!=null&&f.componentWillMount(),E&&f.componentDidMount!=null&&f.__h.push(f.componentDidMount);else{if(E&&k.getDerivedStateFromProps==null&&_!==m&&f.componentWillReceiveProps!=null&&f.componentWillReceiveProps(_,A),!f.__e&&f.shouldComponentUpdate!=null&&f.shouldComponentUpdate(_,f.__s,A)===!1||e.__v==n.__v){for(e.__v!=n.__v&&(f.props=_,f.state=f.__s,f.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(I){I&&(I.__=e)}),C=0;C<f._sb.length;C++)f.__h.push(f._sb[C]);f._sb=[],f.__h.length&&a.push(f);break e}f.componentWillUpdate!=null&&f.componentWillUpdate(_,f.__s,A),E&&f.componentDidUpdate!=null&&f.__h.push(function(){f.componentDidUpdate(m,x,b)})}if(f.context=A,f.props=_,f.__P=t,f.__e=!1,M=Zr.__r,P=0,E){for(f.state=f.__s,f.__d=!1,M&&M(e),u=f.render(f.props,f.state,f.context),D=0;D<f._sb.length;D++)f.__h.push(f._sb[D]);f._sb=[]}else do f.__d=!1,M&&M(e),u=f.render(f.props,f.state,f.context),f.state=f.__s;while(f.__d&&++P<25);f.state=f.__s,f.getChildContext!=null&&(r=Pc(Pc({},r),f.getChildContext())),E&&!p&&f.getSnapshotBeforeUpdate!=null&&(b=f.getSnapshotBeforeUpdate(m,x)),N=u,u!=null&&u.type===HC&&u.key==null&&(N=nne(u.props.children)),o=Jte(t,VC(N)?N:[N],e,n,r,i,s,a,o,l,c),f.base=e.__e,e.__u&=-161,f.__h.length&&a.push(f),v&&(f.__E=f.__=null)}catch(I){if(e.__v=null,l||s!=null)if(I.then){for(e.__u|=l?160:128;o&&o.nodeType==8&&o.nextSibling;)o=o.nextSibling;s[s.indexOf(o)]=null,e.__e=o}else{for(L=s.length;L--;)wF(s[L]);AL(e)}else e.__e=n.__e,e.__k=n.__k,I.then||AL(e);Zr.__e(I,e,n)}else s==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):o=e.__e=aGe(n.__e,e,n,r,i,s,a,l,c);return(u=Zr.diffed)&&u(e),128&e.__u?void 0:o}function AL(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(AL)}function tne(t,e,n){for(var r=0;r<n.length;r++)EF(n[r],n[++r],n[++r]);Zr.__c&&Zr.__c(e,t),t.some(function(i){try{t=i.__h,i.__h=[],t.some(function(s){s.call(i)})}catch(s){Zr.__e(s,i.__v)}})}function nne(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:VC(t)?t.map(nne):Pc({},t)}function aGe(t,e,n,r,i,s,a,o,l){var c,u,f,p,m,x,b,v=n.props,_=e.props,E=e.type;if(E=="svg"?i="http://www.w3.org/2000/svg":E=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),s!=null){for(c=0;c<s.length;c++)if((m=s[c])&&"setAttribute"in m==!!E&&(E?m.localName==E:m.nodeType==3)){t=m,s[c]=null;break}}if(t==null){if(E==null)return document.createTextNode(_);t=document.createElementNS(i,E,_.is&&_),o&&(Zr.__m&&Zr.__m(e,s),o=!1),s=null}if(E==null)v===_||o&&t.data==_||(t.data=_);else{if(s=s&&G_.call(t.childNodes),v=n.props||qb,!o&&s!=null)for(v={},c=0;c<t.attributes.length;c++)v[(m=t.attributes[c]).name]=m.value;for(c in v)if(m=v[c],c!="children"){if(c=="dangerouslySetInnerHTML")f=m;else if(!(c in _)){if(c=="value"&&"defaultValue"in _||c=="checked"&&"defaultChecked"in _)continue;qw(t,c,null,m,i)}}for(c in _)m=_[c],c=="children"?p=m:c=="dangerouslySetInnerHTML"?u=m:c=="value"?x=m:c=="checked"?b=m:o&&typeof m!="function"||v[c]===m||qw(t,c,m,v[c],i);if(u)o||f&&(u.__html==f.__html||u.__html==t.innerHTML)||(t.innerHTML=u.__html),e.__k=[];else if(f&&(t.innerHTML=""),Jte(e.type=="template"?t.content:t,VC(p)?p:[p],e,n,r,E=="foreignObject"?"http://www.w3.org/1999/xhtml":i,s,a,s?s[0]:n.__k&&Y0(n,0),o,l),s!=null)for(c=s.length;c--;)wF(s[c]);o||(c="value",E=="progress"&&x==null?t.removeAttribute("value"):x!=null&&(x!==t[c]||E=="progress"&&!x||E=="option"&&x!=v[c])&&qw(t,c,x,v[c],i),c="checked",b!=null&&b!=t[c]&&qw(t,c,b,v[c],i))}return t}function EF(t,e,n){try{if(typeof t=="function"){var r=typeof t.__u=="function";r&&t.__u(),r&&e==null||(t.__u=t(e))}else t.current=e}catch(i){Zr.__e(i,n)}}function rne(t,e,n){var r,i;if(Zr.unmount&&Zr.unmount(t),(r=t.ref)&&(r.current&&r.current!=t.__e||EF(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(s){Zr.__e(s,e)}r.base=r.__P=null}if(r=t.__k)for(i=0;i<r.length;i++)r[i]&&rne(r[i],e,n||typeof t.type!="function");n||wF(t.__e),t.__c=t.__=t.__e=void 0}function oGe(t,e,n){return this.constructor(t,n)}function lGe(t,e,n){var r,i,s,a;e==document&&(e=document.documentElement),Zr.__&&Zr.__(t,e),i=(r=!1)?null:e.__k,s=[],a=[],TF(e,t=e.__k=rGe(HC,null,[t]),i||qb,qb,e.namespaceURI,i?null:e.firstChild?G_.call(e.childNodes):null,s,i?i.__e:e.firstChild,r,a),tne(s,t,a)}function ine(t,e,n){var r,i,s,a,o=Pc({},t.props);for(s in t.type&&t.type.defaultProps&&(a=t.type.defaultProps),e)s=="key"?r=e[s]:s=="ref"?i=e[s]:o[s]=e[s]===void 0&&a!=null?a[s]:e[s];return arguments.length>2&&(o.children=arguments.length>3?G_.call(arguments,2):n),ib(t.type,o,r||t.key,i||t.ref,null)}G_=Zte.slice,Zr={__e:function(t,e,n,r){for(var i,s,a;e=e.__;)if((i=e.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(t)),a=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,r||{}),a=i.__d),a)return i.__E=i}catch(o){t=o}throw t}},Wte=0,qte=function(t){return t!=null&&t.constructor==null},DT.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Pc({},this.state),typeof t=="function"&&(t=t(Pc({},n),this.props)),t&&Pc(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),LH(this))},DT.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),LH(this))},DT.prototype.render=HC,ep=[],Xte=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Yte=function(t,e){return t.__v.__b-e.__v.__b},D2.__r=0,Kte=/(PointerCapture)$|Capture$/i,SF=0,EL=kH(!1),CL=kH(!0);function BH(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function cGe(t){if(Array.isArray(t))return t}function uGe(t,e,n){return(e=gGe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dGe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function fGe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hGe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FH(Object(n),!0).forEach(function(r){uGe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pGe(t,e){return cGe(t)||dGe(t,e)||xGe(t,e)||fGe()}function mGe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gGe(t){var e=mGe(t,"string");return typeof e=="symbol"?e:e+""}function L2(t){"@babel/helpers - typeof";return L2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L2(t)}function xGe(t,e){if(t){if(typeof t=="string")return BH(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?BH(t,e):void 0}}var ML=function(e){if(L2(e)!=="object")return e;var n=ine(e);if(n.props){var r;n.props=hGe({},n.props),n!=null&&(r=n.props)!==null&&r!==void 0&&r.children&&(n.props.children=Array.isArray(n.props.children)?n.props.children.map(ML):ML(n.props.children))}return n},yGe=function(e){return qte(ine(e))},vGe=function(e,n){delete n.__k,lGe(ML(e),n)};function bGe(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}var _Ge=`.float-tooltip-kap {
  position: absolute;
  width: max-content; /* prevent shrinking near right edge */
  max-width: max(50%, 150px);
  padding: 3px 5px;
  border-radius: 3px;
  font: 12px sans-serif;
  color: #eee;
  background: rgba(0,0,0,0.6);
  pointer-events: none;
}
`;bGe(_Ge);var SGe=xC({props:{content:{default:!1},offsetX:{triggerUpdate:!1},offsetY:{triggerUpdate:!1}},init:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.style,s=i===void 0?{}:i,a=!!e&&L2(e)==="object"&&!!e.node&&typeof e.node=="function",o=J9e(a?e.node():e);o.style("position")==="static"&&o.style("position","relative"),n.tooltipEl=o.append("div").attr("class","float-tooltip-kap"),Object.entries(s).forEach(function(c){var u=pGe(c,2),f=u[0],p=u[1];return n.tooltipEl.style(f,p)}),n.tooltipEl.style("left","-10000px").style("display","none");var l="tooltip-".concat(Math.round(Math.random()*1e12));n.mouseInside=!1,o.on("mousemove.".concat(l),function(c){n.mouseInside=!0;var u=tGe(c),f=o.node(),p=f.offsetWidth,m=f.offsetHeight,x=[n.offsetX===null||n.offsetX===void 0?"-".concat(u[0]/p*100,"%"):typeof n.offsetX=="number"?"calc(-50% + ".concat(n.offsetX,"px)"):n.offsetX,n.offsetY===null||n.offsetY===void 0?m>130&&m-u[1]<100?"calc(-100% - 6px)":"21px":typeof n.offsetY=="number"?n.offsetY<0?"calc(-100% - ".concat(Math.abs(n.offsetY),"px)"):"".concat(n.offsetY,"px"):n.offsetY];n.tooltipEl.style("left",u[0]+"px").style("top",u[1]+"px").style("transform","translate(".concat(x.join(","),")")),n.content&&n.tooltipEl.style("display","inline")}),o.on("mouseover.".concat(l),function(){n.mouseInside=!0,n.content&&n.tooltipEl.style("display","inline")}),o.on("mouseout.".concat(l),function(){n.mouseInside=!1,n.tooltipEl.style("display","none")})},update:function(e){e.tooltipEl.style("display",e.content&&e.mouseInside?"inline":"none"),e.content?e.content instanceof HTMLElement?(e.tooltipEl.text(""),e.tooltipEl.append(function(){return e.content})):typeof e.content=="string"?e.tooltipEl.html(e.content):yGe(e.content)?(e.tooltipEl.text(""),vGe(e.content,e.tooltipEl.node())):(e.tooltipEl.style("display","none"),console.warn("Tooltip content is invalid, skipping.",e.content,e.content.toString())):e.tooltipEl.text("")}});function wGe(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}var TGe=`.scene-nav-info {
  position: absolute;
  bottom: 5px;
  width: 100%;
  text-align: center;
  color: slategrey;
  opacity: 0.7;
  font-size: 10px;
  font-family: sans-serif;
  pointer-events: none;
  user-select: none;
}

.scene-container canvas:focus {
  outline: none;
}`;wGe(TGe);function RL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function EGe(t){if(Array.isArray(t))return t}function CGe(t){if(Array.isArray(t))return RL(t)}function AGe(t,e,n){return(e=LGe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MGe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function RGe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function PGe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NGe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OGe(t,e){return EGe(t)||RGe(t,e)||sne(t,e)||PGe()}function Ih(t){return CGe(t)||MGe(t)||sne(t)||NGe()}function DGe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function LGe(t){var e=DGe(t,"string");return typeof e=="symbol"?e:e+""}function sne(t,e){if(t){if(typeof t=="string")return RL(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?RL(t,e):void 0}}var qr=window.THREE?window.THREE:{WebGLRenderer:f3e,Scene:uC,PerspectiveCamera:ys,Raycaster:oQ,SRGBColorSpace:ha,TextureLoader:gEe,Vector2:mt,Vector3:ae,Box3:Wp,Color:Xt,Mesh:Ji,SphereGeometry:O_,MeshBasicMaterial:Cc,BackSide:Sr,Clock:aQ},ane=xC({props:{width:{default:window.innerWidth,onChange:function(e,n,r){isNaN(e)&&(n.width=r)}},height:{default:window.innerHeight,onChange:function(e,n,r){isNaN(e)&&(n.height=r)}},viewOffset:{default:[0,0]},backgroundColor:{default:"#000011"},backgroundImageUrl:{},onBackgroundImageLoaded:{},showNavInfo:{default:!0},skyRadius:{default:5e4},objects:{default:[]},lights:{default:[]},enablePointerInteraction:{default:!0,onChange:function(e,n){n.hoverObj=null,n.tooltip&&n.tooltip.content(null)},triggerUpdate:!1},pointerRaycasterThrottleMs:{default:50,triggerUpdate:!1},lineHoverPrecision:{default:1,triggerUpdate:!1},pointsHoverPrecision:{default:1,triggerUpdate:!1},hoverOrderComparator:{triggerUpdate:!1},hoverFilter:{default:function(){return!0},triggerUpdate:!1},tooltipContent:{triggerUpdate:!1},hoverDuringDrag:{default:!1,triggerUpdate:!1},clickAfterDrag:{default:!1,triggerUpdate:!1},onHover:{default:function(){},triggerUpdate:!1},onClick:{default:function(){},triggerUpdate:!1},onRightClick:{triggerUpdate:!1}},methods:{tick:function(e){if(e.initialised){e.controls.enabled&&e.controls.update&&e.controls.update(Math.min(1,e.clock.getDelta())),e.postProcessingComposer?e.postProcessingComposer.render():e.renderer.render(e.scene,e.camera),e.extraRenderers.forEach(function(a){return a.render(e.scene,e.camera)});var n=+new Date;if(e.enablePointerInteraction&&n-e.lastRaycasterCheck>=e.pointerRaycasterThrottleMs){e.lastRaycasterCheck=n;var r=null;if(e.hoverDuringDrag||!e.isPointerDragging){var i=this.intersectingObjects(e.pointerPos.x,e.pointerPos.y);e.hoverOrderComparator&&i.sort(function(a,o){return e.hoverOrderComparator(a.object,o.object)});var s=i.find(function(a){return e.hoverFilter(a.object)})||null;r=s?s.object:null,e.intersection=s||null}r!==e.hoverObj&&(e.onHover(r,e.hoverObj,e.intersection),e.tooltip.content(r&&Dn(e.tooltipContent)(r,e.intersection)||null),e.hoverObj=r)}e.tweenGroup.update()}return this},getPointerPos:function(e){var n=e.pointerPos,r=n.x,i=n.y;return{x:r,y:i}},cameraPosition:function(e,n,r,i){var s=e.camera;if(n&&e.initialised){var a=n,o=r||{x:0,y:0,z:0};if(!i)u(a),f(o);else{var l=Object.assign({},s.position),c=p();e.tweenGroup.add(new NH(l).to(a,i).easing(yp.Quadratic.Out).onUpdate(u).start()),e.tweenGroup.add(new NH(c).to(o,i/3).easing(yp.Quadratic.Out).onUpdate(f).start())}return this}return Object.assign({},s.position,{lookAt:p()});function u(m){var x=m.x,b=m.y,v=m.z;x!==void 0&&(s.position.x=x),b!==void 0&&(s.position.y=b),v!==void 0&&(s.position.z=v)}function f(m){var x=new qr.Vector3(m.x,m.y,m.z);e.controls.enabled&&e.controls.target?e.controls.target=x:s.lookAt(x)}function p(){return Object.assign(new qr.Vector3(0,0,-1e3).applyQuaternion(s.quaternion).add(s.position))}},zoomToFit:function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,i=arguments.length,s=new Array(i>3?i-3:0),a=3;a<i;a++)s[a-3]=arguments[a];return this.fitToBbox(this.getBbox.apply(this,s),n,r)},fitToBbox:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:10,s=e.camera;if(n){var a=new qr.Vector3(0,0,0),o=Math.max.apply(Math,Ih(Object.entries(n).map(function(m){var x=OGe(m,2),b=x[0],v=x[1];return Math.max.apply(Math,Ih(v.map(function(_){return Math.abs(a[b]-_)})))})))*2,l=(1-i*2/e.height)*s.fov,c=o/Math.atan(l*Math.PI/180),u=c/s.aspect,f=Math.max(c,u);if(f>0){var p=a.clone().sub(s.position).normalize().multiplyScalar(-f);this.cameraPosition(p,a,r)}}return this},getBbox:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},r=new qr.Box3(new qr.Vector3(0,0,0),new qr.Vector3(0,0,0)),i=e.objects.filter(n);return i.length?(i.forEach(function(s){return r.expandByObject(s)}),Object.assign.apply(Object,Ih(["x","y","z"].map(function(s){return AGe({},s,[r.min[s],r.max[s]])})))):null},getScreenCoords:function(e,n,r,i){var s=new qr.Vector3(n,r,i);return s.project(this.camera()),{x:(s.x+1)*e.width/2,y:-(s.y-1)*e.height/2}},getSceneCoords:function(e,n,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=new qr.Vector2(n/e.width*2-1,-(r/e.height)*2+1),a=new qr.Raycaster;return a.setFromCamera(s,e.camera),Object.assign({},a.ray.at(i,new qr.Vector3))},intersectingObjects:function(e,n,r){var i=new qr.Vector2(n/e.width*2-1,-(r/e.height)*2+1),s=new qr.Raycaster;return s.params.Line.threshold=e.lineHoverPrecision,s.params.Points.threshold=e.pointsHoverPrecision,s.setFromCamera(i,e.camera),s.intersectObjects(e.objects,!0)},renderer:function(e){return e.renderer},scene:function(e){return e.scene},camera:function(e){return e.camera},postProcessingComposer:function(e){return e.postProcessingComposer},controls:function(e){return e.controls},tbControls:function(e){return e.controls}},stateInit:function(){return{scene:new qr.Scene,camera:new qr.PerspectiveCamera,clock:new qr.Clock,tweenGroup:new Dte,lastRaycasterCheck:0}},init:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.controlType,s=i===void 0?"trackball":i,a=r.useWebGPU,o=a===void 0?!1:a,l=r.rendererConfig,c=l===void 0?{}:l,u=r.extraRenderers,f=u===void 0?[]:u,p=r.waitForLoadComplete,m=p===void 0?!0:p;e.innerHTML="",e.appendChild(n.container=document.createElement("div")),n.container.className="scene-container",n.container.style.position="relative",n.container.appendChild(n.navInfo=document.createElement("div")),n.navInfo.className="scene-nav-info",n.navInfo.textContent={orbit:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",trackball:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",fly:"WASD: move, R|F: up | down, Q|E: roll, up|down: pitch, left|right: yaw"}[s]||"",n.navInfo.style.display=n.showNavInfo?null:"none",n.tooltip=new SGe(n.container),n.pointerPos=new qr.Vector2,n.pointerPos.x=-2,n.pointerPos.y=-2,["pointermove","pointerdown"].forEach(function(x){return n.container.addEventListener(x,function(b){if(x==="pointerdown"&&(n.isPointerPressed=!0),!n.isPointerDragging&&b.type==="pointermove"&&(b.pressure>0||n.isPointerPressed)&&(b.pointerType==="mouse"||b.movementX===void 0||[b.movementX,b.movementY].some(function(E){return Math.abs(E)>1}))&&(n.isPointerDragging=!0),n.enablePointerInteraction){var v=_(n.container);n.pointerPos.x=b.pageX-v.left,n.pointerPos.y=b.pageY-v.top}function _(E){var T=E.getBoundingClientRect(),A=window.pageXOffset||document.documentElement.scrollLeft,C=window.pageYOffset||document.documentElement.scrollTop;return{top:T.top+C,left:T.left+A}}},{passive:!0})}),n.container.addEventListener("pointerup",function(x){n.isPointerPressed&&(n.isPointerPressed=!1,!(n.isPointerDragging&&(n.isPointerDragging=!1,!n.clickAfterDrag))&&requestAnimationFrame(function(){x.button===0&&n.onClick(n.hoverObj||null,x,n.intersection),x.button===2&&n.onRightClick&&n.onRightClick(n.hoverObj||null,x,n.intersection)}))},{passive:!0,capture:!0}),n.container.addEventListener("contextmenu",function(x){n.onRightClick&&x.preventDefault()}),n.renderer=new(o?j6e:qr.WebGLRenderer)(Object.assign({antialias:!0,alpha:!0},c)),n.renderer.setPixelRatio(Math.min(2,window.devicePixelRatio)),n.container.appendChild(n.renderer.domElement),n.extraRenderers=f,n.extraRenderers.forEach(function(x){x.domElement.style.position="absolute",x.domElement.style.top="0px",x.domElement.style.pointerEvents="none",n.container.appendChild(x.domElement)}),n.postProcessingComposer=new D8e(n.renderer),n.postProcessingComposer.addPass(new L8e(n.scene,n.camera)),n.controls=new{trackball:$6e,orbit:i8e,fly:y8e}[s](n.camera,n.renderer.domElement),s==="fly"&&(n.controls.movementSpeed=300,n.controls.rollSpeed=Math.PI/6,n.controls.dragToLook=!0),(s==="trackball"||s==="orbit")&&(n.controls.minDistance=.1,n.controls.maxDistance=n.skyRadius,n.controls.addEventListener("start",function(){n.controlsEngaged=!0}),n.controls.addEventListener("change",function(){n.controlsEngaged&&(n.controlsDragging=!0)}),n.controls.addEventListener("end",function(){n.controlsEngaged=!1,n.controlsDragging=!1})),[n.renderer,n.postProcessingComposer].concat(Ih(n.extraRenderers)).forEach(function(x){return x.setSize(n.width,n.height)}),n.camera.aspect=n.width/n.height,n.camera.updateProjectionMatrix(),n.camera.position.z=1e3,n.scene.add(n.skysphere=new qr.Mesh),n.skysphere.visible=!1,n.loadComplete=n.scene.visible=!m,window.scene=n.scene},update:function(e,n){if(e.width&&e.height&&(n.hasOwnProperty("width")||n.hasOwnProperty("height"))){var r,i=e.width,s=e.height;e.container.style.width="".concat(i,"px"),e.container.style.height="".concat(s,"px"),[e.renderer,e.postProcessingComposer].concat(Ih(e.extraRenderers)).forEach(function(m){return m.setSize(i,s)}),e.camera.aspect=i/s;var a=e.viewOffset.slice(0,2);a.some(function(m){return m})&&(r=e.camera).setViewOffset.apply(r,[i,s].concat(Ih(a),[i,s])),e.camera.updateProjectionMatrix()}if(n.hasOwnProperty("viewOffset")){var o,l=e.width,c=e.height,u=e.viewOffset.slice(0,2);u.some(function(m){return m})?(o=e.camera).setViewOffset.apply(o,[l,c].concat(Ih(u),[l,c])):e.camera.clearViewOffset()}if(n.hasOwnProperty("skyRadius")&&e.skyRadius&&(e.controls.hasOwnProperty("maxDistance")&&n.skyRadius&&(e.controls.maxDistance=Math.min(e.controls.maxDistance,e.skyRadius)),e.camera.far=e.skyRadius*2.5,e.camera.updateProjectionMatrix(),e.skysphere.geometry=new qr.SphereGeometry(e.skyRadius)),n.hasOwnProperty("backgroundColor")){var f=X0(e.backgroundColor).alpha;f===void 0&&(f=1),e.renderer.setClearColor(new qr.Color(c$e(1,e.backgroundColor)),f)}n.hasOwnProperty("backgroundImageUrl")&&(e.backgroundImageUrl?new qr.TextureLoader().load(e.backgroundImageUrl,function(m){m.colorSpace=qr.SRGBColorSpace,e.skysphere.material=new qr.MeshBasicMaterial({map:m,side:qr.BackSide}),e.skysphere.visible=!0,e.onBackgroundImageLoaded&&setTimeout(e.onBackgroundImageLoaded),!e.loadComplete&&p()}):(e.skysphere.visible=!1,e.skysphere.material.map=null,!e.loadComplete&&p())),n.hasOwnProperty("showNavInfo")&&(e.navInfo.style.display=e.showNavInfo?null:"none"),n.hasOwnProperty("lights")&&((n.lights||[]).forEach(function(m){return e.scene.remove(m)}),e.lights.forEach(function(m){return e.scene.add(m)})),n.hasOwnProperty("objects")&&((n.objects||[]).forEach(function(m){return e.scene.remove(m)}),e.objects.forEach(function(m){return e.scene.add(m)}));function p(){e.loadComplete=e.scene.visible=!0}}});function IGe(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}var kGe=`.graph-info-msg {
  top: 50%;
  width: 100%;
  text-align: center;
  color: lavender;
  opacity: 0.7;
  font-size: 22px;
  position: absolute;
  font-family: Sans-serif;
}

.scene-container .clickable {
  cursor: pointer;
}

.scene-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.scene-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}`;IGe(kGe);function PL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function BGe(t){if(Array.isArray(t))return PL(t)}function V_(t,e,n){return(e=zGe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FGe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function UGe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UH(Object(n),!0).forEach(function(r){V_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WC(t){return BGe(t)||FGe(t)||$Ge(t)||UGe()}function jGe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zGe(t){var e=jGe(t,"string");return typeof e=="symbol"?e:e+""}function $Ge(t,e){if(t){if(typeof t=="string")return PL(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?PL(t,e):void 0}}function one(t,e){var n=new e;return n._destructor&&n._destructor(),{linkProp:function(i){return{default:n[i](),onChange:function(a,o){o[t][i](a)},triggerUpdate:!1}},linkMethod:function(i){return function(s){for(var a=s[t],o=arguments.length,l=new Array(o>1?o-1:0),c=1;c<o;c++)l[c-1]=arguments[c];var u=a[i].apply(a,l);return u===a?this:u}}}}var mN=window.THREE?window.THREE:{AmbientLight:iQ,DirectionalLight:rQ,REVISION:Vp},GGe=170,lne=one("forceGraph",AJ),VGe=Object.assign.apply(Object,WC(["jsonUrl","graphData","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","nodeVal","nodeResolution","nodeColor","nodeAutoColorBy","nodeOpacity","nodeVisibility","nodeThreeObject","nodeThreeObjectExtend","nodePositionUpdate","linkSource","linkTarget","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleOffset","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","linkDirectionalParticleThreeObject","forceEngine","d3AlphaDecay","d3VelocityDecay","d3AlphaMin","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(t){return V_({},t,lne.linkProp(t))}))),HGe=Object.assign.apply(Object,WC(["refresh","getGraphBbox","d3Force","d3ReheatSimulation","emitParticle"].map(function(t){return V_({},t,lne.linkMethod(t))}))),LT=one("renderObjs",ane),WGe=Object.assign.apply(Object,WC(["width","height","backgroundColor","showNavInfo","enablePointerInteraction"].map(function(t){return V_({},t,LT.linkProp(t))}))),qGe=Object.assign.apply(Object,WC(["lights","cameraPosition","postProcessingComposer"].map(function(t){return V_({},t,LT.linkMethod(t))})).concat([{graph2ScreenCoords:LT.linkMethod("getScreenCoords"),screen2GraphCoords:LT.linkMethod("getSceneCoords")}])),XGe=xC({props:Xw(Xw({nodeLabel:{default:"name",triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:1,onChange:function(e,n){return n.renderObjs.lineHoverPrecision(e)},triggerUpdate:!1},enableNavigationControls:{default:!0,onChange:function(e,n){var r=n.renderObjs.controls();r&&(r.enabled=e,e&&r.domElement&&r.domElement.dispatchEvent(new PointerEvent("pointerup")))},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},showPointerCursor:{default:!0,triggerUpdate:!1}},VGe),WGe),methods:Xw(Xw({zoomToFit:function(e,n,r){for(var i,s=arguments.length,a=new Array(s>3?s-3:0),o=3;o<s;o++)a[o-3]=arguments[o];return e.renderObjs.fitToBbox((i=e.forceGraph).getGraphBbox.apply(i,a),n,r),this},pauseAnimation:function(e){return e.animationFrameRequestId!==null&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return e.animationFrameRequestId===null&&this._animationCycle(),this},_animationCycle:function(e){e.enablePointerInteraction&&(this.renderer().domElement.style.cursor=null),e.forceGraph.tickFrame(),e.renderObjs.tick(),e.animationFrameRequestId=requestAnimationFrame(this._animationCycle)},scene:function(e){return e.renderObjs.scene()},camera:function(e){return e.renderObjs.camera()},renderer:function(e){return e.renderObjs.renderer()},controls:function(e){return e.renderObjs.controls()},tbControls:function(e){return e.renderObjs.tbControls()},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},HGe),qGe),stateInit:function(e){var n=e.controlType,r=e.rendererConfig,i=e.extraRenderers,s=new AJ;return{forceGraph:s,renderObjs:ane({controlType:n,rendererConfig:r,extraRenderers:i}).objects([s]).lights([new mN.AmbientLight(13421772,Math.PI),new mN.DirectionalLight(16777215,.6*Math.PI)])}},init:function(e,n){e.innerHTML="",e.appendChild(n.container=document.createElement("div")),n.container.style.position="relative";var r=document.createElement("div");n.container.appendChild(r),n.renderObjs(r);var i=n.renderObjs.camera(),s=n.renderObjs.renderer(),a=n.renderObjs.controls();a.enabled=!!n.enableNavigationControls,n.lastSetCameraZ=i.position.z;var o;n.container.appendChild(o=document.createElement("div")),o.className="graph-info-msg",o.textContent="",n.forceGraph.onLoading(function(){o.textContent="Loading..."}).onFinishLoading(function(){o.textContent=""}).onUpdate(function(){n.graphData=n.forceGraph.graphData(),i.position.x===0&&i.position.y===0&&i.position.z===n.lastSetCameraZ&&n.graphData.nodes.length&&(i.lookAt(n.forceGraph.position),n.lastSetCameraZ=i.position.z=Math.cbrt(n.graphData.nodes.length)*GGe)}).onFinishUpdate(function(){if(n._dragControls){var l=n.graphData.nodes.find(function(u){return u.__initialFixedPos&&!u.__disposeControlsAfterDrag});l?l.__disposeControlsAfterDrag=!0:n._dragControls.dispose(),n._dragControls=void 0}if(n.enableNodeDrag&&n.enablePointerInteraction&&n.forceEngine==="d3"){var c=n._dragControls=new h3e(n.graphData.nodes.map(function(u){return u.__threeObj}).filter(function(u){return u}),i,s.domElement);c.addEventListener("dragstart",function(u){var f=Pu(u.object);if(f){a.enabled=!1,u.object.__initialPos=u.object.position.clone(),u.object.__prevPos=u.object.position.clone();var p=f.__data;!p.__initialFixedPos&&(p.__initialFixedPos={fx:p.fx,fy:p.fy,fz:p.fz}),!p.__initialPos&&(p.__initialPos={x:p.x,y:p.y,z:p.z}),["x","y","z"].forEach(function(m){return p["f".concat(m)]=p[m]}),s.domElement.classList.add("grabbable")}}),c.addEventListener("drag",function(u){var f=Pu(u.object);if(f){if(!u.object.hasOwnProperty("__graphObjType")){var p=u.object.__initialPos,m=u.object.__prevPos,x=u.object.position;f.position.add(x.clone().sub(m)),m.copy(x),x.copy(p)}var b=f.__data,v=f.position,_={x:v.x-b.x,y:v.y-b.y,z:v.z-b.z};["x","y","z"].forEach(function(E){return b["f".concat(E)]=b[E]=v[E]}),n.forceGraph.d3AlphaTarget(.3).resetCountdown(),b.__dragged=!0,n.onNodeDrag(b,_)}}),c.addEventListener("dragend",function(u){var f=Pu(u.object);if(f){delete u.object.__initialPos,delete u.object.__prevPos;var p=f.__data;p.__disposeControlsAfterDrag&&(c.dispose(),delete p.__disposeControlsAfterDrag);var m=p.__initialFixedPos,x=p.__initialPos,b={x:x.x-p.x,y:x.y-p.y,z:x.z-p.z};if(m&&(["x","y","z"].forEach(function(_){var E="f".concat(_);m[E]===void 0&&delete p[E]}),delete p.__initialFixedPos,delete p.__initialPos,p.__dragged&&(delete p.__dragged,n.onNodeDragEnd(p,b))),n.forceGraph.d3AlphaTarget(0).resetCountdown(),n.enableNavigationControls){var v;a.enabled=!0,a._status&&((v=a._onPointerCancel)===null||v===void 0||v.call(a)),a.domElement&&a.domElement.ownerDocument&&a.domElement.ownerDocument.dispatchEvent(new PointerEvent("pointerup",{pointerType:"touch"}))}s.domElement.classList.remove("grabbable")}})}}),mN.REVISION<155&&(n.renderObjs.renderer().useLegacyLights=!1),n.renderObjs.hoverOrderComparator(function(l,c){var u=Pu(l);if(!u)return 1;var f=Pu(c);if(!f)return-1;var p=function(x){return x.__graphObjType==="node"};return p(f)-p(u)}).tooltipContent(function(l){var c=Pu(l);return c&&Dn(n["".concat(c.__graphObjType,"Label")])(c.__data)||""}).hoverDuringDrag(!1).onHover(function(l){var c=Pu(l);if(c!==n.hoverObj){var u=n.hoverObj?n.hoverObj.__graphObjType:null,f=n.hoverObj?n.hoverObj.__data:null,p=c?c.__graphObjType:null,m=c?c.__data:null;if(u&&u!==p){var x=n["on".concat(u==="node"?"Node":"Link","Hover")];x&&x(null,f)}if(p){var b=n["on".concat(p==="node"?"Node":"Link","Hover")];b&&b(m,u===p?f:null)}s.domElement.classList[(c&&n["on".concat(p==="node"?"Node":"Link","Click")]||!c&&n.onBackgroundClick)&&Dn(n.showPointerCursor)(m)?"add":"remove"]("clickable"),n.hoverObj=c}}).clickAfterDrag(!1).onClick(function(l,c){var u=Pu(l);if(u){var f=n["on".concat(u.__graphObjType==="node"?"Node":"Link","Click")];f&&f(u.__data,c)}else n.onBackgroundClick&&n.onBackgroundClick(c)}).onRightClick(function(l,c){var u=Pu(l);if(u){var f=n["on".concat(u.__graphObjType==="node"?"Node":"Link","RightClick")];f&&f(u.__data,c)}else n.onBackgroundRightClick&&n.onBackgroundRightClick(c)}),this._animationCycle()}});function Pu(t){for(var e=t;e&&!e.hasOwnProperty("__graphObjType");)e=e.parent;return e}const qC={width:ye.number,height:ye.number,graphData:ye.shape({nodes:ye.arrayOf(ye.object).isRequired,links:ye.arrayOf(ye.object).isRequired}),backgroundColor:ye.string,nodeRelSize:ye.number,nodeId:ye.string,nodeLabel:ye.oneOfType([ye.string,ye.func]),nodeVal:ye.oneOfType([ye.number,ye.string,ye.func]),nodeVisibility:ye.oneOfType([ye.bool,ye.string,ye.func]),nodeColor:ye.oneOfType([ye.string,ye.func]),nodeAutoColorBy:ye.oneOfType([ye.string,ye.func]),onNodeHover:ye.func,onNodeClick:ye.func,linkSource:ye.string,linkTarget:ye.string,linkLabel:ye.oneOfType([ye.string,ye.func]),linkVisibility:ye.oneOfType([ye.bool,ye.string,ye.func]),linkColor:ye.oneOfType([ye.string,ye.func]),linkAutoColorBy:ye.oneOfType([ye.string,ye.func]),linkWidth:ye.oneOfType([ye.number,ye.string,ye.func]),linkCurvature:ye.oneOfType([ye.number,ye.string,ye.func]),linkDirectionalArrowLength:ye.oneOfType([ye.number,ye.string,ye.func]),linkDirectionalArrowColor:ye.oneOfType([ye.string,ye.func]),linkDirectionalArrowRelPos:ye.oneOfType([ye.number,ye.string,ye.func]),linkDirectionalParticles:ye.oneOfType([ye.number,ye.string,ye.func]),linkDirectionalParticleSpeed:ye.oneOfType([ye.number,ye.string,ye.func]),linkDirectionalParticleOffset:ye.oneOfType([ye.number,ye.string,ye.func]),linkDirectionalParticleWidth:ye.oneOfType([ye.number,ye.string,ye.func]),linkDirectionalParticleColor:ye.oneOfType([ye.string,ye.func]),onLinkHover:ye.func,onLinkClick:ye.func,dagMode:ye.oneOf(["td","bu","lr","rl","zin","zout","radialin","radialout"]),dagLevelDistance:ye.number,dagNodeFilter:ye.func,onDagError:ye.func,d3AlphaMin:ye.number,d3AlphaDecay:ye.number,d3VelocityDecay:ye.number,warmupTicks:ye.number,cooldownTicks:ye.number,cooldownTime:ye.number,onEngineTick:ye.func,onEngineStop:ye.func,getGraphBbox:ye.func},cne={zoomToFit:ye.func,onNodeRightClick:ye.func,onNodeDrag:ye.func,onNodeDragEnd:ye.func,onLinkRightClick:ye.func,linkHoverPrecision:ye.number,onBackgroundClick:ye.func,onBackgroundRightClick:ye.func,showPointerCursor:ye.oneOfType([ye.bool,ye.func]),enablePointerInteraction:ye.bool,enableNodeDrag:ye.bool},CF={showNavInfo:ye.bool,nodeOpacity:ye.number,nodeResolution:ye.number,nodeThreeObject:ye.oneOfType([ye.object,ye.string,ye.func]),nodeThreeObjectExtend:ye.oneOfType([ye.bool,ye.string,ye.func]),nodePositionUpdate:ye.func,linkOpacity:ye.number,linkResolution:ye.number,linkCurveRotation:ye.oneOfType([ye.number,ye.string,ye.func]),linkMaterial:ye.oneOfType([ye.object,ye.string,ye.func]),linkThreeObject:ye.oneOfType([ye.object,ye.string,ye.func]),linkThreeObjectExtend:ye.oneOfType([ye.bool,ye.string,ye.func]),linkPositionUpdate:ye.func,linkDirectionalArrowResolution:ye.number,linkDirectionalParticleResolution:ye.number,linkDirectionalParticleThreeObject:ye.oneOfType([ye.object,ye.string,ye.func]),forceEngine:ye.oneOf(["d3","ngraph"]),ngraphPhysics:ye.object,numDimensions:ye.oneOf([1,2,3])};Object.assign({},qC,cne,{linkLineDash:ye.oneOfType([ye.arrayOf(ye.number),ye.string,ye.func]),nodeCanvasObjectMode:ye.oneOfType([ye.string,ye.func]),nodeCanvasObject:ye.func,nodePointerAreaPaint:ye.func,linkCanvasObjectMode:ye.oneOfType([ye.string,ye.func]),linkCanvasObject:ye.func,linkPointerAreaPaint:ye.func,linkDirectionalParticleCanvasObject:ye.func,autoPauseRedraw:ye.bool,minZoom:ye.number,maxZoom:ye.number,enableZoomInteraction:ye.oneOfType([ye.bool,ye.func]),enablePanInteraction:ye.oneOfType([ye.bool,ye.func]),onZoom:ye.func,onZoomEnd:ye.func,onRenderFramePre:ye.func,onRenderFramePost:ye.func});const YGe=Object.assign({},qC,cne,CF,{enableNavigationControls:ye.bool,controlType:ye.oneOf(["trackball","orbit","fly"]),rendererConfig:ye.object,extraRenderers:ye.arrayOf(ye.shape({render:ye.func.isRequired}))});Object.assign({},qC,CF,{nodeDesc:ye.oneOfType([ye.string,ye.func]),linkDesc:ye.oneOfType([ye.string,ye.func])});Object.assign({},qC,CF,{markerAttrs:ye.object,yOffset:ye.number,glScale:ye.number});const AF=ATe(XGe,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","cameraPosition","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords","postProcessingComposer","lights","scene","camera","renderer","controls","refresh"],initPropNames:["controlType","rendererConfig","extraRenderers"]});AF.displayName="ForceGraph3D";AF.propTypes=YGe;const jH="",KGe=({node:t,position:e,visible:n})=>{const[r,i]=w.useState(null),[s,a]=w.useState(!1);return w.useEffect(()=>{n&&t&&t.type==="entity"?(a(!0),fetch(`${jH}/api/v1/images/entity/${t.id}`).then(o=>{if(o.ok)return o.json();throw new Error("No image found")}).then(o=>{i(o.image_url)}).catch(()=>{i(null)}).finally(()=>{a(!1)})):(i(null),a(!1))},[n,t]),!n||!t?null:g.jsx(Y,{sx:{position:"fixed",left:e.x+20,top:e.y+20,zIndex:1e4,pointerEvents:"none",maxWidth:300},children:g.jsxs(gn,{sx:{p:2,bgcolor:"rgba(26, 26, 26, 0.95)",backdropFilter:"blur(10px)",border:"1px solid rgba(255,255,255,0.1)",color:"white"},children:[g.jsx(Z,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"bold"},children:t.name}),t.type==="layer"&&g.jsxs(g.Fragment,{children:[g.jsx(Z,{variant:"caption",color:"primary",sx:{display:"block",mb:1},children:"Layer Node"}),g.jsxs(Z,{variant:"body2",color:"text.secondary",sx:{mb:1},children:["Contains 8 traits that define ",t.layer.toLowerCase()," characteristics"]})]}),t.type==="trait"&&g.jsxs(g.Fragment,{children:[g.jsxs(Z,{variant:"caption",color:"primary",sx:{fontFamily:"monospace",display:"block",mb:1},children:["Bit ",t.bit,"  ",t.layer," Layer"]}),g.jsx(Z,{variant:"body2",color:"text.secondary",sx:{mb:1},children:t.description})]}),t.type==="entity"&&g.jsxs(g.Fragment,{children:[g.jsx(Z,{variant:"caption",color:"primary",sx:{fontFamily:"monospace",display:"block",mb:1},children:t.uht_code}),s?g.jsx(Y,{sx:{textAlign:"center",p:2},children:g.jsx(Z,{variant:"caption",color:"text.secondary",children:"Loading image..."})}):r?g.jsx(Y,{sx:{mt:1},children:g.jsx("img",{src:r.startsWith("http")?r:`${jH}${r}`,alt:t.name,style:{width:"100%",maxWidth:"200px",height:"auto",borderRadius:"4px",border:"1px solid rgba(255,255,255,0.2)"},onError:o=>{const l=o.target;l.style.display="none"}})}):g.jsx(Z,{variant:"caption",color:"text.secondary",children:"No image available"}),g.jsxs(Z,{variant:"caption",sx:{color:t.color,mt:1,display:"block"},children:[t.layer_dominance," Layer  ",t.trait_count," traits"]})]})]})})};function ZGe(){const{state:t,actions:e}=YE(),n=w.useRef(null),[r,i]=w.useState({nodes:[],links:[]}),[s,a]=w.useState({nodes:[],links:[]}),[o,l]=w.useState(null),[c,u]=w.useState({x:0,y:0}),[f,p]=w.useState(!1),[m,x]=w.useState(!0),[b,v]=w.useState(!0),[_,E]=w.useState(!0),[T,A]=w.useState("all"),[C,M]=w.useState("force"),[P,D]=w.useState("cube"),[N,L]=w.useState(50);w.useEffect(()=>{k()},[]);const k=async()=>{try{e.setLoading({graph:!0});const B=await Hv.graph.getFullGraph(50,.7),j=B.nodes.map(W=>({id:W.id,name:W.name,type:W.type,uht_code:W.uht_code,color:W.color,val:W.val,opacity:W.opacity,shape:W.shape,layer:W.layer,bit:W.bit,description:W.description,layer_dominance:W.layer_dominance,trait_count:W.trait_count})),G=B.links.map(W=>({source:W.source,target:W.target,type:W.type,distance:W.distance}));i({nodes:j,links:G}),a({nodes:j,links:G}),e.setGraphData({nodes:j,links:G}),console.log("Loaded trait-centric graph:",B.stats),console.log("Sample nodes:",j.slice(0,5)),console.log("Sample links:",G.slice(0,5))}catch(B){console.error("Failed to load graph data:",B),e.setError("Failed to load graph data from Neo4j")}finally{e.setLoading({graph:!1})}};w.useEffect(()=>{if(!r.nodes.length)return;let B=r.nodes.filter(W=>!(W.type==="layer"&&!m||W.type==="trait"&&!b||W.type==="entity"&&!_||T!=="all"&&W.layer&&W.layer!==T));const j=new Set(B.map(W=>W.id)),G=r.links.filter(W=>j.has(W.source)&&j.has(W.target));a({nodes:B,links:G})},[r,m,b,_,T]);const I=()=>{const B=n.current;if(B){switch(C){case"hierarchical":s.nodes.forEach(j=>{if(j.type==="layer"){const G=j.layer==="Physical"?0:j.layer==="Functional"?Math.PI/2:j.layer==="Abstract"?Math.PI:3*Math.PI/2;j.fx=Math.cos(G)*100,j.fy=Math.sin(G)*100,j.fz=0}else if(j.type==="trait"){const W=(j.layer==="Physical"?0:j.layer==="Functional"?Math.PI/2:j.layer==="Abstract"?Math.PI:3*Math.PI/2)+(j.bit||0)%8*Math.PI/4;j.fx=Math.cos(W)*200,j.fy=Math.sin(W)*200,j.fz=0}});break;case"layered":s.nodes.forEach(j=>{j.type==="layer"&&(j.fz=j.layer==="Physical"?-150:j.layer==="Functional"?-50:j.layer==="Abstract"?50:150,j.fx=0,j.fy=0)});break;default:s.nodes.forEach(j=>{delete j.fx,delete j.fy,delete j.fz})}B.refresh()}};w.useEffect(()=>{s.nodes.length>0&&setTimeout(I,100)},[C,s]);const F=B=>{B.type==="entity"&&Hv.entities.getEntity(B.id).then(j=>{e.setSelectedEntity(j)}).catch(j=>{console.error("Failed to load entity:",j)})},z=B=>{l(B)},H=B=>{u({x:B.clientX,y:B.clientY})};return w.useEffect(()=>(document.addEventListener("mousemove",H),()=>{document.removeEventListener("mousemove",H)}),[]),g.jsxs(Y,{sx:{height:"100%",position:"relative"},children:[g.jsx(Gt,{sx:{position:"absolute",top:16,left:16,zIndex:1e3,bgcolor:"rgba(26, 26, 26, 0.9)","&:hover":{bgcolor:"rgba(26, 26, 26, 1)"}},onClick:()=>p(!f),children:g.jsx(SZ,{sx:{color:"white"}})}),g.jsx(Y,{sx:{height:"100%",width:"100%"},children:s.nodes.length>0?g.jsxs(g.Fragment,{children:[g.jsxs(Z,{variant:"body2",sx:{position:"absolute",top:60,left:20,color:"white",zIndex:1e3},children:["Rendering ",s.nodes.length," nodes, ",s.links.length," links"]}),g.jsx(AF,{ref:n,graphData:s,nodeLabel:"name",nodeColor:"color",nodeVal:"val",nodeOpacity:1,nodeResolution:12,nodeRelSize:6,onNodeClick:F,onNodeHover:z,linkOpacity:.7,linkWidth:B=>B.type==="trait_to_layer"?2:1,linkColor:B=>B.type==="trait_to_layer"?"#888":"#666",backgroundColor:"rgba(30, 30, 40, 1)",showNavInfo:!1,controlType:"orbit",enableNodeDrag:!1,d3AlphaDecay:.01,d3VelocityDecay:.3,width:window.innerWidth-240,height:window.innerHeight-64})]}):g.jsx(Y,{sx:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:g.jsx(xi,{children:g.jsxs(yi,{sx:{textAlign:"center",p:4},children:[g.jsx(Z,{variant:"h6",gutterBottom:!0,children:"3D Knowledge Graph"}),g.jsx(Z,{variant:"body2",color:"text.secondary",sx:{mb:2},children:t.loading.graph?"Loading graph data...":"No entities to display"}),!t.loading.graph&&g.jsx(un,{variant:"outlined",onClick:k,children:"Reload Graph"})]})})})}),t.selectedEntity&&g.jsxs(gn,{sx:{position:"absolute",top:16,right:16,width:300,p:2,bgcolor:"rgba(26, 26, 26, 0.95)",backdropFilter:"blur(10px)"},children:[g.jsx(Z,{variant:"h6",gutterBottom:!0,children:t.selectedEntity.name}),g.jsx(Z,{variant:"h5",color:"primary",sx:{fontFamily:"monospace",mb:1},children:t.selectedEntity.uht_code}),g.jsx(Z,{variant:"body2",color:"text.secondary",children:t.selectedEntity.description})]}),g.jsx(vK,{anchor:"left",open:f,onClose:()=>p(!1),sx:{"& .MuiDrawer-paper":{width:320,bgcolor:"rgba(26, 26, 26, 0.95)",backdropFilter:"blur(10px)",color:"white",borderRight:"1px solid rgba(255,255,255,0.1)"}},children:g.jsxs(Y,{sx:{p:2},children:[g.jsxs(Z,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center"},children:[g.jsx(Ok,{sx:{mr:1}}),"Graph Controls"]}),g.jsx(bs,{sx:{mb:2,bgcolor:"rgba(255,255,255,0.1)"}}),g.jsx(Z,{variant:"subtitle2",gutterBottom:!0,children:"Node Visibility"}),g.jsxs(Tp,{dense:!0,children:[g.jsx(Cf,{children:g.jsx(Ef,{control:g.jsx(kg,{checked:m,onChange:B=>x(B.target.checked),color:"primary"}),label:`Layer Nodes (${r.nodes.filter(B=>B.type==="layer").length})`})}),g.jsx(Cf,{children:g.jsx(Ef,{control:g.jsx(kg,{checked:b,onChange:B=>v(B.target.checked),color:"primary"}),label:`Trait Nodes (${r.nodes.filter(B=>B.type==="trait").length})`})}),g.jsx(Cf,{children:g.jsx(Ef,{control:g.jsx(kg,{checked:_,onChange:B=>E(B.target.checked),color:"primary"}),label:`Entity Nodes (${r.nodes.filter(B=>B.type==="entity").length})`})})]}),g.jsx(bs,{sx:{my:2,bgcolor:"rgba(255,255,255,0.1)"}}),g.jsx(Z,{variant:"subtitle2",gutterBottom:!0,children:"Layer Filter"}),g.jsx(Tf,{fullWidth:!0,size:"small",sx:{mb:2},children:g.jsxs(Ku,{value:T,onChange:B=>A(B.target.value),sx:{color:"white","& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,255,255,0.3)"}},children:[g.jsx(nr,{value:"all",children:"All Layers"}),g.jsx(nr,{value:"Physical",children:"Physical"}),g.jsx(nr,{value:"Functional",children:"Functional"}),g.jsx(nr,{value:"Abstract",children:"Abstract"}),g.jsx(nr,{value:"Social",children:"Social"})]})}),g.jsx(Z,{variant:"subtitle2",gutterBottom:!0,children:"Layout"}),g.jsxs(lD,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[g.jsx(un,{onClick:()=>M("force"),variant:C==="force"?"contained":"outlined",startIcon:g.jsx(Bwe,{}),children:"Force"}),g.jsx(un,{onClick:()=>M("hierarchical"),variant:C==="hierarchical"?"contained":"outlined",startIcon:g.jsx(gZ,{}),children:"Circular"}),g.jsx(un,{onClick:()=>M("layered"),variant:C==="layered"?"contained":"outlined",startIcon:g.jsx(Rwe,{}),children:"Layered"})]}),g.jsx(Z,{variant:"subtitle2",gutterBottom:!0,children:"Entity Shape"}),g.jsxs(lD,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[g.jsx(un,{onClick:()=>D("cube"),variant:P==="cube"?"contained":"outlined",startIcon:g.jsx(Fwe,{}),children:"Cube"}),g.jsx(un,{onClick:()=>D("diamond"),variant:P==="diamond"?"contained":"outlined",startIcon:g.jsx(Twe,{}),children:"Diamond"}),g.jsx(un,{onClick:()=>D("sphere"),variant:P==="sphere"?"contained":"outlined",startIcon:g.jsx(kwe,{}),children:"Sphere"})]}),g.jsxs(Z,{variant:"subtitle2",gutterBottom:!0,children:["Link Distance: ",N]}),g.jsx(_k,{value:N,onChange:(B,j)=>L(j),min:20,max:100,step:5,sx:{mb:2,color:"primary.main"}}),g.jsxs(gn,{sx:{p:2,bgcolor:"rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.1)"},children:[g.jsxs(Z,{variant:"caption",display:"block",children:["Visible: ",s.nodes.length," nodes, ",s.links.length," links"]}),g.jsxs(Z,{variant:"caption",display:"block",children:["Total: ",r.nodes.length," nodes, ",r.links.length," links"]})]})]})}),g.jsx(KGe,{node:o,position:c,visible:!!o})]})}const ka=[{name:"Physical",color:"#FF6B35",bits:[1,2,3,4,5,6,7,8]},{name:"Functional",color:"#00E5FF",bits:[9,10,11,12,13,14,15,16]},{name:"Abstract",color:"#9C27B0",bits:[17,18,19,20,21,22,23,24]},{name:"Social",color:"#4CAF50",bits:[25,26,27,28,29,30,31,32]}],Vl={Physical:"#FF6B35",Functional:"#00E5FF",Abstract:"#9C27B0",Social:"#4CAF50"};function K0(t){if(!t||t.length!==8)return"0".repeat(32);try{return parseInt(t,16).toString(2).padStart(32,"0")}catch{return"0".repeat(32)}}function QGe(t){if(!t||t.length!==32)return"00000000";try{return parseInt(t,2).toString(16).toUpperCase().padStart(8,"0")}catch{return"00000000"}}function zH(t,e){const n=K0(t),r=K0(e);let i=0;for(let s=0;s<32;s++)n[s]!==r[s]&&i++;return i}function I2(t){const e=K0(t),n=[];for(let r=0;r<32;r++)e[r]==="1"&&n.push(r+1);return n}function XC(t){const e=K0(t),n=[0,0,0,0];for(let r=0;r<32;r++)if(e[r]==="1"){const i=Math.floor(r/8);n[i]++}return n}function Z0(t){const e=XC(t),n=Math.max(...e),r=e.indexOf(n);return ka[r].name}function JGe(t,e){const n=new Set(I2(t)),r=new Set(I2(e));if(n.size===0&&r.size===0)return 1;let i=0;n.forEach(a=>{r.has(a)&&i++});const s=n.size+r.size-i;return s===0?0:i/s}function $H(){return"X".repeat(32)}function eVe(t){let e=0;for(const n of t)n!=="X"&&n!=="x"&&e++;return e}const une="uht_recent_entities",tVe=10,dne=()=>{try{const t=localStorage.getItem(une);return t?JSON.parse(t):[]}catch{return[]}},nVe=t=>{try{const n=dne().filter(i=>i.uuid!==t.uuid),r=[t,...n].slice(0,tVe);localStorage.setItem(une,JSON.stringify(r))}catch{}};function rVe({selectedEntities:t,onSelect:e,onRemove:n,maxSelections:r=4,placeholder:i="Search entities...",label:s,disabled:a=!1}){const[o,l]=w.useState(""),[c,u]=w.useState([]),[f,p]=w.useState(!1),[m,x]=w.useState(!1),[b,v]=w.useState(!1),_=w.useRef(null),E=w.useRef(null),T=dne(),A=t.length<r,C=w.useCallback(async I=>{if(I.length<2){u([]),v(!0);return}p(!0),v(!1);try{const F=await vo.searchEntitiesByName(I,10),z=new Set(t.map(B=>B.uuid)),H=F.filter(B=>!z.has(B.uuid));u(H)}catch(F){console.error("Entity search failed:",F),u([])}finally{p(!1)}},[t]);w.useEffect(()=>(E.current&&clearTimeout(E.current),E.current=setTimeout(()=>{C(o)},300),()=>{E.current&&clearTimeout(E.current)}),[o,C]);const M=I=>{if(!A)return;const F={uuid:I.uuid,name:I.name,uht_code:I.uht_code,image_url:I.image_url};nVe(F),e(F),l(""),u([]),x(!1)},P=()=>{x(!0),o.length<2&&v(!0)},D=()=>{x(!1)},N=I=>{const F=Z0(I);return Vl[F]||"#757575"},L=T.filter(I=>!t.some(F=>F.uuid===I.uuid)),k=m&&A&&(c.length>0||b&&L.length>0||f);return g.jsxs(Y,{children:[t.length>0&&g.jsx(Y,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:1.5},children:t.map(I=>g.jsx(Dt,{label:I.name,onDelete:()=>n(I.uuid),deleteIcon:g.jsx(mx,{}),avatar:I.image_url?g.jsx(Jo,{src:I.image_url,alt:I.name}):g.jsx(Jo,{sx:{bgcolor:N(I.uht_code)},children:I.name[0]}),sx:{borderColor:N(I.uht_code),borderWidth:2,borderStyle:"solid","& .MuiChip-deleteIcon":{color:"text.secondary","&:hover":{color:"error.main"}}}},I.uuid))}),g.jsx(Y,{ref:_,children:g.jsx(wi,{fullWidth:!0,size:"small",label:s,placeholder:A?i:`Maximum ${r} entities selected`,value:o,onChange:I=>l(I.target.value),onFocus:P,disabled:a||!A,InputProps:{startAdornment:g.jsx(Ua,{position:"start",children:g.jsx(vb,{sx:{color:"text.secondary"}})}),endAdornment:g.jsx(Ua,{position:"end",children:f?g.jsx(lr,{size:20}):o?g.jsx(Gt,{size:"small",onClick:()=>{l(""),u([])},children:g.jsx(Wl,{fontSize:"small"})}):null})},sx:{"& .MuiOutlinedInput-root":{backgroundColor:"rgba(255,255,255,0.03)"}}})}),g.jsx(ck,{open:k,anchorEl:_.current,placement:"bottom-start",style:{zIndex:1300,width:_.current?.offsetWidth},children:g.jsx(bxe,{onClickAway:D,children:g.jsxs(gn,{elevation:8,sx:{mt:.5,maxHeight:300,overflow:"auto",border:"1px solid",borderColor:"divider"},children:[b&&L.length>0&&g.jsxs(g.Fragment,{children:[g.jsxs(Y,{sx:{px:2,py:1,display:"flex",alignItems:"center",gap:1},children:[g.jsx(Pwe,{sx:{fontSize:16,color:"text.secondary"}}),g.jsx(Z,{variant:"caption",color:"text.secondary",children:"Recent"})]}),g.jsx(Tp,{dense:!0,disablePadding:!0,children:L.map(I=>g.jsx(Cf,{disablePadding:!0,children:g.jsxs(mb,{onClick:()=>M(I),children:[g.jsx(KT,{children:I.image_url?g.jsx(Jo,{src:I.image_url,alt:I.name,sx:{width:32,height:32}}):g.jsx(Jo,{sx:{width:32,height:32,bgcolor:N(I.uht_code),fontSize:"0.875rem"},children:I.name[0]})}),g.jsx(Ba,{primary:I.name,secondary:I.uht_code,primaryTypographyProps:{variant:"body2"},secondaryTypographyProps:{variant:"caption",fontFamily:"monospace"}})]})},I.uuid))})]}),c.length>0&&g.jsx(Tp,{dense:!0,disablePadding:!0,children:c.map(I=>g.jsx(Cf,{disablePadding:!0,children:g.jsxs(mb,{onClick:()=>M(I),children:[g.jsx(KT,{children:I.image_url?g.jsx(Jo,{src:I.image_url,alt:I.name,sx:{width:32,height:32}}):g.jsx(Jo,{sx:{width:32,height:32,bgcolor:N(I.uht_code),fontSize:"0.875rem"},children:I.name[0]})}),g.jsx(Ba,{primary:I.name,secondary:g.jsxs(Y,{component:"span",sx:{display:"flex",gap:1,alignItems:"center"},children:[g.jsx(Z,{component:"span",variant:"caption",fontFamily:"monospace",color:"primary.main",children:I.uht_code}),I.description&&g.jsx(Z,{component:"span",variant:"caption",color:"text.secondary",sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:200},children:I.description})]}),primaryTypographyProps:{variant:"body2"}})]})},I.uuid))}),!f&&o.length>=2&&c.length===0&&g.jsx(Y,{sx:{p:2,textAlign:"center"},children:g.jsxs(Z,{variant:"body2",color:"text.secondary",children:['No entities found for "',o,'"']})})]})})}),r>1&&g.jsxs(Z,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:[t.length," / ",r," entities selected"]})]})}const GH=["#00E5FF","#FF6B35","#9C27B0","#4CAF50"];function iVe({entity:t,index:e,onRemove:n,isCompact:r=!1}){const i=yl(),s=Z0(t.uht_code),a=Vl[s]||"#757575",o=GH[e%GH.length],l=XC(t.uht_code),c=l.reduce((u,f)=>u+f,0);return g.jsxs(xi,{sx:{position:"relative",borderTop:`3px solid ${o}`,"&:hover .remove-btn":{opacity:1}},children:[g.jsx(Gt,{className:"remove-btn",size:"small",onClick:n,sx:{position:"absolute",top:4,right:4,opacity:0,transition:"opacity 0.2s",bgcolor:"background.paper","&:hover":{bgcolor:"error.dark"}},children:g.jsx(mx,{fontSize:"small"})}),g.jsxs(yi,{sx:{p:r?1.5:2},children:[g.jsxs(Y,{sx:{display:"flex",gap:2,alignItems:"flex-start"},children:[t.image_url?g.jsx(Jo,{src:t.image_url,alt:t.name,variant:"rounded",sx:{width:r?48:64,height:r?48:64,border:`2px solid ${o}`}}):g.jsx(Jo,{variant:"rounded",sx:{width:r?48:64,height:r?48:64,bgcolor:`${o}30`,color:o,fontSize:r?"1.25rem":"1.5rem"},children:t.name[0]}),g.jsxs(Y,{sx:{flex:1,minWidth:0},children:[g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:1},children:[g.jsx(Z,{variant:r?"body2":"subtitle1",sx:{fontWeight:600,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.name}),g.jsx(Jt,{title:"Open entity details",children:g.jsx(Gt,{size:"small",onClick:()=>i(`/entity/${t.uuid}`),sx:{p:.25},children:g.jsx(Yf,{sx:{fontSize:14}})})})]}),g.jsx(Z,{variant:"caption",color:"primary.main",fontFamily:"monospace",sx:{display:"block",mb:.5},children:t.uht_code}),g.jsxs(Y,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:[g.jsx(Dt,{label:s,size:"small",sx:{height:20,fontSize:"0.65rem",bgcolor:`${a}30`,color:a}}),g.jsx(Dt,{label:`${c} traits`,size:"small",sx:{height:20,fontSize:"0.65rem",bgcolor:"rgba(255,255,255,0.1)"}})]})]})]}),g.jsx(Y,{sx:{display:"flex",gap:.5,mt:1.5},children:["Physical","Functional","Abstract","Social"].map((u,f)=>g.jsxs(Y,{sx:{flex:1,textAlign:"center",py:.5,borderRadius:.5,bgcolor:`${Vl[u]}20`,borderBottom:`2px solid ${Vl[u]}`},children:[g.jsx(Z,{variant:"caption",sx:{display:"block",fontSize:"0.6rem",color:Vl[u],fontWeight:500},children:u[0]}),g.jsx(Z,{variant:"body2",fontWeight:600,children:l[f]})]},u))})]})]})}const sVe={1:"Physical Object",2:"Synthetic",3:"Biological/Biomimetic",4:"Powered",5:"Structural",6:"Observable",7:"Physical Medium",8:"Active",9:"Intentionally Designed",10:"Outputs Effect",11:"Processes Signals/Logic",12:"State-Transforming",13:"Human-Interactive",14:"System-integrated",15:"Functionally Autonomous",16:"System-Essential",17:"Symbolic",18:"Signalling",19:"Rule-governed",20:"Compositional",21:"Normative",22:"Meta",23:"Temporal",24:"Digital/Virtual",25:"Social Construct",26:"Institutionally Defined",27:"Identity-Linked",28:"Regulated",29:"Economically Significant",30:"Politicised",31:"Ritualised",32:"Ethically Significant"};function aVe({entities:t,isCompact:e=!1}){const[n,r]=w.useState(new Set([0,1,2,3])),i=l=>{r(c=>{const u=new Set(c);return u.has(l)?u.delete(l):u.add(l),u})},s=w.useMemo(()=>t.map(l=>K0(l.uht_code)),[t]),a=w.useMemo(()=>Array.from({length:32},(l,c)=>{const u=c,f=s.map(m=>m[u]==="1"),p=f.filter(Boolean).length;return{bit:c+1,name:sVe[c+1]||`Trait ${c+1}`,values:f,allActive:p===t.length,noneActive:p===0,someActive:p>0&&p<t.length}}),[s,t.length]),o=(l,c)=>c.allActive?"#4CAF50":c.noneActive?"rgba(255,255,255,0.1)":l?"#FF9800":"rgba(255,255,255,0.05)";return g.jsxs(Y,{children:[ka.map((l,c)=>{const u=n.has(c),f=a.slice(c*8,(c+1)*8),p=f.filter(m=>m.someActive||m.allActive).length;return g.jsxs(Y,{sx:{mb:1},children:[g.jsxs(Y,{onClick:()=>i(c),sx:{display:"flex",alignItems:"center",gap:1,p:1,bgcolor:`${l.color}15`,borderLeft:`3px solid ${l.color}`,cursor:"pointer","&:hover":{bgcolor:`${l.color}25`}},children:[g.jsx(Gt,{size:"small",sx:{p:0},children:u?g.jsx(w_,{}):g.jsx(gx,{})}),g.jsx(Z,{variant:"subtitle2",sx:{color:l.color,fontWeight:600,flex:1},children:l.name}),g.jsxs(Z,{variant:"caption",color:"text.secondary",children:[p,"/8 traits active"]})]}),g.jsx(ld,{in:u,children:g.jsx(Y,{sx:{borderLeft:`3px solid ${l.color}30`},children:f.map(m=>g.jsxs(Y,{sx:{display:"flex",alignItems:"center",borderBottom:"1px solid rgba(255,255,255,0.05)","&:hover":{bgcolor:"rgba(255,255,255,0.03)"}},children:[g.jsx(Y,{sx:{width:e?100:140,p:1,flexShrink:0,borderRight:"1px solid rgba(255,255,255,0.1)"},children:g.jsx(Jt,{title:`Bit ${m.bit}`,placement:"left",children:g.jsx(Z,{variant:"caption",sx:{display:"block",color:m.noneActive?"text.disabled":"text.primary"},children:m.name})})}),g.jsx(Y,{sx:{display:"flex",flex:1},children:m.values.map((x,b)=>g.jsx(Jt,{title:`${t[b].name}: ${x?"Yes":"No"}`,children:g.jsx(Y,{sx:{flex:1,height:e?28:36,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:o(x,m),borderRight:b<t.length-1?"1px solid rgba(0,0,0,0.3)":"none",transition:"background-color 0.2s"},children:g.jsx(Z,{variant:"caption",sx:{fontWeight:600,color:x?m.allActive?"white":"black":"text.disabled",fontSize:e?"0.65rem":"0.75rem"},children:x?"1":"0"})})},b))}),g.jsxs(Y,{sx:{width:24,display:"flex",justifyContent:"center",borderLeft:"1px solid rgba(255,255,255,0.1)"},children:[m.allActive&&g.jsx(Y,{sx:{width:8,height:8,borderRadius:"50%",bgcolor:"#4CAF50"}}),m.someActive&&g.jsx(Y,{sx:{width:8,height:8,borderRadius:"50%",bgcolor:"#FF9800"}})]})]},m.bit))})})]},l.name)}),g.jsxs(Y,{sx:{display:"flex",gap:3,mt:2,pt:2,borderTop:"1px solid rgba(255,255,255,0.1)",flexWrap:"wrap"},children:[g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:1},children:[g.jsx(Y,{sx:{width:16,height:16,bgcolor:"#4CAF50",borderRadius:.5}}),g.jsx(Z,{variant:"caption",color:"text.secondary",children:"All entities share"})]}),g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:1},children:[g.jsx(Y,{sx:{width:16,height:16,bgcolor:"#FF9800",borderRadius:.5}}),g.jsx(Z,{variant:"caption",color:"text.secondary",children:"Some entities have"})]}),g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:1},children:[g.jsx(Y,{sx:{width:16,height:16,bgcolor:"rgba(255,255,255,0.1)",borderRadius:.5}}),g.jsx(Z,{variant:"caption",color:"text.secondary",children:"None have"})]})]})]})}const VH=["#00E5FF","#FF6B35","#9C27B0","#4CAF50"];function oVe({entities:t,isCompact:e=!1}){const n=w.useMemo(()=>t.map(s=>K0(s.uht_code)),[t]),r=w.useMemo(()=>Array.from({length:32},(s,a)=>{const o=n.map(c=>c[a]==="1"),l=o.filter(Boolean).length;return{bit:a+1,values:o,activeCount:l,allActive:l===t.length,noneActive:l===0,percentage:l/t.length*100}}),[n,t.length]),i=s=>s.allActive?"#4CAF50":s.noneActive?"rgba(255,255,255,0.1)":`rgba(255, 152, 0, ${.3+s.percentage/100*.7})`;return g.jsxs(Y,{children:[g.jsx(Y,{sx:{display:"flex",flexDirection:"column",gap:.5},children:ka.map((s,a)=>g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:1},children:[g.jsx(Z,{variant:"caption",sx:{width:e?16:24,color:s.color,fontWeight:700,fontSize:e?"0.65rem":"0.75rem"},children:s.name[0]}),g.jsx(Y,{sx:{display:"flex",gap:.5,flex:1},children:Array.from({length:8},(o,l)=>{const c=a*8+l,u=r[c];return g.jsx(Jt,{title:g.jsxs(Y,{children:[g.jsxs(Z,{variant:"caption",sx:{fontWeight:600},children:["Bit ",u.bit," (",s.name,")"]}),g.jsx("br",{}),t.map((f,p)=>g.jsxs(Z,{variant:"caption",sx:{display:"block"},children:[f.name,": ",u.values[p]?"1":"0"]},f.uuid))]}),children:g.jsx(Y,{sx:{flex:1,aspectRatio:"1",maxWidth:e?28:40,bgcolor:i(u),borderRadius:.5,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",border:u.allActive||u.noneActive?"none":"1px dashed rgba(255,255,255,0.3)",cursor:"pointer",transition:"transform 0.2s","&:hover":{transform:"scale(1.1)",zIndex:1}},children:g.jsxs(Z,{variant:"caption",sx:{fontWeight:700,fontSize:e?"0.6rem":"0.7rem",color:u.allActive?"white":"text.secondary"},children:[u.activeCount,"/",t.length]})})},l)})})]},s.name))}),g.jsxs(Y,{sx:{mt:3},children:[g.jsx(Z,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:1},children:"Individual Codes"}),t.map((s,a)=>{const o=n[a];return g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[g.jsx(Y,{sx:{width:8,height:8,borderRadius:"50%",bgcolor:VH[a%VH.length],flexShrink:0}}),g.jsx(Z,{variant:"caption",sx:{width:e?60:100,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flexShrink:0},children:s.name}),g.jsx(Y,{sx:{display:"flex",flex:1,fontFamily:"monospace"},children:ka.map((l,c)=>g.jsx(Z,{variant:"caption",sx:{color:l.color,letterSpacing:"1px",fontSize:e?"0.6rem":"0.7rem",mr:.5},children:o.slice(c*8,(c+1)*8)},l.name))})]},s.uuid)})]}),g.jsxs(Y,{sx:{mt:2,p:1.5,bgcolor:"rgba(255,255,255,0.05)",borderRadius:1},children:[g.jsx(Z,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:.5},children:"Consensus (bits active in all entities)"}),g.jsx(Y,{sx:{display:"flex",fontFamily:"monospace"},children:ka.map((s,a)=>g.jsx(Z,{variant:"body2",sx:{color:s.color,letterSpacing:"2px",fontWeight:600,mr:1},children:r.slice(a*8,(a+1)*8).map(o=>o.allActive?"1":"0").join("")},s.name))})]})]})}const hf=["#00E5FF","#FF6B35","#9C27B0","#4CAF50"];function lVe({entities:t,isCompact:e=!1}){const n=w.useMemo(()=>{const a=[];for(let o=0;o<t.length;o++)for(let l=o+1;l<t.length;l++)a.push({entity1:t[o],entity2:t[l],index1:o,index2:l,hamming:zH(t[o].uht_code,t[l].uht_code),jaccard:JGe(t[o].uht_code,t[l].uht_code)});return a},[t]),r=w.useMemo(()=>{const a=t.map(f=>new Set(I2(f.uht_code)));let o=new Set(a[0]);for(let f=1;f<a.length;f++)o=new Set([...o].filter(p=>a[f].has(p)));const l=new Set(a.flatMap(f=>[...f])),c=t.reduce((f,p)=>f+I2(p.uht_code).length,0)/t.length,u=t.map(f=>XC(f.uht_code));return{sharedCount:o.size,unionCount:l.size,avgTraits:c.toFixed(1),avgHamming:n.length>0?(n.reduce((f,p)=>f+p.hamming,0)/n.length).toFixed(1):"0",avgJaccard:n.length>0?(n.reduce((f,p)=>f+p.jaccard,0)/n.length*100).toFixed(0):"0",layerDistributions:u}},[t,n]),i=a=>{const o=a/32;return o<.2?"#4CAF50":o<.4?"#8BC34A":o<.6?"#FFC107":o<.8?"#FF9800":"#F44336"},s=a=>a>.8?"#4CAF50":a>.6?"#8BC34A":a>.4?"#FFC107":a>.2?"#FF9800":"#F44336";return g.jsxs(Y,{children:[g.jsxs(Y,{sx:{display:"grid",gridTemplateColumns:e?"repeat(2, 1fr)":"repeat(4, 1fr)",gap:2,mb:3},children:[g.jsx(Yw,{label:"Shared Traits",value:r.sharedCount.toString(),subtitle:`of ${r.unionCount} total`,color:"#4CAF50",isCompact:e}),g.jsx(Yw,{label:"Avg Traits",value:r.avgTraits,subtitle:"per entity",color:"#00E5FF",isCompact:e}),g.jsx(Yw,{label:"Avg Distance",value:r.avgHamming,subtitle:"Hamming bits",color:"#FF9800",isCompact:e}),g.jsx(Yw,{label:"Avg Similarity",value:`${r.avgJaccard}%`,subtitle:"Jaccard index",color:"#9C27B0",isCompact:e})]}),t.length>2&&g.jsxs(Y,{sx:{mb:3},children:[g.jsx(Z,{variant:"subtitle2",gutterBottom:!0,sx:{fontWeight:600},children:"Distance Matrix (Hamming)"}),g.jsxs(Y,{sx:{display:"grid",gridTemplateColumns:`auto repeat(${t.length}, 1fr)`,gap:.5},children:[g.jsx(Y,{})," ",t.map((a,o)=>g.jsx(Jt,{title:a.name,children:g.jsx(Y,{sx:{display:"flex",alignItems:"center",justifyContent:"center",p:.5},children:g.jsx(Y,{sx:{width:12,height:12,borderRadius:"50%",bgcolor:hf[o%hf.length]}})})},a.uuid)),t.map((a,o)=>g.jsxs(g.Fragment,{children:[g.jsx(Jt,{title:a.name,children:g.jsx(Y,{sx:{display:"flex",alignItems:"center",justifyContent:"center",p:.5},children:g.jsx(Y,{sx:{width:12,height:12,borderRadius:"50%",bgcolor:hf[o%hf.length]}})})},`label-${a.uuid}`),t.map((l,c)=>{const u=o===c?0:zH(a.uht_code,l.uht_code);return g.jsx(Jt,{title:o===c?"Same entity":`${a.name}  ${l.name}: ${u} bits`,children:g.jsx(Y,{sx:{display:"flex",alignItems:"center",justifyContent:"center",p:1,bgcolor:o===c?"rgba(255,255,255,0.05)":i(u),borderRadius:.5,minHeight:36},children:g.jsx(Z,{variant:"caption",sx:{fontWeight:600,color:o===c?"text.disabled":"black"},children:o===c?"":u})})},`${a.uuid}-${l.uuid}`)})]}))]})]}),n.length>0&&n.length<=6&&g.jsxs(Y,{children:[g.jsx(Z,{variant:"subtitle2",gutterBottom:!0,sx:{fontWeight:600},children:"Pairwise Comparison"}),g.jsx(Y,{sx:{display:"flex",flexDirection:"column",gap:1},children:n.map(a=>g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:2,p:1.5,bgcolor:"rgba(255,255,255,0.03)",borderRadius:1},children:[g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:.5,minWidth:60},children:[g.jsx(Y,{sx:{width:10,height:10,borderRadius:"50%",bgcolor:hf[a.index1%hf.length]}}),g.jsx(Z,{variant:"caption",color:"text.secondary",children:""}),g.jsx(Y,{sx:{width:10,height:10,borderRadius:"50%",bgcolor:hf[a.index2%hf.length]}})]}),g.jsx(Y,{sx:{flex:1,minWidth:0},children:g.jsxs(Z,{variant:"caption",sx:{display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[a.entity1.name," vs ",a.entity2.name]})}),g.jsxs(Y,{sx:{display:"flex",gap:2},children:[g.jsx(Jt,{title:"Hamming distance (bits that differ)",children:g.jsxs(Y,{sx:{textAlign:"center"},children:[g.jsx(Z,{variant:"body2",sx:{fontWeight:700,color:i(a.hamming)},children:a.hamming}),g.jsx(Z,{variant:"caption",color:"text.secondary",children:"bits"})]})}),g.jsx(Jt,{title:"Jaccard similarity (intersection / union)",children:g.jsxs(Y,{sx:{textAlign:"center"},children:[g.jsxs(Z,{variant:"body2",sx:{fontWeight:700,color:s(a.jaccard)},children:[(a.jaccard*100).toFixed(0),"%"]}),g.jsx(Z,{variant:"caption",color:"text.secondary",children:"similar"})]})})]})]},`${a.entity1.uuid}-${a.entity2.uuid}`))})]})]})}function Yw({label:t,value:e,subtitle:n,color:r,isCompact:i}){return g.jsxs(Y,{sx:{p:i?1.5:2,bgcolor:`${r}15`,borderRadius:1,borderLeft:`3px solid ${r}`},children:[g.jsx(Z,{variant:"caption",color:"text.secondary",sx:{display:"block"},children:t}),g.jsx(Z,{variant:i?"h6":"h5",sx:{fontWeight:700,color:r,lineHeight:1.2},children:e}),g.jsx(Z,{variant:"caption",color:"text.secondary",children:n})]})}function cVe(){const{isMobile:t,isTablet:e}=tc(),n=t||e,[r,i]=_E(),[s,a]=w.useState([]),[o,l]=w.useState([]),[c,u]=w.useState(!1),[f,p]=w.useState(null);w.useEffect(()=>{const T=r.get("entities");if(T){const A=T.split(",").filter(Boolean);A.length>0&&m(A)}},[]),w.useEffect(()=>{if(s.length===0){l([]);return}(async()=>{u(!0),p(null);try{const A=await Promise.all(s.map(C=>vo.getEntity(C.uuid)));l(A)}catch(A){console.error("Failed to load entities:",A),p("Failed to load entity details")}finally{u(!1)}})()},[s]);const m=async T=>{u(!0);try{const A=await Promise.all(T.slice(0,4).map(M=>vo.getEntity(M))),C=A.map(M=>({uuid:M.uuid,name:M.name,uht_code:M.uht_code,image_url:M.image_url}));a(C),l(A)}catch(A){console.error("Failed to load entities from URL:",A),p("Failed to load entities from URL")}finally{u(!1)}},x=w.useCallback(T=>{a(A=>[...A,T])},[]),b=w.useCallback(T=>{a(A=>A.filter(C=>C.uuid!==T))},[]),v=w.useCallback(()=>{a([]),i({})},[i]),_=w.useCallback(()=>{const T=s.map(C=>C.uuid).join(","),A=`${window.location.origin}/comparison?entities=${T}`;navigator.clipboard.writeText(A)},[s]),E=o.length>=2;return g.jsxs(Y,{sx:{height:"100%",display:"flex",flexDirection:"column",overflow:"hidden"},children:[g.jsxs(gn,{sx:{p:n?1.5:2,borderRadius:0,borderBottom:"1px solid rgba(0, 229, 255, 0.3)",flexShrink:0},children:[g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[g.jsx(Cp,{color:"primary",sx:{fontSize:n?20:24}}),g.jsx(Z,{variant:n?"subtitle1":"h6",color:"primary",sx:{fontWeight:600},children:"Entity Comparison"}),g.jsx(Dt,{label:`${s.length} selected`,size:"small",color:"primary",variant:"outlined"}),s.length>0&&g.jsxs(Y,{sx:{ml:"auto",display:"flex",gap:1},children:[g.jsx(Jt,{title:"Share comparison",children:g.jsx(Gt,{size:"small",onClick:_,disabled:s.length<2,children:g.jsx(bb,{fontSize:"small"})})}),g.jsx(Jt,{title:"Clear all",children:g.jsx(Gt,{size:"small",onClick:v,children:g.jsx(Wl,{fontSize:"small"})})})]})]}),g.jsx(rVe,{selectedEntities:s,onSelect:x,onRemove:b,maxSelections:4,placeholder:"Search for entities to compare...",label:"Add entities"}),s.length===1&&g.jsx(Z,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:"Add at least one more entity to compare"})]}),g.jsxs(Y,{sx:{flexGrow:1,overflow:"auto",p:n?1.5:2},children:[c&&g.jsx(Y,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:200},children:g.jsx(lr,{})}),f&&g.jsx(mi,{severity:"error",sx:{mb:2},children:f}),!c&&s.length===0&&g.jsxs(Y,{sx:{textAlign:"center",py:8},children:[g.jsx(Cp,{sx:{fontSize:64,color:"text.secondary",mb:2}}),g.jsx(Z,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"Compare Entities"}),g.jsx(Z,{variant:"body2",color:"text.secondary",children:"Search and select 2-4 entities to compare their UHT classifications side by side."})]}),!c&&E&&g.jsxs(Y,{sx:{display:"flex",flexDirection:"column",gap:3},children:[g.jsx(Y,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:(o.length===2,"repeat(2, 1fr)"),md:`repeat(${Math.min(o.length,4)}, 1fr)`},gap:2},children:o.map((T,A)=>g.jsx(iVe,{entity:T,index:A,onRemove:()=>b(T.uuid),isCompact:n},T.uuid))}),g.jsx(bs,{}),g.jsx(xi,{children:g.jsxs(yi,{children:[g.jsx(Z,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:600},children:"Comparison Metrics"}),g.jsx(lVe,{entities:o,isCompact:n})]})}),g.jsx(xi,{children:g.jsxs(yi,{children:[g.jsx(Z,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:600},children:"Binary Overlay"}),g.jsx(oVe,{entities:o,isCompact:n})]})}),g.jsx(xi,{children:g.jsxs(yi,{sx:{p:n?1.5:2},children:[g.jsx(Z,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:600},children:"Trait Comparison"}),g.jsx(aVe,{entities:o,isCompact:n})]})})]})]})]})}const uVe={1:"Physical Object",2:"Synthetic",3:"Biological/Biomimetic",4:"Powered",5:"Structural",6:"Observable",7:"Physical Medium",8:"Active",9:"Intentionally Designed",10:"Outputs Effect",11:"Processes Signals/Logic",12:"State-Transforming",13:"Human-Interactive",14:"System-integrated",15:"Functionally Autonomous",16:"System-Essential",17:"Symbolic",18:"Signalling",19:"Rule-governed",20:"Compositional",21:"Normative",22:"Meta",23:"Temporal",24:"Digital/Virtual",25:"Social Construct",26:"Institutionally Defined",27:"Identity-Linked",28:"Regulated",29:"Economically Significant",30:"Politicised",31:"Ritualised",32:"Ethically Significant"};function dVe({pattern:t,onChange:e,isCompact:n=!1,disabled:r=!1}){const i=l=>{if(r)return;const c=t[l];let u;switch(c){case"X":u="1";break;case"1":u="0";break;case"0":u="X";break;default:u="X"}const f=t.slice(0,l)+u+t.slice(l+1);e(f)},s=(l,c)=>{if(c.preventDefault(),r)return;const u=t[l];let f;switch(u){case"X":f="0";break;case"0":f="1";break;case"1":f="X";break;default:f="X"}const p=t.slice(0,l)+f+t.slice(l+1);e(p)},a=(l,c)=>{switch(l){case"1":return{bgcolor:c,color:"black",border:`2px solid ${c}`};case"0":return{bgcolor:"rgba(0,0,0,0.3)",color:"text.disabled",border:"2px solid rgba(255,255,255,0.1)"};default:return{bgcolor:"transparent",color:"text.secondary",border:"2px dashed rgba(255,255,255,0.3)"}}},o=n?36:48;return g.jsxs(Y,{children:[g.jsx(Y,{sx:{display:"flex",flexDirection:"column",gap:1},children:ka.map((l,c)=>g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:1},children:[g.jsx(Jt,{title:l.name,children:g.jsxs(Y,{sx:{width:n?60:80,display:"flex",alignItems:"center",gap:.5},children:[g.jsx(Y,{sx:{width:4,height:o,bgcolor:l.color,borderRadius:1}}),g.jsx(Z,{variant:"caption",sx:{color:l.color,fontWeight:600,fontSize:n?"0.65rem":"0.75rem"},children:n?l.name.slice(0,4):l.name})]})}),g.jsx(Y,{sx:{display:"flex",gap:.5,flex:1},children:Array.from({length:8},(u,f)=>{const p=c*8+f,m=t[p]||"X",x=a(m,l.color),b=uVe[p+1];return g.jsx(Jt,{title:g.jsxs(Y,{children:[g.jsxs(Z,{variant:"caption",sx:{fontWeight:600},children:["Bit ",p+1,": ",b]}),g.jsx("br",{}),g.jsx(Z,{variant:"caption",children:"Click: cycle forward (X10)"}),g.jsx("br",{}),g.jsx(Z,{variant:"caption",children:"Right-click: cycle backward"})]}),children:g.jsx(Y,{onClick:()=>i(p),onContextMenu:v=>s(p,v),sx:{width:o,height:o,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:1,cursor:r?"default":"pointer",transition:"all 0.15s",userSelect:"none",...x,"&:hover":r?{}:{transform:"scale(1.1)",boxShadow:`0 0 12px ${l.color}60`}},children:g.jsx(Z,{sx:{fontWeight:700,fontSize:n?"1rem":"1.25rem",fontFamily:"monospace"},children:m})})},f)})}),g.jsxs(Z,{variant:"caption",color:"text.disabled",sx:{width:40,textAlign:"right",fontSize:"0.65rem"},children:[c*8+1,"-",(c+1)*8]})]},l.name))}),g.jsxs(Y,{sx:{display:"flex",gap:3,mt:2,pt:2,borderTop:"1px solid rgba(255,255,255,0.1)",flexWrap:"wrap"},children:[g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:1},children:[g.jsx(Y,{sx:{width:24,height:24,border:"2px dashed rgba(255,255,255,0.3)",borderRadius:.5,display:"flex",alignItems:"center",justifyContent:"center"},children:g.jsx(Z,{variant:"caption",sx:{fontFamily:"monospace"},children:"X"})}),g.jsx(Z,{variant:"caption",color:"text.secondary",children:"Wildcard (any)"})]}),g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:1},children:[g.jsx(Y,{sx:{width:24,height:24,bgcolor:"#00E5FF",borderRadius:.5,display:"flex",alignItems:"center",justifyContent:"center"},children:g.jsx(Z,{variant:"caption",sx:{fontFamily:"monospace",color:"black"},children:"1"})}),g.jsx(Z,{variant:"caption",color:"text.secondary",children:"Must be ON"})]}),g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:1},children:[g.jsx(Y,{sx:{width:24,height:24,bgcolor:"rgba(0,0,0,0.3)",border:"2px solid rgba(255,255,255,0.1)",borderRadius:.5,display:"flex",alignItems:"center",justifyContent:"center"},children:g.jsx(Z,{variant:"caption",sx:{fontFamily:"monospace",color:"text.disabled"},children:"0"})}),g.jsx(Z,{variant:"caption",color:"text.secondary",children:"Must be OFF"})]})]})]})}function fVe({tolerance:t,onToleranceChange:e,pattern:n,onPatternChange:r,constraintCount:i,matchCount:s}){const a=()=>{r("X".repeat(32))},o=l=>{r(l.repeat(32))};return g.jsxs(Y,{children:[g.jsxs(Y,{sx:{display:"flex",gap:2,mb:2,flexWrap:"wrap"},children:[g.jsx(Dt,{label:`${i} constraints`,size:"small",color:i>0?"primary":"default",variant:"outlined"}),g.jsx(Dt,{label:`${n.split("").filter(l=>l==="1").length} must be ON`,size:"small",sx:{bgcolor:"rgba(76, 175, 80, 0.2)",borderColor:"#4CAF50"},variant:"outlined"}),g.jsx(Dt,{label:`${n.split("").filter(l=>l==="0").length} must be OFF`,size:"small",sx:{bgcolor:"rgba(244, 67, 54, 0.2)",borderColor:"#F44336"},variant:"outlined"}),g.jsx(Dt,{label:`${s} matches`,size:"small",color:s>0?"success":"default"})]}),g.jsxs(Y,{sx:{mb:2},children:[g.jsxs(Y,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:[g.jsx(Z,{variant:"subtitle2",sx:{fontWeight:600},children:"Tolerance"}),g.jsxs(Z,{variant:"body2",color:"primary",children:[t," bit",t!==1?"s":""]})]}),g.jsx(_k,{value:t,onChange:(l,c)=>e(c),min:0,max:8,step:1,marks:[{value:0,label:"0"},{value:2,label:"2"},{value:4,label:"4"},{value:6,label:"6"},{value:8,label:"8"}],sx:{"& .MuiSlider-markLabel":{fontSize:"0.7rem"}}}),g.jsxs(Z,{variant:"caption",color:"text.secondary",children:["Allow up to ",t," bit",t!==1?"s":""," to differ from the pattern"]})]}),g.jsx(Y,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:g.jsxs(lD,{size:"small",variant:"outlined",children:[g.jsx(un,{onClick:a,startIcon:g.jsx(Zu,{}),children:"Reset"}),g.jsx(un,{onClick:()=>o("1"),sx:{color:"#4CAF50",borderColor:"#4CAF50"},children:"All ON"}),g.jsx(un,{onClick:()=>o("0"),sx:{color:"#F44336",borderColor:"#F44336"},children:"All OFF"})]})})]})}function hVe({results:t,loading:e,error:n,pattern:r,onAddToCollection:i,onAddToComparison:s,isCompact:a=!1}){const o=yl(),l=u=>{const f=parseInt(u,16).toString(2).padStart(32,"0");let p=0;for(let m=0;m<32;m++)r[m]!=="X"&&r[m]!==f[m]&&p++;return p};return e?g.jsx(Y,{sx:{display:"flex",justifyContent:"center",py:4},children:g.jsx(lr,{})}):n?g.jsx(mi,{severity:"error",sx:{mb:2},children:n}):r.includes("0")||r.includes("1")?t.length===0?g.jsxs(Y,{sx:{textAlign:"center",py:4},children:[g.jsx(Z,{variant:"body2",color:"text.secondary",children:"No matching entities found"}),g.jsx(Z,{variant:"caption",color:"text.disabled",sx:{display:"block",mt:1},children:"Try increasing the tolerance or changing constraints"})]}):g.jsxs(Y,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[g.jsxs(Z,{variant:"subtitle2",sx:{mb:1,fontWeight:600,flexShrink:0},children:[t.length," matching entit",t.length===1?"y":"ies"]}),g.jsx(Tp,{dense:!0,disablePadding:!0,sx:{flex:1,overflow:"auto"},children:t.map(u=>{const f=Z0(u.uht_code),p=Vl[f]||"#757575",m=l(u.uht_code);return g.jsx(Cf,{disablePadding:!0,secondaryAction:g.jsxs(Y,{sx:{display:"flex",gap:.5},children:[s&&g.jsx(Jt,{title:"Add to comparison",children:g.jsx(Gt,{size:"small",onClick:x=>{x.stopPropagation(),s(u)},children:g.jsx(Cp,{fontSize:"small"})})}),i&&g.jsx(Jt,{title:"Add to collection",children:g.jsx(Gt,{size:"small",onClick:x=>{x.stopPropagation(),i(u)},children:g.jsx(gb,{fontSize:"small"})})}),g.jsx(Jt,{title:"Open entity",children:g.jsx(Gt,{size:"small",onClick:x=>{x.stopPropagation(),o(`/entity/${u.uuid}`)},children:g.jsx(Yf,{fontSize:"small"})})})]}),children:g.jsxs(mb,{onClick:()=>o(`/entity/${u.uuid}`),sx:{borderLeft:`3px solid ${p}`,"&:hover":{bgcolor:`${p}15`}},children:[g.jsx(KT,{children:u.image_url?g.jsx(Jo,{src:u.image_url,alt:u.name,variant:"rounded",sx:{width:a?36:44,height:a?36:44}}):g.jsx(Jo,{variant:"rounded",sx:{width:a?36:44,height:a?36:44,bgcolor:`${p}30`,color:p},children:u.name[0]})}),g.jsx(Ba,{primary:u.name,secondary:g.jsxs(Y,{component:"span",sx:{display:"flex",alignItems:"center",gap:1},children:[g.jsx(Z,{component:"span",variant:"caption",fontFamily:"monospace",color:"primary.main",children:u.uht_code}),g.jsx(Dt,{label:f,size:"small",sx:{height:16,fontSize:"0.6rem",bgcolor:`${p}30`,color:p}}),m>0&&g.jsx(Dt,{label:`${m} diff`,size:"small",sx:{height:16,fontSize:"0.6rem",bgcolor:"rgba(255,152,0,0.2)",color:"#FF9800"}})]}),primaryTypographyProps:{variant:a?"body2":"body1",sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:200}},secondaryTypographyProps:{component:"div"}})]})},u.uuid)})})]}):g.jsxs(Y,{sx:{textAlign:"center",py:4},children:[g.jsx(Z,{variant:"body2",color:"text.secondary",children:"Click on bits in the grid above to set constraints"}),g.jsx(Z,{variant:"caption",color:"text.disabled",sx:{display:"block",mt:1},children:"Set at least one bit to ON (1) or OFF (0) to search"})]})}function pVe(){const{isMobile:t,isTablet:e}=tc(),n=t||e,[r,i]=_E(),[s,a]=w.useState(()=>{const C=r.get("pattern");return C&&C.length===32?C:$H()}),[o,l]=w.useState(()=>{const C=r.get("tolerance");return C?parseInt(C,10):0}),[c,u]=w.useState([]),[f,p]=w.useState(!1),[m,x]=w.useState(null),b=w.useRef(null),v=eVe(s),_=s.includes("X")?"(pattern)":QGe(s),E=w.useCallback(async()=>{if(!s.includes("0")&&!s.includes("1")){u([]);return}p(!0),x(null);try{const C=await vo.searchByPattern(s,o);u(C)}catch(C){console.error("Pattern search failed:",C),x("Failed to search entities"),u([])}finally{p(!1)}},[s,o]);w.useEffect(()=>(b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{E()},500),()=>{b.current&&clearTimeout(b.current)}),[E]),w.useEffect(()=>{const C=new URLSearchParams;s!==$H()&&C.set("pattern",s),o>0&&C.set("tolerance",o.toString()),i(C,{replace:!0})},[s,o,i]);const T=()=>{const C=window.location.href;navigator.clipboard.writeText(C)},A=()=>{navigator.clipboard.writeText(s)};return g.jsxs(Y,{sx:{height:"100%",display:"flex",flexDirection:"column",overflow:"hidden"},children:[g.jsxs(gn,{sx:{p:n?1.5:2,borderRadius:0,borderBottom:"1px solid rgba(0, 229, 255, 0.3)",flexShrink:0},children:[g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:2},children:[g.jsx(yZ,{color:"primary",sx:{fontSize:n?20:24}}),g.jsx(Z,{variant:n?"subtitle1":"h6",color:"primary",sx:{fontWeight:600},children:"Build-a-Code"}),g.jsxs(Y,{sx:{ml:"auto",display:"flex",gap:1},children:[g.jsx(Jt,{title:"Copy pattern",children:g.jsx(Gt,{size:"small",onClick:A,children:g.jsx(t2,{fontSize:"small"})})}),g.jsx(Jt,{title:"Share pattern URL",children:g.jsx(Gt,{size:"small",onClick:T,children:g.jsx(bb,{fontSize:"small"})})})]})]}),g.jsx(Z,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Click bits to build a UHT pattern and find matching entities"})]}),g.jsxs(Y,{sx:{flexGrow:1,overflow:"auto",p:n?1.5:2,display:"flex",flexDirection:n?"column":"row",gap:2},children:[g.jsx(Y,{sx:{flex:n?"none":1},children:g.jsx(xi,{children:g.jsxs(yi,{children:[g.jsx(Z,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:600},children:"Pattern Builder"}),g.jsx(Y,{sx:{mb:3},children:g.jsx(dVe,{pattern:s,onChange:a,isCompact:n})}),g.jsx(bs,{sx:{my:2}}),g.jsxs(Y,{sx:{mb:3},children:[g.jsx(Z,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:.5},children:"Pattern String"}),g.jsx(wi,{fullWidth:!0,size:"small",value:s,onChange:C=>{const M=C.target.value.toUpperCase();M.length===32&&/^[01X]+$/.test(M)&&a(M)},InputProps:{sx:{fontFamily:"monospace",fontSize:"0.85rem"},endAdornment:g.jsx(Ua,{position:"end",children:g.jsx(Jt,{title:"Copy pattern",children:g.jsx(Gt,{size:"small",onClick:A,children:g.jsx(t2,{fontSize:"small"})})})})}}),_!=="(pattern)"&&g.jsxs(Z,{variant:"caption",color:"primary.main",fontFamily:"monospace",sx:{display:"block",mt:.5},children:["Hex: ",_]})]}),g.jsx(bs,{sx:{my:2}}),g.jsx(fVe,{tolerance:o,onToleranceChange:l,pattern:s,onPatternChange:a,constraintCount:v,matchCount:c.length,isCompact:n})]})})}),g.jsx(Y,{sx:{flex:n?"none":1,minWidth:0,display:"flex",flexDirection:"column"},children:g.jsx(xi,{sx:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:g.jsxs(yi,{sx:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden",p:n?1.5:2},children:[g.jsx(Z,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:600,flexShrink:0},children:"Matching Entities"}),g.jsx(Y,{sx:{flex:1,overflow:"hidden"},children:g.jsx(hVe,{results:c,loading:f,error:m,pattern:s,isCompact:n})})]})})})]})]})}function mVe({collection:t,entityPreviews:e=[],onSelect:n,isCompact:r=!1}){const i=yl(),{renameCollection:s,deleteCollection:a,clearCollection:o,exportCollectionToUrl:l}=tC(),[c,u]=w.useState(null),[f,p]=w.useState(!1),[m,x]=w.useState(!1),[b,v]=w.useState(t.name),_=L=>{L.stopPropagation(),u(L.currentTarget)},E=()=>{u(null)},T=()=>{b.trim()&&b!==t.name&&s(t.id,b.trim()),p(!1),E()},A=()=>{a(t.id),x(!1),E()},C=()=>{const L=l(t.id);navigator.clipboard.writeText(L),E()},M=()=>{const L=t.entityUuids.slice(0,4).join(",");i(`/comparison?entities=${L}`),E()},P=()=>{o(t.id),E()},D=L=>new Date(L).toLocaleDateString(void 0,{month:"short",day:"numeric"}),N=[...e.slice(0,4)];for(;N.length<4;)N.push(null);return g.jsxs(g.Fragment,{children:[g.jsxs(xi,{sx:{cursor:n?"pointer":"default",transition:"all 0.2s ease","&:hover":n?{borderColor:"primary.main",transform:"translateY(-2px)",boxShadow:"0 4px 20px rgba(0, 229, 255, 0.15)"}:{}},onClick:n,children:[g.jsxs(Y,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gridTemplateRows:"1fr 1fr",aspectRatio:"1",backgroundColor:"rgba(0, 0, 0, 0.3)",position:"relative",overflow:"hidden"},children:[N.map((L,k)=>g.jsx(Y,{sx:{backgroundColor:"rgba(0, 229, 255, 0.05)",borderRight:k%2===0?"1px solid rgba(255,255,255,0.1)":"none",borderBottom:k<2?"1px solid rgba(255,255,255,0.1)":"none",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:L?.image_url?g.jsx("img",{src:L.image_url,alt:L.name,style:{width:"100%",height:"100%",objectFit:"cover"}}):L?g.jsx(Z,{variant:"h6",sx:{color:"rgba(255,255,255,0.3)",fontWeight:600},children:L.name?.[0]||"?"}):g.jsx(Y,{sx:{width:"100%",height:"100%",background:"linear-gradient(135deg, rgba(0,229,255,0.03) 0%, rgba(0,229,255,0.08) 100%)"}})},L?.uuid||`empty-${k}`)),t.entityUuids.length>4&&g.jsx(Y,{sx:{position:"absolute",bottom:0,right:0,width:"50%",height:"50%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0,0,0,0.7)",backdropFilter:"blur(4px)"},children:g.jsxs(Z,{variant:"h5",sx:{color:"primary.main",fontWeight:700},children:["+",t.entityUuids.length-3]})}),e.length===0&&g.jsxs(Y,{sx:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:1},children:[g.jsx(xb,{sx:{fontSize:48,color:"rgba(255,255,255,0.2)"}}),g.jsx(Z,{variant:"caption",sx:{color:"rgba(255,255,255,0.3)"},children:"Empty collection"})]})]}),g.jsxs(yi,{sx:{p:r?1.5:2},children:[g.jsxs(Y,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1},children:[g.jsx(Z,{variant:r?"body1":"subtitle1",sx:{fontWeight:600,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1,pr:1},children:t.name}),g.jsx(Gt,{size:"small",onClick:_,sx:{mt:-.5,mr:-.5,opacity:.7,"&:hover":{opacity:1}},children:g.jsx(Dwe,{fontSize:"small"})})]}),g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:1,mb:1.5},children:[g.jsx(Dt,{label:`${t.entityUuids.length} ${t.entityUuids.length===1?"entity":"entities"}`,size:"small",sx:{height:22,backgroundColor:"rgba(0, 229, 255, 0.15)",color:"primary.main",fontWeight:500,fontSize:"0.7rem"}}),g.jsx(Z,{variant:"caption",sx:{color:"text.secondary",fontSize:"0.7rem"},children:D(t.updatedAt)})]}),g.jsxs(Y,{sx:{display:"flex",gap:.5,mt:1},children:[g.jsx(Jt,{title:"Open",children:g.jsx(Gt,{size:"small",onClick:L=>{L.stopPropagation(),n?.()},sx:{backgroundColor:"rgba(0, 229, 255, 0.1)","&:hover":{backgroundColor:"rgba(0, 229, 255, 0.2)"}},children:g.jsx(Yf,{sx:{fontSize:16}})})}),t.entityUuids.length>=2&&g.jsx(Jt,{title:"Compare",children:g.jsx(Gt,{size:"small",onClick:L=>{L.stopPropagation(),M()},sx:{backgroundColor:"rgba(255, 255, 255, 0.05)","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"}},children:g.jsx(Cp,{sx:{fontSize:16}})})}),g.jsx(Jt,{title:"Share",children:g.jsx(Gt,{size:"small",onClick:L=>{L.stopPropagation(),C()},sx:{backgroundColor:"rgba(255, 255, 255, 0.05)","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"}},children:g.jsx(bb,{sx:{fontSize:16}})})})]})]})]}),g.jsxs(yk,{anchorEl:c,open:!!c,onClose:E,children:[g.jsxs(nr,{onClick:()=>{p(!0),E()},children:[g.jsx(gf,{children:g.jsx(Awe,{fontSize:"small"})}),g.jsx(Ba,{primary:"Rename"})]}),g.jsxs(nr,{onClick:C,children:[g.jsx(gf,{children:g.jsx(bb,{fontSize:"small"})}),g.jsx(Ba,{primary:"Copy share link"})]}),t.entityUuids.length>=2&&g.jsxs(nr,{onClick:M,children:[g.jsx(gf,{children:g.jsx(Cp,{fontSize:"small"})}),g.jsx(Ba,{primary:"Compare entities"})]}),g.jsxs(nr,{onClick:P,disabled:t.entityUuids.length===0,children:[g.jsx(gf,{children:g.jsx(Wl,{fontSize:"small"})}),g.jsx(Ba,{primary:"Clear all entities"})]}),g.jsxs(nr,{onClick:()=>{x(!0),E()},sx:{color:"error.main"},children:[g.jsx(gf,{children:g.jsx(Nk,{fontSize:"small",sx:{color:"error.main"}})}),g.jsx(Ba,{primary:"Delete collection"})]})]}),g.jsxs(Bf,{open:f,onClose:()=>p(!1),children:[g.jsx(wp,{children:"Rename Collection"}),g.jsx(Ff,{children:g.jsx(wi,{autoFocus:!0,fullWidth:!0,value:b,onChange:L=>v(L.target.value),placeholder:"Collection name",sx:{mt:1}})}),g.jsxs(i0,{children:[g.jsx(un,{onClick:()=>p(!1),children:"Cancel"}),g.jsx(un,{onClick:T,variant:"contained",children:"Rename"})]})]}),g.jsxs(Bf,{open:m,onClose:()=>x(!1),children:[g.jsx(wp,{children:"Delete Collection?"}),g.jsx(Ff,{children:g.jsxs(Z,{children:['Are you sure you want to delete "',t.name,'"? This action cannot be undone.']})}),g.jsxs(i0,{children:[g.jsx(un,{onClick:()=>x(!1),children:"Cancel"}),g.jsx(un,{onClick:A,color:"error",variant:"contained",children:"Delete"})]})]})]})}const fne=t=>`collection_positions_${t}`,hne=t=>`collection_connections_${t}`,gVe=t=>{try{const e=localStorage.getItem(fne(t));return e?JSON.parse(e):null}catch{return null}},gN=(t,e)=>{try{localStorage.setItem(fne(t),JSON.stringify(e))}catch{}},xVe=t=>{try{const e=localStorage.getItem(hne(t));return e?JSON.parse(e):[]}catch{return[]}},yVe=(t,e)=>{try{localStorage.setItem(hne(t),JSON.stringify(e))}catch{}},vVe=w.memo(function({entity:e,position:n,onPositionChange:r,onRemove:i,onOpen:s,isConnecting:a,isSelected:o,onSelect:l,isMobile:c=!1}){const u=w.useRef(null),[f,p]=w.useState(!1),[m,x]=w.useState({x:0,y:0}),b=Z0(e.uht_code),v=Vl[b]||"#757575",_=w.useCallback(P=>{if(a){P.preventDefault(),P.stopPropagation(),l(e.uuid);return}c||P.detail!==2&&(p(!0),x({x:P.clientX-n.x,y:P.clientY-n.y}),r(e.uuid,{zIndex:Date.now()}),P.preventDefault())},[a,c,n.x,n.y,e.uuid,r,l]),E=w.useCallback(P=>{if(!f)return;const D=P.clientX-m.x,N=Math.max(0,P.clientY-m.y);r(e.uuid,{x:D,y:N})},[f,m,e.uuid,r]),T=w.useCallback(()=>{p(!1)},[]),A=w.useCallback(P=>{if(a){P.preventDefault(),P.stopPropagation(),l(e.uuid);return}if(P.touches.length!==1)return;const D=P.touches[0];p(!0),x({x:D.clientX-n.x,y:D.clientY-n.y}),r(e.uuid,{zIndex:Date.now()})},[a,n.x,n.y,e.uuid,r,l]),C=w.useCallback(P=>{if(!f||P.touches.length!==1)return;const D=P.touches[0],N=D.clientX-m.x,L=Math.max(0,D.clientY-m.y);r(e.uuid,{x:N,y:L})},[f,m,e.uuid,r]),M=w.useCallback(()=>{p(!1)},[]);return w.useEffect(()=>(f&&(window.addEventListener("mousemove",E),window.addEventListener("mouseup",T),window.addEventListener("touchmove",C,{passive:!1}),window.addEventListener("touchend",M)),()=>{window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",T),window.removeEventListener("touchmove",C),window.removeEventListener("touchend",M)}),[f,E,T,C,M]),g.jsxs(xi,{ref:u,sx:{position:"absolute",left:n.x,top:n.y,width:n.width,height:n.height,zIndex:n.zIndex,cursor:a?"crosshair":f?"grabbing":"grab",boxShadow:f?"0 8px 32px rgba(0,0,0,0.3)":o?`0 0 0 3px ${v}`:"0 2px 8px rgba(0,0,0,0.1)",transition:f?"none":"box-shadow 0.2s ease",transform:f?"scale(1.02)":"scale(1)",border:o?`2px solid ${v}`:`2px solid ${v}40`,touchAction:c?"none":"auto","&:hover":{border:`2px solid ${v}`,boxShadow:o?`0 0 0 3px ${v}`:"0 4px 16px rgba(0,0,0,0.2)"}},onMouseDown:_,onTouchStart:A,children:[e.image_url?g.jsx(fK,{component:"img",image:e.image_url,alt:e.name,sx:{height:n.height*.65,objectFit:"cover"},onError:P=>{const D=P.target;D.style.display="none"}}):g.jsx(Y,{sx:{height:n.height*.65,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:`${v}20`},children:g.jsx(Z,{variant:"h3",sx:{color:v,opacity:.5},children:e.name[0]})}),g.jsxs(yi,{sx:{height:n.height*.35,p:1,"&:last-child":{pb:1},overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[g.jsxs(Y,{sx:{minHeight:0},children:[g.jsx(Z,{variant:"caption",sx:{fontWeight:"bold",fontSize:"0.7rem",lineHeight:1.2,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},children:e.name}),g.jsx(Z,{variant:"caption",sx:{fontFamily:"monospace",fontSize:"0.55rem",color:"primary.main",lineHeight:1.1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},children:e.uht_code})]}),g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:.5},children:[g.jsx(Dt,{label:b,size:"small",sx:{backgroundColor:v,color:"white",fontSize:"0.55rem",height:"16px","& .MuiChip-label":{px:.5}}}),!a&&g.jsxs(Y,{sx:{ml:"auto",display:"flex",alignItems:"center"},onClick:P=>P.stopPropagation(),onMouseDown:P=>P.stopPropagation(),children:[g.jsx(Gt,{size:"small",onClick:()=>s(e.uuid),sx:{p:.25},children:g.jsx(Yf,{sx:{fontSize:"0.75rem"}})}),g.jsx(Gt,{size:"small",onClick:()=>i(e.uuid),sx:{p:.25,"&:hover":{color:"error.main"}},children:g.jsx(Nk,{sx:{fontSize:"0.75rem"}})})]})]})]})]})}),bVe=w.memo(function({connections:e,positions:n,pendingConnection:r,mousePos:i}){const s=a=>{const o=n[a];return o?{x:o.x+o.width/2,y:o.y+o.height/2}:null};return g.jsxs("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:0},children:[g.jsx("defs",{children:g.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",children:g.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"rgba(0, 229, 255, 0.8)"})})}),e.map(a=>{const o=s(a.from),l=s(a.to);return!o||!l?null:g.jsx("line",{x1:o.x,y1:o.y,x2:l.x,y2:l.y,stroke:a.color||"rgba(0, 229, 255, 0.6)",strokeWidth:"2",strokeDasharray:"5,5",markerEnd:"url(#arrowhead)"},a.id)}),r&&i&&g.jsx(g.Fragment,{children:(()=>{const a=s(r);return a?g.jsx("line",{x1:a.x,y1:a.y,x2:i.x,y2:i.y,stroke:"rgba(0, 229, 255, 0.4)",strokeWidth:"2",strokeDasharray:"8,4"}):null})()})]})});function _Ve({collection:t,onBack:e,isCompact:n=!1}){const r=yl(),{removeEntity:i,exportCollectionToUrl:s}=tC(),[a,o]=w.useState([]),[l,c]=w.useState(!0),[u,f]=w.useState(null),[p,m]=w.useState("canvas"),[x,b]=w.useState(()=>gVe(t.id)||{}),[v,_]=w.useState(()=>xVe(t.id)),[E,T]=w.useState(!1),[A,C]=w.useState(null),[M,P]=w.useState(null),D=w.useRef(null),N=w.useRef(!1),[L,k]=w.useState(1),[I,F]=w.useState({x:0,y:0}),[z,H]=w.useState(!1),[B,j]=w.useState({x:0,y:0}),G=.25,W=3,re=.1;w.useEffect(()=>{if(N.current)return;const fe=async()=>{c(!0),f(null);try{const $e=(await Promise.all(t.entityUuids.map(Se=>vo.getEntity(Se).catch(()=>null)))).filter(Se=>Se!==null);o($e),N.current=!0}catch(rt){console.error("Failed to load entities:",rt),f("Failed to load some entities")}finally{c(!1)}};t.entityUuids.length>0?fe():(o([]),c(!1))},[t.id]),w.useEffect(()=>{N.current&&o(fe=>fe.filter(rt=>t.entityUuids.includes(rt.uuid)))},[t.entityUuids]),w.useEffect(()=>{if(p!=="canvas"||a.length===0)return;const rt=D.current?.clientWidth||800,$e=n?140:180,Se=n?180:220,q=20,V=Math.max(1,Math.floor((rt-q)/($e+q)));b(ie=>{const le={...ie};let xe=!1;return a.forEach((pe,it)=>{if(!le[pe.uuid]){xe=!0;const We=it%V,dt=Math.floor(it/V);le[pe.uuid]={x:q+We*($e+q),y:q+dt*(Se+q),width:$e,height:Se,zIndex:it}}}),xe&&gN(t.id,le),xe?le:ie})},[p,a,n,t.id]);const $=w.useCallback((fe,rt)=>{b($e=>{const Se={...$e,[fe]:{...$e[fe],...rt}};return gN(t.id,Se),Se})},[t.id]);w.useEffect(()=>{yVe(t.id,v)},[v,t.id]);const ee=w.useCallback(fe=>{if(E){if(!A)C(fe);else if(A!==fe){const rt={id:`${A}-${fe}-${Date.now()}`,from:A,to:fe};_($e=>[...$e,rt]),C(null)}}},[E,A]),oe=w.useCallback(fe=>{if(!A)return;const rt=D.current?.getBoundingClientRect();if(!rt)return;const $e=fe.clientX-rt.left,Se=fe.clientY-rt.top;P({x:($e-I.x)/L,y:(Se-I.y)/L})},[A,I,L]),me=w.useCallback(()=>{const fe=s(t.id);navigator.clipboard.writeText(fe)},[t.id,s]),te=w.useCallback(()=>{const fe=t.entityUuids.slice(0,4).join(",");r(`/comparison?entities=${fe}`)},[t.entityUuids,r]),K=w.useCallback(fe=>{_(rt=>rt.filter($e=>$e.from!==fe&&$e.to!==fe)),b(rt=>{const{[fe]:$e,...Se}=rt;return gN(t.id,Se),Se}),i(t.id,fe)},[t.id,i]),ne=w.useCallback(()=>{_(fe=>fe.slice(0,-1))},[]),Ee=w.useCallback(()=>{_([])},[]),se=w.useCallback(()=>{T(fe=>!fe),C(null),P(null)},[]),ve=w.useCallback(fe=>{fe.preventDefault();const rt=D.current?.getBoundingClientRect();if(!rt)return;const $e=fe.clientX-rt.left,Se=fe.clientY-rt.top,q=fe.deltaY>0?-re:re,V=Math.min(W,Math.max(G,L+q));if(V===L)return;const ie=($e-I.x)/L,le=(Se-I.y)/L,xe=$e-ie*V,pe=Se-le*V;k(V),F({x:xe,y:pe})},[L,I]);w.useEffect(()=>{const fe=D.current;if(!(!fe||p!=="canvas"))return fe.addEventListener("wheel",ve,{passive:!1}),()=>{fe.removeEventListener("wheel",ve)}},[ve,p]);const Pe=w.useCallback(()=>{k(fe=>Math.min(W,fe+re))},[]),ge=w.useCallback(()=>{k(fe=>Math.max(G,fe-re))},[]),be=w.useCallback(()=>{k(1),F({x:0,y:0})},[]),_e=w.useCallback(fe=>{(fe.button===1||fe.button===2)&&(fe.preventDefault(),H(!0),j({x:fe.clientX-I.x,y:fe.clientY-I.y}))},[I]),Q=w.useCallback(fe=>{z&&F({x:fe.clientX-B.x,y:fe.clientY-B.y})},[z,B]),et=w.useCallback(()=>{H(!1)},[]);w.useEffect(()=>(z&&(window.addEventListener("mousemove",Q),window.addEventListener("mouseup",et),window.addEventListener("mouseleave",et)),()=>{window.removeEventListener("mousemove",Q),window.removeEventListener("mouseup",et),window.removeEventListener("mouseleave",et)}),[z,Q,et]);const ze=w.useMemo(()=>{if(a.length===0)return null;const fe=a.reduce((rt,$e)=>{const Se=XC($e.uht_code);return rt+Se.reduce((q,V)=>q+V,0)},0);return{totalTraits:fe,avgTraits:(fe/a.length).toFixed(1),layerDistribution:["Physical","Functional","Abstract","Social"].map(rt=>{const $e=a.filter(Se=>Z0(Se.uht_code)===rt).length;return{layer:rt,count:$e,percentage:($e/a.length*100).toFixed(0)}})}},[a]),Je=w.useMemo(()=>Object.values(x).reduce((fe,rt)=>Math.max(fe,rt.y+rt.height+40),400),[x]);return g.jsxs(Y,{sx:{height:"100%",display:"flex",flexDirection:"column",overflow:"hidden"},children:[g.jsxs(gn,{sx:{p:n?1.5:2,borderRadius:0,borderBottom:"1px solid rgba(0, 229, 255, 0.3)",flexShrink:0},children:[g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:2},children:[g.jsx(Gt,{onClick:e,size:"small",children:g.jsx(ED,{})}),g.jsxs(Y,{sx:{flex:1,minWidth:0},children:[g.jsx(Z,{variant:n?"subtitle1":"h6",sx:{fontWeight:600,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.name}),g.jsxs(Z,{variant:"caption",color:"text.secondary",children:[t.entityUuids.length," entities  ",v.length," connections"]})]}),g.jsxs(Y,{sx:{display:"flex",gap:1,alignItems:"center"},children:[g.jsxs(PK,{value:p,exclusive:!0,onChange:(fe,rt)=>rt&&m(rt),size:"small",children:[g.jsx(Vv,{value:"list",sx:{px:1},children:g.jsx(Jt,{title:"List view",children:g.jsx($we,{fontSize:"small"})})}),g.jsx(Vv,{value:"canvas",sx:{px:1},children:g.jsx(Jt,{title:"Canvas view",children:g.jsx(EZ,{fontSize:"small"})})})]}),t.entityUuids.length>=2&&g.jsx(un,{variant:"outlined",size:"small",startIcon:g.jsx(Cp,{}),onClick:te,children:"Compare"}),g.jsx(Jt,{title:"Copy share link",children:g.jsx(Gt,{size:"small",onClick:me,children:g.jsx(bb,{})})})]})]}),ze&&g.jsxs(Y,{sx:{display:"flex",gap:2,mt:2,flexWrap:"wrap"},children:[g.jsx(Dt,{label:`${ze.avgTraits} avg traits`,size:"small",variant:"outlined"}),ze.layerDistribution.map(({layer:fe,count:rt,percentage:$e})=>rt>0&&g.jsx(Dt,{label:`${fe}: ${$e}%`,size:"small",sx:{bgcolor:`${Vl[fe]}20`,borderColor:Vl[fe],color:Vl[fe]},variant:"outlined"},fe))]})]}),g.jsxs(Y,{sx:{flexGrow:1,overflow:"auto",p:p==="list"?n?1:2:0,position:"relative"},children:[l&&g.jsx(Y,{sx:{display:"flex",justifyContent:"center",py:4},children:g.jsx(lr,{})}),u&&g.jsx(mi,{severity:"warning",sx:{mb:2,mx:p==="canvas"?2:0},children:u}),!l&&a.length===0&&g.jsxs(Y,{sx:{textAlign:"center",py:8},children:[g.jsx(Z,{variant:"body1",color:"text.secondary",gutterBottom:!0,children:"This collection is empty"}),g.jsx(Z,{variant:"body2",color:"text.secondary",children:"Add entities from the List View, Gallery, or Entity Details pages"})]}),!l&&a.length>0&&p==="list"&&g.jsx(Tp,{disablePadding:!0,children:a.map(fe=>{const rt=Z0(fe.uht_code),$e=Vl[rt];return g.jsx(Cf,{disablePadding:!0,sx:{mb:1},children:g.jsxs(mb,{onClick:()=>r(`/entity/${fe.uuid}`),sx:{borderRadius:1,borderLeft:`3px solid ${$e}`,bgcolor:"rgba(255,255,255,0.02)","&:hover":{bgcolor:`${$e}15`}},children:[g.jsx(KT,{children:fe.image_url?g.jsx(Jo,{src:fe.image_url,alt:fe.name,variant:"rounded",sx:{width:48,height:48}}):g.jsx(Jo,{variant:"rounded",sx:{width:48,height:48,bgcolor:`${$e}30`,color:$e},children:fe.name[0]})}),g.jsx(Ba,{primary:fe.name,secondary:g.jsxs(Y,{component:"span",sx:{display:"flex",alignItems:"center",gap:1},children:[g.jsx(Z,{component:"span",variant:"caption",fontFamily:"monospace",color:"primary.main",children:fe.uht_code}),g.jsx(Dt,{label:rt,size:"small",sx:{height:18,fontSize:"0.65rem",bgcolor:`${$e}20`,color:$e}})]}),primaryTypographyProps:{sx:{fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},secondaryTypographyProps:{component:"div"}}),g.jsxs(xk,{children:[g.jsx(Jt,{title:"Open entity",children:g.jsx(Gt,{size:"small",onClick:Se=>{Se.stopPropagation(),r(`/entity/${fe.uuid}`)},children:g.jsx(Yf,{fontSize:"small"})})}),g.jsx(Jt,{title:"Remove from collection",children:g.jsx(Gt,{size:"small",onClick:Se=>{Se.stopPropagation(),K(fe.uuid)},sx:{"&:hover":{color:"error.main"}},children:g.jsx(Nk,{fontSize:"small"})})})]})]})},fe.uuid)})}),!l&&a.length>0&&p==="canvas"&&g.jsxs(Y,{ref:D,onMouseDown:_e,onContextMenu:fe=>fe.preventDefault(),sx:{position:"relative",minHeight:"100%",overflow:"hidden",bgcolor:"rgba(0,0,0,0.2)",cursor:z?"grabbing":E?"crosshair":"default"},children:[g.jsxs(Y,{onMouseMove:oe,onClick:fe=>{A&&fe.target===fe.currentTarget&&(C(null),P(null))},sx:{position:"relative",minHeight:Je*L,minWidth:"100%",transform:`translate(${I.x}px, ${I.y}px) scale(${L})`,transformOrigin:"0 0",backgroundImage:"radial-gradient(circle, rgba(255,255,255,0.05) 1px, transparent 1px)",backgroundSize:`${20*L}px ${20*L}px`},children:[g.jsx(bVe,{connections:v,positions:x,pendingConnection:A,mousePos:M}),a.map(fe=>x[fe.uuid]&&g.jsx(vVe,{entity:fe,position:x[fe.uuid],onPositionChange:$,onRemove:K,onOpen:rt=>r(`/entity/${rt}`),isConnecting:E,isSelected:A===fe.uuid,onSelect:ee,isMobile:n},fe.uuid))]}),g.jsxs(Y,{sx:{position:"fixed",bottom:24,right:24,display:"flex",flexDirection:"column",gap:1,zIndex:1e3},children:[g.jsx(Jt,{title:E?"Exit connect mode":"Connect entities",placement:"left",children:g.jsx(jh,{size:"medium",color:E?"secondary":"primary",onClick:se,children:g.jsx(Uwe,{})})}),v.length>0&&g.jsxs(g.Fragment,{children:[g.jsx(Jt,{title:"Undo last connection",placement:"left",children:g.jsx(jh,{size:"small",onClick:ne,children:g.jsx(zwe,{})})}),g.jsx(Jt,{title:"Clear all connections",placement:"left",children:g.jsx(jh,{size:"small",color:"error",onClick:Ee,children:g.jsx(Wl,{})})})]})]}),g.jsxs(Y,{sx:{position:"fixed",bottom:24,left:24,display:"flex",flexDirection:"column",gap:1,zIndex:1e3},children:[g.jsx(Jt,{title:"Zoom in",placement:"right",children:g.jsx(jh,{size:"small",onClick:Pe,disabled:L>=W,children:g.jsx(CZ,{})})}),g.jsx(Jt,{title:"Zoom out",placement:"right",children:g.jsx(jh,{size:"small",onClick:ge,disabled:L<=G,children:g.jsx(AZ,{})})}),g.jsx(Jt,{title:"Reset view",placement:"right",children:g.jsx(jh,{size:"small",onClick:be,children:g.jsx(wwe,{})})})]}),g.jsx(gn,{sx:{position:"fixed",bottom:24,left:"50%",transform:"translateX(-50%)",px:2,py:.5,bgcolor:"background.paper",opacity:.8,zIndex:999},children:g.jsxs(Z,{variant:"caption",sx:{fontFamily:"monospace"},children:[Math.round(L*100),"%"]})}),E&&g.jsx(gn,{sx:{position:"fixed",top:80,left:"50%",transform:"translateX(-50%)",px:3,py:1,bgcolor:"secondary.main",color:"white",zIndex:1e3},children:g.jsx(Z,{variant:"body2",children:A?"Click another card to connect":"Click a card to start connection"})})]})]})]})}function HH(){const{isMobile:t,isTablet:e}=tc(),n=t||e,r=yl(),[i]=_E(),{state:s,createCollection:a,importCollectionFromUrl:o}=tC(),[l,c]=w.useState(""),[u,f]=w.useState(!1),[p,m]=w.useState(""),[x,b]=w.useState({}),[v,_]=w.useState(null),[E,T]=w.useState(null);w.useEffect(()=>{(async()=>{const P=i.get("name"),D=i.get("entities");if(P&&D){const N=await o(i);N&&(T(`Imported collection "${N.name}" with ${N.entityUuids.length} entities`),r("/collections",{replace:!0}))}})()},[]),w.useEffect(()=>{(async()=>{const P={};for(const D of s.collections)if(D.entityUuids.length>0)try{const N=D.entityUuids.slice(0,4),L=await Promise.all(N.map(k=>vo.getEntity(k).catch(()=>null)));P[D.id]=L.filter(k=>k!==null).map(k=>({uuid:k.uuid,name:k.name,image_url:k.image_url,uht_code:k.uht_code}))}catch{P[D.id]=[]}b(P)})()},[s.collections]);const A=async()=>{p.trim()&&(await a(p.trim()),m(""),f(!1))},C=s.collections.filter(M=>M.name.toLowerCase().includes(l.toLowerCase()));if(v){const M=s.collections.find(P=>P.id===v);if(M)return g.jsx(_Ve,{collection:M,onBack:()=>_(null),isCompact:n})}return g.jsxs(Y,{sx:{height:"100%",display:"flex",flexDirection:"column",overflow:"hidden"},children:[g.jsxs(gn,{sx:{p:n?1.5:2,borderRadius:0,borderBottom:"1px solid rgba(0, 229, 255, 0.3)",flexShrink:0},children:[g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[g.jsx(xb,{color:"primary",sx:{fontSize:n?20:24}}),g.jsx(Z,{variant:n?"subtitle1":"h6",color:"primary",sx:{fontWeight:600},children:"Collections"}),g.jsxs(Z,{variant:"body2",color:"text.secondary",children:[s.collections.length," collection",s.collections.length!==1?"s":""]}),g.jsx(Y,{sx:{ml:"auto"},children:g.jsx(un,{variant:"contained",startIcon:g.jsx(gb,{}),size:n?"small":"medium",onClick:()=>f(!0),children:"New"})})]}),g.jsx(wi,{fullWidth:!0,size:"small",placeholder:"Search collections...",value:l,onChange:M=>c(M.target.value),InputProps:{startAdornment:g.jsx(Ua,{position:"start",children:g.jsx(vb,{sx:{color:"text.secondary"}})}),endAdornment:l&&g.jsx(Ua,{position:"end",children:g.jsx(Gt,{size:"small",onClick:()=>c(""),children:g.jsx(Wl,{fontSize:"small"})})})}})]}),g.jsxs(Y,{sx:{flexGrow:1,overflow:"auto",p:n?1.5:2},children:[E&&g.jsx(mi,{severity:"success",onClose:()=>T(null),sx:{mb:2},children:E}),C.length===0?g.jsxs(Y,{sx:{textAlign:"center",py:8},children:[g.jsx(xb,{sx:{fontSize:64,color:"text.secondary",mb:2}}),g.jsx(Z,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:l?"No matching collections":"No Collections Yet"}),g.jsx(Z,{variant:"body2",color:"text.secondary",sx:{mb:3},children:l?"Try a different search term":"Create a collection to organize your entities"}),!l&&g.jsx(un,{variant:"outlined",startIcon:g.jsx(gb,{}),onClick:()=>f(!0),children:"Create Your First Collection"})]}):g.jsx(Y,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(4, 1fr)"},gap:2},children:C.map(M=>g.jsx(mVe,{collection:M,entityPreviews:x[M.id],onSelect:()=>_(M.id),isCompact:n},M.id))})]}),g.jsxs(Bf,{open:u,onClose:()=>f(!1),children:[g.jsx(wp,{children:"Create New Collection"}),g.jsx(Ff,{children:g.jsx(wi,{autoFocus:!0,fullWidth:!0,label:"Collection Name",value:p,onChange:M=>m(M.target.value),onKeyDown:M=>{M.key==="Enter"&&A()},placeholder:"My Collection",sx:{mt:1}})}),g.jsxs(i0,{children:[g.jsx(un,{onClick:()=>f(!1),children:"Cancel"}),g.jsx(un,{onClick:A,variant:"contained",disabled:!p.trim(),children:"Create"})]})]})]})}function gg(t,e,n){let r=n.initialDeps??[],i;function s(){var a,o,l,c;let u;n.key&&((a=n.debug)!=null&&a.call(n))&&(u=Date.now());const f=t();if(!(f.length!==r.length||f.some((x,b)=>r[b]!==x)))return i;r=f;let m;if(n.key&&((o=n.debug)!=null&&o.call(n))&&(m=Date.now()),i=e(...f),n.key&&((l=n.debug)!=null&&l.call(n))){const x=Math.round((Date.now()-u)*100)/100,b=Math.round((Date.now()-m)*100)/100,v=b/16,_=(E,T)=>{for(E=String(E);E.length<T;)E=" "+E;return E};console.info(`%c ${_(b,5)} /${_(x,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*v,120))}deg 100% 31%);`,n?.key)}return(c=n?.onChange)==null||c.call(n,i),i}return s.updateDeps=a=>{r=a},s}function WH(t,e){if(t===void 0)throw new Error("Unexpected undefined");return t}const SVe=(t,e)=>Math.abs(t-e)<1.01,wVe=(t,e,n)=>{let r;return function(...i){t.clearTimeout(r),r=t.setTimeout(()=>e.apply(this,i),n)}},qH=t=>{const{offsetWidth:e,offsetHeight:n}=t;return{width:e,height:n}},TVe=t=>t,EVe=t=>{const e=Math.max(t.startIndex-t.overscan,0),n=Math.min(t.endIndex+t.overscan,t.count-1),r=[];for(let i=e;i<=n;i++)r.push(i);return r},CVe=(t,e)=>{const n=t.scrollElement;if(!n)return;const r=t.targetWindow;if(!r)return;const i=a=>{const{width:o,height:l}=a;e({width:Math.round(o),height:Math.round(l)})};if(i(qH(n)),!r.ResizeObserver)return()=>{};const s=new r.ResizeObserver(a=>{const o=()=>{const l=a[0];if(l?.borderBoxSize){const c=l.borderBoxSize[0];if(c){i({width:c.inlineSize,height:c.blockSize});return}}i(qH(n))};t.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()});return s.observe(n,{box:"border-box"}),()=>{s.unobserve(n)}},XH={passive:!0},YH=typeof window>"u"?!0:"onscrollend"in window,AVe=(t,e)=>{const n=t.scrollElement;if(!n)return;const r=t.targetWindow;if(!r)return;let i=0;const s=t.options.useScrollendEvent&&YH?()=>{}:wVe(r,()=>{e(i,!1)},t.options.isScrollingResetDelay),a=u=>()=>{const{horizontal:f,isRtl:p}=t.options;i=f?n.scrollLeft*(p&&-1||1):n.scrollTop,s(),e(i,u)},o=a(!0),l=a(!1);l(),n.addEventListener("scroll",o,XH);const c=t.options.useScrollendEvent&&YH;return c&&n.addEventListener("scrollend",l,XH),()=>{n.removeEventListener("scroll",o),c&&n.removeEventListener("scrollend",l)}},MVe=(t,e,n)=>{if(e?.borderBoxSize){const r=e.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return t[n.options.horizontal?"offsetWidth":"offsetHeight"]},RVe=(t,{adjustments:e=0,behavior:n},r)=>{var i,s;const a=t+e;(s=(i=r.scrollElement)==null?void 0:i.scrollTo)==null||s.call(i,{[r.options.horizontal?"left":"top"]:a,behavior:n})};class PVe{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(i=>{i.forEach(s=>{const a=()=>{this._measureElement(s.target,s)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(a):a()})}));return{disconnect:()=>{var i;(i=r())==null||i.disconnect(),n=null},observe:i=>{var s;return(s=r())==null?void 0:s.observe(i,{box:"border-box"})},unobserve:i=>{var s;return(s=r())==null?void 0:s.unobserve(i)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,i])=>{typeof i>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:TVe,rangeExtractor:EVe,onChange:()=>{},measureElement:MVe,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,i;(i=(r=this.options).onChange)==null||i.call(r,this,n)},this.maybeNotify=gg(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(i=>{this.observer.observe(i)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(i,s)=>{this.scrollAdjustments=0,this.scrollDirection=s?this.getScrollOffset()<i?"forward":"backward":null,this.scrollOffset=i,this.isScrolling=s,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const i=new Map,s=new Map;for(let a=r-1;a>=0;a--){const o=n[a];if(i.has(o.lane))continue;const l=s.get(o.lane);if(l==null||o.end>l.end?s.set(o.lane,o):o.end<l.end&&i.set(o.lane,!0),i.size===this.options.lanes)break}return s.size===this.options.lanes?Array.from(s.values()).sort((a,o)=>a.end===o.end?a.index-o.index:a.end-o.end)[0]:void 0},this.getMeasurementOptions=gg(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(n,r,i,s,a)=>(this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:i,getItemKey:s,enabled:a}),{key:!1}),this.getMeasurements=gg(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:i,getItemKey:s,enabled:a},o)=>{if(!a)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(u=>{this.itemSizeCache.set(u.key,u.size)}));const l=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const c=this.measurementsCache.slice(0,l);for(let u=l;u<n;u++){const f=s(u),p=this.options.lanes===1?c[u-1]:this.getFurthestMeasurement(c,u),m=p?p.end+this.options.gap:r+i,x=o.get(f),b=typeof x=="number"?x:this.options.estimateSize(u),v=m+b,_=p?p.lane:u%this.options.lanes;c[u]={index:u,start:m,size:b,end:v,key:f,lane:_}}return this.measurementsCache=c,c},{key:!1,debug:()=>this.options.debug}),this.calculateRange=gg(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,i,s)=>this.range=n.length>0&&r>0?NVe({measurements:n,outerSize:r,scrollOffset:i,lanes:s}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=gg(()=>{let n=null,r=null;const i=this.calculateRange();return i&&(n=i.startIndex,r=i.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,i,s,a)=>s===null||a===null?[]:n({startIndex:s,endIndex:a,overscan:r,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,i=n.getAttribute(r);return i?parseInt(i,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const i=this.indexFromElement(n),s=this.measurementsCache[i];if(!s)return;const a=s.key,o=this.elementsCache.get(a);o!==n&&(o&&this.observer.unobserve(o),this.observer.observe(n),this.elementsCache.set(a,n)),n.isConnected&&this.resizeItem(i,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const i=this.measurementsCache[n];if(!i)return;const s=this.itemSizeCache.get(i.key)??i.size,a=r-s;a!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(i,a,this):i.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=a,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(i.index),this.itemSizeCache=new Map(this.itemSizeCache.set(i.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,i)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(i))});return}this._measureElement(n,void 0)},this.getVirtualItems=gg(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const i=[];for(let s=0,a=n.length;s<a;s++){const o=n[s],l=r[o];i.push(l)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return WH(r[pne(0,r.length-1,i=>WH(r[i]).start,n)])},this.getOffsetForAlignment=(n,r,i=0)=>{const s=this.getSize(),a=this.getScrollOffset();r==="auto"&&(r=n>=a+s?"end":"start"),r==="center"?n+=(i-s)/2:r==="end"&&(n-=s);const o=this.getTotalSize()+this.options.scrollMargin-s;return Math.max(Math.min(o,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const i=this.measurementsCache[n];if(!i)return;const s=this.getSize(),a=this.getScrollOffset();if(r==="auto")if(i.end>=a+s-this.options.scrollPaddingEnd)r="end";else if(i.start<=a+this.options.scrollPaddingStart)r="start";else return[a,r];const o=r==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,r,i.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:r="start",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:i})},this.scrollToIndex=(n,{align:r="auto",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let s=0;const a=10,o=c=>{if(!this.targetWindow)return;const u=this.getOffsetForIndex(n,c);if(!u){console.warn("Failed to get offset for index:",n);return}const[f,p]=u;this._scrollToOffset(f,{adjustments:void 0,behavior:i}),this.targetWindow.requestAnimationFrame(()=>{const m=this.getScrollOffset(),x=this.getOffsetForIndex(n,p);if(!x){console.warn("Failed to get offset for index:",n);return}SVe(x[0],m)||l(p)})},l=c=>{this.targetWindow&&(s++,s<a?this.targetWindow.requestAnimationFrame(()=>o(c)):console.warn(`Failed to scroll to index ${n} after ${a} attempts.`))};o(r)},this.scrollBy=(n,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let i;if(r.length===0)i=this.options.paddingStart;else if(this.options.lanes===1)i=((n=r[r.length-1])==null?void 0:n.end)??0;else{const s=Array(this.options.lanes).fill(null);let a=r.length-1;for(;a>=0&&s.some(o=>o===null);){const o=r[a];s[o.lane]===null&&(s[o.lane]=o.end),a--}i=Math.max(...s.filter(o=>o!==null))}return Math.max(i-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:i})=>{this.options.scrollToFn(n,{behavior:i,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(e)}}const pne=(t,e,n,r)=>{for(;t<=e;){const i=(t+e)/2|0,s=n(i);if(s<r)t=i+1;else if(s>r)e=i-1;else return i}return t>0?t-1:0};function NVe({measurements:t,outerSize:e,scrollOffset:n,lanes:r}){const i=t.length-1,s=l=>t[l].start;if(t.length<=r)return{startIndex:0,endIndex:i};let a=pne(0,i,s,n),o=a;if(r===1)for(;o<i&&t[o].end<n+e;)o++;else if(r>1){const l=Array(r).fill(0);for(;o<i&&l.some(u=>u<n+e);){const u=t[o];l[u.lane]=u.end,o++}const c=Array(r).fill(n+e);for(;a>=0&&c.some(u=>u>=n);){const u=t[a];c[u.lane]=u.start,a--}a=Math.max(0,a-a%r),o=Math.min(i,o+(r-1-o%r))}return{startIndex:a,endIndex:o}}const KH=typeof document<"u"?w.useLayoutEffect:w.useEffect;function OVe(t){const e=w.useReducer(()=>({}),{})[1],n={...t,onChange:(i,s)=>{var a;s?cx.flushSync(e):e(),(a=t.onChange)==null||a.call(t,i,s)}},[r]=w.useState(()=>new PVe(n));return r.setOptions(n),KH(()=>r._didMount(),[]),KH(()=>r._willUpdate()),r}function DVe(t){return OVe({observeElementRect:CVe,observeElementOffset:AVe,scrollToFn:RVe,...t})}function MF({entityUuid:t,entityName:e,size:n="small",showLabel:r=!1}){const{state:i,createCollection:s,addEntity:a,isEntityInCollection:o}=tC(),[l,c]=w.useState(null),[u,f]=w.useState(""),[p,m]=w.useState(!1),x=T=>{c(T.currentTarget)},b=()=>{c(null),m(!1),f("")},v=async T=>{await a(T,t),b()},_=async()=>{if(!u.trim())return;const T=await s(u.trim());T&&await a(T.id,t),b()},E=i.collections.filter(T=>T.entityUuids.includes(t));return g.jsxs(g.Fragment,{children:[g.jsx(Jt,{title:r?"":`Add to collection${E.length>0?` (in ${E.length})`:""}`,children:g.jsxs(Gt,{size:n,onClick:x,sx:{color:E.length>0?"primary.main":"inherit"},children:[g.jsx(Iwe,{fontSize:n}),r&&g.jsx(Z,{variant:"caption",sx:{ml:.5},children:"Collection"})]})}),g.jsxs(yk,{anchorEl:l,open:!!l,onClose:b,PaperProps:{sx:{minWidth:220,maxHeight:400}},children:[g.jsxs(Y,{sx:{px:2,py:1},children:[g.jsx(Z,{variant:"subtitle2",sx:{fontWeight:600},children:"Add to Collection"}),e&&g.jsx(Z,{variant:"caption",color:"text.secondary",sx:{display:"block"},children:e})]}),g.jsx(bs,{}),i.collections.length>0?i.collections.map(T=>{const A=o(T.id,t);return g.jsxs(nr,{onClick:()=>!A&&v(T.id),disabled:A,children:[g.jsx(gf,{children:A?g.jsx(e2,{sx:{color:"success.main"}}):g.jsx(xb,{})}),g.jsx(Ba,{primary:T.name,secondary:`${T.entityUuids.length} entities`,primaryTypographyProps:{variant:"body2"},secondaryTypographyProps:{variant:"caption"}}),A&&g.jsx(Dt,{label:"Added",size:"small",sx:{height:20,fontSize:"0.65rem"}})]},T.id)}):g.jsx(nr,{disabled:!0,children:g.jsx(Ba,{primary:"No collections yet",primaryTypographyProps:{variant:"body2",color:"text.secondary"}})}),g.jsx(bs,{}),p?g.jsx(Y,{sx:{px:2,py:1},children:g.jsx(wi,{autoFocus:!0,fullWidth:!0,size:"small",placeholder:"Collection name",value:u,onChange:T=>f(T.target.value),onKeyDown:T=>{T.key==="Enter"?_():T.key==="Escape"&&m(!1)},InputProps:{endAdornment:g.jsx(Gt,{size:"small",onClick:_,disabled:!u.trim(),children:g.jsx(gb,{fontSize:"small"})})}})}):g.jsxs(nr,{onClick:()=>m(!0),children:[g.jsx(gf,{children:g.jsx(gb,{})}),g.jsx(Ba,{primary:"Create new collection",primaryTypographyProps:{variant:"body2"}})]})]})]})}const Dv=[{name:"Physical",color:"#FF6B35",bits:[1,2,3,4,5,6,7,8]},{name:"Functional",color:"#00E5FF",bits:[9,10,11,12,13,14,15,16]},{name:"Abstract",color:"#9C27B0",bits:[17,18,19,20,21,22,23,24]},{name:"Social",color:"#4CAF50",bits:[25,26,27,28,29,30,31,32]}],ZH={Physical:"#FF6B35",Functional:"#00E5FF",Abstract:"#9C27B0",Social:"#4CAF50"},QH=new Map;let Kw=null,Zw=null;const JH=3e5,vf={searchQuery:"listView_searchQuery",selectedLayers:"listView_selectedLayers",minTraitCount:"listView_minTraitCount",traitFilter:"listView_traitFilter",hexFilters:"listView_hexFilters"},NL={Physical:"",Functional:"",Abstract:"",Social:""},LVe=()=>{try{const t=localStorage.getItem(vf.searchQuery)||"",e=JSON.parse(localStorage.getItem(vf.selectedLayers)||"[]"),n=localStorage.getItem(vf.minTraitCount),r=JSON.parse(localStorage.getItem(vf.traitFilter)||"null"),i=JSON.parse(localStorage.getItem(vf.hexFilters)||"null");return{searchQuery:t,selectedLayers:Array.isArray(e)?e:[],minTraitCount:n?parseInt(n):"",traitFilter:r||null,hexFilters:i||NL}}catch{return{searchQuery:"",selectedLayers:[],minTraitCount:"",traitFilter:null,hexFilters:NL}}},gv=(t,e)=>{try{typeof e=="object"?localStorage.setItem(vf[t],JSON.stringify(e)):localStorage.setItem(vf[t],String(e))}catch{}},IVe=()=>{Object.values(vf).forEach(t=>localStorage.removeItem(t))},kVe=t=>{if(!t||t.length!==8)return{dominantLayer:"Unknown",layerCounts:[0,0,0,0],totalTraits:0};const e=QH.get(t);if(e)return e;const n=(parseInt(t.slice(0,2),16).toString(2).match(/1/g)||[]).length,r=(parseInt(t.slice(2,4),16).toString(2).match(/1/g)||[]).length,i=(parseInt(t.slice(4,6),16).toString(2).match(/1/g)||[]).length,s=(parseInt(t.slice(6,8),16).toString(2).match(/1/g)||[]).length,a=[n,r,i,s],o=a.indexOf(Math.max(...a)),c={dominantLayer:["Physical","Functional","Abstract","Social"][o],layerCounts:a,totalTraits:n+r+i+s};return QH.set(t,c),c},BVe=t=>!t||t.length!==8?"0".repeat(32):parseInt(t,16).toString(2).padStart(32,"0"),FVe={Physical:[0,2],Functional:[2,4],Abstract:[4,6],Social:[6,8]},UVe=(t,e)=>{if(!t||t.length!==8)return!1;const n=t.toUpperCase();for(const[r,i]of Object.entries(e)){if(!i)continue;const s=i.toUpperCase(),[a,o]=FVe[r];if(!n.slice(a,o).startsWith(s))return!1}return!0},jVe=t=>Object.values(t).filter(e=>e.length>0).length,zVe=(t,e,n)=>{if(n===0)return!0;const r=BVe(t);for(const[i,s]of Object.entries(e)){if(s==="X")continue;const a=parseInt(i)-1,o=r[a]==="1";if(s==="1"&&!o||s==="0"&&o)return!1}return!0},mne=t=>Object.values(t).filter(e=>e!=="X").length,gne=ri.memo(({open:t,onClose:e,traits:n,traitFilter:r,onFilterChange:i})=>{const[s,a]=w.useState(r);w.useEffect(()=>{t&&a(r)},[r,t]);const o=(m,x)=>{a(b=>({...b,[m]:x}))},l=()=>{i(s),e()},c=()=>{const m={};for(let x=1;x<=32;x++)m[x]="X";a(m)},u=(m,x)=>{a(b=>{const v={...b};return m.forEach(_=>{v[_]=x}),v})},f=m=>n.filter(x=>x.layer===m).sort((x,b)=>x.bit-b.bit),p=mne(s);return g.jsxs(Bf,{open:t,onClose:e,maxWidth:"md",fullWidth:!0,children:[g.jsxs(wp,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:1},children:[g.jsx(Ok,{color:"primary"}),g.jsx(Z,{variant:"h6",children:"Trait Filter"}),p>0&&g.jsx(Dt,{label:`${p} active`,size:"small",color:"primary"})]}),g.jsx(un,{size:"small",onClick:c,startIcon:g.jsx(Wl,{}),children:"Clear All"})]}),g.jsxs(Ff,{dividers:!0,children:[g.jsxs(Z,{variant:"body2",color:"text.secondary",sx:{mb:2},children:["Set filter conditions: ",g.jsx("strong",{children:"1"})," = must have, ",g.jsx("strong",{children:"0"})," = must not have, ",g.jsx("strong",{children:"X"})," = don't care"]}),Dv.map(m=>{const x=f(m.name);return g.jsxs(Y,{sx:{mb:3},children:[g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:2,mb:1},children:[g.jsx(Y,{sx:{width:16,height:16,borderRadius:"50%",backgroundColor:m.color}}),g.jsxs(Z,{variant:"subtitle1",sx:{color:m.color,fontWeight:600},children:[m.name," Layer (Bits ",m.bits[0],"-",m.bits[7],")"]}),g.jsx(Y,{sx:{ml:"auto",display:"flex",gap:.5},children:["1","0","X"].map(b=>g.jsxs(un,{size:"small",variant:"outlined",sx:{minWidth:32,px:1,fontSize:"0.7rem"},onClick:()=>u(m.bits,b),children:["All ",b]},b))})]}),g.jsx(Y,{sx:{display:"flex",flexDirection:"column",gap:1},children:x.map(b=>g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:2,p:1,borderRadius:1,backgroundColor:s[b.bit]!=="X"?`${m.color}15`:"transparent",border:`1px solid ${s[b.bit]!=="X"?m.color:"transparent"}40`},children:[g.jsx(Dt,{label:b.bit,size:"small",sx:{minWidth:32,fontFamily:"monospace",backgroundColor:`${m.color}30`,color:m.color}}),g.jsx(Z,{variant:"body2",sx:{flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:b.expanded_definition||b.short_description,children:b.name}),g.jsxs(PK,{value:s[b.bit]||"X",exclusive:!0,onChange:(v,_)=>_&&o(b.bit,_),size:"small",children:[g.jsx(Vv,{value:"1",sx:{px:1.5,"&.Mui-selected":{backgroundColor:"#4CAF50",color:"white","&:hover":{backgroundColor:"#45a049"}}},children:"1"}),g.jsx(Vv,{value:"0",sx:{px:1.5,"&.Mui-selected":{backgroundColor:"#f44336",color:"white","&:hover":{backgroundColor:"#da190b"}}},children:"0"}),g.jsx(Vv,{value:"X",sx:{px:1.5,"&.Mui-selected":{backgroundColor:"#757575",color:"white","&:hover":{backgroundColor:"#616161"}}},children:"X"})]})]},b.bit))}),m.name!=="Social"&&g.jsx(bs,{sx:{mt:2}})]},m.name)})]}),g.jsxs(i0,{children:[g.jsx(un,{onClick:e,children:"Cancel"}),g.jsx(un,{onClick:l,variant:"contained",color:"primary",children:"Apply Filter"})]})]})});gne.displayName="TraitFilterDialog";function $Ve(){const t=yl(),e=w.useRef(null),[n,r]=w.useTransition(),{isMobile:i,isTablet:s}=tc(),a=i||s,[o,l]=w.useState([]),[c,u]=w.useState([]),[f,p]=w.useState(!0),[m,x]=w.useState(null),[b,v]=w.useState(!i),_=w.useMemo(()=>LVe(),[]),E=w.useMemo(()=>{const be={};for(let _e=1;_e<=32;_e++)be[_e]="X";return be},[]),[T,A]=w.useState(_.searchQuery),[C,M]=w.useState(_.searchQuery),[P,D]=w.useState(_.selectedLayers),[N,L]=w.useState(_.minTraitCount),[k,I]=w.useState(_.traitFilter||E),[F,z]=w.useState(!1),[H]=w.useState("name"),[B]=w.useState("asc"),j=w.useCallback(be=>{A(be),gv("searchQuery",be)},[]),G=w.useCallback(be=>{D(be),gv("selectedLayers",be)},[]),W=w.useCallback(be=>{L(be),gv("minTraitCount",be===""?"":be)},[]),re=w.useCallback(be=>{I(be),gv("traitFilter",be)},[]),[$,ee]=w.useState(_.hexFilters),oe=w.useCallback(be=>{ee(be),gv("hexFilters",be)},[]),me=w.useCallback((be,_e)=>{const Q=_e.toUpperCase().replace(/[^0-9A-F]/g,"").slice(0,2);oe({...$,[be]:Q})},[$,oe]),te=w.useMemo(()=>jVe($),[$]);w.useEffect(()=>{const be=setTimeout(()=>{r(()=>{M(T)})},300);return()=>clearTimeout(be)},[T]);const K=w.useCallback(async(be=!1)=>{const _e=Date.now();if(!be&&Kw&&Zw&&_e-Kw.timestamp<JH&&_e-Zw.timestamp<JH){l(Kw.data),u(Zw.data),p(!1);return}try{p(!0);const[Q,et]=await Promise.all([vo.getEntitiesMinimal(),Mk.getAllTraits()]),ze=Q;Kw={data:ze,timestamp:_e},Zw={data:et.traits||[],timestamp:_e},l(ze),u(et.traits||[]),x(null)}catch(Q){console.error("Failed to fetch data:",Q),x(Q instanceof Error?Q.message:"Failed to load data")}finally{p(!1)}},[]);w.useEffect(()=>{K()},[K]);const ne=w.useMemo(()=>mne(k),[k]),Ee=w.useMemo(()=>{const be=C.toLowerCase().trim(),_e=P.length>0,Q=N!==""&&N>0,et=te>0,ze=[];for(const Je of o){const fe=kVe(Je.uht_code);if(!(_e&&!P.includes(fe.dominantLayer))&&!(Q&&fe.totalTraits<N)&&zVe(Je.uht_code,k,ne)&&!(et&&!UVe(Je.uht_code,$))){if(be){const rt=Je.name.toLowerCase().includes(be),$e=Je.description?.toLowerCase().includes(be),Se=Je.uht_code.toLowerCase().includes(be);if(!rt&&!$e&&!Se)continue}ze.push({entity:Je,metrics:fe,layerColor:ZH[fe.dominantLayer]||"#757575"})}}return ze.sort((Je,fe)=>{let rt=0;switch(H){case"name":rt=Je.entity.name.localeCompare(fe.entity.name);break;case"uht_code":rt=Je.entity.uht_code.localeCompare(fe.entity.uht_code);break;case"trait_count":rt=Je.metrics.totalTraits-fe.metrics.totalTraits;break;case"created_at":rt=new Date(Je.entity.created_at).getTime()-new Date(fe.entity.created_at).getTime();break}return B==="asc"?rt:-rt}),ze},[o,C,P,N,k,ne,$,te,H,B]),se=DVe({count:Ee.length,getScrollElement:()=>e.current,estimateSize:()=>40,overscan:20}),ve=w.useCallback(()=>{j(""),G([]),W("");const be={};for(let _e=1;_e<=32;_e++)be[_e]="X";re(be),oe(NL),IVe()},[j,G,W,re,oe]),Pe=w.useCallback(be=>{t(`/entity/${be}`)},[t]),ge=T||P.length>0||N!==""||ne>0||te>0;return m?g.jsxs(Y,{sx:{p:3},children:[g.jsx(mi,{severity:"error",sx:{mb:2},children:m}),g.jsx(un,{onClick:()=>K(!0),startIcon:g.jsx(Zu,{}),children:"Retry"})]}):g.jsxs(Y,{sx:{height:"100%",width:"100%",display:"flex",flexDirection:"column",overflow:"hidden",flexGrow:1,minWidth:0,minHeight:0},children:[g.jsxs(gn,{sx:{p:a?1.5:2,borderRadius:0,borderBottom:"1px solid rgba(0, 229, 255, 0.3)",flexShrink:0},children:[g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:a?1:2,mb:a?1:2,flexWrap:"wrap"},children:[g.jsx(wZ,{color:"primary",sx:{fontSize:a?20:24}}),g.jsx(Z,{variant:a?"subtitle1":"h6",color:"primary",sx:{fontWeight:600},children:a?"Entities":"Entity List View"}),g.jsx(Dt,{label:a?`${Ee.length}/${o.length}`:`${Ee.length} of ${o.length} entities`,size:"small",color:"primary",variant:"outlined",sx:{fontSize:a?"0.7rem":"0.8rem"}}),n&&g.jsx(lr,{size:16}),a&&g.jsxs(Y,{sx:{ml:"auto",display:"flex",gap:.5},children:[g.jsx(oD,{badgeContent:ge?P.length+(T?1:0)+(N!==""?1:0)+ne+te:0,color:"primary",children:g.jsxs(Gt,{size:"small",onClick:()=>v(!b),sx:{minWidth:44,minHeight:44,backgroundColor:b?"rgba(0, 229, 255, 0.15)":"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.1)"},children:[g.jsx(CD,{sx:{fontSize:18}}),b?g.jsx(w_,{sx:{fontSize:14,ml:-.5}}):g.jsx(gx,{sx:{fontSize:14,ml:-.5}})]})}),g.jsx(Gt,{size:"small",onClick:()=>K(!0),disabled:f,sx:{minWidth:44,minHeight:44,backgroundColor:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.1)"},children:g.jsx(Zu,{sx:{fontSize:18}})})]})]}),g.jsx(ld,{in:!a||b,children:g.jsxs(Y,{sx:{display:"flex",gap:1,flexWrap:"wrap",alignItems:"center"},children:[g.jsx(wi,{size:"small",placeholder:"Search...",value:T,onChange:be=>j(be.target.value),sx:{width:a?"100%":180,"& .MuiOutlinedInput-root":{height:36,fontSize:"0.875rem",backgroundColor:"rgba(255,255,255,0.03)"}},InputProps:{startAdornment:g.jsx(Ua,{position:"start",children:g.jsx(vb,{sx:{fontSize:18,color:"text.secondary"}})}),endAdornment:T&&g.jsx(Ua,{position:"end",children:g.jsx(Gt,{size:"small",onClick:()=>j(""),sx:{p:.5},children:g.jsx(Wl,{sx:{fontSize:16}})})})}}),g.jsxs(Tf,{size:"small",sx:{minWidth:a?"calc(50% - 4px)":120,flex:a?1:"none"},children:[g.jsx(dp,{sx:{fontSize:"0.875rem"},children:"Layer"}),g.jsx(Ku,{multiple:!0,value:P,onChange:be=>G(be.target.value),input:g.jsx(qE,{label:"Layer"}),sx:{height:36,fontSize:"0.875rem",backgroundColor:P.length>0?"rgba(0, 229, 255, 0.08)":"rgba(255,255,255,0.03)","& .MuiSelect-select":{py:.5}},renderValue:be=>g.jsx(Y,{sx:{display:"flex",gap:.5},children:be.map(_e=>g.jsx(Dt,{label:_e.slice(0,1),size:"small",sx:{height:20,fontSize:"0.7rem",backgroundColor:ZH[_e],color:"white"}},_e))}),children:Dv.map(be=>g.jsxs(nr,{value:be.name,children:[g.jsx(dk,{checked:P.includes(be.name),size:"small"}),g.jsx(Y,{sx:{width:10,height:10,borderRadius:"50%",backgroundColor:be.color,mr:1}}),g.jsx(Ba,{primary:be.name,primaryTypographyProps:{fontSize:"0.875rem"}})]},be.name))})]}),g.jsx(wi,{size:"small",type:"number",label:"Min",value:N,onChange:be=>W(be.target.value===""?"":parseInt(be.target.value)),sx:{width:70,"& .MuiOutlinedInput-root":{height:36,fontSize:"0.875rem",backgroundColor:N!==""?"rgba(0, 229, 255, 0.08)":"rgba(255,255,255,0.03)"},"& .MuiInputLabel-root":{fontSize:"0.875rem"}},inputProps:{min:0,max:32}}),g.jsx(oD,{badgeContent:ne,color:"primary",sx:{"& .MuiBadge-badge":{fontSize:"0.65rem",minWidth:16,height:16}},children:g.jsx(un,{size:"small",variant:ne>0?"contained":"outlined",startIcon:g.jsx(Ok,{sx:{fontSize:16}}),onClick:()=>z(!0),sx:{height:36,textTransform:"none",fontSize:"0.875rem",px:1.5},children:"Traits"})}),g.jsxs(Y,{sx:{display:"flex",gap:.5,alignItems:"center"},children:[g.jsx(Z,{variant:"caption",sx:{color:"text.secondary",fontSize:"0.75rem",mr:.5},children:"Hex:"}),Dv.map(be=>g.jsx(wi,{size:"small",placeholder:be.name.slice(0,1),value:$[be.name],onChange:_e=>me(be.name,_e.target.value),sx:{width:44,"& .MuiOutlinedInput-root":{height:36,backgroundColor:$[be.name]?`${be.color}20`:"rgba(255,255,255,0.03)",borderColor:$[be.name]?be.color:void 0},"& .MuiOutlinedInput-input":{textAlign:"center",fontFamily:"monospace",fontSize:"0.875rem",textTransform:"uppercase",p:"6px 4px"}},inputProps:{maxLength:2},title:`${be.name} layer hex filter`},be.name))]}),g.jsx(un,{size:"small",startIcon:g.jsx(Wl,{sx:{fontSize:16}}),onClick:ve,variant:"outlined",color:ge?"error":"inherit",disabled:!ge,sx:{height:36,textTransform:"none",fontSize:"0.875rem",px:1.5,borderColor:ge?void 0:"rgba(255,255,255,0.2)",color:ge?void 0:"text.secondary"},children:"Clear"}),!a&&g.jsx(Y,{sx:{ml:"auto"},children:g.jsx(Gt,{size:"small",onClick:()=>K(!0),disabled:f,sx:{width:36,height:36,backgroundColor:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.1)","&:hover":{backgroundColor:"rgba(255,255,255,0.08)"}},children:g.jsx(Zu,{sx:{fontSize:18}})})})]})})]}),g.jsxs(Y,{sx:{display:"flex",alignItems:"center",px:a?1.5:2,py:1,backgroundColor:"rgba(0,0,0,0.3)",borderBottom:"1px solid rgba(255,255,255,0.1)",flexShrink:0},children:[!a&&g.jsx(Z,{variant:"caption",sx:{width:"5%",fontWeight:600},children:"#"}),g.jsx(Z,{variant:"caption",sx:{width:a?"45%":"25%",fontWeight:600},children:a?"Entity":"Entity Name"}),g.jsx(Z,{variant:"caption",sx:{width:a?"30%":"12%",fontWeight:600},children:a?"Code":"UHT Code"}),g.jsx(Z,{variant:"caption",sx:{width:a?"20%":"8%",fontWeight:600},children:"Layer"}),!a&&g.jsxs(g.Fragment,{children:[g.jsx(Z,{variant:"caption",sx:{width:"30%",fontWeight:600},children:"Description"}),g.jsx(Z,{variant:"caption",sx:{width:"15%",fontWeight:600,textAlign:"center"},children:"Traits (P/F/A/S)"})]}),g.jsx(Z,{variant:"caption",sx:{width:"5%",fontWeight:600}})]}),g.jsx(Y,{ref:e,sx:{flexGrow:1,overflow:"auto"},children:f?g.jsx(Y,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:200},children:g.jsx(lr,{})}):Ee.length===0?g.jsxs(Y,{sx:{textAlign:"center",py:4},children:[g.jsx(CD,{sx:{fontSize:48,color:"text.secondary",mb:2}}),g.jsx(Z,{variant:"h6",color:"text.secondary",children:"No entities found"}),g.jsx(Z,{variant:"body2",color:"text.secondary",children:o.length>0?"Try adjusting your search or filters":"Classify some entities to see them here"})]}):g.jsx("div",{style:{height:`${se.getTotalSize()}px`,width:"100%",position:"relative"},children:se.getVirtualItems().map(be=>{const{entity:_e,metrics:Q,layerColor:et}=Ee[be.index];return g.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${be.size}px`,transform:`translateY(${be.start}px)`},children:g.jsxs(Y,{onClick:()=>Pe(_e.uuid),sx:{display:"flex",alignItems:"center",px:a?1.5:2,height:"100%",borderBottom:"1px solid rgba(255,255,255,0.05)",cursor:"pointer",minHeight:a?48:40,"&:hover":{backgroundColor:`${et}15`},"&:active":{backgroundColor:`${et}25`}},children:[!a&&g.jsx(Z,{variant:"body2",sx:{width:"5%",color:"text.secondary",fontSize:"0.75rem"},children:be.index+1}),g.jsx(Z,{variant:"body2",sx:{width:a?"45%":"25%",fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",pr:1,fontSize:a?"0.85rem":"0.875rem"},children:_e.name}),g.jsx(Z,{variant:"body2",sx:{width:a?"30%":"12%",fontFamily:"monospace",fontSize:a?"0.7rem":"0.75rem",color:"text.secondary"},children:_e.uht_code}),g.jsx(Y,{sx:{width:a?"20%":"8%"},children:g.jsx(Y,{sx:{display:"inline-block",px:a?.5:1,py:.25,borderRadius:1,fontSize:a?"0.6rem":"0.7rem",backgroundColor:`${et}30`,color:et},children:a?Q.dominantLayer.slice(0,1):Q.dominantLayer.slice(0,4)})}),!a&&g.jsxs(g.Fragment,{children:[g.jsx(Z,{variant:"body2",color:"text.secondary",sx:{width:"30%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",pr:1},children:_e.description||"-"}),g.jsx(Y,{sx:{width:"15%",display:"flex",gap:.5,justifyContent:"center"},children:Q.layerCounts.map((ze,Je)=>g.jsx(Y,{sx:{minWidth:20,height:18,fontSize:"0.65rem",backgroundColor:`${Dv[Je].color}30`,color:Dv[Je].color,borderRadius:.5,display:"flex",alignItems:"center",justifyContent:"center"},children:ze},Je))})]}),g.jsxs(Y,{sx:{width:"8%",display:"flex",justifyContent:"center",gap:.5},children:[g.jsx(Y,{onClick:ze=>ze.stopPropagation(),children:g.jsx(MF,{entityUuid:_e.uuid,entityName:_e.name,size:"small"})}),g.jsx(Gt,{size:"small",onClick:ze=>{ze.stopPropagation(),Pe(_e.uuid)},sx:{minWidth:a?40:32,minHeight:a?40:32},children:g.jsx(Yf,{sx:{fontSize:a?18:16}})})]})]})},_e.uuid)})})}),g.jsx(gne,{open:F,onClose:()=>z(!1),traits:c,traitFilter:k,onFilterChange:re})]})}const xne=({title:t="UHT Factory - Universal Hex Taxonomy Classification System",description:e="Explore and classify concepts using the Universal Hex Taxonomy (UHT) system. Browse thousands of entities across physical, biological, social, psychological, and abstract domains with AI-powered classification.",keywords:n="taxonomy, classification, universal hex taxonomy, UHT, entity classification, knowledge graph, ontology, AI classification, semantic web",image:r="https://factory.universalhex.org/og-image.png",url:i="https://factory.universalhex.org/",type:s="website",structuredData:a})=>{const o=t.includes("UHT Factory")?t:`${t} | UHT Factory`;return g.jsxs(C1e,{children:[g.jsx("title",{children:o}),g.jsx("meta",{name:"title",content:o}),g.jsx("meta",{name:"description",content:e}),g.jsx("meta",{name:"keywords",content:n}),g.jsx("meta",{property:"og:type",content:s}),g.jsx("meta",{property:"og:url",content:i}),g.jsx("meta",{property:"og:title",content:o}),g.jsx("meta",{property:"og:description",content:e}),g.jsx("meta",{property:"og:image",content:r}),g.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),g.jsx("meta",{name:"twitter:url",content:i}),g.jsx("meta",{name:"twitter:title",content:o}),g.jsx("meta",{name:"twitter:description",content:e}),g.jsx("meta",{name:"twitter:image",content:r}),g.jsx("link",{rel:"canonical",href:i}),a&&g.jsx("script",{type:"application/ld+json",children:JSON.stringify(a)})]})};let ho=null;const GVe=3e5,Vh={layerFilter:"gallery_layerFilter",sortBy:"gallery_sortBy",hasWikidata:"gallery_hasWikidata",textSearch:"gallery_textSearch",viewMode:"gallery_viewMode",includeNsfw:"gallery_includeNsfw"},VVe=()=>{try{return{layerFilter:localStorage.getItem(Vh.layerFilter)||"",sortBy:localStorage.getItem(Vh.sortBy)||"newest",hasWikidata:localStorage.getItem(Vh.hasWikidata)||"all",textSearch:localStorage.getItem(Vh.textSearch)||"",viewMode:localStorage.getItem(Vh.viewMode)||"grid",includeNsfw:localStorage.getItem(Vh.includeNsfw)==="true"}}catch{return{layerFilter:"",sortBy:"newest",hasWikidata:"all",textSearch:"",viewMode:"grid",includeNsfw:!1}}},kh=(t,e)=>{try{localStorage.setItem(Vh[t],e)}catch{}},_c={Physical:"#FF6B35",Functional:"#00E5FF",Abstract:"#9C27B0",Social:"#4CAF50",Unknown:"#757575"},HVe=t=>{try{if(!t||t.length!==8)return"Unknown";const e={Physical:parseInt(t.slice(0,2),16).toString(2).split("1").length-1,Functional:parseInt(t.slice(2,4),16).toString(2).split("1").length-1,Abstract:parseInt(t.slice(4,6),16).toString(2).split("1").length-1,Social:parseInt(t.slice(6,8),16).toString(2).split("1").length-1};return Object.entries(e).reduce((n,r)=>n[1]>r[1]?n:r)[0]}catch{return"Unknown"}},Lv="",yne=t=>t?t.startsWith("http://")||t.startsWith("https://")?t:`${Lv}${t}`:"",WVe=({item:t,position:e,onPositionChange:n,onDoubleClick:r,onSelect:i,onOpenEntity:s,isMobile:a=!1})=>{const o=w.useRef(null),[l,c]=w.useState(!1),[u,f]=w.useState({x:0,y:0}),p=A=>{a||A.detail!==2&&(c(!0),f({x:A.clientX-e.x,y:A.clientY-e.y}),i(t.uuid),A.preventDefault())},m=w.useCallback(A=>{if(!l)return;const C=A.clientX-u.x,M=A.clientY-u.y;n(t.uuid,{x:C,y:M})},[l,u,t.uuid,n]),x=w.useCallback(()=>{c(!1)},[]),b=A=>{if(a||A.touches.length!==1)return;const C=A.touches[0];c(!0),f({x:C.clientX-e.x,y:C.clientY-e.y}),i(t.uuid)},v=w.useCallback(A=>{if(!l||A.touches.length!==1)return;const C=A.touches[0],M=C.clientX-u.x,P=C.clientY-u.y;n(t.uuid,{x:M,y:P})},[l,u,t.uuid,n]),_=w.useCallback(()=>{c(!1)},[]);w.useEffect(()=>{if(l)return document.addEventListener("mousemove",m),document.addEventListener("mouseup",x),document.addEventListener("touchmove",v,{passive:!0}),document.addEventListener("touchend",_),()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",x),document.removeEventListener("touchmove",v),document.removeEventListener("touchend",_)}},[l,m,x,v,_]);const E=A=>{},T=()=>{a&&!l&&r(t)};return g.jsxs(xi,{ref:o,sx:{position:"absolute",left:e.x,top:e.y,width:e.width,height:e.height,zIndex:e.zIndex,cursor:a?"pointer":l?"grabbing":"grab",boxShadow:l?"0 8px 32px rgba(0,0,0,0.3)":"0 2px 8px rgba(0,0,0,0.1)",transition:l?"none":"box-shadow 0.2s ease",transform:l?"scale(1.02)":"scale(1)",border:"2px solid transparent",touchAction:a?"auto":"none","&:hover":{border:`2px solid ${_c[t.dominant_layer]||_c.Unknown}`,boxShadow:"0 4px 16px rgba(0,0,0,0.2)"}},onMouseDown:p,onTouchStart:b,onClick:T,onDoubleClick:()=>!a&&r(t),children:[g.jsxs(Y,{sx:{position:"relative",height:e.height*.7},children:[g.jsx(fK,{component:"img",image:yne(t.image_url),alt:t.name,sx:{height:"100%",objectFit:"cover"},onLoad:E,onError:A=>{const C=A.target;C.style.display="none"}}),g.jsx(Y,{sx:{position:"absolute",top:4,right:4},onClick:A=>A.stopPropagation(),onMouseDown:A=>A.stopPropagation(),children:g.jsx(MF,{entityUuid:t.uuid,entityName:t.name,size:"small"})}),g.jsx(Gt,{size:"small",onClick:A=>{A.stopPropagation(),s(t)},onMouseDown:A=>A.stopPropagation(),sx:{position:"absolute",bottom:4,right:4,p:.5,backgroundColor:"rgba(0,0,0,0.6)",color:"white","&:hover":{backgroundColor:_c[t.dominant_layer]||_c.Unknown}},title:"Open entity definition",children:g.jsx(Yf,{sx:{fontSize:a?"0.7rem":"0.85rem"}})})]}),g.jsxs(yi,{sx:{height:e.height*.3,minHeight:0,p:a?.5:.75,"&:last-child":{pb:a?.5:.75},position:"relative",overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[g.jsx(Z,{variant:"caption",component:"h3",sx:{fontWeight:"bold",fontSize:a?"0.55rem":"0.65rem",lineHeight:1.2,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.name}),a?g.jsxs(Y,{sx:{display:"flex",flexDirection:"column",gap:.25},children:[g.jsx(Z,{variant:"caption",sx:{fontFamily:"monospace",fontSize:"0.5rem",color:"text.secondary",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.uht_code}),g.jsx(Dt,{label:t.dominant_layer.slice(0,1),size:"small",sx:{backgroundColor:_c[t.dominant_layer]||_c.Unknown,color:"white",fontSize:"0.5rem",height:"14px",minWidth:"14px",width:"fit-content","& .MuiChip-label":{px:.25}}})]}):g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:.5,overflow:"hidden"},children:[g.jsx(Dt,{label:t.dominant_layer,size:"small",sx:{backgroundColor:_c[t.dominant_layer]||_c.Unknown,color:"white",fontSize:"0.65rem",height:"20px","& .MuiChip-label":{px:.75}}}),g.jsx(Dt,{label:t.uht_code,size:"small",variant:"outlined",sx:{fontSize:"0.6rem",height:"20px",fontFamily:"monospace","& .MuiChip-label":{px:.6}}})]})]})]})},qVe=({item:t,open:e,onClose:n})=>t?g.jsx(Bf,{open:e,onClose:n,maxWidth:!1,sx:{zIndex:9999},PaperProps:{sx:{bgcolor:"rgba(0,0,0,0.9)",boxShadow:"none",maxWidth:"90vw",maxHeight:"90vh"}},children:g.jsxs(Ff,{sx:{p:0,position:"relative"},children:[g.jsx(Gt,{onClick:n,sx:{position:"absolute",right:8,top:8,color:"white",bgcolor:"rgba(0,0,0,0.5)",zIndex:1e3,"&:hover":{bgcolor:"rgba(0,0,0,0.7)"}},children:g.jsx(mx,{})}),g.jsx("img",{src:yne(t.image_url),alt:t.name,style:{maxWidth:"90vw",maxHeight:"90vh",objectFit:"contain",display:"block"}}),g.jsxs(Y,{sx:{position:"absolute",bottom:0,left:0,right:0,background:"linear-gradient(transparent, rgba(0,0,0,0.8))",color:"white",p:2},children:[g.jsx(Z,{variant:"h6",gutterBottom:!0,children:t.name}),g.jsx(Z,{variant:"body2",sx:{opacity:.9},children:t.description}),g.jsxs(Y,{sx:{mt:1,display:"flex",gap:1},children:[g.jsx(Dt,{label:t.dominant_layer,size:"small",sx:{backgroundColor:_c[t.dominant_layer]||_c.Unknown,color:"white"}}),g.jsx(Dt,{label:t.uht_code,size:"small",sx:{backgroundColor:"rgba(255,255,255,0.2)",color:"white"}})]})]})]})}):null;function e7(){const t=yl(),{isMobile:e,isTablet:n}=tc(),r=e||n,i=VVe(),[s,a]=w.useState([]),[o,l]=w.useState(!0),[c,u]=w.useState(!1),[f,p]=w.useState(null),[m,x]=w.useState(i.layerFilter),[b,v]=w.useState(i.sortBy),[_,E]=w.useState(i.hasWikidata),[T,A]=w.useState({}),[,C]=w.useState(null),[M,P]=w.useState(null),[D,N]=w.useState(i.viewMode),[L,k]=w.useState(1e3),[I,F]=w.useState(!0),[z,H]=w.useState(0),[B,j]=w.useState(0),G=w.useRef(null),W=50,[re,$]=w.useState(i.textSearch),[ee,oe]=w.useState(i.textSearch),me=we=>{x(we),kh("layerFilter",we)},te=we=>{v(we),kh("sortBy",we)},K=we=>{E(we),kh("hasWikidata",we)},ne=we=>{N(we),kh("viewMode",we)},[Ee,se]=w.useState(""),[ve,Pe]=w.useState([]),[ge,be]=w.useState(!1),[_e,Q]=w.useState(!1),[et,ze]=w.useState(!1),[Je,fe]=w.useState(i.includeNsfw),rt=we=>{fe(we),kh("includeNsfw",we.toString())},$e=[m?1:0,ee?1:0,_!=="all"?1:0,_e?1:0,Je?1:0].reduce((we,Ke)=>we+Ke,0),Se=we=>{q(we.uuid),t(`/entity/${we.uuid}`)},q=async we=>{try{const Ke=Lv||window.location.origin;await fetch(`${Ke}/api/v1/images/entity/${we}/view`,{method:"POST"})}catch(Ke){console.error("Failed to track view:",Ke)}},V=()=>{if(re.trim()===ee)return;const we=re.trim();oe(we),kh("textSearch",we),H(0),A({}),le(we)},ie=we=>{we.key==="Enter"&&V()},le=async we=>{try{l(!0);const Ke=Lv||window.location.origin,Ge=new URL(`${Ke}/api/v1/images/gallery`);Ge.searchParams.set("limit",W.toString()),Ge.searchParams.set("offset","0"),Ge.searchParams.set("sort_by",b),m&&Ge.searchParams.set("layer_filter",m),_==="yes"?Ge.searchParams.set("has_wikidata","true"):_==="no"&&Ge.searchParams.set("has_wikidata","false"),we&&we.trim()&&Ge.searchParams.set("search",we.trim()),Je&&Ge.searchParams.set("include_nsfw","true");const Xe=await fetch(Ge.toString());if(!Xe.ok)throw new Error(`Failed to fetch gallery: ${Xe.statusText}`);const Ve=await Xe.json();a(Ve.gallery||[]),H(Ve.gallery?.length||0),F(Ve.has_more),j(Ve.total_count),p(null)}catch(Ke){console.error("Gallery fetch error:",Ke),p(Ke instanceof Error?Ke.message:"Failed to load gallery")}finally{l(!1)}},xe=async()=>{const we=Ee.trim();if(we){be(!0),Q(!0),p(null);try{const Ke=Lv||window.location.origin,Ge=await fetch(`${Ke}/api/v1/embeddings/search`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:we,limit:50,min_score:.5})});if(!Ge.ok)throw new Error(`Search failed: ${Ge.statusText}`);const Xe=await Ge.json();Pe(Xe.results),A({})}catch(Ke){console.error("Semantic search error:",Ke),p(Ke instanceof Error?Ke.message:"Search failed"),Pe([])}finally{be(!1)}}},pe=we=>{we.key==="Enter"&&Ee.trim()&&xe()},it=()=>{se(""),Pe([]),Q(!1),A({})},We=()=>{$(""),oe(""),kh("textSearch",""),H(0),A({}),Be(m||void 0,b,_,!1)},dt=ve.filter(we=>we.image_url).filter((we,Ke,Ge)=>Ge.findIndex(Xe=>Xe.uuid===we.uuid)===Ke).map(we=>({uuid:we.uuid,name:we.name,description:we.description||"",uht_code:we.uht_code||"",image_url:we.image_url,dominant_layer:HVe(we.uht_code||""),created_at:null,similarity_score:we.similarity_score})),ft=_e?dt:s,Be=async(we,Ke,Ge,Xe=!1,Ve=!1)=>{const yt={layerFilter:we||"",sortBy:Ke||b,hasWikidata:Ge||_,textSearch:ee,includeNsfw:Je};if(!Xe&&!Ve&&ho){const Mt=Date.now();if(ho.filters.layerFilter===yt.layerFilter&&ho.filters.sortBy===yt.sortBy&&ho.filters.hasWikidata===yt.hasWikidata&&ho.filters.textSearch===yt.textSearch&&ho.filters.includeNsfw===yt.includeNsfw&&Mt-ho.timestamp<GVe){a(ho.data),j(ho.totalCount),F(ho.hasMore),H(ho.data.length),l(!1);return}}try{Xe?u(!0):(l(!0),H(0));const Mt=Xe?z:0,Ct=Lv||window.location.origin,Kt=new URL(`${Ct}/api/v1/images/gallery`);Kt.searchParams.set("limit",W.toString()),Kt.searchParams.set("offset",Mt.toString()),Kt.searchParams.set("sort_by",Ke||b),we&&Kt.searchParams.set("layer_filter",we);const vt=Ge||_;vt==="yes"?Kt.searchParams.set("has_wikidata","true"):vt==="no"&&Kt.searchParams.set("has_wikidata","false"),Je&&Kt.searchParams.set("include_nsfw","true");const It=await fetch(Kt.toString());if(!It.ok)throw new Error(`Failed to fetch gallery: ${It.statusText}`);const dn=await It.json();Xe?(a(bn=>{const sr=new Set(bn.map(aa=>aa.uuid)),Rr=(dn.gallery||[]).filter(aa=>!sr.has(aa.uuid)),ls=[...bn,...Rr];return ho={data:ls,timestamp:Date.now(),filters:yt,totalCount:dn.total_count,hasMore:dn.has_more},ls}),H(Mt+(dn.gallery?.length||0))):(a(dn.gallery||[]),H(dn.gallery?.length||0),A({}),ho={data:dn.gallery||[],timestamp:Date.now(),filters:yt,totalCount:dn.total_count,hasMore:dn.has_more}),F(dn.has_more),j(dn.total_count),p(null)}catch(Mt){console.error("Gallery fetch error:",Mt),p(Mt instanceof Error?Mt.message:"Failed to load gallery")}finally{l(!1),u(!1)}},ot=w.useCallback(()=>{!c&&I&&Be(m||void 0,b,_,!0)},[c,I,m,b,_]),st=w.useCallback(()=>{ft.length!==0&&A(we=>{const Ke={...we},Ge=G.current?.clientWidth||(r?375:1200),Xe=G.current?.clientHeight||800,Ve=r?8:20,yt=r?3:Math.max(1,Math.floor((Ge-Ve)/(200+Ve))),Mt=r?Math.floor((Ge-Ve*4)/3):200,Ct=r?Math.floor(Mt*1.4):260;return ft.forEach((Kt,vt)=>{if(Ke[Kt.uuid]&&D==="grid")return;if((r?"grid":D)==="grid"){const dn=Math.floor(vt/yt),bn=vt%yt,sr=yt*(Mt+Ve)-Ve,Rr=Math.max(Ve,(Ge-sr)/2);Ke[Kt.uuid]={x:Rr+bn*(Mt+Ve),y:Ve+dn*(Ct+Ve),width:Mt,height:Ct,zIndex:1e3+vt}}else Ke[Kt.uuid]={x:50+Math.random()*Math.max(0,Ge-300-100),y:50+Math.random()*Math.max(0,Xe-400),width:180+Math.random()*120,height:220+Math.random()*160,zIndex:1e3+vt}}),Ke})},[ft,D,r]);w.useEffect(()=>{if(ft.length>0&&(ft.some(Ke=>!T[Ke.uuid])||Object.keys(T).length===0)){const Ke=setTimeout(st,50);return()=>clearTimeout(Ke)}},[ft,D,st]),w.useEffect(()=>{ee?le(ee):Be(m||void 0,b,_,!1)},[m,b,_,ee,Je]),w.useEffect(()=>{const we=G.current;if(!we||_e)return;const Ke=()=>{if(c||o||!I||_e)return;const{scrollTop:Ge,scrollHeight:Xe,clientHeight:Ve}=we;Ge+Ve>=Xe-300&&ot()};return we.addEventListener("scroll",Ke),Ke(),()=>we.removeEventListener("scroll",Ke)},[I,c,o,ot,T,_e]),w.useEffect(()=>{const we=()=>{D==="grid"&&ft.length>0&&st()};return window.addEventListener("resize",we),()=>window.removeEventListener("resize",we)},[ft,D,st]);const ht=(we,Ke)=>{A(Ge=>({...Ge,[we]:{...Ge[we],...Ke}}))},gt=we=>{C(we),A(Ke=>({...Ke,[we]:{...Ke[we],zIndex:L}})),k(Ke=>Ke+1)},Ut=we=>{q(we.uuid),P(we)},ue=()=>{ne(D==="grid"?"freeform":"grid"),A({})};return f?g.jsx(Y,{sx:{p:3},children:g.jsx(mi,{severity:"error",sx:{mb:2},children:f})}):g.jsxs(Y,{sx:{display:"flex",flexDirection:"column",flexGrow:1,minWidth:0,minHeight:0,width:"100%",height:"100%",overflow:"hidden",bgcolor:"background.default"},children:[g.jsx(xne,{title:"Image Gallery - Explore the UHT Taxonomy",description:`Browse ${B} classified entities in the Universal Hex Taxonomy. Explore concepts across physical, functional, abstract, and social domains with AI-generated images and detailed trait analysis.`,keywords:"entity gallery, UHT entities, taxonomy visualization, classified concepts, AI images, knowledge graph browser",url:"https://factory.universalhex.org/gallery"}),g.jsxs(gn,{sx:{p:r?1.5:2,borderRadius:0,borderBottom:"1px solid rgba(0, 229, 255, 0.3)",flexShrink:0},children:[g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:r?1:2,mb:r?1:2,flexWrap:"wrap"},children:[g.jsx(_Z,{color:"primary",sx:{fontSize:r?20:24}}),g.jsx(Z,{variant:r?"subtitle1":"h6",color:"primary",sx:{fontWeight:600},children:r?"Gallery":"Image Gallery"}),g.jsx(Dt,{label:r?`${s.length}/${B}`:`${s.length} of ${B} images`,size:"small",color:"primary",variant:"outlined",sx:{fontSize:r?"0.7rem":"0.8rem"}}),(o||ge)&&g.jsx(lr,{size:16}),r&&g.jsxs(Y,{sx:{ml:"auto",display:"flex",gap:.5},children:[g.jsx(oD,{badgeContent:$e,color:"primary",children:g.jsxs(Gt,{size:"small",onClick:()=>ze(!et),sx:{minWidth:44,minHeight:44,backgroundColor:et?"rgba(0, 229, 255, 0.15)":"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.1)"},children:[g.jsx(CD,{sx:{fontSize:18}}),et?g.jsx(w_,{sx:{fontSize:14,ml:-.5}}):g.jsx(gx,{sx:{fontSize:14,ml:-.5}})]})}),g.jsx(Gt,{size:"small",onClick:()=>Be(m||void 0,b,_,!1,!0),disabled:o,sx:{minWidth:44,minHeight:44,backgroundColor:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.1)"},children:g.jsx(Zu,{sx:{fontSize:18}})})]})]}),g.jsx(ld,{in:!r||et,children:g.jsxs(Y,{sx:{display:"flex",gap:r?1:1.5,flexWrap:"wrap",alignItems:"center"},children:[g.jsx(wi,{size:"small",placeholder:"Search name...",value:re,onChange:we=>$(we.target.value),onKeyDown:ie,disabled:_e,sx:{width:r?"100%":160,"& .MuiOutlinedInput-root":{height:36,fontSize:"0.875rem",bgcolor:ee?"action.selected":"rgba(255,255,255,0.03)"},"& .MuiOutlinedInput-input":{py:"7px"}},InputProps:{startAdornment:g.jsx(Ua,{position:"start",sx:{mr:0},children:g.jsx(vb,{onClick:V,sx:{fontSize:18,color:re.trim()?"primary.main":"action.active",cursor:"pointer"}})}),endAdornment:re&&g.jsx(Ua,{position:"end",children:g.jsx(Gt,{size:"small",onClick:We,edge:"end",sx:{p:.25},children:g.jsx(Wl,{sx:{fontSize:16}})})})}}),g.jsx(wi,{size:"small",placeholder:"AI search...",value:Ee,onChange:we=>se(we.target.value),onKeyDown:pe,sx:{width:r?"100%":140,"& .MuiOutlinedInput-root":{height:36,fontSize:"0.875rem",bgcolor:_e?"action.selected":"rgba(255,255,255,0.03)"},"& .MuiOutlinedInput-input":{py:"7px"}},InputProps:{startAdornment:g.jsx(Ua,{position:"start",sx:{mr:0},children:ge?g.jsx(lr,{size:16}):g.jsx(a0,{onClick:xe,sx:{fontSize:18,color:_e?"primary.main":"action.active",cursor:"pointer"}})}),endAdornment:(Ee||_e)&&g.jsx(Ua,{position:"end",children:g.jsx(Gt,{size:"small",onClick:it,edge:"end",sx:{p:.25},children:g.jsx(Wl,{sx:{fontSize:16}})})})}}),!_e&&g.jsxs(Tf,{size:"small",sx:{minWidth:r?"calc(50% - 4px)":110,flex:r?1:"none"},children:[g.jsx(dp,{sx:{fontSize:"0.875rem"},children:"Sort"}),g.jsxs(Ku,{value:b,label:"Sort",onChange:we=>te(we.target.value),sx:{height:36,fontSize:"0.875rem"},children:[g.jsx(nr,{value:"newest",children:"Newest"}),g.jsx(nr,{value:"most_views",children:"Most Views"}),g.jsx(nr,{value:"uht_code",children:"UHT Code"}),g.jsx(nr,{value:"name",children:"Name"}),g.jsx(nr,{value:"random",children:"Random"})]})]}),!_e&&g.jsxs(Tf,{size:"small",sx:{minWidth:r?"calc(50% - 4px)":110,flex:r?1:"none"},children:[g.jsx(dp,{sx:{fontSize:"0.875rem"},children:"Layer"}),g.jsxs(Ku,{value:m,label:"Layer",onChange:we=>me(we.target.value),sx:{height:36,fontSize:"0.875rem"},children:[g.jsx(nr,{value:"",children:"All"}),g.jsx(nr,{value:"Physical",children:"Physical"}),g.jsx(nr,{value:"Functional",children:"Functional"}),g.jsx(nr,{value:"Abstract",children:"Abstract"}),g.jsx(nr,{value:"Social",children:"Social"})]})]}),!_e&&g.jsxs(Tf,{size:"small",sx:{minWidth:r?"calc(50% - 4px)":100,flex:r?1:"none"},children:[g.jsx(dp,{sx:{fontSize:"0.875rem"},children:"Source"}),g.jsxs(Ku,{value:_,label:"Source",onChange:we=>K(we.target.value),sx:{height:36,fontSize:"0.875rem"},children:[g.jsx(nr,{value:"all",children:"All"}),g.jsx(nr,{value:"yes",children:"Wikidata"}),g.jsx(nr,{value:"no",children:"Custom"})]})]}),g.jsx(Ef,{control:g.jsx(dk,{checked:Je,onChange:we=>rt(we.target.checked),size:"small",sx:{p:.5,color:"rgba(255,255,255,0.5)","&.Mui-checked":{color:"#f44336"}}}),label:"NSFW",sx:{ml:0,mr:0,"& .MuiFormControlLabel-label":{fontSize:"0.875rem",color:Je?"#f44336":"text.secondary"}}}),r&&$e>0&&g.jsx(Gt,{size:"small",onClick:()=>{me(""),K("all"),rt(!1),We(),it()},sx:{minWidth:36,minHeight:36,backgroundColor:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.1)",color:"error.main"},children:g.jsx(Wl,{sx:{fontSize:18}})})]})})]}),!r&&g.jsx(jh,{onClick:ue,sx:{position:"fixed",bottom:20,right:20,zIndex:2e3},color:"primary",children:D==="grid"?g.jsx(Gwe,{}):g.jsx(EZ,{})}),g.jsx(Y,{ref:G,sx:{flex:1,height:"calc(100% - 72px)",position:"relative",userSelect:"none",overflow:"auto"},children:o||ge?g.jsxs(Y,{sx:{p:3,display:"flex",alignItems:"center",gap:2},children:[g.jsx(lr,{size:24}),g.jsx(Z,{children:ge?"Searching...":"Loading gallery..."})]}):ft.length===0?g.jsx(Y,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center"},children:_e?g.jsxs(g.Fragment,{children:[g.jsx(vb,{sx:{fontSize:64,color:"text.secondary",mb:2}}),g.jsx(Z,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No matching images found"}),g.jsx(Z,{variant:"body2",color:"text.secondary",children:"Try a different search term or clear the search to browse all images"})]}):g.jsxs(g.Fragment,{children:[g.jsx(o0,{sx:{fontSize:64,color:"text.secondary",mb:2}}),g.jsx(Z,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No images found"}),g.jsx(Z,{variant:"body2",color:"text.secondary",children:"Generate some images for classified entities to see them here"})]})}):g.jsxs(g.Fragment,{children:[ft.map(we=>T[we.uuid]&&g.jsx(WVe,{item:we,position:T[we.uuid],onPositionChange:ht,onDoubleClick:Ut,onSelect:gt,onOpenEntity:Se,isMobile:r},we.uuid)),g.jsxs(Y,{sx:{position:"absolute",top:Object.values(T).reduce((we,Ke)=>Math.max(we,Ke.y+Ke.height),0)+20,left:0,right:0,height:100,display:"flex",justifyContent:"center",alignItems:"center"},children:[c&&!_e&&g.jsx(lr,{size:32}),!_e&&!I&&s.length>0&&g.jsxs(Z,{variant:"body2",color:"text.secondary",children:["All ",B," images loaded"]}),_e&&ft.length>0&&g.jsxs(Z,{variant:"body2",color:"text.secondary",children:["Showing ",ft.length," semantically similar images"]})]})]})}),g.jsx(qVe,{item:M,open:!!M,onClose:()=>P(null)})]})}const OL=[{name:"Physical",color:"#FF6B35",bits:[1,2,3,4,5,6,7,8],hexSlice:[0,2]},{name:"Functional",color:"#00E5FF",bits:[9,10,11,12,13,14,15,16],hexSlice:[2,4]},{name:"Abstract",color:"#9C27B0",bits:[17,18,19,20,21,22,23,24],hexSlice:[4,6]},{name:"Social",color:"#4CAF50",bits:[25,26,27,28,29,30,31,32],hexSlice:[6,8]}],XVe="",YVe=({binary:t,uhtCode:e,isMobile:n=!1})=>{const r=t.padStart(32,"0");return g.jsxs(Y,{sx:{mb:3},children:[g.jsx(Z,{variant:"subtitle2",color:"text.secondary",sx:{mb:1},children:"Binary Representation (32 bits)"}),g.jsx(Y,{sx:{display:"flex",flexDirection:"column",gap:1,overflowX:"auto",pb:1},children:OL.map((i,s)=>{const a=r.slice(s*8,(s+1)*8),o=e.slice(i.hexSlice[0],i.hexSlice[1]);return g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:n?1:2,minWidth:n?"fit-content":"auto"},children:[g.jsx(Jt,{title:i.name,children:g.jsx(Y,{sx:{width:12,height:12,borderRadius:"50%",backgroundColor:i.color,flexShrink:0}})}),g.jsx(Z,{variant:"caption",sx:{width:n?60:80,color:i.color,fontWeight:500,fontSize:n?"0.7rem":"0.75rem",flexShrink:0},children:n?i.name.slice(0,4):i.name}),g.jsx(Y,{sx:{display:"flex",gap:.25,flexShrink:0},children:a.split("").map((l,c)=>g.jsx(Jt,{title:`Bit ${s*8+c+1}: ${l==="1"?"Active":"Inactive"}`,children:g.jsx(Y,{sx:{width:n?20:24,height:n?20:24,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:.5,fontFamily:"monospace",fontSize:n?"0.65rem":"0.75rem",fontWeight:600,backgroundColor:l==="1"?`${i.color}`:"rgba(255,255,255,0.05)",color:l==="1"?"white":"text.disabled",border:`1px solid ${l==="1"?i.color:"rgba(255,255,255,0.1)"}`},children:l})},c))}),g.jsx(Dt,{label:o,size:"small",sx:{fontFamily:"monospace",backgroundColor:`${i.color}30`,color:i.color,fontWeight:600,fontSize:n?"0.65rem":"0.75rem",flexShrink:0}})]},i.name)})})]})},KVe=({trait:t,layerColor:e,expanded:n,onToggle:r,isMobile:i=!1})=>{const{evaluation:s}=t;return g.jsxs(gn,{sx:{mb:1,overflow:"hidden",border:`1px solid ${s.applicable?e:"rgba(255,255,255,0.1)"}40`,opacity:s.applicable?1:.7},children:[g.jsxs(Y,{onClick:r,sx:{display:"flex",alignItems:i?"flex-start":"center",flexWrap:i?"wrap":"nowrap",gap:i?1:1.5,p:i?1:1.5,cursor:"pointer",backgroundColor:s.applicable?`${e}10`:"transparent","&:hover":{backgroundColor:s.applicable?`${e}20`:"rgba(255,255,255,0.02)"}},children:[g.jsx(Dt,{label:t.bit,size:"small",sx:{minWidth:32,fontFamily:"monospace",fontWeight:600,fontSize:i?"0.7rem":"0.8rem",backgroundColor:s.applicable?e:"rgba(255,255,255,0.1)",color:s.applicable?"white":"text.secondary"}}),g.jsx(Y,{sx:{width:i?20:24,height:i?20:24,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:s.applicable?"#4CAF50":"#f44336",flexShrink:0},children:s.applicable?g.jsx(e2,{sx:{fontSize:i?12:16,color:"white"}}):g.jsx(mx,{sx:{fontSize:i?12:16,color:"white"}})}),g.jsx(Z,{variant:"body2",sx:{flex:1,fontWeight:500,fontSize:i?"0.8rem":"0.875rem",minWidth:i?"100px":"auto"},children:t.name}),i?g.jsx(Dt,{label:`${(s.confidence*100).toFixed(0)}%`,size:"small",sx:{fontSize:"0.65rem",height:20,backgroundColor:s.confidence>.8?"#4CAF5030":s.confidence>.6?"#FF980030":"#f4433630",color:s.confidence>.8?"#4CAF50":s.confidence>.6?"#FF9800":"#f44336"}}):g.jsx(Jt,{title:`Confidence: ${(s.confidence*100).toFixed(0)}%`,children:g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:1,minWidth:100},children:[g.jsx(gk,{variant:"determinate",value:s.confidence*100,sx:{flex:1,height:6,borderRadius:3,backgroundColor:"rgba(255,255,255,0.1)","& .MuiLinearProgress-bar":{backgroundColor:s.confidence>.8?"#4CAF50":s.confidence>.6?"#FF9800":"#f44336",borderRadius:3}}}),g.jsxs(Z,{variant:"caption",sx:{minWidth:35,textAlign:"right"},children:[(s.confidence*100).toFixed(0),"%"]})]})}),g.jsx(Gt,{size:"small",sx:{p:i?.5:1},children:n?g.jsx(w_,{}):g.jsx(gx,{})})]}),g.jsx(ld,{in:n,children:g.jsxs(Y,{sx:{p:i?1.5:2,pt:0,borderTop:"1px solid rgba(255,255,255,0.05)"},children:[g.jsxs(Z,{variant:"body2",color:"text.secondary",sx:{mb:1.5,fontSize:i?"0.8rem":"0.875rem"},children:[g.jsx("strong",{children:"Definition:"})," ",t.expanded_definition||t.short_description]}),g.jsxs(Z,{variant:"body2",color:"text.secondary",sx:{fontSize:i?"0.8rem":"0.875rem"},children:[g.jsx("strong",{children:"Justification:"})," ",s.justification]}),t.url&&g.jsx(un,{size:"small",href:t.url,target:"_blank",sx:{mt:1,minHeight:36},children:"Learn More"})]})})]})},ZVe=({layer:t,traits:e,expandedTraits:n,onToggleTrait:r,isMobile:i=!1})=>{const[s,a]=w.useState(!0),o=e.filter(l=>l.evaluation.applicable).length;return g.jsxs(gn,{sx:{mb:2,overflow:"hidden",border:`1px solid ${t.color}30`},children:[g.jsxs(Y,{onClick:()=>a(!s),sx:{display:"flex",alignItems:"center",gap:i?1:2,p:i?1.5:2,cursor:"pointer",backgroundColor:`${t.color}15`,"&:hover":{backgroundColor:`${t.color}20`}},children:[g.jsx(Y,{sx:{width:i?12:16,height:i?12:16,borderRadius:"50%",backgroundColor:t.color,flexShrink:0}}),g.jsxs(Z,{variant:i?"subtitle1":"h6",sx:{color:t.color,fontWeight:600,flex:1,fontSize:i?"0.95rem":"1.25rem"},children:[t.name," Layer"]}),g.jsx(Dt,{label:`${o}/${e.length}`,size:"small",sx:{backgroundColor:`${t.color}30`,color:t.color,fontSize:i?"0.7rem":"0.8rem"}}),g.jsx(Gt,{size:"small",sx:{color:t.color,p:i?.5:1},children:s?g.jsx(w_,{}):g.jsx(gx,{})})]}),g.jsx(ld,{in:s,children:g.jsx(Y,{sx:{p:i?1:2},children:e.length===0?g.jsx(Z,{color:"text.secondary",children:"No traits evaluated for this layer"}):e.map(l=>g.jsx(KVe,{trait:l,layerColor:t.color,expanded:n.has(l.bit),onToggle:()=>r(l.bit),isMobile:i},l.bit))})})]})},QVe=({entities:t,loading:e,onEntityClick:n})=>{const r=s=>{if(!s||s.length!==8)return"Physical";try{const a=s.slice(0,2),o=s.slice(2,4),l=s.slice(4,6),c=s.slice(6,8),u={Physical:parseInt(a,16).toString(2).split("1").length-1,Functional:parseInt(o,16).toString(2).split("1").length-1,Abstract:parseInt(l,16).toString(2).split("1").length-1,Social:parseInt(c,16).toString(2).split("1").length-1};return Object.entries(u).reduce((f,p)=>f[1]>p[1]?f:p)[0]}catch{return"Physical"}},i=s=>({Physical:"#FF6B35",Functional:"#00E5FF",Abstract:"#9C27B0",Social:"#4CAF50"})[s]||"#FF6B35";return g.jsx(xi,{sx:{mt:3},children:g.jsxs(yi,{children:[g.jsxs(Z,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[g.jsx(vZ,{color:"primary"}),"Similar Entities"]}),e?g.jsx(Y,{sx:{display:"flex",justifyContent:"center",py:3},children:g.jsx(lr,{size:24})}):t.length===0?g.jsx(Z,{variant:"body2",color:"text.secondary",sx:{py:2},children:"No similar entities found (threshold: d4 Hamming distance)"}):g.jsx(Y,{sx:{display:"flex",flexDirection:"column",gap:1},children:t.map((s,a)=>{const o=r(s.uht_code),l=i(o);return g.jsxs(gn,{onClick:()=>n(s.uuid),sx:{p:1.5,cursor:"pointer",display:"flex",alignItems:"center",gap:2,border:`1px solid ${l}30`,"&:hover":{backgroundColor:`${l}10`,borderColor:`${l}50`},transition:"all 0.2s ease"},children:[g.jsx(Y,{sx:{width:8,height:8,borderRadius:"50%",backgroundColor:l,flexShrink:0}}),g.jsx(Z,{variant:"body2",sx:{flex:1,fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:s.name}),g.jsx(Dt,{label:s.uht_code,size:"small",sx:{fontFamily:"monospace",fontSize:"0.7rem",backgroundColor:`${l}20`,color:l,fontWeight:600}}),g.jsx(Jt,{title:`Hamming distance: ${32-s.similarity_score} bits differ (${s.similarity_score}/32 match)`,children:g.jsx(Dt,{label:`d=${32-s.similarity_score}`,size:"small",sx:{minWidth:40,backgroundColor:s.similarity_score>=30?"#4CAF5030":s.similarity_score>=28?"#FF980030":"#75757530",color:s.similarity_score>=30?"#4CAF50":s.similarity_score>=28?"#FF9800":"#757575",fontWeight:600,fontFamily:"monospace",fontSize:"0.75rem"}})})]},s.uuid||a)})})]})})};function JVe(){const{uuid:t}=Ece(),e=yl(),{isMobile:n,isTablet:r}=tc(),i=n||r,[s,a]=w.useState(null),[o,l]=w.useState([]),[c,u]=w.useState(!0),[f,p]=w.useState(null),[m,x]=w.useState(!1),[b,v]=w.useState(new Set),[_,E]=w.useState(!1),[T,A]=w.useState(!1),[C,M]=w.useState(null),[P,D]=w.useState([]),[N,L]=w.useState(!1),[k,I]=w.useState(!1),[F,z]=w.useState(!1),[H,B]=w.useState(null),[j,G]=w.useState(null),[W,re]=w.useState(null),[$,ee]=w.useState(!1),[oe,me]=w.useState(!1),te=ri.useRef(null),K=ri.useRef(!1),ne=ri.useCallback(async(Se=!1)=>{if(t&&!(K.current&&!Se)){K.current=!0;try{u(!0);const[q,V]=await Promise.all([vo.getEntity(t),Mk.getAllTraits()]);a(q),l(V.traits||[]),p(null),L(!0);try{const ie=await vo.findSimilarEntities(t,28);D(ie.similar_entities?.slice(0,10)||[])}catch(ie){console.error("Failed to fetch similar entities:",ie),D([])}finally{L(!1)}}catch(q){console.error("Failed to fetch entity:",q),p(q instanceof Error?q.message:"Failed to load entity")}finally{u(!1),K.current=!1}}},[t]);w.useEffect(()=>{K.current=!1,ne()},[t,ne]);const Ee=()=>{s&&(navigator.clipboard.writeText(s.uht_code),x(!0),setTimeout(()=>x(!1),2e3))},se=async()=>{if(!s?.uuid)return;const Se=s.nsfw||!1;if(Se&&!Xh()){B("API key required to remove NSFW flag. Configure in Settings.");return}try{Se?(await vo.unflagNsfw(s.uuid),a(q=>q&&{...q,nsfw:!1}),G("NSFW flag removed")):(await vo.flagNsfw(s.uuid),a(q=>q&&{...q,nsfw:!0}),G("Entity flagged as NSFW")),setTimeout(()=>G(null),2e3)}catch(q){console.error("Failed to update NSFW status:",q),B("Failed to update NSFW status")}},ve=async()=>{if(!s?.uuid)return;if(!Xh()){M("API key required. Please configure your API key in Settings.");return}A(!0),M(null);try{const q=await hZ.generateImage({entity_uuid:s.uuid,style:"realistic"});if(!q.success)throw new Error(q.error||"Failed to generate image");await ne(!0),E(!1)}catch(q){console.error("Image generation failed:",q);const V=q?.response?.data?.detail||(q instanceof Error?q.message:"Failed to generate image");M(V)}finally{A(!1)}},Pe=async Se=>{const q=Se.target.files?.[0];if(!q||!s?.uuid)return;const V=Xh();if(!V){M("API key required. Please configure your API key in Settings.");return}if(!q.type.startsWith("image/")){M("Please select an image file");return}if(q.size>10*1024*1024){M("Image must be less than 10MB");return}me(!0),M(null);try{const ie=new FormData;ie.append("image",q),ie.append("entity_uuid",s.uuid);const le=await fetch("/api/v1/images/upload",{method:"POST",headers:{"X-API-Key":V},body:ie});if(!le.ok){const xe=await le.json();throw new Error(xe.detail||"Upload failed")}await ne(!0),E(!1)}catch(ie){console.error("Image upload failed:",ie);const le=ie instanceof Error?ie.message:"Failed to upload image";M(le)}finally{me(!1),te.current&&(te.current.value="")}},ge=async()=>{if(!s?.name)return;if(!Xh()){B("API key required. Please configure your API key in Settings.");return}I(!0),B(null),G(null),re(null);try{const q=await fZ.preprocessEntity(s.name);re({suggested_name:q.suggested_name,suggested_description:q.suggested_description,additional_context:q.additional_context,confidence:q.confidence,reasoning:q.reasoning||""})}catch(q){console.error("Reprocessing failed:",q);const V=q?.response?.data?.detail||(q instanceof Error?q.message:"Failed to reprocess entity");B(V)}finally{I(!1)}},be=async()=>{if(!(!W||!s?.uuid)){ee(!0),B(null);try{await vo.updateEntity(s.uuid,{name:W.suggested_name,description:W.suggested_description,additional_context:W.additional_context}),await wD.classifyEntity({entity:{name:W.suggested_name,description:W.suggested_description},use_cache:!1,detailed:!0,generate_image:!1,generate_embedding:!0}),await ne(!0),re(null),G(`Entity updated: "${W.suggested_name}"`)}catch(Se){console.error("Accept preprocessing failed:",Se);const q=Se?.response?.data?.detail||(Se instanceof Error?Se.message:"Failed to apply preprocessing suggestions");B(q)}finally{ee(!1)}}},_e=async()=>{if(!s?.name||!s?.uuid)return;if(!Xh()){B("API key required. Please configure your API key in Settings.");return}z(!0),B(null),G(null);try{await wD.classifyEntity({entity:{uuid:s.uuid,name:s.name,description:s.description},use_cache:!1,detailed:!0,generate_image:!1,generate_embedding:!0}),await ne(!0),G("Re-classification complete! Entity updated.")}catch(q){console.error("Reclassification failed:",q);const V=q?.response?.data?.detail||(q instanceof Error?q.message:"Failed to reclassify entity");B(V)}finally{z(!1)}},Q=Se=>{v(q=>{const V=new Set(q);return V.has(Se)?V.delete(Se):V.add(Se),V})},et=Se=>{if(!s?.traits)return[];const q=OL.find(V=>V.name===Se);return q?q.bits.map(V=>{const ie=s.traits.find(xe=>xe.bit===V),le=o.find(xe=>xe.bit===V);return ie||(le?{...le,evaluation:{applicable:!1,confidence:0,justification:"Not evaluated"}}:null)}).filter(Boolean):[]},ze=()=>s?.image_url?s.image_url.startsWith("data:")||s.image_url.startsWith("http://")||s.image_url.startsWith("https://")?s.image_url:`${XVe}${s.image_url}`:null;if(c)return g.jsx(Y,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:g.jsx(lr,{})});if(f||!s)return g.jsxs(Y,{sx:{p:3},children:[g.jsx(mi,{severity:"error",sx:{mb:2},children:f||"Entity not found"}),g.jsx(un,{startIcon:g.jsx(ED,{}),onClick:()=>e(-1),children:"Go Back"})]});const Je=ze(),fe=s.traits?.filter(Se=>Se.evaluation?.applicable).length||0,rt=s.traits?.length||0,$e={"@context":"https://schema.org","@type":"Thing",name:s.name,description:s.description,identifier:s.uht_code,url:`https://factory.universalhex.org/entity/${s.uuid}`,...Je&&{image:Je.startsWith("http")?Je:`https://factory.universalhex.org${Je}`}};return g.jsxs(Y,{sx:{height:"100%",overflow:"auto"},children:[g.jsx(xne,{title:s.name,description:s.description.substring(0,160),keywords:`${s.name}, UHT code ${s.uht_code}, ${s.traits?.filter(Se=>Se.evaluation?.applicable).map(Se=>Se.name).slice(0,5).join(", ")}, entity classification`,image:Je&&Je.startsWith("http")?Je:`https://factory.universalhex.org${Je||"/og-image.png"}`,url:`https://factory.universalhex.org/entity/${s.uuid}`,type:"article",structuredData:$e}),g.jsx(gn,{sx:{p:i?1.5:2,borderRadius:0,borderBottom:"1px solid rgba(0, 229, 255, 0.3)"},children:g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:i?1:2},children:[g.jsx(Gt,{onClick:()=>e(-1),children:g.jsx(ED,{})}),g.jsx(Z,{variant:i?"h6":"h5",sx:{flex:1},children:"Entity Details"}),g.jsx(Gt,{onClick:()=>ne(!0),children:g.jsx(Zu,{})})]})}),g.jsx(Y,{sx:{p:i?1.5:3,maxWidth:1400,mx:"auto"},children:g.jsxs(Fn,{container:!0,spacing:i?2:3,children:[g.jsxs(Fn,{size:{xs:12,md:4},children:[g.jsxs(xi,{sx:{mb:i?2:3},children:[g.jsxs(Y,{sx:{position:"relative",height:i?200:250,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0,0,0,0.2)",overflow:"hidden"},children:[Je&&!_?g.jsx("img",{src:Je,alt:s.name,style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"},onError:()=>E(!0)}):g.jsxs(Y,{sx:{textAlign:"center",color:"text.secondary"},children:[g.jsx(o0,{sx:{fontSize:64,opacity:.5}}),g.jsx(Z,{variant:"body2",children:"No image available"})]}),g.jsx(Y,{sx:{position:"absolute",top:8,right:8},children:g.jsx(MF,{entityUuid:s.uuid,entityName:s.name,size:"small"})})]}),g.jsxs(yi,{children:[g.jsx(Z,{variant:"h5",gutterBottom:!0,children:s.name}),g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:{xs:0,sm:.25},mb:2,flexWrap:"nowrap","& .MuiIconButton-root":{p:{xs:.125,sm:.25}},"& .MuiSvgIcon-root":{fontSize:{xs:14,sm:16}}},children:[g.jsx("input",{type:"file",ref:te,onChange:Pe,accept:"image/*",style:{display:"none"}}),g.jsx(Dt,{label:s.uht_code,size:"small",sx:{fontFamily:"monospace",fontSize:{xs:"0.7rem",sm:"0.85rem"},fontWeight:600,backgroundColor:"rgba(0, 229, 255, 0.2)",color:"primary.main",height:{xs:20,sm:24},"& .MuiChip-label":{px:{xs:.5,sm:1}}}}),g.jsx(Jt,{title:m?"Copied!":"Copy UHT Code",children:g.jsx(Gt,{size:"small",onClick:Ee,sx:{p:.25},children:m?g.jsx(e2,{color:"success",sx:{fontSize:16}}):g.jsx(t2,{sx:{fontSize:16}})})}),g.jsx(bs,{orientation:"vertical",flexItem:!0,sx:{mx:{xs:.125,sm:.25},borderColor:"rgba(255,255,255,0.15)",height:{xs:14,sm:18},alignSelf:"center"}}),g.jsx(Jt,{title:"Generate AI Image",children:g.jsx("span",{children:g.jsx(Gt,{size:"small",onClick:ve,disabled:T||oe,sx:{p:.25},children:T?g.jsx(lr,{size:16}):g.jsx(o0,{sx:{fontSize:18,color:"#E91E63"}})})})}),g.jsx(Jt,{title:"Upload Image",children:g.jsx("span",{children:g.jsx(Gt,{size:"small",onClick:()=>te.current?.click(),disabled:T||oe,sx:{p:.25},children:oe?g.jsx(lr,{size:16}):g.jsx(TZ,{sx:{fontSize:18,color:"#4CAF50"}})})})}),g.jsx(Jt,{title:"Re-process (AI Enhancement)",children:g.jsx("span",{children:g.jsx(Gt,{size:"small",onClick:ge,disabled:k||F,sx:{p:.25},children:k?g.jsx(lr,{size:16}):g.jsx(a0,{sx:{fontSize:18,color:"#FF9800"}})})})}),g.jsx(Jt,{title:"Re-classify Entity",children:g.jsx("span",{children:g.jsx(Gt,{size:"small",onClick:_e,disabled:k||F,sx:{p:.25},children:F?g.jsx(lr,{size:16}):g.jsx(yb,{sx:{fontSize:18,color:"#9C27B0"}})})})})]}),C&&g.jsx(mi,{severity:"error",sx:{mb:2},onClose:()=>M(null),children:C}),H&&g.jsx(mi,{severity:"error",sx:{mb:2},onClose:()=>B(null),children:H}),j&&g.jsx(mi,{severity:"success",sx:{mb:2},onClose:()=>G(null),children:j}),W&&g.jsxs(gn,{sx:{mb:2,p:2,border:"1px solid #FF9800",backgroundColor:"rgba(255, 152, 0, 0.08)"},children:[g.jsxs(Z,{variant:"subtitle2",sx:{color:"#FF9800",mb:1.5,fontWeight:600},children:["AI Preprocessing Suggestions (",Math.round(W.confidence*100),"% confidence)"]}),g.jsxs(Y,{sx:{mb:1.5},children:[g.jsx(Z,{variant:"caption",color:"text.secondary",children:"Suggested Name:"}),g.jsx(Z,{variant:"body2",sx:{fontWeight:500},children:W.suggested_name})]}),g.jsxs(Y,{sx:{mb:1.5},children:[g.jsx(Z,{variant:"caption",color:"text.secondary",children:"Suggested Description:"}),g.jsx(Z,{variant:"body2",sx:{fontSize:"0.85rem"},children:W.suggested_description})]}),W.reasoning&&g.jsxs(Y,{sx:{mb:1.5},children:[g.jsx(Z,{variant:"caption",color:"text.secondary",children:"Reasoning:"}),g.jsx(Z,{variant:"body2",sx:{fontSize:"0.8rem",fontStyle:"italic",color:"text.secondary"},children:W.reasoning})]}),g.jsxs(Y,{sx:{display:"flex",gap:1,mt:2},children:[g.jsx(un,{size:"small",variant:"contained",color:"warning",onClick:be,disabled:$,startIcon:$?g.jsx(lr,{size:16}):g.jsx(e2,{}),children:$?"Applying...":"Accept & Re-classify"}),g.jsx(un,{size:"small",variant:"outlined",onClick:()=>re(null),disabled:$,children:"Dismiss"})]})]}),g.jsxs(Y,{sx:{display:"flex",gap:1,flexWrap:"wrap",mb:2,alignItems:"center"},children:[g.jsx(Dt,{icon:g.jsx(JT,{}),label:`${fe}/${rt} traits`,size:"small",color:"primary",variant:"outlined"}),g.jsx(Dt,{label:`v${s.version}`,size:"small",variant:"outlined"}),s.view_count!==void 0&&s.view_count>0&&g.jsx(Dt,{icon:g.jsx(n2,{}),label:`${s.view_count} views`,size:"small",variant:"outlined",sx:{borderColor:"text.secondary","& .MuiChip-icon":{color:"text.secondary"}}}),s.embedding&&s.embedding.length>0&&g.jsx(Jt,{title:`Has embedding (${s.embedding.length} dimensions)`,children:g.jsx(Dt,{icon:g.jsx(nC,{}),label:"Embedded",size:"small",variant:"outlined",sx:{borderColor:"#00BCD4",color:"#00BCD4","& .MuiChip-icon":{color:"#00BCD4"}}})}),g.jsx(Ef,{control:g.jsx(dk,{checked:s.nsfw||!1,onChange:se,size:"small",sx:{color:"rgba(255,255,255,0.5)","&.Mui-checked":{color:"#f44336"},p:.5}}),label:"NSFW",sx:{ml:"auto","& .MuiFormControlLabel-label":{fontSize:"0.75rem",color:s.nsfw?"#f44336":"text.secondary"}}})]}),g.jsx(Z,{variant:"body2",color:"text.secondary",children:s.description})]})]}),g.jsx(xi,{children:g.jsxs(yi,{children:[g.jsxs(Z,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[g.jsx(Cwe,{color:"primary"}),"UHT Code Breakdown"]}),g.jsx(YVe,{binary:s.binary_representation,uhtCode:s.uht_code,isMobile:i}),g.jsx(bs,{sx:{my:2}}),g.jsxs(Y,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[g.jsx(un,{size:"small",startIcon:g.jsx(vZ,{}),variant:"outlined",onClick:()=>e(`/graph?highlight=${s.uuid}`),children:"Find Similar"}),g.jsx(un,{size:"small",startIcon:g.jsx(t2,{}),variant:"outlined",onClick:()=>{navigator.clipboard.writeText(JSON.stringify(s,null,2)),x(!0),setTimeout(()=>x(!1),2e3)},children:"Copy JSON"})]})]})}),g.jsx(QVe,{entities:P,loading:N,onEntityClick:Se=>e(`/entity/${Se}`)})]}),g.jsxs(Fn,{size:{xs:12,md:8},children:[g.jsxs(Z,{variant:i?"subtitle1":"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[g.jsx(JT,{color:"primary"}),"Trait Evaluations"]}),!i&&g.jsx(Z,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Click on any trait to see the detailed evaluation and justification."}),OL.map(Se=>g.jsx(ZVe,{layer:Se,traits:et(Se.name),expandedTraits:b,onToggleTrait:Q,isMobile:i},Se.name))]})]})})]})}var eHe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function RF(t){if(typeof t!="string")return!1;var e=eHe;return e.includes(t)}var tHe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],nHe=new Set(tHe);function vne(t){return typeof t!="string"?!1:nHe.has(t)}function bne(t){return typeof t=="string"&&t.startsWith("data-")}function Zl(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(vne(n)||bne(n))&&(e[n]=t[n]);return e}function Xb(t){if(t==null)return null;if(w.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return Zl(e)}return typeof t=="object"&&!Array.isArray(t)?Zl(t):null}function ml(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(vne(n)||bne(n)||RF(n))&&(e[n]=t[n]);return e}var rHe=["children","width","height","viewBox","className","style","title","desc"];function DL(){return DL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DL.apply(null,arguments)}function iHe(t,e){if(t==null)return{};var n,r,i=sHe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function sHe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var PF=w.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:s,className:a,style:o,title:l,desc:c}=t,u=iHe(t,rHe),f=s||{width:r,height:i,x:0,y:0},p=qe("recharts-surface",a);return w.createElement("svg",DL({},ml(u),{className:p,width:r,height:i,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:e}),w.createElement("title",null,l),w.createElement("desc",null,c),n)}),aHe=["children","className"];function LL(){return LL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},LL.apply(null,arguments)}function oHe(t,e){if(t==null)return{};var n,r,i=lHe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function lHe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var wa=w.forwardRef((t,e)=>{var{children:n,className:r}=t,i=oHe(t,aHe),s=qe("recharts-layer",r);return w.createElement("g",LL({className:s},ml(i),{ref:e}),n)}),_ne=w.createContext(null),cHe=()=>w.useContext(_ne);function Or(t){return function(){return t}}const Sne=Math.cos,k2=Math.sin,rc=Math.sqrt,B2=Math.PI,YC=2*B2,IL=Math.PI,kL=2*IL,Hh=1e-6,uHe=kL-Hh;function wne(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function dHe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return wne;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class fHe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?wne:dHe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,l=r-e,c=i-n,u=a-e,f=o-n,p=u*u+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(p>Hh)if(!(Math.abs(f*l-c*u)>Hh)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let m=r-a,x=i-o,b=l*l+c*c,v=m*m+x*x,_=Math.sqrt(b),E=Math.sqrt(p),T=s*Math.tan((IL-Math.acos((b+p-v)/(2*_*E)))/2),A=T/E,C=T/_;Math.abs(A-1)>Hh&&this._append`L${e+A*u},${n+A*f}`,this._append`A${s},${s},0,0,${+(f*m>u*x)},${this._x1=e+C*l},${this._y1=n+C*c}`}}arc(e,n,r,i,s,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),l=r*Math.sin(i),c=e+o,u=n+l,f=1^a,p=a?i-s:s-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Hh||Math.abs(this._y1-u)>Hh)&&this._append`L${c},${u}`,r&&(p<0&&(p=p%kL+kL),p>uHe?this._append`A${r},${r},0,1,${f},${e-o},${n-l}A${r},${r},0,1,${f},${this._x1=c},${this._y1=u}`:p>Hh&&this._append`A${r},${r},0,${+(p>=IL)},${f},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function NF(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new fHe(e)}function OF(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Tne(t){this._context=t}Tne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function KC(t){return new Tne(t)}function Ene(t){return t[0]}function Cne(t){return t[1]}function Ane(t,e){var n=Or(!0),r=null,i=KC,s=null,a=NF(o);t=typeof t=="function"?t:t===void 0?Ene:Or(t),e=typeof e=="function"?e:e===void 0?Cne:Or(e);function o(l){var c,u=(l=OF(l)).length,f,p=!1,m;for(r==null&&(s=i(m=a())),c=0;c<=u;++c)!(c<u&&n(f=l[c],c,l))===p&&((p=!p)?s.lineStart():s.lineEnd()),p&&s.point(+t(f,c,l),+e(f,c,l));if(m)return s=null,m+""||null}return o.x=function(l){return arguments.length?(t=typeof l=="function"?l:Or(+l),o):t},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:Or(+l),o):e},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Or(!!l),o):n},o.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),o):i},o.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),o):r},o}function Qw(t,e,n){var r=null,i=Or(!0),s=null,a=KC,o=null,l=NF(c);t=typeof t=="function"?t:t===void 0?Ene:Or(+t),e=typeof e=="function"?e:Or(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?Cne:Or(+n);function c(f){var p,m,x,b=(f=OF(f)).length,v,_=!1,E,T=new Array(b),A=new Array(b);for(s==null&&(o=a(E=l())),p=0;p<=b;++p){if(!(p<b&&i(v=f[p],p,f))===_)if(_=!_)m=p,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),x=p-1;x>=m;--x)o.point(T[x],A[x]);o.lineEnd(),o.areaEnd()}_&&(T[p]=+t(v,p,f),A[p]=+e(v,p,f),o.point(r?+r(v,p,f):T[p],n?+n(v,p,f):A[p]))}if(E)return o=null,E+""||null}function u(){return Ane().defined(i).curve(a).context(s)}return c.x=function(f){return arguments.length?(t=typeof f=="function"?f:Or(+f),r=null,c):t},c.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Or(+f),c):t},c.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Or(+f),c):r},c.y=function(f){return arguments.length?(e=typeof f=="function"?f:Or(+f),n=null,c):e},c.y0=function(f){return arguments.length?(e=typeof f=="function"?f:Or(+f),c):e},c.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Or(+f),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Or(!!f),c):i},c.curve=function(f){return arguments.length?(a=f,s!=null&&(o=a(s)),c):a},c.context=function(f){return arguments.length?(f==null?s=o=null:o=a(s=f),c):s},c}class Mne{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function hHe(t){return new Mne(t,!0)}function pHe(t){return new Mne(t,!1)}const DF={draw(t,e){const n=rc(e/B2);t.moveTo(n,0),t.arc(0,0,n,0,YC)}},mHe={draw(t,e){const n=rc(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},Rne=rc(1/3),gHe=Rne*2,xHe={draw(t,e){const n=rc(e/gHe),r=n*Rne;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},yHe={draw(t,e){const n=rc(e),r=-n/2;t.rect(r,r,n,n)}},vHe=.8908130915292852,Pne=k2(B2/10)/k2(7*B2/10),bHe=k2(YC/10)*Pne,_He=-Sne(YC/10)*Pne,SHe={draw(t,e){const n=rc(e*vHe),r=bHe*n,i=_He*n;t.moveTo(0,-n),t.lineTo(r,i);for(let s=1;s<5;++s){const a=YC*s/5,o=Sne(a),l=k2(a);t.lineTo(l*n,-o*n),t.lineTo(o*r-l*i,l*r+o*i)}t.closePath()}},xN=rc(3),wHe={draw(t,e){const n=-rc(e/(xN*3));t.moveTo(0,n*2),t.lineTo(-xN*n,-n),t.lineTo(xN*n,-n),t.closePath()}},Vo=-.5,Ho=rc(3)/2,BL=1/rc(12),THe=(BL/2+1)*3,EHe={draw(t,e){const n=rc(e/THe),r=n/2,i=n*BL,s=r,a=n*BL+n,o=-s,l=a;t.moveTo(r,i),t.lineTo(s,a),t.lineTo(o,l),t.lineTo(Vo*r-Ho*i,Ho*r+Vo*i),t.lineTo(Vo*s-Ho*a,Ho*s+Vo*a),t.lineTo(Vo*o-Ho*l,Ho*o+Vo*l),t.lineTo(Vo*r+Ho*i,Vo*i-Ho*r),t.lineTo(Vo*s+Ho*a,Vo*a-Ho*s),t.lineTo(Vo*o+Ho*l,Vo*l-Ho*o),t.closePath()}};function CHe(t,e){let n=null,r=NF(i);t=typeof t=="function"?t:Or(t||DF),e=typeof e=="function"?e:Or(e===void 0?64:+e);function i(){let s;if(n||(n=s=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:Or(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:Or(+s),i):e},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function F2(){}function U2(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Nne(t){this._context=t}Nne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:U2(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:U2(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function AHe(t){return new Nne(t)}function One(t){this._context=t}One.prototype={areaStart:F2,areaEnd:F2,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:U2(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function MHe(t){return new One(t)}function Dne(t){this._context=t}Dne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:U2(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function RHe(t){return new Dne(t)}function Lne(t){this._context=t}Lne.prototype={areaStart:F2,areaEnd:F2,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function PHe(t){return new Lne(t)}function t7(t){return t<0?-1:1}function n7(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),o=(s*i+a*r)/(r+i);return(t7(s)+t7(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function r7(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function yN(t,e,n){var r=t._x0,i=t._y0,s=t._x1,a=t._y1,o=(s-r)/3;t._context.bezierCurveTo(r+o,i+o*e,s-o,a-o*n,s,a)}function j2(t){this._context=t}j2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:yN(this,this._t0,r7(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,yN(this,r7(this,n=n7(this,t,e)),n);break;default:yN(this,this._t0,n=n7(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function Ine(t){this._context=new kne(t)}(Ine.prototype=Object.create(j2.prototype)).point=function(t,e){j2.prototype.point.call(this,e,t)};function kne(t){this._context=t}kne.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function NHe(t){return new j2(t)}function OHe(t){return new Ine(t)}function Bne(t){this._context=t}Bne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=i7(t),i=i7(e),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function i7(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),a=new Array(n);for(i[0]=0,s[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,a[e]-=r*a[e-1];for(i[n-1]=a[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(a[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function DHe(t){return new Bne(t)}function ZC(t,e){this._context=t,this._t=e}ZC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function LHe(t){return new ZC(t,.5)}function IHe(t){return new ZC(t,0)}function kHe(t){return new ZC(t,1)}function Q0(t,e){if((a=t.length)>1)for(var n=1,r,i,s=t[e[0]],a,o=s.length;n<a;++n)for(i=s,s=t[e[n]],r=0;r<o;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function FL(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function BHe(t,e){return t[e]}function FHe(t){const e=[];return e.key=t,e}function UHe(){var t=Or([]),e=FL,n=Q0,r=BHe;function i(s){var a=Array.from(t.apply(this,arguments),FHe),o,l=a.length,c=-1,u;for(const f of s)for(o=0,++c;o<l;++o)(a[o][c]=[0,+r(f,a[o].key,c,s)]).data=f;for(o=0,u=OF(e(a));o<l;++o)a[u[o]].index=o;return n(a,u),a}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:Or(Array.from(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:Or(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?FL:typeof s=="function"?s:Or(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??Q0,i):n},i}function jHe(t,e){if((r=t.length)>0){for(var n,r,i=0,s=t[0].length,a;i<s;++i){for(a=n=0;n<r;++n)a+=t[n][i][1]||0;if(a)for(n=0;n<r;++n)t[n][i][1]/=a}Q0(t,e)}}function zHe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,s=r.length;n<s;++n){for(var a=0,o=0;a<i;++a)o+=t[a][n][1]||0;r[n][1]+=r[n][0]=-o/2}Q0(t,e)}}function $He(t,e){if(!(!((a=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,s,a;r<s;++r){for(var o=0,l=0,c=0;o<a;++o){for(var u=t[e[o]],f=u[r][1]||0,p=u[r-1][1]||0,m=(f-p)/2,x=0;x<o;++x){var b=t[e[x]],v=b[r][1]||0,_=b[r-1][1]||0;m+=v-_}l+=f,c+=m*f}i[r-1][1]+=i[r-1][0]=n,l&&(n-=c/l)}i[r-1][1]+=i[r-1][0]=n,Q0(t,e)}}var vN={},bN={},s7;function GHe(){return s7||(s7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(bN)),bN}var _N={},a7;function Fne(){return a7||(a7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(_N)),_N}var SN={},o7;function LF(){return o7||(o7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}t.toKey=e})(SN)),SN}var wN={},TN={},l7;function VHe(){return l7||(l7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(TN)),TN}var c7;function IF(){return c7||(c7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=VHe(),n=LF();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const s=[],a=i.length;if(a===0)return s;let o=0,l="",c="",u=!1;for(i.charCodeAt(0)===46&&(s.push(""),o++);o<a;){const f=i[o];c?f==="\\"&&o+1<a?(o++,l+=i[o]):f===c?c="":l+=f:u?f==='"'||f==="'"?c=f:f==="]"?(u=!1,s.push(l),l=""):l+=f:f==="["?(u=!0,l&&(s.push(l),l="")):f==="."?l&&(s.push(l),l=""):l+=f,o++}return l&&s.push(l),s}t.toPath=r})(wN)),wN}var u7;function kF(){return u7||(u7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=GHe(),n=Fne(),r=LF(),i=IF();function s(o,l,c){if(o==null)return c;switch(typeof l){case"string":{if(e.isUnsafeProperty(l))return c;const u=o[l];return u===void 0?n.isDeepKey(l)?s(o,i.toPath(l),c):c:u}case"number":case"symbol":{typeof l=="number"&&(l=r.toKey(l));const u=o[l];return u===void 0?c:u}default:{if(Array.isArray(l))return a(o,l,c);if(Object.is(l?.valueOf(),-0)?l="-0":l=String(l),e.isUnsafeProperty(l))return c;const u=o[l];return u===void 0?c:u}}}function a(o,l,c){if(l.length===0)return c;let u=o;for(let f=0;f<l.length;f++){if(u==null||e.isUnsafeProperty(l[f]))return c;u=u[l[f]]}return u===void 0?c:u}t.get=s})(vN)),vN}var EN,d7;function HHe(){return d7||(d7=1,EN=kF().get),EN}var WHe=HHe();const Ip=Ea(WHe);var vs=t=>t===0?0:t>0?1:-1,Ql=t=>typeof t=="number"&&t!=+t,gd=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,qt=t=>(typeof t=="number"||t instanceof Number)&&!Ql(t),Vc=t=>qt(t)||typeof t=="string",qHe=0,Yb=t=>{var e=++qHe;return"".concat(t||"").concat(e)},na=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!qt(e)&&typeof e!="string")return r;var s;if(gd(e)){if(n==null)return r;var a=e.indexOf("%");s=n*parseFloat(e.slice(0,a))/100}else s=+e;return Ql(s)&&(s=r),i&&n!=null&&s>n&&(s=n),s},Une=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[t[r]])n[t[r]]=!0;else return!0;return!1};function Zi(t,e,n){return qt(t)&&qt(e)?t+n*(e-t):e}function XHe(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):Ip(r,e))===n)}var _s=t=>t===null||typeof t>"u",H_=t=>_s(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function YHe(t){return t!=null}function W_(){}var KHe=["type","size","sizeType"];function UL(){return UL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},UL.apply(null,arguments)}function f7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function h7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?f7(Object(n),!0).forEach(function(r){ZHe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ZHe(t,e,n){return(e=QHe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QHe(t){var e=JHe(t,"string");return typeof e=="symbol"?e:e+""}function JHe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function e7e(t,e){if(t==null)return{};var n,r,i=t7e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function t7e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var jne={symbolCircle:DF,symbolCross:mHe,symbolDiamond:xHe,symbolSquare:yHe,symbolStar:SHe,symbolTriangle:wHe,symbolWye:EHe},n7e=Math.PI/180,r7e=t=>{var e="symbol".concat(H_(t));return jne[e]||DF},i7e=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*n7e;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},s7e=(t,e)=>{jne["symbol".concat(H_(t))]=e},BF=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=e7e(t,KHe),s=h7(h7({},i),{},{type:e,size:n,sizeType:r}),a="circle";typeof e=="string"&&(a=e);var o=()=>{var p=r7e(a),m=CHe().type(p).size(i7e(n,r,a)),x=m();if(x!==null)return x},{className:l,cx:c,cy:u}=s,f=ml(s);return qt(c)&&qt(u)&&qt(n)?w.createElement("path",UL({},f,{className:qe("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(u,")"),d:o()})):null};BF.registerSymbol=s7e;var zne=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,a7e=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(w.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{RF(i)&&(r[i]=(s=>n[i](n,s)))}),r},o7e=(t,e,n)=>r=>(t(e,n,r),null),q_=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var s=t[i];RF(i)&&typeof s=="function"&&(r||(r={}),r[i]=o7e(s,e,n))}),r};function p7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function l7e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?p7(Object(n),!0).forEach(function(r){c7e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function c7e(t,e,n){return(e=u7e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u7e(t){var e=d7e(t,"string");return typeof e=="symbol"?e:e+""}function d7e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ws(t,e){var n=l7e({},t),r=e,i=Object.keys(e),s=i.reduce((a,o)=>(a[o]===void 0&&r[o]!==void 0&&(a[o]=r[o]),a),n);return s}function z2(){return z2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},z2.apply(null,arguments)}function m7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function f7e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?m7(Object(n),!0).forEach(function(r){h7e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function h7e(t,e,n){return(e=p7e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p7e(t){var e=m7e(t,"string");return typeof e=="symbol"?e:e+""}function m7e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Xo=32,g7e={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function x7e(t){var{data:e,iconType:n,inactiveColor:r}=t,i=Xo/2,s=Xo/6,a=Xo/3,o=e.inactive?r:e.color,l=n??e.type;if(l==="none")return null;if(l==="plainline"){var c;return w.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:(c=e.payload)===null||c===void 0?void 0:c.strokeDasharray,x1:0,y1:i,x2:Xo,y2:i,className:"recharts-legend-icon"})}if(l==="line")return w.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(i,"h").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*a,",").concat(i,`
            H`).concat(Xo,"M").concat(2*a,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(a,",").concat(i),className:"recharts-legend-icon"});if(l==="rect")return w.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(Xo/8,"h").concat(Xo,"v").concat(Xo*3/4,"h").concat(-Xo,"z"),className:"recharts-legend-icon"});if(w.isValidElement(e.legendIcon)){var u=f7e({},e);return delete u.legendIcon,w.cloneElement(e.legendIcon,u)}return w.createElement(BF,{fill:o,cx:i,cy:i,size:Xo,sizeType:"diameter",type:l})}function y7e(t){var{payload:e,iconSize:n,layout:r,formatter:i,inactiveColor:s,iconType:a}=t,o={x:0,y:0,width:Xo,height:Xo},l={display:r==="horizontal"?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((u,f)=>{var p=u.formatter||i,m=qe({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:u.inactive});if(u.type==="none")return null;var x=u.inactive?s:u.color,b=p?p(u.value,u,f):u.value;return w.createElement("li",z2({className:m,style:l,key:"legend-item-".concat(f)},q_(t,u,f)),w.createElement(PF,{width:n,height:n,viewBox:o,style:c,"aria-label":"".concat(b," legend icon")},w.createElement(x7e,{data:u,iconType:a,inactiveColor:s})),w.createElement("span",{className:"recharts-legend-item-text",style:{color:x}},b))})}var v7e=t=>{var e=ws(t,g7e),{payload:n,layout:r,align:i}=e;if(!n||!n.length)return null;var s={padding:0,margin:0,textAlign:r==="horizontal"?i:"left"};return w.createElement("ul",{className:"recharts-default-legend",style:s},w.createElement(y7e,z2({},e,{payload:n})))},CN={},AN={},g7;function b7e(){return g7||(g7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let s=0;s<n.length;s++){const a=n[s],o=r(a);i.has(o)||i.set(o,a)}return Array.from(i.values())}t.uniqBy=e})(AN)),AN}var MN={},x7;function $ne(){return x7||(x7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(MN)),MN}var RN={},PN={},NN={},y7;function _7e(){return y7||(y7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(NN)),NN}var v7;function FF(){return v7||(v7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_7e();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(PN)),PN}var ON={},b7;function S7e(){return b7||(b7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(ON)),ON}var _7;function w7e(){return _7||(_7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=FF(),n=S7e();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(RN)),RN}var DN={},LN={},S7;function T7e(){return S7||(S7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kF();function n(r){return function(i){return e.get(i,r)}}t.property=n})(LN)),LN}var IN={},kN={},BN={},FN={},w7;function Gne(){return w7||(w7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(FN)),FN}var UN={},T7;function Vne(){return T7||(T7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(UN)),UN}var jN={},E7;function Hne(){return E7||(E7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e})(jN)),jN}var C7;function E7e(){return C7||(C7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Gne(),n=Vne(),r=Hne();function i(u,f,p){return typeof p!="function"?i(u,f,()=>{}):s(u,f,function m(x,b,v,_,E,T){const A=p(x,b,v,_,E,T);return A!==void 0?!!A:s(x,b,m,T)},new Map)}function s(u,f,p,m){if(f===u)return!0;switch(typeof f){case"object":return a(u,f,p,m);case"function":return Object.keys(f).length>0?s(u,{...f},p,m):r.eq(u,f);default:return e.isObject(u)?typeof f=="string"?f==="":!0:r.eq(u,f)}}function a(u,f,p,m){if(f==null)return!0;if(Array.isArray(f))return l(u,f,p,m);if(f instanceof Map)return o(u,f,p,m);if(f instanceof Set)return c(u,f,p,m);const x=Object.keys(f);if(u==null)return x.length===0;if(x.length===0)return!0;if(m?.has(f))return m.get(f)===u;m?.set(f,u);try{for(let b=0;b<x.length;b++){const v=x[b];if(!n.isPrimitive(u)&&!(v in u)||f[v]===void 0&&u[v]!==void 0||f[v]===null&&u[v]!==null||!p(u[v],f[v],v,u,f,m))return!1}return!0}finally{m?.delete(f)}}function o(u,f,p,m){if(f.size===0)return!0;if(!(u instanceof Map))return!1;for(const[x,b]of f.entries()){const v=u.get(x);if(p(v,b,x,u,f,m)===!1)return!1}return!0}function l(u,f,p,m){if(f.length===0)return!0;if(!Array.isArray(u))return!1;const x=new Set;for(let b=0;b<f.length;b++){const v=f[b];let _=!1;for(let E=0;E<u.length;E++){if(x.has(E))continue;const T=u[E];let A=!1;if(p(T,v,b,u,f,m)&&(A=!0),A){x.add(E),_=!0;break}}if(!_)return!1}return!0}function c(u,f,p,m){return f.size===0?!0:u instanceof Set?l([...u],[...f],p,m):!1}t.isMatchWith=i,t.isSetMatch=c})(BN)),BN}var A7;function Wne(){return A7||(A7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=E7e();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(kN)),kN}var zN={},$N={},GN={},M7;function C7e(){return M7||(M7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(GN)),GN}var VN={},R7;function qne(){return R7||(R7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(VN)),VN}var HN={},P7;function Xne(){return P7||(P7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",s="[object Arguments]",a="[object Symbol]",o="[object Date]",l="[object Map]",c="[object Set]",u="[object Array]",f="[object Function]",p="[object ArrayBuffer]",m="[object Object]",x="[object Error]",b="[object DataView]",v="[object Uint8Array]",_="[object Uint8ClampedArray]",E="[object Uint16Array]",T="[object Uint32Array]",A="[object BigUint64Array]",C="[object Int8Array]",M="[object Int16Array]",P="[object Int32Array]",D="[object BigInt64Array]",N="[object Float32Array]",L="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=p,t.arrayTag=u,t.bigInt64ArrayTag=D,t.bigUint64ArrayTag=A,t.booleanTag=i,t.dataViewTag=b,t.dateTag=o,t.errorTag=x,t.float32ArrayTag=N,t.float64ArrayTag=L,t.functionTag=f,t.int16ArrayTag=M,t.int32ArrayTag=P,t.int8ArrayTag=C,t.mapTag=l,t.numberTag=r,t.objectTag=m,t.regexpTag=e,t.setTag=c,t.stringTag=n,t.symbolTag=a,t.uint16ArrayTag=E,t.uint32ArrayTag=T,t.uint8ArrayTag=v,t.uint8ClampedArrayTag=_})(HN)),HN}var WN={},N7;function A7e(){return N7||(N7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(WN)),WN}var O7;function Yne(){return O7||(O7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=C7e(),n=qne(),r=Xne(),i=Vne(),s=A7e();function a(u,f){return o(u,void 0,u,new Map,f)}function o(u,f,p,m=new Map,x=void 0){const b=x?.(u,f,p,m);if(b!==void 0)return b;if(i.isPrimitive(u))return u;if(m.has(u))return m.get(u);if(Array.isArray(u)){const v=new Array(u.length);m.set(u,v);for(let _=0;_<u.length;_++)v[_]=o(u[_],_,p,m,x);return Object.hasOwn(u,"index")&&(v.index=u.index),Object.hasOwn(u,"input")&&(v.input=u.input),v}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const v=new RegExp(u.source,u.flags);return v.lastIndex=u.lastIndex,v}if(u instanceof Map){const v=new Map;m.set(u,v);for(const[_,E]of u)v.set(_,o(E,_,p,m,x));return v}if(u instanceof Set){const v=new Set;m.set(u,v);for(const _ of u)v.add(o(_,void 0,p,m,x));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(u))return u.subarray();if(s.isTypedArray(u)){const v=new(Object.getPrototypeOf(u)).constructor(u.length);m.set(u,v);for(let _=0;_<u.length;_++)v[_]=o(u[_],_,p,m,x);return v}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const v=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return m.set(u,v),l(v,u,p,m,x),v}if(typeof File<"u"&&u instanceof File){const v=new File([u],u.name,{type:u.type});return m.set(u,v),l(v,u,p,m,x),v}if(typeof Blob<"u"&&u instanceof Blob){const v=new Blob([u],{type:u.type});return m.set(u,v),l(v,u,p,m,x),v}if(u instanceof Error){const v=new u.constructor;return m.set(u,v),v.message=u.message,v.name=u.name,v.stack=u.stack,v.cause=u.cause,l(v,u,p,m,x),v}if(u instanceof Boolean){const v=new Boolean(u.valueOf());return m.set(u,v),l(v,u,p,m,x),v}if(u instanceof Number){const v=new Number(u.valueOf());return m.set(u,v),l(v,u,p,m,x),v}if(u instanceof String){const v=new String(u.valueOf());return m.set(u,v),l(v,u,p,m,x),v}if(typeof u=="object"&&c(u)){const v=Object.create(Object.getPrototypeOf(u));return m.set(u,v),l(v,u,p,m,x),v}return u}function l(u,f,p=u,m,x){const b=[...Object.keys(f),...e.getSymbols(f)];for(let v=0;v<b.length;v++){const _=b[v],E=Object.getOwnPropertyDescriptor(u,_);(E==null||E.writable)&&(u[_]=o(f[_],_,p,m,x))}}function c(u){switch(n.getTag(u)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=a,t.cloneDeepWithImpl=o,t.copyProperties=l})($N)),$N}var D7;function M7e(){return D7||(D7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Yne();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(zN)),zN}var L7;function R7e(){return L7||(L7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Wne(),n=M7e();function r(i){return i=n.cloneDeep(i),s=>e.isMatch(s,i)}t.matches=r})(IN)),IN}var qN={},XN={},YN={},I7;function P7e(){return I7||(I7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Yne(),n=Xne();function r(i,s){return e.cloneDeepWith(i,(a,o,l,c)=>{const u=s?.(a,o,l,c);if(u!==void 0)return u;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const f=new i.constructor(i?.valueOf());return e.copyProperties(f,i),f}case n.argumentsTag:{const f={};return e.copyProperties(f,i),f.length=i.length,f[Symbol.iterator]=i[Symbol.iterator],f}default:return}})}t.cloneDeepWith=r})(YN)),YN}var k7;function N7e(){return k7||(k7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=P7e();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(XN)),XN}var KN={},ZN={},B7;function Kne(){return B7||(B7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(ZN)),ZN}var QN={},F7;function O7e(){return F7||(F7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qne();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(QN)),QN}var U7;function D7e(){return U7||(U7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Fne(),n=Kne(),r=O7e(),i=IF();function s(a,o){let l;if(Array.isArray(o)?l=o:typeof o=="string"&&e.isDeepKey(o)&&a?.[o]==null?l=i.toPath(o):l=[o],l.length===0)return!1;let c=a;for(let u=0;u<l.length;u++){const f=l[u];if((c==null||!Object.hasOwn(c,f))&&!((Array.isArray(c)||r.isArguments(c))&&n.isIndex(f)&&f<c.length))return!1;c=c[f]}return!0}t.has=s})(KN)),KN}var j7;function L7e(){return j7||(j7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Wne(),n=LF(),r=N7e(),i=kF(),s=D7e();function a(o,l){switch(typeof o){case"object":{Object.is(o?.valueOf(),-0)&&(o="-0");break}case"number":{o=n.toKey(o);break}}return l=r.cloneDeep(l),function(c){const u=i.get(c,o);return u===void 0?s.has(c,o):l===void 0?u===void 0:e.isMatch(u,l)}}t.matchesProperty=a})(qN)),qN}var z7;function I7e(){return z7||(z7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$ne(),n=T7e(),r=R7e(),i=L7e();function s(a){if(a==null)return e.identity;switch(typeof a){case"function":return a;case"object":return Array.isArray(a)&&a.length===2?i.matchesProperty(a[0],a[1]):r.matches(a);case"string":case"symbol":case"number":return n.property(a)}}t.iteratee=s})(DN)),DN}var $7;function k7e(){return $7||($7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=b7e(),n=$ne(),r=w7e(),i=I7e();function s(a,o=n.identity){return r.isArrayLikeObject(a)?e.uniqBy(Array.from(a),i.iteratee(o)):[]}t.uniqBy=s})(CN)),CN}var JN,G7;function B7e(){return G7||(G7=1,JN=k7e().uniqBy),JN}var F7e=B7e();const V7=Ea(F7e);function Zne(t,e,n){return e===!0?V7(t,n):typeof e=="function"?V7(t,e):t}var eO={exports:{}},tO={},nO={exports:{}},rO={};var H7;function U7e(){if(H7)return rO;H7=1;var t=ax();function e(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,a=t.useDebugValue;function o(f,p){var m=p(),x=r({inst:{value:m,getSnapshot:p}}),b=x[0].inst,v=x[1];return s(function(){b.value=m,b.getSnapshot=p,l(b)&&v({inst:b})},[f,m,p]),i(function(){return l(b)&&v({inst:b}),f(function(){l(b)&&v({inst:b})})},[f]),a(m),m}function l(f){var p=f.getSnapshot;f=f.value;try{var m=p();return!n(f,m)}catch{return!0}}function c(f,p){return p()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:o;return rO.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,rO}var W7;function j7e(){return W7||(W7=1,nO.exports=U7e()),nO.exports}var q7;function z7e(){if(q7)return tO;q7=1;var t=ax(),e=j7e();function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,a=t.useEffect,o=t.useMemo,l=t.useDebugValue;return tO.useSyncExternalStoreWithSelector=function(c,u,f,p,m){var x=s(null);if(x.current===null){var b={hasValue:!1,value:null};x.current=b}else b=x.current;x=o(function(){function _(M){if(!E){if(E=!0,T=M,M=p(M),m!==void 0&&b.hasValue){var P=b.value;if(m(P,M))return A=P}return A=M}if(P=A,r(T,M))return P;var D=p(M);return m!==void 0&&m(P,D)?(T=M,P):(T=M,A=D)}var E=!1,T,A,C=f===void 0?null:f;return[function(){return _(u())},C===null?void 0:function(){return _(C())}]},[u,f,p,m]);var v=i(c,x[0],x[1]);return a(function(){b.hasValue=!0,b.value=v},[v]),l(v),v},tO}var X7;function $7e(){return X7||(X7=1,eO.exports=z7e()),eO.exports}var G7e=$7e(),UF=w.createContext(null),V7e=t=>t,Ir=()=>{var t=w.useContext(UF);return t?t.store.dispatch:V7e},IT=()=>{},H7e=()=>IT,W7e=(t,e)=>t===e;function Vt(t){var e=w.useContext(UF);return G7e.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:H7e,e?e.store.getState:IT,e?e.store.getState:IT,e?t:IT,W7e)}function q7e(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function X7e(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function Y7e(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var Y7=t=>Array.isArray(t)?t:[t];function K7e(t){const e=Array.isArray(t[0])?t[0]:t;return Y7e(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function Z7e(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var Q7e=class{constructor(t){this.value=t}deref(){return this.value}},J7e=typeof WeakRef<"u"?WeakRef:Q7e,eWe=0,K7=1;function Jw(){return{s:eWe,v:void 0,o:null,p:null}}function Qne(t,e={}){let n=Jw();const{resultEqualityCheck:r}=e;let i,s=0;function a(){let o=n;const{length:l}=arguments;for(let f=0,p=l;f<p;f++){const m=arguments[f];if(typeof m=="function"||typeof m=="object"&&m!==null){let x=o.o;x===null&&(o.o=x=new WeakMap);const b=x.get(m);b===void 0?(o=Jw(),x.set(m,o)):o=b}else{let x=o.p;x===null&&(o.p=x=new Map);const b=x.get(m);b===void 0?(o=Jw(),x.set(m,o)):o=b}}const c=o;let u;if(o.s===K7)u=o.v;else if(u=t.apply(null,arguments),s++,r){const f=i?.deref?.()??i;f!=null&&r(f,u)&&(u=f,s!==0&&s--),i=typeof u=="object"&&u!==null||typeof u=="function"?new J7e(u):u}return c.s=K7,c.v=u,u}return a.clearCache=()=>{n=Jw(),a.resetResultsCount()},a.resultsCount=()=>s,a.resetResultsCount=()=>{s=0},a}function tWe(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let s=0,a=0,o,l={},c=i.pop();typeof c=="object"&&(l=c,c=i.pop()),q7e(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const u={...n,...l},{memoize:f,memoizeOptions:p=[],argsMemoize:m=Qne,argsMemoizeOptions:x=[]}=u,b=Y7(p),v=Y7(x),_=K7e(i),E=f(function(){return s++,c.apply(null,arguments)},...b),T=m(function(){a++;const C=Z7e(_,arguments);return o=E.apply(null,C),o},...v);return Object.assign(T,{resultFunc:c,memoizedResultFunc:E,dependencies:_,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>o,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:m})};return Object.assign(r,{withTypes:()=>r}),r}var Le=tWe(Qne),nWe=Object.assign((t,e=Le)=>{X7e(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(s=>t[s]);return e(r,(...s)=>s.reduce((a,o,l)=>(a[n[l]]=o,a),{}))},{withTypes:()=>nWe}),iO={},sO={},aO={},Z7;function rWe(){return Z7||(Z7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,s)=>{if(r!==i){const a=e(r),o=e(i);if(a===o&&a===0){if(r<i)return s==="desc"?1:-1;if(r>i)return s==="desc"?-1:1}return s==="desc"?o-a:a-o}return 0};t.compareValues=n})(aO)),aO}var oO={},lO={},Q7;function Jne(){return Q7||(Q7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(lO)),lO}var J7;function iWe(){return J7||(J7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Jne(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,a){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(r.test(s)||!n.test(s))||a!=null&&Object.hasOwn(a,s)}t.isKey=i})(oO)),oO}var eW;function sWe(){return eW||(eW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rWe(),n=iWe(),r=IF();function i(s,a,o,l){if(s==null)return[];o=l?void 0:o,Array.isArray(s)||(s=Object.values(s)),Array.isArray(a)||(a=a==null?[null]:[a]),a.length===0&&(a=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(m=>String(m));const c=(m,x)=>{let b=m;for(let v=0;v<x.length&&b!=null;++v)b=b[x[v]];return b},u=(m,x)=>x==null||m==null?x:typeof m=="object"&&"key"in m?Object.hasOwn(x,m.key)?x[m.key]:c(x,m.path):typeof m=="function"?m(x):Array.isArray(m)?c(x,m):typeof x=="object"?x[m]:x,f=a.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||n.isKey(m)?m:{key:m,path:r.toPath(m)}));return s.map(m=>({original:m,criteria:f.map(x=>u(x,m))})).slice().sort((m,x)=>{for(let b=0;b<f.length;b++){const v=e.compareValues(m.criteria[b],x.criteria[b],o[b]);if(v!==0)return v}return 0}).map(m=>m.original)}t.orderBy=i})(sO)),sO}var cO={},tW;function aWe(){return tW||(tW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],s=Math.floor(r),a=(o,l)=>{for(let c=0;c<o.length;c++){const u=o[c];Array.isArray(u)&&l<s?a(u,l+1):i.push(u)}};return a(n,0),i}t.flatten=e})(cO)),cO}var uO={},nW;function ere(){return nW||(nW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Kne(),n=FF(),r=Gne(),i=Hne();function s(a,o,l){return r.isObject(l)&&(typeof o=="number"&&n.isArrayLike(l)&&e.isIndex(o)&&o<l.length||typeof o=="string"&&o in l)?i.eq(l[o],a):!1}t.isIterateeCall=s})(uO)),uO}var rW;function oWe(){return rW||(rW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=sWe(),n=aWe(),r=ere();function i(s,...a){const o=a.length;return o>1&&r.isIterateeCall(s,a[0],a[1])?a=[]:o>2&&r.isIterateeCall(a[0],a[1],a[2])&&(a=[a[0]]),e.orderBy(s,n.flatten(a),["asc"])}t.sortBy=i})(iO)),iO}var dO,iW;function lWe(){return iW||(iW=1,dO=oWe().sortBy),dO}var cWe=lWe();const QC=Ea(cWe);var tre=t=>t.legend.settings,uWe=t=>t.legend.size,dWe=t=>t.legend.payload,fWe=Le([dWe,tre],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?QC(r,n):r});function hWe(){return Vt(fWe)}var eT=1;function nre(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=w.useState({height:0,left:0,top:0,width:0}),r=w.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),a={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(a.height-e.height)>eT||Math.abs(a.left-e.left)>eT||Math.abs(a.top-e.top)>eT||Math.abs(a.width-e.width)>eT)&&n({height:a.height,left:a.left,top:a.top,width:a.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function Os(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var pWe=typeof Symbol=="function"&&Symbol.observable||"@@observable",sW=pWe,fO=()=>Math.random().toString(36).substring(7).split("").join("."),mWe={INIT:`@@redux/INIT${fO()}`,REPLACE:`@@redux/REPLACE${fO()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${fO()}`},$2=mWe;function jF(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function rre(t,e,n){if(typeof t!="function")throw new Error(Os(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Os(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Os(1));return n(rre)(t,e)}let r=t,i=e,s=new Map,a=s,o=0,l=!1;function c(){a===s&&(a=new Map,s.forEach((v,_)=>{a.set(_,v)}))}function u(){if(l)throw new Error(Os(3));return i}function f(v){if(typeof v!="function")throw new Error(Os(4));if(l)throw new Error(Os(5));let _=!0;c();const E=o++;return a.set(E,v),function(){if(_){if(l)throw new Error(Os(6));_=!1,c(),a.delete(E),s=null}}}function p(v){if(!jF(v))throw new Error(Os(7));if(typeof v.type>"u")throw new Error(Os(8));if(typeof v.type!="string")throw new Error(Os(17));if(l)throw new Error(Os(9));try{l=!0,i=r(i,v)}finally{l=!1}return(s=a).forEach(E=>{E()}),v}function m(v){if(typeof v!="function")throw new Error(Os(10));r=v,p({type:$2.REPLACE})}function x(){const v=f;return{subscribe(_){if(typeof _!="object"||_===null)throw new Error(Os(11));function E(){const A=_;A.next&&A.next(u())}return E(),{unsubscribe:v(E)}},[sW](){return this}}}return p({type:$2.INIT}),{dispatch:p,subscribe:f,getState:u,replaceReducer:m,[sW]:x}}function gWe(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:$2.INIT})>"u")throw new Error(Os(12));if(typeof n(void 0,{type:$2.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Os(13))})}function ire(t){const e=Object.keys(t),n={};for(let s=0;s<e.length;s++){const a=e[s];typeof t[a]=="function"&&(n[a]=t[a])}const r=Object.keys(n);let i;try{gWe(n)}catch(s){i=s}return function(a={},o){if(i)throw i;let l=!1;const c={};for(let u=0;u<r.length;u++){const f=r[u],p=n[f],m=a[f],x=p(m,o);if(typeof x>"u")throw o&&o.type,new Error(Os(14));c[f]=x,l=l||x!==m}return l=l||r.length!==Object.keys(a).length,l?c:a}}function G2(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function xWe(...t){return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(Os(15))};const a={getState:i.getState,dispatch:(l,...c)=>s(l,...c)},o=t.map(l=>l(a));return s=G2(...o)(i.dispatch),{...i,dispatch:s}}}function sre(t){return jF(t)&&"type"in t&&typeof t.type=="string"}var are=Symbol.for("immer-nothing"),aW=Symbol.for("immer-draftable"),Ta=Symbol.for("immer-state");function Fl(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var _o=Object,J0=_o.getPrototypeOf,V2="constructor",JC="prototype",jL="configurable",H2="enumerable",kT="writable",Kb="value",xd=t=>!!t&&!!t[Ta];function Jl(t){return t?ore(t)||eA(t)||!!t[aW]||!!t[V2]?.[aW]||tA(t)||nA(t):!1}var yWe=_o[JC][V2].toString(),oW=new WeakMap;function ore(t){if(!t||!zF(t))return!1;const e=J0(t);if(e===null||e===_o[JC])return!0;const n=_o.hasOwnProperty.call(e,V2)&&e[V2];if(n===Object)return!0;if(!wg(n))return!1;let r=oW.get(n);return r===void 0&&(r=Function.toString.call(n),oW.set(n,r)),r===yWe}function X_(t,e,n=!0){Y_(t)===0?(n?Reflect.ownKeys(t):_o.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function Y_(t){const e=t[Ta];return e?e.type_:eA(t)?1:tA(t)?2:nA(t)?3:0}var lW=(t,e,n=Y_(t))=>n===2?t.has(e):_o[JC].hasOwnProperty.call(t,e),zL=(t,e,n=Y_(t))=>n===2?t.get(e):t[e],W2=(t,e,n,r=Y_(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function vWe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var eA=Array.isArray,tA=t=>t instanceof Map,nA=t=>t instanceof Set,zF=t=>typeof t=="object",wg=t=>typeof t=="function",hO=t=>typeof t=="boolean",ku=t=>t.copy_||t.base_,$F=t=>t.modified_?t.copy_:t.base_;function $L(t,e){if(tA(t))return new Map(t);if(nA(t))return new Set(t);if(eA(t))return Array[JC].slice.call(t);const n=ore(t);if(e===!0||e==="class_only"&&!n){const r=_o.getOwnPropertyDescriptors(t);delete r[Ta];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const a=i[s],o=r[a];o[kT]===!1&&(o[kT]=!0,o[jL]=!0),(o.get||o.set)&&(r[a]={[jL]:!0,[kT]:!0,[H2]:o[H2],[Kb]:t[a]})}return _o.create(J0(t),r)}else{const r=J0(t);if(r!==null&&n)return{...t};const i=_o.create(r);return _o.assign(i,t)}}function GF(t,e=!1){return rA(t)||xd(t)||!Jl(t)||(Y_(t)>1&&_o.defineProperties(t,{set:tT,add:tT,clear:tT,delete:tT}),_o.freeze(t),e&&X_(t,(n,r)=>{GF(r,!0)},!1)),t}function bWe(){Fl(2)}var tT={[Kb]:bWe};function rA(t){return t===null||!zF(t)?!0:_o.isFrozen(t)}var q2="MapSet",GL="Patches",lre={};function ex(t){const e=lre[t];return e||Fl(0,t),e}var _We=t=>!!lre[t],Zb,cre=()=>Zb,SWe=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:_We(q2)?ex(q2):void 0});function cW(t,e){e&&(t.patchPlugin_=ex(GL),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function VL(t){HL(t),t.drafts_.forEach(wWe),t.drafts_=null}function HL(t){t===Zb&&(Zb=t.parent_)}var uW=t=>Zb=SWe(Zb,t);function wWe(t){const e=t[Ta];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function dW(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[Ta].modified_&&(VL(e),Fl(4)),Jl(t)&&(t=fW(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(n[Ta].base_,t,e)}else t=fW(e,n);return TWe(e,t,!0),VL(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==are?t:void 0}function fW(t,e){if(rA(e))return e;const n=e[Ta];if(!n)return VF(e,t.handledSet_,t);if(!iA(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);fre(n,t)}return n.copy_}function TWe(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&GF(e,n)}function ure(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var iA=(t,e)=>t.scope_===e,EWe=[];function dre(t,e,n,r){const i=ku(t),s=t.type_;if(r!==void 0&&zL(i,r,s)===e){W2(i,r,n,s);return}if(!t.draftLocations_){const o=t.draftLocations_=new Map;X_(i,(l,c)=>{if(xd(c)){const u=o.get(c)||[];u.push(l),o.set(c,u)}})}const a=t.draftLocations_.get(e)??EWe;for(const o of a)W2(i,o,n,s)}function CWe(t,e,n){t.callbacks_.push(function(i){const s=e;if(!s||!iA(s,i))return;i.mapSetPlugin_?.fixSetContents(s);const a=$F(s);dre(t,s.draft_??s,a,n),fre(s,i)})}function fre(t,e){if(t.modified_&&!t.finalized_&&(t.type_===3||(t.assigned_?.size??0)>0)){const{patchPlugin_:r}=e;if(r){const i=r.getPath(t);i&&r.generatePatches_(t,i,e)}ure(t)}}function AWe(t,e,n){const{scope_:r}=t;if(xd(n)){const i=n[Ta];iA(i,r)&&i.callbacks_.push(function(){BT(t);const a=$F(i);dre(t,n,a,e)})}else Jl(n)&&t.callbacks_.push(function(){const s=ku(t);zL(s,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&VF(zL(t.copy_,e,t.type_),r.handledSet_,r)})}function VF(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||xd(t)||e.has(t)||!Jl(t)||rA(t)||(e.add(t),X_(t,(r,i)=>{if(xd(i)){const s=i[Ta];if(iA(s,n)){const a=$F(s);W2(t,r,a,t.type_),ure(s)}}else Jl(i)&&VF(i,e,n)})),t}function MWe(t,e){const n=eA(t),r={type_:n?1:0,scope_:e?e.scope_:cre(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,s=HF;n&&(i=[r],s=Qb);const{revoke:a,proxy:o}=Proxy.revocable(i,s);return r.draft_=o,r.revoke_=a,[o,r]}var HF={get(t,e){if(e===Ta)return t;const n=ku(t);if(!lW(n,e,t.type_))return RWe(t,n,e);const r=n[e];if(t.finalized_||!Jl(r))return r;if(r===pO(t.base_,e)){BT(t);const i=t.type_===1?+e:e,s=qL(t.scope_,r,t,i);return t.copy_[i]=s}return r},has(t,e){return e in ku(t)},ownKeys(t){return Reflect.ownKeys(ku(t))},set(t,e,n){const r=hre(ku(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=pO(ku(t),e),s=i?.[Ta];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(vWe(n,i)&&(n!==void 0||lW(t.base_,e,t.type_)))return!0;BT(t),WL(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),AWe(t,e,n)),!0},deleteProperty(t,e){return BT(t),pO(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),WL(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=ku(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[kT]:!0,[jL]:t.type_!==1||e!=="length",[H2]:r[H2],[Kb]:n[e]}},defineProperty(){Fl(11)},getPrototypeOf(t){return J0(t.base_)},setPrototypeOf(){Fl(12)}},Qb={};X_(HF,(t,e)=>{Qb[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}});Qb.deleteProperty=function(t,e){return Qb.set.call(this,t,e,void 0)};Qb.set=function(t,e,n){return HF.set.call(this,t[0],e,n,t[0])};function pO(t,e){const n=t[Ta];return(n?ku(n):t)[e]}function RWe(t,e,n){const r=hre(e,n);return r?Kb in r?r[Kb]:r.get?.call(t.draft_):void 0}function hre(t,e){if(!(e in t))return;let n=J0(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=J0(n)}}function WL(t){t.modified_||(t.modified_=!0,t.parent_&&WL(t.parent_))}function BT(t){t.copy_||(t.assigned_=new Map,t.copy_=$L(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var PWe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(wg(n)&&!wg(r)){const a=r;r=n;const o=this;return function(c=a,...u){return o.produce(c,f=>r.call(this,f,...u))}}wg(r)||Fl(6),i!==void 0&&!wg(i)&&Fl(7);let s;if(Jl(n)){const a=uW(this),o=qL(a,n,void 0);let l=!0;try{s=r(o),l=!1}finally{l?VL(a):HL(a)}return cW(a,i),dW(s,a)}else if(!n||!zF(n)){if(s=r(n),s===void 0&&(s=n),s===are&&(s=void 0),this.autoFreeze_&&GF(s,!0),i){const a=[],o=[];ex(GL).generateReplacementPatches_(n,s,{patches_:a,inversePatches_:o}),i(a,o)}return s}else Fl(1,n)},this.produceWithPatches=(n,r)=>{if(wg(n))return(o,...l)=>this.produceWithPatches(o,c=>n(c,...l));let i,s;return[this.produce(n,r,(o,l)=>{i=o,s=l}),i,s]},hO(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),hO(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),hO(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Jl(e)||Fl(8),xd(e)&&(e=ql(e));const n=uW(this),r=qL(n,e,void 0);return r[Ta].isManual_=!0,HL(n),r}finishDraft(e,n){const r=e&&e[Ta];(!r||!r.isManual_)&&Fl(9);const{scope_:i}=r;return cW(i,n),dW(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const s=n[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(n=n.slice(r+1));const i=ex(GL).applyPatches_;return xd(e)?i(e,n):this.produce(e,s=>i(s,n))}};function qL(t,e,n,r){const[i,s]=tA(e)?ex(q2).proxyMap_(e,n):nA(e)?ex(q2).proxySet_(e,n):MWe(e,n);return(n?.scope_??cre()).drafts_.push(i),s.callbacks_=n?.callbacks_??[],s.key_=r,n&&r!==void 0?CWe(n,s,r):s.callbacks_.push(function(l){l.mapSetPlugin_?.fixSetContents(s);const{patchPlugin_:c}=l;s.modified_&&c&&c.generatePatches_(s,[],l)}),i}function ql(t){return xd(t)||Fl(10,t),pre(t)}function pre(t){if(!Jl(t)||rA(t))return t;const e=t[Ta];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=$L(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=$L(t,!0);return X_(n,(i,s)=>{W2(n,i,pre(s))},r),e&&(e.finalized_=!1),n}var NWe=new PWe,mre=NWe.produce;function gre(t){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,t):i(s)}var OWe=gre(),DWe=gre,LWe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?G2:G2.apply(null,arguments)};function gl(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(Mo(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>sre(r)&&r.type===t,n}var xre=class Iv extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Iv.prototype)}static get[Symbol.species](){return Iv}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Iv(...e[0].concat(this)):new Iv(...e.concat(this))}};function hW(t){return Jl(t)?mre(t,()=>{}):t}function nT(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function IWe(t){return typeof t=="boolean"}var kWe=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=e??{};let a=new xre;return n&&(IWe(n)?a.push(OWe):a.push(DWe(n.extraArgument))),a},yre="RTK_autoBatch",Yr=()=>t=>({payload:t,meta:{[yre]:!0}}),pW=t=>e=>{setTimeout(e,t)},vre=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,s=!1,a=!1;const o=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:pW(10):t.type==="callback"?t.queueNotification:pW(t.timeout),c=()=>{a=!1,s&&(s=!1,o.forEach(u=>u()))};return Object.assign({},r,{subscribe(u){const f=()=>i&&u(),p=r.subscribe(f);return o.add(u),()=>{p(),o.delete(u)}},dispatch(u){try{return i=!u?.meta?.[yre],s=!i,s&&(a||(a=!0,l(c))),r.dispatch(u)}finally{i=!0}}})},BWe=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new xre(t);return r&&i.push(vre(typeof r=="object"?r:void 0)),i};function FWe(t){const e=kWe(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:a=void 0}=t||{};let o;if(typeof n=="function")o=n;else if(jF(n))o=ire(n);else throw new Error(Mo(1));let l;typeof r=="function"?l=r(e):l=e();let c=G2;i&&(c=LWe({trace:!1,...typeof i=="object"&&i}));const u=xWe(...l),f=BWe(u);let p=typeof a=="function"?a(f):f();const m=c(...p);return rre(o,s,m)}function bre(t){const e={},n=[];let r;const i={addCase(s,a){const o=typeof s=="string"?s:s.type;if(!o)throw new Error(Mo(28));if(o in e)throw new Error(Mo(29));return e[o]=a,i},addAsyncThunk(s,a){return a.pending&&(e[s.pending.type]=a.pending),a.rejected&&(e[s.rejected.type]=a.rejected),a.fulfilled&&(e[s.fulfilled.type]=a.fulfilled),a.settled&&n.push({matcher:s.settled,reducer:a.settled}),i},addMatcher(s,a){return n.push({matcher:s,reducer:a}),i},addDefaultCase(s){return r=s,i}};return t(i),[e,n,r]}function UWe(t){return typeof t=="function"}function jWe(t,e){let[n,r,i]=bre(e),s;if(UWe(t))s=()=>hW(t());else{const o=hW(t);s=()=>o}function a(o=s(),l){let c=[n[l.type],...r.filter(({matcher:u})=>u(l)).map(({reducer:u})=>u)];return c.filter(u=>!!u).length===0&&(c=[i]),c.reduce((u,f)=>{if(f)if(xd(u)){const m=f(u,l);return m===void 0?u:m}else{if(Jl(u))return mre(u,p=>f(p,l));{const p=f(u,l);if(p===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return p}}return u},o)}return a.getInitialState=s,a}var zWe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",$We=(t=21)=>{let e="",n=t;for(;n--;)e+=zWe[Math.random()*64|0];return e},GWe=Symbol.for("rtk-slice-createasyncthunk");function VWe(t,e){return`${t}/${e}`}function HWe({creators:t}={}){const e=t?.asyncThunk?.[GWe];return function(r){const{name:i,reducerPath:s=i}=r;if(!i)throw new Error(Mo(11));const a=(typeof r.reducers=="function"?r.reducers(qWe()):r.reducers)||{},o=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(T,A){const C=typeof T=="string"?T:T.type;if(!C)throw new Error(Mo(12));if(C in l.sliceCaseReducersByType)throw new Error(Mo(13));return l.sliceCaseReducersByType[C]=A,c},addMatcher(T,A){return l.sliceMatchers.push({matcher:T,reducer:A}),c},exposeAction(T,A){return l.actionCreators[T]=A,c},exposeCaseReducer(T,A){return l.sliceCaseReducersByName[T]=A,c}};o.forEach(T=>{const A=a[T],C={reducerName:T,type:VWe(i,T),createNotation:typeof r.reducers=="function"};YWe(A)?ZWe(C,A,c,e):XWe(C,A,c)});function u(){const[T={},A=[],C=void 0]=typeof r.extraReducers=="function"?bre(r.extraReducers):[r.extraReducers],M={...T,...l.sliceCaseReducersByType};return jWe(r.initialState,P=>{for(let D in M)P.addCase(D,M[D]);for(let D of l.sliceMatchers)P.addMatcher(D.matcher,D.reducer);for(let D of A)P.addMatcher(D.matcher,D.reducer);C&&P.addDefaultCase(C)})}const f=T=>T,p=new Map,m=new WeakMap;let x;function b(T,A){return x||(x=u()),x(T,A)}function v(){return x||(x=u()),x.getInitialState()}function _(T,A=!1){function C(P){let D=P[T];return typeof D>"u"&&A&&(D=nT(m,C,v)),D}function M(P=f){const D=nT(p,A,()=>new WeakMap);return nT(D,P,()=>{const N={};for(const[L,k]of Object.entries(r.selectors??{}))N[L]=WWe(k,P,()=>nT(m,P,v),A);return N})}return{reducerPath:T,getSelectors:M,get selectors(){return M(C)},selectSlice:C}}const E={name:i,reducer:b,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:v,..._(s),injectInto(T,{reducerPath:A,...C}={}){const M=A??s;return T.inject({reducerPath:M,reducer:b},C),{...E,..._(M,!0)}}};return E}}function WWe(t,e,n,r){function i(s,...a){let o=e(s);return typeof o>"u"&&r&&(o=n()),t(o,...a)}return i.unwrapped=t,i}var Ja=HWe();function qWe(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function XWe({type:t,reducerName:e,createNotation:n},r,i){let s,a;if("reducer"in r){if(n&&!KWe(r))throw new Error(Mo(17));s=r.reducer,a=r.prepare}else s=r;i.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,a?gl(t,a):gl(t))}function YWe(t){return t._reducerDefinitionType==="asyncThunk"}function KWe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function ZWe({type:t,reducerName:e},n,r,i){if(!i)throw new Error(Mo(18));const{payloadCreator:s,fulfilled:a,pending:o,rejected:l,settled:c,options:u}=n,f=i(t,s,u);r.exposeAction(e,f),a&&r.addCase(f.fulfilled,a),o&&r.addCase(f.pending,o),l&&r.addCase(f.rejected,l),c&&r.addMatcher(f.settled,c),r.exposeCaseReducer(e,{fulfilled:a||rT,pending:o||rT,rejected:l||rT,settled:c||rT})}function rT(){}var QWe="task",_re="listener",Sre="completed",WF="cancelled",JWe=`task-${WF}`,eqe=`task-${Sre}`,XL=`${_re}-${WF}`,tqe=`${_re}-${Sre}`,sA=class{constructor(t){this.code=t,this.message=`${QWe} ${WF} (reason: ${t})`}name="TaskAbortError";message},qF=(t,e)=>{if(typeof t!="function")throw new TypeError(Mo(32))},X2=()=>{},wre=(t,e=X2)=>(t.catch(e),t),Tre=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),vp=(t,e)=>{const n=t.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},bp=t=>{if(t.aborted){const{reason:e}=t;throw new sA(e)}};function Ere(t,e){let n=X2;return new Promise((r,i)=>{const s=()=>i(new sA(t.reason));if(t.aborted){s();return}n=Tre(t,s),e.finally(()=>n()).then(r,i)}).finally(()=>{n=X2})}var nqe=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof sA?"cancelled":"rejected",error:n}}finally{e?.()}},Y2=t=>e=>wre(Ere(t,e).then(n=>(bp(t),n))),Cre=t=>{const e=Y2(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:Xg}=Object,mW={},aA="listenerMiddleware",rqe=(t,e)=>{const n=r=>Tre(t,()=>vp(r,t.reason));return(r,i)=>{qF(r);const s=new AbortController;n(s);const a=nqe(async()=>{bp(t),bp(s.signal);const o=await r({pause:Y2(s.signal),delay:Cre(s.signal),signal:s.signal});return bp(s.signal),o},()=>vp(s,eqe));return i?.autoJoin&&e.push(a.catch(X2)),{result:Y2(t)(a),cancel(){vp(s,JWe)}}}},iqe=(t,e)=>{const n=async(r,i)=>{bp(e);let s=()=>{};const o=[new Promise((l,c)=>{let u=t({predicate:r,effect:(f,p)=>{p.unsubscribe(),l([f,p.getState(),p.getOriginalState()])}});s=()=>{u(),c()}})];i!=null&&o.push(new Promise(l=>setTimeout(l,i,null)));try{const l=await Ere(e,Promise.race(o));return bp(e),l}finally{s()}};return(r,i)=>wre(n(r,i))},Are=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:s}=t;if(e)i=gl(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Mo(21));return qF(s),{predicate:i,type:e,effect:s}},Mre=Xg(t=>{const{type:e,predicate:n,effect:r}=Are(t);return{id:$We(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Mo(22))}}},{withTypes:()=>Mre}),gW=(t,e)=>{const{type:n,effect:r,predicate:i}=Are(e);return Array.from(t.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===i)&&s.effect===r)},YL=t=>{t.pending.forEach(e=>{vp(e,XL)})},sqe=(t,e)=>()=>{for(const n of e.keys())YL(n);t.clear()},xW=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},Rre=Xg(gl(`${aA}/add`),{withTypes:()=>Rre}),aqe=gl(`${aA}/removeAll`),Pre=Xg(gl(`${aA}/remove`),{withTypes:()=>Pre}),oqe=(...t)=>{console.error(`${aA}/error`,...t)},K_=(t={})=>{const e=new Map,n=new Map,r=m=>{const x=n.get(m)??0;n.set(m,x+1)},i=m=>{const x=n.get(m)??1;x===1?n.delete(m):n.set(m,x-1)},{extra:s,onError:a=oqe}=t;qF(a);const o=m=>(m.unsubscribe=()=>e.delete(m.id),e.set(m.id,m),x=>{m.unsubscribe(),x?.cancelActive&&YL(m)}),l=m=>{const x=gW(e,m)??Mre(m);return o(x)};Xg(l,{withTypes:()=>l});const c=m=>{const x=gW(e,m);return x&&(x.unsubscribe(),m.cancelActive&&YL(x)),!!x};Xg(c,{withTypes:()=>c});const u=async(m,x,b,v)=>{const _=new AbortController,E=iqe(l,_.signal),T=[];try{m.pending.add(_),r(m),await Promise.resolve(m.effect(x,Xg({},b,{getOriginalState:v,condition:(A,C)=>E(A,C).then(Boolean),take:E,delay:Cre(_.signal),pause:Y2(_.signal),extra:s,signal:_.signal,fork:rqe(_.signal,T),unsubscribe:m.unsubscribe,subscribe:()=>{e.set(m.id,m)},cancelActiveListeners:()=>{m.pending.forEach((A,C,M)=>{A!==_&&(vp(A,XL),M.delete(A))})},cancel:()=>{vp(_,XL),m.pending.delete(_)},throwIfCancelled:()=>{bp(_.signal)}})))}catch(A){A instanceof sA||xW(a,A,{raisedBy:"effect"})}finally{await Promise.all(T),vp(_,tqe),i(m),m.pending.delete(_)}},f=sqe(e,n);return{middleware:m=>x=>b=>{if(!sre(b))return x(b);if(Rre.match(b))return l(b.payload);if(aqe.match(b)){f();return}if(Pre.match(b))return c(b.payload);let v=m.getState();const _=()=>{if(v===mW)throw new Error(Mo(23));return v};let E;try{if(E=x(b),e.size>0){const T=m.getState(),A=Array.from(e.values());for(const C of A){let M=!1;try{M=C.predicate(b,T,v)}catch(P){M=!1,xW(a,P,{raisedBy:"predicate"})}M&&u(C,b,m,_)}}}finally{v=mW}return E},startListening:l,stopListening:c,clearListeners:f}};function Mo(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var lqe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Nre=Ja({name:"chartLayout",initialState:lqe,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,s;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:cqe,setLayout:uqe,setChartSize:dqe,setScale:fqe}=Nre.actions,hqe=Nre.reducer;function Ore(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function yW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ng(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yW(Object(n),!0).forEach(function(r){pqe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pqe(t,e,n){return(e=mqe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mqe(t){var e=gqe(t,"string");return typeof e=="symbol"?e:e+""}function gqe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qr(t,e,n){return _s(t)||_s(e)?n:Vc(e)?Ip(t,e,n):typeof e=="function"?e(t):n}var xqe=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:s,verticalAlign:a,layout:o}=e;if((o==="vertical"||o==="horizontal"&&a==="middle")&&s!=="center"&&qt(t[s]))return Ng(Ng({},t),{},{[s]:t[s]+(r||0)});if((o==="horizontal"||o==="vertical"&&s==="center")&&a!=="middle"&&qt(t[a]))return Ng(Ng({},t),{},{[a]:t[a]+(i||0)})}return t},Qp=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",Dre=(t,e,n,r)=>{if(r)return t.map(o=>o.coordinate);var i,s,a=t.map(o=>(o.coordinate===e&&(i=!0),o.coordinate===n&&(s=!0),o.coordinate));return i||a.push(e),s||a.push(n),a},Lre=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:s,scale:a,realScaleType:o,isCategorical:l,categoricalDomain:c,tickCount:u,ticks:f,niceTicks:p,axisType:m}=t;if(!a)return null;var x=o==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,b=i==="category"&&a.bandwidth?a.bandwidth()/x:0;if(b=m==="angleAxis"&&s&&s.length>=2?vs(s[0]-s[1])*2*b:b,f||p){var v=(f||p||[]).map((_,E)=>{var T=r?r.indexOf(_):_;return{coordinate:a(T)+b,value:_,offset:b,index:E}});return v.filter(_=>!Ql(_.coordinate))}return l&&c?c.map((_,E)=>({coordinate:a(_)+b,value:_,index:E,offset:b})):a.ticks&&u!=null?a.ticks(u).map((_,E)=>({coordinate:a(_)+b,value:_,offset:b,index:E})):a.domain().map((_,E)=>({coordinate:a(_)+b,value:r?r[_]:_,index:E,offset:b}))},vW=1e-4,yqe=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-vW,s=Math.max(r[0],r[1])+vW,a=t(e[0]),o=t(e[n-1]);(a<i||a>s||o<i||o>s)&&t.domain([e[0],e[n-1]])}},vqe=(t,e)=>{if(!e||e.length!==2||!qt(e[0])||!qt(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!qt(t[0])||t[0]<n)&&(i[0]=n),(!qt(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},bqe=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,s=0,a=0;a<e;++a){var o=Ql(t[a][n][1])?t[a][n][0]:t[a][n][1];o>=0?(t[a][n][0]=i,t[a][n][1]=i+o,i=t[a][n][1]):(t[a][n][0]=s,t[a][n][1]=s+o,s=t[a][n][1])}},_qe=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,s=0;s<e;++s){var a=Ql(t[s][n][1])?t[s][n][0]:t[s][n][1];a>=0?(t[s][n][0]=i,t[s][n][1]=i+a,i=t[s][n][1]):(t[s][n][0]=0,t[s][n][1]=0)}},Sqe={sign:bqe,expand:jHe,none:Q0,silhouette:zHe,wiggle:$He,positive:_qe},wqe=(t,e,n)=>{var r=Sqe[n],i=UHe().keys(e).value((s,a)=>Number(Qr(s,a,0))).order(FL).offset(r);return i(t)};function Tqe(t){return t==null?void 0:String(t)}var bW=t=>{var{axis:e,ticks:n,offset:r,bandSize:i,entry:s,index:a}=t;if(e.type==="category")return n[a]?n[a].coordinate+r:null;var o=Qr(s,e.dataKey,e.scale.domain()[a]);return _s(o)?null:e.scale(o)-i/2+r},Eqe=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},Cqe=t=>{var e=t.flat(2).filter(qt);return[Math.min(...e),Math.max(...e)]},Aqe=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],Mqe=(t,e,n)=>{if(t!=null)return Aqe(Object.keys(t).reduce((r,i)=>{var s=t[i],{stackedData:a}=s,o=a.reduce((l,c)=>{var u=Ore(c,e,n),f=Cqe(u);return[Math.min(l[0],f[0]),Math.max(l[1],f[1])]},[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]},[1/0,-1/0]))},_W=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,SW=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,K2=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=QC(e,u=>u.coordinate),s=1/0,a=1,o=i.length;a<o;a++){var l=i[a],c=i[a-1];s=Math.min((l.coordinate||0)-(c.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0};function wW(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:s}=t;return Ng(Ng({},e),{},{dataKey:n,payload:r,value:i,name:s})}function oA(t,e){if(t)return String(t);if(typeof e=="string")return e}var Rqe=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},Pqe=(t,e)=>e==="centric"?t.angle:t.radius,Ed=t=>t.layout.width,Cd=t=>t.layout.height,Nqe=t=>t.layout.scale,Ire=t=>t.layout.margin,lA=Le(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),cA=Le(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),kre="data-recharts-item-index",Bre="data-recharts-item-data-key",Z_=60;function TW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function iT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TW(Object(n),!0).forEach(function(r){Oqe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Oqe(t,e,n){return(e=Dqe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dqe(t){var e=Lqe(t,"string");return typeof e=="symbol"?e:e+""}function Lqe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Iqe=t=>t.brush.height;function kqe(t){var e=cA(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Z_;return n+i}return n},0)}function Bqe(t){var e=cA(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Z_;return n+i}return n},0)}function Fqe(t){var e=lA(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function Uqe(t){var e=lA(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var ss=Le([Ed,Cd,Ire,Iqe,kqe,Bqe,Fqe,Uqe,tre,uWe],(t,e,n,r,i,s,a,o,l,c)=>{var u={left:(n.left||0)+i,right:(n.right||0)+s},f={top:(n.top||0)+a,bottom:(n.bottom||0)+o},p=iT(iT({},f),u),m=p.bottom;p.bottom+=r,p=xqe(p,l,c);var x=t-p.left-p.right,b=e-p.top-p.bottom;return iT(iT({brushBottom:m},p),{},{width:Math.max(x,0),height:Math.max(b,0)})}),jqe=Le(ss,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),XF=Le(Ed,Cd,(t,e)=>({x:0,y:0,width:t,height:e})),zqe=w.createContext(null),eo=()=>w.useContext(zqe)!=null,uA=t=>t.brush,dA=Le([uA,ss,Ire],(t,e,n)=>({height:t.height,x:qt(t.x)?t.x:e.left,y:qt(t.y)?t.y:e.top+e.height+e.brushBottom-(n?.bottom||0),width:qt(t.width)?t.width:e.width})),mO={},gO={},xO={},EW;function $qe(){return EW||(EW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:s}={}){let a,o=null;const l=s!=null&&s.includes("leading"),c=s==null||s.includes("trailing"),u=()=>{o!==null&&(n.apply(a,o),a=void 0,o=null)},f=()=>{c&&u(),b()};let p=null;const m=()=>{p!=null&&clearTimeout(p),p=setTimeout(()=>{p=null,f()},r)},x=()=>{p!==null&&(clearTimeout(p),p=null)},b=()=>{x(),a=void 0,o=null},v=()=>{u()},_=function(...E){if(i?.aborted)return;a=this,o=E;const T=p==null;m(),l&&T&&u()};return _.schedule=m,_.cancel=b,_.flush=v,i?.addEventListener("abort",b,{once:!0}),_}t.debounce=e})(xO)),xO}var CW;function Gqe(){return CW||(CW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$qe();function n(r,i=0,s={}){typeof s!="object"&&(s={});const{leading:a=!1,trailing:o=!0,maxWait:l}=s,c=Array(2);a&&(c[0]="leading"),o&&(c[1]="trailing");let u,f=null;const p=e.debounce(function(...b){u=r.apply(this,b),f=null},i,{edges:c}),m=function(...b){return l!=null&&(f===null&&(f=Date.now()),Date.now()-f>=l)?(u=r.apply(this,b),f=Date.now(),p.cancel(),p.schedule(),u):(p.apply(this,b),u)},x=()=>(p.flush(),u);return m.cancel=p.cancel,m.flush=x,m}t.debounce=n})(gO)),gO}var AW;function Vqe(){return AW||(AW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Gqe();function n(r,i=0,s={}){const{leading:a=!0,trailing:o=!0}=s;return e.debounce(r,i,{leading:a,maxWait:i,trailing:o})}t.throttle=n})(mO)),mO}var yO,MW;function Hqe(){return MW||(MW=1,yO=Vqe().throttle),yO}var Wqe=Hqe();const qqe=Ea(Wqe);var Z2=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=0;console.warn(n.replace(/%s/g,()=>i[a++]))}},Fre=(t,e,n)=>{var{width:r="100%",height:i="100%",aspect:s,maxHeight:a}=n,o=gd(r)?t:Number(r),l=gd(i)?e:Number(i);return s&&s>0&&(o?l=o/s:l&&(o=l*s),a&&l!=null&&l>a&&(l=a)),{calculatedWidth:o,calculatedHeight:l}},Xqe={width:0,height:0,overflow:"visible"},Yqe={width:0,overflowX:"visible"},Kqe={height:0,overflowY:"visible"},Zqe={},Qqe=t=>{var{width:e,height:n}=t,r=gd(e),i=gd(n);return r&&i?Xqe:r?Yqe:i?Kqe:Zqe};function Jqe(t){var{width:e,height:n,aspect:r}=t,i=e,s=n;return i===void 0&&s===void 0?(i="100%",s="100%"):i===void 0?i=r&&r>0?void 0:"100%":s===void 0&&(s=r&&r>0?void 0:"100%"),{width:i,height:s}}function Pi(t){return Number.isFinite(t)}function Hc(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function KL(){return KL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},KL.apply(null,arguments)}function RW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function PW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RW(Object(n),!0).forEach(function(r){eXe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eXe(t,e,n){return(e=tXe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tXe(t){var e=nXe(t,"string");return typeof e=="symbol"?e:e+""}function nXe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ure=w.createContext({width:-1,height:-1});function rXe(t){return Hc(t.width)&&Hc(t.height)}function jre(t){var{children:e,width:n,height:r}=t,i=w.useMemo(()=>({width:n,height:r}),[n,r]);return rXe(i)?w.createElement(Ure.Provider,{value:i},e):null}var YF=()=>w.useContext(Ure),iXe=w.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i,height:s,minWidth:a=0,minHeight:o,maxHeight:l,children:c,debounce:u=0,id:f,className:p,onResize:m,style:x={}}=t,b=w.useRef(null),v=w.useRef();v.current=m,w.useImperativeHandle(e,()=>b.current);var[_,E]=w.useState({containerWidth:r.width,containerHeight:r.height}),T=w.useCallback((D,N)=>{E(L=>{var k=Math.round(D),I=Math.round(N);return L.containerWidth===k&&L.containerHeight===I?L:{containerWidth:k,containerHeight:I}})},[]);w.useEffect(()=>{if(b.current==null||typeof ResizeObserver>"u")return W_;var D=I=>{var F,{width:z,height:H}=I[0].contentRect;T(z,H),(F=v.current)===null||F===void 0||F.call(v,z,H)};u>0&&(D=qqe(D,u,{trailing:!0,leading:!1}));var N=new ResizeObserver(D),{width:L,height:k}=b.current.getBoundingClientRect();return T(L,k),N.observe(b.current),()=>{N.disconnect()}},[T,u]);var{containerWidth:A,containerHeight:C}=_;Z2(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:M,calculatedHeight:P}=Fre(A,C,{width:i,height:s,aspect:n,maxHeight:l});return Z2(M!=null&&M>0||P!=null&&P>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,M,P,i,s,a,o,n),w.createElement("div",{id:f?"".concat(f):void 0,className:qe("recharts-responsive-container",p),style:PW(PW({},x),{},{width:i,height:s,minWidth:a,minHeight:o,maxHeight:l}),ref:b},w.createElement("div",{style:Qqe({width:i,height:s})},w.createElement(jre,{width:M,height:P},c)))}),NW=w.forwardRef((t,e)=>{var n=YF();if(Hc(n.width)&&Hc(n.height))return t.children;var{width:r,height:i}=Jqe({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:s,calculatedHeight:a}=Fre(void 0,void 0,{width:r,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return qt(s)&&qt(a)?w.createElement(jre,{width:s,height:a},t.children):w.createElement(iXe,KL({},t,{width:r,height:i,ref:e}))});function zre(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var fA=()=>{var t,e=eo(),n=Vt(jqe),r=Vt(dA),i=(t=Vt(uA))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},sXe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},$re=()=>{var t;return(t=Vt(ss))!==null&&t!==void 0?t:sXe},KF=()=>Vt(Ed),ZF=()=>Vt(Cd),aXe=()=>Vt(t=>t.layout.margin),Zn=t=>t.layout.layoutType,hA=()=>Vt(Zn),oXe=()=>{var t=hA();return t!==void 0},pA=t=>{var e=Ir(),n=eo(),{width:r,height:i}=t,s=YF(),a=r,o=i;return s&&(a=s.width>0?s.width:r,o=s.height>0?s.height:i),w.useEffect(()=>{!n&&Hc(a)&&Hc(o)&&e(dqe({width:a,height:o}))},[e,n,a,o]),null},Gre=Symbol.for("immer-nothing"),OW=Symbol.for("immer-draftable"),No=Symbol.for("immer-state");function Ul(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Jb=Object.getPrototypeOf;function tx(t){return!!t&&!!t[No]}function kp(t){return t?Vre(t)||Array.isArray(t)||!!t[OW]||!!t.constructor?.[OW]||Q_(t)||gA(t):!1}var lXe=Object.prototype.constructor.toString(),DW=new WeakMap;function Vre(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=DW.get(n);return r===void 0&&(r=Function.toString.call(n),DW.set(n,r)),r===lXe}function Q2(t,e,n=!0){mA(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function mA(t){const e=t[No];return e?e.type_:Array.isArray(t)?1:Q_(t)?2:gA(t)?3:0}function ZL(t,e){return mA(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Hre(t,e,n){const r=mA(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function cXe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Q_(t){return t instanceof Map}function gA(t){return t instanceof Set}function Wh(t){return t.copy_||t.base_}function QL(t,e){if(Q_(t))return new Map(t);if(gA(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=Vre(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[No];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const a=i[s],o=r[a];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[a]})}return Object.create(Jb(t),r)}else{const r=Jb(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function QF(t,e=!1){return xA(t)||tx(t)||!kp(t)||(mA(t)>1&&Object.defineProperties(t,{set:sT,add:sT,clear:sT,delete:sT}),Object.freeze(t),e&&Object.values(t).forEach(n=>QF(n,!0))),t}function uXe(){Ul(2)}var sT={value:uXe};function xA(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var dXe={};function Bp(t){const e=dXe[t];return e||Ul(0,t),e}var e_;function Wre(){return e_}function fXe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function LW(t,e){e&&(Bp("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function JL(t){eI(t),t.drafts_.forEach(hXe),t.drafts_=null}function eI(t){t===e_&&(e_=t.parent_)}function IW(t){return e_=fXe(e_,t)}function hXe(t){const e=t[No];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function kW(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[No].modified_&&(JL(e),Ul(4)),kp(t)&&(t=J2(e,t),e.parent_||eE(e,t)),e.patches_&&Bp("Patches").generateReplacementPatches_(n[No].base_,t,e.patches_,e.inversePatches_)):t=J2(e,n,[]),JL(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Gre?t:void 0}function J2(t,e,n){if(xA(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[No];if(!i)return Q2(e,(s,a)=>BW(t,i,e,s,a,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return eE(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const s=i.copy_;let a=s,o=!1;i.type_===3&&(a=new Set(s),s.clear(),o=!0),Q2(a,(l,c)=>BW(t,i,s,l,c,n,o),r),eE(t,s,!1),n&&t.patches_&&Bp("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function BW(t,e,n,r,i,s,a){if(i==null||typeof i!="object"&&!a)return;const o=xA(i);if(!(o&&!a)){if(tx(i)){const l=s&&e&&e.type_!==3&&!ZL(e.assigned_,r)?s.concat(r):void 0,c=J2(t,i,l);if(Hre(n,r,c),tx(c))t.canAutoFreeze_=!1;else return}else a&&n.add(i);if(kp(i)&&!o){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&o)return;J2(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(Q_(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&eE(t,i)}}}function eE(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&QF(e,n)}function pXe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:Wre(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=JF;n&&(i=[r],s=t_);const{revoke:a,proxy:o}=Proxy.revocable(i,s);return r.draft_=o,r.revoke_=a,o}var JF={get(t,e){if(e===No)return t;const n=Wh(t);if(!ZL(n,e))return mXe(t,n,e);const r=n[e];return t.finalized_||!kp(r)?r:r===vO(t.base_,e)?(bO(t),t.copy_[e]=nI(r,t)):r},has(t,e){return e in Wh(t)},ownKeys(t){return Reflect.ownKeys(Wh(t))},set(t,e,n){const r=qre(Wh(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=vO(Wh(t),e),s=i?.[No];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(cXe(n,i)&&(n!==void 0||ZL(t.base_,e)))return!0;bO(t),tI(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return vO(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,bO(t),tI(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Wh(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){Ul(11)},getPrototypeOf(t){return Jb(t.base_)},setPrototypeOf(){Ul(12)}},t_={};Q2(JF,(t,e)=>{t_[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});t_.deleteProperty=function(t,e){return t_.set.call(this,t,e,void 0)};t_.set=function(t,e,n){return JF.set.call(this,t[0],e,n,t[0])};function vO(t,e){const n=t[No];return(n?Wh(n):t)[e]}function mXe(t,e,n){const r=qre(e,n);return r?"value"in r?r.value:r.get?.call(t.draft_):void 0}function qre(t,e){if(!(e in t))return;let n=Jb(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Jb(n)}}function tI(t){t.modified_||(t.modified_=!0,t.parent_&&tI(t.parent_))}function bO(t){t.copy_||(t.copy_=QL(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var gXe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const a=this;return function(l=s,...c){return a.produce(l,u=>n.call(this,u,...c))}}typeof n!="function"&&Ul(6),r!==void 0&&typeof r!="function"&&Ul(7);let i;if(kp(e)){const s=IW(this),a=nI(e,void 0);let o=!0;try{i=n(a),o=!1}finally{o?JL(s):eI(s)}return LW(s,r),kW(i,s)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===Gre&&(i=void 0),this.autoFreeze_&&QF(i,!0),r){const s=[],a=[];Bp("Patches").generateReplacementPatches_(e,i,s,a),r(s,a)}return i}else Ul(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(a,...o)=>this.produceWithPatches(a,l=>e(l,...o));let r,i;return[this.produce(e,n,(a,o)=>{r=a,i=o}),r,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof t?.useStrictIteration=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){kp(t)||Ul(8),tx(t)&&(t=xXe(t));const e=IW(this),n=nI(t,void 0);return n[No].isManual_=!0,eI(e),n}finishDraft(t,e){const n=t&&t[No];(!n||!n.isManual_)&&Ul(9);const{scope_:r}=n;return LW(r,e),kW(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=Bp("Patches").applyPatches_;return tx(t)?r(t,e):this.produce(t,i=>r(i,e))}};function nI(t,e){const n=Q_(t)?Bp("MapSet").proxyMap_(t,e):gA(t)?Bp("MapSet").proxySet_(t,e):pXe(t,e);return(e?e.scope_:Wre()).drafts_.push(n),n}function xXe(t){return tx(t)||Ul(10,t),Xre(t)}function Xre(t){if(!kp(t)||xA(t))return t;const e=t[No];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=QL(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=QL(t,!0);return Q2(n,(i,s)=>{Hre(n,i,Xre(s))},r),e&&(e.finalized_=!1),n}var yXe=new gXe;yXe.produce;var vXe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Yre=Ja({name:"legend",initialState:vXe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:Yr()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,i=ql(t).payload.indexOf(n);i>-1&&(t.payload[i]=r)},prepare:Yr()},removeLegendPayload:{reducer(t,e){var n=ql(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:Yr()}}}),{setLegendSize:FW,setLegendSettings:bXe,addLegendPayload:Kre,replaceLegendPayload:Zre,removeLegendPayload:Qre}=Yre.actions,_Xe=Yre.reducer,SXe=["contextPayload"];function rI(){return rI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rI.apply(null,arguments)}function UW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UW(Object(n),!0).forEach(function(r){wXe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wXe(t,e,n){return(e=TXe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TXe(t){var e=EXe(t,"string");return typeof e=="symbol"?e:e+""}function EXe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function CXe(t,e){if(t==null)return{};var n,r,i=AXe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function AXe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function MXe(t){return t.value}function RXe(t){var{contextPayload:e}=t,n=CXe(t,SXe),r=Zne(e,t.payloadUniqBy,MXe),i=nx(nx({},n),{},{payload:r});return w.isValidElement(t.content)?w.cloneElement(t.content,i):typeof t.content=="function"?w.createElement(t.content,i):w.createElement(v7e,i)}function PXe(t,e,n,r,i,s){var{layout:a,align:o,verticalAlign:l}=e,c,u;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(o==="center"&&a==="vertical"?c={left:((r||0)-s.width)/2}:c=o==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(l==="middle"?u={top:((i||0)-s.height)/2}:u=l==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),nx(nx({},c),u)}function NXe(t){var e=Ir();return w.useEffect(()=>{e(bXe(t))},[e,t]),null}function OXe(t){var e=Ir();return w.useEffect(()=>(e(FW(t)),()=>{e(FW({width:0,height:0}))}),[e,t]),null}function DXe(t,e,n,r){return t==="vertical"&&qt(e)?{height:e}:t==="horizontal"?{width:n||r}:null}var LXe={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function Jre(t){var e=ws(t,LXe),n=hWe(),r=cHe(),i=aXe(),{width:s,height:a,wrapperStyle:o,portal:l}=e,[c,u]=nre([n]),f=KF(),p=ZF();if(f==null||p==null)return null;var m=f-(i?.left||0)-(i?.right||0),x=DXe(e.layout,a,s,m),b=l?o:nx(nx({position:"absolute",width:x?.width||s||"auto",height:x?.height||a||"auto"},PXe(o,e,i,f,p,c)),o),v=l??r;if(v==null||n==null)return null;var _=w.createElement("div",{className:"recharts-legend-wrapper",style:b,ref:u},w.createElement(NXe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),!l&&w.createElement(OXe,{width:c.width,height:c.height}),w.createElement(RXe,rI({},e,x,{margin:i,chartWidth:f,chartHeight:p,contextPayload:n})));return cx.createPortal(_,v)}Jre.displayName="Legend";function iI(){return iI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iI.apply(null,arguments)}function jW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _O(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jW(Object(n),!0).forEach(function(r){IXe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function IXe(t,e,n){return(e=kXe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kXe(t){var e=BXe(t,"string");return typeof e=="symbol"?e:e+""}function BXe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function FXe(t){return Array.isArray(t)&&Vc(t[0])&&Vc(t[1])?t.join(" ~ "):t}var UXe=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:s,formatter:a,itemSorter:o,wrapperClassName:l,labelClassName:c,label:u,labelFormatter:f,accessibilityLayer:p=!1}=t,m=()=>{if(s&&s.length){var C={padding:0,margin:0},M=(o?QC(s,o):s).map((P,D)=>{if(P.type==="none")return null;var N=P.formatter||a||FXe,{value:L,name:k}=P,I=L,F=k;if(N){var z=N(L,k,P,D,s);if(Array.isArray(z))[I,F]=z;else if(z!=null)I=z;else return null}var H=_O({display:"block",paddingTop:4,paddingBottom:4,color:P.color||"#000"},r);return w.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(D),style:H},Vc(F)?w.createElement("span",{className:"recharts-tooltip-item-name"},F):null,Vc(F)?w.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,w.createElement("span",{className:"recharts-tooltip-item-value"},I),w.createElement("span",{className:"recharts-tooltip-item-unit"},P.unit||""))});return w.createElement("ul",{className:"recharts-tooltip-item-list",style:C},M)}return null},x=_O({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),b=_O({margin:0},i),v=!_s(u),_=v?u:"",E=qe("recharts-default-tooltip",l),T=qe("recharts-tooltip-label",c);v&&f&&s!==void 0&&s!==null&&(_=f(u,s));var A=p?{role:"status","aria-live":"assertive"}:{};return w.createElement("div",iI({className:E,style:x},A),w.createElement("p",{className:T,style:b},w.isValidElement(_)?_:"".concat(_)),m())},xv="recharts-tooltip-wrapper",jXe={visibility:"hidden"};function zXe(t){var{coordinate:e,translateX:n,translateY:r}=t;return qe(xv,{["".concat(xv,"-right")]:qt(n)&&e&&qt(e.x)&&n>=e.x,["".concat(xv,"-left")]:qt(n)&&e&&qt(e.x)&&n<e.x,["".concat(xv,"-bottom")]:qt(r)&&e&&qt(e.y)&&r>=e.y,["".concat(xv,"-top")]:qt(r)&&e&&qt(e.y)&&r<e.y})}function zW(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:i,position:s,reverseDirection:a,tooltipDimension:o,viewBox:l,viewBoxDimension:c}=t;if(s&&qt(s[r]))return s[r];var u=n[r]-o-(i>0?i:0),f=n[r]+i;if(e[r])return a[r]?u:f;var p=l[r];if(p==null)return 0;if(a[r]){var m=u,x=p;return m<x?Math.max(f,p):Math.max(u,p)}if(c==null)return 0;var b=f+o,v=p+c;return b>v?Math.max(u,p):Math.max(f,p)}function $Xe(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function GXe(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:s,tooltipBox:a,useTranslate3d:o,viewBox:l}=t,c,u,f;return a.height>0&&a.width>0&&n?(u=zW({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:a.width,viewBox:l,viewBoxDimension:l.width}),f=zW({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:a.height,viewBox:l,viewBoxDimension:l.height}),c=$Xe({translateX:u,translateY:f,useTranslate3d:o})):c=jXe,{cssProperties:c,cssClasses:zXe({translateX:u,translateY:f,coordinate:n})}}function $W(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function aT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$W(Object(n),!0).forEach(function(r){sI(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$W(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sI(t,e,n){return(e=VXe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VXe(t){var e=HXe(t,"string");return typeof e=="symbol"?e:e+""}function HXe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class WXe extends w.PureComponent{constructor(){super(...arguments),sI(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),sI(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:s,coordinate:a,hasPayload:o,isAnimationActive:l,offset:c,position:u,reverseDirection:f,useTranslate3d:p,viewBox:m,wrapperStyle:x,lastBoundingBox:b,innerRef:v,hasPortalFromProps:_}=this.props,{cssClasses:E,cssProperties:T}=GXe({allowEscapeViewBox:n,coordinate:a,offsetTopLeft:c,position:u,reverseDirection:f,tooltipBox:{height:b.height,width:b.width},useTranslate3d:p,viewBox:m}),A=_?{}:aT(aT({transition:l&&e?"transform ".concat(r,"ms ").concat(i):void 0},T),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),C=aT(aT({},A),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},x);return w.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:E,style:C,ref:v},s)}}var eie=()=>{var t;return(t=Vt(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function aI(){return aI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aI.apply(null,arguments)}function GW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function VW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GW(Object(n),!0).forEach(function(r){qXe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qXe(t,e,n){return(e=XXe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XXe(t){var e=YXe(t,"string");return typeof e=="symbol"?e:e+""}function YXe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var HW={curveBasisClosed:MHe,curveBasisOpen:RHe,curveBasis:AHe,curveBumpX:hHe,curveBumpY:pHe,curveLinearClosed:PHe,curveLinear:KC,curveMonotoneX:NHe,curveMonotoneY:OHe,curveNatural:DHe,curveStep:LHe,curveStepAfter:kHe,curveStepBefore:IHe},tE=t=>Pi(t.x)&&Pi(t.y),WW=t=>t.base!=null&&tE(t.base)&&tE(t),yv=t=>t.x,vv=t=>t.y,KXe=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(H_(t));return(n==="curveMonotone"||n==="curveBump")&&e?HW["".concat(n).concat(e==="vertical"?"Y":"X")]:HW[n]||KC},ZXe=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:i,connectNulls:s=!1}=t,a=KXe(e,i),o=s?n.filter(tE):n,l;if(Array.isArray(r)){var c=n.map((m,x)=>VW(VW({},m),{},{base:r[x]}));i==="vertical"?l=Qw().y(vv).x1(yv).x0(m=>m.base.x):l=Qw().x(yv).y1(vv).y0(m=>m.base.y);var u=l.defined(WW).curve(a),f=s?c.filter(WW):c;return u(f)}i==="vertical"&&qt(r)?l=Qw().y(vv).x1(yv).x0(r):qt(r)?l=Qw().x(yv).y1(vv).y0(r):l=Ane().x(yv).y(vv);var p=l.defined(tE).curve(a);return p(o)},e5=t=>{var{className:e,points:n,path:r,pathRef:i}=t;if((!n||!n.length)&&!r)return null;var s=n&&n.length?ZXe(t):r;return w.createElement("path",aI({},Zl(t),a7e(t),{className:qe("recharts-curve",e),d:s===null?void 0:s,ref:i}))},QXe=["x","y","top","left","width","height","className"];function oI(){return oI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oI.apply(null,arguments)}function qW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function JXe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qW(Object(n),!0).forEach(function(r){eYe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eYe(t,e,n){return(e=tYe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tYe(t){var e=nYe(t,"string");return typeof e=="symbol"?e:e+""}function nYe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rYe(t,e){if(t==null)return{};var n,r,i=iYe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function iYe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var sYe=(t,e,n,r,i,s)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(s,",").concat(e,"h").concat(n),aYe=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:s=0,height:a=0,className:o}=t,l=rYe(t,QXe),c=JXe({x:e,y:n,top:r,left:i,width:s,height:a},l);return!qt(e)||!qt(n)||!qt(s)||!qt(a)||!qt(r)||!qt(i)?null:w.createElement("path",oI({},ml(c),{className:qe("recharts-cross",o),d:sYe(e,n,s,a,r,i)}))};function oYe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function XW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function YW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XW(Object(n),!0).forEach(function(r){lYe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lYe(t,e,n){return(e=cYe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cYe(t){var e=uYe(t,"string");return typeof e=="symbol"?e:e+""}function uYe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dYe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),tie=(t,e,n)=>t.map(r=>"".concat(dYe(r)," ").concat(e,"ms ").concat(n)).join(","),fYe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),n_=(t,e)=>Object.keys(e).reduce((n,r)=>YW(YW({},n),{},{[r]:t(r,e[r])}),{});function KW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Qi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KW(Object(n),!0).forEach(function(r){hYe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hYe(t,e,n){return(e=pYe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pYe(t){var e=mYe(t,"string");return typeof e=="symbol"?e:e+""}function mYe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nE=(t,e,n)=>t+(e-t)*n,lI=t=>{var{from:e,to:n}=t;return e!==n},nie=(t,e,n)=>{var r=n_((i,s)=>{if(lI(s)){var[a,o]=t(s.from,s.to,s.velocity);return Qi(Qi({},s),{},{from:a,velocity:o})}return s},e);return n<1?n_((i,s)=>lI(s)?Qi(Qi({},s),{},{velocity:nE(s.velocity,r[i].velocity,n),from:nE(s.from,r[i].from,n)}):s,e):nie(t,r,n-1)};function gYe(t,e,n,r,i,s){var a,o=r.reduce((p,m)=>Qi(Qi({},p),{},{[m]:{from:t[m],velocity:0,to:e[m]}}),{}),l=()=>n_((p,m)=>m.from,o),c=()=>!Object.values(o).filter(lI).length,u=null,f=p=>{a||(a=p);var m=p-a,x=m/n.dt;o=nie(n,o,x),i(Qi(Qi(Qi({},t),e),l())),a=p,c()||(u=s.setTimeout(f))};return()=>(u=s.setTimeout(f),()=>{var p;(p=u)===null||p===void 0||p()})}function xYe(t,e,n,r,i,s,a){var o=null,l=i.reduce((f,p)=>Qi(Qi({},f),{},{[p]:[t[p],e[p]]}),{}),c,u=f=>{c||(c=f);var p=(f-c)/r,m=n_((b,v)=>nE(...v,n(p)),l);if(s(Qi(Qi(Qi({},t),e),m)),p<1)o=a.setTimeout(u);else{var x=n_((b,v)=>nE(...v,n(1)),l);s(Qi(Qi(Qi({},t),e),x))}};return()=>(o=a.setTimeout(u),()=>{var f;(f=o)===null||f===void 0||f()})}const yYe=(t,e,n,r,i,s)=>{var a=fYe(t,e);return n==null?()=>(i(Qi(Qi({},t),e)),()=>{}):n.isStepper===!0?gYe(t,e,n,a,i,s):xYe(t,e,n,r,a,i,s)};var rE=1e-4,rie=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],iie=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),ZW=(t,e)=>n=>{var r=rie(t,e);return iie(r,n)},vYe=(t,e)=>n=>{var r=rie(t,e),i=[...r.map((s,a)=>s*a).slice(1),0];return iie(i,n)},bYe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i,s=n[0].split("(");if(s[0]==="cubic-bezier"&&((i=s[1])===null||i===void 0?void 0:i.split(")")[0].split(",").length)===4){var a=s[1].split(")")[0].split(",").map(o=>parseFloat(o));return[a[0],a[1],a[2],a[3]]}}}return n.length===4?n:[0,0,1,1]},_Ye=(t,e,n,r)=>{var i=ZW(t,n),s=ZW(e,r),a=vYe(t,n),o=c=>c>1?1:c<0?0:c,l=c=>{for(var u=c>1?1:c,f=u,p=0;p<8;++p){var m=i(f)-u,x=a(f);if(Math.abs(m-u)<rE||x<rE)return s(f);f=o(f-m/x)}return s(f)};return l.isStepper=!1,l},QW=function(){return _Ye(...bYe(...arguments))},SYe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,s=(a,o,l)=>{var c=-(a-o)*n,u=l*r,f=l+(c-u)*i/1e3,p=l*i/1e3+a;return Math.abs(p-o)<rE&&Math.abs(f)<rE?[o,0]:[p,f]};return s.isStepper=!0,s.dt=i,s},wYe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return QW(t);case"spring":return SYe();default:if(t.split("(")[0]==="cubic-bezier")return QW(t)}return typeof t=="function"?t:null};function TYe(t){var e,n=()=>null,r=!1,i=null,s=a=>{if(!r){if(Array.isArray(a)){if(!a.length)return;var o=a,[l,...c]=o;if(typeof l=="number"){i=t.setTimeout(s.bind(null,c),l);return}s(l),i=t.setTimeout(s.bind(null,c));return}typeof a=="string"&&(e=a,n(e)),typeof a=="object"&&(e=a,n(e)),typeof a=="function"&&a()}};return{stop:()=>{r=!0},start:a=>{r=!1,i&&(i(),i=null),s(a)},subscribe:a=>(n=a,()=>{n=()=>null}),getTimeoutController:()=>t}}class EYe{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,s=a=>{a-r>=n?e(a):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{i!=null&&cancelAnimationFrame(i)}}}function CYe(){return TYe(new EYe)}var AYe=w.createContext(CYe);function MYe(t,e){var n=w.useContext(AYe);return w.useMemo(()=>e??n(t),[t,e,n])}var RYe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),J_={devToolsEnabled:!1,isSsr:RYe()},PYe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},JW={t:0},SO={t:1};function yA(t){var e=ws(t,PYe),{isActive:n,canBegin:r,duration:i,easing:s,begin:a,onAnimationEnd:o,onAnimationStart:l,children:c}=e,u=n==="auto"?!J_.isSsr:n,f=MYe(e.animationId,e.animationManager),[p,m]=w.useState(u?JW:SO),x=w.useRef(null);return w.useEffect(()=>{u||m(SO)},[u]),w.useEffect(()=>{if(!u||!r)return W_;var b=yYe(JW,SO,wYe(s),i,m,f.getTimeoutController()),v=()=>{x.current=b()};return f.start([l,a,v,i,o]),()=>{f.stop(),x.current&&x.current(),o()}},[u,r,i,s,a,l,o,f]),c(p.t)}function vA(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=w.useRef(Yb(e)),r=w.useRef(t);return r.current!==t&&(n.current=Yb(e),r.current=t),n.current}var NYe=["radius"],OYe=["radius"];function eq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eq(Object(n),!0).forEach(function(r){DYe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function DYe(t,e,n){return(e=LYe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LYe(t){var e=IYe(t,"string");return typeof e=="symbol"?e:e+""}function IYe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iE(){return iE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iE.apply(null,arguments)}function nq(t,e){if(t==null)return{};var n,r,i=kYe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function kYe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var rq=(t,e,n,r,i)=>{var s=Math.min(Math.abs(n)/2,Math.abs(r)/2),a=r>=0?1:-1,o=n>=0?1:-1,l=r>=0&&n>=0||r<0&&n<0?1:0,c;if(s>0&&i instanceof Array){for(var u=[0,0,0,0],f=0,p=4;f<p;f++)u[f]=i[f]>s?s:i[f];c="M".concat(t,",").concat(e+a*u[0]),u[0]>0&&(c+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(l,",").concat(t+o*u[0],",").concat(e)),c+="L ".concat(t+n-o*u[1],",").concat(e),u[1]>0&&(c+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(l,`,
        `).concat(t+n,",").concat(e+a*u[1])),c+="L ".concat(t+n,",").concat(e+r-a*u[2]),u[2]>0&&(c+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(l,`,
        `).concat(t+n-o*u[2],",").concat(e+r)),c+="L ".concat(t+o*u[3],",").concat(e+r),u[3]>0&&(c+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(l,`,
        `).concat(t,",").concat(e+r-a*u[3])),c+="Z"}else if(s>0&&i===+i&&i>0){var m=Math.min(s,i);c="M ".concat(t,",").concat(e+a*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(l,",").concat(t+o*m,",").concat(e,`
            L `).concat(t+n-o*m,",").concat(e,`
            A `).concat(m,",").concat(m,",0,0,").concat(l,",").concat(t+n,",").concat(e+a*m,`
            L `).concat(t+n,",").concat(e+r-a*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(l,",").concat(t+n-o*m,",").concat(e+r,`
            L `).concat(t+o*m,",").concat(e+r,`
            A `).concat(m,",").concat(m,",0,0,").concat(l,",").concat(t,",").concat(e+r-a*m," Z")}else c="M ".concat(t,",").concat(e," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return c},iq={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},sie=t=>{var e=ws(t,iq),n=w.useRef(null),[r,i]=w.useState(-1);w.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var j=n.current.getTotalLength();j&&i(j)}catch{}},[]);var{x:s,y:a,width:o,height:l,radius:c,className:u}=e,{animationEasing:f,animationDuration:p,animationBegin:m,isAnimationActive:x,isUpdateAnimationActive:b}=e,v=w.useRef(o),_=w.useRef(l),E=w.useRef(s),T=w.useRef(a),A=w.useMemo(()=>({x:s,y:a,width:o,height:l,radius:c}),[s,a,o,l,c]),C=vA(A,"rectangle-");if(s!==+s||a!==+a||o!==+o||l!==+l||o===0||l===0)return null;var M=qe("recharts-rectangle",u);if(!b){var P=ml(e),{radius:D}=P,N=nq(P,NYe);return w.createElement("path",iE({},N,{radius:typeof c=="number"?c:void 0,className:M,d:rq(s,a,o,l,c)}))}var L=v.current,k=_.current,I=E.current,F=T.current,z="0px ".concat(r===-1?1:r,"px"),H="".concat(r,"px 0px"),B=tie(["strokeDasharray"],p,typeof f=="string"?f:iq.animationEasing);return w.createElement(yA,{animationId:C,key:C,canBegin:r>0,duration:p,easing:f,isActive:b,begin:m},j=>{var G=Zi(L,o,j),W=Zi(k,l,j),re=Zi(I,s,j),$=Zi(F,a,j);n.current&&(v.current=G,_.current=W,E.current=re,T.current=$);var ee;x?j>0?ee={transition:B,strokeDasharray:H}:ee={strokeDasharray:z}:ee={strokeDasharray:H};var oe=ml(e),{radius:me}=oe,te=nq(oe,OYe);return w.createElement("path",iE({},te,{radius:typeof c=="number"?c:void 0,className:M,d:rq(re,$,G,W,c),ref:n,style:tq(tq({},ee),e.style)}))})};function sq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function aq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sq(Object(n),!0).forEach(function(r){BYe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function BYe(t,e,n){return(e=FYe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FYe(t){var e=UYe(t,"string");return typeof e=="symbol"?e:e+""}function UYe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sE=Math.PI/180,jYe=t=>t*180/Math.PI,zi=(t,e,n,r)=>({x:t+Math.cos(-sE*r)*n,y:e+Math.sin(-sE*r)*n}),aie=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},zYe=(t,e)=>{var{x:n,y:r}=t,{x:i,y:s}=e;return Math.sqrt((n-i)**2+(r-s)**2)},$Ye=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:s}=e,a=zYe({x:n,y:r},{x:i,y:s});if(a<=0)return{radius:a,angle:0};var o=(n-i)/a,l=Math.acos(o);return r>s&&(l=2*Math.PI-l),{radius:a,angle:jYe(l),angleInRadian:l}},GYe=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),s=Math.min(r,i);return{startAngle:e-s*360,endAngle:n-s*360}},VYe=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),s=Math.floor(r/360),a=Math.min(i,s);return t+a*360},HYe=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:i,angle:s}=$Ye({x:n,y:r},e),{innerRadius:a,outerRadius:o}=e;if(i<a||i>o||i===0)return null;var{startAngle:l,endAngle:c}=GYe(e),u=s,f;if(l<=c){for(;u>c;)u-=360;for(;u<l;)u+=360;f=u>=l&&u<=c}else{for(;u>l;)u-=360;for(;u<c;)u+=360;f=u>=c&&u<=l}return f?aq(aq({},e),{},{radius:i,angle:VYe(u,e)}):null};function oie(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:s}=t,a=zi(e,n,r,i),o=zi(e,n,r,s);return{points:[a,o],cx:e,cy:n,radius:r,startAngle:i,endAngle:s}}function cI(){return cI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cI.apply(null,arguments)}var WYe=(t,e)=>{var n=vs(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},oT=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:s,isExternal:a,cornerRadius:o,cornerIsExternal:l}=t,c=o*(a?1:-1)+r,u=Math.asin(o/c)/sE,f=l?i:i+s*u,p=zi(e,n,c,f),m=zi(e,n,r,f),x=l?i-s*u:i,b=zi(e,n,c*Math.cos(u*sE),x);return{center:p,circleTangency:m,lineTangency:b,theta:u}},lie=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:s,endAngle:a}=t,o=WYe(s,a),l=s+o,c=zi(e,n,i,s),u=zi(e,n,i,l),f="M ".concat(c.x,",").concat(c.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(s>l),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(r>0){var p=zi(e,n,r,s),m=zi(e,n,r,l);f+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(s<=l),`,
            `).concat(p.x,",").concat(p.y," Z")}else f+="L ".concat(e,",").concat(n," Z");return f},qYe=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:s,forceCornerRadius:a,cornerIsExternal:o,startAngle:l,endAngle:c}=t,u=vs(c-l),{circleTangency:f,lineTangency:p,theta:m}=oT({cx:e,cy:n,radius:i,angle:l,sign:u,cornerRadius:s,cornerIsExternal:o}),{circleTangency:x,lineTangency:b,theta:v}=oT({cx:e,cy:n,radius:i,angle:c,sign:-u,cornerRadius:s,cornerIsExternal:o}),_=o?Math.abs(l-c):Math.abs(l-c)-m-v;if(_<0)return a?"M ".concat(p.x,",").concat(p.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):lie({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:l,endAngle:c});var E="M ".concat(p.x,",").concat(p.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(_>180),",").concat(+(u<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(b.x,",").concat(b.y,`
  `);if(r>0){var{circleTangency:T,lineTangency:A,theta:C}=oT({cx:e,cy:n,radius:r,angle:l,sign:u,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),{circleTangency:M,lineTangency:P,theta:D}=oT({cx:e,cy:n,radius:r,angle:c,sign:-u,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),N=o?Math.abs(l-c):Math.abs(l-c)-C-D;if(N<0&&s===0)return"".concat(E,"L").concat(e,",").concat(n,"Z");E+="L".concat(P.x,",").concat(P.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(M.x,",").concat(M.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(N>180),",").concat(+(u>0),",").concat(T.x,",").concat(T.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(A.x,",").concat(A.y,"Z")}else E+="L".concat(e,",").concat(n,"Z");return E},XYe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},cie=t=>{var e=ws(t,XYe),{cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:a,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u,className:f}=e;if(s<i||c===u)return null;var p=qe("recharts-sector",f),m=s-i,x=na(a,m,0,!0),b;return x>0&&Math.abs(c-u)<360?b=qYe({cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:Math.min(x,m/2),forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u}):b=lie({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:c,endAngle:u}),w.createElement("path",cI({},ml(e),{className:p,d:b}))};function YYe(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(zne(e)){if(t==="centric"){var{cx:r,cy:i,innerRadius:s,outerRadius:a,angle:o}=e,l=zi(r,i,s,o),c=zi(r,i,a,o);return[{x:l.x,y:l.y},{x:c.x,y:c.y}]}return oie(e)}}var wO={},TO={},EO={},oq;function KYe(){return oq||(oq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Jne();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(EO)),EO}var lq;function ZYe(){return lq||(lq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=KYe();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(TO)),TO}var cq;function QYe(){return cq||(cq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ere(),n=ZYe();function r(i,s,a){a&&typeof a!="number"&&e.isIterateeCall(i,s,a)&&(s=a=void 0),i=n.toFinite(i),s===void 0?(s=i,i=0):s=n.toFinite(s),a=a===void 0?i<s?1:-1:n.toFinite(a);const o=Math.max(Math.ceil((s-i)/(a||1)),0),l=new Array(o);for(let c=0;c<o;c++)l[c]=i,i+=a;return l}t.range=r})(wO)),wO}var CO,uq;function JYe(){return uq||(uq=1,CO=QYe().range),CO}var eKe=JYe();const uie=Ea(eKe),kv=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:_B,scaleDiverging:fJ,scaleDivergingLog:hJ,scaleDivergingPow:zB,scaleDivergingSqrt:vLe,scaleDivergingSymlog:pJ,scaleIdentity:WQ,scaleImplicit:qD,scaleLinear:HQ,scaleLog:XQ,scaleOrdinal:yC,scalePoint:aOe,scalePow:NB,scaleQuantile:ZQ,scaleQuantize:QQ,scaleRadial:KQ,scaleSequential:lJ,scaleSequentialLog:cJ,scaleSequentialPow:jB,scaleSequentialQuantile:dJ,scaleSequentialSqrt:yLe,scaleSequentialSymlog:uJ,scaleSqrt:JOe,scaleSymlog:YQ,scaleThreshold:JQ,scaleTime:gLe,scaleUtc:xLe,tickFormat:VQ},Symbol.toStringTag,{value:"Module"}));var rh=t=>t.chartData,t5=Le([rh],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),n5=(t,e,n,r)=>r?t5(t):rh(t);function Gf(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(Pi(e)&&Pi(n))return!0}return!1}function dq(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function die(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,s;if(Pi(n))i=n;else if(typeof n=="function")return;if(Pi(r))s=r;else if(typeof r=="function")return;var a=[i,s];if(Gf(a))return a}}function tKe(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(Gf(r))return dq(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,s]=t,a,o;if(i==="auto")e!=null&&(a=Math.min(...e));else if(qt(i))a=i;else if(typeof i=="function")try{e!=null&&(a=i(e?.[0]))}catch{}else if(typeof i=="string"&&_W.test(i)){var l=_W.exec(i);if(l==null||e==null)a=void 0;else{var c=+l[1];a=e[0]-c}}else a=e?.[0];if(s==="auto")e!=null&&(o=Math.max(...e));else if(qt(s))o=s;else if(typeof s=="function")try{e!=null&&(o=s(e?.[1]))}catch{}else if(typeof s=="string"&&SW.test(s)){var u=SW.exec(s);if(u==null||e==null)o=void 0;else{var f=+u[1];o=e[1]+f}}else o=e?.[1];var p=[a,o];if(Gf(p))return e==null?p:dq(p,e,n)}}}var Rx=1e9,nKe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},i5,Jr=!0,xl="[DecimalError] ",_p=xl+"Invalid argument: ",r5=xl+"Exponent out of range: ",Px=Math.floor,qh=Math.pow,rKe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,bo,gs=1e7,Ur=7,fie=9007199254740991,aE=Px(fie/Ur),zt={};zt.absoluteValue=zt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};zt.comparedTo=zt.cmp=function(t){var e,n,r,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(r=s.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};zt.decimalPlaces=zt.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Ur;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};zt.dividedBy=zt.div=function(t){return rd(this,new this.constructor(t))};zt.dividedToIntegerBy=zt.idiv=function(t){var e=this,n=e.constructor;return Mr(rd(e,new n(t),0,1),n.precision)};zt.equals=zt.eq=function(t){return!this.cmp(t)};zt.exponent=function(){return Vi(this)};zt.greaterThan=zt.gt=function(t){return this.cmp(t)>0};zt.greaterThanOrEqualTo=zt.gte=function(t){return this.cmp(t)>=0};zt.isInteger=zt.isint=function(){return this.e>this.d.length-2};zt.isNegative=zt.isneg=function(){return this.s<0};zt.isPositive=zt.ispos=function(){return this.s>0};zt.isZero=function(){return this.s===0};zt.lessThan=zt.lt=function(t){return this.cmp(t)<0};zt.lessThanOrEqualTo=zt.lte=function(t){return this.cmp(t)<1};zt.logarithm=zt.log=function(t){var e,n=this,r=n.constructor,i=r.precision,s=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(bo))throw Error(xl+"NaN");if(n.s<1)throw Error(xl+(n.s?"NaN":"-Infinity"));return n.eq(bo)?new r(0):(Jr=!1,e=rd(r_(n,s),r_(t,s),s),Jr=!0,Mr(e,i))};zt.minus=zt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?mie(e,t):hie(e,(t.s=-t.s,t))};zt.modulo=zt.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(xl+"NaN");return n.s?(Jr=!1,e=rd(n,t,0,1).times(t),Jr=!0,n.minus(e)):Mr(new r(n),i)};zt.naturalExponential=zt.exp=function(){return pie(this)};zt.naturalLogarithm=zt.ln=function(){return r_(this)};zt.negated=zt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};zt.plus=zt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?hie(e,t):mie(e,(t.s=-t.s,t))};zt.precision=zt.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(_p+t);if(e=Vi(i)+1,r=i.d.length-1,n=r*Ur+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};zt.squareRoot=zt.sqrt=function(){var t,e,n,r,i,s,a,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(xl+"NaN")}for(t=Vi(o),Jr=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=Nc(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Px((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=a=n+3;;)if(s=r,r=s.plus(rd(o,s,a+2)).times(.5),Nc(s.d).slice(0,a)===(e=Nc(r.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&e=="4999"){if(Mr(s,n+1,0),s.times(s).eq(o)){r=s;break}}else if(e!="9999")break;a+=4}return Jr=!0,Mr(r,n)};zt.times=zt.mul=function(t){var e,n,r,i,s,a,o,l,c,u=this,f=u.constructor,p=u.d,m=(t=new f(t)).d;if(!u.s||!t.s)return new f(0);for(t.s*=u.s,n=u.e+t.e,l=p.length,c=m.length,l<c&&(s=p,p=m,m=s,a=l,l=c,c=a),s=[],a=l+c,r=a;r--;)s.push(0);for(r=c;--r>=0;){for(e=0,i=l+r;i>r;)o=s[i]+m[r]*p[i-r-1]+e,s[i--]=o%gs|0,e=o/gs|0;s[i]=(s[i]+e)%gs|0}for(;!s[--a];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,Jr?Mr(t,f.precision):t};zt.toDecimalPlaces=zt.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Wc(t,0,Rx),e===void 0?e=r.rounding:Wc(e,0,8),Mr(n,t+Vi(n)+1,e))};zt.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Fp(r,!0):(Wc(t,0,Rx),e===void 0?e=i.rounding:Wc(e,0,8),r=Mr(new i(r),t+1,e),n=Fp(r,!0,t+1)),n};zt.toFixed=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?Fp(i):(Wc(t,0,Rx),e===void 0?e=s.rounding:Wc(e,0,8),r=Mr(new s(i),t+Vi(i)+1,e),n=Fp(r.abs(),!1,t+Vi(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};zt.toInteger=zt.toint=function(){var t=this,e=t.constructor;return Mr(new e(t),Vi(t)+1,e.rounding)};zt.toNumber=function(){return+this};zt.toPower=zt.pow=function(t){var e,n,r,i,s,a,o=this,l=o.constructor,c=12,u=+(t=new l(t));if(!t.s)return new l(bo);if(o=new l(o),!o.s){if(t.s<1)throw Error(xl+"Infinity");return o}if(o.eq(bo))return o;if(r=l.precision,t.eq(bo))return Mr(o,r);if(e=t.e,n=t.d.length-1,a=e>=n,s=o.s,a){if((n=u<0?-u:u)<=fie){for(i=new l(bo),e=Math.ceil(r/Ur+4),Jr=!1;n%2&&(i=i.times(o),hq(i.d,e)),n=Px(n/2),n!==0;)o=o.times(o),hq(o.d,e);return Jr=!0,t.s<0?new l(bo).div(i):Mr(i,r)}}else if(s<0)throw Error(xl+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,Jr=!1,i=t.times(r_(o,r+c)),Jr=!0,i=pie(i),i.s=s,i};zt.toPrecision=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?(n=Vi(i),r=Fp(i,n<=s.toExpNeg||n>=s.toExpPos)):(Wc(t,1,Rx),e===void 0?e=s.rounding:Wc(e,0,8),i=Mr(new s(i),t,e),n=Vi(i),r=Fp(i,t<=n||n<=s.toExpNeg,t)),r};zt.toSignificantDigits=zt.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Wc(t,1,Rx),e===void 0?e=r.rounding:Wc(e,0,8)),Mr(new r(n),t,e)};zt.toString=zt.valueOf=zt.val=zt.toJSON=zt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Vi(t),n=t.constructor;return Fp(t,e<=n.toExpNeg||e>=n.toExpPos)};function hie(t,e){var n,r,i,s,a,o,l,c,u=t.constructor,f=u.precision;if(!t.s||!e.s)return e.s||(e=new u(t)),Jr?Mr(e,f):e;if(l=t.d,c=e.d,a=t.e,i=e.e,l=l.slice(),s=a-i,s){for(s<0?(r=l,s=-s,o=c.length):(r=c,i=a,o=l.length),a=Math.ceil(f/Ur),o=a>o?a+1:o+1,s>o&&(s=o,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(o=l.length,s=c.length,o-s<0&&(s=o,r=c,c=l,l=r),n=0;s;)n=(l[--s]=l[s]+c[s]+n)/gs|0,l[s]%=gs;for(n&&(l.unshift(n),++i),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=i,Jr?Mr(e,f):e}function Wc(t,e,n){if(t!==~~t||t<e||t>n)throw Error(_p+t)}function Nc(t){var e,n,r,i=t.length-1,s="",a=t[0];if(i>0){for(s+=a,e=1;e<i;e++)r=t[e]+"",n=Ur-r.length,n&&(s+=pf(n)),s+=r;a=t[e],r=a+"",n=Ur-r.length,n&&(s+=pf(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}var rd=(function(){function t(r,i){var s,a=0,o=r.length;for(r=r.slice();o--;)s=r[o]*i+a,r[o]=s%gs|0,a=s/gs|0;return a&&r.unshift(a),r}function e(r,i,s,a){var o,l;if(s!=a)l=s>a?1:-1;else for(o=l=0;o<s;o++)if(r[o]!=i[o]){l=r[o]>i[o]?1:-1;break}return l}function n(r,i,s){for(var a=0;s--;)r[s]-=a,a=r[s]<i[s]?1:0,r[s]=a*gs+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,a){var o,l,c,u,f,p,m,x,b,v,_,E,T,A,C,M,P,D,N=r.constructor,L=r.s==i.s?1:-1,k=r.d,I=i.d;if(!r.s)return new N(r);if(!i.s)throw Error(xl+"Division by zero");for(l=r.e-i.e,P=I.length,C=k.length,m=new N(L),x=m.d=[],c=0;I[c]==(k[c]||0);)++c;if(I[c]>(k[c]||0)&&--l,s==null?E=s=N.precision:a?E=s+(Vi(r)-Vi(i))+1:E=s,E<0)return new N(0);if(E=E/Ur+2|0,c=0,P==1)for(u=0,I=I[0],E++;(c<C||u)&&E--;c++)T=u*gs+(k[c]||0),x[c]=T/I|0,u=T%I|0;else{for(u=gs/(I[0]+1)|0,u>1&&(I=t(I,u),k=t(k,u),P=I.length,C=k.length),A=P,b=k.slice(0,P),v=b.length;v<P;)b[v++]=0;D=I.slice(),D.unshift(0),M=I[0],I[1]>=gs/2&&++M;do u=0,o=e(I,b,P,v),o<0?(_=b[0],P!=v&&(_=_*gs+(b[1]||0)),u=_/M|0,u>1?(u>=gs&&(u=gs-1),f=t(I,u),p=f.length,v=b.length,o=e(f,b,p,v),o==1&&(u--,n(f,P<p?D:I,p))):(u==0&&(o=u=1),f=I.slice()),p=f.length,p<v&&f.unshift(0),n(b,f,v),o==-1&&(v=b.length,o=e(I,b,P,v),o<1&&(u++,n(b,P<v?D:I,v))),v=b.length):o===0&&(u++,b=[0]),x[c++]=u,o&&b[0]?b[v++]=k[A]||0:(b=[k[A]],v=1);while((A++<C||b[0]!==void 0)&&E--)}return x[0]||x.shift(),m.e=l,Mr(m,a?s+Vi(m)+1:s)}})();function pie(t,e){var n,r,i,s,a,o,l=0,c=0,u=t.constructor,f=u.precision;if(Vi(t)>16)throw Error(r5+Vi(t));if(!t.s)return new u(bo);for(Jr=!1,o=f,a=new u(.03125);t.abs().gte(.1);)t=t.times(a),c+=5;for(r=Math.log(qh(2,c))/Math.LN10*2+5|0,o+=r,n=i=s=new u(bo),u.precision=o;;){if(i=Mr(i.times(t),o),n=n.times(++l),a=s.plus(rd(i,n,o)),Nc(a.d).slice(0,o)===Nc(s.d).slice(0,o)){for(;c--;)s=Mr(s.times(s),o);return u.precision=f,e==null?(Jr=!0,Mr(s,f)):s}s=a}}function Vi(t){for(var e=t.e*Ur,n=t.d[0];n>=10;n/=10)e++;return e}function AO(t,e,n){if(e>t.LN10.sd())throw Jr=!0,n&&(t.precision=n),Error(xl+"LN10 precision limit exceeded");return Mr(new t(t.LN10),e)}function pf(t){for(var e="";t--;)e+="0";return e}function r_(t,e){var n,r,i,s,a,o,l,c,u,f=1,p=10,m=t,x=m.d,b=m.constructor,v=b.precision;if(m.s<1)throw Error(xl+(m.s?"NaN":"-Infinity"));if(m.eq(bo))return new b(0);if(e==null?(Jr=!1,c=v):c=e,m.eq(10))return e==null&&(Jr=!0),AO(b,c);if(c+=p,b.precision=c,n=Nc(x),r=n.charAt(0),s=Vi(m),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)m=m.times(t),n=Nc(m.d),r=n.charAt(0),f++;s=Vi(m),r>1?(m=new b("0."+n),s++):m=new b(r+"."+n.slice(1))}else return l=AO(b,c+2,v).times(s+""),m=r_(new b(r+"."+n.slice(1)),c-p).plus(l),b.precision=v,e==null?(Jr=!0,Mr(m,v)):m;for(o=a=m=rd(m.minus(bo),m.plus(bo),c),u=Mr(m.times(m),c),i=3;;){if(a=Mr(a.times(u),c),l=o.plus(rd(a,new b(i),c)),Nc(l.d).slice(0,c)===Nc(o.d).slice(0,c))return o=o.times(2),s!==0&&(o=o.plus(AO(b,c+2,v).times(s+""))),o=rd(o,new b(f),c),b.precision=v,e==null?(Jr=!0,Mr(o,v)):o;o=l,i+=2}}function fq(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Px(n/Ur),t.d=[],r=(n+1)%Ur,n<0&&(r+=Ur),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Ur;r<i;)t.d.push(+e.slice(r,r+=Ur));e=e.slice(r),r=Ur-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Jr&&(t.e>aE||t.e<-aE))throw Error(r5+n)}else t.s=0,t.e=0,t.d=[0];return t}function Mr(t,e,n){var r,i,s,a,o,l,c,u,f=t.d;for(a=1,s=f[0];s>=10;s/=10)a++;if(r=e-a,r<0)r+=Ur,i=e,c=f[u=0];else{if(u=Math.ceil((r+1)/Ur),s=f.length,u>=s)return t;for(c=s=f[u],a=1;s>=10;s/=10)a++;r%=Ur,i=r-Ur+a}if(n!==void 0&&(s=qh(10,a-i-1),o=c/s%10|0,l=e<0||f[u+1]!==void 0||c%s,l=n<4?(o||l)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||l||n==6&&(r>0?i>0?c/qh(10,a-i):0:f[u-1])%10&1||n==(t.s<0?8:7))),e<1||!f[0])return l?(s=Vi(t),f.length=1,e=e-s-1,f[0]=qh(10,(Ur-e%Ur)%Ur),t.e=Px(-e/Ur)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(r==0?(f.length=u,s=1,u--):(f.length=u+1,s=qh(10,Ur-r),f[u]=i>0?(c/qh(10,a-i)%qh(10,i)|0)*s:0),l)for(;;)if(u==0){(f[0]+=s)==gs&&(f[0]=1,++t.e);break}else{if(f[u]+=s,f[u]!=gs)break;f[u--]=0,s=1}for(r=f.length;f[--r]===0;)f.pop();if(Jr&&(t.e>aE||t.e<-aE))throw Error(r5+Vi(t));return t}function mie(t,e){var n,r,i,s,a,o,l,c,u,f,p=t.constructor,m=p.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new p(t),Jr?Mr(e,m):e;if(l=t.d,f=e.d,r=e.e,c=t.e,l=l.slice(),a=c-r,a){for(u=a<0,u?(n=l,a=-a,o=f.length):(n=f,r=c,o=l.length),i=Math.max(Math.ceil(m/Ur),o)+2,a>i&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for(i=l.length,o=f.length,u=i<o,u&&(o=i),i=0;i<o;i++)if(l[i]!=f[i]){u=l[i]<f[i];break}a=0}for(u&&(n=l,l=f,f=n,e.s=-e.s),o=l.length,i=f.length-o;i>0;--i)l[o++]=0;for(i=f.length;i>a;){if(l[--i]<f[i]){for(s=i;s&&l[--s]===0;)l[s]=gs-1;--l[s],l[i]+=gs}l[i]-=f[i]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,Jr?Mr(e,m):e):new p(0)}function Fp(t,e,n){var r,i=Vi(t),s=Nc(t.d),a=s.length;return e?(n&&(r=n-a)>0?s=s.charAt(0)+"."+s.slice(1)+pf(r):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+pf(-i-1)+s,n&&(r=n-a)>0&&(s+=pf(r))):i>=a?(s+=pf(i+1-a),n&&(r=n-i-1)>0&&(s=s+"."+pf(r))):((r=i+1)<a&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(s+="."),s+=pf(r))),t.s<0?"-"+s:s}function hq(t,e){if(t.length>e)return t.length=e,!0}function gie(t){var e,n,r;function i(s){var a=this;if(!(a instanceof i))return new i(s);if(a.constructor=i,s instanceof i){a.s=s.s,a.e=s.e,a.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(_p+s);if(s>0)a.s=1;else if(s<0)s=-s,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(s===~~s&&s<1e7){a.e=0,a.d=[s];return}return fq(a,s.toString())}else if(typeof s!="string")throw Error(_p+s);if(s.charCodeAt(0)===45?(s=s.slice(1),a.s=-1):a.s=1,rKe.test(s))fq(a,s);else throw Error(_p+s)}if(i.prototype=zt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=gie,i.config=i.set=iKe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function iKe(t){if(!t||typeof t!="object")throw Error(xl+"Object expected");var e,n,r,i=["precision",1,Rx,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Px(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(_p+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(_p+n+": "+r);return this}var i5=gie(nKe);bo=new i5(1);const pr=i5;var sKe=t=>t,xie={},yie=t=>t===xie,pq=t=>function e(){return arguments.length===0||arguments.length===1&&yie(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},vie=(t,e)=>t===1?e:pq(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=r.filter(a=>a!==xie).length;return s>=t?e(...r):vie(t-s,pq(function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];var c=r.map(u=>yie(u)?o.shift():u);return e(...c,...o)}))}),aKe=t=>vie(t.length,t),uI=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},oKe=aKe((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),lKe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return sKe;var i=n.reverse(),s=i[0],a=i.slice(1);return function(){return a.reduce((o,l)=>l(o),s(...arguments))}},dI=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join("");function bie(t){var e;return t===0?e=1:e=Math.floor(new pr(t).abs().log(10).toNumber())+1,e}function _ie(t,e,n){for(var r=new pr(t),i=0,s=[];r.lt(e)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}var Sie=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},wie=(t,e,n)=>{if(t.lte(0))return new pr(0);var r=bie(t.toNumber()),i=new pr(10).pow(r),s=t.div(i),a=r!==1?.05:.1,o=new pr(Math.ceil(s.div(a).toNumber())).add(n).mul(a),l=o.mul(i);return e?new pr(l.toNumber()):new pr(Math.ceil(l.toNumber()))},cKe=(t,e,n)=>{var r=new pr(1),i=new pr(t);if(!i.isint()&&n){var s=Math.abs(t);s<1?(r=new pr(10).pow(bie(t)-1),i=new pr(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new pr(Math.floor(t)))}else t===0?i=new pr(Math.floor((e-1)/2)):n||(i=new pr(Math.floor(t)));var a=Math.floor((e-1)/2),o=lKe(oKe(l=>i.add(new pr(l-a).mul(r)).toNumber()),uI);return o(0,e)},Tie=function(e,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new pr(0),tickMin:new pr(0),tickMax:new pr(0)};var a=wie(new pr(n).sub(e).div(r-1),i,s),o;e<=0&&n>=0?o=new pr(0):(o=new pr(e).add(n).div(2),o=o.sub(new pr(o).mod(a)));var l=Math.ceil(o.sub(e).div(a).toNumber()),c=Math.ceil(new pr(n).sub(o).div(a).toNumber()),u=l+c+1;return u>r?Tie(e,n,r,i,s+1):(u<r&&(c=n>0?c+(r-u):c,l=n>0?l:l+(r-u)),{step:a,tickMin:o.sub(new pr(l).mul(a)),tickMax:o.add(new pr(c).mul(a))})},uKe=function(e){var[n,r]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),[o,l]=Sie([n,r]);if(o===-1/0||l===1/0){var c=l===1/0?[o,...uI(0,i-1).map(()=>1/0)]:[...uI(0,i-1).map(()=>-1/0),l];return n>r?dI(c):c}if(o===l)return cKe(o,i,s);var{step:u,tickMin:f,tickMax:p}=Tie(o,l,a,s,0),m=_ie(f,p.add(new pr(.1).mul(u)),u);return n>r?dI(m):m},dKe=function(e,n){var[r,i]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,o]=Sie([r,i]);if(a===-1/0||o===1/0)return[r,i];if(a===o)return[a];var l=Math.max(n,2),c=wie(new pr(o).sub(a).div(l-1),s,0),u=[..._ie(new pr(a),new pr(o),c),o];return s===!1&&(u=u.map(f=>Math.round(f))),r>i?dI(u):u},Eie=t=>t.rootProps.maxBarSize,fKe=t=>t.rootProps.barGap,Cie=t=>t.rootProps.barCategoryGap,hKe=t=>t.rootProps.barSize,e1=t=>t.rootProps.stackOffset,Aie=t=>t.rootProps.reverseStackOrder,s5=t=>t.options.chartName,a5=t=>t.rootProps.syncId,Mie=t=>t.rootProps.syncMethod,o5=t=>t.options.eventEmitter,ks={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},zu={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},go={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},bA=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},pKe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:zu.angleAxisId,includeHidden:!1,name:void 0,reversed:zu.reversed,scale:zu.scale,tick:zu.tick,tickCount:void 0,ticks:void 0,type:zu.type,unit:void 0},mKe={allowDataOverflow:go.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:go.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:go.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:go.scale,tick:go.tick,tickCount:go.tickCount,ticks:void 0,type:go.type,unit:void 0},gKe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:zu.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:zu.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:zu.scale,tick:zu.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},xKe={allowDataOverflow:go.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:go.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:go.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:go.scale,tick:go.tick,tickCount:go.tickCount,ticks:void 0,type:"category",unit:void 0},l5=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?gKe:pKe,c5=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?xKe:mKe,_A=t=>t.polarOptions,u5=Le([Ed,Cd,ss],aie),Rie=Le([_A,u5],(t,e)=>{if(t!=null)return na(t.innerRadius,e,0)}),Pie=Le([_A,u5],(t,e)=>{if(t!=null)return na(t.outerRadius,e,e*.8)}),yKe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},Nie=Le([_A],yKe);Le([l5,Nie],bA);var Oie=Le([u5,Rie,Pie],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});Le([c5,Oie],bA);var Die=Le([Zn,_A,Rie,Pie,Ed,Cd],(t,e,n,r,i,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:a,cy:o,startAngle:l,endAngle:c}=e;return{cx:na(a,i,i/2),cy:na(o,s,s/2),innerRadius:n,outerRadius:r,startAngle:l,endAngle:c,clockWise:!1}}}),ti=(t,e)=>e,t1=(t,e,n)=>n;function d5(t){return t?.id}function Lie(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:s}=n,a=new Map;return t.forEach(o=>{var l,c=(l=o.data)!==null&&l!==void 0?l:r;if(!(c==null||c.length===0)){var u=d5(o);c.forEach((f,p)=>{var m=s==null||i?p:String(Qr(f,s,null)),x=Qr(f,o.dataKey,0),b;a.has(m)?b=a.get(m):b={},Object.assign(b,{[u]:x}),a.set(m,b)})}}),Array.from(a.values())}function SA(t){return t.stackId!=null&&t.dataKey!=null}var wA=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function TA(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function vKe(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var as=t=>{var e=Zn(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Nx=t=>t.tooltip.settings.axisId;function mq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function oE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mq(Object(n),!0).forEach(function(r){bKe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bKe(t,e,n){return(e=_Ke(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _Ke(t){var e=SKe(t,"string");return typeof e=="symbol"?e:e+""}function SKe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fI=[0,"auto"],ps={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Iie=(t,e)=>t.cartesianAxis.xAxis[e],Ad=(t,e)=>{var n=Iie(t,e);return n??ps},ms={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:fI,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Z_},kie=(t,e)=>t.cartesianAxis.yAxis[e],Md=(t,e)=>{var n=kie(t,e);return n??ms},wKe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},f5=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??wKe},oi=(t,e,n)=>{switch(e){case"xAxis":return Ad(t,n);case"yAxis":return Md(t,n);case"zAxis":return f5(t,n);case"angleAxis":return l5(t,n);case"radiusAxis":return c5(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},TKe=(t,e,n)=>{switch(e){case"xAxis":return Ad(t,n);case"yAxis":return Md(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},n1=(t,e,n)=>{switch(e){case"xAxis":return Ad(t,n);case"yAxis":return Md(t,n);case"angleAxis":return l5(t,n);case"radiusAxis":return c5(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Bie=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function h5(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var p5=t=>t.graphicalItems.cartesianItems,EKe=Le([ti,t1],h5),m5=(t,e,n)=>t.filter(n).filter(r=>e?.includeHidden===!0?!0:!r.hide),r1=Le([p5,oi,EKe],m5,{memoizeOptions:{resultEqualityCheck:TA}}),Fie=Le([r1],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(SA)),Uie=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),CKe=Le([r1],Uie),g5=t=>t.map(e=>e.data).filter(Boolean).flat(1),AKe=Le([r1],g5,{memoizeOptions:{resultEqualityCheck:TA}}),x5=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},y5=Le([AKe,n5],x5),v5=(t,e,n)=>e?.dataKey!=null?t.map(r=>({value:Qr(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:Qr(i,r)}))):t.map(r=>({value:r})),EA=Le([y5,oi,r1],v5);function jie(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function FT(t){if(Vc(t)||t instanceof Date){var e=Number(t);if(Pi(e))return e}}function gq(t){if(Array.isArray(t)){var e=[FT(t[0]),FT(t[1])];return Gf(e)?e:void 0}var n=FT(t);if(n!=null)return[n,n]}function yd(t){return t.map(FT).filter(YHe)}function MKe(t,e,n){return!n||typeof e!="number"||Ql(e)?[]:n.length?yd(n.flatMap(r=>{var i=Qr(t,r.dataKey),s,a;if(Array.isArray(i)?[s,a]=i:s=a=i,!(!Pi(s)||!Pi(a)))return[e-s,e+a]})):[]}var os=t=>{var e=as(t),n=Nx(t);return n1(t,e,n)},i1=Le([os],t=>t?.dataKey),RKe=Le([Fie,n5,os],Lie),zie=(t,e,n,r)=>{var i={},s=e.reduce((a,o)=>(o.stackId==null||(a[o.stackId]==null&&(a[o.stackId]=[]),a[o.stackId].push(o)),a),i);return Object.fromEntries(Object.entries(s).map(a=>{var[o,l]=a,c=r?[...l].reverse():l,u=c.map(d5);return[o,{stackedData:wqe(t,u,n),graphicalItems:c}]}))},hI=Le([RKe,Fie,e1,Aie],zie),$ie=(t,e,n,r)=>{var{dataStartIndex:i,dataEndIndex:s}=e;if(r==null&&n!=="zAxis"){var a=Mqe(t,i,s);if(!(a!=null&&a[0]===0&&a[1]===0))return a}},PKe=Le([oi],t=>t.allowDataOverflow),b5=t=>{var e;if(t==null||!("domain"in t))return fI;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var n=yd(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:fI},_5=Le([oi],b5),S5=Le([_5,PKe],die),NKe=Le([hI,rh,ti,S5],$ie,{memoizeOptions:{resultEqualityCheck:wA}}),CA=t=>t.errorBars,OKe=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>jie(n,r)),lE=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var s=i.flat(),a=Math.min(...s),o=Math.max(...s);return[a,o]}},w5=(t,e,n,r,i)=>{var s,a;if(n.length>0&&t.forEach(o=>{n.forEach(l=>{var c,u,f=(c=r[l.id])===null||c===void 0?void 0:c.filter(_=>jie(i,_)),p=Qr(o,(u=e.dataKey)!==null&&u!==void 0?u:l.dataKey),m=MKe(o,p,f);if(m.length>=2){var x=Math.min(...m),b=Math.max(...m);(s==null||x<s)&&(s=x),(a==null||b>a)&&(a=b)}var v=gq(p);v!=null&&(s=s==null?v[0]:Math.min(s,v[0]),a=a==null?v[1]:Math.max(a,v[1]))})}),e?.dataKey!=null&&t.forEach(o=>{var l=gq(Qr(o,e.dataKey));l!=null&&(s=s==null?l[0]:Math.min(s,l[0]),a=a==null?l[1]:Math.max(a,l[1]))}),Pi(s)&&Pi(a))return[s,a]},DKe=Le([y5,oi,CKe,CA,ti],w5,{memoizeOptions:{resultEqualityCheck:wA}});function LKe(t){var{value:e}=t;if(Vc(e)||e instanceof Date)return e}var IKe=(t,e,n)=>{var r=t.map(LKe).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&Une(r))?uie(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},Gie=t=>t.referenceElements.dots,Ox=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),kKe=Le([Gie,ti,t1],Ox),Vie=t=>t.referenceElements.areas,BKe=Le([Vie,ti,t1],Ox),Hie=t=>t.referenceElements.lines,FKe=Le([Hie,ti,t1],Ox),Wie=(t,e)=>{var n=yd(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},UKe=Le(kKe,ti,Wie),qie=(t,e)=>{var n=yd(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},jKe=Le([BKe,ti],qie);function zKe(t){var e;if(t.x!=null)return yd([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:yd(n)}function $Ke(t){var e;if(t.y!=null)return yd([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:yd(n)}var Xie=(t,e)=>{var n=t.flatMap(r=>e==="xAxis"?zKe(r):$Ke(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},GKe=Le([FKe,ti],Xie),VKe=Le(UKe,GKe,jKe,(t,e,n)=>lE(t,n,e)),T5=(t,e,n,r,i,s,a,o)=>{if(n!=null)return n;var l=a==="vertical"&&o==="xAxis"||a==="horizontal"&&o==="yAxis",c=l?lE(r,s,i):lE(s,i);return tKe(e,c,t.allowDataOverflow)},HKe=Le([oi,_5,S5,NKe,DKe,VKe,Zn,ti],T5,{memoizeOptions:{resultEqualityCheck:wA}}),WKe=[0,1],E5=(t,e,n,r,i,s,a)=>{if(!((t==null||n==null||n.length===0)&&a===void 0)){var{dataKey:o,type:l}=t,c=Qp(e,s);if(c&&o==null){var u;return uie(0,(u=n?.length)!==null&&u!==void 0?u:0)}return l==="category"?IKe(r,t,c):i==="expand"?WKe:a}},C5=Le([oi,Zn,y5,EA,e1,ti,HKe],E5),Yie=(t,e,n,r,i)=>{if(t!=null){var{scale:s,type:a}=t;if(s==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":a==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":a==="category"?"band":"linear";if(typeof s=="string"){var o="scale".concat(H_(s));return o in kv?o:"point"}}},Dx=Le([oi,Zn,Bie,s5,ti],Yie);function qKe(t){if(t!=null){if(t in kv)return kv[t]();var e="scale".concat(H_(t));if(e in kv)return kv[e]()}}function A5(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var i=qKe(e);if(i!=null){var s=i.domain(n).range(r);return yqe(s),s}}}var M5=(t,e,n)=>{var r=b5(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Gf(t))return uKe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Gf(t))return dKe(t,e.tickCount,e.allowDecimals)}},R5=Le([C5,n1,Dx],M5),P5=(t,e,n,r)=>{if(r!=="angleAxis"&&t?.type==="number"&&Gf(e)&&Array.isArray(n)&&n.length>0){var i=e[0],s=n[0],a=e[1],o=n[n.length-1];return[Math.min(i,s),Math.max(a,o)]}return e},XKe=Le([oi,C5,R5,ti],P5),YKe=Le(EA,oi,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(yd(t.map(o=>o.value))).sort((o,l)=>o-l);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var s=0;s<r.length-1;s++){var a=r[s+1]-r[s];n=Math.min(n,a)}return n/i}}),Kie=Le(YKe,Zn,Cie,ss,(t,e,n,r)=>r,(t,e,n,r,i)=>{if(!Pi(t))return 0;var s=e==="vertical"?r.height:r.width;if(i==="gap")return t*s/2;if(i==="no-gap"){var a=na(n,t*s),o=t*s/2;return o-a-(o-a)/s*a}return 0}),KKe=(t,e)=>{var n=Ad(t,e);return n==null||typeof n.padding!="string"?0:Kie(t,"xAxis",e,n.padding)},ZKe=(t,e)=>{var n=Md(t,e);return n==null||typeof n.padding!="string"?0:Kie(t,"yAxis",e,n.padding)},QKe=Le(Ad,KKe,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),JKe=Le(Md,ZKe,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),eZe=Le([ss,QKe,dA,uA,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:s}=r;return i?[s.left,n.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),tZe=Le([ss,Zn,JKe,dA,uA,(t,e,n)=>n],(t,e,n,r,i,s)=>{var{padding:a}=i;return s?[r.height-a.bottom,a.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),s1=(t,e,n,r)=>{var i;switch(e){case"xAxis":return eZe(t,n,r);case"yAxis":return tZe(t,n,r);case"zAxis":return(i=f5(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return Nie(t);case"radiusAxis":return Oie(t,n);default:return}},Zie=Le([oi,s1],bA),Lx=Le([oi,Dx,XKe,Zie],A5);Le([r1,CA,ti],OKe);function Qie(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var AA=(t,e)=>e,MA=(t,e,n)=>n,nZe=Le(lA,AA,MA,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(Qie)),rZe=Le(cA,AA,MA,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(Qie)),Jie=(t,e)=>({width:t.width,height:e.height}),iZe=(t,e)=>{var n=typeof e.width=="number"?e.width:Z_;return{width:n,height:t.height}},ese=Le(ss,Ad,Jie),sZe=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},aZe=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},oZe=Le(Cd,ss,nZe,AA,MA,(t,e,n,r,i)=>{var s={},a;return n.forEach(o=>{var l=Jie(e,o);a==null&&(a=sZe(e,r,t));var c=r==="top"&&!i||r==="bottom"&&i;s[o.id]=a-Number(c)*l.height,a+=(c?-1:1)*l.height}),s}),lZe=Le(Ed,ss,rZe,AA,MA,(t,e,n,r,i)=>{var s={},a;return n.forEach(o=>{var l=iZe(e,o);a==null&&(a=aZe(e,r,t));var c=r==="left"&&!i||r==="right"&&i;s[o.id]=a-Number(c)*l.width,a+=(c?-1:1)*l.width}),s}),cZe=(t,e)=>{var n=Ad(t,e);if(n!=null)return oZe(t,n.orientation,n.mirror)},uZe=Le([ss,Ad,cZe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),dZe=(t,e)=>{var n=Md(t,e);if(n!=null)return lZe(t,n.orientation,n.mirror)},fZe=Le([ss,Md,dZe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),tse=Le(ss,Md,(t,e)=>{var n=typeof e.width=="number"?e.width:Z_;return{width:n,height:t.height}}),xq=(t,e,n)=>{switch(e){case"xAxis":return ese(t,n).width;case"yAxis":return tse(t,n).height;default:return}},nse=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:s,dataKey:a}=n,o=Qp(t,r),l=e.map(c=>c.value);if(a&&o&&s==="category"&&i&&Une(l))return l}},N5=Le([Zn,EA,oi,ti],nse),rse=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:s}=n,a=Qp(t,r);if(a&&(i==="number"||s!=="auto"))return e.map(o=>o.value)}},O5=Le([Zn,EA,n1,ti],rse),yq=Le([Zn,TKe,Dx,Lx,N5,O5,s1,R5,ti],(t,e,n,r,i,s,a,o,l)=>{if(e!=null){var c=Qp(t,l);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:l,categoricalDomain:s,duplicateDomain:i,isCategorical:c,niceTicks:o,range:a,realScaleType:n,scale:r}}}),hZe=(t,e,n,r,i,s,a,o,l)=>{if(!(e==null||r==null)){var c=Qp(t,l),{type:u,ticks:f,tickCount:p}=e,m=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,x=u==="category"&&r.bandwidth?r.bandwidth()/m:0;x=l==="angleAxis"&&s!=null&&s.length>=2?vs(s[0]-s[1])*2*x:x;var b=f||i;if(b){var v=b.map((_,E)=>{var T=a?a.indexOf(_):_;return{index:E,coordinate:r(T)+x,value:_,offset:x}});return v.filter(_=>Pi(_.coordinate))}return c&&o?o.map((_,E)=>({coordinate:r(_)+x,value:_,index:E,offset:x})).filter(_=>Pi(_.coordinate)):r.ticks?r.ticks(p).map(_=>({coordinate:r(_)+x,value:_,offset:x})):r.domain().map((_,E)=>({coordinate:r(_)+x,value:a?a[_]:_,index:E,offset:x}))}},ise=Le([Zn,n1,Dx,Lx,R5,s1,N5,O5,ti],hZe),pZe=(t,e,n,r,i,s,a)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var o=Qp(t,a),{tickCount:l}=e,c=0;return c=a==="angleAxis"&&r?.length>=2?vs(r[0]-r[1])*2*c:c,o&&s?s.map((u,f)=>({coordinate:n(u)+c,value:u,index:f,offset:c})):n.ticks?n.ticks(l).map(u=>({coordinate:n(u)+c,value:u,offset:c})):n.domain().map((u,f)=>({coordinate:n(u)+c,value:i?i[u]:u,index:f,offset:c}))}},rx=Le([Zn,n1,Lx,s1,N5,O5,ti],pZe),ix=Le(oi,Lx,(t,e)=>{if(!(t==null||e==null))return oE(oE({},t),{},{scale:e})}),mZe=Le([oi,Dx,C5,Zie],A5);Le((t,e,n)=>f5(t,n),mZe,(t,e)=>{if(!(t==null||e==null))return oE(oE({},t),{},{scale:e})});var gZe=Le([Zn,lA,cA],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),sse=t=>t.options.defaultTooltipEventType,ase=t=>t.options.validateTooltipEventTypes;function ose(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function D5(t,e){var n=sse(t),r=ase(t);return ose(e,n,r)}function xZe(t){return Vt(e=>D5(e,t))}var lse=(t,e)=>{var n,r=Number(e);if(!(Ql(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},yZe=t=>t.tooltip.settings,bf={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},vZe={itemInteraction:{click:bf,hover:bf},axisInteraction:{click:bf,hover:bf},keyboardInteraction:bf,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},cse=Ja({name:"tooltip",initialState:vZe,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:Yr()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,i=ql(t).tooltipItemPayloads.indexOf(n);i>-1&&(t.tooltipItemPayloads[i]=r)},prepare:Yr()},removeTooltipEntrySettings:{reducer(t,e){var n=ql(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:Yr()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:bZe,replaceTooltipEntrySettings:_Ze,removeTooltipEntrySettings:SZe,setTooltipSettingsState:wZe,setActiveMouseOverItemIndex:use,mouseLeaveItem:TZe,mouseLeaveChart:dse,setActiveClickItemIndex:EZe,setMouseOverAxisIndex:fse,setMouseClickAxisIndex:CZe,setSyncInteraction:pI,setKeyboardInteraction:mI}=cse.actions,AZe=cse.reducer;function vq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vq(Object(n),!0).forEach(function(r){MZe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function MZe(t,e,n){return(e=RZe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RZe(t){var e=PZe(t,"string");return typeof e=="symbol"?e:e+""}function PZe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function NZe(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function OZe(t){return t.index!=null}var hse=(t,e,n,r)=>{if(e==null)return bf;var i=NZe(t,e,n);if(i==null)return bf;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if(OZe(i)){if(s)return lT(lT({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return lT(lT({},bf),{},{coordinate:i.coordinate})};function DZe(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function LZe(t,e){var n=DZe(t),r=e[0],i=e[1];if(n===void 0)return!1;var s=Math.min(r,i),a=Math.max(r,i);return n>=s&&n<=a}function IZe(t,e,n){if(n==null||e==null)return!0;var r=Qr(t,e);return r==null||!Gf(n)?!0:LZe(r,n)}var L5=(t,e,n,r)=>{var i=t?.index;if(i==null)return null;var s=Number(i);if(!Pi(s))return i;var a=0,o=1/0;e.length>0&&(o=e.length-1);var l=Math.max(a,Math.min(s,o)),c=e[l];return c==null||IZe(c,n,r)?String(l):null},pse=(t,e,n,r,i,s,a,o)=>{if(!(s==null||o==null)){var l=a[0],c=l==null?void 0:o(l.positions,s);if(c!=null)return c;var u=i?.[Number(s)];if(u)switch(n){case"horizontal":return{x:u.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:u.coordinate}}}},mse=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=t.itemInteraction.hover.dataKey:i=t.itemInteraction.click.dataKey,i==null&&r!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(s=>{var a;return((a=s.settings)===null||a===void 0?void 0:a.dataKey)===i})},a1=t=>t.options.tooltipPayloadSearcher,Ix=t=>t.tooltip;function bq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _q(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bq(Object(n),!0).forEach(function(r){kZe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kZe(t,e,n){return(e=BZe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BZe(t){var e=FZe(t,"string");return typeof e=="symbol"?e:e+""}function FZe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function UZe(t,e){return t??e}var gse=(t,e,n,r,i,s,a)=>{if(!(e==null||s==null)){var{chartData:o,computedData:l,dataStartIndex:c,dataEndIndex:u}=n,f=[];return t.reduce((p,m)=>{var x,{dataDefinedOnItem:b,settings:v}=m,_=UZe(b,o),E=Array.isArray(_)?Ore(_,c,u):_,T=(x=v?.dataKey)!==null&&x!==void 0?x:r,A=v?.nameKey,C;if(r&&Array.isArray(E)&&!Array.isArray(E[0])&&a==="axis"?C=XHe(E,r,i):C=s(E,e,l,A),Array.isArray(C))C.forEach(P=>{var D=_q(_q({},v),{},{name:P.name,unit:P.unit,color:void 0,fill:void 0});p.push(wW({tooltipEntrySettings:D,dataKey:P.dataKey,payload:P.payload,value:Qr(P.payload,P.dataKey),name:P.name}))});else{var M;p.push(wW({tooltipEntrySettings:v,dataKey:T,payload:C,value:Qr(C,T),name:(M=Qr(C,A))!==null&&M!==void 0?M:v?.name}))}return p},f)}},I5=Le([os,Zn,Bie,s5,as],Yie),jZe=Le([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),zZe=Le([as,Nx],h5),o1=Le([jZe,os,zZe],m5,{memoizeOptions:{resultEqualityCheck:TA}}),$Ze=Le([o1],t=>t.filter(SA)),GZe=Le([o1],g5,{memoizeOptions:{resultEqualityCheck:TA}}),kx=Le([GZe,rh],x5),VZe=Le([$Ze,rh,os],Lie),k5=Le([kx,os,o1],v5),xse=Le([os],b5),HZe=Le([os],t=>t.allowDataOverflow),yse=Le([xse,HZe],die),WZe=Le([o1],t=>t.filter(SA)),qZe=Le([VZe,WZe,e1,Aie],zie),XZe=Le([qZe,rh,as,yse],$ie),YZe=Le([o1],Uie),KZe=Le([kx,os,YZe,CA,as],w5,{memoizeOptions:{resultEqualityCheck:wA}}),ZZe=Le([Gie,as,Nx],Ox),QZe=Le([ZZe,as],Wie),JZe=Le([Vie,as,Nx],Ox),eQe=Le([JZe,as],qie),tQe=Le([Hie,as,Nx],Ox),nQe=Le([tQe,as],Xie),rQe=Le([QZe,nQe,eQe],lE),iQe=Le([os,xse,yse,XZe,KZe,rQe,Zn,as],T5),l1=Le([os,Zn,kx,k5,e1,as,iQe],E5),sQe=Le([l1,os,I5],M5),aQe=Le([os,l1,sQe,as],P5),vse=t=>{var e=as(t),n=Nx(t),r=!1;return s1(t,e,n,r)},bse=Le([os,vse],bA),_se=Le([os,I5,aQe,bse],A5),oQe=Le([Zn,k5,os,as],nse),lQe=Le([Zn,k5,os,as],rse),cQe=(t,e,n,r,i,s,a,o)=>{if(e){var{type:l}=e,c=Qp(t,o);if(r){var u=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,f=l==="category"&&r.bandwidth?r.bandwidth()/u:0;return f=o==="angleAxis"&&i!=null&&i?.length>=2?vs(i[0]-i[1])*2*f:f,c&&a?a.map((p,m)=>({coordinate:r(p)+f,value:p,index:m,offset:f})):r.domain().map((p,m)=>({coordinate:r(p)+f,value:s?s[p]:p,index:m,offset:f}))}}},Rd=Le([Zn,os,I5,_se,vse,oQe,lQe,as],cQe),B5=Le([sse,ase,yZe],(t,e,n)=>ose(n.shared,t,e)),Sse=t=>t.tooltip.settings.trigger,F5=t=>t.tooltip.settings.defaultIndex,c1=Le([Ix,B5,Sse,F5],hse),Up=Le([c1,kx,i1,l1],L5),wse=Le([Rd,Up],lse),U5=Le([c1],t=>{if(t)return t.dataKey}),uQe=Le([c1],t=>{if(t)return t.graphicalItemId}),Tse=Le([Ix,B5,Sse,F5],mse),dQe=Le([Ed,Cd,Zn,ss,Rd,F5,Tse,a1],pse),fQe=Le([c1,dQe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),hQe=Le([c1],t=>t.active),pQe=Le([Tse,Up,rh,i1,wse,a1,B5],gse);Le([pQe],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function Sq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Sq(Object(n),!0).forEach(function(r){mQe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mQe(t,e,n){return(e=gQe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gQe(t){var e=xQe(t,"string");return typeof e=="symbol"?e:e+""}function xQe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yQe=()=>Vt(os),vQe=()=>{var t=yQe(),e=Vt(Rd),n=Vt(_se);return K2(!t||!n?void 0:wq(wq({},t),{},{scale:n}),e)};function Tq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Tq(Object(n),!0).forEach(function(r){bQe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bQe(t,e,n){return(e=_Qe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _Qe(t){var e=SQe(t,"string");return typeof e=="symbol"?e:e+""}function SQe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wQe=(t,e,n,r)=>{var i=e.find(s=>s&&s.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},TQe=(t,e,n,r)=>{var i=e.find(c=>c&&c.index===n);if(i){if(t==="centric"){var s=i.coordinate,{radius:a}=r;return xg(xg(xg({},r),zi(r.cx,r.cy,a,s)),{},{angle:s,radius:a})}var o=i.coordinate,{angle:l}=r;return xg(xg(xg({},r),zi(r.cx,r.cy,o,l)),{},{angle:l,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function EQe(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var Ese=(t,e,n,r,i)=>{var s,a=-1,o=(s=e?.length)!==null&&s!==void 0?s:0;if(o<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var l=0;l<o;l++){var c=l>0?n[l-1].coordinate:n[o-1].coordinate,u=n[l].coordinate,f=l>=o-1?n[0].coordinate:n[l+1].coordinate,p=void 0;if(vs(u-c)!==vs(f-u)){var m=[];if(vs(f-u)===vs(i[1]-i[0])){p=f;var x=u+i[1]-i[0];m[0]=Math.min(x,(x+c)/2),m[1]=Math.max(x,(x+c)/2)}else{p=c;var b=f+i[1]-i[0];m[0]=Math.min(u,(b+u)/2),m[1]=Math.max(u,(b+u)/2)}var v=[Math.min(u,(p+u)/2),Math.max(u,(p+u)/2)];if(t>v[0]&&t<=v[1]||t>=m[0]&&t<=m[1]){({index:a}=n[l]);break}}else{var _=Math.min(c,f),E=Math.max(c,f);if(t>(_+u)/2&&t<=(E+u)/2){({index:a}=n[l]);break}}}else if(e){for(var T=0;T<o;T++)if(T===0&&t<=(e[T].coordinate+e[T+1].coordinate)/2||T>0&&T<o-1&&t>(e[T].coordinate+e[T-1].coordinate)/2&&t<=(e[T].coordinate+e[T+1].coordinate)/2||T===o-1&&t>(e[T].coordinate+e[T-1].coordinate)/2){({index:a}=e[T]);break}}return a},CQe=()=>Vt(s5),j5=(t,e)=>e,Cse=(t,e,n)=>n,z5=(t,e,n,r)=>r,AQe=Le(Rd,t=>QC(t,e=>e.coordinate)),$5=Le([Ix,j5,Cse,z5],hse),G5=Le([$5,kx,i1,l1],L5),MQe=(t,e,n)=>{if(e!=null){var r=Ix(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},Ase=Le([Ix,j5,Cse,z5],mse),cE=Le([Ed,Cd,Zn,ss,Rd,z5,Ase,a1],pse),RQe=Le([$5,cE],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),Mse=Le([Rd,G5],lse),PQe=Le([Ase,G5,rh,i1,Mse,a1,j5],gse),NQe=Le([$5,G5],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),OQe=(t,e,n,r,i,s,a)=>{if(!(!t||!n||!r||!i)&&EQe(t,a)){var o=Rqe(t,e),l=Ese(o,s,i,n,r),c=wQe(e,i,l,t);return{activeIndex:String(l),activeCoordinate:c}}},DQe=(t,e,n,r,i,s,a)=>{if(!(!t||!r||!i||!s||!n)){var o=HYe(t,n);if(o){var l=Pqe(o,e),c=Ese(l,a,s,r,i),u=TQe(e,s,c,o);return{activeIndex:String(c),activeCoordinate:u}}}},LQe=(t,e,n,r,i,s,a,o)=>{if(!(!t||!e||!r||!i||!s))return e==="horizontal"||e==="vertical"?OQe(t,e,r,i,s,a,o):DQe(t,e,n,r,i,s,a)},IQe=Le(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElementId:r.elementId}}),kQe=Le(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(ks)),n=Array.from(new Set(e));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:vKe}});function Eq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Cq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Eq(Object(n),!0).forEach(function(r){BQe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Eq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function BQe(t,e,n){return(e=FQe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FQe(t){var e=UQe(t,"string");return typeof e=="symbol"?e:e+""}function UQe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jQe={},zQe={zIndexMap:Object.values(ks).reduce((t,e)=>Cq(Cq({},t),{},{[e]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),jQe)},$Qe=new Set(Object.values(ks));function GQe(t){return $Qe.has(t)}var Rse=Ja({name:"zIndex",initialState:zQe,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:Yr()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!GQe(n)&&delete t.zIndexMap[n])},prepare:Yr()},registerZIndexPortalId:{reducer:(t,e)=>{var{zIndex:n,elementId:r,isPanorama:i}=e.payload;t.zIndexMap[n]?i?t.zIndexMap[n].panoramaElementId=r:t.zIndexMap[n].elementId=r:t.zIndexMap[n]={consumers:0,elementId:i?void 0:r,panoramaElementId:i?r:void 0}},prepare:Yr()},unregisterZIndexPortalId:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElementId=void 0:t.zIndexMap[n].elementId=void 0)},prepare:Yr()}}}),{registerZIndexPortal:VQe,unregisterZIndexPortal:HQe,registerZIndexPortalId:WQe,unregisterZIndexPortalId:qQe}=Rse.actions,XQe=Rse.reducer;function ic(t){var{zIndex:e,children:n}=t,r=oXe(),i=r&&e!==void 0&&e!==0,s=eo(),a=Ir();w.useLayoutEffect(()=>i?(a(VQe({zIndex:e})),()=>{a(HQe({zIndex:e}))}):W_,[a,e,i]);var o=Vt(c=>IQe(c,e,s));if(!i)return n;if(!o)return null;var l=document.getElementById(o);return l?cx.createPortal(n,l):null}function gI(){return gI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gI.apply(null,arguments)}function Aq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Aq(Object(n),!0).forEach(function(r){YQe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Aq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function YQe(t,e,n){return(e=KQe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KQe(t){var e=ZQe(t,"string");return typeof e=="symbol"?e:e+""}function ZQe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function QQe(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return w.isValidElement(e)?w.cloneElement(e,r):w.createElement(n,r)}function JQe(t){var e,{coordinate:n,payload:r,index:i,offset:s,tooltipAxisBandSize:a,layout:o,cursor:l,tooltipEventType:c,chartName:u}=t,f=n,p=r,m=i;if(!l||!f||u!=="ScatterChart"&&c!=="axis")return null;var x,b,v;if(u==="ScatterChart")x=f,b=aYe,v=ks.cursorLine;else if(u==="BarChart")x=oYe(o,f,s,a),b=sie,v=ks.cursorRectangle;else if(o==="radial"&&zne(f)){var{cx:_,cy:E,radius:T,startAngle:A,endAngle:C}=oie(f);x={cx:_,cy:E,startAngle:A,endAngle:C,innerRadius:T,outerRadius:T},b=cie,v=ks.cursorLine}else x={points:YYe(o,f,s)},b=e5,v=ks.cursorLine;var M=typeof l=="object"&&"className"in l?l.className:void 0,P=cT(cT(cT(cT({stroke:"#ccc",pointerEvents:"none"},s),x),Xb(l)),{},{payload:p,payloadIndex:m,className:qe("recharts-tooltip-cursor",M)});return w.createElement(ic,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:v},w.createElement(QQe,{cursor:l,cursorComp:b,cursorProps:P}))}function eJe(t){var e=vQe(),n=$re(),r=hA(),i=CQe();return e==null||n==null||r==null||i==null?null:w.createElement(JQe,gI({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var Pse=w.createContext(null),tJe=()=>w.useContext(Pse),MO={exports:{}},Mq;function nJe(){return Mq||(Mq=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,f,p){if(typeof u!="function")throw new TypeError("The listener must be a function");var m=new i(u,f||l,p),x=n?n+c:c;return l._events[x]?l._events[x].fn?l._events[x]=[l._events[x],m]:l._events[x].push(m):(l._events[x]=m,l._eventsCount++),l}function a(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],u,f;if(this._eventsCount===0)return c;for(f in u=this._events)e.call(u,f)&&c.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},o.prototype.listeners=function(c){var u=n?n+c:c,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,m=f.length,x=new Array(m);p<m;p++)x[p]=f[p].fn;return x},o.prototype.listenerCount=function(c){var u=n?n+c:c,f=this._events[u];return f?f.fn?1:f.length:0},o.prototype.emit=function(c,u,f,p,m,x){var b=n?n+c:c;if(!this._events[b])return!1;var v=this._events[b],_=arguments.length,E,T;if(v.fn){switch(v.once&&this.removeListener(c,v.fn,void 0,!0),_){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,u),!0;case 3:return v.fn.call(v.context,u,f),!0;case 4:return v.fn.call(v.context,u,f,p),!0;case 5:return v.fn.call(v.context,u,f,p,m),!0;case 6:return v.fn.call(v.context,u,f,p,m,x),!0}for(T=1,E=new Array(_-1);T<_;T++)E[T-1]=arguments[T];v.fn.apply(v.context,E)}else{var A=v.length,C;for(T=0;T<A;T++)switch(v[T].once&&this.removeListener(c,v[T].fn,void 0,!0),_){case 1:v[T].fn.call(v[T].context);break;case 2:v[T].fn.call(v[T].context,u);break;case 3:v[T].fn.call(v[T].context,u,f);break;case 4:v[T].fn.call(v[T].context,u,f,p);break;default:if(!E)for(C=1,E=new Array(_-1);C<_;C++)E[C-1]=arguments[C];v[T].fn.apply(v[T].context,E)}}return!0},o.prototype.on=function(c,u,f){return s(this,c,u,f,!1)},o.prototype.once=function(c,u,f){return s(this,c,u,f,!0)},o.prototype.removeListener=function(c,u,f,p){var m=n?n+c:c;if(!this._events[m])return this;if(!u)return a(this,m),this;var x=this._events[m];if(x.fn)x.fn===u&&(!p||x.once)&&(!f||x.context===f)&&a(this,m);else{for(var b=0,v=[],_=x.length;b<_;b++)(x[b].fn!==u||p&&!x[b].once||f&&x[b].context!==f)&&v.push(x[b]);v.length?this._events[m]=v.length===1?v[0]:v:a(this,m)}return this},o.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&a(this,u)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(MO)),MO.exports}var rJe=nJe();const iJe=Ea(rJe);var i_=new iJe,xI="recharts.syncEvent.tooltip",Rq="recharts.syncEvent.brush";function Nse(t,e){if(e){var n=Number.parseInt(e,10);if(!Ql(n))return t?.[n]}}var sJe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},Ose=Ja({name:"options",initialState:sJe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),aJe=Ose.reducer,{createEventEmitter:oJe}=Ose.actions;function lJe(t){return t.tooltip.syncInteraction}var cJe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Dse=Ja({name:"chartData",initialState:cJe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:Pq,setDataStartEndIndexes:uJe,setComputedData:Lat}=Dse.actions,dJe=Dse.reducer,fJe=["x","y"];function Nq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Nq(Object(n),!0).forEach(function(r){hJe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hJe(t,e,n){return(e=pJe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pJe(t){var e=mJe(t,"string");return typeof e=="symbol"?e:e+""}function mJe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gJe(t,e){if(t==null)return{};var n,r,i=xJe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function xJe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function yJe(){var t=Vt(a5),e=Vt(o5),n=Ir(),r=Vt(Mie),i=Vt(Rd),s=hA(),a=fA(),o=Vt(l=>l.rootProps.className);w.useEffect(()=>{if(t==null)return W_;var l=(c,u,f)=>{if(e!==f&&t===c){if(r==="index"){var p;if(a&&u!==null&&u!==void 0&&(p=u.payload)!==null&&p!==void 0&&p.coordinate&&u.payload.sourceViewBox){var m=u.payload.coordinate,{x,y:b}=m,v=gJe(m,fJe),{x:_,y:E,width:T,height:A}=u.payload.sourceViewBox,C=yg(yg({},v),{},{x:a.x+(T?(x-_)/T:0)*a.width,y:a.y+(A?(b-E)/A:0)*a.height});n(yg(yg({},u),{},{payload:yg(yg({},u.payload),{},{coordinate:C})}))}else n(u);return}if(i!=null){var M;if(typeof r=="function"){var P={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},D=r(i,P);M=i[D]}else r==="value"&&(M=i.find(B=>String(B.value)===u.payload.label));var{coordinate:N}=u.payload;if(M==null||u.payload.active===!1||N==null||a==null){n(pI({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:L,y:k}=N,I=Math.min(L,a.x+a.width),F=Math.min(k,a.y+a.height),z={x:s==="horizontal"?M.coordinate:I,y:s==="horizontal"?F:M.coordinate},H=pI({active:u.payload.active,coordinate:z,dataKey:u.payload.dataKey,index:String(M.index),label:u.payload.label,sourceViewBox:u.payload.sourceViewBox,graphicalItemId:u.payload.graphicalItemId});n(H)}}};return i_.on(xI,l),()=>{i_.off(xI,l)}},[o,n,e,t,r,i,s,a])}function vJe(){var t=Vt(a5),e=Vt(o5),n=Ir();w.useEffect(()=>{if(t==null)return W_;var r=(i,s,a)=>{e!==a&&t===i&&n(uJe(s))};return i_.on(Rq,r),()=>{i_.off(Rq,r)}},[n,e,t])}function bJe(){var t=Ir();w.useEffect(()=>{t(oJe())},[t]),yJe(),vJe()}function _Je(t,e,n,r,i,s){var a=Vt(m=>MQe(m,t,e)),o=Vt(o5),l=Vt(a5),c=Vt(Mie),u=Vt(lJe),f=u?.active,p=fA();w.useEffect(()=>{if(!f&&l!=null&&o!=null){var m=pI({active:s,coordinate:n,dataKey:a,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:p,graphicalItemId:void 0});i_.emit(xI,l,m,o)}},[f,n,a,i,r,o,l,c,s,p])}function Oq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Oq(Object(n),!0).forEach(function(r){SJe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Oq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function SJe(t,e,n){return(e=wJe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wJe(t){var e=TJe(t,"string");return typeof e=="symbol"?e:e+""}function TJe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function EJe(t){return t.dataKey}function CJe(t,e){return w.isValidElement(t)?w.cloneElement(t,e):typeof t=="function"?w.createElement(t,e):w.createElement(UXe,e)}var Lq=[],AJe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Iq(t){var e,n,r=ws(t,AJe),{active:i,allowEscapeViewBox:s,animationDuration:a,animationEasing:o,content:l,filterNull:c,isAnimationActive:u,offset:f,payloadUniqBy:p,position:m,reverseDirection:x,useTranslate3d:b,wrapperStyle:v,cursor:_,shared:E,trigger:T,defaultIndex:A,portal:C,axisId:M}=r,P=Ir(),D=typeof A=="number"?String(A):A;w.useEffect(()=>{P(wZe({shared:E,trigger:T,axisId:M,active:i,defaultIndex:D}))},[P,E,T,M,i,D]);var N=fA(),L=eie(),k=xZe(E),{activeIndex:I,isActive:F}=(e=Vt(ne=>NQe(ne,k,T,D)))!==null&&e!==void 0?e:{},z=Vt(ne=>PQe(ne,k,T,D)),H=Vt(ne=>Mse(ne,k,T,D)),B=Vt(ne=>RQe(ne,k,T,D)),j=z,G=tJe(),W=(n=i??F)!==null&&n!==void 0?n:!1,[re,$]=nre([j,W]),ee=k==="axis"?H:void 0;_Je(k,T,B,ee,I,W);var oe=C??G;if(oe==null||N==null||k==null)return null;var me=j??Lq;W||(me=Lq),c&&me.length&&(me=Zne(me.filter(ne=>ne.value!=null&&(ne.hide!==!0||r.includeHidden)),p,EJe));var te=me.length>0,K=w.createElement(WXe,{allowEscapeViewBox:s,animationDuration:a,animationEasing:o,isAnimationActive:u,active:W,coordinate:B,hasPayload:te,offset:f,position:m,reverseDirection:x,useTranslate3d:b,viewBox:N,wrapperStyle:v,lastBoundingBox:re,innerRef:$,hasPortalFromProps:!!C},CJe(l,Dq(Dq({},r),{},{payload:me,label:ee,active:W,activeIndex:I,coordinate:B,accessibilityLayer:L})));return w.createElement(w.Fragment,null,cx.createPortal(K,oe),W&&w.createElement(eJe,{cursor:_,tooltipEventType:k,coordinate:B,payload:me,index:I}))}var sx=t=>null;sx.displayName="Cell";function MJe(t,e,n){return(e=RJe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RJe(t){var e=PJe(t,"string");return typeof e=="symbol"?e:e+""}function PJe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class NJe{constructor(e){MJe(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function kq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function OJe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kq(Object(n),!0).forEach(function(r){DJe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function DJe(t,e,n){return(e=LJe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LJe(t){var e=IJe(t,"string");return typeof e=="symbol"?e:e+""}function IJe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kJe={cacheSize:2e3,enableCache:!0},Lse=OJe({},kJe),Bq=new NJe(Lse.cacheSize),BJe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Fq="recharts_measurement_span";function FJe(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",s=e.fontStyle||"",a=e.letterSpacing||"",o=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(s,"|").concat(a,"|").concat(o)}var Uq=(t,e)=>{try{var n=document.getElementById(Fq);n||(n=document.createElement("span"),n.setAttribute("id",Fq),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,BJe,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},sb=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||J_.isSsr)return{width:0,height:0};if(!Lse.enableCache)return Uq(e,n);var r=FJe(e,n),i=Bq.get(r);if(i)return i;var s=Uq(e,n);return Bq.set(r,s),s},jq=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,zq=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,UJe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,jJe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Ise={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},zJe=Object.keys(Ise),Og="NaN";function $Je(t,e){return t*Ise[e]}class La{static parse(e){var n,[,r,i]=(n=jJe.exec(e))!==null&&n!==void 0?n:[];return new La(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,Ql(e)&&(this.unit=""),n!==""&&!UJe.test(n)&&(this.num=NaN,this.unit=""),zJe.includes(n)&&(this.num=$Je(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new La(NaN,""):new La(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new La(NaN,""):new La(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new La(NaN,""):new La(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new La(NaN,""):new La(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Ql(this.num)}}function kse(t){if(t.includes(Og))return Og;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,s]=(n=jq.exec(e))!==null&&n!==void 0?n:[],a=La.parse(r??""),o=La.parse(s??""),l=i==="*"?a.multiply(o):a.divide(o);if(l.isNaN())return Og;e=e.replace(jq,l.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var c,[,u,f,p]=(c=zq.exec(e))!==null&&c!==void 0?c:[],m=La.parse(u??""),x=La.parse(p??""),b=f==="+"?m.add(x):m.subtract(x);if(b.isNaN())return Og;e=e.replace(zq,b.toString())}return e}var $q=/\(([^()]*)\)/;function GJe(t){for(var e=t,n;(n=$q.exec(e))!=null;){var[,r]=n;e=e.replace($q,kse(r))}return e}function VJe(t){var e=t.replace(/\s+/g,"");return e=GJe(e),e=kse(e),e}function HJe(t){try{return VJe(t)}catch{return Og}}function RO(t){var e=HJe(t.slice(5,-1));return e===Og?"":e}var WJe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],qJe=["dx","dy","angle","className","breakAll"];function yI(){return yI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yI.apply(null,arguments)}function Gq(t,e){if(t==null)return{};var n,r,i=XJe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function XJe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Bse=/[ \f\n\r\t\v\u2028\u2029]+/,Fse=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];_s(e)||(n?i=e.toString().split(""):i=e.toString().split(Bse));var s=i.map(o=>({word:o,width:sb(o,r).width})),a=n?0:sb("",r).width;return{wordsWithComputedWidth:s,spaceWidth:a}}catch{return null}};function YJe(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var Use=(t,e,n,r)=>t.reduce((i,s)=>{var{word:a,width:o}=s,l=i[i.length-1];if(l&&o!=null&&(e==null||r||l.width+o+n<Number(e)))l.words.push(a),l.width+=o+n;else{var c={words:[a],width:o};i.push(c)}return i},[]),jse=t=>t.reduce((e,n)=>e.width>n.width?e:n),KJe="",Vq=(t,e,n,r,i,s,a,o)=>{var l=t.slice(0,e),c=Fse({breakAll:n,style:r,children:l+KJe});if(!c)return[!1,[]];var u=Use(c.wordsWithComputedWidth,s,a,o),f=u.length>i||jse(u).width>Number(s);return[f,u]},ZJe=(t,e,n,r,i)=>{var{maxLines:s,children:a,style:o,breakAll:l}=t,c=qt(s),u=String(a),f=Use(e,r,n,i);if(!c||i)return f;var p=f.length>s||jse(f).width>Number(r);if(!p)return f;for(var m=0,x=u.length-1,b=0,v;m<=x&&b<=u.length-1;){var _=Math.floor((m+x)/2),E=_-1,[T,A]=Vq(u,E,l,o,s,r,n,i),[C]=Vq(u,_,l,o,s,r,n,i);if(!T&&!C&&(m=_+1),T&&C&&(x=_-1),!T&&C){v=A;break}b++}return v||f},Hq=t=>{var e=_s(t)?[]:t.toString().split(Bse);return[{words:e,width:void 0}]},QJe=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:s,maxLines:a}=t;if((e||n)&&!J_.isSsr){var o,l,c=Fse({breakAll:s,children:r,style:i});if(c){var{wordsWithComputedWidth:u,spaceWidth:f}=c;o=u,l=f}else return Hq(r);return ZJe({breakAll:s,children:r,maxLines:a,style:i},o,l,e,!!n)}return Hq(r)},zse="#808080",JJe={angle:0,breakAll:!1,capHeight:"0.71em",fill:zse,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},RA=w.forwardRef((t,e)=>{var n=ws(t,JJe),{x:r,y:i,lineHeight:s,capHeight:a,fill:o,scaleToFit:l,textAnchor:c,verticalAnchor:u}=n,f=Gq(n,WJe),p=w.useMemo(()=>QJe({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:l,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,l,f.style,f.width]),{dx:m,dy:x,angle:b,className:v,breakAll:_}=f,E=Gq(f,qJe);if(!Vc(r)||!Vc(i)||p.length===0)return null;var T=Number(r)+(qt(m)?m:0),A=Number(i)+(qt(x)?x:0);if(!Pi(T)||!Pi(A))return null;var C;switch(u){case"start":C=RO("calc(".concat(a,")"));break;case"middle":C=RO("calc(".concat((p.length-1)/2," * -").concat(s," + (").concat(a," / 2))"));break;default:C=RO("calc(".concat(p.length-1," * -").concat(s,")"));break}var M=[];if(l){var P=p[0].width,{width:D}=f;M.push("scale(".concat(qt(D)&&qt(P)?D/P:1,")"))}return b&&M.push("rotate(".concat(b,", ").concat(T,", ").concat(A,")")),M.length&&(E.transform=M.join(" ")),w.createElement("text",yI({},ml(E),{ref:e,x:T,y:A,className:qe("recharts-text",v),textAnchor:c,fill:o.includes("url")?zse:o}),p.map((N,L)=>{var k=N.words.join(_?"":" ");return w.createElement("tspan",{x:T,dy:L===0?C:s,key:"".concat(k,"-").concat(L)},k)}))});RA.displayName="Text";var eet=["labelRef"];function tet(t,e){if(t==null)return{};var n,r,i=net(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function net(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Wq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Si(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Wq(Object(n),!0).forEach(function(r){ret(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ret(t,e,n){return(e=iet(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iet(t){var e=set(t,"string");return typeof e=="symbol"?e:e+""}function set(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $u(){return $u=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$u.apply(null,arguments)}var $se=w.createContext(null),aet=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:i,width:s,height:a,children:o}=t,l=w.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:i,width:s,height:a}),[e,n,r,i,s,a]);return w.createElement($se.Provider,{value:l},o)},Gse=()=>{var t=w.useContext($se),e=fA();return t||zre(e)},oet=w.createContext(null),cet=()=>{var t=w.useContext(oet),e=Vt(Die);return t||e},uet=t=>{var{value:e,formatter:n}=t,r=_s(t.children)?e:t.children;return typeof n=="function"?n(r):r},V5=t=>t!=null&&typeof t=="function",det=(t,e)=>{var n=vs(e-t),r=Math.min(Math.abs(e-t),360);return n*r},fet=(t,e,n,r,i)=>{var{offset:s,className:a}=t,{cx:o,cy:l,innerRadius:c,outerRadius:u,startAngle:f,endAngle:p,clockWise:m}=i,x=(c+u)/2,b=det(f,p),v=b>=0?1:-1,_,E;switch(e){case"insideStart":_=f+v*s,E=m;break;case"insideEnd":_=p-v*s,E=!m;break;case"end":_=p+v*s,E=m;break;default:throw new Error("Unsupported position ".concat(e))}E=b<=0?E:!E;var T=zi(o,l,x,_),A=zi(o,l,x,_+(E?1:-1)*359),C="M".concat(T.x,",").concat(T.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(E?0:1,`,
    `).concat(A.x,",").concat(A.y),M=_s(t.id)?Yb("recharts-radial-line-"):t.id;return w.createElement("text",$u({},r,{dominantBaseline:"central",className:qe("recharts-radial-bar-label",a)}),w.createElement("defs",null,w.createElement("path",{id:M,d:C})),w.createElement("textPath",{xlinkHref:"#".concat(M)},n))},het=(t,e,n)=>{var{cx:r,cy:i,innerRadius:s,outerRadius:a,startAngle:o,endAngle:l}=t,c=(o+l)/2;if(n==="outside"){var{x:u,y:f}=zi(r,i,a+e,c);return{x:u,y:f,textAnchor:u>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var p=(s+a)/2,{x:m,y:x}=zi(r,i,p,c);return{x:m,y:x,textAnchor:"middle",verticalAnchor:"middle"}},vI=t=>"cx"in t&&qt(t.cx),pet=(t,e)=>{var{parentViewBox:n,offset:r,position:i}=t,s;n!=null&&!vI(n)&&(s=n);var{x:a,y:o,upperWidth:l,lowerWidth:c,height:u}=e,f=a,p=a+(l-c)/2,m=(f+p)/2,x=(l+c)/2,b=f+l/2,v=u>=0?1:-1,_=v*r,E=v>0?"end":"start",T=v>0?"start":"end",A=l>=0?1:-1,C=A*r,M=A>0?"end":"start",P=A>0?"start":"end";if(i==="top"){var D={x:f+l/2,y:o-_,textAnchor:"middle",verticalAnchor:E};return Si(Si({},D),s?{height:Math.max(o-s.y,0),width:l}:{})}if(i==="bottom"){var N={x:p+c/2,y:o+u+_,textAnchor:"middle",verticalAnchor:T};return Si(Si({},N),s?{height:Math.max(s.y+s.height-(o+u),0),width:c}:{})}if(i==="left"){var L={x:m-C,y:o+u/2,textAnchor:M,verticalAnchor:"middle"};return Si(Si({},L),s?{width:Math.max(L.x-s.x,0),height:u}:{})}if(i==="right"){var k={x:m+x+C,y:o+u/2,textAnchor:P,verticalAnchor:"middle"};return Si(Si({},k),s?{width:Math.max(s.x+s.width-k.x,0),height:u}:{})}var I=s?{width:x,height:u}:{};return i==="insideLeft"?Si({x:m+C,y:o+u/2,textAnchor:P,verticalAnchor:"middle"},I):i==="insideRight"?Si({x:m+x-C,y:o+u/2,textAnchor:M,verticalAnchor:"middle"},I):i==="insideTop"?Si({x:f+l/2,y:o+_,textAnchor:"middle",verticalAnchor:T},I):i==="insideBottom"?Si({x:p+c/2,y:o+u-_,textAnchor:"middle",verticalAnchor:E},I):i==="insideTopLeft"?Si({x:f+C,y:o+_,textAnchor:P,verticalAnchor:T},I):i==="insideTopRight"?Si({x:f+l-C,y:o+_,textAnchor:M,verticalAnchor:T},I):i==="insideBottomLeft"?Si({x:p+C,y:o+u-_,textAnchor:P,verticalAnchor:E},I):i==="insideBottomRight"?Si({x:p+c-C,y:o+u-_,textAnchor:M,verticalAnchor:E},I):i&&typeof i=="object"&&(qt(i.x)||gd(i.x))&&(qt(i.y)||gd(i.y))?Si({x:a+na(i.x,x),y:o+na(i.y,u),textAnchor:"end",verticalAnchor:"end"},I):Si({x:b,y:o+u/2,textAnchor:"middle",verticalAnchor:"middle"},I)},met={angle:0,offset:5,zIndex:ks.label,position:"middle",textBreakAll:!1};function mf(t){var e=ws(t,met),{viewBox:n,position:r,value:i,children:s,content:a,className:o="",textBreakAll:l,labelRef:c}=e,u=cet(),f=Gse(),p=r==="center"?f:u??f,m,x,b;if(n==null?m=p:vI(n)?m=n:m=zre(n),!m||_s(i)&&_s(s)&&!w.isValidElement(a)&&typeof a!="function")return null;var v=Si(Si({},e),{},{viewBox:m});if(w.isValidElement(a)){var{labelRef:_}=v,E=tet(v,eet);return w.cloneElement(a,E)}if(typeof a=="function"){if(x=w.createElement(a,v),w.isValidElement(x))return x}else x=uet(e);var T=ml(e);if(vI(m)){if(r==="insideStart"||r==="insideEnd"||r==="end")return fet(e,r,x,T,m);b=het(m,e.offset,e.position)}else b=pet(e,m);return w.createElement(ic,{zIndex:e.zIndex},w.createElement(RA,$u({ref:c,className:qe("recharts-label",o)},T,b,{textAnchor:YJe(T.textAnchor)?T.textAnchor:b.textAnchor,breakAll:l}),x))}mf.displayName="Label";var get=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?w.createElement(mf,$u({key:"label-implicit"},r)):Vc(t)?w.createElement(mf,$u({key:"label-implicit",value:t},r)):w.isValidElement(t)?t.type===mf?w.cloneElement(t,Si({key:"label-implicit"},r)):w.createElement(mf,$u({key:"label-implicit",content:t},r)):V5(t)?w.createElement(mf,$u({key:"label-implicit",content:t},r)):t&&typeof t=="object"?w.createElement(mf,$u({},t,{key:"label-implicit"},r)):null};function xet(t){var{label:e,labelRef:n}=t,r=Gse();return get(e,r,n)||null}var PO={},NO={},qq;function yet(){return qq||(qq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(NO)),NO}var OO={},Xq;function vet(){return Xq||(Xq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(OO)),OO}var Yq;function bet(){return Yq||(Yq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yet(),n=vet(),r=FF();function i(s){if(r.isArrayLike(s))return e.last(n.toArray(s))}t.last=i})(PO)),PO}var DO,Kq;function _et(){return Kq||(Kq=1,DO=bet().last),DO}var wet=_et();const Tet=Ea(wet);var Eet=["valueAccessor"],Cet=["dataKey","clockWise","id","textBreakAll","zIndex"];function uE(){return uE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uE.apply(null,arguments)}function Zq(t,e){if(t==null)return{};var n,r,i=Aet(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Aet(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Met=t=>Array.isArray(t.value)?Tet(t.value):t.value,Vse=w.createContext(void 0),Ret=Vse.Provider,Hse=w.createContext(void 0),Pet=Hse.Provider;function Net(){return w.useContext(Vse)}function Oet(){return w.useContext(Hse)}function UT(t){var{valueAccessor:e=Met}=t,n=Zq(t,Eet),{dataKey:r,clockWise:i,id:s,textBreakAll:a,zIndex:o}=n,l=Zq(n,Cet),c=Net(),u=Oet(),f=c||u;return!f||!f.length?null:w.createElement(ic,{zIndex:o??ks.label},w.createElement(wa,{className:"recharts-label-list"},f.map((p,m)=>{var x,b=_s(r)?e(p,m):Qr(p&&p.payload,r),v=_s(s)?{}:{id:"".concat(s,"-").concat(m)};return w.createElement(mf,uE({key:"label-".concat(m)},ml(p),l,v,{fill:(x=n.fill)!==null&&x!==void 0?x:p.fill,parentViewBox:p.parentViewBox,value:b,textBreakAll:a,viewBox:p.viewBox,index:m,zIndex:0}))})))}UT.displayName="LabelList";function Wse(t){var{label:e}=t;return e?e===!0?w.createElement(UT,{key:"labelList-implicit"}):w.isValidElement(e)||V5(e)?w.createElement(UT,{key:"labelList-implicit",content:e}):typeof e=="object"?w.createElement(UT,uE({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var qse=t=>t.graphicalItems.polarItems,Det=Le([ti,t1],h5),PA=Le([qse,oi,Det],m5),Let=Le([PA],g5),NA=Le([Let,t5],x5),Iet=Le([NA,oi,PA],v5);Le([NA,oi,PA],(t,e,n)=>n.length>0?t.flatMap(r=>n.flatMap(i=>{var s,a=Qr(r,(s=e.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:a,errorDomain:[]}})).filter(Boolean):e?.dataKey!=null?t.map(r=>({value:Qr(r,e.dataKey),errorDomain:[]})):t.map(r=>({value:r,errorDomain:[]})));var Qq=()=>{},ket=Le([NA,oi,PA,CA,ti],w5),Bet=Le([oi,_5,S5,Qq,ket,Qq,Zn,ti],T5),Xse=Le([oi,Zn,NA,Iet,e1,ti,Bet],E5),Fet=Le([Xse,oi,Dx],M5);Le([oi,Xse,Fet,ti],P5);var Uet={radiusAxis:{},angleAxis:{}},Yse=Ja({name:"polarAxis",initialState:Uet,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:Iat,removeRadiusAxis:kat,addAngleAxis:Bat,removeAngleAxis:Fat}=Yse.actions,jet=Yse.reducer;function Jq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eX(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Jq(Object(n),!0).forEach(function(r){zet(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zet(t,e,n){return(e=$et(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $et(t){var e=Get(t,"string");return typeof e=="symbol"?e:e+""}function Get(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Vet=(t,e)=>e,H5=Le([qse,Vet],(t,e)=>t.filter(n=>n.type==="pie").find(n=>n.id===e)),Het=[],W5=(t,e,n)=>n?.length===0?Het:n,Kse=Le([t5,H5,W5],(t,e,n)=>{var{chartData:r}=t;if(e!=null){var i;if(e?.data!=null&&e.data.length>0?i=e.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(s=>eX(eX({},e.presentationProps),s.props))),i!=null)return i}}),Wet=Le([Kse,H5,W5],(t,e,n)=>{if(!(t==null||e==null))return t.map((r,i)=>{var s,a=Qr(r,e.nameKey,e.name),o;return n!=null&&(s=n[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?o=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?o=r.fill:o=e.fill,{value:oA(a,e.dataKey),color:o,payload:r,type:e.legendType}})}),qet=Le([Kse,H5,W5,ss],(t,e,n,r)=>{if(!(e==null||t==null))return qtt({offset:r,pieSettings:e,displayedData:t,cells:n})}),tX=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",nX=null,LO=null,Zse=t=>{if(t===nX&&Array.isArray(LO))return LO;var e=[];return w.Children.forEach(t,n=>{_s(n)||(FI.isFragment(n)?e=e.concat(Zse(n.props.children)):e.push(n))}),LO=e,nX=t,e};function q5(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>tX(i)):r=[tX(e)],Zse(t).forEach(i=>{var s=Ip(i,"type.displayName")||Ip(i,"type.name");s&&r.indexOf(s)!==-1&&n.push(i)}),n}var IO={},rX;function Xet(){return rX||(rX=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(IO)),IO}var kO,iX;function Yet(){return iX||(iX=1,kO=Xet().isPlainObject),kO}var Ket=Yet();const Zet=Ea(Ket);function sX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function aX(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sX(Object(n),!0).forEach(function(r){Qet(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qet(t,e,n){return(e=Jet(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jet(t){var e=ett(t,"string");return typeof e=="symbol"?e:e+""}function ett(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dE(){return dE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dE.apply(null,arguments)}var oX=(t,e,n,r,i)=>{var s=n-r,a;return a="M ".concat(t,",").concat(e),a+="L ".concat(t+n,",").concat(e),a+="L ".concat(t+n-s/2,",").concat(e+i),a+="L ".concat(t+n-s/2-r,",").concat(e+i),a+="L ".concat(t,",").concat(e," Z"),a},ttt={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ntt=t=>{var e=ws(t,ttt),{x:n,y:r,upperWidth:i,lowerWidth:s,height:a,className:o}=e,{animationEasing:l,animationDuration:c,animationBegin:u,isUpdateAnimationActive:f}=e,p=w.useRef(null),[m,x]=w.useState(-1),b=w.useRef(i),v=w.useRef(s),_=w.useRef(a),E=w.useRef(n),T=w.useRef(r),A=vA(t,"trapezoid-");if(w.useEffect(()=>{if(p.current&&p.current.getTotalLength)try{var z=p.current.getTotalLength();z&&x(z)}catch{}},[]),n!==+n||r!==+r||i!==+i||s!==+s||a!==+a||i===0&&s===0||a===0)return null;var C=qe("recharts-trapezoid",o);if(!f)return w.createElement("g",null,w.createElement("path",dE({},ml(e),{className:C,d:oX(n,r,i,s,a)})));var M=b.current,P=v.current,D=_.current,N=E.current,L=T.current,k="0px ".concat(m===-1?1:m,"px"),I="".concat(m,"px 0px"),F=tie(["strokeDasharray"],c,l);return w.createElement(yA,{animationId:A,key:A,canBegin:m>0,duration:c,easing:l,isActive:f,begin:u},z=>{var H=Zi(M,i,z),B=Zi(P,s,z),j=Zi(D,a,z),G=Zi(N,n,z),W=Zi(L,r,z);p.current&&(b.current=H,v.current=B,_.current=j,E.current=G,T.current=W);var re=z>0?{transition:F,strokeDasharray:I}:{strokeDasharray:k};return w.createElement("path",dE({},ml(e),{className:C,d:oX(G,W,H,B,j),ref:p,style:aX(aX({},re),e.style)}))})},rtt=["option","shapeType","propTransformer","activeClassName"];function itt(t,e){if(t==null)return{};var n,r,i=stt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function stt(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function lX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lX(Object(n),!0).forEach(function(r){att(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function att(t,e,n){return(e=ott(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ott(t){var e=ltt(t,"string");return typeof e=="symbol"?e:e+""}function ltt(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ctt(t,e){return fE(fE({},e),t)}function utt(t,e){return t==="symbols"}function cX(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return w.createElement(sie,n);case"trapezoid":return w.createElement(ntt,n);case"sector":return w.createElement(cie,n);case"symbols":if(utt(e))return w.createElement(BF,n);break;case"curve":return w.createElement(e5,n);default:return null}}function dtt(t){return w.isValidElement(t)?t.props:t}function Qse(t){var{option:e,shapeType:n,propTransformer:r=ctt,activeClassName:i="recharts-active-shape"}=t,s=itt(t,rtt),a;if(w.isValidElement(e))a=w.cloneElement(e,fE(fE({},s),dtt(e)));else if(typeof e=="function")a=e(s,s.index);else if(Zet(e)&&typeof e!="boolean"){var o=r(e,s);a=w.createElement(cX,{shapeType:n,elementProps:o})}else{var l=s;a=w.createElement(cX,{shapeType:n,elementProps:l})}return s.isActive?w.createElement(wa,{className:i},a):a}var X5=(t,e,n)=>{var r=Ir();return(i,s)=>a=>{t?.(i,s,a),r(use({activeIndex:String(s),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}},Y5=t=>{var e=Ir();return(n,r)=>i=>{t?.(n,r,i),e(TZe())}},K5=(t,e,n)=>{var r=Ir();return(i,s)=>a=>{t?.(i,s,a),r(EZe({activeIndex:String(s),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}};function Jse(t){var{tooltipEntrySettings:e}=t,n=Ir(),r=eo(),i=w.useRef(null);return w.useLayoutEffect(()=>{r||(i.current===null?n(bZe(e)):i.current!==e&&n(_Ze({prev:i.current,next:e})),i.current=e)},[e,n,r]),w.useLayoutEffect(()=>()=>{i.current&&(n(SZe(i.current)),i.current=null)},[n]),null}function ftt(t){var{legendPayload:e}=t,n=Ir(),r=eo(),i=w.useRef(null);return w.useLayoutEffect(()=>{r||(i.current===null?n(Kre(e)):i.current!==e&&n(Zre({prev:i.current,next:e})),i.current=e)},[n,r,e]),w.useLayoutEffect(()=>()=>{i.current&&(n(Qre(i.current)),i.current=null)},[n]),null}function htt(t){var{legendPayload:e}=t,n=Ir(),r=Vt(Zn),i=w.useRef(null);return w.useLayoutEffect(()=>{r!=="centric"&&r!=="radial"||(i.current===null?n(Kre(e)):i.current!==e&&n(Zre({prev:i.current,next:e})),i.current=e)},[n,r,e]),w.useLayoutEffect(()=>()=>{i.current&&(n(Qre(i.current)),i.current=null)},[n]),null}var BO,ptt=()=>{var[t]=w.useState(()=>Yb("uid-"));return t},mtt=(BO=ab.useId)!==null&&BO!==void 0?BO:ptt;function eae(t,e){var n=mtt();return e||(t?"".concat(t,"-").concat(n):n)}var gtt=w.createContext(void 0),tae=t=>{var{id:e,type:n,children:r}=t,i=eae("recharts-".concat(n),e);return w.createElement(gtt.Provider,{value:i},r(i))},xtt={cartesianItems:[],polarItems:[]},nae=Ja({name:"graphicalItems",initialState:xtt,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:Yr()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,i=ql(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},prepare:Yr()},removeCartesianGraphicalItem:{reducer(t,e){var n=ql(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:Yr()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:Yr()},removePolarGraphicalItem:{reducer(t,e){var n=ql(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:Yr()}}}),{addCartesianGraphicalItem:ytt,replaceCartesianGraphicalItem:vtt,removeCartesianGraphicalItem:btt,addPolarGraphicalItem:_tt,removePolarGraphicalItem:Stt}=nae.actions,wtt=nae.reducer,Ttt=t=>{var e=Ir(),n=w.useRef(null);return w.useLayoutEffect(()=>{n.current===null?e(ytt(t)):n.current!==t&&e(vtt({prev:n.current,next:t})),n.current=t},[e,t]),w.useLayoutEffect(()=>()=>{n.current&&(e(btt(n.current)),n.current=null)},[e]),null},Ett=w.memo(Ttt);function Ctt(t){var e=Ir();return w.useLayoutEffect(()=>(e(_tt(t)),()=>{e(Stt(t))}),[e,t]),null}var Att=["key"],Mtt=["onMouseEnter","onClick","onMouseLeave"],Rtt=["id"],Ptt=["id"];function uX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uX(Object(n),!0).forEach(function(r){Ntt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ntt(t,e,n){return(e=Ott(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ott(t){var e=Dtt(t,"string");return typeof e=="symbol"?e:e+""}function Dtt(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vf(){return Vf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vf.apply(null,arguments)}function OA(t,e){if(t==null)return{};var n,r,i=Ltt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Ltt(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Itt(t){var e=w.useMemo(()=>q5(t.children,sx),[t.children]),n=Vt(r=>Wet(r,t.id,e));return n==null?null:w.createElement(htt,{legendPayload:n})}var ktt=w.memo(t=>{var{dataKey:e,nameKey:n,sectors:r,stroke:i,strokeWidth:s,fill:a,name:o,hide:l,tooltipType:c}=t,u={dataDefinedOnItem:r.map(f=>f.tooltipPayload),positions:r.map(f=>f.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:a,dataKey:e,nameKey:n,name:oA(o,e),hide:l,type:c,color:a,unit:""}};return w.createElement(Jse,{tooltipEntrySettings:u})}),Btt=(t,e)=>t>e?"start":t<e?"end":"middle",Ftt=(t,e,n)=>na(typeof e=="function"?e(t):e,n,n*.8),Utt=(t,e,n)=>{var{top:r,left:i,width:s,height:a}=e,o=aie(s,a),l=i+na(t.cx,s,s/2),c=r+na(t.cy,a,a/2),u=na(t.innerRadius,o,0),f=Ftt(n,t.outerRadius,o),p=t.maxRadius||Math.sqrt(s*s+a*a)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:f,maxRadius:p}},jtt=(t,e)=>{var n=vs(e-t),r=Math.min(Math.abs(e-t),360);return n*r};function ztt(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var $tt=(t,e)=>{if(w.isValidElement(t))return w.cloneElement(t,e);if(typeof t=="function")return t(e);var n=qe("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:r}=e,i=OA(e,Att);return w.createElement(e5,Vf({},i,{type:"linear",className:n}))},Gtt=(t,e,n)=>{if(w.isValidElement(t))return w.cloneElement(t,e);var r=n;if(typeof t=="function"&&(r=t(e),w.isValidElement(r)))return r;var i=qe("recharts-pie-label-text",ztt(t));return w.createElement(RA,Vf({},e,{alignmentBaseline:"middle",className:i}),r)};function Vtt(t){var{sectors:e,props:n,showLabels:r}=t,{label:i,labelLine:s,dataKey:a}=n;if(!r||!i||!e)return null;var o=Zl(n),l=Xb(i),c=Xb(s),u=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,f=e.map((p,m)=>{var x=(p.startAngle+p.endAngle)/2,b=zi(p.cx,p.cy,p.outerRadius+u,x),v=pi(pi(pi(pi({},o),p),{},{stroke:"none"},l),{},{index:m,textAnchor:Btt(b.x,p.cx)},b),_=pi(pi(pi(pi({},o),p),{},{fill:"none",stroke:p.fill},c),{},{index:m,points:[zi(p.cx,p.cy,p.outerRadius,x),b],key:"line"});return w.createElement(ic,{zIndex:ks.label,key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(m)},w.createElement(wa,null,s&&$tt(s,_),Gtt(i,v,Qr(p,a))))});return w.createElement(wa,{className:"recharts-pie-labels"},f)}function Htt(t){var{sectors:e,props:n,showLabels:r}=t,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?w.createElement(Wse,{label:i}):w.createElement(Vtt,{sectors:e,props:n,showLabels:r})}function Wtt(t){var{sectors:e,activeShape:n,inactiveShape:r,allOtherPieProps:i,shape:s,id:a}=t,o=Vt(Up),l=Vt(U5),c=Vt(uQe),{onMouseEnter:u,onClick:f,onMouseLeave:p}=i,m=OA(i,Mtt),x=X5(u,i.dataKey,a),b=Y5(p),v=K5(f,i.dataKey,a);return e==null||e.length===0?null:w.createElement(w.Fragment,null,e.map((_,E)=>{if(_?.startAngle===0&&_?.endAngle===0&&e.length!==1)return null;var T=c==null||c===a,A=String(E)===o&&(l==null||i.dataKey===l)&&T,C=o?r:null,M=n&&A?n:C,P=pi(pi({},_),{},{stroke:_.stroke,tabIndex:-1,[kre]:E,[Bre]:i.dataKey});return w.createElement(wa,Vf({key:"sector-".concat(_?.startAngle,"-").concat(_?.endAngle,"-").concat(_.midAngle,"-").concat(E),tabIndex:-1,className:"recharts-pie-sector"},q_(m,_,E),{onMouseEnter:x(_,E),onMouseLeave:b(_,E),onClick:v(_,E)}),w.createElement(Qse,Vf({option:s??M,index:E,shapeType:"sector",isActive:A},P)))}))}function qtt(t){var e,{pieSettings:n,displayedData:r,cells:i,offset:s}=t,{cornerRadius:a,startAngle:o,endAngle:l,dataKey:c,nameKey:u,tooltipType:f}=n,p=Math.abs(n.minAngle),m=jtt(o,l),x=Math.abs(m),b=r.length<=1?0:(e=n.paddingAngle)!==null&&e!==void 0?e:0,v=r.filter(M=>Qr(M,c,0)!==0).length,_=(x>=360?v:v-1)*b,E=x-v*p-_,T=r.reduce((M,P)=>{var D=Qr(P,c,0);return M+(qt(D)?D:0)},0),A;if(T>0){var C;A=r.map((M,P)=>{var D=Qr(M,c,0),N=Qr(M,u,P),L=Utt(n,s,M),k=(qt(D)?D:0)/T,I,F=pi(pi({},M),i&&i[P]&&i[P].props);P?I=C.endAngle+vs(m)*b*(D!==0?1:0):I=o;var z=I+vs(m)*((D!==0?p:0)+k*E),H=(I+z)/2,B=(L.innerRadius+L.outerRadius)/2,j=[{name:N,value:D,payload:F,dataKey:c,type:f}],G=zi(L.cx,L.cy,B,H);return C=pi(pi(pi(pi({},n.presentationProps),{},{percent:k,cornerRadius:typeof a=="string"?parseFloat(a):a,name:N,tooltipPayload:j,midAngle:H,middleRadius:B,tooltipPosition:G},F),L),{},{value:D,dataKey:c,startAngle:I,endAngle:z,payload:F,paddingAngle:vs(m)*b}),C})}return A}function Xtt(t){var{showLabels:e,sectors:n,children:r}=t,i=w.useMemo(()=>!e||!n?[]:n.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[n,e]);return w.createElement(Pet,{value:e?i:void 0},r)}function Ytt(t){var{props:e,previousSectorsRef:n,id:r}=t,{sectors:i,isAnimationActive:s,animationBegin:a,animationDuration:o,animationEasing:l,activeShape:c,inactiveShape:u,onAnimationStart:f,onAnimationEnd:p}=e,m=vA(e,"recharts-pie-"),x=n.current,[b,v]=w.useState(!1),_=w.useCallback(()=>{typeof p=="function"&&p(),v(!1)},[p]),E=w.useCallback(()=>{typeof f=="function"&&f(),v(!0)},[f]);return w.createElement(Xtt,{showLabels:!b,sectors:i},w.createElement(yA,{animationId:m,begin:a,duration:o,isActive:s,easing:l,onAnimationStart:E,onAnimationEnd:_,key:m},T=>{var A=[],C=i&&i[0],M=C?.startAngle;return i?.forEach((P,D)=>{var N=x&&x[D],L=D>0?Ip(P,"paddingAngle",0):0;if(N){var k=Zi(N.endAngle-N.startAngle,P.endAngle-P.startAngle,T),I=pi(pi({},P),{},{startAngle:M+L,endAngle:M+k+L});A.push(I),M=I.endAngle}else{var{endAngle:F,startAngle:z}=P,H=Zi(0,F-z,T),B=pi(pi({},P),{},{startAngle:M+L,endAngle:M+H+L});A.push(B),M=B.endAngle}}),n.current=A,w.createElement(wa,null,w.createElement(Wtt,{sectors:A,activeShape:c,inactiveShape:u,allOtherPieProps:e,shape:e.shape,id:r}))}),w.createElement(Htt,{showLabels:!b,sectors:i,props:e}),e.children)}var Ktt={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:ks.area};function Ztt(t){var{id:e}=t,n=OA(t,Rtt),{hide:r,className:i,rootTabIndex:s}=t,a=w.useMemo(()=>q5(t.children,sx),[t.children]),o=Vt(u=>qet(u,e,a)),l=w.useRef(null),c=qe("recharts-pie",i);return r||o==null?(l.current=null,w.createElement(wa,{tabIndex:s,className:c})):w.createElement(ic,{zIndex:t.zIndex},w.createElement(ktt,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:o,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType}),w.createElement(wa,{tabIndex:s,className:c},w.createElement(Ytt,{props:pi(pi({},n),{},{sectors:o}),previousSectorsRef:l,id:e})))}function rae(t){var e=ws(t,Ktt),{id:n}=e,r=OA(e,Ptt),i=Zl(r);return w.createElement(tae,{id:n,type:"pie"},s=>w.createElement(w.Fragment,null,w.createElement(Ctt,{type:"pie",id:s,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i,maxRadius:e.maxRadius}),w.createElement(Itt,Vf({},r,{id:s})),w.createElement(Ztt,Vf({},r,{id:s}))))}rae.displayName="Pie";function dX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fX(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dX(Object(n),!0).forEach(function(r){Qtt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qtt(t,e,n){return(e=Jtt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jtt(t){var e=ent(t,"string");return typeof e=="symbol"?e:e+""}function ent(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tnt={xAxis:{},yAxis:{},zAxis:{}},iae=Ja({name:"cartesianAxis",initialState:tnt,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:Yr()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:Yr()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:Yr()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:Yr()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:Yr()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:Yr()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:Yr()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:Yr()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:Yr()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,i=t.yAxis[n];if(i){var s=i.widthHistory||[];if(s.length===3&&s[0]===s[2]&&r===s[1]&&r!==i.width&&Math.abs(r-s[0])<=1)return;var a=[...s,r].slice(-3);t.yAxis[n]=fX(fX({},t.yAxis[n]),{},{width:r,widthHistory:a})}}}}),{addXAxis:nnt,replaceXAxis:rnt,removeXAxis:int,addYAxis:snt,replaceYAxis:ant,removeYAxis:ont,addZAxis:Uat,replaceZAxis:jat,removeZAxis:zat,updateYAxisWidth:lnt}=iae.actions,cnt=iae.reducer,unt=Le([ss],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),dnt=Le([unt,Ed,Cd],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),sae=()=>Vt(dnt),fnt="Invariant failed";function hnt(t,e){throw new Error(fnt)}var pnt=["x","y"];function bI(){return bI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bI.apply(null,arguments)}function hX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hX(Object(n),!0).forEach(function(r){mnt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mnt(t,e,n){return(e=gnt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gnt(t){var e=xnt(t,"string");return typeof e=="symbol"?e:e+""}function xnt(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ynt(t,e){if(t==null)return{};var n,r,i=vnt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function vnt(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function bnt(t,e){var{x:n,y:r}=t,i=ynt(t,pnt),s="".concat(n),a=parseInt(s,10),o="".concat(r),l=parseInt(o,10),c="".concat(e.height||i.height),u=parseInt(c,10),f="".concat(e.width||i.width),p=parseInt(f,10);return bv(bv(bv(bv(bv({},e),i),a?{x:a}:{}),l?{y:l}:{}),{},{height:u,width:p,name:e.name,radius:e.radius})}function hE(t){return w.createElement(Qse,bI({shapeType:"rectangle",propTransformer:bnt,activeClassName:"recharts-active-bar"},t))}var _nt=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(qt(e))return e;var s=qt(r)||_s(r);return s?e(r,i):(s||hnt(),n)}},Snt={},aae=Ja({name:"errorBars",initialState:Snt,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(s=>s.dataKey===r.dataKey&&s.direction===r.direction?i:s))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:$at,replaceErrorBar:Gat,removeErrorBar:Vat}=aae.actions,wnt=aae.reducer,Tnt=["children"];function Ent(t,e){if(t==null)return{};var n,r,i=Cnt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Cnt(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Ant={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Mnt=w.createContext(Ant);function Rnt(t){var{children:e}=t,n=Ent(t,Tnt);return w.createElement(Mnt.Provider,{value:n},e)}function oae(t,e){var n,r,i=Vt(c=>Ad(c,t)),s=Vt(c=>Md(c,e)),a=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:ps.allowDataOverflow,o=(r=s?.allowDataOverflow)!==null&&r!==void 0?r:ms.allowDataOverflow,l=a||o;return{needClip:l,needClipX:a,needClipY:o}}function Pnt(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=sae(),{needClipX:s,needClipY:a,needClip:o}=oae(e,n);if(!o||!i)return null;var{x:l,y:c,width:u,height:f}=i;return w.createElement("clipPath",{id:"clipPath-".concat(r)},w.createElement("rect",{x:s?l:l-u/2,y:a?c:c-f/2,width:s?u:u*2,height:a?f:f*2}))}function Nnt(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&Pi(t.zIndex)?t.zIndex:e}var FO={exports:{}},UO={};var pX;function Ont(){if(pX)return UO;pX=1;var t=ax();function e(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,s=t.useEffect,a=t.useMemo,o=t.useDebugValue;return UO.useSyncExternalStoreWithSelector=function(l,c,u,f,p){var m=i(null);if(m.current===null){var x={hasValue:!1,value:null};m.current=x}else x=m.current;m=a(function(){function v(C){if(!_){if(_=!0,E=C,C=f(C),p!==void 0&&x.hasValue){var M=x.value;if(p(M,C))return T=M}return T=C}if(M=T,n(E,C))return M;var P=f(C);return p!==void 0&&p(M,P)?(E=C,M):(E=C,T=P)}var _=!1,E,T,A=u===void 0?null:u;return[function(){return v(c())},A===null?void 0:function(){return v(A())}]},[c,u,f,p]);var b=r(l,m[0],m[1]);return s(function(){x.hasValue=!0,x.value=b},[b]),o(b),b},UO}var mX;function Dnt(){return mX||(mX=1,FO.exports=Ont()),FO.exports}Dnt();function Lnt(t){t()}function Int(){let t=null,e=null;return{clear(){t=null,e=null},notify(){Lnt(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var gX={notify(){},get:()=>[]};function knt(t,e){let n,r=gX,i=0,s=!1;function a(b){u();const v=r.subscribe(b);let _=!1;return()=>{_||(_=!0,v(),f())}}function o(){r.notify()}function l(){x.onStateChange&&x.onStateChange()}function c(){return s}function u(){i++,n||(n=t.subscribe(l),r=Int())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=gX)}function p(){s||(s=!0,u())}function m(){s&&(s=!1,f())}const x={addNestedSub:a,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:c,trySubscribe:p,tryUnsubscribe:m,getListeners:()=>r};return x}var Bnt=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Fnt=Bnt(),Unt=()=>typeof navigator<"u"&&navigator.product==="ReactNative",jnt=Unt(),znt=()=>Fnt||jnt?w.useLayoutEffect:w.useEffect,$nt=znt();function xX(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function Gnt(t,e){if(xX(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!xX(t[n[i]],e[n[i]]))return!1;return!0}var Vnt=Symbol.for("react-redux-context"),Hnt=typeof globalThis<"u"?globalThis:{};function Wnt(){if(!w.createContext)return{};const t=Hnt[Vnt]??=new Map;let e=t.get(w.createContext);return e||(e=w.createContext(null),t.set(w.createContext,e)),e}var qnt=Wnt();function Xnt(t){const{children:e,context:n,serverState:r,store:i}=t,s=w.useMemo(()=>{const l=knt(i);return{store:i,subscription:l,getServerState:r?()=>r:void 0}},[i,r]),a=w.useMemo(()=>i.getState(),[i]);$nt(()=>{const{subscription:l}=s;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==i.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[s,a]);const o=n||qnt;return w.createElement(o.Provider,{value:s},e)}var Ynt=Xnt,Knt=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function Znt(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function Z5(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if(Knt.has(r)){if(t[r]==null&&e[r]==null)continue;if(!Gnt(t[r],e[r]))return!1}else if(!Znt(t[r],e[r]))return!1;return!0}var Qnt=["onMouseEnter","onMouseLeave","onClick"],Jnt=["value","background","tooltipPosition"],ert=["id"],trt=["onMouseEnter","onClick","onMouseLeave"];function vd(){return vd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vd.apply(null,arguments)}function yX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ma(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yX(Object(n),!0).forEach(function(r){nrt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nrt(t,e,n){return(e=rrt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rrt(t){var e=irt(t,"string");return typeof e=="symbol"?e:e+""}function irt(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pE(t,e){if(t==null)return{};var n,r,i=srt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function srt(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var art=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:s}=t;return[{inactive:s,dataKey:e,type:i,color:r,value:oA(n,e),payload:t}]},ort=w.memo(t=>{var{dataKey:e,stroke:n,strokeWidth:r,fill:i,name:s,hide:a,unit:o,tooltipType:l}=t,c={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:oA(s,e),hide:a,type:l,color:i,unit:o}};return w.createElement(Jse,{tooltipEntrySettings:c})});function lrt(t){var e=Vt(Up),{data:n,dataKey:r,background:i,allOtherBarProps:s}=t,{onMouseEnter:a,onMouseLeave:o,onClick:l}=s,c=pE(s,Qnt),u=X5(a,r),f=Y5(o),p=K5(l,r);if(!i||n==null)return null;var m=Xb(i);return w.createElement(ic,{zIndex:Nnt(i,ks.barBackground)},n.map((x,b)=>{var{value:v,background:_,tooltipPosition:E}=x,T=pE(x,Jnt);if(!_)return null;var A=u(x,b),C=f(x,b),M=p(x,b),P=ma(ma(ma(ma(ma({option:i,isActive:String(b)===e},T),{},{fill:"#eee"},_),m),q_(c,x,b)),{},{onMouseEnter:A,onMouseLeave:C,onClick:M,dataKey:r,index:b,className:"recharts-bar-background-rectangle"});return w.createElement(hE,vd({key:"background-bar-".concat(b)},P))}))}function crt(t){var{showLabels:e,children:n,rects:r}=t,i=r?.map(s=>{var a={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return ma(ma({},a),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:a,fill:s.fill})});return w.createElement(Ret,{value:e?i:void 0},n)}function urt(t){var{shape:e,activeBar:n,baseProps:r,entry:i,index:s,dataKey:a}=t,o=Vt(Up),l=Vt(U5),c=n&&String(s)===o&&(l==null||a===l),u=c?n:e;return c?w.createElement(ic,{zIndex:ks.activeBar},w.createElement(hE,vd({},r,{name:String(r.name)},i,{isActive:c,option:u,index:s,dataKey:a}))):w.createElement(hE,vd({},r,{name:String(r.name)},i,{isActive:c,option:u,index:s,dataKey:a}))}function drt(t){var{shape:e,baseProps:n,entry:r,index:i,dataKey:s}=t;return w.createElement(hE,vd({},n,{name:String(n.name)},r,{isActive:!1,option:e,index:i,dataKey:s}))}function frt(t){var e,{data:n,props:r}=t,i=(e=Zl(r))!==null&&e!==void 0?e:{},{id:s}=i,a=pE(i,ert),{shape:o,dataKey:l,activeBar:c}=r,{onMouseEnter:u,onClick:f,onMouseLeave:p}=r,m=pE(r,trt),x=X5(u,l),b=Y5(p),v=K5(f,l);return n?w.createElement(w.Fragment,null,n.map((_,E)=>w.createElement(wa,vd({key:"rectangle-".concat(_?.x,"-").concat(_?.y,"-").concat(_?.value,"-").concat(E),className:"recharts-bar-rectangle"},q_(m,_,E),{onMouseEnter:x(_,E),onMouseLeave:b(_,E),onClick:v(_,E)}),c?w.createElement(urt,{shape:o,activeBar:c,baseProps:a,entry:_,index:E,dataKey:l}):w.createElement(drt,{shape:o,baseProps:a,entry:_,index:E,dataKey:l})))):null}function hrt(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:i,isAnimationActive:s,animationBegin:a,animationDuration:o,animationEasing:l,onAnimationEnd:c,onAnimationStart:u}=e,f=n.current,p=vA(e,"recharts-bar-"),[m,x]=w.useState(!1),b=!m,v=w.useCallback(()=>{typeof c=="function"&&c(),x(!1)},[c]),_=w.useCallback(()=>{typeof u=="function"&&u(),x(!0)},[u]);return w.createElement(crt,{showLabels:b,rects:r},w.createElement(yA,{animationId:p,begin:a,duration:o,isActive:s,easing:l,onAnimationEnd:v,onAnimationStart:_,key:p},E=>{var T=E===1?r:r?.map((A,C)=>{var M=f&&f[C];if(M)return ma(ma({},A),{},{x:Zi(M.x,A.x,E),y:Zi(M.y,A.y,E),width:Zi(M.width,A.width,E),height:Zi(M.height,A.height,E)});if(i==="horizontal"){var P=Zi(0,A.height,E),D=Zi(A.stackedBarStart,A.y,E);return ma(ma({},A),{},{y:D,height:P})}var N=Zi(0,A.width,E),L=Zi(A.stackedBarStart,A.x,E);return ma(ma({},A),{},{width:N,x:L})});return E>0&&(n.current=T??null),T==null?null:w.createElement(wa,null,w.createElement(frt,{props:e,data:T}))}),w.createElement(Wse,{label:e.label}),e.children)}function prt(t){var e=w.useRef(null);return w.createElement(hrt,{previousRectanglesRef:e,props:t})}var lae=0,mrt=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:Qr(t,e)}};class grt extends w.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:i,xAxisId:s,yAxisId:a,needClip:o,background:l,id:c}=this.props;if(e||n==null)return null;var u=qe("recharts-bar",i),f=c;return w.createElement(wa,{className:u,id:c},o&&w.createElement("defs",null,w.createElement(Pnt,{clipPathId:f,xAxisId:s,yAxisId:a})),w.createElement(wa,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(f,")"):void 0},w.createElement(lrt,{data:n,dataKey:r,background:l,allOtherBarProps:this.props}),w.createElement(prt,this.props)))}}var xrt={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:lae,xAxisId:0,yAxisId:0,zIndex:ks.bar};function yrt(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:a,animationBegin:o,animationDuration:l,animationEasing:c,isAnimationActive:u}=t,{needClip:f}=oae(e,n),p=hA(),m=eo(),x=q5(t.children,sx),b=Vt(E=>Wrt(E,e,n,m,t.id,x));if(p!=="vertical"&&p!=="horizontal")return null;var v,_=b?.[0];return _==null||_.height==null||_.width==null?v=0:v=p==="vertical"?_.height/2:_.width/2,w.createElement(Rnt,{xAxisId:e,yAxisId:n,data:b,dataPointFormatter:mrt,errorBarOffset:v},w.createElement(grt,vd({},t,{layout:p,needClip:f,data:b,xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:a,animationBegin:o,animationDuration:l,animationEasing:c,isAnimationActive:u})))}function vrt(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:s,xAxis:a,yAxis:o,xAxisTicks:l,yAxisTicks:c,stackedData:u,displayedData:f,offset:p,cells:m,parentViewBox:x,dataStartIndex:b}=t,v=e==="horizontal"?o:a,_=u?v.scale.domain():null,E=Eqe({numericAxis:v}),T=v.scale(E);return f.map((A,C)=>{var M,P,D,N,L,k;u?M=vqe(u[C+b],_):(M=Qr(A,n),Array.isArray(M)||(M=[E,M]));var I=_nt(r,lae)(M[1],C);if(e==="horizontal"){var F,[z,H]=[o.scale(M[0]),o.scale(M[1])];P=bW({axis:a,ticks:l,bandSize:s,offset:i.offset,entry:A,index:C}),D=(F=H??z)!==null&&F!==void 0?F:void 0,N=i.size;var B=z-H;if(L=Ql(B)?0:B,k={x:P,y:p.top,width:N,height:p.height},Math.abs(I)>0&&Math.abs(L)<Math.abs(I)){var j=vs(L||I)*(Math.abs(I)-Math.abs(L));D-=j,L+=j}}else{var[G,W]=[a.scale(M[0]),a.scale(M[1])];if(P=G,D=bW({axis:o,ticks:c,bandSize:s,offset:i.offset,entry:A,index:C}),N=W-G,L=i.size,k={x:p.left,y:D,width:p.width,height:L},Math.abs(I)>0&&Math.abs(N)<Math.abs(I)){var re=vs(N||I)*(Math.abs(I)-Math.abs(N));N+=re}}if(P==null||D==null||N==null||L==null)return null;var $=ma(ma({},A),{},{stackedBarStart:T,x:P,y:D,width:N,height:L,value:u?M:M[1],payload:A,background:k,tooltipPosition:{x:P+N/2,y:D+L/2},parentViewBox:x},m&&m[C]&&m[C].props);return $}).filter(Boolean)}function brt(t){var e=ws(t,xrt),n=eo();return w.createElement(tae,{id:e.id,type:"bar"},r=>w.createElement(w.Fragment,null,w.createElement(ftt,{legendPayload:art(e)}),w.createElement(ort,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType}),w.createElement(Ett,{type:"bar",id:r,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:Tqe(e.stackId),hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:n}),w.createElement(ic,{zIndex:e.zIndex},w.createElement(yrt,vd({},e,{id:r})))))}var cae=w.memo(brt,Z5);cae.displayName="Bar";function vX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function uT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vX(Object(n),!0).forEach(function(r){_rt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _rt(t,e,n){return(e=Srt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Srt(t){var e=wrt(t,"string");return typeof e=="symbol"?e:e+""}function wrt(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Trt=(t,e)=>e,Ert=(t,e,n)=>n,Crt=(t,e,n,r)=>r,Art=(t,e,n,r,i)=>i,u1=Le([p5,Art],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),Mrt=Le([u1],t=>t?.maxBarSize),Rrt=(t,e,n,r,i,s)=>s,bX=(t,e,n)=>{var r=n??t;if(!_s(r))return na(r,e,0)},Prt=Le([Zn,p5,Trt,Ert,Crt],(t,e,n,r,i)=>e.filter(s=>t==="horizontal"?s.xAxisId===n:s.yAxisId===r).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),Nrt=(t,e,n,r)=>{var i=Zn(t);return i==="horizontal"?hI(t,"yAxis",n,r):hI(t,"xAxis",e,r)},Ort=(t,e,n)=>{var r=Zn(t);return r==="horizontal"?xq(t,"xAxis",e):xq(t,"yAxis",n)},Drt=(t,e,n)=>{var r={},i=t.filter(SA),s=t.filter(c=>c.stackId==null),a=i.reduce((c,u)=>(c[u.stackId]||(c[u.stackId]=[]),c[u.stackId].push(u),c),r),o=Object.entries(a).map(c=>{var[u,f]=c,p=f.map(x=>x.dataKey),m=bX(e,n,f[0].barSize);return{stackId:u,dataKeys:p,barSize:m}}),l=s.map(c=>{var u=[c.dataKey].filter(p=>p!=null),f=bX(e,n,c.barSize);return{stackId:void 0,dataKeys:u,barSize:f}});return[...o,...l]},Lrt=Le([Prt,hKe,Ort],Drt),Irt=(t,e,n,r,i)=>{var s,a,o=u1(t,e,n,r,i);if(o!=null){var l=Zn(t),c=Eie(t),{maxBarSize:u}=o,f=_s(u)?c:u,p,m;return l==="horizontal"?(p=ix(t,"xAxis",e,r),m=rx(t,"xAxis",e,r)):(p=ix(t,"yAxis",n,r),m=rx(t,"yAxis",n,r)),(s=(a=K2(p,m,!0))!==null&&a!==void 0?a:f)!==null&&s!==void 0?s:0}},uae=(t,e,n,r)=>{var i=Zn(t),s,a;return i==="horizontal"?(s=ix(t,"xAxis",e,r),a=rx(t,"xAxis",e,r)):(s=ix(t,"yAxis",n,r),a=rx(t,"yAxis",n,r)),K2(s,a)};function krt(t,e,n,r,i){var s=r.length;if(!(s<1)){var a=na(t,n,0,!0),o,l=[];if(Pi(r[0].barSize)){var c=!1,u=n/s,f=r.reduce((_,E)=>_+(E.barSize||0),0);f+=(s-1)*a,f>=n&&(f-=(s-1)*a,a=0),f>=n&&u>0&&(c=!0,u*=.9,f=s*u);var p=(n-f)/2>>0,m={offset:p-a,size:0};o=r.reduce((_,E)=>{var T,A={stackId:E.stackId,dataKeys:E.dataKeys,position:{offset:m.offset+m.size+a,size:c?u:(T=E.barSize)!==null&&T!==void 0?T:0}},C=[..._,A];return m=C[C.length-1].position,C},l)}else{var x=na(e,n,0,!0);n-2*x-(s-1)*a<=0&&(a=0);var b=(n-2*x-(s-1)*a)/s;b>1&&(b>>=0);var v=Pi(i)?Math.min(b,i):b;o=r.reduce((_,E,T)=>[..._,{stackId:E.stackId,dataKeys:E.dataKeys,position:{offset:x+(b+a)*T+(b-v)/2,size:v}}],l)}return o}}var Brt=(t,e,n,r,i,s,a)=>{var o=_s(a)?e:a,l=krt(n,r,i!==s?i:s,t,o);return i!==s&&l!=null&&(l=l.map(c=>uT(uT({},c),{},{position:uT(uT({},c.position),{},{offset:c.position.offset-i/2})}))),l},Frt=Le([Lrt,Eie,fKe,Cie,Irt,uae,Mrt],Brt),Urt=(t,e,n,r)=>ix(t,"xAxis",e,r),jrt=(t,e,n,r)=>ix(t,"yAxis",n,r),zrt=(t,e,n,r)=>rx(t,"xAxis",e,r),$rt=(t,e,n,r)=>rx(t,"yAxis",n,r),Grt=Le([Frt,u1],(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}}),Vrt=(t,e)=>{var n=d5(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var i=t[r];if(i){var{stackedData:s}=i;if(s)return s.find(a=>a.key===n)}}}},Hrt=Le([Nrt,u1],Vrt),Wrt=Le([ss,XF,Urt,jrt,zrt,$rt,Grt,Zn,n5,uae,Hrt,u1,Rrt],(t,e,n,r,i,s,a,o,l,c,u,f,p)=>{var{chartData:m,dataStartIndex:x,dataEndIndex:b}=l;if(!(f==null||a==null||e==null||o!=="horizontal"&&o!=="vertical"||n==null||r==null||i==null||s==null||c==null)){var{data:v}=f,_;if(v!=null&&v.length>0?_=v:_=m?.slice(x,b+1),_!=null)return vrt({layout:o,barSettings:f,pos:a,parentViewBox:e,bandSize:c,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:s,stackedData:u,displayedData:_,offset:t,cells:p,dataStartIndex:x})}}),dae=t=>{var{chartData:e}=t,n=Ir(),r=eo();return w.useEffect(()=>r?()=>{}:(n(Pq(e)),()=>{n(Pq(void 0))}),[e,n,r]),null},_X={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},fae=Ja({name:"brush",initialState:_X,reducers:{setBrushSettings(t,e){return e.payload==null?_X:e.payload}}}),{setBrushSettings:Hat}=fae.actions,qrt=fae.reducer;function Xrt(t,e,n){return(e=Yrt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yrt(t){var e=Krt(t,"string");return typeof e=="symbol"?e:e+""}function Krt(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Q5{static create(e){return new Q5(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(n){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?e>=r&&e<=i:e>=i&&e<=r}}Xrt(Q5,"EPS",1e-4);function Zrt(t){return(t%180+180)%180}var Qrt=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=Zrt(i),a=s*Math.PI/180,o=Math.atan(r/n),l=a>o&&a<Math.PI-o?r/Math.sin(a):n/Math.cos(a);return Math.abs(l)},Jrt={dots:[],areas:[],lines:[]},hae=Ja({name:"referenceElements",initialState:Jrt,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=ql(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=ql(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=ql(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:Wat,removeDot:qat,addArea:Xat,removeArea:Yat,addLine:Kat,removeLine:Zat}=hae.actions,eit=hae.reducer,tit=w.createContext(void 0),nit=t=>{var{children:e}=t,[n]=w.useState("".concat(Yb("recharts"),"-clip")),r=sae();if(r==null)return null;var{x:i,y:s,width:a,height:o}=r;return w.createElement(tit.Provider,{value:n},w.createElement("defs",null,w.createElement("clipPath",{id:n},w.createElement("rect",{x:i,y:s,height:o,width:a}))),e)};function pae(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e)n.push(t[r]);return n}function rit(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Qrt(r,n)}function iit(t,e,n){var r=n==="width",{x:i,y:s,width:a,height:o}=t;return e===1?{start:r?i:s,end:r?i+a:s+o}:{start:r?i+a:s+o,end:r?i:s}}function mE(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var s=n();return t*(e-t*s/2-r)>=0&&t*(e+t*s/2-i)<=0}function sit(t,e){return pae(t,e+1)}function ait(t,e,n,r,i){for(var s=(r||[]).slice(),{start:a,end:o}=e,l=0,c=1,u=a,f=function(){var x=r?.[l];if(x===void 0)return{v:pae(r,c)};var b=l,v,_=()=>(v===void 0&&(v=n(x,b)),v),E=x.coordinate,T=l===0||mE(t,E,_,u,o);T||(l=0,u=a,c+=1),T&&(u=E+t*(_()/2+i),l+=c)},p;c<=s.length;)if(p=f(),p)return p.v;return[]}function SX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ws(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SX(Object(n),!0).forEach(function(r){oit(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oit(t,e,n){return(e=lit(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lit(t){var e=cit(t,"string");return typeof e=="symbol"?e:e+""}function cit(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uit(t,e,n,r,i){for(var s=(r||[]).slice(),a=s.length,{start:o}=e,{end:l}=e,c=function(p){var m=s[p],x,b=()=>(x===void 0&&(x=n(m,p)),x);if(p===a-1){var v=t*(m.coordinate+t*b()/2-l);s[p]=m=Ws(Ws({},m),{},{tickCoord:v>0?m.coordinate-v*t:m.coordinate})}else s[p]=m=Ws(Ws({},m),{},{tickCoord:m.coordinate});if(m.tickCoord!=null){var _=mE(t,m.tickCoord,b,o,l);_&&(l=m.tickCoord-t*(b()/2+i),s[p]=Ws(Ws({},m),{},{isShow:!0}))}},u=a-1;u>=0;u--)c(u);return s}function dit(t,e,n,r,i,s){var a=(r||[]).slice(),o=a.length,{start:l,end:c}=e;if(s){var u=r[o-1],f=n(u,o-1),p=t*(u.coordinate+t*f/2-c);if(a[o-1]=u=Ws(Ws({},u),{},{tickCoord:p>0?u.coordinate-p*t:u.coordinate}),u.tickCoord!=null){var m=mE(t,u.tickCoord,()=>f,l,c);m&&(c=u.tickCoord-t*(f/2+i),a[o-1]=Ws(Ws({},u),{},{isShow:!0}))}}for(var x=s?o-1:o,b=function(E){var T=a[E],A,C=()=>(A===void 0&&(A=n(T,E)),A);if(E===0){var M=t*(T.coordinate-t*C()/2-l);a[E]=T=Ws(Ws({},T),{},{tickCoord:M<0?T.coordinate-M*t:T.coordinate})}else a[E]=T=Ws(Ws({},T),{},{tickCoord:T.coordinate});if(T.tickCoord!=null){var P=mE(t,T.tickCoord,C,l,c);P&&(l=T.tickCoord+t*(C()/2+i),a[E]=Ws(Ws({},T),{},{isShow:!0}))}},v=0;v<x;v++)b(v);return a}function J5(t,e,n){var{tick:r,ticks:i,viewBox:s,minTickGap:a,orientation:o,interval:l,tickFormatter:c,unit:u,angle:f}=t;if(!i||!i.length||!r)return[];if(qt(l)||J_.isSsr){var p;return(p=sit(i,qt(l)?l:0))!==null&&p!==void 0?p:[]}var m=[],x=o==="top"||o==="bottom"?"width":"height",b=u&&x==="width"?sb(u,{fontSize:e,letterSpacing:n}):{width:0,height:0},v=(T,A)=>{var C=typeof c=="function"?c(T.value,A):T.value;return x==="width"?rit(sb(C,{fontSize:e,letterSpacing:n}),b,f):sb(C,{fontSize:e,letterSpacing:n})[x]},_=i.length>=2?vs(i[1].coordinate-i[0].coordinate):1,E=iit(s,_,x);return l==="equidistantPreserveStart"?ait(_,E,v,i,a):(l==="preserveStart"||l==="preserveStartEnd"?m=dit(_,E,v,i,a,l==="preserveStartEnd"):m=uit(_,E,v,i,a),m.filter(T=>T.isShow))}var fit=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:s=0}=t,a=0;if(e){Array.from(e).forEach(u=>{if(u){var f=u.getBoundingClientRect();f.width>a&&(a=f.width)}});var o=n?n.getBoundingClientRect().width:0,l=i+s,c=a+l+o+(n?r:0);return Math.round(c)}return 0},hit=["axisLine","width","height","className","hide","ticks","axisType"];function pit(t,e){if(t==null)return{};var n,r,i=mit(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function mit(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function jp(){return jp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jp.apply(null,arguments)}function wX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ui(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wX(Object(n),!0).forEach(function(r){git(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function git(t,e,n){return(e=xit(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xit(t){var e=yit(t,"string");return typeof e=="symbol"?e:e+""}function yit(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var id={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:ks.axis};function vit(t){var{x:e,y:n,width:r,height:i,orientation:s,mirror:a,axisLine:o,otherSvgProps:l}=t;if(!o)return null;var c=Ui(Ui(Ui({},l),Zl(o)),{},{fill:"none"});if(s==="top"||s==="bottom"){var u=+(s==="top"&&!a||s==="bottom"&&a);c=Ui(Ui({},c),{},{x1:e,y1:n+u*i,x2:e+r,y2:n+u*i})}else{var f=+(s==="left"&&!a||s==="right"&&a);c=Ui(Ui({},c),{},{x1:e+f*r,y1:n,x2:e+f*r,y2:n+i})}return w.createElement("line",jp({},c,{className:qe("recharts-cartesian-axis-line",Ip(o,"className"))}))}function bit(t,e,n,r,i,s,a,o,l){var c,u,f,p,m,x,b=o?-1:1,v=t.tickSize||a,_=qt(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":c=u=t.coordinate,p=n+ +!o*i,f=p-b*v,x=f-b*l,m=_;break;case"left":f=p=t.coordinate,u=e+ +!o*r,c=u-b*v,m=c-b*l,x=_;break;case"right":f=p=t.coordinate,u=e+ +o*r,c=u+b*v,m=c+b*l,x=_;break;default:c=u=t.coordinate,p=n+ +o*i,f=p+b*v,x=f+b*l,m=_;break}return{line:{x1:c,y1:f,x2:u,y2:p},tick:{x:m,y:x}}}function _it(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function Sit(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function wit(t){var{option:e,tickProps:n,value:r}=t,i,s=qe(n.className,"recharts-cartesian-axis-tick-value");if(w.isValidElement(e))i=w.cloneElement(e,Ui(Ui({},n),{},{className:s}));else if(typeof e=="function")i=e(Ui(Ui({},n),{},{className:s}));else{var a="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(a=qe(a,e?.className)),i=w.createElement(RA,jp({},n,{className:a}),r)}return i}var Tit=w.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:s,tickFormatter:a,unit:o,padding:l,tickTextProps:c,orientation:u,mirror:f,x:p,y:m,width:x,height:b,tickSize:v,tickMargin:_,fontSize:E,letterSpacing:T,getTicksConfig:A,events:C,axisType:M}=t,P=J5(Ui(Ui({},A),{},{ticks:n}),E,T),D=_it(u,f),N=Sit(u,f),L=Zl(A),k=Xb(r),I={};typeof i=="object"&&(I=i);var F=Ui(Ui({},L),{},{fill:"none"},I),z=P.map(j=>Ui({entry:j},bit(j,p,m,x,b,u,v,f,_))),H=z.map(j=>{var{entry:G,line:W}=j;return w.createElement(wa,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(G.value,"-").concat(G.coordinate,"-").concat(G.tickCoord)},i&&w.createElement("line",jp({},F,W,{className:qe("recharts-cartesian-axis-tick-line",Ip(i,"className"))})))}),B=z.map((j,G)=>{var{entry:W,tick:re}=j,$=Ui(Ui(Ui(Ui({textAnchor:D,verticalAnchor:N},L),{},{stroke:"none",fill:s},k),re),{},{index:G,payload:W,visibleTicksCount:P.length,tickFormatter:a,padding:l},c);return w.createElement(wa,jp({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(W.value,"-").concat(W.coordinate,"-").concat(W.tickCoord)},q_(C,W,G)),r&&w.createElement(wit,{option:r,tickProps:$,value:"".concat(typeof a=="function"?a(W.value,G):W.value).concat(o||"")}))});return w.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(M,"-ticks")},B.length>0&&w.createElement(ic,{zIndex:ks.label},w.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(M,"-tick-labels"),ref:e},B)),H.length>0&&w.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(M,"-tick-lines")},H))}),Eit=w.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:s,hide:a,ticks:o,axisType:l}=t,c=pit(t,hit),[u,f]=w.useState(""),[p,m]=w.useState(""),x=w.useRef(null);w.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var v;return fit({ticks:x.current,label:(v=t.labelRef)===null||v===void 0?void 0:v.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var b=w.useCallback(v=>{if(v){var _=v.getElementsByClassName("recharts-cartesian-axis-tick-value");x.current=_;var E=_[0];if(E){var T=window.getComputedStyle(E),A=T.fontSize,C=T.letterSpacing;(A!==u||C!==p)&&(f(A),m(C))}}},[u,p]);return a||r!=null&&r<=0||i!=null&&i<=0?null:w.createElement(ic,{zIndex:t.zIndex},w.createElement(wa,{className:qe("recharts-cartesian-axis",s)},w.createElement(vit,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:Zl(t)}),w.createElement(Tit,{ref:b,axisType:l,events:c,fontSize:u,getTicksConfig:t,height:t.height,letterSpacing:p,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:o,unit:t.unit,width:t.width,x:t.x,y:t.y}),w.createElement(aet,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},w.createElement(xet,{label:t.label,labelRef:t.labelRef}),t.children)))}),eU=w.forwardRef((t,e)=>{var n=ws(t,id);return w.createElement(Eit,jp({},n,{ref:e}))});eU.displayName="CartesianAxis";var Cit=["x1","y1","x2","y2","key"],Ait=["offset"],Mit=["xAxisId","yAxisId"],Rit=["xAxisId","yAxisId"];function TX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ys(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TX(Object(n),!0).forEach(function(r){Pit(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pit(t,e,n){return(e=Nit(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nit(t){var e=Oit(t,"string");return typeof e=="symbol"?e:e+""}function Oit(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cp(){return cp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cp.apply(null,arguments)}function gE(t,e){if(t==null)return{};var n,r,i=Dit(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Dit(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Lit=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:s,height:a,ry:o}=t;return w.createElement("rect",{x:r,y:i,ry:o,width:s,height:a,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function mae(t){var{option:e,lineItemProps:n}=t,r;if(w.isValidElement(e))r=w.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var i,{x1:s,y1:a,x2:o,y2:l,key:c}=n,u=gE(n,Cit),f=(i=Zl(u))!==null&&i!==void 0?i:{},{offset:p}=f,m=gE(f,Ait);r=w.createElement("line",cp({},m,{x1:s,y1:a,x2:o,y2:l,fill:"none",key:c}))}return r}function Iit(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:a}=t,o=gE(t,Mit),l=i.map((c,u)=>{var f=Ys(Ys({},o),{},{x1:e,y1:c,x2:e+n,y2:c,key:"line-".concat(u),index:u});return w.createElement(mae,{key:"line-".concat(u),option:r,lineItemProps:f})});return w.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function kit(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:a}=t,o=gE(t,Rit),l=i.map((c,u)=>{var f=Ys(Ys({},o),{},{x1:c,y1:e,x2:c,y2:e+n,key:"line-".concat(u),index:u});return w.createElement(mae,{option:r,lineItemProps:f,key:"line-".concat(u)})});return w.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function Bit(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:s,height:a,horizontalPoints:o,horizontal:l=!0}=t;if(!l||!e||!e.length||o==null)return null;var c=o.map(f=>Math.round(f+i-i)).sort((f,p)=>f-p);i!==c[0]&&c.unshift(0);var u=c.map((f,p)=>{var m=!c[p+1],x=m?i+a-f:c[p+1]-f;if(x<=0)return null;var b=p%e.length;return w.createElement("rect",{key:"react-".concat(p),y:f,x:r,height:x,width:s,stroke:"none",fill:e[b],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return w.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function Fit(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:s,width:a,height:o,verticalPoints:l}=t;if(!e||!n||!n.length)return null;var c=l.map(f=>Math.round(f+i-i)).sort((f,p)=>f-p);i!==c[0]&&c.unshift(0);var u=c.map((f,p)=>{var m=!c[p+1],x=m?i+a-f:c[p+1]-f;if(x<=0)return null;var b=p%n.length;return w.createElement("rect",{key:"react-".concat(p),x:f,y:s,width:x,height:o,stroke:"none",fill:n[b],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return w.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var Uit=(t,e)=>{var{xAxis:n,width:r,height:i,offset:s}=t;return Dre(J5(Ys(Ys(Ys({},id),n),{},{ticks:Lre(n),viewBox:{x:0,y:0,width:r,height:i}})),s.left,s.left+s.width,e)},jit=(t,e)=>{var{yAxis:n,width:r,height:i,offset:s}=t;return Dre(J5(Ys(Ys(Ys({},id),n),{},{ticks:Lre(n),viewBox:{x:0,y:0,width:r,height:i}})),s.top,s.top+s.height,e)},zit={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:ks.grid};function gae(t){var e=KF(),n=ZF(),r=$re(),i=Ys(Ys({},ws(t,zit)),{},{x:qt(t.x)?t.x:r.left,y:qt(t.y)?t.y:r.top,width:qt(t.width)?t.width:r.width,height:qt(t.height)?t.height:r.height}),{xAxisId:s,yAxisId:a,x:o,y:l,width:c,height:u,syncWithTicks:f,horizontalValues:p,verticalValues:m}=i,x=eo(),b=Vt(N=>yq(N,"xAxis",s,x)),v=Vt(N=>yq(N,"yAxis",a,x));if(!Hc(c)||!Hc(u)||!qt(o)||!qt(l))return null;var _=i.verticalCoordinatesGenerator||Uit,E=i.horizontalCoordinatesGenerator||jit,{horizontalPoints:T,verticalPoints:A}=i;if((!T||!T.length)&&typeof E=="function"){var C=p&&p.length,M=E({yAxis:v?Ys(Ys({},v),{},{ticks:C?p:v.ticks}):void 0,width:e??c,height:n??u,offset:r},C?!0:f);Z2(Array.isArray(M),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof M,"]")),Array.isArray(M)&&(T=M)}if((!A||!A.length)&&typeof _=="function"){var P=m&&m.length,D=_({xAxis:b?Ys(Ys({},b),{},{ticks:P?m:b.ticks}):void 0,width:e??c,height:n??u,offset:r},P?!0:f);Z2(Array.isArray(D),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof D,"]")),Array.isArray(D)&&(A=D)}return w.createElement(ic,{zIndex:i.zIndex},w.createElement("g",{className:"recharts-cartesian-grid"},w.createElement(Lit,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),w.createElement(Bit,cp({},i,{horizontalPoints:T})),w.createElement(Fit,cp({},i,{verticalPoints:A})),w.createElement(Iit,cp({},i,{offset:r,horizontalPoints:T,xAxis:b,yAxis:v})),w.createElement(kit,cp({},i,{offset:r,verticalPoints:A,xAxis:b,yAxis:v}))))}gae.displayName="CartesianGrid";var $it=["domain","range"],Git=["domain","range"];function EX(t,e){if(t==null)return{};var n,r,i=Vit(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Vit(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function CX(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function xae(t,e){if(t===e)return!0;var{domain:n,range:r}=t,i=EX(t,$it),{domain:s,range:a}=e,o=EX(e,Git);return!CX(n,s)||!CX(r,a)?!1:Z5(i,o)}var Hit=["dangerouslySetInnerHTML","ticks"],Wit=["id"];function _I(){return _I=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_I.apply(null,arguments)}function AX(t,e){if(t==null)return{};var n,r,i=qit(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function qit(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Xit(t){var e=Ir(),n=w.useRef(null);return w.useLayoutEffect(()=>{n.current===null?e(nnt(t)):n.current!==t&&e(rnt({prev:n.current,next:t})),n.current=t},[t,e]),w.useLayoutEffect(()=>()=>{n.current&&(e(int(n.current)),n.current=null)},[e]),null}var Yit=t=>{var{xAxisId:e,className:n}=t,r=Vt(XF),i=eo(),s="xAxis",a=Vt(v=>Lx(v,s,e,i)),o=Vt(v=>ise(v,s,e,i)),l=Vt(v=>ese(v,e)),c=Vt(v=>uZe(v,e)),u=Vt(v=>Iie(v,e));if(l==null||c==null||u==null)return null;var{dangerouslySetInnerHTML:f,ticks:p}=t,m=AX(t,Hit),{id:x}=u,b=AX(u,Wit);return w.createElement(eU,_I({},m,b,{scale:a,x:c.x,y:c.y,width:l.width,height:l.height,className:qe("recharts-".concat(s," ").concat(s),n),viewBox:r,ticks:o,axisType:s}))},Kit={allowDataOverflow:ps.allowDataOverflow,allowDecimals:ps.allowDecimals,allowDuplicatedCategory:ps.allowDuplicatedCategory,angle:ps.angle,axisLine:id.axisLine,height:ps.height,hide:!1,includeHidden:ps.includeHidden,interval:ps.interval,minTickGap:ps.minTickGap,mirror:ps.mirror,orientation:ps.orientation,padding:ps.padding,reversed:ps.reversed,scale:ps.scale,tick:ps.tick,tickCount:ps.tickCount,tickLine:id.tickLine,tickSize:id.tickSize,type:ps.type,xAxisId:0},Zit=t=>{var e=ws(t,Kit);return w.createElement(w.Fragment,null,w.createElement(Xit,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),w.createElement(Yit,e))},yae=w.memo(Zit,xae);yae.displayName="XAxis";var Qit=["dangerouslySetInnerHTML","ticks"],Jit=["id"];function SI(){return SI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},SI.apply(null,arguments)}function MX(t,e){if(t==null)return{};var n,r,i=est(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function est(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function tst(t){var e=Ir(),n=w.useRef(null);return w.useLayoutEffect(()=>{n.current===null?e(snt(t)):n.current!==t&&e(ant({prev:n.current,next:t})),n.current=t},[t,e]),w.useLayoutEffect(()=>()=>{n.current&&(e(ont(n.current)),n.current=null)},[e]),null}var nst=t=>{var{yAxisId:e,className:n,width:r,label:i}=t,s=w.useRef(null),a=w.useRef(null),o=Vt(XF),l=eo(),c=Ir(),u="yAxis",f=Vt(C=>Lx(C,u,e,l)),p=Vt(C=>tse(C,e)),m=Vt(C=>fZe(C,e)),x=Vt(C=>ise(C,u,e,l)),b=Vt(C=>kie(C,e));if(w.useLayoutEffect(()=>{if(!(r!=="auto"||!p||V5(i)||w.isValidElement(i)||b==null)){var C=s.current;if(C){var M=C.getCalculatedWidth();Math.round(p.width)!==Math.round(M)&&c(lnt({id:e,width:M}))}}},[x,p,c,i,e,r,b]),p==null||m==null||b==null)return null;var{dangerouslySetInnerHTML:v,ticks:_}=t,E=MX(t,Qit),{id:T}=b,A=MX(b,Jit);return w.createElement(eU,SI({},E,A,{ref:s,labelRef:a,scale:f,x:m.x,y:m.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:p.width,height:p.height,className:qe("recharts-".concat(u," ").concat(u),n),viewBox:o,ticks:x,axisType:u}))},rst={allowDataOverflow:ms.allowDataOverflow,allowDecimals:ms.allowDecimals,allowDuplicatedCategory:ms.allowDuplicatedCategory,angle:ms.angle,axisLine:id.axisLine,hide:!1,includeHidden:ms.includeHidden,interval:ms.interval,minTickGap:ms.minTickGap,mirror:ms.mirror,orientation:ms.orientation,padding:ms.padding,reversed:ms.reversed,scale:ms.scale,tick:ms.tick,tickCount:ms.tickCount,tickLine:id.tickLine,tickSize:id.tickSize,type:ms.type,width:ms.width,yAxisId:0},ist=t=>{var e=ws(t,rst);return w.createElement(w.Fragment,null,w.createElement(tst,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),w.createElement(nst,e))},vae=w.memo(ist,xae);vae.displayName="YAxis";var sst=(t,e)=>e,tU=Le([sst,Zn,Die,as,bse,Rd,AQe,ss],LQe),nU=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},bae=gl("mouseClick"),_ae=K_();_ae.startListening({actionCreator:bae,effect:(t,e)=>{var n=t.payload,r=tU(e.getState(),nU(n));r?.activeIndex!=null&&e.dispatch(CZe({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var wI=gl("mouseMove"),Sae=K_(),dT=null;Sae.startListening({actionCreator:wI,effect:(t,e)=>{var n=t.payload;dT!==null&&cancelAnimationFrame(dT);var r=nU(n);dT=requestAnimationFrame(()=>{var i=e.getState(),s=D5(i,i.tooltip.settings.shared);if(s==="axis"){var a=tU(i,r);a?.activeIndex!=null?e.dispatch(fse({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):e.dispatch(dse())}dT=null})}});var RX={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},wae=Ja({name:"rootProps",initialState:RX,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:RX.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),ast=wae.reducer,{updateOptions:ost}=wae.actions,Tae=Ja({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:lst}=Tae.actions,cst=Tae.reducer,Eae=gl("keyDown"),Cae=gl("focus"),rU=K_();rU.startListening({actionCreator:Eae,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var a=L5(i,kx(n),i1(n),l1(n)),o=a==null?-1:Number(a);if(!(!Number.isFinite(o)||o<0)){var l=Rd(n);if(s==="Enter"){var c=cE(n,"axis","hover",String(i.index));e.dispatch(mI({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:c}));return}var u=gZe(n),f=u==="left-to-right"?1:-1,p=s==="ArrowRight"?1:-1,m=o+p*f;if(!(l==null||m>=l.length||m<0)){var x=cE(n,"axis","hover",String(m));e.dispatch(mI({active:!0,activeIndex:m.toString(),activeDataKey:void 0,activeCoordinate:x}))}}}}}});rU.startListening({actionCreator:Cae,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var s="0",a=cE(n,"axis","hover",String(s));e.dispatch(mI({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:a}))}}}});var qo=gl("externalEvent"),Aae=K_(),jO=new Map;Aae.startListening({actionCreator:qo,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var i=r.type,s=jO.get(i);s!==void 0&&cancelAnimationFrame(s);var a=requestAnimationFrame(()=>{try{var o=e.getState(),l={activeCoordinate:fQe(o),activeDataKey:U5(o),activeIndex:Up(o),activeLabel:wse(o),activeTooltipIndex:Up(o),isTooltipActive:hQe(o)};n(l,r)}finally{jO.delete(i)}});jO.set(i,a)}}});var ust=Le([Ix],t=>t.tooltipItemPayloads),dst=Le([ust,a1,(t,e,n)=>e,(t,e,n)=>n],(t,e,n,r)=>{var i=t.find(o=>o.settings.dataKey===r);if(i!=null){var{positions:s}=i;if(s!=null){var a=e(s,n);return a}}}),Mae=gl("touchMove"),Rae=K_();Rae.startListening({actionCreator:Mae,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),i=D5(r,r.tooltip.settings.shared);if(i==="axis"){var s=tU(r,nU({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));s?.activeIndex!=null&&e.dispatch(fse({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var a,o=n.touches[0];if(document.elementFromPoint==null)return;var l=document.elementFromPoint(o.clientX,o.clientY);if(!l||!l.getAttribute)return;var c=l.getAttribute(kre),u=(a=l.getAttribute(Bre))!==null&&a!==void 0?a:void 0,f=dst(e.getState(),c,u);e.dispatch(use({activeDataKey:u,activeIndex:c,activeCoordinate:f}))}}}});var fst=ire({brush:qrt,cartesianAxis:cnt,chartData:dJe,errorBars:wnt,graphicalItems:wtt,layout:hqe,legend:_Xe,options:aJe,polarAxis:jet,polarOptions:cst,referenceElements:eit,rootProps:ast,tooltip:AZe,zIndex:XQe}),hst=function(e){return FWe({reducer:fst,preloadedState:e,middleware:n=>{var r;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((r="es6")!==null&&r!==void 0?r:"")}).concat([_ae.middleware,Sae.middleware,rU.middleware,Aae.middleware,Rae.middleware])},enhancers:n=>{var r=n;return typeof n=="function"&&(r=n()),r.concat(vre({type:"raf"}))},devTools:J_.devToolsEnabled})};function Pae(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=eo(),s=w.useRef(null);if(i)return n;s.current==null&&(s.current=hst(e));var a=UF;return w.createElement(Ynt,{context:a,store:s.current},n)}function pst(t){var{layout:e,margin:n}=t,r=Ir(),i=eo();return w.useEffect(()=>{i||(r(uqe(e)),r(cqe(n)))},[r,i,e,n]),null}var Nae=w.memo(pst,Z5);function Oae(t){var e=Ir();return w.useEffect(()=>{e(ost(t))},[e,t]),null}function PX(t){var{zIndex:e,isPanorama:n}=t,r=n?"recharts-zindex-panorama-":"recharts-zindex-",i=eae("".concat(r).concat(e)),s=Ir();return w.useLayoutEffect(()=>(s(WQe({zIndex:e,elementId:i,isPanorama:n})),()=>{s(qQe({zIndex:e,isPanorama:n}))}),[s,e,i,n]),w.createElement("g",{tabIndex:-1,id:i})}function NX(t){var{children:e,isPanorama:n}=t,r=Vt(kQe);if(!r||r.length===0)return e;var i=r.filter(a=>a<0),s=r.filter(a=>a>0);return w.createElement(w.Fragment,null,i.map(a=>w.createElement(PX,{key:a,zIndex:a,isPanorama:n})),e,s.map(a=>w.createElement(PX,{key:a,zIndex:a,isPanorama:n})))}var mst=["children"];function gst(t,e){if(t==null)return{};var n,r,i=xst(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function xst(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function xE(){return xE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xE.apply(null,arguments)}var yst={width:"100%",height:"100%",display:"block"},vst=w.forwardRef((t,e)=>{var n=KF(),r=ZF(),i=eie();if(!Hc(n)||!Hc(r))return null;var{children:s,otherAttributes:a,title:o,desc:l}=t,c,u;return a!=null&&(typeof a.tabIndex=="number"?c=a.tabIndex:c=i?0:void 0,typeof a.role=="string"?u=a.role:u=i?"application":void 0),w.createElement(PF,xE({},a,{title:o,desc:l,role:u,tabIndex:c,width:n,height:r,style:yst,ref:e}),s)}),bst=t=>{var{children:e}=t,n=Vt(dA);if(!n)return null;var{width:r,height:i,y:s,x:a}=n;return w.createElement(PF,{width:r,height:i,x:a,y:s},e)},OX=w.forwardRef((t,e)=>{var{children:n}=t,r=gst(t,mst),i=eo();return i?w.createElement(bst,null,w.createElement(NX,{isPanorama:!0},n)):w.createElement(vst,xE({ref:e},r),w.createElement(NX,{isPanorama:!1},n))});function _st(){var t=Ir(),[e,n]=w.useState(null),r=Vt(Nqe);return w.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),s=i.width/e.offsetWidth;Pi(s)&&s!==r&&t(fqe(s))}},[e,t,r]),n}function DX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Sst(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DX(Object(n),!0).forEach(function(r){wst(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wst(t,e,n){return(e=Tst(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tst(t){var e=Est(t,"string");return typeof e=="symbol"?e:e+""}function Est(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zp(){return zp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zp.apply(null,arguments)}var Cst=()=>(bJe(),null);function yE(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var Ast=w.forwardRef((t,e)=>{var n,r,i=w.useRef(null),[s,a]=w.useState({containerWidth:yE((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:yE((r=t.style)===null||r===void 0?void 0:r.height)}),o=w.useCallback((c,u)=>{a(f=>{var p=Math.round(c),m=Math.round(u);return f.containerWidth===p&&f.containerHeight===m?f:{containerWidth:p,containerHeight:m}})},[]),l=w.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null&&typeof ResizeObserver<"u"){var{width:u,height:f}=c.getBoundingClientRect();o(u,f);var p=x=>{var{width:b,height:v}=x[0].contentRect;o(b,v)},m=new ResizeObserver(p);m.observe(c),i.current=m}},[e,o]);return w.useEffect(()=>()=>{var c=i.current;c?.disconnect()},[o]),w.createElement(w.Fragment,null,w.createElement(pA,{width:s.containerWidth,height:s.containerHeight}),w.createElement("div",zp({ref:l},t)))}),Mst=w.forwardRef((t,e)=>{var{width:n,height:r}=t,[i,s]=w.useState({containerWidth:yE(n),containerHeight:yE(r)}),a=w.useCallback((l,c)=>{s(u=>{var f=Math.round(l),p=Math.round(c);return u.containerWidth===f&&u.containerHeight===p?u:{containerWidth:f,containerHeight:p}})},[]),o=w.useCallback(l=>{if(typeof e=="function"&&e(l),l!=null){var{width:c,height:u}=l.getBoundingClientRect();a(c,u)}},[e,a]);return w.createElement(w.Fragment,null,w.createElement(pA,{width:i.containerWidth,height:i.containerHeight}),w.createElement("div",zp({ref:o},t)))}),Rst=w.forwardRef((t,e)=>{var{width:n,height:r}=t;return w.createElement(w.Fragment,null,w.createElement(pA,{width:n,height:r}),w.createElement("div",zp({ref:e},t)))}),Pst=w.forwardRef((t,e)=>{var{width:n,height:r}=t;return gd(n)||gd(r)?w.createElement(Mst,zp({},t,{ref:e})):w.createElement(Rst,zp({},t,{ref:e}))});function Nst(t){return t===!0?Ast:Pst}var Ost=w.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:s,onContextMenu:a,onDoubleClick:o,onMouseDown:l,onMouseEnter:c,onMouseLeave:u,onMouseMove:f,onMouseUp:p,onTouchEnd:m,onTouchMove:x,onTouchStart:b,style:v,width:_,responsive:E,dispatchTouchEvents:T=!0}=t,A=w.useRef(null),C=Ir(),[M,P]=w.useState(null),[D,N]=w.useState(null),L=_st(),k=YF(),I=k?.width>0?k.width:_,F=k?.height>0?k.height:i,z=w.useCallback(se=>{L(se),typeof e=="function"&&e(se),P(se),N(se),se!=null&&(A.current=se)},[L,e,P,N]),H=w.useCallback(se=>{C(bae(se)),C(qo({handler:s,reactEvent:se}))},[C,s]),B=w.useCallback(se=>{C(wI(se)),C(qo({handler:c,reactEvent:se}))},[C,c]),j=w.useCallback(se=>{C(dse()),C(qo({handler:u,reactEvent:se}))},[C,u]),G=w.useCallback(se=>{C(wI(se)),C(qo({handler:f,reactEvent:se}))},[C,f]),W=w.useCallback(()=>{C(Cae())},[C]),re=w.useCallback(se=>{C(Eae(se.key))},[C]),$=w.useCallback(se=>{C(qo({handler:a,reactEvent:se}))},[C,a]),ee=w.useCallback(se=>{C(qo({handler:o,reactEvent:se}))},[C,o]),oe=w.useCallback(se=>{C(qo({handler:l,reactEvent:se}))},[C,l]),me=w.useCallback(se=>{C(qo({handler:p,reactEvent:se}))},[C,p]),te=w.useCallback(se=>{C(qo({handler:b,reactEvent:se}))},[C,b]),K=w.useCallback(se=>{T&&C(Mae(se)),C(qo({handler:x,reactEvent:se}))},[C,T,x]),ne=w.useCallback(se=>{C(qo({handler:m,reactEvent:se}))},[C,m]),Ee=Nst(E);return w.createElement(Pse.Provider,{value:M},w.createElement(_ne.Provider,{value:D},w.createElement(Ee,{width:I??v?.width,height:F??v?.height,className:qe("recharts-wrapper",r),style:Sst({position:"relative",cursor:"default",width:I,height:F},v),onClick:H,onContextMenu:$,onDoubleClick:ee,onFocus:W,onKeyDown:re,onMouseDown:oe,onMouseEnter:B,onMouseLeave:j,onMouseMove:G,onMouseUp:me,onTouchEnd:ne,onTouchMove:K,onTouchStart:te,ref:z},w.createElement(Cst,null),n)))}),Dst=["width","height","responsive","children","className","style","compact","title","desc"];function Lst(t,e){if(t==null)return{};var n,r,i=Ist(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Ist(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Dae=w.forwardRef((t,e)=>{var{width:n,height:r,responsive:i,children:s,className:a,style:o,compact:l,title:c,desc:u}=t,f=Lst(t,Dst),p=Zl(f);return l?w.createElement(w.Fragment,null,w.createElement(pA,{width:n,height:r}),w.createElement(OX,{otherAttributes:p,title:c,desc:u},s)):w.createElement(Ost,{className:a,style:o,width:n,height:r,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},w.createElement(OX,{otherAttributes:p,title:c,desc:u,ref:e},w.createElement(nit,null,s)))});function TI(){return TI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TI.apply(null,arguments)}var kst={top:5,right:5,bottom:5,left:5},Bst={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:kst,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},Fst=w.forwardRef(function(e,n){var r,i=ws(e.categoricalChartProps,Bst),{chartName:s,defaultTooltipEventType:a,validateTooltipEventTypes:o,tooltipPayloadSearcher:l,categoricalChartProps:c}=e,u={chartName:s,defaultTooltipEventType:a,validateTooltipEventTypes:o,tooltipPayloadSearcher:l,eventEmitter:void 0};return w.createElement(Pae,{preloadedState:{options:u},reduxStoreName:(r=c.id)!==null&&r!==void 0?r:s},w.createElement(dae,{chartData:c.data}),w.createElement(Nae,{layout:i.layout,margin:i.margin}),w.createElement(Oae,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),w.createElement(Dae,TI({},i,{ref:n})))}),Ust=["axis","item"],jst=w.forwardRef((t,e)=>w.createElement(Fst,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Ust,tooltipPayloadSearcher:Nse,categoricalChartProps:t,ref:e}));function zst(t){var e=Ir();return w.useEffect(()=>{e(lst(t))},[e,t]),null}var $st=["layout"];function EI(){return EI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},EI.apply(null,arguments)}function Gst(t,e){if(t==null)return{};var n,r,i=Vst(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Vst(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Hst={top:5,right:5,bottom:5,left:5},Lae={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Hst,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Wst=w.forwardRef(function(e,n){var r,i=ws(e.categoricalChartProps,Lae),{layout:s}=i,a=Gst(i,$st),{chartName:o,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:u}=e,f={chartName:o,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:u,eventEmitter:void 0};return w.createElement(Pae,{preloadedState:{options:f},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:o},w.createElement(dae,{chartData:i.data}),w.createElement(Nae,{layout:s,margin:i.margin}),w.createElement(Oae,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),w.createElement(zst,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),w.createElement(Dae,EI({},a,{ref:n})))});function LX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function IX(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LX(Object(n),!0).forEach(function(r){qst(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qst(t,e,n){return(e=Xst(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xst(t){var e=Yst(t,"string");return typeof e=="symbol"?e:e+""}function Yst(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Kst=["item"],Zst=IX(IX({},Lae),{},{layout:"centric",startAngle:0,endAngle:360}),Qst=w.forwardRef((t,e)=>{var n=ws(t,Zst);return w.createElement(Wst,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Kst,tooltipPayloadSearcher:Nse,categoricalChartProps:n,ref:e})});const kX={1:"Physical Object",2:"Synthetic",3:"Biological/Biomimetic",4:"Powered",5:"Structural",6:"Observable",7:"Physical Medium",8:"Active",9:"Intentionally Designed",10:"Outputs Effect",11:"Processes Signals/Logic",12:"State-Transforming",13:"Human-Interactive",14:"System-integrated",15:"Functionally Autonomous",16:"System-Essential",17:"Symbolic",18:"Signalling",19:"Rule-governed",20:"Compositional",21:"Normative",22:"Meta",23:"Temporal",24:"Digital/Virtual",25:"Social Construct",26:"Institutionally Defined",27:"Identity-Linked",28:"Regulated",29:"Economically Significant",30:"Politicised",31:"Ritualised",32:"Ethically Significant"};function Jst({data:t,totalEntities:e,loading:n=!1,error:r=null,onRefresh:i,isCompact:s=!1}){const a=w.useRef(null),[o,l]=w.useState(null),[c,u]=w.useState(s?16:24),[f,p]=w.useState(!s),[m,x]=w.useState("all"),[b,v]=w.useState(0),{matrix:_,maxValue:E}=w.useMemo(()=>{const D=Array.from({length:32},()=>Array(32).fill(0));let N=0;for(const L of t){const k=L.trait1-1,I=L.trait2-1;k>=0&&k<32&&I>=0&&I<32&&(D[k][I]=L.cooccurrence,D[I][k]=L.cooccurrence,N=Math.max(N,L.cooccurrence))}return{matrix:D,maxValue:N}},[t]),T=w.useMemo(()=>{if(m==="all")return Array.from({length:32},(N,L)=>L);const D=ka.findIndex(N=>N.name===m);return D===-1?[]:Array.from({length:8},(N,L)=>D*8+L)},[m]),A=w.useCallback(D=>{if(D===0||D<b)return"rgba(20, 20, 20, 1)";const N=D/E;if(N<.2){const L=N/.2;return`rgba(${Math.round(20+L*30)}, ${Math.round(20+L*40)}, ${Math.round(60+L*100)}, 1)`}else if(N<.4){const L=(N-.2)/.2;return`rgba(${Math.round(50*(1-L))}, ${Math.round(60+L*140)}, ${Math.round(160+L*95)}, 1)`}else if(N<.6){const L=(N-.4)/.2;return`rgba(${Math.round(L*100)}, ${Math.round(200+L*55)}, ${Math.round(255*(1-L)+50)}, 1)`}else if(N<.8){const L=(N-.6)/.2;return`rgba(${Math.round(100+L*155)}, ${Math.round(255-L*100)}, ${Math.round(50*(1-L))}, 1)`}else{const L=(N-.8)/.2;return`rgba(${Math.round(255)}, ${Math.round(155-L*100)}, ${Math.round(L*30)}, 1)`}},[E,b]);w.useEffect(()=>{const D=a.current;if(!D)return;const N=D.getContext("2d");if(!N)return;const L=T.length,k=f?60:0,I=L*c+k;D.width=I,D.height=I,N.fillStyle="#0a0a0a",N.fillRect(0,0,I,I);for(let F=0;F<L;F++)for(let z=0;z<L;z++){const H=T[F],B=T[z],j=_[H][B],G=k+z*c,W=k+F*c;N.fillStyle=A(j),N.fillRect(G,W,c-1,c-1),o&&o.x===z&&o.y===F&&(N.strokeStyle="#ffffff",N.lineWidth=2,N.strokeRect(G,W,c-1,c-1))}if(m==="all"){N.strokeStyle="rgba(255, 255, 255, 0.3)",N.lineWidth=2;for(let F=1;F<4;F++){const z=k+F*8*c;N.beginPath(),N.moveTo(k,z),N.lineTo(I,z),N.stroke(),N.beginPath(),N.moveTo(z,k),N.lineTo(z,I),N.stroke()}}if(f){N.font=`${Math.min(c-4,10)}px monospace`,N.textAlign="right",N.textBaseline="middle";for(let F=0;F<L;F++){const z=T[F]+1,H=Math.floor(T[F]/8);N.fillStyle=ka[H].color,N.textAlign="right",N.fillText(`${z}`,k-4,k+F*c+c/2),N.save(),N.translate(k+F*c+c/2,k-4),N.rotate(-Math.PI/2),N.textAlign="left",N.fillText(`${z}`,0,0),N.restore()}}},[_,T,c,f,o,A]);const C=D=>{const N=a.current;if(!N)return;const L=N.getBoundingClientRect(),k=N.width/L.width,I=N.height/L.height,F=f?60:0,z=(D.clientX-L.left)*k-F,H=(D.clientY-L.top)*I-F,B=Math.floor(z/c),j=Math.floor(H/c),G=T.length;if(B>=0&&B<G&&j>=0&&j<G){const W=T[j],re=T[B];l({x:B,y:j,value:_[W][re]})}else l(null)},M=()=>{l(null)},P=o?{trait1:T[o.y]+1,trait2:T[o.x]+1,name1:kX[T[o.y]+1],name2:kX[T[o.x]+1],value:o.value,percentage:(o.value/e*100).toFixed(1)}:null;return n?g.jsx(Y,{sx:{display:"flex",justifyContent:"center",py:4},children:g.jsx(lr,{})}):r?g.jsx(mi,{severity:"error",children:r}):g.jsxs(Y,{children:[g.jsxs(Y,{sx:{display:"flex",gap:2,mb:2,flexWrap:"wrap",alignItems:"center"},children:[g.jsxs(Tf,{size:"small",sx:{minWidth:120},children:[g.jsx(dp,{children:"Layer Filter"}),g.jsxs(Ku,{value:m,label:"Layer Filter",onChange:D=>x(D.target.value),children:[g.jsx(nr,{value:"all",children:"All Layers"}),ka.map(D=>g.jsx(nr,{value:D.name,children:D.name},D.name))]})]}),g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:1},children:[g.jsx(Gt,{size:"small",onClick:()=>u(D=>Math.max(8,D-4)),children:g.jsx(AZ,{fontSize:"small"})}),g.jsxs(Z,{variant:"caption",children:[c,"px"]}),g.jsx(Gt,{size:"small",onClick:()=>u(D=>Math.min(40,D+4)),children:g.jsx(CZ,{fontSize:"small"})})]}),g.jsx(Ef,{control:g.jsx(kg,{checked:f,onChange:D=>p(D.target.checked),size:"small"}),label:"Labels"}),g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:1,minWidth:150},children:[g.jsx(Z,{variant:"caption",children:"Min:"}),g.jsx(_k,{value:b,onChange:(D,N)=>v(N),min:0,max:Math.ceil(E/2),size:"small",sx:{width:100}}),g.jsx(Z,{variant:"caption",children:b})]}),i&&g.jsx(Gt,{size:"small",onClick:i,children:g.jsx(Zu,{fontSize:"small"})})]}),g.jsxs(Y,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[g.jsx(gn,{sx:{p:1,bgcolor:"rgba(0,0,0,0.5)",overflow:"auto",maxWidth:"100%"},children:g.jsx("canvas",{ref:a,onMouseMove:C,onMouseLeave:M,style:{cursor:"crosshair",imageRendering:"pixelated"}})}),g.jsxs(Y,{sx:{minWidth:200},children:[P?g.jsxs(gn,{sx:{p:2,mb:2},children:[g.jsx(Z,{variant:"subtitle2",gutterBottom:!0,children:"Co-occurrence"}),g.jsx(Y,{sx:{display:"flex",gap:1,mb:1},children:g.jsx(Dt,{label:`${P.trait1}: ${P.name1}`,size:"small",sx:{bgcolor:`${ka[Math.floor((P.trait1-1)/8)].color}30`,borderColor:ka[Math.floor((P.trait1-1)/8)].color},variant:"outlined"})}),g.jsx(Y,{sx:{display:"flex",gap:1,mb:1},children:g.jsx(Dt,{label:`${P.trait2}: ${P.name2}`,size:"small",sx:{bgcolor:`${ka[Math.floor((P.trait2-1)/8)].color}30`,borderColor:ka[Math.floor((P.trait2-1)/8)].color},variant:"outlined"})}),g.jsx(Z,{variant:"h5",color:"primary",sx:{fontWeight:700},children:P.value.toLocaleString()}),g.jsxs(Z,{variant:"caption",color:"text.secondary",children:[P.percentage,"% of entities"]})]}):g.jsx(gn,{sx:{p:2,mb:2},children:g.jsx(Z,{variant:"body2",color:"text.secondary",children:"Hover over a cell to see details"})}),g.jsxs(gn,{sx:{p:2},children:[g.jsx(Z,{variant:"subtitle2",gutterBottom:!0,children:"Scale"}),g.jsx(Y,{sx:{height:20,background:"linear-gradient(to right, #141428, #325ca0, #00c8ff, #64ff64, #ffff00, #ff9900, #ff3020)",borderRadius:1,mb:1}}),g.jsxs(Y,{sx:{display:"flex",justifyContent:"space-between"},children:[g.jsx(Z,{variant:"caption",children:"0"}),g.jsx(Z,{variant:"caption",children:E.toLocaleString()})]})]}),g.jsxs(gn,{sx:{p:2,mt:2},children:[g.jsx(Z,{variant:"subtitle2",gutterBottom:!0,children:"Layers"}),ka.map((D,N)=>g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[g.jsx(Y,{sx:{width:12,height:12,bgcolor:D.color,borderRadius:.5}}),g.jsxs(Z,{variant:"caption",children:[D.name," (",N*8+1,"-",(N+1)*8,")"]})]},D.name))]})]})]})]})}const vg="",ni={Physical:"#FF6B35",Functional:"#00E5FF",Abstract:"#9C27B0",Social:"#4CAF50"};function Bh(t){const{children:e,value:n,index:r,...i}=t;return g.jsx("div",{role:"tabpanel",hidden:n!==r,...i,children:n===r&&g.jsx(Y,{sx:{pt:2},children:e})})}const eat=({active:t,payload:e})=>{if(!t||!e||!e.length)return null;const n=e[0].payload,r=n.color||"#757575";return g.jsxs(Y,{sx:{backgroundColor:"#1a1a2e",border:`2px solid ${r}`,borderRadius:1,p:1.5,minWidth:150,boxShadow:`0 4px 12px ${r}40`},children:[g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[g.jsx(Y,{sx:{width:12,height:12,borderRadius:"50%",backgroundColor:r}}),g.jsxs(Z,{variant:"subtitle2",sx:{color:r,fontWeight:"bold"},children:[n.name," Layer"]})]}),g.jsxs(Z,{variant:"body2",sx:{color:"white"},children:[g.jsx("strong",{children:n.value.toLocaleString()})," total trait uses"]})]})},tat=({active:t,payload:e})=>{if(!t||!e||!e.length)return null;const n=e[0].payload,r=ni[n.layer]||"#757575";return g.jsxs(Y,{sx:{backgroundColor:"#1a1a2e",border:`2px solid ${r}`,borderRadius:1,p:1.5,minWidth:200,boxShadow:`0 4px 12px ${r}40`},children:[g.jsx(Z,{variant:"subtitle2",sx:{color:r,fontWeight:"bold",mb:1,borderBottom:`1px solid ${r}40`,pb:.5},children:n.name}),g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[g.jsx(Y,{sx:{width:10,height:10,borderRadius:"50%",backgroundColor:r}}),g.jsxs(Z,{variant:"caption",sx:{color:"rgba(255,255,255,0.7)"},children:[n.layer," Layer  Bit ",n.bit]})]}),g.jsxs(Y,{sx:{mt:1},children:[g.jsxs(Z,{variant:"body2",sx:{color:"white"},children:[g.jsx("strong",{children:n.count.toLocaleString()})," entities"]}),g.jsxs(Z,{variant:"body2",sx:{color:r,fontWeight:"bold"},children:[n.percentage,"% of dataset"]})]}),n.avg_confidence&&g.jsxs(Z,{variant:"caption",sx:{color:"rgba(255,255,255,0.5)",display:"block",mt:1,pt:.5,borderTop:"1px solid rgba(255,255,255,0.1)"},children:["Avg confidence: ",(n.avg_confidence*100).toFixed(1),"%"]})]})};function nat(){const[t,e]=w.useState(0),[n,r]=w.useState(!0),[i,s]=w.useState(null),[a,o]=w.useState(null),[l,c]=w.useState(null),[u,f]=w.useState(null),[p,m]=w.useState(null),[x,b]=w.useState(null),[v,_]=w.useState(null),E=async()=>{r(!0),s(null);try{const[C,M,P,D,N,L]=await Promise.all([fetch(`${vg}/api/v1/traits/statistics/frequency`),fetch(`${vg}/api/v1/traits/statistics/cooccurrence`),fetch(`${vg}/api/v1/traits/statistics/exclusivity`),fetch(`${vg}/api/v1/traits/statistics/layers`),fetch(`${vg}/api/v1/traits/statistics/confidence`),fetch(`${vg}/api/v1/traits/statistics/hex-pairs`)]);if(!C.ok)throw new Error("Failed to fetch frequency data");o(await C.json()),c(await M.json()),f(await P.json()),m(await D.json()),b(await N.json()),_(await L.json())}catch(C){s(C instanceof Error?C.message:"Failed to load analytics")}finally{r(!1)}};if(w.useEffect(()=>{E()},[]),i)return g.jsx(Y,{sx:{p:3},children:g.jsx(mi,{severity:"error",children:i})});const T=a?.traits.map(C=>({...C,shortName:C.name.length>22?C.name.substring(0,19)+"...":C.name}))||[],A=p?Object.entries(p.layers).map(([C,M])=>({name:C,value:M.total_usage,color:ni[C]})):[];return g.jsxs(Y,{sx:{height:"100%",display:"flex",flexDirection:"column",overflow:"hidden"},children:[g.jsxs(gn,{sx:{p:2,borderRadius:0,borderBottom:"1px solid rgba(0, 229, 255, 0.3)",flexShrink:0},children:[g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:2},children:[g.jsx(xZ,{sx:{fontSize:32,color:"primary.main"}}),g.jsxs(Y,{sx:{flex:1},children:[g.jsx(Z,{variant:"h5",sx:{fontWeight:"bold",color:"primary.main"},children:"Trait Analytics"}),g.jsxs(Z,{variant:"body2",color:"text.secondary",children:["Analyze trait frequency, co-occurrence, and patterns across ",a?.total_entities.toLocaleString()||"..."," entities"]})]}),g.jsx(Jt,{title:"Refresh data",children:g.jsx(Gt,{onClick:E,disabled:n,children:g.jsx(Zu,{})})})]}),g.jsxs(AK,{value:t,onChange:(C,M)=>e(M),sx:{mt:2},variant:"scrollable",scrollButtons:"auto",children:[g.jsx(Nu,{label:"Frequency"}),g.jsx(Nu,{label:"Co-occurrence"}),g.jsx(Nu,{label:"Heatmap"}),g.jsx(Nu,{label:"Exclusivity"}),g.jsx(Nu,{label:"Layers"}),g.jsx(Nu,{label:"Confidence"}),g.jsx(Nu,{label:"Hex Pairs"})]})]}),g.jsx(Y,{sx:{flex:1,overflow:"auto",p:2},children:n?g.jsx(Y,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:300},children:g.jsx(lr,{})}):g.jsxs(g.Fragment,{children:[g.jsxs(Bh,{value:t,index:0,children:[g.jsx(Z,{variant:"h6",gutterBottom:!0,children:"Trait Frequency Distribution"}),g.jsx(Z,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"How often each trait appears across all classified entities"}),g.jsx(gn,{sx:{p:2,mb:3,height:900,display:"flex",justifyContent:"flex-start"},children:g.jsx(NW,{width:"80%",height:"100%",children:g.jsxs(jst,{data:T,layout:"vertical",margin:{top:5,right:30,left:150,bottom:5},children:[g.jsx(gae,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),g.jsx(yae,{type:"number",stroke:"rgba(255,255,255,0.5)"}),g.jsx(vae,{dataKey:"shortName",type:"category",width:150,tick:{fill:"rgba(255,255,255,0.7)",fontSize:11}}),g.jsx(Iq,{content:g.jsx(tat,{})}),g.jsx(cae,{dataKey:"count",name:"Entity Count",children:T.map((C,M)=>g.jsx(sx,{fill:ni[C.layer]||"#757575"},`cell-${M}`))})]})})}),g.jsx(Fn,{container:!0,spacing:2,children:a?.traits.map(C=>g.jsx(Fn,{size:{xs:6,sm:4,md:3,lg:2},children:g.jsx(xi,{sx:{border:`1px solid ${ni[C.layer]}40`},children:g.jsxs(yi,{sx:{p:2},children:[g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[g.jsx(Dt,{label:C.bit,size:"small",sx:{backgroundColor:ni[C.layer],color:"white",fontWeight:"bold"}}),g.jsx(Z,{variant:"caption",color:"text.secondary",children:C.layer})]}),g.jsx(Z,{variant:"subtitle2",sx:{fontWeight:500},children:C.name}),g.jsxs(Z,{variant:"h6",sx:{color:ni[C.layer]},children:[C.percentage,"%"]}),g.jsxs(Z,{variant:"caption",color:"text.secondary",children:[C.count.toLocaleString()," entities"]})]})})},C.bit))})]}),g.jsxs(Bh,{value:t,index:1,children:[g.jsx(Z,{variant:"h6",gutterBottom:!0,children:"Trait Co-occurrence"}),g.jsx(Z,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Traits that frequently appear together"}),g.jsxs(Fn,{container:!0,spacing:3,children:[g.jsx(Fn,{size:{xs:12,md:6},children:g.jsxs(gn,{sx:{p:2},children:[g.jsxs(Z,{variant:"subtitle1",sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[g.jsx(y$,{color:"success"})," Strongest Pairs"]}),g.jsx(jm,{children:g.jsxs(Fm,{size:"small",children:[g.jsx(zm,{children:g.jsxs($o,{children:[g.jsx(hn,{children:"Trait 1"}),g.jsx(hn,{children:"Trait 2"}),g.jsx(hn,{align:"right",children:"Co-occur"})]})}),g.jsx(Um,{children:l?.strongest_pairs.slice(0,15).map((C,M)=>g.jsxs($o,{children:[g.jsx(hn,{children:g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:1},children:[g.jsx(Y,{sx:{width:8,height:8,borderRadius:"50%",backgroundColor:ni[C.layer1]}}),g.jsx(Z,{variant:"body2",children:C.name1})]})}),g.jsx(hn,{children:g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:1},children:[g.jsx(Y,{sx:{width:8,height:8,borderRadius:"50%",backgroundColor:ni[C.layer2]}}),g.jsx(Z,{variant:"body2",children:C.name2})]})}),g.jsx(hn,{align:"right",children:g.jsx(Dt,{label:C.cooccurrence.toLocaleString(),size:"small",color:"success"})})]},M))})]})})]})}),g.jsx(Fn,{size:{xs:12,md:6},children:g.jsxs(gn,{sx:{p:2},children:[g.jsx(Z,{variant:"subtitle1",sx:{mb:2},children:"Co-occurrence Insights"}),g.jsx(Z,{variant:"body2",color:"text.secondary",paragraph:!0,children:"The table shows trait pairs that appear together most frequently. High co-occurrence may indicate:"}),g.jsxs("ul",{style:{margin:0,paddingLeft:20},children:[g.jsx("li",{children:g.jsx(Z,{variant:"body2",color:"text.secondary",children:"Related concepts that naturally co-exist"})}),g.jsx("li",{children:g.jsx(Z,{variant:"body2",color:"text.secondary",children:"Potential trait redundancy if always together"})}),g.jsx("li",{children:g.jsx(Z,{variant:"body2",color:"text.secondary",children:"Common entity archetypes in the dataset"})})]})]})})]})]}),g.jsxs(Bh,{value:t,index:2,children:[g.jsx(Z,{variant:"h6",gutterBottom:!0,children:"Trait Co-occurrence Heatmap"}),g.jsx(Z,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Interactive 3232 matrix showing how often trait pairs appear together"}),l&&g.jsx(Jst,{data:l.matrix,totalEntities:a?.total_entities||0,onRefresh:E})]}),g.jsxs(Bh,{value:t,index:3,children:[g.jsx(Z,{variant:"h6",gutterBottom:!0,children:"Mutual Exclusivity"}),g.jsx(Z,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Trait pairs that rarely appear together (low Jaccard index)"}),g.jsxs(Fn,{container:!0,spacing:3,children:[g.jsx(Fn,{size:{xs:12,md:6},children:g.jsxs(gn,{sx:{p:2},children:[g.jsxs(Z,{variant:"subtitle1",sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[g.jsx(x$,{color:"error"})," Most Exclusive Pairs"]}),g.jsx(jm,{children:g.jsxs(Fm,{size:"small",children:[g.jsx(zm,{children:g.jsxs($o,{children:[g.jsx(hn,{children:"Trait 1"}),g.jsx(hn,{children:"Trait 2"}),g.jsx(hn,{align:"right",children:"Jaccard"}),g.jsx(hn,{align:"right",children:"Both"})]})}),g.jsx(Um,{children:u?.most_exclusive.slice(0,15).map((C,M)=>g.jsxs($o,{children:[g.jsx(hn,{children:g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:1},children:[g.jsx(Y,{sx:{width:8,height:8,borderRadius:"50%",backgroundColor:ni[C.layer1]}}),g.jsx(Z,{variant:"body2",sx:{fontSize:"0.8rem"},children:C.name1})]})}),g.jsx(hn,{children:g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:1},children:[g.jsx(Y,{sx:{width:8,height:8,borderRadius:"50%",backgroundColor:ni[C.layer2]}}),g.jsx(Z,{variant:"body2",sx:{fontSize:"0.8rem"},children:C.name2})]})}),g.jsx(hn,{align:"right",children:g.jsx(Dt,{label:C.jaccard.toFixed(3),size:"small",sx:{backgroundColor:C.jaccard<.1?"#f4433620":"#ff980020",color:C.jaccard<.1?"#f44336":"#ff9800"}})}),g.jsx(hn,{align:"right",children:g.jsx(Z,{variant:"body2",color:"text.secondary",children:C.both_count})})]},M))})]})})]})}),g.jsx(Fn,{size:{xs:12,md:6},children:g.jsxs(gn,{sx:{p:2},children:[g.jsx(Z,{variant:"subtitle1",sx:{mb:2},children:"Understanding Exclusivity"}),g.jsxs(Z,{variant:"body2",color:"text.secondary",paragraph:!0,children:[g.jsx("strong",{children:"Jaccard Index"}),": Measures overlap between two trait sets. Lower values indicate traits rarely appear together."]}),g.jsx(Z,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Exclusive trait pairs may indicate:"}),g.jsxs("ul",{style:{margin:0,paddingLeft:20},children:[g.jsx("li",{children:g.jsx(Z,{variant:"body2",color:"text.secondary",children:"Opposing concepts (e.g., Digital vs Physical Medium)"})}),g.jsx("li",{children:g.jsx(Z,{variant:"body2",color:"text.secondary",children:"Traits from different domains"})}),g.jsx("li",{children:g.jsx(Z,{variant:"body2",color:"text.secondary",children:"Well-differentiated trait definitions"})})]})]})})]})]}),g.jsxs(Bh,{value:t,index:4,children:[g.jsx(Z,{variant:"h6",gutterBottom:!0,children:"Layer Distribution"}),g.jsx(Z,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Trait usage statistics by layer"}),g.jsxs(Fn,{container:!0,spacing:3,children:[g.jsx(Fn,{size:{xs:12,md:6},children:g.jsxs(gn,{sx:{p:2,height:350},children:[g.jsx(Z,{variant:"subtitle1",sx:{mb:2},children:"Total Trait Usage by Layer"}),g.jsx(NW,{width:"100%",height:"85%",children:g.jsxs(Qst,{children:[g.jsx(rae,{data:A,cx:"50%",cy:"50%",outerRadius:100,dataKey:"value",nameKey:"name",label:({name:C,percent:M})=>`${C}: ${((M??0)*100).toFixed(0)}%`,children:A.map((C,M)=>g.jsx(sx,{fill:C.color},`cell-${M}`))}),g.jsx(Jre,{}),g.jsx(Iq,{content:g.jsx(eat,{})})]})})]})}),g.jsx(Fn,{size:{xs:12,md:6},children:g.jsxs(gn,{sx:{p:2},children:[g.jsx(Z,{variant:"subtitle1",sx:{mb:2},children:"Layer Statistics"}),g.jsx(jm,{children:g.jsxs(Fm,{size:"small",children:[g.jsx(zm,{children:g.jsxs($o,{children:[g.jsx(hn,{children:"Layer"}),g.jsx(hn,{align:"right",children:"Total Usage"}),g.jsx(hn,{align:"right",children:"Avg per Trait"}),g.jsx(hn,{align:"right",children:"Avg per Entity"})]})}),g.jsx(Um,{children:p&&Object.entries(p.layers).map(([C,M])=>g.jsxs($o,{children:[g.jsx(hn,{children:g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:1},children:[g.jsx(Y,{sx:{width:12,height:12,borderRadius:"50%",backgroundColor:ni[C]}}),C]})}),g.jsx(hn,{align:"right",children:M.total_usage?.toLocaleString()}),g.jsx(hn,{align:"right",children:M.avg_usage_per_trait}),g.jsx(hn,{align:"right",children:M.avg_traits_per_entity?.toFixed(2)})]},C))})]})})]})})]})]}),g.jsxs(Bh,{value:t,index:5,children:[g.jsx(Z,{variant:"h6",gutterBottom:!0,children:"Confidence Analysis"}),g.jsx(Z,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"LLM classification confidence per trait"}),g.jsxs(Fn,{container:!0,spacing:3,children:[g.jsx(Fn,{size:{xs:12,md:6},children:g.jsxs(gn,{sx:{p:2},children:[g.jsxs(Z,{variant:"subtitle1",sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[g.jsx(x$,{sx:{color:"#f44336"}})," Lowest Confidence Traits"]}),g.jsx(Z,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Traits where the LLM was least confident - may need clearer definitions"}),g.jsx(jm,{children:g.jsxs(Fm,{size:"small",children:[g.jsx(zm,{children:g.jsxs($o,{children:[g.jsx(hn,{children:"Trait"}),g.jsx(hn,{children:"Layer"}),g.jsx(hn,{align:"right",children:"Avg Conf"}),g.jsx(hn,{align:"right",children:"Range"})]})}),g.jsx(Um,{children:x?.lowest_confidence.map(C=>g.jsxs($o,{children:[g.jsx(hn,{children:g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:1},children:[g.jsx(Dt,{label:C.bit,size:"small",sx:{minWidth:30}}),g.jsx(Z,{variant:"body2",children:C.name})]})}),g.jsx(hn,{children:g.jsx(Dt,{label:C.layer,size:"small",sx:{backgroundColor:`${ni[C.layer]}30`,color:ni[C.layer]}})}),g.jsx(hn,{align:"right",children:g.jsxs(Z,{variant:"body2",sx:{color:C.avg_confidence<.8?"#f44336":C.avg_confidence<.9?"#ff9800":"#4caf50"},children:[(C.avg_confidence*100).toFixed(1),"%"]})}),g.jsx(hn,{align:"right",children:g.jsxs(Z,{variant:"body2",color:"text.secondary",children:[(C.confidence_range*100).toFixed(1),"%"]})})]},C.bit))})]})})]})}),g.jsx(Fn,{size:{xs:12,md:6},children:g.jsxs(gn,{sx:{p:2},children:[g.jsxs(Z,{variant:"subtitle1",sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[g.jsx(y$,{sx:{color:"#4caf50"}})," Highest Confidence Traits"]}),g.jsx(Z,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Traits with most consistent, confident classifications"}),g.jsx(jm,{children:g.jsxs(Fm,{size:"small",children:[g.jsx(zm,{children:g.jsxs($o,{children:[g.jsx(hn,{children:"Trait"}),g.jsx(hn,{children:"Layer"}),g.jsx(hn,{align:"right",children:"Avg Conf"}),g.jsx(hn,{align:"right",children:"Entities"})]})}),g.jsx(Um,{children:x?.highest_confidence.map(C=>g.jsxs($o,{children:[g.jsx(hn,{children:g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:1},children:[g.jsx(Dt,{label:C.bit,size:"small",sx:{minWidth:30}}),g.jsx(Z,{variant:"body2",children:C.name})]})}),g.jsx(hn,{children:g.jsx(Dt,{label:C.layer,size:"small",sx:{backgroundColor:`${ni[C.layer]}30`,color:ni[C.layer]}})}),g.jsx(hn,{align:"right",children:g.jsxs(Z,{variant:"body2",sx:{color:"#4caf50"},children:[(C.avg_confidence*100).toFixed(1),"%"]})}),g.jsx(hn,{align:"right",children:g.jsx(Z,{variant:"body2",color:"text.secondary",children:C.entity_count.toLocaleString()})})]},C.bit))})]})})]})})]})]}),g.jsxs(Bh,{value:t,index:6,children:[g.jsx(Z,{variant:"h6",gutterBottom:!0,children:"Hex Pair Frequency by Layer"}),g.jsx(Z,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Most common byte values (hex pairs) for each layer in UHT codes"}),g.jsx(Fn,{container:!0,spacing:3,children:v&&["Physical","Functional","Abstract","Social"].map(C=>{const M=v.layers?.[C];return M?g.jsx(Fn,{size:{xs:12,md:6},children:g.jsxs(gn,{sx:{p:2},children:[g.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[g.jsx(Y,{sx:{width:16,height:16,borderRadius:"50%",backgroundColor:ni[C]}}),g.jsxs(Z,{variant:"subtitle1",sx:{color:ni[C],fontWeight:600},children:[C," Layer"]}),g.jsxs(Z,{variant:"caption",color:"text.secondary",sx:{ml:"auto"},children:[M.unique_pairs," unique values"]})]}),g.jsx(jm,{sx:{maxHeight:400},children:g.jsxs(Fm,{size:"small",stickyHeader:!0,children:[g.jsx(zm,{children:g.jsxs($o,{children:[g.jsx(hn,{sx:{fontWeight:600},children:"Hex"}),g.jsx(hn,{sx:{fontWeight:600},children:"Binary"}),g.jsx(hn,{align:"right",sx:{fontWeight:600},children:"Count"}),g.jsx(hn,{align:"right",sx:{fontWeight:600},children:"%"})]})}),g.jsx(Um,{children:M.pairs.map((P,D)=>g.jsxs($o,{sx:{backgroundColor:D<3?`${ni[C]}10`:"transparent"},children:[g.jsx(hn,{children:g.jsx(Z,{variant:"body2",sx:{fontFamily:"monospace",fontWeight:D<3?600:400,color:D<3?ni[C]:"text.primary"},children:P.hex})}),g.jsx(hn,{children:g.jsx(Z,{variant:"body2",sx:{fontFamily:"monospace",fontSize:"0.75rem",color:"text.secondary"},children:parseInt(P.hex,16).toString(2).padStart(8,"0")})}),g.jsx(hn,{align:"right",children:g.jsx(Z,{variant:"body2",children:P.count.toLocaleString()})}),g.jsx(hn,{align:"right",children:g.jsx(Dt,{label:`${P.percentage}%`,size:"small",sx:{height:20,fontSize:"0.7rem",backgroundColor:D<3?`${ni[C]}30`:"rgba(255,255,255,0.08)",color:D<3?ni[C]:"text.secondary"}})})]},P.hex))})]})})]})},C):null})}),v&&g.jsxs(gn,{sx:{p:2,mt:3},children:[g.jsx(Z,{variant:"subtitle1",sx:{mb:2},children:"Summary"}),g.jsx(Fn,{container:!0,spacing:2,children:["Physical","Functional","Abstract","Social"].map(C=>{const M=v.layers?.[C];if(!M)return null;const P=M.pairs[0];return g.jsx(Fn,{size:{xs:6,md:3},children:g.jsxs(Y,{sx:{textAlign:"center",p:1,borderRadius:1,backgroundColor:`${ni[C]}10`},children:[g.jsxs(Z,{variant:"caption",color:"text.secondary",children:[C," Top"]}),g.jsx(Z,{variant:"h5",sx:{fontFamily:"monospace",color:ni[C],fontWeight:700},children:P?.hex||"--"}),g.jsxs(Z,{variant:"caption",color:"text.secondary",children:[P?.percentage||0,"% of entities"]})]})},C)})})]})]})]})})]})}const rat=typeof window<"u"&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")?"http://localhost:8100/api/v1":"/api/v1";function iat(){const[t]=_E(),e=yl(),[n,r]=w.useState("loading"),[i,s]=w.useState("");return w.useEffect(()=>{(async()=>{const o=t.get("token");if(!o){r("error"),s("Invalid verification link. No token provided.");return}try{const l=await vi.get(`${rat}/users/verify-email/${o}`);r("success"),s(l.data.message||"Email verified successfully!")}catch(l){r("error"),s(l.response?.data?.detail||"Verification failed. The link may be invalid or expired.")}})()},[t]),g.jsx(Y,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",p:2},children:g.jsxs(gn,{sx:{p:4,maxWidth:400,textAlign:"center",backgroundColor:"background.paper",border:"1px solid rgba(0, 229, 255, 0.3)"},children:[n==="loading"&&g.jsxs(g.Fragment,{children:[g.jsx(lr,{size:60,sx:{mb:2}}),g.jsx(Z,{variant:"h6",children:"Verifying your email..."})]}),n==="success"&&g.jsxs(g.Fragment,{children:[g.jsx(S_,{sx:{fontSize:60,color:"success.main",mb:2}}),g.jsx(Z,{variant:"h6",gutterBottom:!0,children:"Email Verified!"}),g.jsx(mi,{severity:"success",sx:{mb:3,textAlign:"left"},children:i}),g.jsx(un,{variant:"contained",onClick:()=>e("/"),fullWidth:!0,children:"Go to Home"})]}),n==="error"&&g.jsxs(g.Fragment,{children:[g.jsx(Mwe,{sx:{fontSize:60,color:"error.main",mb:2}}),g.jsx(Z,{variant:"h6",gutterBottom:!0,children:"Verification Failed"}),g.jsx(mi,{severity:"error",sx:{mb:3,textAlign:"left"},children:i}),g.jsx(un,{variant:"contained",onClick:()=>e("/"),fullWidth:!0,children:"Go to Home"})]})]})})}const sat=FE({palette:{mode:"dark",primary:{main:"#00E5FF"},secondary:{main:"#FF6B35"},background:{default:"#0A0A0A",paper:"#1A1A1A"},text:{primary:"#FFFFFF",secondary:"#B0B0B0"}},typography:{fontFamily:'"Roboto Mono", "Monaco", monospace',h1:{fontSize:"2rem",fontWeight:600,color:"#00E5FF","@media (max-width:600px)":{fontSize:"1.5rem"}},h2:{fontSize:"1.5rem",fontWeight:500,"@media (max-width:600px)":{fontSize:"1.25rem"}},h3:{"@media (max-width:600px)":{fontSize:"1.1rem"}},h4:{"@media (max-width:600px)":{fontSize:"1rem"}},h5:{"@media (max-width:600px)":{fontSize:"0.95rem"}},h6:{"@media (max-width:600px)":{fontSize:"0.9rem"}}},components:{MuiButton:{styleOverrides:{root:{textTransform:"none",borderRadius:8,minHeight:44}}},MuiIconButton:{styleOverrides:{root:{minWidth:44,minHeight:44}}},MuiCard:{styleOverrides:{root:{backgroundColor:"rgba(26, 26, 26, 0.9)",border:"1px solid rgba(0, 229, 255, 0.3)",borderRadius:12}}},MuiTextField:{styleOverrides:{root:{"& .MuiInputBase-root":{minHeight:48}}}}}}),BX=240;function aat(){const{isMobile:t,isTablet:e,drawerOpen:n,closeDrawer:r}=tc(),i=t||e;return g.jsxs(Y,{sx:{display:"flex",height:"100dvh",overflow:"hidden"},children:[!i&&g.jsx(b$,{}),i&&g.jsx(vK,{anchor:"left",open:n,onClose:r,sx:{"& .MuiDrawer-paper":{width:BX,backgroundColor:"background.paper"}},children:g.jsx(b$,{onNavigate:r})}),g.jsxs(Y,{sx:{flexGrow:1,display:"flex",flexDirection:"column",overflow:"hidden",minWidth:0,width:i?"100%":`calc(100% - ${BX}px)`},children:[g.jsx(Wwe,{}),g.jsx(Y,{sx:{flexGrow:1,overflow:"hidden",position:"relative",display:"flex",flexDirection:"column",minWidth:0},children:g.jsxs(jce,{children:[g.jsx(ca,{path:"/",element:g.jsx(e7,{})}),g.jsx(ca,{path:"/traits",element:g.jsx(Jwe,{})}),g.jsx(ca,{path:"/meta-classes",element:g.jsx(sTe,{})}),g.jsx(ca,{path:"/classify",element:g.jsx(aTe,{})}),g.jsx(ca,{path:"/graph",element:g.jsx(ZGe,{})}),g.jsx(ca,{path:"/comparison",element:g.jsx(cVe,{})}),g.jsx(ca,{path:"/build",element:g.jsx(pVe,{})}),g.jsx(ca,{path:"/collections",element:g.jsx(HH,{})}),g.jsx(ca,{path:"/collections/:id",element:g.jsx(HH,{})}),g.jsx(ca,{path:"/list",element:g.jsx($Ve,{})}),g.jsx(ca,{path:"/gallery",element:g.jsx(e7,{})}),g.jsx(ca,{path:"/entity/:uuid",element:g.jsx(JVe,{})}),g.jsx(ca,{path:"/analytics",element:g.jsx(nat,{})}),g.jsx(ca,{path:"/verify-email",element:g.jsx(iat,{})})]})})]})]})}function oat(){return g.jsx(BK,{children:g.jsxs(lpe,{theme:sat,children:[g.jsx(Exe,{}),g.jsx(xwe,{children:g.jsx(R1e,{children:g.jsx(_we,{children:g.jsx(uue,{children:g.jsx(P1e,{children:g.jsx(aat,{})})})})})})]})})}Xle.createRoot(document.getElementById("root")).render(g.jsx(w.StrictMode,{children:g.jsx(oat,{})}));
